<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>React-AudioContext</title>
      <link href="/2025/04/17/%E5%89%8D%E7%AB%AF-React-React-AudioContext/"/>
      <url>/2025/04/17/%E5%89%8D%E7%AB%AF-React-React-AudioContext/</url>
      
        <content type="html"><![CDATA[<h1 id="å®˜æ–¹æ–‡æ¡£"><a href="#å®˜æ–¹æ–‡æ¡£" class="headerlink" title="å®˜æ–¹æ–‡æ¡£"></a>å®˜æ–¹æ–‡æ¡£</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/BaseAudioContext/createOscillator">BaseAudioContext.createOscillator() - Web API | MDN</a></p><h1 id="ğŸ§ -ä»€ä¹ˆæ˜¯-AudioContextï¼Ÿ"><a href="#ğŸ§ -ä»€ä¹ˆæ˜¯-AudioContextï¼Ÿ" class="headerlink" title="ğŸ§  ä»€ä¹ˆæ˜¯ AudioContextï¼Ÿ"></a>ğŸ§  ä»€ä¹ˆæ˜¯ AudioContextï¼Ÿ</h1><p><code>AudioContext</code> æ˜¯ Web Audio API çš„æ ¸å¿ƒæ¥å£ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªéŸ³é¢‘å¤„ç†çš„ä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå…è®¸ä½ åˆ›å»ºã€å¤„ç†å’Œæ’­æ”¾éŸ³é¢‘ã€‚</p><p>åˆ›å»ºæ–¹å¼éå¸¸ç®€å•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> audioCtx = <span class="keyword">new</span> (<span class="variable language_">window</span>.<span class="property">AudioContext</span> || <span class="variable language_">window</span>.<span class="property">webkitAudioContext</span>)();</span><br></pre></td></tr></table></figure><p>å…¼å®¹ Safari çš„è€å†™æ³•ä¹Ÿè¦å¸¦ä¸Šã€‚</p><h1 id="ğŸ›-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ğŸ›-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ğŸ› æ ¸å¿ƒæ¦‚å¿µ"></a>ğŸ› æ ¸å¿ƒæ¦‚å¿µ</h1><p>åœ¨ AudioContext ä¸­ï¼ŒéŸ³é¢‘é€šè¿‡ä¸€ä¸ª<strong>éŸ³é¢‘å›¾ï¼ˆAudio Graphï¼‰</strong>è¿›è¡Œå¤„ç†ã€‚æ¯ä¸ªèŠ‚ç‚¹ï¼ˆAudioNodeï¼‰éƒ½å¯ä»¥æ¥æ”¶ã€å¤„ç†æˆ–è¾“å‡ºå£°éŸ³ã€‚</p><p>æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2025/04/17/%E5%89%8D%E7%AB%AF-React-React-AudioContext/image-20250417003045575.png" alt="image-20250417003045575"></p><h1 id="ğŸ”§-å¸¸ç”¨-AudioNode-å’Œ-API"><a href="#ğŸ”§-å¸¸ç”¨-AudioNode-å’Œ-API" class="headerlink" title="ğŸ”§ å¸¸ç”¨ AudioNode å’Œ API"></a>ğŸ”§ å¸¸ç”¨ AudioNode å’Œ API</h1><h2 id="1-åˆ›å»ºéŸ³é¢‘æº"><a href="#1-åˆ›å»ºéŸ³é¢‘æº" class="headerlink" title="1. åˆ›å»ºéŸ³é¢‘æº"></a>1. åˆ›å»ºéŸ³é¢‘æº</h2><h3 id="1-æ’­æ”¾éŸ³é¢‘æ–‡ä»¶"><a href="#1-æ’­æ”¾éŸ³é¢‘æ–‡ä»¶" class="headerlink" title="(1) æ’­æ”¾éŸ³é¢‘æ–‡ä»¶"></a>(1) æ’­æ”¾éŸ³é¢‘æ–‡ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;your-audio-file.mp3&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> res.<span class="title function_">arrayBuffer</span>())</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">arrayBuffer</span> =&gt;</span> audioCtx.<span class="title function_">decodeAudioData</span>(arrayBuffer))</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">audioBuffer</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> source = audioCtx.<span class="title function_">createBufferSource</span>();</span><br><span class="line">    source.<span class="property">buffer</span> = audioBuffer;</span><br><span class="line">    source.<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>);</span><br><span class="line">    source.<span class="title function_">start</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="2-ç”Ÿæˆå£°éŸ³ï¼ˆOscillatorNodeï¼‰"><a href="#2-ç”Ÿæˆå£°éŸ³ï¼ˆOscillatorNodeï¼‰" class="headerlink" title="(2) ç”Ÿæˆå£°éŸ³ï¼ˆOscillatorNodeï¼‰"></a>(2) ç”Ÿæˆå£°éŸ³ï¼ˆOscillatorNodeï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> oscillator = audioCtx.<span class="title function_">createOscillator</span>();</span><br><span class="line">oscillator.<span class="property">type</span> = <span class="string">&#x27;sine&#x27;</span>; <span class="comment">// ç±»å‹ï¼šsine, square, sawtooth, triangle</span></span><br><span class="line">oscillator.<span class="property">frequency</span>.<span class="title function_">setValueAtTime</span>(<span class="number">440</span>, audioCtx.<span class="property">currentTime</span>); <span class="comment">// A4éŸ³</span></span><br><span class="line">oscillator.<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>);</span><br><span class="line">oscillator.<span class="title function_">start</span>();</span><br><span class="line">oscillator.<span class="title function_">stop</span>(audioCtx.<span class="property">currentTime</span> + <span class="number">2</span>); <span class="comment">// æ’­æ”¾2ç§’</span></span><br></pre></td></tr></table></figure><hr><h2 id="2-éŸ³é‡æ§åˆ¶ï¼ˆGainNodeï¼‰"><a href="#2-éŸ³é‡æ§åˆ¶ï¼ˆGainNodeï¼‰" class="headerlink" title="2. éŸ³é‡æ§åˆ¶ï¼ˆGainNodeï¼‰"></a>2. éŸ³é‡æ§åˆ¶ï¼ˆGainNodeï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gainNode = audioCtx.<span class="title function_">createGain</span>();</span><br><span class="line">gainNode.<span class="property">gain</span>.<span class="title function_">setValueAtTime</span>(<span class="number">0.5</span>, audioCtx.<span class="property">currentTime</span>); <span class="comment">// è®¾ç½®éŸ³é‡</span></span><br><span class="line"></span><br><span class="line">source.<span class="title function_">connect</span>(gainNode).<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>); <span class="comment">// source æ˜¯éŸ³é¢‘æº</span></span><br></pre></td></tr></table></figure><hr><h2 id="3-åˆ›å»ºéŸ³é¢‘åˆ†æå™¨ï¼ˆAnalyserNodeï¼‰"><a href="#3-åˆ›å»ºéŸ³é¢‘åˆ†æå™¨ï¼ˆAnalyserNodeï¼‰" class="headerlink" title="3. åˆ›å»ºéŸ³é¢‘åˆ†æå™¨ï¼ˆAnalyserNodeï¼‰"></a>3. åˆ›å»ºéŸ³é¢‘åˆ†æå™¨ï¼ˆAnalyserNodeï¼‰</h2><p>å¦‚æœä½ è¦åšéŸ³é¢‘å¯è§†åŒ–ï¼Œæ¯”å¦‚éŸ³æ³¢åŠ¨ç”»ï¼Œå°±éœ€è¦ç”¨å®ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> analyser = audioCtx.<span class="title function_">createAnalyser</span>();</span><br><span class="line">source.<span class="title function_">connect</span>(analyser);</span><br><span class="line">analyser.<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é¢‘ç‡æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> dataArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(analyser.<span class="property">frequencyBinCount</span>);</span><br><span class="line">analyser.<span class="title function_">getByteFrequencyData</span>(dataArray);</span><br></pre></td></tr></table></figure><hr><h2 id="4-éŸ³æ•ˆå¤„ç†ï¼ˆBiquadFilterNodeï¼‰"><a href="#4-éŸ³æ•ˆå¤„ç†ï¼ˆBiquadFilterNodeï¼‰" class="headerlink" title="4. éŸ³æ•ˆå¤„ç†ï¼ˆBiquadFilterNodeï¼‰"></a>4. éŸ³æ•ˆå¤„ç†ï¼ˆBiquadFilterNodeï¼‰</h2><p>å¯ä»¥åŠ æ»¤æ³¢æ•ˆæœï¼Œæ¯”å¦‚ä½é€šæ»¤æ³¢å™¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> filter = audioCtx.<span class="title function_">createBiquadFilter</span>();</span><br><span class="line">filter.<span class="property">type</span> = <span class="string">&#x27;lowpass&#x27;</span>;</span><br><span class="line">filter.<span class="property">frequency</span>.<span class="title function_">setValueAtTime</span>(<span class="number">1000</span>, audioCtx.<span class="property">currentTime</span>);</span><br><span class="line"></span><br><span class="line">source.<span class="title function_">connect</span>(filter).<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="5-æ§åˆ¶æ’­æ”¾æ—¶é—´"><a href="#5-æ§åˆ¶æ’­æ”¾æ—¶é—´" class="headerlink" title="5. æ§åˆ¶æ’­æ”¾æ—¶é—´"></a>5. æ§åˆ¶æ’­æ”¾æ—¶é—´</h2><p>å¯ä»¥ç”¨ <code>start(when)</code> å’Œ <code>stop(when)</code> æ§åˆ¶æ’­æ”¾æ—¶é—´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source.<span class="title function_">start</span>(audioCtx.<span class="property">currentTime</span> + <span class="number">1</span>); <span class="comment">// 1ç§’åå¼€å§‹</span></span><br><span class="line">source.<span class="title function_">stop</span>(audioCtx.<span class="property">currentTime</span> + <span class="number">5</span>); <span class="comment">// 5ç§’ååœæ­¢</span></span><br></pre></td></tr></table></figure><hr><h1 id="âš ï¸-æ³¨æ„äº‹é¡¹"><a href="#âš ï¸-æ³¨æ„äº‹é¡¹" class="headerlink" title="âš ï¸ æ³¨æ„äº‹é¡¹"></a>âš ï¸ æ³¨æ„äº‹é¡¹</h1><ol><li><p><strong>AudioContext é»˜è®¤æ˜¯æš‚åœçŠ¶æ€</strong>ï¼šç”¨æˆ·å¿…é¡»æœ‰æ“ä½œï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰åæ‰èƒ½æ’­æ”¾ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  audioCtx.<span class="title function_">resume</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>èµ„æºé‡Šæ”¾</strong>ï¼šæ’­æ”¾å®Œåæœ€å¥½ <code>stop()</code> å¹¶æ–­å¼€è¿æ¥ï¼Œé‡Šæ”¾èµ„æºã€‚</p></li><li><p><strong>è·¨åŸŸéŸ³é¢‘æ³¨æ„ CORS</strong>ï¼šåŠ è½½å¤–éƒ¨éŸ³é¢‘æ–‡ä»¶æ—¶è¦ä¿è¯æœåŠ¡ç«¯è®¾ç½®äº† CORS å¤´ã€‚</p></li></ol><h1 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h1><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> context = <span class="keyword">new</span> <span class="title class_">AudioContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> osc = context.<span class="title function_">createOscillator</span>();</span><br><span class="line">osc.<span class="property">frequency</span>.<span class="property">value</span> = <span class="number">220</span>;</span><br><span class="line">osc.<span class="property">type</span> = <span class="string">&quot;square&quot;</span>;</span><br><span class="line">osc.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> volume = context.<span class="title function_">createGain</span>();</span><br><span class="line">volume.<span class="property">gain</span>.<span class="property">value</span> = <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> out = context.<span class="property">destination</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nodes = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, osc);</span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;b&quot;</span>, volume);</span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;c&quot;</span>, out);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> context.stateæ˜¯å¦åœ¨è¿è¡Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">boolean</span>&#125; æ˜¯å¦è¿è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">inRunning</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> context.<span class="property">state</span> === <span class="string">&quot;running&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ¨éŸ³é¢‘æ­£åœ¨è¿è¡Œæ—¶æš‚åœå®ƒï¼Œä¸åœ¨è¿è¡Œæ—¶æ¢å¤å®ƒå¦‚æœåœ¨è¿è¡Œ,</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toggleAudio</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">inRunning</span>() ? context.<span class="title function_">suspend</span>() : context.<span class="title function_">resume</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥idå’Œdataæ›´æ–°å¯¹åº”çš„Nodeå‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Record&lt;string, any&gt;</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updateAudioNode</span>(<span class="params">id: <span class="built_in">string</span>, data: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> node = nodes.<span class="title function_">get</span>(id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [key, val] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(data)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node[key] <span class="keyword">instanceof</span> <span class="title class_">AudioParam</span>) &#123;</span><br><span class="line">      node[key].<span class="property">value</span> = val;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      node[key] = val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥idï¼Œæ–­å¼€èŠ‚ç‚¹è¿æ¥ï¼Œæš‚åœèŠ‚ç‚¹çŠ¶æ€ï¼Œåˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">removeAudioNode</span>(<span class="params">id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> node = nodes.<span class="title function_">get</span>(id);</span><br><span class="line"></span><br><span class="line">  node.<span class="title function_">disconnect</span>();</span><br><span class="line">  node.<span class="property">stop</span>?.();</span><br><span class="line">  nodes.<span class="title function_">delete</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„idï¼Œå°†ä»–ä»¬è¿æ¥èµ·æ¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">sourceId</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">targetId</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">sourceId: <span class="built_in">string</span>, targetId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> source = nodes.<span class="title function_">get</span>(sourceId);</span><br><span class="line">  <span class="keyword">const</span> target = nodes.<span class="title function_">get</span>(targetId);</span><br><span class="line"></span><br><span class="line">  source.<span class="title function_">connect</span>(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„idï¼Œå°†ä»–ä»¬çš„è”ç³»æ–­å¼€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">sourceId</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">targetId</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">disconnect</span>(<span class="params">sourceId: <span class="built_in">string</span>, targetId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> source = nodes.<span class="title function_">get</span>(sourceId);</span><br><span class="line">  <span class="keyword">const</span> target = nodes.<span class="title function_">get</span>(targetId);</span><br><span class="line"></span><br><span class="line">  source.<span class="title function_">disconnect</span>(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥ç±»å‹ï¼Œæ ¹æ®ç±»å‹ç”Ÿæˆå¯¹åº”çš„AudioNode</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">type</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Record&lt;string, any&gt;</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createAudioNode</span>(<span class="params"></span></span><br><span class="line"><span class="params">  id: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="keyword">type</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  data: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;osc&quot;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> node = context.<span class="title function_">createOscillator</span>();</span><br><span class="line">      node.<span class="property">frequency</span>.<span class="property">value</span> = data.<span class="property">frequency</span>;</span><br><span class="line">      node.<span class="property">type</span> = data.<span class="property">type</span>;</span><br><span class="line">      node.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line">      nodes.<span class="title function_">set</span>(id, node);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;volume&quot;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> node = context.<span class="title function_">createGain</span>();</span><br><span class="line">      node.<span class="property">gain</span>.<span class="property">value</span> = data.<span class="property">gain</span>;</span><br><span class="line"></span><br><span class="line">      nodes.<span class="title function_">set</span>(id, node);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Appçµæ„Ÿ-åˆ·é¢˜è½¯ä»¶</title>
      <link href="/2025/04/04/%E5%AE%89%E5%8D%93-App%E7%81%B5%E6%84%9F-%E5%88%B7%E9%A2%98%E8%BD%AF%E4%BB%B6/"/>
      <url>/2025/04/04/%E5%AE%89%E5%8D%93-App%E7%81%B5%E6%84%9F-%E5%88%B7%E9%A2%98%E8%BD%AF%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h1><ul><li>åº”ç”¨èƒ½å¤Ÿä»åŒ…å«ç­”æ¡ˆçš„ Word æˆ– PDF é¢˜åº“ä¸­é€é¢˜æå–é¢˜ç›®ä¿¡æ¯ã€‚</li></ul><h1 id="ç•Œé¢åˆ†è§£"><a href="#ç•Œé¢åˆ†è§£" class="headerlink" title="ç•Œé¢åˆ†è§£"></a>ç•Œé¢åˆ†è§£</h1><h2 id="æ ‡ç­¾æ "><a href="#æ ‡ç­¾æ " class="headerlink" title="æ ‡ç­¾æ "></a>æ ‡ç­¾æ </h2><ul><li>é¦–é¡µ</li><li>ç»ƒä¹ </li></ul><h2 id="é¦–é¡µé¡µé¢"><a href="#é¦–é¡µé¡µé¢" class="headerlink" title="é¦–é¡µé¡µé¢"></a>é¦–é¡µé¡µé¢</h2><ul><li>é¢˜åº“</li><li>åˆ›å»ºé”™é¢˜</li><li>å…¨éƒ¨é”™é¢˜</li><li>ä¸Šä¼ æ¡†</li></ul><h2 id="ç»ƒä¹ é¡µé¢"><a href="#ç»ƒä¹ é¡µé¢" class="headerlink" title="ç»ƒä¹ é¡µé¢"></a>ç»ƒä¹ é¡µé¢</h2><p>é¢˜åº“åˆ—è¡¨</p><h2 id="åšé¢˜é¡µé¢"><a href="#åšé¢˜é¡µé¢" class="headerlink" title="åšé¢˜é¡µé¢"></a>åšé¢˜é¡µé¢</h2><h3 id="Bar"><a href="#Bar" class="headerlink" title="Bar"></a>Bar</h3><ul><li>ç­”é¢˜æ¨¡å¼</li><li>èƒŒé¢˜æ¨¡å¼</li></ul><h3 id="åšé¢˜æ¨¡å¼"><a href="#åšé¢˜æ¨¡å¼" class="headerlink" title="åšé¢˜æ¨¡å¼"></a>åšé¢˜æ¨¡å¼</h3><ul><li>æ˜¾ç¤ºé¢˜ç›®ç±»å‹ã€å…·ä½“é¢˜ç›®å†…å®¹ã€é€‰é¡¹ã€‚</li><li>åº•éƒ¨æ ‡ç­¾æ åŒ…æ‹¬ï¼š<ul><li>æ”¶è—é¢˜ç›®åŠŸèƒ½</li><li>æ­£ç¡®ã€é”™è¯¯ã€ä¸ç¡®å®šé¢˜ç›®æ•°é‡ç»Ÿè®¡</li><li>é¢˜ç›®åˆ—è¡¨å¿«é€Ÿå¯¼èˆªæŒ‰é’®</li></ul></li></ul><h3 id="èƒŒé¢˜æ¨¡å¼"><a href="#èƒŒé¢˜æ¨¡å¼" class="headerlink" title="èƒŒé¢˜æ¨¡å¼"></a>èƒŒé¢˜æ¨¡å¼</h3><p>åœ¨åšé¢˜æ¨¡å¼çš„åŸºç¡€ä¸Šå¢åŠ è§£æå’Œç¬”è®°åŒº</p><h2 id="é”™é¢˜é¡µé¢-æ”¶è—é¡µé¢"><a href="#é”™é¢˜é¡µé¢-æ”¶è—é¡µé¢" class="headerlink" title="é”™é¢˜é¡µé¢&#x2F;æ”¶è—é¡µé¢"></a>é”™é¢˜é¡µé¢&#x2F;æ”¶è—é¡µé¢</h2><ul><li>æä¾›å¯¼å‡ºåŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·å¯¼å‡ºé”™é¢˜æˆ–æ”¶è—ã€‚</li><li>æ”¯æŒé”™é¢˜ç»ƒä¹ å’Œæ”¶è—ç»ƒä¹ ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæœ‰é’ˆå¯¹æ€§åœ°ç»ƒä¹ è‡ªå·±çš„å¼±ç‚¹æˆ–æ„Ÿå…´è¶£çš„é¢˜ç›®ã€‚</li></ul><p>ç”¨ React Native æ¥å®ç°è¿™ä¸ªåˆ·é¢˜ App æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå®ƒæ—¢èƒ½è·¨å¹³å°ï¼Œä¹Ÿæœ‰å¤§é‡ç°æˆç»„ä»¶åº“å¯ç”¨ã€‚æ ¹æ®ä½ ç›®å‰çš„éœ€æ±‚åˆ†æå’ŒåŠŸèƒ½ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥è®¾è®¡ä¸€ä¸ªæ¸…æ™°ã€å¯æ‰©å±•çš„é¡¹ç›®ç»“æ„ã€‚</p><hr><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">QuizApp/</span><br><span class="line">â”œâ”€â”€ assets/                  # é™æ€èµ„æºï¼ˆå›¾æ ‡ã€å›¾ç‰‡ç­‰ï¼‰</span><br><span class="line">â”œâ”€â”€ components/              # é€šç”¨ç»„ä»¶ï¼ˆæŒ‰é’®ã€å¡ç‰‡ã€æ ‡ç­¾ç­‰ï¼‰</span><br><span class="line">â”œâ”€â”€ constants/               # å¸¸é‡ï¼ˆä¸»é¢˜ã€é¢œè‰²ã€å°ºå¯¸ã€æšä¸¾ï¼‰</span><br><span class="line">â”œâ”€â”€ navigation/              # è·¯ç”±é…ç½®</span><br><span class="line">â”‚   â”œâ”€â”€ TabNavigator.js</span><br><span class="line">â”‚   â””â”€â”€ StackNavigator.js</span><br><span class="line">â”œâ”€â”€ screens/                 # å„ä¸ªé¡µé¢</span><br><span class="line">â”‚   â”œâ”€â”€ HomeScreen/</span><br><span class="line">â”‚   â”‚   â”œâ”€â”€ index.js</span><br><span class="line">â”‚   â”‚   â””â”€â”€ styles.js</span><br><span class="line">â”‚   â”œâ”€â”€ PracticeScreen/</span><br><span class="line">â”‚   â”œâ”€â”€ QuizScreen/</span><br><span class="line">â”‚   â”œâ”€â”€ ReviewScreen/        # é”™é¢˜ / æ”¶è—é¢˜é¡µé¢</span><br><span class="line">â”‚   â””â”€â”€ UploadScreen/</span><br><span class="line">â”œâ”€â”€ context/                 # å…¨å±€çŠ¶æ€ï¼ˆç”¨æˆ·æ•°æ®ã€é¢˜åº“çŠ¶æ€ç­‰ï¼‰</span><br><span class="line">â”‚   â””â”€â”€ QuizContext.js</span><br><span class="line">â”œâ”€â”€ services/                # æœåŠ¡å±‚ï¼ˆæ–‡ä»¶è§£æã€å­˜å‚¨ã€APIè°ƒç”¨ï¼‰</span><br><span class="line">â”‚   â”œâ”€â”€ fileParser.js        # Word/PDFè§£æ</span><br><span class="line">â”‚   â””â”€â”€ storageService.js</span><br><span class="line">â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°ï¼ˆæ ¼å¼åŒ–ã€ç»Ÿè®¡ç­‰ï¼‰</span><br><span class="line">â”œâ”€â”€ data/                    # æœ¬åœ°é¢˜åº“æ•°æ®ï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ App.js                   # å…¥å£</span><br><span class="line">â””â”€â”€ package.json</span><br></pre></td></tr></table></figure><hr><h2 id="æ ¸å¿ƒæ¨¡å—è§£é‡Š"><a href="#æ ¸å¿ƒæ¨¡å—è§£é‡Š" class="headerlink" title="æ ¸å¿ƒæ¨¡å—è§£é‡Š"></a>æ ¸å¿ƒæ¨¡å—è§£é‡Š</h2><h3 id="1-navigation"><a href="#1-navigation" class="headerlink" title="1. navigation/"></a>1. <code>navigation/</code></h3><p>ä½¿ç”¨ <code>react-navigation</code> ç®¡ç†ï¼š</p><ul><li>Tab å¯¼èˆªï¼ˆé¦–é¡µã€ç»ƒä¹ ï¼‰</li><li>Stack å¯¼èˆªï¼ˆè¿›å…¥é¢˜åº“ â†’ åšé¢˜é¡µé¢ â†’ é”™é¢˜&#x2F;æ”¶è—ï¼‰</li></ul><h3 id="2-screens"><a href="#2-screens" class="headerlink" title="2. screens/"></a>2. <code>screens/</code></h3><p>æ¯ä¸ªé¡µé¢éƒ½æ‹†ä¸€ä¸ªç›®å½•ï¼Œä¾¿äºç»´æŠ¤æ ·å¼ã€é€»è¾‘ä¸ç»„ä»¶ã€‚</p><h3 id="3-services-fileParser-js"><a href="#3-services-fileParser-js" class="headerlink" title="3. services/fileParser.js"></a>3. <code>services/fileParser.js</code></h3><p>è¿™æ˜¯ä¸€ä¸ªé‡ç‚¹æ¨¡å—ï¼š</p><ul><li>å°† Word&#x2F;PDF é¢˜åº“è§£ææˆç»“æ„åŒ– JSONï¼ˆæ¨èç”¨ <code>react-native-pdf</code> + åç«¯è¾…åŠ©è§£æï¼Œæˆ–å‰ç«¯ç”¨ <code>pdf-parse</code>ï¼‰</li></ul><h3 id="4-context-QuizContext-js"><a href="#4-context-QuizContext-js" class="headerlink" title="4. context/QuizContext.js"></a>4. <code>context/QuizContext.js</code></h3><p>ç”¨ <code>React Context + useReducer</code> ç®¡ç†å…¨å±€æ•°æ®ï¼š</p><ul><li>å½“å‰é¢˜åº“ã€ç­”é¢˜è¿›åº¦ã€é”™é¢˜&#x2F;æ”¶è—çŠ¶æ€ç­‰ã€‚</li></ul><hr><h2 id="ğŸš€-æŠ€æœ¯æ¨è"><a href="#ğŸš€-æŠ€æœ¯æ¨è" class="headerlink" title="ğŸš€ æŠ€æœ¯æ¨è"></a>ğŸš€ æŠ€æœ¯æ¨è</h2><table><thead><tr><th>åŠŸèƒ½</th><th>æŠ€æœ¯æ ˆ</th></tr></thead><tbody><tr><td>è·¯ç”±</td><td><code>react-navigation</code></td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td><code>React Context</code> or <code>Zustand</code></td></tr><tr><td>PDFè§£æ</td><td>åç«¯è§£æï¼ˆNode + <code>pdf-parse</code>ï¼‰ï¼Œå‰ç«¯å¤„ç†ç»“æœ</td></tr><tr><td>æ–‡ä»¶ä¸Šä¼ </td><td><code>expo-document-picker</code> or <code>react-native-document-picker</code></td></tr><tr><td>æœ¬åœ°å­˜å‚¨</td><td><code>AsyncStorage</code> or <code>react-native-mmkv</code></td></tr><tr><td>é¢˜ç›®æ˜¾ç¤º</td><td>FlatList + è‡ªå®šä¹‰é¢˜ç›®ç»„ä»¶</td></tr><tr><td>ä¸»é¢˜æ ·å¼</td><td><code>styled-components</code> or <code>tailwind-rn</code></td></tr></tbody></table><hr><h2 id="âœ…-TODOä¼˜å…ˆçº§ï¼ˆå¼€å‘èŠ‚å¥å»ºè®®ï¼‰"><a href="#âœ…-TODOä¼˜å…ˆçº§ï¼ˆå¼€å‘èŠ‚å¥å»ºè®®ï¼‰" class="headerlink" title="âœ… TODOä¼˜å…ˆçº§ï¼ˆå¼€å‘èŠ‚å¥å»ºè®®ï¼‰"></a>âœ… TODOä¼˜å…ˆçº§ï¼ˆå¼€å‘èŠ‚å¥å»ºè®®ï¼‰</h2><ol><li>é¡µé¢ç»“æ„ä¸å¯¼èˆª</li><li>é¢˜åº“ä¸Šä¼  + é¢˜ç›®è§£æï¼ˆå¯å…ˆæ‰‹åŠ¨å½•å…¥ mock æ•°æ®è°ƒè¯•ï¼‰</li><li>åšé¢˜é€»è¾‘ï¼ˆåˆ‡é¢˜ã€ç­”é¢˜è®°å½•ã€é”™é¢˜ç»Ÿè®¡ï¼‰</li><li>æ”¶è—&#x2F;é”™é¢˜ç»ƒä¹ æ¨¡å—</li><li>èƒŒé¢˜æ¨¡å¼ + è§£æåŒº</li><li>æ•°æ®å¯¼å‡ºï¼ˆå¯¼å‡ºé”™é¢˜ PDF&#x2F;JSONï¼‰</li><li>ä¼˜åŒ– UI&#x2F;UXã€åŠ å…¥åŠ¨ç”»ã€ä¸»é¢˜åˆ‡æ¢ç­‰</li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•å¿«é€Ÿåˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰çš„moduleæ–‡ä»¶</title>
      <link href="/2025/04/04/%E5%89%8D%E7%AB%AF-%E6%9D%82%E8%B0%88-%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E7%9A%84module%E6%96%87%E4%BB%B6/"/>
      <url>/2025/04/04/%E5%89%8D%E7%AB%AF-%E6%9D%82%E8%B0%88-%E5%A6%82%E4%BD%95%E5%BF%AB%E9%80%9F%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%89%80%E6%9C%89%E7%9A%84module%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<p>window:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Get</span>-<span class="title class_">ChildItem</span> -<span class="title class_">Path</span> . -<span class="title class_">Recurse</span> -<span class="title class_">Directory</span> -<span class="title class_">Filter</span> <span class="string">&quot;node_modules&quot;</span> | <span class="title class_">ForEach</span>-<span class="title class_">Object</span> &#123; rimraf $_.<span class="property">FullName</span> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-é¡¹ç›®å®æˆ˜-ReactFlowæŒ¯åŠ¨å™¨è°ƒéŸ³</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactFlow%E6%8C%AF%E5%8A%A8%E5%99%A8%E8%B0%83%E9%9F%B3/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactFlow%E6%8C%AF%E5%8A%A8%E5%99%A8%E8%B0%83%E9%9F%B3/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h1><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactFlow%E6%8C%AF%E5%8A%A8%E5%99%A8%E8%B0%83%E9%9F%B3/4330865bfb83401dbf81ac40945af092tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="2024-08-30 08.24.31.gif"></p><p>è¿™æ˜¯ä¸€ä¸ªåŸºäº React + ReactFlow çš„å¯è§†åŒ–éŸ³é¢‘è°ƒéŸ³é¡¹ç›®ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡æ‹–æ‹½å’Œè¿æ¥ä¸åŒçš„èŠ‚ç‚¹ï¼Œè°ƒèŠ‚é¢‘ç‡ã€æ³¢å½¢å’ŒéŸ³é‡ï¼Œå®ç°åŠ¨æ€çš„å£°éŸ³åˆæˆã€‚é€‚åˆä½œä¸ºç†Ÿæ‚‰ ReactFlowã€AudioContext å’Œå‰ç«¯å¯è§†åŒ–äº¤äº’çš„ç»ƒä¹ é¡¹ç›®ã€‚</p><h1 id="ğŸ§°æŠ€æœ¯æ ˆ"><a href="#ğŸ§°æŠ€æœ¯æ ˆ" class="headerlink" title="ğŸ§°æŠ€æœ¯æ ˆ"></a>ğŸ§°æŠ€æœ¯æ ˆ</h1><ul><li><p>é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆæ„å»ºï¼š</p><ul><li><p><strong>React</strong>ï¼šæ„å»ºç”¨æˆ·ç•Œé¢æ ¸å¿ƒæ¡†æ¶</p></li><li><p><strong>ReactFlow</strong>ï¼šç”¨äºå®ç°èŠ‚ç‚¹ä¹‹é—´çš„å¯è§†åŒ–æ‹–æ‹½è¿æ¥</p><ul><li><code>npm install --save @xyflow/react</code></li></ul></li><li><p><strong>AudioContext API</strong>ï¼šç”¨äºæ§åˆ¶éŸ³é¢‘çš„åˆæˆå’Œæ’­æ”¾</p></li><li><p><strong>Tailwind CSS</strong>ï¼šå¿«é€Ÿæ„å»ºæ ·å¼ï¼Œæå‡å¼€å‘æ•ˆç‡</p><ul><li>å®‰è£…ï¼š<a href="https://www.mudcloud.fun/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/#tailwind">React-CSSæ–¹æ¡ˆ | äº‘æ³¥å°çª</a></li></ul></li></ul></li></ul><h1 id="ğŸ”§ä¸»è¦åŠŸèƒ½"><a href="#ğŸ”§ä¸»è¦åŠŸèƒ½" class="headerlink" title="ğŸ”§ä¸»è¦åŠŸèƒ½"></a>ğŸ”§ä¸»è¦åŠŸèƒ½</h1><ul><li><p>æœ¬é¡¹ç›®ä¸»è¦å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š</p><h2 id="1-æ·»åŠ æŒ¯åŠ¨å™¨èŠ‚ç‚¹"><a href="#1-æ·»åŠ æŒ¯åŠ¨å™¨èŠ‚ç‚¹" class="headerlink" title="1. æ·»åŠ æŒ¯åŠ¨å™¨èŠ‚ç‚¹"></a>1. æ·»åŠ æŒ¯åŠ¨å™¨èŠ‚ç‚¹</h2><ul><li>æ”¯æŒé€‰æ‹©ä¸åŒæ³¢å½¢ï¼ˆæ­£å¼¦ã€é”¯é½¿ã€æ–¹æ³¢ç­‰ï¼‰</li><li>å®æ—¶è°ƒèŠ‚é¢‘ç‡ï¼Œäº§ç”Ÿä¸åŒéŸ³é«˜çš„æŒ¯åŠ¨å™¨è¾“å‡º</li></ul><h2 id="2-æ·»åŠ éŸ³é‡æ§åˆ¶èŠ‚ç‚¹"><a href="#2-æ·»åŠ éŸ³é‡æ§åˆ¶èŠ‚ç‚¹" class="headerlink" title="2. æ·»åŠ éŸ³é‡æ§åˆ¶èŠ‚ç‚¹"></a>2. æ·»åŠ éŸ³é‡æ§åˆ¶èŠ‚ç‚¹</h2><ul><li>é€šè¿‡æ»‘å—è°ƒèŠ‚éŸ³é‡å¼ºå¼±</li><li>å¯å°†å¤šä¸ªæŒ¯åŠ¨å™¨è¿æ¥åˆ°ä¸€ä¸ªéŸ³é‡èŠ‚ç‚¹ï¼Œå®ç°åˆæˆæ··éŸ³</li></ul><h2 id="3-è¾“å‡ºèŠ‚ç‚¹"><a href="#3-è¾“å‡ºèŠ‚ç‚¹" class="headerlink" title="3. è¾“å‡ºèŠ‚ç‚¹"></a>3. è¾“å‡ºèŠ‚ç‚¹</h2><ul><li>æ‰€æœ‰ä¿¡å·æœ€ç»ˆæµå‘è¾“å‡ºèŠ‚ç‚¹ï¼Œå®ç°å£°éŸ³æ’­æ”¾</li></ul><h2 id="4-å¯è§†åŒ–è¿æ¥ä¸åˆ é™¤"><a href="#4-å¯è§†åŒ–è¿æ¥ä¸åˆ é™¤" class="headerlink" title="4. å¯è§†åŒ–è¿æ¥ä¸åˆ é™¤"></a>4. å¯è§†åŒ–è¿æ¥ä¸åˆ é™¤</h2><ul><li>æ‹–æ‹½å¼åˆ›å»ºè¿æ¥çº¿ï¼ˆè¾¹ï¼‰ï¼Œæ”¯æŒæ‰‹åŠ¨æ–­å¼€è¿æ¥</li></ul></li></ul><h1 id="ğŸ—ï¸-é¡¹ç›®ç»“æ„"><a href="#ğŸ—ï¸-é¡¹ç›®ç»“æ„" class="headerlink" title="ğŸ—ï¸ é¡¹ç›®ç»“æ„"></a>ğŸ—ï¸ é¡¹ç›®ç»“æ„</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">â”œâ”€â”€ components/</span><br><span class="line">â”‚   â”œâ”€â”€ <span class="title class_">CustomEdge</span>.<span class="property">tsx</span>        <span class="comment">// è‡ªå®šä¹‰è¾¹ï¼Œæ”¯æŒåˆ é™¤åŠŸèƒ½</span></span><br><span class="line">â”‚   â”œâ”€â”€ <span class="title class_">OscillatorNode</span>.<span class="property">tsx</span>    <span class="comment">// æŒ¯åŠ¨å™¨èŠ‚ç‚¹ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ <span class="title class_">VolumeNode</span>.<span class="property">tsx</span>        <span class="comment">// éŸ³é‡æ§åˆ¶èŠ‚ç‚¹</span></span><br><span class="line">â”‚   â””â”€â”€ <span class="title class_">OutputNode</span>.<span class="property">tsx</span>        <span class="comment">// éŸ³é¢‘è¾“å‡ºèŠ‚ç‚¹</span></span><br><span class="line">â”œâ”€â”€ audio.<span class="property">ts</span>                  <span class="comment">// éŸ³é¢‘æ§åˆ¶é€»è¾‘ï¼Œå°è£… AudioContext ç›¸å…³ API</span></span><br><span class="line">â”œâ”€â”€ <span class="title class_">App</span>.<span class="property">tsx</span>                   <span class="comment">// ä¸»åº”ç”¨å…¥å£ï¼Œé›†æˆ ReactFlow</span></span><br><span class="line">â””â”€â”€ main.<span class="property">tsx</span>                  <span class="comment">// é¡¹ç›®å¯åŠ¨å…¥å£</span></span><br></pre></td></tr></table></figure><h1 id="æºç "><a href="#æºç " class="headerlink" title="æºç "></a>æºç </h1><h2 id="components"><a href="#components" class="headerlink" title="components&#x2F;"></a>components&#x2F;</h2><h3 id="CustomEdge-tsx"><a href="#CustomEdge-tsx" class="headerlink" title="CustomEdge.tsx"></a>CustomEdge.tsx</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  <span class="title class_">BaseEdge</span>,</span><br><span class="line">  <span class="title class_">EdgeLabelRenderer</span>,</span><br><span class="line">  <span class="title class_">EdgeProps</span>,</span><br><span class="line">  getBezierPath,</span><br><span class="line">  useReactFlow,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@xyflow/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; disconnect &#125; <span class="keyword">from</span> <span class="string">&quot;../audio&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Trash2</span> &#125; <span class="keyword">from</span> <span class="string">&quot;lucide-react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">CustomEdge</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  id,</span></span><br><span class="line"><span class="params">  source,</span></span><br><span class="line"><span class="params">  target,</span></span><br><span class="line"><span class="params">  sourceX,</span></span><br><span class="line"><span class="params">  sourceY,</span></span><br><span class="line"><span class="params">  targetX,</span></span><br><span class="line"><span class="params">  targetY,</span></span><br><span class="line"><span class="params">  sourcePosition,</span></span><br><span class="line"><span class="params">  targetPosition,</span></span><br><span class="line"><span class="params">  style = &#123;&#125;,</span></span><br><span class="line"><span class="params">  markerEnd,</span></span><br><span class="line"><span class="params">  selected,</span></span><br><span class="line"><span class="params">&#125;: EdgeProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; setEdges &#125; = <span class="title function_">useReactFlow</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [edgePath, labelX, labelY] = <span class="title function_">getBezierPath</span>(&#123;</span><br><span class="line">    sourceX,</span><br><span class="line">    sourceY,</span><br><span class="line">    sourcePosition,</span><br><span class="line">    targetX,</span><br><span class="line">    targetY,</span><br><span class="line">    targetPosition,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onEdgeClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">edges</span>) =&gt;</span> edges.<span class="title function_">filter</span>(<span class="function">(<span class="params">edge</span>) =&gt;</span> edge.<span class="property">id</span> !== id));</span><br><span class="line">    <span class="title function_">disconnect</span>(source, target);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BaseEdge</span> <span class="attr">path</span>=<span class="string">&#123;edgePath&#125;</span> <span class="attr">markerEnd</span>=<span class="string">&#123;markerEnd&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;selected &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">position:</span> &quot;<span class="attr">absolute</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">transform:</span> `<span class="attr">translate</span>(<span class="attr">-50</span>%, <span class="attr">-50</span>%) <span class="attr">translate</span>($&#123;<span class="attr">labelX</span>&#125;<span class="attr">px</span>,$&#123;<span class="attr">labelY</span>&#125;<span class="attr">px</span>)`,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">fontSize:</span> <span class="attr">12</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              // <span class="attr">EdgeLabelRenderer</span> <span class="attr">é‡Œçš„ç»„ä»¶é»˜è®¤ä¸å¤„ç†é¼ æ ‡äº‹ä»¶</span>ï¼Œ<span class="attr">å¦‚æœè¦å¤„ç†å°±è¦å£°æ˜</span> <span class="attr">pointerEvents:</span> <span class="attr">all</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">pointerEvents:</span> &quot;<span class="attr">all</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onClick</span>=<span class="string">&#123;onEdgeClick&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">border:</span> &quot;<span class="attr">none</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">background:</span> &quot;#<span class="attr">fff</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">borderRadius:</span> &quot;<span class="attr">50</span>%&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">padding:</span> &quot;<span class="attr">4px</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">cursor:</span> &quot;<span class="attr">pointer</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">boxShadow:</span> &quot;<span class="attr">0</span> <span class="attr">1px</span> <span class="attr">4px</span> <span class="attr">rgba</span>(<span class="attr">0</span>, <span class="attr">0</span>, <span class="attr">0</span>, <span class="attr">0.2</span>)&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">transition:</span> &quot;<span class="attr">all</span> <span class="attr">0.2s</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">display:</span> &quot;<span class="attr">flex</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">alignItems:</span> &quot;<span class="attr">center</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">justifyContent:</span> &quot;<span class="attr">center</span>&quot;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onMouseEnter</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                e.currentTarget.style.background = &quot;#f87171&quot;;</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">              onMouseLeave=&#123;(e) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                e.currentTarget.style.background = &quot;#fff&quot;;</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            &gt;</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">Trash2</span> <span class="attr">size</span>=<span class="string">&#123;16&#125;</span> <span class="attr">color</span>=<span class="string">&quot;#333&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="OscillatorNode-tsx"><a href="#OscillatorNode-tsx" class="headerlink" title="OscillatorNode.tsx"></a>OscillatorNode.tsx</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Handle</span>, <span class="title class_">Position</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@xyflow/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ChangeEventHandler</span>, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; updateAudioNode &#125; <span class="keyword">from</span> <span class="string">&quot;../audio&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">OscillatorNodeProps</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">frequency</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;sine&quot;</span> | <span class="string">&quot;triangle&quot;</span> | <span class="string">&quot;sawtooth&quot;</span> | <span class="string">&quot;square&quot;</span> | <span class="built_in">string</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ¸²æŸ“ä¸€ä¸ªæŒ¯è¡å™¨èŠ‚ç‚¹ç»„ä»¶ï¼Œç”¨äº ReactFlow æµå›¾ä¸­ã€‚èŠ‚ç‚¹åº•éƒ¨åŒ…å«è¿æ¥å¥æŸ„ï¼Œé¡¶éƒ¨æ˜¾ç¤ºèŠ‚ç‚¹æ ‡é¢˜ï¼›ä¸­ä¸Šéƒ¨åˆ†ä¸ºç”¨æˆ·è¾“å…¥æ¡†ï¼Œå³ä¸‹è§’å±•ç¤ºè¾“å…¥æ•°å€¼ï¼›ä¸­ä¸‹éƒ¨åˆ†æä¾›æ³¢å½¢ç±»å‹é€‰æ‹©åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span> - èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; data.frequency - æŒ¯åŠ¨å™¨é¢‘ç‡ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; data.type - æ³¢å½¢ç±»å‹ï¼ˆå¦‚ sineã€square ç­‰ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">OscillatorNode</span>(<span class="params">&#123; id, data &#125;: OscillatorNodeProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [frequency, setFrequency] = <span class="title function_">useState</span>(data.<span class="property">frequency</span>);</span><br><span class="line">  <span class="keyword">const</span> [<span class="keyword">type</span>, setType] = <span class="title function_">useState</span>(data.<span class="property">type</span>);</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">onFrequencyChange</span>: <span class="title class_">ChangeEventHandler</span>&lt;<span class="title class_">HTMLInputElement</span>&gt; = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setFrequency</span>(+e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="title function_">updateAudioNode</span>(id, &#123; <span class="attr">frequency</span>: +e.<span class="property">target</span>.<span class="property">value</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">onTypeChange</span>: <span class="title class_">ChangeEventHandler</span>&lt;<span class="title class_">HTMLSelectElement</span>&gt; = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setType</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="title function_">updateAudioNode</span>(id, &#123; <span class="attr">type</span>: e.<span class="property">target</span>.<span class="property">value</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">bg-white</span> <span class="attr">shadow-xl</span>&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">rounded-t-md</span> <span class="attr">p-</span>[<span class="attr">8px</span>] <span class="attr">bg-pink-500</span> <span class="attr">text-white</span>&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        æŒ¯è¡å™¨èŠ‚ç‚¹</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">flex</span> <span class="attr">flex-col</span> <span class="attr">p-</span>[<span class="attr">8px</span>]&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>é¢‘ç‡<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;nodrag&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;range&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">min</span>=<span class="string">&quot;10&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">max</span>=<span class="string">&quot;1000&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;frequency&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;onFrequencyChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">text-right</span>&quot;&#125;&gt;</span>&#123;frequency&#125;èµ«å…¹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">hr</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">mx-</span>[<span class="attr">4px</span>]&quot;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">flex</span> <span class="attr">flex-col</span> <span class="attr">p-</span>[<span class="attr">8px</span>]&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ³¢å½¢<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;type&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onTypeChange&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sine&quot;</span>&gt;</span>æ­£å¼¦æ³¢<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;triangle&quot;</span>&gt;</span>ä¸‰è§’æ³¢<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sawtooth&quot;</span>&gt;</span>é”¯é½¿æ³¢<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;square&quot;</span>&gt;</span>æ–¹æ³¢<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;source&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &quot;<span class="attr">10px</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">10px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="VolumeNode-tsx"><a href="#VolumeNode-tsx" class="headerlink" title="VolumeNode.tsx"></a>VolumeNode.tsx</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Handle</span>, <span class="title class_">Position</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@xyflow/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ChangeEventHandler</span>, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; updateAudioNode &#125; <span class="keyword">from</span> <span class="string">&quot;../audio&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">VolumeNodeProps</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">gain</span>: <span class="built_in">number</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ¸²æŸ“ä¸€ä¸ªéŸ³é‡èŠ‚ç‚¹ç»„ä»¶ï¼Œç”¨äº ReactFlow æµå›¾ä¸­ã€‚èŠ‚ç‚¹åŒ…å«ä¸Šä¸‹ä¸¤ä¸ªè¿æ¥å¥æŸ„ï¼Œé¡¶éƒ¨å±•ç¤ºèŠ‚ç‚¹æ ‡é¢˜ï¼Œä¸­éƒ¨ä¸ºç”¨æˆ·è¾“å…¥æ¡†ï¼Œå³ä¸‹è§’å®æ—¶æ˜¾ç¤ºè¾“å…¥å€¼ã€‚</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span> - èŠ‚ç‚¹çš„å”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; data.gain - éŸ³é‡å¢ç›Šå€¼ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">VolumeNode</span>(<span class="params">&#123; id, data &#125;: VolumeNodeProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [gain, setGain] = <span class="title function_">useState</span>(data.<span class="property">gain</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="attr">changeGain</span>: <span class="title class_">ChangeEventHandler</span>&lt;<span class="title class_">HTMLInputElement</span>&gt; = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setGain</span>(+e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">    <span class="title function_">updateAudioNode</span>(id, &#123; <span class="attr">gain</span>: +e.<span class="property">target</span>.<span class="property">value</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot; shadow-xl rounded-md bg-white&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;target&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position</span>=<span class="string">&#123;Position.Top&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &quot;<span class="attr">10px</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">10px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;bg-blue-500 text-white p-[4px] rounded-t-md&quot;</span>&gt;</span>éŸ³é‡èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col p-[4px]&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Gain<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;nodrag&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;range&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">min</span>=<span class="string">&quot;0&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">max</span>=<span class="string">&quot;1&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">step</span>=<span class="string">&quot;0.01&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">value</span>=<span class="string">&#123;gain&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onChange</span>=<span class="string">&#123;changeGain&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;text-right&quot;</span>&gt;</span>&#123;gain.toFixed(2)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;source&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &quot;<span class="attr">10px</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">10px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="OutputNode-tsx"><a href="#OutputNode-tsx" class="headerlink" title="OutputNode.tsx"></a>OutputNode.tsx</h3><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> æ¸²æŸ“ä¸€ä¸ª ReactFlow è¾“å‡ºèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹é¡¶éƒ¨åŒ…å«è¿æ¥å¥æŸ„ï¼Œä¸»ä½“åŒºåŸŸå±•ç¤ºæ ‡é¢˜åŠå£°éŸ³å¼€å…³æŒ‰é’®ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Handle</span>, <span class="title class_">Position</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@xyflow/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; toggleAudio &#125; <span class="keyword">from</span> <span class="string">&quot;../audio&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">OutputNode</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [isRunning, setIsRuning] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">bg-white</span> <span class="attr">shadow-xl</span> <span class="attr">p-</span>[<span class="attr">20px</span>]&quot;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;target&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">position</span>=<span class="string">&#123;Position.Top&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &quot;<span class="attr">10px</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">10px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¾“å‡ºèŠ‚ç‚¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            setIsRuning((isRunning) =&gt; !isRunning);</span></span><br><span class="line"><span class="language-xml">            toggleAudio();</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          &#123;isRunning ? <span class="tag">&lt;<span class="name">span</span> <span class="attr">role</span>=<span class="string">&quot;img&quot;</span>&gt;</span>ğŸ”ˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span> : <span class="tag">&lt;<span class="name">span</span> <span class="attr">role</span>=<span class="string">&quot;img&quot;</span>&gt;</span>ğŸ”‡<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="audio-ts"><a href="#audio-ts" class="headerlink" title="audio.ts"></a>audio.ts</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> context = <span class="keyword">new</span> <span class="title class_">AudioContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> osc = context.<span class="title function_">createOscillator</span>();</span><br><span class="line">osc.<span class="property">frequency</span>.<span class="property">value</span> = <span class="number">220</span>;</span><br><span class="line">osc.<span class="property">type</span> = <span class="string">&quot;square&quot;</span>;</span><br><span class="line">osc.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> volume = context.<span class="title function_">createGain</span>();</span><br><span class="line">volume.<span class="property">gain</span>.<span class="property">value</span> = <span class="number">0.5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> out = context.<span class="property">destination</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nodes = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;a&quot;</span>, osc);</span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;b&quot;</span>, volume);</span><br><span class="line">nodes.<span class="title function_">set</span>(<span class="string">&quot;c&quot;</span>, out);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> context.stateæ˜¯å¦åœ¨è¿è¡Œ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">boolean</span>&#125; æ˜¯å¦è¿è¡Œ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">inRunning</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> context.<span class="property">state</span> === <span class="string">&quot;running&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> åœ¨éŸ³é¢‘æ­£åœ¨è¿è¡Œæ—¶æš‚åœå®ƒï¼Œä¸åœ¨è¿è¡Œæ—¶æ¢å¤å®ƒå¦‚æœåœ¨è¿è¡Œ,</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toggleAudio</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">inRunning</span>() ? context.<span class="title function_">suspend</span>() : context.<span class="title function_">resume</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥idå’Œdataæ›´æ–°å¯¹åº”çš„Nodeå‚æ•°</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Record&lt;string, any&gt;</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">updateAudioNode</span>(<span class="params">id: <span class="built_in">string</span>, data: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> node = nodes.<span class="title function_">get</span>(id);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> [key, val] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(data)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (node[key] <span class="keyword">instanceof</span> <span class="title class_">AudioParam</span>) &#123;</span><br><span class="line">      node[key].<span class="property">value</span> = val;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      node[key] = val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥idï¼Œæ–­å¼€èŠ‚ç‚¹è¿æ¥ï¼Œæš‚åœèŠ‚ç‚¹çŠ¶æ€ï¼Œåˆ é™¤èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">removeAudioNode</span>(<span class="params">id: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> node = nodes.<span class="title function_">get</span>(id);</span><br><span class="line"></span><br><span class="line">  node.<span class="title function_">disconnect</span>();</span><br><span class="line">  node.<span class="property">stop</span>?.();</span><br><span class="line">  nodes.<span class="title function_">delete</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„idï¼Œå°†ä»–ä»¬è¿æ¥èµ·æ¥</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">sourceId</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">targetId</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">connect</span>(<span class="params">sourceId: <span class="built_in">string</span>, targetId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> source = nodes.<span class="title function_">get</span>(sourceId);</span><br><span class="line">  <span class="keyword">const</span> target = nodes.<span class="title function_">get</span>(targetId);</span><br><span class="line"></span><br><span class="line">  source.<span class="title function_">connect</span>(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥æºèŠ‚ç‚¹å’Œç›®æ ‡èŠ‚ç‚¹çš„idï¼Œå°†ä»–ä»¬çš„è”ç³»æ–­å¼€</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">sourceId</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">targetId</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">disconnect</span>(<span class="params">sourceId: <span class="built_in">string</span>, targetId: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> source = nodes.<span class="title function_">get</span>(sourceId);</span><br><span class="line">  <span class="keyword">const</span> target = nodes.<span class="title function_">get</span>(targetId);</span><br><span class="line"></span><br><span class="line">  source.<span class="title function_">disconnect</span>(target);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> ä¼ å…¥ç±»å‹ï¼Œæ ¹æ®ç±»å‹ç”Ÿæˆå¯¹åº”çš„AudioNode</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">id</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">type</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Record&lt;string, any&gt;</span>&#125; <span class="variable">data</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createAudioNode</span>(<span class="params"></span></span><br><span class="line"><span class="params">  id: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  <span class="keyword">type</span>: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  data: Record&lt;<span class="built_in">string</span>, <span class="built_in">any</span>&gt;</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;osc&quot;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> node = context.<span class="title function_">createOscillator</span>();</span><br><span class="line">      node.<span class="property">frequency</span>.<span class="property">value</span> = data.<span class="property">frequency</span>;</span><br><span class="line">      node.<span class="property">type</span> = data.<span class="property">type</span>;</span><br><span class="line">      node.<span class="title function_">start</span>();</span><br><span class="line"></span><br><span class="line">      nodes.<span class="title function_">set</span>(id, node);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;volume&quot;</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> node = context.<span class="title function_">createGain</span>();</span><br><span class="line">      node.<span class="property">gain</span>.<span class="property">value</span> = data.<span class="property">gain</span>;</span><br><span class="line"></span><br><span class="line">      nodes.<span class="title function_">set</span>(id, node);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="App-tsx"><a href="#App-tsx" class="headerlink" title="App.tsx"></a>App.tsx</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect, createAudioNode, removeAudioNode &#125; <span class="keyword">from</span> <span class="string">&quot;./audio&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">OscillatorNode</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./components/OscillatorNode&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">VolumeNode</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./components/VolumeNode&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  addEdge,</span><br><span class="line">  <span class="title class_">Background</span>,</span><br><span class="line">  <span class="title class_">BackgroundVariant</span>,</span><br><span class="line">  <span class="title class_">Connection</span>,</span><br><span class="line">  <span class="title class_">Controls</span>,</span><br><span class="line">  <span class="title class_">Edge</span>,</span><br><span class="line">  <span class="title class_">MiniMap</span>,</span><br><span class="line">  <span class="title class_">Node</span>,</span><br><span class="line">  <span class="title class_">Panel</span>,</span><br><span class="line">  <span class="title class_">ReactFlow</span>,</span><br><span class="line">  useEdgesState,</span><br><span class="line">  useNodesState,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;@xyflow/react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;@xyflow/react/dist/style.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">OutputNode</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./components/OutputNode&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CustomEdge</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./components/CustomEdge&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">initialNodes</span>: <span class="title class_">Node</span>[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;a&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;osc&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="attr">frequency</span>: <span class="number">220</span>, <span class="attr">type</span>: <span class="string">&quot;square&quot;</span> &#125;,</span><br><span class="line">    <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;b&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;vol&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="attr">gain</span>: <span class="number">0.5</span> &#125;,</span><br><span class="line">    <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">150</span>, <span class="attr">y</span>: <span class="number">250</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;c&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;out&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">350</span>, <span class="attr">y</span>: <span class="number">400</span> &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">initialEdges</span>: <span class="title class_">Edge</span>[] = [];</span><br><span class="line"><span class="keyword">const</span> nodeType = &#123;</span><br><span class="line">  <span class="attr">vol</span>: <span class="title class_">VolumeNode</span>,</span><br><span class="line">  <span class="attr">osc</span>: <span class="title class_">OscillatorNode</span>,</span><br><span class="line">  <span class="attr">out</span>: <span class="title class_">OutputNode</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [nodes, setNodes, onNodesChange] = <span class="title function_">useNodesState</span>(initialNodes);</span><br><span class="line">  <span class="keyword">const</span> [edges, setEdges, onEdgesChange] = <span class="title function_">useEdgesState</span>(initialEdges);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onConnect</span> = (<span class="params">parmas: Connection</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">connect</span>(parmas.<span class="property">source</span>, parmas.<span class="property">target</span>);</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">eds</span>) =&gt;</span> <span class="title function_">addEdge</span>(&#123; ...parmas, <span class="attr">type</span>: <span class="string">&quot;custom&quot;</span> &#125;, eds));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addOscNode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>().<span class="title function_">slice</span>(<span class="number">2</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">const</span> position = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">type</span> = <span class="string">&quot;osc&quot;</span>;</span><br><span class="line">    <span class="keyword">const</span> data = &#123; <span class="attr">frequency</span>: <span class="number">400</span>, <span class="attr">type</span>: <span class="string">&quot;sine&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setNodes</span>([...nodes, &#123; id, position, <span class="keyword">type</span>, data &#125;]);</span><br><span class="line">    <span class="title function_">createAudioNode</span>(id, <span class="keyword">type</span>, data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">addVolumeNode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="title class_">Math</span>.<span class="title function_">random</span>().<span class="title function_">toString</span>().<span class="title function_">slice</span>(<span class="number">2</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">const</span> data = &#123; <span class="attr">gain</span>: <span class="number">0.5</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> position = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">type</span> = <span class="string">&quot;volume&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">setNodes</span>([...nodes, &#123; id, <span class="keyword">type</span>, data, position &#125;]);</span><br><span class="line">    <span class="title function_">createAudioNode</span>(id, <span class="keyword">type</span>, data);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &quot; <span class="attr">100vw</span>&quot;, <span class="attr">height:</span> &quot;<span class="attr">100vh</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ReactFlow</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nodes</span>=<span class="string">&#123;nodes&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">edges</span>=<span class="string">&#123;edges&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onNodesChange</span>=<span class="string">&#123;onNodesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onEdgesChange</span>=<span class="string">&#123;onEdgesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onConnect</span>=<span class="string">&#123;onConnect&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">nodeTypes</span>=<span class="string">&#123;nodeType&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">edgeTypes</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">custom:</span> <span class="attr">CustomEdge</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onNodesDelete</span>=<span class="string">&#123;(nodes)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">            for (const &#123; id &#125; of nodes) &#123;</span></span><br><span class="line"><span class="language-xml">              removeAudioNode(id);</span></span><br><span class="line"><span class="language-xml">            &#125;</span></span><br><span class="line"><span class="language-xml">          &#125;&#125;</span></span><br><span class="line"><span class="language-xml">          fitView</span></span><br><span class="line"><span class="language-xml">        &gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Controls</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">MiniMap</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Background</span> <span class="attr">variant</span>=<span class="string">&#123;BackgroundVariant.Lines&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Panel</span> <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">space-x-4</span>&quot;&#125; <span class="attr">position</span>=<span class="string">&quot;top-right&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">p-</span>[<span class="attr">4px</span>] <span class="attr">rounded</span> <span class="attr">bg-white</span> <span class="attr">shadow</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onClick</span>=<span class="string">&#123;addOscNode&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span></span></span><br><span class="line"><span class="language-xml">              æ·»åŠ æŒ¯è¡å™¨èŠ‚ç‚¹</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">className</span>=<span class="string">&#123;</span>&quot;<span class="attr">p-</span>[<span class="attr">4px</span>] <span class="attr">rounded</span> <span class="attr">bg-white</span> <span class="attr">shadow</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onClick</span>=<span class="string">&#123;addVolumeNode&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span></span></span><br><span class="line"><span class="language-xml">              æ·»åŠ éŸ³é‡èŠ‚ç‚¹</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Panel</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ReactFlow</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h1 id="ğŸ“-æ€»ç»“ä¸æ”¶è·"><a href="#ğŸ“-æ€»ç»“ä¸æ”¶è·" class="headerlink" title="ğŸ“ æ€»ç»“ä¸æ”¶è·"></a>ğŸ“ æ€»ç»“ä¸æ”¶è·</h1><p>è¿™ä¸ªé¡¹ç›®è®©æˆ‘æ·±å…¥ç†è§£äº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>å¦‚ä½•ä½¿ç”¨ ReactFlow æ„å»ºå¯è§†åŒ–ç¼–è¾‘å™¨</li><li>å¦‚ä½•ç»“åˆ Web Audio API å®ç°å‰ç«¯éŸ³é¢‘å¤„ç†</li><li>React çŠ¶æ€ä¸åº•å±‚å¯¹è±¡ï¼ˆAudioNodeï¼‰å¦‚ä½•åŒæ­¥æ›´æ–°</li><li>æ¨¡å—åŒ–é¡¹ç›®ç»“æ„å’Œç»„ä»¶å¤ç”¨çš„é‡è¦æ€§</li></ul><hr><h1 id="ğŸ“š-å‚è€ƒèµ„æ–™"><a href="#ğŸ“š-å‚è€ƒèµ„æ–™" class="headerlink" title="ğŸ“š å‚è€ƒèµ„æ–™"></a>ğŸ“š å‚è€ƒèµ„æ–™</h1><ul><li><a href="https://reactflow.dev/">ReactFlow æ–‡æ¡£</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">MDN Web Audio API æŒ‡å—</a></li><li><a href="https://tailwindcss.com/">Tailwind CSS å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-é¡¹ç›®å®æˆ˜-ä½ä»£ç ç¼–è¾‘å™¨</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E4%BD%8E%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-%E4%BD%8E%E4%BB%A3%E7%A0%81%E7%BC%96%E8%BE%91%E5%99%A8/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-é¡¹ç›®å®æˆ˜-ReactPlayground</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/</url>
      
        <content type="html"><![CDATA[<h1 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h1><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/image-20250402234550892.png" alt="image-20250402234550892"></p><p>æˆ‘ä»¬æœ€ç»ˆçš„æˆæœï¼šå·¦è¾¹å†™ä»£ç ï¼Œå³è¾¹å®æ—¶é¢„è§ˆ</p><p>å³è¾¹è¿˜èƒ½çœ‹åˆ°ç¼–è¯‘åçš„ä»£ç </p><h2 id="ç¼–è¯‘æ€è·¯"><a href="#ç¼–è¯‘æ€è·¯" class="headerlink" title="ç¼–è¯‘æ€è·¯"></a>ç¼–è¯‘æ€è·¯</h2><ul><li><p>ç”¨æˆ·è¾“å…¥ä»£ç </p></li><li><p>ä½¿ç”¨ Babel å°† TSX&#x2F;JSX ä»£ç è½¬æ¢ä¸º ES Modules</p></li><li><p>Blob URL å¤„ç†ä»£ç åŠ è½½</p></li><li><p>babelæ’ä»¶æ›¿æ¢importè¯­å¥</p></li><li><p>import maps + esm.shå¼•ç”¨reactåº“</p></li><li><p>é€šè¿‡ iframe è¿è¡Œä»£ç å¹¶æ¸²æŸ“</p></li></ul><h2 id="åŒ…å®‰è£…"><a href="#åŒ…å®‰è£…" class="headerlink" title="åŒ…å®‰è£…"></a>åŒ…å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cnpm i --save @babel/standalone</span><br><span class="line">cnpm i --save-dev @types/babel__standalone</span><br><span class="line">cnpm i --save-dev @types/babel__core</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; transform &#125; <span class="keyword">from</span> <span class="string">&#x27;@babel/standalone&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> textareaRef = useRef&lt;<span class="title class_">HTMLTextAreaElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(!textareaRef.<span class="property">current</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> res = <span class="title function_">transform</span>(textareaRef.<span class="property">current</span>.<span class="property">value</span>, &#123;</span><br><span class="line">      <span class="attr">presets</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;typescript&#x27;</span>],</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;guang.tsx&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">code</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> code = <span class="string">`import &#123; useEffect, useState &#125; from &quot;react&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  function App() &#123;</span></span><br><span class="line"><span class="string">    const [num, setNum] = useState(() =&gt; &#123;</span></span><br><span class="line"><span class="string">      const num1 = 1 + 2;</span></span><br><span class="line"><span class="string">      const num2 = 2 + 3;</span></span><br><span class="line"><span class="string">      return num1 + num2</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">    return (</span></span><br><span class="line"><span class="string">      &lt;div onClick=&#123;() =&gt; setNum((prevNum) =&gt; prevNum + 1)&#125;&gt;&#123;num&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    );</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">  export default App;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">ref</span>=<span class="string">&#123;textareaRef&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &#x27;<span class="attr">500px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">300px</span>&#x27;&#125;&#125; <span class="attr">defaultValue</span>=<span class="string">&#123;code&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>ç¼–è¯‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>åœ¨ textarea è¾“å…¥å†…å®¹ï¼Œè®¾ç½®é»˜è®¤å€¼ defaultValueï¼Œç”¨ useRef è·å–å®ƒçš„ valueã€‚</p><p>ç„¶åç‚¹å‡»ç¼–è¯‘æŒ‰é’®çš„æ—¶å€™ï¼Œæ‹¿åˆ°å†…å®¹ç”¨ babel.transform ç¼–è¯‘ï¼ŒæŒ‡å®š typescript å’Œ react çš„ presetã€‚</p><p>æ‰“å° res.codeã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°äº†ç¼–è¯‘åçš„ä»£ç ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/9cca158969264fe79fdb87dc958e48cbtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä½†ç°åœ¨ç¼–è¯‘åçš„ä»£ç ä¹Ÿä¸èƒ½è·‘å•Šï¼š</p><p>ä¸»è¦æ˜¯ import è¯­å¥è¿™é‡Œï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/92ad62d9c38d4d539a8d51aa94d08caetplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œä¼šå¼•å…¥ import çš„æ¨¡å—ï¼Œè¿™æ—¶ä¼šæ‰¾ä¸åˆ°ã€‚</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åƒ vite çš„ dev server é‚£æ ·åšä¸€ä¸ªæ ¹æ® moduleId è¿”å›ç¼–è¯‘åçš„æ¨¡å—å†…å®¹çš„æœåŠ¡ã€‚</p><p>ä½†è¿™é‡Œæ˜¯çº¯å‰ç«¯é¡¹ç›®ï¼Œæ˜¾ç„¶ä¸é€‚åˆã€‚</p><p>å…¶å® import çš„ url å¯ä»¥ç”¨ blob urlã€‚</p><h2 id="blob-url"><a href="#blob-url" class="headerlink" title="blob url"></a>blob url</h2><p>Blob URL æ˜¯ä¸€ç§ä¸´æ—¶çš„ URLï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ Blob å¯¹è±¡ã€‚Blobï¼ˆBinary Large Objectï¼‰æ˜¯ä¸€ç§è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„å¯¹è±¡ï¼Œæ¯”å¦‚æ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰ã€‚Blob URL å…è®¸æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ä»¥ URL å½¢å¼è®¿é—®è¿™äº›æ•°æ®ï¼Œè€Œä¸éœ€è¦è¯·æ±‚è¿œç¨‹æœåŠ¡å™¨ã€‚</p><h3 id="å¦‚ä½•åˆ›å»º-Blob-URL"><a href="#å¦‚ä½•åˆ›å»º-Blob-URL" class="headerlink" title="å¦‚ä½•åˆ›å»º Blob URL"></a><strong>å¦‚ä½•åˆ›å»º Blob URL</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> code = <span class="string">`console.log(&quot;Hello, Blob URL!&quot;);`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Blob å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([code], &#123; <span class="attr">type</span>: <span class="string">&#x27;application/javascript&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”Ÿæˆ Blob URL</span></span><br><span class="line"><span class="keyword">const</span> blobUrl = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(blobUrl);  <span class="comment">// ç±»ä¼¼ blob:http://example.com/12345678-90ab-cdef-1234-567890abcdef</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ª <code>blobUrl</code> ç°åœ¨å¯ä»¥ä½œä¸º <code>&lt;script&gt;</code> çš„ <code>src</code>ï¼Œæˆ–è€…ç”¨ <code>import</code> è¯­å¥åŠ è½½ã€‚</p><h3 id="åœ¨-ä¸­ä½¿ç”¨"><a href="#åœ¨-ä¸­ä½¿ç”¨" class="headerlink" title="åœ¨ &lt;script&gt; ä¸­ä½¿ç”¨"></a><strong>åœ¨ <code>&lt;script&gt;</code> ä¸­ä½¿ç”¨</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;module&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">import</span> myCode <span class="keyword">from</span> <span class="string">&quot;blob:http://example.com/12345678-90ab-cdef-1234-567890abcdef&quot;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(myCode);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Blob URL æ˜¯<strong>åŸºäºå½“å‰é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œå½“é¡µé¢å…³é—­æ—¶ï¼Œæ‰€æœ‰ Blob URL éƒ½ä¼šå¤±æ•ˆã€‚å¦‚æœä¸å†éœ€è¦ï¼Œå¯ä»¥æ‰‹åŠ¨é‡Šæ”¾ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">URL</span>.<span class="title function_">revokeObjectURL</span>(blobUrl);</span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const code1 =`</span><br><span class="line">    function add(a, b) &#123;</span><br><span class="line">        return a + b;</span><br><span class="line">    &#125;</span><br><span class="line">    export &#123; add &#125;;</span><br><span class="line">    `;</span><br><span class="line"></span><br><span class="line">    const url = URL.createObjectURL(new Blob([code1], &#123; type: &#x27;application/javascript&#x27; &#125;));</span><br><span class="line">    const code2 = `import &#123; add &#125; from &quot;$&#123;url&#125;&quot;;</span><br><span class="line"></span><br><span class="line">    console.log(add(2, 3));`;</span><br><span class="line"></span><br><span class="line">    const script = document.createElement(&#x27;script&#x27;);</span><br><span class="line">    script.type=&quot;module&quot;;</span><br><span class="line">    script.textContent = code2;</span><br><span class="line">    document.body.appendChild(script);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="babelæ’ä»¶æ›¿æ¢import"><a href="#babelæ’ä»¶æ›¿æ¢import" class="headerlink" title="babelæ’ä»¶æ›¿æ¢import"></a>babelæ’ä»¶æ›¿æ¢import</h2><p>é‚£æ¥ä¸‹æ¥çš„é—®é¢˜å°±ç®€å•äº†ï¼Œå·¦ä¾§å†™çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯æœ‰æ–‡ä»¶åçš„ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/b24837b18c0048cc9dfe37cef6ce9b9dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æˆ‘ä»¬åªéœ€è¦æ ¹æ®æ–‡ä»¶åæ›¿æ¢ä¸‹ import çš„ url å°±å¥½äº†ã€‚</p><p>æ¯”å¦‚ App.tsx å¼•å…¥äº† .&#x2F;Aaa.tsx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Aaa</span> <span class="keyword">from</span> <span class="string">&#x27;./Aaa.tsx&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">Aaa</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç»´æŠ¤æ‹¿åˆ° Aaa.tsx çš„å†…å®¹ï¼Œç„¶åé€šè¿‡ Bob å’Œ URL.createObjectURL çš„æ–¹å¼æŠŠ Aaa.tsx å†…å®¹å˜ä¸ºä¸€ä¸ª blob urlï¼Œæ›¿æ¢ import çš„è·¯å¾„å°±å¥½äº†ã€‚</p><p>è¿™æ ·å°±å¯ä»¥ç›´æ¥è·‘ã€‚</p><p>é‚£æ€ä¹ˆæ›¿æ¢å‘¢ï¼Ÿ</p><p>babel æ’ä»¶å‘€ã€‚</p><p>babel ç¼–è¯‘æµç¨‹åˆ†ä¸º parseã€transformã€generate ä¸‰ä¸ªé˜¶æ®µã€‚</p><p>babel æ’ä»¶å°±æ˜¯åœ¨ transform çš„é˜¶æ®µå¢åˆ æ”¹ AST çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/5105a9c49e3b49e3811ce37fa2637095tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é€šè¿‡ <a href="https://astexplorer.net/#/gist/6f01ee950445813f623214fb2c7abba9/b45fffd5a735f829d15098efa4f860438c3a070e">astexplorer.net</a> çœ‹ä¸‹å¯¹åº”çš„ ASTï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/c3e5921934a44316b1504d248d65cabbtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åªè¦åœ¨å¯¹ ImportDeclaration çš„ AST åšå¤„ç†ï¼ŒæŠŠ source.value æ›¿æ¢ä¸ºå¯¹åº”æ–‡ä»¶çš„ blob url å°±è¡Œäº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; transform &#125; <span class="keyword">from</span> <span class="string">&#x27;@babel/standalone&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> type &#123; <span class="title class_">PluginObj</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@babel/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> code1 =<span class="string">`</span></span><br><span class="line"><span class="string">    function add(a, b) &#123;</span></span><br><span class="line"><span class="string">        return a + b;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    export &#123; add &#125;;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> url = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([code1], &#123; <span class="attr">type</span>: <span class="string">&#x27;application/javascript&#x27;</span> &#125;));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">transformImportSourcePlugin</span>: <span class="title class_">PluginObj</span> = &#123;</span><br><span class="line">        <span class="attr">visitor</span>: &#123;</span><br><span class="line">            <span class="title class_">ImportDeclaration</span>(path) &#123;</span><br><span class="line">                path.<span class="property">node</span>.<span class="property">source</span>.<span class="property">value</span> = url;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> code = <span class="string">`import &#123; add &#125; from &#x27;./add.ts&#x27;; console.log(add(2, 3));`</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="title function_">transform</span>(code, &#123;</span><br><span class="line">      <span class="attr">presets</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;typescript&#x27;</span>],</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">&#x27;guang.ts&#x27;</span>,</span><br><span class="line">      <span class="attr">plugins</span>: [transformImportSourcePlugin]</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">code</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span>ç¼–è¯‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨ babel æ’ä»¶çš„æ–¹å¼å¯¹ import çš„ source åšäº†æ›¿æ¢ã€‚</p><p>æŠŠ ImportDeclaration çš„ soure çš„å€¼æ”¹ä¸ºäº† blob urlã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/a1d61cb468244c6b91b97c0c67d6be88tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œæµè§ˆå™¨é‡Œå°±èƒ½ç›´æ¥è·‘è¿™æ®µä»£ç ã€‚</p><p>é‚£å¦‚æœæ˜¯å¼•å…¥ react å’Œ react-dom çš„åŒ…å‘¢ï¼Ÿ</p><h2 id="import-mapsæœºåˆ¶"><a href="#import-mapsæœºåˆ¶" class="headerlink" title="import mapsæœºåˆ¶"></a>import mapsæœºåˆ¶</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;script type=&quot;importmap&quot;&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;imports&quot;: &#123;</span><br><span class="line">                &quot;react&quot;: &quot;https://esm.sh/react@18.2.0&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;module&quot;&gt;</span><br><span class="line">        import React from &quot;react&quot;;</span><br><span class="line"></span><br><span class="line">        console.log(React);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/023b034280be468ea162594594c6568btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œimport react ç”Ÿæ•ˆäº†ã€‚</p><p>ä¸ºä»€ä¹ˆä¼šç”Ÿæ•ˆå‘¢ï¼Ÿ</p><p>ä½ è®¿é—®ä¸‹å¯ä»¥çœ‹åˆ°ï¼Œ<a href="https://esm.sh/react@18.2.0">è¿”å›çš„å†…å®¹</a>ä¹Ÿæ˜¯ import url çš„æ–¹å¼ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/1e0e28c10663435baf458484b933dbb8tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™é‡Œçš„ <a href="https://esm.sh/">esm.sh</a> å°±æ˜¯ä¸“é—¨æä¾› esm æ¨¡å—çš„ CDN æœåŠ¡ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/e46b5e8d14254f928fe20f1d0eaf4ea6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ˜¯å®ƒä»¬åšçš„ <a href="https://code.esm.sh/">react playground</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/7cec1b3a38b44b4f8f718f98ed47050btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œå¦‚ä½•å¼•å…¥ç¼–è¾‘å™¨é‡Œå†™çš„ .&#x2F;Aaa.tsx è¿™ç§æ¨¡å—ï¼Œå¦‚ä½•å¼•å…¥ reactã€react-dom è¿™ç§æ¨¡å—æˆ‘ä»¬å°±éƒ½æ¸…æ¥šäº†ã€‚</p><h2 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h2><p>æ¥ä¸‹æ¥çœ‹ä¸‹é¢„è§ˆéƒ¨åˆ†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/b5bd02c0995141bc9c00cfea7156626etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™éƒ¨åˆ†å°±æ˜¯ iframeï¼Œç„¶ååŠ ä¸€ä¸ªé€šä¿¡æœºåˆ¶ï¼Œå·¦è¾¹ç¼–è¾‘å™¨çš„ç»“æœï¼Œç¼–è¯‘ä¹‹åä¼ åˆ° iframe é‡Œæ¸²æŸ“å°±å¥½äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> iframeRaw <span class="keyword">from</span> <span class="string">&#x27;./iframe.html?raw&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iframeUrl = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(<span class="keyword">new</span> <span class="title class_">Blob</span>([iframeRaw], &#123; <span class="attr">type</span>: <span class="string">&#x27;text/html&#x27;</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Preview</span>: <span class="title class_">React</span>.<span class="property">FC</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">iframe</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">src</span>=<span class="string">&#123;iframeUrl&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">width:</span> &#x27;<span class="attr">100</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">height:</span> &#x27;<span class="attr">100</span>%&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">padding:</span> <span class="attr">0</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">border:</span> &#x27;<span class="attr">none</span>&#x27;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Preview</span>;</span><br></pre></td></tr></table></figure><p>iframe.htmlï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Preview<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    * &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;importmap&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="string">&quot;imports&quot;</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;react&quot;</span>: <span class="string">&quot;https://esm.sh/react@18.2.0&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="string">&quot;react-dom/client&quot;</span>: <span class="string">&quot;https://esm.sh/react-dom@18.2.0&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">React</span>, &#123;useState, useEffect&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> <span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;aaa&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> root = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(root).<span class="title function_">render</span>(<span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="title class_">App</span>, <span class="literal">null</span>))</span></span><br><span class="line"><span class="language-javascript">  &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position:absolute;top: 0;left:0;width:100%;height:100%;display: flex;justify-content: center;align-items: center;&quot;</span>&gt;</span></span><br><span class="line">    Loading...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè·¯å¾„åé¢åŠ ä¸ª ?raw æ˜¯é€šè¿‡å­—ç¬¦ä¸²å¼•å…¥ï¼ˆwebpack å’Œ vite éƒ½æœ‰è¿™ç§åŠŸèƒ½ï¼‰ï¼Œç”¨ URL.createObjectURL + Blob ç”Ÿæˆ blob url è®¾ç½®åˆ° iframe çš„ src å°±å¥½äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/3b8f8f7f94304517b09d866982f87bbbtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ¸²æŸ“çš„æ²¡é—®é¢˜ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/157e7d0dd79c4577a6bf13d9ea16b1b1tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦å†…å®¹å˜äº†ä¹‹åç”Ÿæˆæ–°çš„ blob url å°±å¥½äº†ã€‚</p><h2 id="ç¼–è¾‘å™¨"><a href="#ç¼–è¾‘å™¨" class="headerlink" title="ç¼–è¾‘å™¨"></a>ç¼–è¾‘å™¨</h2><p>ç”¨ @monaco-editor&#x2F;react</p><p>å®‰è£…ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @monaco-editor/react</span><br></pre></td></tr></table></figure><p>è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Editor</span> <span class="keyword">from</span> <span class="string">&#x27;@monaco-editor/react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> code =<span class="string">`import &#123; useEffect, useState &#125; from &quot;react&quot;;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function App() &#123;</span></span><br><span class="line"><span class="string">    const [num, setNum] = useState(() =&gt; &#123;</span></span><br><span class="line"><span class="string">        const num1 = 1 + 2;</span></span><br><span class="line"><span class="string">        const num2 = 2 + 3;</span></span><br><span class="line"><span class="string">        return num1 + num2</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    return (</span></span><br><span class="line"><span class="string">        &lt;div onClick=&#123;() =&gt; setNum((prevNum) =&gt; prevNum + 1)&#125;&gt;&#123;num&#125;&lt;/div&gt;</span></span><br><span class="line"><span class="string">    );</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default App;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Editor</span> <span class="attr">height</span>=<span class="string">&quot;500px&quot;</span> <span class="attr">defaultLanguage</span>=<span class="string">&quot;javascript&quot;</span> <span class="attr">defaultValue</span>=<span class="string">&#123;code&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-ReactPlayground/6b8eaf780db243b48b33070df4dcc16atplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>Editor æœ‰å¾ˆå¤š<a href="https://github.com/suren-atoyan/monaco-react?tab=readme-ov-file#editor">å‚æ•°</a>ï¼Œç­‰ç”¨åˆ°çš„æ—¶å€™å†å±•å¼€çœ‹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-æ¸²æŸ“åŸç†</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-å®ç”¨åº“oré«˜é˜¶ç»„ä»¶</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%AE%9E%E7%94%A8%E5%BA%93or%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%AE%9E%E7%94%A8%E5%BA%93or%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><ul><li><p>Storybookï¼šç»„ä»¶æ–‡æ¡£</p></li><li><p>click-to-react-componentï¼šå®šä½ç»„ä»¶</p></li><li><p>dndï¼šæ‹–æ‹½é«˜é˜¶ç»„ä»¶</p></li><li><p>allotmentï¼šæ‹†åˆ†çª—æ ¼</p><ul><li><a href="https://www.npmjs.com/package/allotment">åˆ†é…-NPM â€” allotment - npm</a></li></ul></li><li><p>@babel&#x2F;standaloneï¼šbabelçš„æµè§ˆå™¨ç‰ˆæœ¬</p></li><li><p>@types&#x2F;babel__coreï¼šbabelæ’ä»¶</p></li><li><p>reactflow</p></li></ul><h1 id="click-to-react-component"><a href="#click-to-react-component" class="headerlink" title="click-to-react-component"></a>click-to-react-component</h1><p><strong>React19ç”¨ä¸äº†</strong></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev click-to-react-component</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.tsx&#x27;</span></span><br><span class="line"><span class="comment">// @ts-ignore</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ClickToComponent</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;click-to-react-component&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>)!).<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ClickToComponent</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>å¯èƒ½æœ‰ç±»å‹çš„æŠ¥é”™ï¼Œæˆ‘ä»¬ç›´æ¥ @ts-ignore å¿½ç•¥å¥½äº†ã€‚</p></blockquote><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%AE%9E%E7%94%A8%E5%BA%93or%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/3ea76f3023d443c7865e94b3be89ac7etplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><p>æŒ‰ä½<code>Alt</code> +å·¦é”®å°±å¯ä»¥ç›´æ¥æ‰“å¼€å¯¹åº” çš„ç»„ä»¶æºç </p><p>å¦‚æœæŒ‰ä½<code>Alt</code>+å³é”®å°±å¯ä»¥çœ‹åˆ°å®ƒæ‰€æœ‰çš„çˆ¶çº§ç»„ä»¶ï¼Œç„¶åé€‰ä¸€ä¸ªæ‰“å¼€</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%AE%9E%E7%94%A8%E5%BA%93or%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/image-20250329172340836.png" alt="image-20250329172340836"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%AE%9E%E7%94%A8%E5%BA%93or%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6/0ea205a0a32e452faae136ba207866d6tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>dom å…ƒç´ æœ‰ __reactFiber$ å±æ€§å¯ä»¥æ‹¿åˆ°å¯¹åº” fiber èŠ‚ç‚¹ï¼Œç„¶å _debugOwner æ‹¿åˆ°çˆ¶èŠ‚ç‚¹ fiberã€‚_debugSource æ‹¿åˆ°æºç æ–‡ä»¶è·¯å¾„å’Œè¡Œåˆ—å·ã€‚</p><p>ç„¶åé€šè¿‡ vscode:&#x2F;&#x2F;file&#x2F;xxx çš„æ–¹å¼ç›´æ¥ vscode æ‰“å¼€å¯¹åº”æ–‡ä»¶è¡Œåˆ—å·ã€‚</p><p>è¿™æ ·å°±å®Œæˆäº†ç‚¹å‡»é¡µé¢å…ƒç´ ï¼Œæ‰“å¼€å¯¹åº”æºç çš„åŠŸèƒ½ã€‚</p><p>è¿™é‡Œçš„ _debugSource æ˜¯ babel æ’ä»¶åšçš„ï¼Œåœ¨ @babel&#x2F;preset-env é‡Œï¼Œæ¯ä¸ªé¡¹ç›®ä¼šéƒ½è‡ªåŠ¨å¼•å…¥è¿™ä¸ªæ’ä»¶ã€‚</p><p>ç„¶ååŠ ä¸Šç”¨ dataset.xx å®šä¹‰å±æ€§å’Œå¯¹åº”çš„ classNameï¼Œç”¨ @floating-ui å®ç° popoverã€‚</p><p>è¿™å°±æ˜¯ click-to-react-component çš„å®ç°åŸç†äº†ã€‚</p><h1 id="babel-standalone"><a href="#babel-standalone" class="headerlink" title="@babel&#x2F;standalone"></a>@babel&#x2F;standalone</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i --save @babel/standalone</span><br><span class="line">npm i --save-dev @types/babel__standalone</span><br></pre></td></tr></table></figure><h1 id="reactflow"><a href="#reactflow" class="headerlink" title="reactflow"></a>reactflow</h1><h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm install --save @xyflow/react</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;@xyflow/react/dist/style.css&#x27;;</span><br></pre></td></tr></table></figure><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; addEdge, <span class="title class_">Background</span>, <span class="title class_">BackgroundVariant</span>, <span class="title class_">BaseEdge</span>, <span class="title class_">Connection</span>, <span class="title class_">Controls</span>, <span class="title class_">EdgeLabelRenderer</span>, <span class="title class_">EdgeProps</span>, getBezierPath, getStraightPath, <span class="title class_">Handle</span>, <span class="title class_">MiniMap</span>, <span class="title class_">OnConnect</span>, <span class="title class_">Position</span>, <span class="title class_">ReactFlow</span>, useEdgesState, useNodesState, useReactFlow &#125; <span class="keyword">from</span> <span class="string">&#x27;@xyflow/react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@xyflow/react/dist/style.css&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> initialNodes = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, <span class="attr">type</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">label</span>: <span class="string">&#x27;1&#x27;</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">y</span>: <span class="number">300</span> &#125;, <span class="attr">type</span>: <span class="string">&#x27;blue&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">label</span>: <span class="string">&#x27;2&#x27;</span> &#125; &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> initialEdges = [&#123; <span class="attr">id</span>: <span class="string">&#x27;e1-2&#x27;</span>, <span class="attr">source</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">target</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;custom&#x27;</span> &#125;];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">NodePorps</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RedNode</span>(<span class="params">&#123; data &#125;: NodePorps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;background:</span> &#x27;<span class="attr">red</span>&#x27;, <span class="attr">width:</span> &#x27;<span class="attr">100px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">100px</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;source&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Right&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;target&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data.label&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BlueNode</span>(<span class="params">&#123; data &#125;: NodePorps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;background:</span> &#x27;<span class="attr">blue</span>&#x27;, <span class="attr">width:</span> &#x27;<span class="attr">50px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">50px</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">color:</span> &#x27;#<span class="attr">fff</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;source&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;target&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Top&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data.label&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomEdge</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  id,</span></span><br><span class="line"><span class="params">  sourceX,</span></span><br><span class="line"><span class="params">  sourceY,</span></span><br><span class="line"><span class="params">  targetX,</span></span><br><span class="line"><span class="params">  targetY,</span></span><br><span class="line"><span class="params">  sourcePosition,</span></span><br><span class="line"><span class="params">  targetPosition,</span></span><br><span class="line"><span class="params">  style = &#123;&#125;,</span></span><br><span class="line"><span class="params">  markerEnd,</span></span><br><span class="line"><span class="params">&#125;: EdgeProps</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; setEdges &#125; = <span class="title function_">useReactFlow</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [edgePath, labelX, labelY] = <span class="title function_">getBezierPath</span>(&#123;</span><br><span class="line">    sourceX,</span><br><span class="line">    sourceY,</span><br><span class="line">    sourcePosition,</span><br><span class="line">    targetX,</span><br><span class="line">    targetY,</span><br><span class="line">    targetPosition,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onEdgeClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">edges</span>) =&gt;</span> edges.<span class="title function_">filter</span>(<span class="function">(<span class="params">edge</span>) =&gt;</span> edge.<span class="property">id</span> !== id));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BaseEdge</span> <span class="attr">path</span>=<span class="string">&#123;edgePath&#125;</span> <span class="attr">markerEnd</span>=<span class="string">&#123;markerEnd&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">transform:</span> `<span class="attr">translate</span>(<span class="attr">-50</span>%, <span class="attr">-50</span>%) <span class="attr">translate</span>($&#123;<span class="attr">labelX</span>&#125;<span class="attr">px</span>,$&#123;<span class="attr">labelY</span>&#125;<span class="attr">px</span>)`,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">fontSize:</span> <span class="attr">12</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            // <span class="attr">EdgeLabelRenderer</span> <span class="attr">é‡Œçš„ç»„ä»¶é»˜è®¤ä¸å¤„ç†é¼ æ ‡äº‹ä»¶</span>ï¼Œ<span class="attr">å¦‚æœè¦å¤„ç†å°±è¦å£°æ˜</span> <span class="attr">pointerEvents:</span> <span class="attr">all</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">pointerEvents:</span> &#x27;<span class="attr">all</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onEdgeClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Ã—</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [nodes, setNodes, onNodesChange] = <span class="title function_">useNodesState</span>(initialNodes);</span><br><span class="line">  <span class="keyword">const</span> [edges, setEdges, onEdgesChange] = <span class="title function_">useEdgesState</span>(initialEdges);</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onConnect</span> = (<span class="params">params: Connection</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">eds</span>) =&gt;</span> <span class="title function_">addEdge</span>(params, eds))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &#x27;<span class="attr">800px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">500px</span>&#x27;, <span class="attr">border:</span> &#x27;<span class="attr">1px</span> <span class="attr">solid</span> #<span class="attr">000</span>&#x27;, <span class="attr">margin:</span> &#x27;<span class="attr">50px</span> <span class="attr">auto</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ReactFlow</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">nodes</span>=<span class="string">&#123;nodes&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">edges</span>=<span class="string">&#123;edges&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onNodesChange</span>=<span class="string">&#123;onNodesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onEdgesChange</span>=<span class="string">&#123;onEdgesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onConnect</span>=<span class="string">&#123;onConnect&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">nodeTypes</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">red:</span> <span class="attr">RedNode</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">blue:</span> <span class="attr">BlueNode</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">edgeTypes</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">custom:</span> <span class="attr">CustomEdge</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Controls</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">MiniMap</span> <span class="attr">zoomable</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Background</span> <span class="attr">variant</span>=<span class="string">&#123;BackgroundVariant.Lines&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ReactFlow</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œè¿™é‡Œæ˜¯ä¸€ç¯‡è®²æ¸…æ¥š React Flow ä½¿ç”¨æ–¹æ³•çš„å¿«é€Ÿå…¥é—¨åšå®¢ï¼Œå›´ç»•ä½ æä¾›çš„ä»£ç å±•å¼€ï¼Œé‡ç‚¹æ˜¯ <strong>API ç”¨æ³•æ¸…æ™°</strong>ã€<strong>é€»è¾‘æ˜“æ‡‚</strong>ï¼Œè®©ä½ æˆ–åˆ«äººè¯»å®Œå°±èƒ½ä¸Šæ‰‹å¼€å‘æµç¨‹å›¾ã€‚</p><hr><h2 id="ğŸ§±-æ ¸å¿ƒç»“æ„"><a href="#ğŸ§±-æ ¸å¿ƒç»“æ„" class="headerlink" title="ğŸ§± æ ¸å¿ƒç»“æ„"></a>ğŸ§± æ ¸å¿ƒç»“æ„</h2><p>React Flow çš„åŸºæœ¬ç»“æ„æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ReactFlow</span></span><br><span class="line">  nodes=&#123;nodes&#125;</span><br><span class="line">  edges=&#123;edges&#125;</span><br><span class="line">  onNodesChange=&#123;...&#125;</span><br><span class="line">  onEdgesChange=&#123;...&#125;</span><br><span class="line">  onConnect=&#123;...&#125;</span><br><span class="line">  nodeTypes=&#123;...&#125;</span><br><span class="line">  edgeTypes=&#123;...&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Controls</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">MiniMap</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Background</span> /&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">ReactFlow</span>&gt;</span><br></pre></td></tr></table></figure><p>å®ƒçš„æ ¸å¿ƒæ˜¯ï¼š</p><ul><li><code>nodes</code>: èŠ‚ç‚¹æ•°ç»„</li><li><code>edges</code>: è¾¹æ•°ç»„</li><li><code>onNodesChange</code>: èŠ‚ç‚¹æ‹–åŠ¨&#x2F;ä¿®æ”¹æ—¶è§¦å‘</li><li><code>onEdgesChange</code>: è¾¹æ›´æ–°æ—¶è§¦å‘</li><li><code>onConnect</code>: è¿çº¿æ—¶è§¦å‘</li><li><code>nodeTypes</code>, <code>edgeTypes</code>: è‡ªå®šä¹‰èŠ‚ç‚¹&#x2F;è¾¹çš„å®ç°</li></ul><hr><h2 id="ğŸ§ -èŠ‚ç‚¹å®šä¹‰"><a href="#ğŸ§ -èŠ‚ç‚¹å®šä¹‰" class="headerlink" title="ğŸ§  èŠ‚ç‚¹å®šä¹‰"></a>ğŸ§  èŠ‚ç‚¹å®šä¹‰</h2><p>ä½ å¯ä»¥å®šä¹‰ä»»æ„é£æ ¼çš„èŠ‚ç‚¹ï¼Œæ ¸å¿ƒç»„ä»¶æ˜¯ <code>Handle</code>ï¼Œå®ƒå®šä¹‰äº†å¯ä»¥è¿çº¿çš„ä½ç½®ã€‚</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">RedNode</span>(<span class="params">&#123; data &#125;: NodeProps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> &#x27;<span class="attr">red</span>&#x27;, <span class="attr">width:</span> <span class="attr">100</span>, <span class="attr">height:</span> <span class="attr">100</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;source&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Right&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;target&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data.label&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>type=&quot;source&quot;</code> è¡¨ç¤ºè¿™æ˜¯è¿çº¿èµ·ç‚¹ï¼Œ<code>target</code> æ˜¯ç»ˆç‚¹ã€‚</li><li><code>position</code> å†³å®šäº†å“ªä¸ªæ–¹å‘å¯ä»¥æ‹–å‡ºçº¿ï¼ˆä¾‹å¦‚å³è¾¹æˆ–åº•éƒ¨ï¼‰ã€‚</li><li><code>data</code> æ˜¯ä¼ å…¥çš„æ•°æ®ï¼Œä¾‹å¦‚ label æ–‡æœ¬ã€‚</li></ul><p>ä½ å¯ä»¥åœ¨ <code>nodeTypes</code> é‡Œæ³¨å†Œè¿™äº›ç»„ä»¶ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nodeTypes=&#123;&#123;</span><br><span class="line">  <span class="attr">red</span>: <span class="title class_">RedNode</span>,</span><br><span class="line">  <span class="attr">blue</span>: <span class="title class_">BlueNode</span></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„ node é…ç½®å°±åƒè¿™æ ·ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, <span class="attr">type</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">label</span>: <span class="string">&#x27;1&#x27;</span> &#125; &#125;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§©-è¾¹å®šä¹‰ï¼ˆEdgeï¼‰"><a href="#ğŸ§©-è¾¹å®šä¹‰ï¼ˆEdgeï¼‰" class="headerlink" title="ğŸ§© è¾¹å®šä¹‰ï¼ˆEdgeï¼‰"></a>ğŸ§© è¾¹å®šä¹‰ï¼ˆEdgeï¼‰</h2><p>ä½ å¯ä»¥ç”¨å†…ç½®çš„è¾¹ç±»å‹ï¼ˆ<code>default</code>ã€<code>step</code>ã€<code>smoothstep</code> ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥åƒä½ ä»£ç ä¸­é‚£æ ·è‡ªå®šä¹‰ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">CustomEdge</span>(<span class="params">props: EdgeProps</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; id, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> &#123; setEdges &#125; = <span class="title function_">useReactFlow</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [path, labelX, labelY] = <span class="title function_">getBezierPath</span>(&#123;</span><br><span class="line">    sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BaseEdge</span> <span class="attr">path</span>=<span class="string">&#123;path&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;, <span class="attr">transform:</span> `<span class="attr">translate</span>($&#123;<span class="attr">labelX</span>&#125;<span class="attr">px</span>, $&#123;<span class="attr">labelY</span>&#125;<span class="attr">px</span>)` &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setEdges(eds =&gt; eds.filter(e =&gt; e.id !== id))&#125;&gt;Ã—<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ç”¨çš„æ˜¯ <code>getBezierPath()</code> æ¥ç”Ÿæˆä¸€æ¡è´å¡å°”æ›²çº¿ï¼Œ<code>EdgeLabelRenderer</code> åˆ™å…è®¸ä½ åœ¨è¾¹ä¸Šæ¸²æŸ“äº¤äº’ç»„ä»¶ã€‚</p><p>æ³¨å†Œæ–¹å¼ç±»ä¼¼ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">edgeTypes=&#123;&#123;</span><br><span class="line">  <span class="attr">custom</span>: <span class="title class_">CustomEdge</span></span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="âš™ï¸-çŠ¶æ€ç®¡ç†-Hooks"><a href="#âš™ï¸-çŠ¶æ€ç®¡ç†-Hooks" class="headerlink" title="âš™ï¸ çŠ¶æ€ç®¡ç† Hooks"></a>âš™ï¸ çŠ¶æ€ç®¡ç† Hooks</h2><p>React Flow æä¾›äº†ä¸€å¥—å®˜æ–¹ Hook æ¥ç®€åŒ–èŠ‚ç‚¹&#x2F;è¾¹çŠ¶æ€çš„ç®¡ç†ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [nodes, setNodes, onNodesChange] = <span class="title function_">useNodesState</span>(initialNodes);</span><br><span class="line"><span class="keyword">const</span> [edges, setEdges, onEdgesChange] = <span class="title function_">useEdgesState</span>(initialEdges);</span><br></pre></td></tr></table></figure><p>å®ƒä»¬å†…ç½®äº†å¯¹èŠ‚ç‚¹&#x2F;è¾¹çš„å¢åˆ æ”¹è¿½è¸ªï¼Œä½ åªè¦ä¼ è¿› <code>ReactFlow</code> ç»„ä»¶å°±è¡Œã€‚</p><hr><h2 id="ğŸ”Œ-è¿çº¿é€»è¾‘-onConnect"><a href="#ğŸ”Œ-è¿çº¿é€»è¾‘-onConnect" class="headerlink" title="ğŸ”Œ è¿çº¿é€»è¾‘ onConnect"></a>ğŸ”Œ è¿çº¿é€»è¾‘ onConnect</h2><p>æ¯æ¬¡ç”¨æˆ·æ‹–çº¿æ—¶ï¼Œ<code>onConnect</code> ä¼šè§¦å‘ï¼Œä½ å¯ä»¥å†³å®šå¦‚ä½•å¤„ç†è¿™æ¡çº¿ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onConnect</span> = (<span class="params">params: Connection</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setEdges</span>(<span class="function"><span class="params">eds</span> =&gt;</span> <span class="title function_">addEdge</span>(params, eds));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>addEdge</code> æ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªå·¥å…·å‡½æ•°ï¼Œå¸®ä½ ç”Ÿæˆ <code>id</code>ã€<code>source</code>ã€<code>target</code> ç­‰å­—æ®µã€‚</p><hr><h2 id="ğŸ§°-é™„åŠ ç»„ä»¶ï¼šControlsã€MiniMapã€Background"><a href="#ğŸ§°-é™„åŠ ç»„ä»¶ï¼šControlsã€MiniMapã€Background" class="headerlink" title="ğŸ§° é™„åŠ ç»„ä»¶ï¼šControlsã€MiniMapã€Background"></a>ğŸ§° é™„åŠ ç»„ä»¶ï¼šControlsã€MiniMapã€Background</h2><ul><li><code>&lt;Controls /&gt;</code>: å·¦ä¸‹è§’æ”¾å¤§ç¼©å°å±…ä¸­æŒ‰é’®</li><li><code>&lt;MiniMap /&gt;</code>: å³ä¸‹è§’çš„å°åœ°å›¾</li><li><code>&lt;Background /&gt;</code>: èƒŒæ™¯ç½‘æ ¼ï¼Œå¯é€‰ <code>dots</code>, <code>lines</code>, <code>cross</code> ç­‰é£æ ¼</li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Background</span> variant=&#123;<span class="title class_">BackgroundVariant</span>.<span class="property">Lines</span>&#125; /&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">MiniMap</span> <span class="attr">zoomable</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Controls</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><hr><h2 id="âœ…-æœ€åå®Œæ•´ç»“æ„å¤ç›˜"><a href="#âœ…-æœ€åå®Œæ•´ç»“æ„å¤ç›˜" class="headerlink" title="âœ… æœ€åå®Œæ•´ç»“æ„å¤ç›˜"></a>âœ… æœ€åå®Œæ•´ç»“æ„å¤ç›˜</h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ReactFlow</span></span><br><span class="line">  nodes=&#123;nodes&#125;</span><br><span class="line">  edges=&#123;edges&#125;</span><br><span class="line">  onNodesChange=&#123;onNodesChange&#125;</span><br><span class="line">  onEdgesChange=&#123;onEdgesChange&#125;</span><br><span class="line">  onConnect=&#123;onConnect&#125;</span><br><span class="line">  nodeTypes=&#123;&#123; <span class="attr">red</span>: <span class="title class_">RedNode</span>, <span class="attr">blue</span>: <span class="title class_">BlueNode</span> &#125;&#125;</span><br><span class="line">  edgeTypes=&#123;&#123; <span class="attr">custom</span>: <span class="title class_">CustomEdge</span> &#125;&#125;</span><br><span class="line">&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Controls</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">MiniMap</span> <span class="attr">zoomable</span> /&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Background</span> <span class="attr">variant</span>=<span class="string">&#123;BackgroundVariant.Lines&#125;</span> /&gt;</span></span></span><br><span class="line">&lt;/<span class="title class_">ReactFlow</span>&gt;</span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ§­-å°ç»“ï¼šå¿«é€Ÿä¸Šæ‰‹å»ºè®®"><a href="#ğŸ§­-å°ç»“ï¼šå¿«é€Ÿä¸Šæ‰‹å»ºè®®" class="headerlink" title="ğŸ§­ å°ç»“ï¼šå¿«é€Ÿä¸Šæ‰‹å»ºè®®"></a>ğŸ§­ å°ç»“ï¼šå¿«é€Ÿä¸Šæ‰‹å»ºè®®</h2><table><thead><tr><th>æ“ä½œ</th><th>åšæ³•</th></tr></thead><tbody><tr><td>æ·»åŠ èŠ‚ç‚¹</td><td>å‘ <code>nodes</code> æ·»åŠ ä¸€ä¸ªæ–°å¯¹è±¡</td></tr><tr><td>æ·»åŠ è¾¹</td><td>ç”¨ <code>addEdge</code> æˆ–æ‰‹åŠ¨ <code>setEdges([...edges, newEdge])</code></td></tr><tr><td>è‡ªå®šä¹‰æ ·å¼</td><td>é‡å†™ node æˆ– edge ç»„ä»¶</td></tr><tr><td>åˆ é™¤èŠ‚ç‚¹&#x2F;è¾¹</td><td>ç”¨ <code>setNodes</code> &#x2F; <code>setEdges</code> è¿‡æ»¤æ‰å¯¹åº” id</td></tr><tr><td>å“åº”è¿çº¿</td><td>ç”¨ <code>onConnect</code> æ·»åŠ è¾¹</td></tr><tr><td>æ‹–åŠ¨&#x2F;ç¼©æ”¾&#x2F;è¿·ä½ å›¾</td><td>åŠ ä¸Š <code>&lt;Controls/&gt;</code> <code>&lt;MiniMap/&gt;</code> <code>&lt;Background/&gt;</code></td></tr></tbody></table><hr><h2 id="ğŸ“¦-æç¤ºï¼šæ ·å¼å’Œä¾èµ–"><a href="#ğŸ“¦-æç¤ºï¼šæ ·å¼å’Œä¾èµ–" class="headerlink" title="ğŸ“¦ æç¤ºï¼šæ ·å¼å’Œä¾èµ–"></a>ğŸ“¦ æç¤ºï¼šæ ·å¼å’Œä¾èµ–</h2><p>ç¡®ä¿ä½ å¼•å…¥äº† React Flow æ ·å¼ï¼š</p><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@xyflow/react/dist/style.css&#x27;</span>;</span><br></pre></td></tr></table></figure><p>å¹¶å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @xyflow/react</span><br></pre></td></tr></table></figure><h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; addEdge, <span class="title class_">Background</span>, <span class="title class_">BackgroundVariant</span>, <span class="title class_">BaseEdge</span>, <span class="title class_">Connection</span>, <span class="title class_">Controls</span>, <span class="title class_">EdgeLabelRenderer</span>, <span class="title class_">EdgeProps</span>, getBezierPath, getStraightPath, <span class="title class_">Handle</span>, <span class="title class_">MiniMap</span>, <span class="title class_">OnConnect</span>, <span class="title class_">Position</span>, <span class="title class_">ReactFlow</span>, useEdgesState, useNodesState, useReactFlow &#125; <span class="keyword">from</span> <span class="string">&#x27;@xyflow/react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@xyflow/react/dist/style.css&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> initialNodes = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;, <span class="attr">type</span>: <span class="string">&#x27;red&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">label</span>: <span class="string">&#x27;1&#x27;</span> &#125; &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">position</span>: &#123; <span class="attr">x</span>: <span class="number">200</span>, <span class="attr">y</span>: <span class="number">300</span> &#125;, <span class="attr">type</span>: <span class="string">&#x27;blue&#x27;</span>, <span class="attr">data</span>: &#123; <span class="attr">label</span>: <span class="string">&#x27;2&#x27;</span> &#125; &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> initialEdges = [&#123; <span class="attr">id</span>: <span class="string">&#x27;e1-2&#x27;</span>, <span class="attr">source</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">target</span>: <span class="string">&#x27;2&#x27;</span>, <span class="attr">type</span>: <span class="string">&#x27;custom&#x27;</span> &#125;];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">NodePorps</span> &#123;</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">label</span>: <span class="built_in">string</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">RedNode</span>(<span class="params">&#123; data &#125;: NodePorps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;background:</span> &#x27;<span class="attr">red</span>&#x27;, <span class="attr">width:</span> &#x27;<span class="attr">100px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">100px</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;source&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Right&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;target&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data.label&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BlueNode</span>(<span class="params">&#123; data &#125;: NodePorps</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;background:</span> &#x27;<span class="attr">blue</span>&#x27;, <span class="attr">width:</span> &#x27;<span class="attr">50px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">50px</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">color:</span> &#x27;#<span class="attr">fff</span>&#x27;&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;source&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Bottom&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Handle</span> <span class="attr">type</span>=<span class="string">&quot;target&quot;</span> <span class="attr">position</span>=<span class="string">&#123;Position.Top&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;data.label&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">CustomEdge</span>(<span class="params">&#123;</span></span><br><span class="line"><span class="params">  id,</span></span><br><span class="line"><span class="params">  sourceX,</span></span><br><span class="line"><span class="params">  sourceY,</span></span><br><span class="line"><span class="params">  targetX,</span></span><br><span class="line"><span class="params">  targetY,</span></span><br><span class="line"><span class="params">  sourcePosition,</span></span><br><span class="line"><span class="params">  targetPosition,</span></span><br><span class="line"><span class="params">  style = &#123;&#125;,</span></span><br><span class="line"><span class="params">  markerEnd,</span></span><br><span class="line"><span class="params">&#125;: EdgeProps</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123; setEdges &#125; = <span class="title function_">useReactFlow</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [edgePath, labelX, labelY] = <span class="title function_">getBezierPath</span>(&#123;</span><br><span class="line">    sourceX,</span><br><span class="line">    sourceY,</span><br><span class="line">    sourcePosition,</span><br><span class="line">    targetX,</span><br><span class="line">    targetY,</span><br><span class="line">    targetPosition,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onEdgeClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">edges</span>) =&gt;</span> edges.<span class="title function_">filter</span>(<span class="function">(<span class="params">edge</span>) =&gt;</span> edge.<span class="property">id</span> !== id));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">BaseEdge</span> <span class="attr">path</span>=<span class="string">&#123;edgePath&#125;</span> <span class="attr">markerEnd</span>=<span class="string">&#123;markerEnd&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">position:</span> &#x27;<span class="attr">absolute</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">transform:</span> `<span class="attr">translate</span>(<span class="attr">-50</span>%, <span class="attr">-50</span>%) <span class="attr">translate</span>($&#123;<span class="attr">labelX</span>&#125;<span class="attr">px</span>,$&#123;<span class="attr">labelY</span>&#125;<span class="attr">px</span>)`,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">fontSize:</span> <span class="attr">12</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            // <span class="attr">EdgeLabelRenderer</span> <span class="attr">é‡Œçš„ç»„ä»¶é»˜è®¤ä¸å¤„ç†é¼ æ ‡äº‹ä»¶</span>ï¼Œ<span class="attr">å¦‚æœè¦å¤„ç†å°±è¦å£°æ˜</span> <span class="attr">pointerEvents:</span> <span class="attr">all</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">pointerEvents:</span> &#x27;<span class="attr">all</span>&#x27;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onEdgeClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Ã—</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">EdgeLabelRenderer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [nodes, setNodes, onNodesChange] = <span class="title function_">useNodesState</span>(initialNodes);</span><br><span class="line">  <span class="keyword">const</span> [edges, setEdges, onEdgesChange] = <span class="title function_">useEdgesState</span>(initialEdges);</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onConnect</span> = (<span class="params">params: Connection</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setEdges</span>(<span class="function">(<span class="params">eds</span>) =&gt;</span> <span class="title function_">addEdge</span>(params, eds))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> &#x27;<span class="attr">800px</span>&#x27;, <span class="attr">height:</span> &#x27;<span class="attr">500px</span>&#x27;, <span class="attr">border:</span> &#x27;<span class="attr">1px</span> <span class="attr">solid</span> #<span class="attr">000</span>&#x27;, <span class="attr">margin:</span> &#x27;<span class="attr">50px</span> <span class="attr">auto</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ReactFlow</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">nodes</span>=<span class="string">&#123;nodes&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">edges</span>=<span class="string">&#123;edges&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onNodesChange</span>=<span class="string">&#123;onNodesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onEdgesChange</span>=<span class="string">&#123;onEdgesChange&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onConnect</span>=<span class="string">&#123;onConnect&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">nodeTypes</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">red:</span> <span class="attr">RedNode</span>,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">blue:</span> <span class="attr">BlueNode</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">edgeTypes</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">custom:</span> <span class="attr">CustomEdge</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Controls</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">MiniMap</span> <span class="attr">zoomable</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Background</span> <span class="attr">variant</span>=<span class="string">&#123;BackgroundVariant.Lines&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ReactFlow</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-CSSæ–¹æ¡ˆ</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><ul><li><code>sass</code> + <code>classnames</code></li><li><strong>CSS in JS</strong><ul><li><code>styled-components</code></li></ul></li><li><code>css module</code></li><li><code>tailwind</code></li></ul><h1 id="sass-classnames"><a href="#sass-classnames" class="headerlink" title="sass + classnames"></a>sass + classnames</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save sass</span><br><span class="line">cnpm install classnames</span><br></pre></td></tr></table></figure><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329172638035.png" alt="image-20250329172638035"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329172642846.png" alt="image-20250329172642846"></p><p>å½“ className çš„ç¡®å®šéœ€è¦ä¸€æ®µå¤æ‚è®¡ç®—é€»è¾‘çš„æ—¶å€™ï¼Œå°±ç”¨ classnames è¿™ä¸ªåŒ…ã€‚</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.calendar-month</span> &#123;</span><br><span class="line">  &amp;-<span class="selector-tag">body</span> &#123;</span><br><span class="line">    &amp;-row &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-cell &#123;</span><br><span class="line">      <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">      <span class="comment">//padding: 10px;</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">      <span class="attribute">overflow</span>: hidden;</span><br><span class="line">      &amp;-current &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      &amp;-date &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">        &amp;-selected &#123;</span><br><span class="line">          <span class="attribute">background</span>: blue;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">text-align</span>: center;</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">          <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cs <span class="keyword">from</span> <span class="string">&quot;classnames&quot;</span>;</span><br><span class="line">className=&#123;</span><br><span class="line">    <span class="title function_">cs</span>(<span class="string">&quot;calendar-month-body-cell-date-value&quot;</span>,</span><br><span class="line">        value?.<span class="title function_">format</span>(<span class="string">&quot;YYYY-MM-DD&quot;</span>) === item.<span class="property">date</span>.<span class="title function_">format</span>(<span class="string">&quot;YYYY-MM-DD&quot;</span>)</span><br><span class="line">        ? <span class="string">&quot;calendar-month-body-cell-date-selected&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    )&#125;</span><br></pre></td></tr></table></figure><h1 id="styled-components"><a href="#styled-components" class="headerlink" title="styled-components"></a>styled-components</h1><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save styled-components</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨æ€»å’Œ"><a href="#ä½¿ç”¨æ€»å’Œ" class="headerlink" title="ä½¿ç”¨æ€»å’Œ"></a>ä½¿ç”¨æ€»å’Œ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">FC</span>, <span class="title class_">PropsWithChildren</span>, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> styled, &#123;</span><br><span class="line">  css,</span><br><span class="line">  keyframes,</span><br><span class="line">  <span class="title class_">RuleSet</span>,</span><br><span class="line">  <span class="title class_">ThemeProvider</span>,</span><br><span class="line">  useTheme,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;styled-components&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ ‡é¢˜ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Title</span> = styled.<span class="property">h1</span><span class="string">`</span></span><br><span class="line"><span class="string">  font-size: 12px;</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string">  display: flex;</span></span><br><span class="line"><span class="string">  flex-direction: column;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªåŸºç¡€çš„ Header ç»„ä»¶ï¼Œæ”¯æŒå¯é€‰é¢œè‰²å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Header</span> = styled.<span class="property">div</span>&lt;&#123; color?: string &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">  background: <span class="subst">$&#123;(props) =&gt; props.color || <span class="string">&quot;blue&quot;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Header2 ç»§æ‰¿è‡ª Headerï¼Œå¹¶å¢åŠ äº†ä¸€äº›é¢å¤–çš„æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Header2</span> = <span class="title function_">styled</span>(<span class="title class_">Header</span>)<span class="string">`</span></span><br><span class="line"><span class="string">  border-radius: 12px;</span></span><br><span class="line"><span class="string">  font-size: 30px;</span></span><br><span class="line"><span class="string">  background: <span class="subst">$&#123;(props) =&gt; (props.theme.dark ? <span class="string">&quot;black&quot;</span> : <span class="string">&quot;#ccc&quot;</span>)&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;::before &#123;</span></span><br><span class="line"><span class="string">    content: &quot;* &quot;;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰é“¾æ¥ç»„ä»¶çš„ Props æ¥å£</span></span><br><span class="line">interface <span class="title class_">LinkProps</span> <span class="keyword">extends</span> <span class="title class_">PropsWithChildren</span> &#123;</span><br><span class="line">  <span class="attr">href</span>: string;</span><br><span class="line">  className?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸºç¡€çš„é“¾æ¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Link</span>: <span class="variable constant_">FC</span>&lt;<span class="title class_">LinkProps</span>&gt; = <span class="function">(<span class="params">&#123; href, children, className &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;href&#125;</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ styled-components å®šä¹‰ä¸€ä¸ªå¸¦æœ‰å±æ€§çš„é“¾æ¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StyledLink</span> = <span class="title function_">styled</span>(<span class="title class_">Link</span>).<span class="property">attrs</span>&lt;&#123; $color?: string &#125;&gt;(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(props);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">$color</span>: <span class="string">&quot;orange&quot;</span>, <span class="comment">// é»˜è®¤é¢œè‰²</span></span><br><span class="line">    <span class="attr">children</span>: props.<span class="property">children</span> + <span class="string">&quot; å…‰&quot;</span>, <span class="comment">// ä¿®æ”¹å­å…ƒç´ æ–‡æœ¬</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)<span class="string">`</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;(props) =&gt; props.$color || <span class="string">&quot;green&quot;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">  font-size: 40px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ—‹è½¬åŠ¨ç”»</span></span><br><span class="line"><span class="keyword">const</span> rotate = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">  from &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(0deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  to &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(360deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå¯å¤ç”¨çš„åŠ¨ç”»æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> animation = css`<span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="attribute">animation</span>: </span><span class="subst">$&#123;rotate&#125;</span><span class="language-css"> <span class="number">2s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ—‹è½¬ç»„ä»¶ï¼Œæ”¯æŒè‡ªå®šä¹‰åŠ¨ç”»æŒç»­æ—¶é—´å’Œé¢å¤–æ ·å¼</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Rotate</span> = styled.<span class="property">div</span>&lt;&#123; <span class="attr">$duration</span>: number; otherStyles?: <span class="title class_">RuleSet</span> &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  display: inline-block;</span></span><br><span class="line"><span class="string">  font-size: 50px;</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;animation&#125;</span></span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;(props) =&gt; props.otherStyles&#125;</span>;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…å®¹ç»„ä»¶ï¼ŒåŒ…å«ä¸€ä¸ªæŒ‰é’®ç”¨äºåˆ‡æ¢ä¸»é¢˜</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Content</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = <span class="title function_">useTheme</span>();</span><br><span class="line">  <span class="keyword">const</span> [dark, setDark] = useState&lt;boolean&gt;(theme.<span class="property">dark</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setDark(!dark)&#125;</span></span><br><span class="line"><span class="language-xml">        style=&#123;&#123;</span></span><br><span class="line"><span class="language-xml">          display: &quot;flex&quot;,</span></span><br><span class="line"><span class="language-xml">          justifyContent: &quot;center&quot;,</span></span><br><span class="line"><span class="language-xml">          alignItems: &quot;center&quot;,</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        åˆ‡æ¢</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">theme</span>=<span class="string">&#123;&#123;</span> <span class="attr">dark</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Header2</span>&gt;</span><span class="tag">&lt;/<span class="name">Header2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸»åº”ç”¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Header2</span> <span class="attr">color</span>=<span class="string">&quot;yellow&quot;</span> <span class="attr">as</span>=<span class="string">&quot;span&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          aaaaaaaa</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Header2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">StyledLink</span> <span class="attr">href</span>=<span class="string">&quot;#aaa&quot;</span> $<span class="attr">color</span>=<span class="string">&quot;blue&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Click me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">StyledLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Rotate</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        $<span class="attr">duration</span>=<span class="string">&#123;3&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">otherStyles</span>=<span class="string">&#123;[</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">border:</span> &quot;<span class="attr">1px</span> <span class="attr">solid</span>&quot;, <span class="attr">background:</span> &quot;<span class="attr">pink</span>&quot; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &#123; <span class="attr">boxShadow:</span> &quot;<span class="attr">0</span> <span class="attr">0</span> <span class="attr">3px</span> <span class="attr">blue</span>&quot; &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        ]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        X</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Rotate</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">theme</span>=<span class="string">&#123;&#123;</span> <span class="attr">dark:</span> <span class="attr">true</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Content</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Title</span> = styled.<span class="property">h1</span><span class="string">`</span></span><br><span class="line"><span class="string">  font-size: 30px;</span></span><br><span class="line"><span class="string">  text-align: center;</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Header</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  padding: 20px;</span></span><br><span class="line"><span class="string">  background: pink;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hello World!</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329174435888.png" alt="image-20250329174435888"></p><p>styled.divã€styled.h1 ä¼šåˆ›å»ºå¯¹åº”çš„æ ‡ç­¾ï¼Œç„¶åæ ·å¼ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ classNameã€‚</p><p>æ‰€ä»¥è¯´ï¼Œç”¨ styled-components ä¸ç”¨æ‹…å¿ƒæ ·å¼å†²çªçš„é—®é¢˜ã€‚</p><p>ç»§ç»­çœ‹ï¼Œstyled-components çš„ styled.xx å¯ä»¥ä½œä¸ºç»„ä»¶ç”¨ï¼Œé‚£è‡ªç„¶æ˜¯å¯ä»¥ä¼ å‚çš„ï¼š</p><h3 id="ä¼ å‚"><a href="#ä¼ å‚" class="headerlink" title="ä¼ å‚"></a>ä¼ å‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Title</span> = styled.<span class="property">h1</span>&lt;&#123; color?: string; &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  font-size: 30px;</span></span><br><span class="line"><span class="string">  text-align: center;</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;props =&gt; props.color || <span class="string">&#x27;blue&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Header</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  padding: 20px;</span></span><br><span class="line"><span class="string">  background: pink;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hello World!</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Title</span> <span class="attr">color</span>=<span class="string">&#x27;green&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hello World!</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Title</span> <span class="attr">color</span>=<span class="string">&#x27;black&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hello World!</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h3 id="æ ·å¼ç»„ä»¶æ‰©å±•æ ·å¼"><a href="#æ ·å¼ç»„ä»¶æ‰©å±•æ ·å¼" class="headerlink" title="æ ·å¼ç»„ä»¶æ‰©å±•æ ·å¼"></a>æ ·å¼ç»„ä»¶æ‰©å±•æ ·å¼</h3><p>æœ‰çš„æ—¶å€™ï¼Œæ ·å¼éœ€è¦åŸºäºå·²æœ‰çš„åšæ‰©å±•ï¼Œæ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ª Button çš„æ ·å¼ï¼Œå¦ä¸€ç§ Button å’Œå®ƒå¤§éƒ¨åˆ†ä¸€æ ·ï¼Œä½†æœ‰æ‰€ä¸åŒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button</span> = styled.<span class="property">button</span>&lt;&#123; color?: string; &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  font-size: 20px;</span></span><br><span class="line"><span class="string">  margin: 5px 10px;</span></span><br><span class="line"><span class="string">  border: 2px solid #000;</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;props =&gt; props.color || <span class="string">&#x27;blue&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Button2</span> = <span class="title function_">styled</span>(<span class="title class_">Button</span>)<span class="string">`</span></span><br><span class="line"><span class="string">  border-radius: 8px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Button</span> <span class="attr">color</span>=<span class="string">&#x27;red&#x27;</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Button2</span> <span class="attr">color</span>=<span class="string">&#x27;red&#x27;</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">Button2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h3 id="æ›´æ”¹æ ·å¼ç»„ä»¶æ ‡ç­¾"><a href="#æ›´æ”¹æ ·å¼ç»„ä»¶æ ‡ç­¾" class="headerlink" title="æ›´æ”¹æ ·å¼ç»„ä»¶æ ‡ç­¾"></a>æ›´æ”¹æ ·å¼ç»„ä»¶æ ‡ç­¾</h3><p>å¦‚æœä½ è¿˜æƒ³æ”¹æ ·å¼ç»„ä»¶çš„æ ‡ç­¾ï¼Œå¯ä»¥ç”¨ asï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329174629104.png" alt="image-20250329174629104"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329174634126.png" alt="image-20250329174634126"></p><h3 id="æ™®é€šç»„ä»¶åŠ ä¸Šæ ·å¼"><a href="#æ™®é€šç»„ä»¶åŠ ä¸Šæ ·å¼" class="headerlink" title="æ™®é€šç»„ä»¶åŠ ä¸Šæ ·å¼"></a>æ™®é€šç»„ä»¶åŠ ä¸Šæ ·å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">FC</span>, <span class="title class_">PropsWithChildren</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">LinkProps</span> <span class="keyword">extends</span> <span class="title class_">PropsWithChildren</span> &#123;</span><br><span class="line">  <span class="attr">href</span>: string;</span><br><span class="line">  className?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Link</span>: <span class="variable constant_">FC</span>&lt;<span class="title class_">LinkProps</span>&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    href,</span><br><span class="line">    className,</span><br><span class="line">    children</span><br><span class="line">  &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;href&#125;</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StyledLink</span> = <span class="title function_">styled</span>(<span class="title class_">Link</span>)<span class="string">`</span></span><br><span class="line"><span class="string">  color: green;</span></span><br><span class="line"><span class="string">  font-size: 40px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">StyledLink</span> <span class="attr">href</span>=<span class="string">&#x27;#aaa&#x27;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">StyledLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚æˆ‘ä»¬ç»™ Link ç»„ä»¶åŠ ä¸Šæ ·å¼ã€‚</p><p>è¿™é‡Œè¦æ³¨æ„ï¼ŒLink ç»„ä»¶å¿…é¡»æ¥æ”¶ className å‚æ•°ï¼Œå› ä¸º styled-components ä¼šæŠŠæ ·å¼æ”¾åˆ°è¿™ä¸ª className ä¸Šï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329174728388.png" alt="image-20250329174728388"></p><p>æˆ‘ä»¬çŸ¥é“ï¼Œæ ·å¼ç»„ä»¶ä¹Ÿæ˜¯å¯ä»¥æ¥å—å‚æ•°çš„ï¼Œä¸ºäº†åŒºåˆ†ä¸¤è€…ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æ ·å¼ç»„ä»¶çš„ props ç”¨ $ å¼€å¤´ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">StyledLink</span> = <span class="title function_">styled</span>(<span class="title class_">Link</span>)&lt;&#123; $color?: string;&#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;props =&gt; props.$color || <span class="string">&#x27;green&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">  font-size: 40px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">StyledLink</span> <span class="attr">href</span>=<span class="string">&#x27;#aaa&#x27;</span> $<span class="attr">color</span>=<span class="string">&quot;purple&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">StyledLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹props"><a href="#ä¿®æ”¹props" class="headerlink" title="ä¿®æ”¹props"></a>ä¿®æ”¹props</h3><p>ç”¨ attrs æ–¹æ³•ï¼Œæ¥æ”¶ä¼ å…¥çš„ props è¿”å›ä¿®æ”¹åçš„ propsã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="variable constant_">FC</span>, <span class="title class_">PropsWithChildren</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">LinkProps</span> <span class="keyword">extends</span> <span class="title class_">PropsWithChildren</span> &#123;</span><br><span class="line">  <span class="attr">href</span>: string;</span><br><span class="line">  className?: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Link</span>: <span class="variable constant_">FC</span>&lt;<span class="title class_">LinkProps</span>&gt; = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(props);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    href,</span><br><span class="line">    className,</span><br><span class="line">    children</span><br><span class="line">  &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#123;href&#125;</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StyledLink</span> = <span class="title function_">styled</span>(<span class="title class_">Link</span>).<span class="property">attrs</span>&lt;&#123; $color?: string;&#125;&gt;(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(props);</span><br><span class="line"></span><br><span class="line">  props.<span class="property">$color</span> = <span class="string">&#x27;orange&#x27;</span>;</span><br><span class="line">  props.<span class="property">children</span> = props.<span class="property">children</span> + <span class="string">&#x27; å…‰&#x27;</span>;</span><br><span class="line">  <span class="keyword">return</span> props;</span><br><span class="line">&#125;)<span class="string">`</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;props =&gt; props.$color || <span class="string">&#x27;green&#x27;</span>&#125;</span>;</span></span><br><span class="line"><span class="string">  font-size: 40px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">StyledLink</span> <span class="attr">href</span>=<span class="string">&#x27;#aaa&#x27;</span> $<span class="attr">color</span>=<span class="string">&quot;purple&quot;</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">StyledLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h3 id="ä¼ªç±»ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨"><a href="#ä¼ªç±»ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨" class="headerlink" title="ä¼ªç±»ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨"></a>ä¼ªç±»ã€ä¼ªå…ƒç´ é€‰æ‹©å™¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ColoredText</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;::before &#123;</span></span><br><span class="line"><span class="string">    content: &#x27;* &#x27;;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½† styled components è¿™ä¸ª &amp; å’Œ scss é‡Œçš„ &amp; å«ä¹‰è¿˜ä¸å¤§ä¸€æ ·ã€‚</p><p>å®ƒæŒ‡çš„æ˜¯åŒä¸€ä¸ªæ ·å¼ç»„ä»¶çš„å®ä¾‹ï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯ ColoredText çš„å®ä¾‹ã€‚</p><p>æ‰€ä»¥å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ColoredText</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  color: blue;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;:hover &#123;</span></span><br><span class="line"><span class="string">    color: red;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;::before &#123;</span></span><br><span class="line"><span class="string">    content: &#x27;* &#x27;;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;.aaa + &amp; &#123;</span></span><br><span class="line"><span class="string">    background: lightblue;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &amp;.bbb ~ &amp; &#123;</span></span><br><span class="line"><span class="string">    background: pink;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span> <span class="attr">className</span>=<span class="string">&quot;aaa&quot;</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span> <span class="attr">className</span>=<span class="string">&quot;bbb&quot;</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ColoredText</span>&gt;</span>Hello styled components<span class="tag">&lt;/<span class="name">ColoredText</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œ &amp;.aaa + &amp; å°±æ˜¯ .aaa çš„ ColoredText æ ·å¼ç»„ä»¶ä¹‹åçš„ä¸€ä¸ª ColoredText æ ·å¼ç»„ä»¶å®ä¾‹ã€‚</p><p>&amp;.bbb ~ &amp; å°±æ˜¯ .bbb çš„ ColoredText æ ·å¼ç»„ä»¶ä¹‹åçš„æ‰€æœ‰ ColoredText æ ·å¼ç»„ä»¶å®ä¾‹ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/a50685505abf4aa89b77eb11470deb43tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ­¤å¤–ï¼Œå¦‚æœä½ æŠŠ &amp; å…¨æ¢æˆ &amp;&amp;ï¼Œä½ ä¼šå‘ç°æ•ˆæœä¹Ÿä¸€æ ·ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/07a777cd628e4f43a2cdd8ba117fcd8atplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/3584fdf7667549f98650f63812850a21tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é‚£ä»€ä¹ˆæ—¶å€™ç”¨ &amp;ã€ä»€ä¹ˆæ—¶å€™ç”¨ &amp;&amp; å‘¢ï¼Ÿ</p><p>å½“ä½ å’Œå…¨å±€æ ·å¼å†²çªçš„æ—¶å€™ã€‚</p><p>styled-components ç”¨ createGlobalStyle åˆ›å»ºå…¨å±€æ ·å¼ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/eacd0cbea59b43619a5b649d6d02ab59tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æˆ‘ä»¬å…¨å±€æŒ‡å®š ColoredText çš„ color ä¸º greenï¼Œç„¶åç»„ä»¶é‡ŒæŒ‡å®š color ä¸º blueã€‚</p><p>çœ‹ä¸‹æ•ˆæœï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/639d7f34253f4867a63ea95a6115f07dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ¯ä¸ª ColorText ç»„ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ª src-aYaIB çš„ classNameï¼Œå…¨å±€æ ·å¼å°±æ˜¯ç»™è¿™ä¸ª className åŠ äº† color ä¸º green çš„æ ·å¼ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œç»„ä»¶é‡Œå†™çš„ color: blue è¢«è¦†ç›–äº†ã€‚</p><p>è¿™æ—¶å€™ä½ è¿™æ ·å†™æ˜¯æ²¡ç”¨çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/e82f5fb54a4443d3ad62dd005139260atplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç”¨ &amp;&amp; æ‰èƒ½è¦†ç›–ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/3f43774805a54ae9bd465f01b9ea87d6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®ƒé€šè¿‡ .aaa.aaa è¿™æ ·çš„æ–¹å¼å®ç°äº†æ ·å¼ä¼˜å…ˆçº§çš„æå‡ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/e834290694424a96b3777125ddac3459tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled, keyframes &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rotate = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">  from &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(0deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  to &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(360deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Rotate</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  display: inline-block;</span></span><br><span class="line"><span class="string">  animation: <span class="subst">$&#123;rotate&#125;</span> 2s linear infinite;</span></span><br><span class="line"><span class="string">  font-size: 50px;</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Rotate</span>&gt;</span>X<span class="tag">&lt;/<span class="name">Rotate</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œå¦‚æœä½ æƒ³å¤ç”¨éƒ¨åˆ† cssï¼Œè¦è¿™æ ·å†™ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/81d2dae7cd2b461a922a14ca144ac43ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> animation = css`<span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="attribute">animation</span>: </span><span class="subst">$&#123;rotate&#125;</span><span class="language-css"> <span class="number">2s</span> linear infinite;</span></span><br><span class="line"><span class="language-css">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Rotate</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  display: inline-block;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;animation&#125;</span></span></span><br><span class="line"><span class="string">  font-size: 50px;</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">`</span>;</span><br></pre></td></tr></table></figure><p>ä¸åŠ  css æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ï¼Œä½ å¯ä»¥è¯•ä¸€ä¸‹ã€‚</p><p>æŠ½å‡ºæ¥çš„ css ä¹Ÿæ˜¯å¯ä»¥ç”¨ props çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/380772a25d5a481e9d4774f0a0a28d40tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled, keyframes, css &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rotate = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">  from &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(0deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  to &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(360deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animation = css&lt;&#123; <span class="attr">$duration</span>: number &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  animation: <span class="subst">$&#123;rotate&#125;</span> <span class="subst">$&#123;props =&gt; props.$duration&#125;</span>s linear infinite;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Rotate</span> = styled.<span class="property">div</span>&lt;&#123; <span class="attr">$duration</span>: number &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  display: inline-block;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;animation&#125;</span></span></span><br><span class="line"><span class="string">  font-size: 50px;</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Rotate</span> $<span class="attr">duration</span>=<span class="string">&#123;3&#125;</span>&gt;</span>X<span class="tag">&lt;/<span class="name">Rotate</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ css å£°æ˜äº†ç±»å‹ï¼Œç”¨åˆ°äº†è¿™éƒ¨åˆ†æ ·å¼çš„ styled.xxx ä¹Ÿéœ€è¦å£°æ˜ç±»å‹ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/bce8356728ce46cd95dd54c3d671ea60tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¦‚æœä½ å¸Œæœ›æ ·å¼ç»„ä»¶ç”¨çš„æ—¶å€™å¯ä»¥ä¼ å…¥ä¸€äº›æ ·å¼ï¼Œé‚£å¯ä»¥ç”¨ RuleSetï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/d9610642e3ae483a81e24d70339847d9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled, keyframes, css, <span class="title class_">RuleSet</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rotate = keyframes<span class="string">`</span></span><br><span class="line"><span class="string">  from &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(0deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  to &#123;</span></span><br><span class="line"><span class="string">    transform: rotate(360deg);</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> animation = css&lt;&#123; <span class="attr">$duration</span>: number &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  animation: <span class="subst">$&#123;rotate&#125;</span> <span class="subst">$&#123;props =&gt; props.$duration&#125;</span>s linear infinite;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Rotate</span> = styled.<span class="property">div</span>&lt;&#123; <span class="attr">$duration</span>: number, <span class="attr">otherStyles</span>: <span class="title class_">RuleSet</span> &#125;&gt;<span class="string">`</span></span><br><span class="line"><span class="string">  display: inline-block;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;animation&#125;</span></span></span><br><span class="line"><span class="string">  font-size: 50px;</span></span><br><span class="line"><span class="string">  padding: 30px;</span></span><br><span class="line"><span class="string">  <span class="subst">$&#123;props =&gt; props.otherStyles&#125;</span></span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Rotate</span> $<span class="attr">duration</span>=<span class="string">&#123;3&#125;</span> <span class="attr">otherStyles</span>=<span class="string">&#123;</span> [ </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#123; <span class="attr">border:</span> &#x27;<span class="attr">1px</span>&#x27;, <span class="attr">background:</span> &#x27;<span class="attr">pink</span>&#x27; &#125;, </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &#123; <span class="attr">boxShadow:</span> &#x27;<span class="attr">0</span> <span class="attr">0</span> <span class="attr">3px</span>  <span class="attr">blue</span>&#x27;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  ]&#125;&gt;</span>X<span class="tag">&lt;/<span class="name">Rotate</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>å®ƒæ˜¯ä¸€ä¸ªæ ·å¼å¯¹è±¡çš„æ•°ç»„ç±»å‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/f9844907d08c4726b63cc245954b211etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥ç”¨çš„æ—¶å€™ä¼ å…¥ä¸€äº›æ ·å¼ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/84404fa2bb434b4588a255515d4ab2betplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h3 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; styled, <span class="title class_">ThemeProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Aaa</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  width: 100px;</span></span><br><span class="line"><span class="string">  height: 100px;</span></span><br><span class="line"><span class="string">  background: <span class="subst">$&#123;props =&gt; props.theme.dark ? <span class="string">&#x27;black&#x27;</span> : <span class="string">&#x27;#ccc&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Content</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">Aaa</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">theme</span>=<span class="string">&#123;&#123;</span> <span class="attr">dark:</span> <span class="attr">true</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Content</span>&gt;</span><span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªæ ·å¼ç»„ä»¶éƒ½æœ‰ props.theme å¯ä»¥è¯»å–å½“å‰ theme å¯¹è±¡ï¼Œç„¶åè¿™ä¸ªå¯¹è±¡å¯ä»¥é€šè¿‡ useTheme è¯»å–ï¼Œé€šè¿‡ ThemeProvider ä¿®æ”¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; styled, <span class="title class_">ThemeProvider</span>, useTheme &#125; <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Aaa</span> = styled.<span class="property">div</span><span class="string">`</span></span><br><span class="line"><span class="string">  width: 100px;</span></span><br><span class="line"><span class="string">  height: 100px;</span></span><br><span class="line"><span class="string">  background: <span class="subst">$&#123;props =&gt; props.theme.dark ? <span class="string">&#x27;black&#x27;</span> : <span class="string">&#x27;#ccc&#x27;</span>&#125;</span></span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Content</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> theme = <span class="title function_">useTheme</span>();</span><br><span class="line">  <span class="keyword">const</span> [dark, setDark] = useState&lt;boolean&gt;(theme.<span class="property">dark</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setDark(!dark)&#125;&gt;åˆ‡æ¢<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">theme</span>=<span class="string">&#123;&#123;</span> <span class="attr">dark</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">Aaa</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">theme</span>=<span class="string">&#123;&#123;</span> <span class="attr">dark:</span> <span class="attr">true</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Content</span>&gt;</span><span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨ useTheme è¯»å–äº†å½“å‰ themeï¼Œç„¶åç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ setState è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œé€šè¿‡ ThemeProvider ä¿®æ”¹äº† theme çš„å€¼ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/623bdd0b1e5d4a8bb2f445fc452e9763tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>è¿™å°±æ˜¯ styled-components çš„ theme åŠŸèƒ½ã€‚</p><h1 id="css-module"><a href="#css-module" class="headerlink" title="css module"></a>css module</h1><h2 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h2><p>æ·»åŠ ä¸¤ä¸ªç»„ä»¶ Button1ã€Button2</p><p>Button1.tsx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Button1.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;btn-wrapper&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>button1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Button1.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.btn-wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Button2.tsx</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Button2.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;btn-wrapper&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>button2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Button2.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.btn-wrapper</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ App.tsx å¼•å…¥ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/c008f874ca1f4cf49c0281d962df7dc2tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ¸²æŸ“å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/99d854d61cef4f0eb290c45311beea94tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¾ˆæ˜æ˜¾ï¼Œæ˜¯æ ·å¼å†²çªäº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/7763b0310fda4477938228a4a1ace6eetplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ—¶å€™å¯ä»¥æ”¹ä¸‹åå­—ï¼ŒæŠŠ Button1.css è¯¥ä¸º Button1.module.css</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/7a0c4fd9875f40ddb1e6c3546b07639atplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¹¶ä¸”æ”¹ä¸‹å†™ className çš„æ–¹å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./Button1.module.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles[</span>&#x27;<span class="attr">btn-wrapper</span>&#x27;]&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&#123;styles.btn&#125;</span>&gt;</span>button1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨çœ‹ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/9f45013540ec47c19a12a29bb4d6f0betplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç°åœ¨å°±ä¸ä¼šæ ·å¼å†²çªäº†ã€‚</p><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/746e7659715c45718bbd2826ad29be74tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œbutton1 çš„ className å˜æˆäº†å¸¦ hash çš„å½¢å¼ï¼Œå…¨å±€å”¯ä¸€çš„ï¼Œè‡ªç„¶å°±ä¸ä¼šå†²çªäº†ã€‚</p><p>è¿™å°±æ˜¯ css modulesã€‚</p><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><p>é‚£å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p><p>çœ‹ä¸‹ç¼–è¯‘åçš„ä»£ç å°±æ˜ç™½äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/d1440a5624b440e19b37a6ab1993dcfatplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®ƒé€šè¿‡ç¼–è¯‘ç»™ className åŠ ä¸Šäº† hashï¼Œç„¶åå¯¼å‡ºäº†è¿™ä¸ªå”¯ä¸€çš„ classNameã€‚</p><p>æ‰€ä»¥åœ¨å¯¹è±¡é‡Œç”¨çš„ï¼Œå°±æ˜¯ç¼–è¯‘åçš„ classNameï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/49354180505b4b7ba57051d0af42196etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åœ¨ vscode é‡Œå®‰è£… css modules æ’ä»¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/94ed8f06bf1d47ea818ccd09f2d8ab5ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å°±å¯ä»¥æç¤ºå‡º css æ¨¡å—ä¸‹çš„ className äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/83299a653e5e48fbb6fdd12cfc143539tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h2 id="ä½¿ç”¨-2"><a href="#ä½¿ç”¨-2" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ul><li>å°†<code>css</code>æ”¹ä¸º<code>.moule.css</code>åç¼€</li><li>å°†classNameæ”¹ä¸º<code>className=&#123;styles[&quot;btn-wrapper&quot;]</code>æˆ–è€…<code>className=&#123;styles.btn&#125;</code></li></ul><h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨ vite.config.ts é‡Œä¿®æ”¹ä¸‹ css modules çš„é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">generateScopedName</span>: <span class="string">&quot;guang_[name]__[local]___[hash:base64:5]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æ¯”å¦‚é€šè¿‡ generateScopedName æ¥ä¿®æ”¹ç”Ÿæˆçš„ className çš„æ ¼å¼ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/8c6681d5cb27441fadc2a995dfe8c82etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="å…¨å±€æ ·å¼"><a href="#å…¨å±€æ ·å¼" class="headerlink" title="å…¨å±€æ ·å¼"></a>å…¨å±€æ ·å¼</h3><p>é‚£å¦‚æœåœ¨ Button1.module.css é‡Œæƒ³æŠŠ .btn-wrapper ä½œä¸ºå…¨å±€æ ·å¼å‘¢ï¼Ÿ</p><p>è¿™æ ·å†™ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/92860805e8ba43af9a2360080704d793tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨ç¼–è¯‘åçš„ css é‡Œå°±æ²¡æœ‰å¯¹ .btn-wrapper åšå¤„ç†äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/e32f074df92f4cbc8672a20d8cdd2f5dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åªä¸è¿‡ï¼Œå› ä¸º global çš„ className é»˜è®¤ä¸å¯¼å‡ºï¼Œè€Œæˆ‘ä»¬ç”¨ styles.xxx å¼•å…¥çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/476b127845404e139a7c460d42634f4ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ‰€ä»¥ className ä¸ºç©ºï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/285fc1a8373d4adcbee0810c4ddded75tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ—¶å€™ï¼Œæˆ–è€…æŠŠ className æ”¹ä¸ºè¿™æ ·ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/4395badbf3344c54947166c0bbc8fd7dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æˆ–è€…åœ¨é…ç½®é‡ŒåŠ ä¸€ä¸ª exportsGlobals:true</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">getJSON</span>: <span class="keyword">function</span> (<span class="params">cssFileName, json, outputFileName</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(cssFileName, json, outputFileName)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">exportGlobals</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨ global æ ·å¼ä¹Ÿå¯¼å‡ºäº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/b84e3028ce4744e7b15ebeb9da020970tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/b017d6cf97794c178f57905852a0c2e0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç›¸å¯¹çš„ï¼Œæ¨¡å—åŒ–çš„ className å°±ç”¨ :local() æ¥å£°æ˜ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/5ce8af9ebe26438f9210ca589e3f39f7tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é»˜è®¤æ˜¯ localã€‚</p><p>å¦‚æœä½ æƒ³é»˜è®¤ globalï¼Œé‚£ä¹Ÿå¯ä»¥é…ç½®ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/d3521c2e8a4d4297b1919120af1e9b93tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">getJSON</span>: <span class="keyword">function</span> (<span class="params">cssFileName, json, outputFileName</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(cssFileName, json, outputFileName)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">exportGlobals</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">scopeBehaviour</span>: <span class="string">&#x27;global&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç°åœ¨å°±æ­£å¥½åè¿‡æ¥äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/f55ebc2cdf3b42529eb80070daa943a9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é»˜è®¤æ˜¯ globalï¼Œå¦‚æœæ˜¯ local çš„è¦å•ç‹¬ç”¨ :local() å£°æ˜ã€‚</p><p>ä½ è¿˜å¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å“ªäº› css æ–‡ä»¶æ˜¯é»˜è®¤å…¨å±€ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vitejs.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>()],</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">      <span class="attr">getJSON</span>: <span class="keyword">function</span> (<span class="params">cssFileName, json, outputFileName</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(cssFileName, json, outputFileName)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">exportGlobals</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">globalModulePaths</span>: [<span class="regexp">/Button1/</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/b9a48c47497944fa991159c97576cdbetplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="localsConvention"><a href="#localsConvention" class="headerlink" title="localsConvention"></a>localsConvention</h3><p>è¿˜æœ‰ä¸€ä¸ªé…ç½®æ¯”è¾ƒå¸¸ç”¨ï¼Œå°±æ˜¯ localsConventionï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/74efd21817ec45308fa2511b0fc24caatplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å½“ localsConvention æ”¹ä¸º camelCase çš„æ—¶å€™ï¼Œå¯¼å‡ºå¯¹è±¡çš„ key ä¼šå˜æˆé©¼å³°çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/d7feafcbf5f84ebd88de935574b4285ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é‚£åœ¨ç»„ä»¶é‡Œå°±å¯ä»¥è¿™æ ·å†™ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/0906b2a31f3448778de1ab7e96c2c573tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h1 id="tailwind"><a href="#tailwind" class="headerlink" title="tailwind"></a>tailwind</h1><p><strong>tailwind</strong>æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼šv3å’Œv4</p><h2 id="v4å®‰è£…"><a href="#v4å®‰è£…" class="headerlink" title="v4å®‰è£…"></a>v4å®‰è£…</h2><blockquote><p>viteè„šæ‰‹æ¶</p></blockquote><h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£…" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£…"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£…</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install tailwindcss @tailwindcss/vite</span><br></pre></td></tr></table></figure><h3 id="ç¬¬äºŒæ­¥ï¼šé…ç½®"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½®"></a>ç¬¬äºŒæ­¥ï¼šé…ç½®</h3><p>æ‰“å¼€<code>vite.config.ts</code></p><p>ä¿®æ”¹æˆå¦‚ä¸‹é…ç½®ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&quot;vite&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> react <span class="keyword">from</span> <span class="string">&quot;@vitejs/plugin-react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> tailwindcss <span class="keyword">from</span> <span class="string">&quot;@tailwindcss/vite&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// https://vite.dev/config/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">react</span>(), <span class="title function_">tailwindcss</span>()],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="ç¬¬ä¸‰æ­¥ï¼šå¼•ç”¨"><a href="#ç¬¬ä¸‰æ­¥ï¼šå¼•ç”¨" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šå¼•ç”¨"></a>ç¬¬ä¸‰æ­¥ï¼šå¼•ç”¨</h3><p>åœ¨ä½ ä½¿ç”¨çš„<code>css</code>æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä¸‹åˆ—è¯­å¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">&quot;tailwindcss&quot;</span>;</span><br></pre></td></tr></table></figure><p>å®Œæˆ</p><h3 id="ä¿®æ”¹é»˜è®¤å€¼"><a href="#ä¿®æ”¹é»˜è®¤å€¼" class="headerlink" title="ä¿®æ”¹é»˜è®¤å€¼"></a>ä¿®æ”¹é»˜è®¤å€¼</h3><p><a href="https://juejin.cn/post/7480450288421109787">Tailwind CSS v4 ç§»é™¤ tailwindcss.config.js åå¦‚ä½•é…ç½®å¹¶è¿›è¡Œä¸»é¢˜åˆ‡æ¢åœ¨ Tailw - æ˜é‡‘</a></p><p><a href="https://tailwindcss.com/docs/theme#theme-variable-namespaces">Theme variables - Core concepts - Tailwind CSS</a></p><p>åœ¨v3ä¸­æˆ‘ä»¬æ˜¯è¿™æ ·å­ä¿®æ”¹é»˜è®¤å€¼çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250402000215014.png" alt="image-20250402000215014"></p><p>åœ¨v4ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨<code>css</code>æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@theme</span> &#123;</span><br><span class="line">    <span class="attr">--padding-1</span>: <span class="string">&#x27;30px&#x27;</span>;</span><br><span class="line">    <span class="attr">--fontSize-base</span>: [<span class="string">&#x27;30px&#x27;</span>, <span class="string">&#x27;2rem&#x27;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="v3å®‰è£…"><a href="#v3å®‰è£…" class="headerlink" title="v3å®‰è£…"></a>v3å®‰è£…</h2><h3 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…-1"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£…-1" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£…"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£…</h3><p>æˆ‘ä»¬é€šè¿‡ crerate-react-app åˆ›å»ºä¸€ä¸ª react é¡¹ç›®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app tailwind-test</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥ tailwind-test ç›®å½•ï¼Œæ‰§è¡Œ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -D tailwindcss@3</span><br><span class="line"></span><br><span class="line">npx tailwindcss init</span><br></pre></td></tr></table></figure><h4 id="æŠ¥é”™å¤„ç†"><a href="#æŠ¥é”™å¤„ç†" class="headerlink" title="æŠ¥é”™å¤„ç†"></a>æŠ¥é”™å¤„ç†</h4><p>å¦‚æœå®‰è£…æŠ¥é”™ï¼Œå°†<code>package.json</code>æ”¹ä¸ºä¸‹é¢çš„é…ç½®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;tailwind-test&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.1.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@testing-library/jest-dom&quot;</span>: <span class="string">&quot;^5.16.5&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@testing-library/react&quot;</span>: <span class="string">&quot;^13.4.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@testing-library/user-event&quot;</span>: <span class="string">&quot;^13.5.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react&quot;</span>: <span class="string">&quot;^18.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react-dom&quot;</span>: <span class="string">&quot;^18.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react-scripts&quot;</span>: <span class="string">&quot;5.0.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;web-vitals&quot;</span>: <span class="string">&quot;^2.1.4&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;react-scripts start&quot;</span>,</span><br><span class="line">    <span class="string">&quot;build&quot;</span>: <span class="string">&quot;react-scripts build&quot;</span>,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;react-scripts test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;eslintConfig&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;react-app&quot;</span>,</span><br><span class="line">      <span class="string">&quot;react-app/jest&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;browserslist&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;production&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;&gt;0.2%&quot;</span>,</span><br><span class="line">      <span class="string">&quot;not dead&quot;</span>,</span><br><span class="line">      <span class="string">&quot;not op_mini all&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;development&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;last 1 chrome version&quot;</span>,</span><br><span class="line">      <span class="string">&quot;last 1 firefox version&quot;</span>,</span><br><span class="line">      <span class="string">&quot;last 1 safari version&quot;</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;tailwindcss&quot;</span>: <span class="string">&quot;^3.3.2&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æœ‰æ—¶å€™æŠ¥é”™æ˜¯å› ä¸º<code>main.js</code>å½“ä¸­çš„å¼•ç”¨äº†<code>./index.css</code>ï¼Œæ³¨é‡Šæ‰å°±å¥½äº†</strong></p><h3 id="ç¬¬äºŒæ­¥ï¼šé…ç½®-1"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®-1" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½®"></a>ç¬¬äºŒæ­¥ï¼šé…ç½®</h3><p>å®‰è£… tailwindcss ä¾èµ–ï¼Œåˆ›å»º tailwindcss é…ç½®æ–‡ä»¶ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/f7930ae6846d438ebd7d83586fceaac4tplv-k3u1fbpfcp-watermark.png"></p><p>tailwind å®é™…ä¸Šæ˜¯ä¸€ä¸ª postcss æ’ä»¶ï¼Œå› ä¸º cra å†…éƒ¨å·²ç»åšäº† postcss é›†æˆ tailwind æ’ä»¶çš„é…ç½®ï¼Œè¿™ä¸€æ­¥å°±ä¸ç”¨åšäº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/bc7f7d94bf4e419dabb2cf60446f78c0tplv-k3u1fbpfcp-watermark.png"></p><h3 id="ç¬¬ä¸‰éƒ¨ï¼šå¼•ç”¨"><a href="#ç¬¬ä¸‰éƒ¨ï¼šå¼•ç”¨" class="headerlink" title="ç¬¬ä¸‰éƒ¨ï¼šå¼•ç”¨"></a>ç¬¬ä¸‰éƒ¨ï¼šå¼•ç”¨</h3><p>ç„¶ååœ¨å…¥å£ css é‡ŒåŠ ä¸Šè¿™ä¸‰è¡Œä»£ç ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/dd6778fe2dc74822b3735b6c83b55777tplv-k3u1fbpfcp-watermark.png"></p><p>è¿™ä¸‰è¡Œåˆ†åˆ«æ˜¯å¼•å…¥ tailwind çš„åŸºç¡€æ ·å¼ã€ç»„ä»¶æ ·å¼ã€å·¥å…·æ ·å¼çš„ã€‚</p><p>ä¹‹åå°±å¯ä»¥åœ¨ç»„ä»¶é‡Œç”¨ tailwind æä¾›çš„ class äº†</p><h3 id="ä¿®æ”¹é»˜è®¤å€¼-1"><a href="#ä¿®æ”¹é»˜è®¤å€¼-1" class="headerlink" title="ä¿®æ”¹é»˜è®¤å€¼"></a>ä¿®æ”¹é»˜è®¤å€¼</h3><p> p-1 æ˜¯ padding:0.25rem</p><p>ä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶é‡Œä¿®æ”¹tailwindçš„é»˜è®¤å€¼ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/966b4d4f72aa41bcbd111f752d82f1a3tplv-k3u1fbpfcp-watermark.png"></p><p>.text-base æ˜¯ font-sizeã€line-height ä¸¤ä¸ªæ ·å¼ï¼Œè¿™ç§é€šè¿‡æ•°ç»„é…ç½®ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/055a97a29ade4afab612340ada86a4c6tplv-k3u1fbpfcp-watermark.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/0a7fa0353bb24d23a1c3d82c501d338etplv-k3u1fbpfcp-watermark.png"></p><h2 id="ä½¿ç”¨-3"><a href="#ä½¿ç”¨-3" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="ä¾‹å­ä¸€"><a href="#ä¾‹å­ä¸€" class="headerlink" title="ä¾‹å­ä¸€"></a>ä¾‹å­ä¸€</h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329223609716.png" alt="image-20250329223609716"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;bg-gray-900 w-full p-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* èƒŒæ™¯ä¸ºæ·±ç°è‰²ï¼Œå®½åº¦å æ»¡çˆ¶å®¹å™¨ï¼Œå†…è¾¹è·ä¸º16px */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex justify-between&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå·¦å³ä¸¤ç«¯å¯¹é½ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;text-white&quot;</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ–‡æœ¬é¢œè‰²ä¸ºç™½è‰² */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;text-blue-400 font-semibold&quot;</span>&gt;</span>Drafts<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æµ…è“è‰²å­—ä½“ï¼Œå­—ä½“åŠ ç²— */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex gap-4 py-8 h-48&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ é—´è·16pxï¼Œä¸Šä¸‹(yè½´)å†…è¾¹è·32pxï¼Œé«˜åº¦192px */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;w-16 h-16 aspect-square bg-blue-400 rounded-full&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ­£æ–¹å½¢ï¼ˆå®½é«˜64pxï¼‰ï¼Œæµ…è“è‰²èƒŒæ™¯ï¼Œå®Œå…¨åœ†è§’ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">textarea</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&quot;w-full mt-4 bg-transparent text-white text-2xl focus:outline-none&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">placeholder</span>=<span class="string">&quot;What is happening?!&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* å®½åº¦100%ï¼Œé¡¶éƒ¨å¤–è¾¹è·16pxï¼Œé€æ˜èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œå¤§å­—ä½“ï¼Œç§»é™¤èšç„¦é«˜äº® */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;font-bold text-blue-400&quot;</span>&gt;</span>Everyone can reply<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* åŠ ç²—å­—ä½“ï¼Œæµ…è“è‰²æ–‡å­— */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">hr</span> <span class="attr">className</span>=<span class="string">&quot;border-gray-500 my-4&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* ç°è‰²è¾¹æ¡†çš„æ°´å¹³çº¿ï¼Œä¸Šä¸‹å¤–è¾¹è·16px */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&quot;flex items-center justify-between&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ å‚ç›´å±…ä¸­ï¼Œä¸¤ç«¯å¯¹é½ */&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex gap-4 text-blue-400&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;/* ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ æ°´å¹³é—´è·16pxï¼Œæµ…è“è‰²æ–‡å­— */&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Image<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>GIF<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Poll<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Emoji<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>Location<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;text-white bg-blue-400 px-4 py-2 rounded-full font-bold&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Post</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ç™½è‰²æ–‡å­—ï¼Œæµ…è“è‰²èƒŒæ™¯ï¼Œæ°´å¹³å†…è¾¹è·16pxï¼Œå‚ç›´å†…è¾¹è·8pxï¼Œå®Œå…¨åœ†è§’ï¼Œå­—ä½“åŠ ç²— */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­äºŒ"><a href="#ä¾‹å­äºŒ" class="headerlink" title="ä¾‹å­äºŒ"></a>ä¾‹å­äºŒ</h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/image-20250329223547315.png" alt="image-20250329223547315"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">className</span>=<span class="string">&quot;bg-gray-900 w-full p-4&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* èƒŒæ™¯ä¸ºæ·±ç°è‰²ï¼Œå®½åº¦å æ»¡çˆ¶å®¹å™¨ï¼Œå†…è¾¹è·16px */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;flex flex-col md:flex-row justify-between items-center gap-4 p-6 bg-gray-800 rounded-lg shadow-lg&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* å“åº”å¼Flexboxå¸ƒå±€ï¼šå°å±å¹•å‚ç›´æ’åˆ—ï¼Œå¤§å±å¹•æ°´å¹³æ’åˆ— */&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;/* ä¸¤ç«¯å¯¹é½ï¼Œå±…ä¸­å¯¹é½ï¼Œé—´è·24pxï¼ŒèƒŒæ™¯ç°è‰²ï¼Œåœ†è§’ï¼Œæ·»åŠ é˜´å½± */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;text-white text-lg font-bold&quot;</span>&gt;</span>Tailwind Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* æ–‡å­—ç™½è‰²ï¼Œå¤§å·å­—ä½“ï¼ŒåŠ ç²— */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;text-white bg-blue-500 px-6 py-2 rounded-full font-semibold transition duration-300 ease-in-out transform hover:scale-105 focus:ring focus:ring-blue-300&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Click Me</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ç™½è‰²æ–‡å­—ï¼Œè“è‰²èƒŒæ™¯ï¼Œåœ†è§’ï¼Œè¿‡æ¸¡åŠ¨ç”»ï¼Œæ‚¬åœæ—¶æ”¾å¤§ï¼Œèšç„¦æ—¶æœ‰è“è‰²å…‰æ™• */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;grid grid-cols-1 md:grid-cols-3 gap-4 mt-6&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ç½‘æ ¼å¸ƒå±€ï¼šå°å±å¹•å•åˆ—ï¼Œå¤§å±å¹•ä¸‰åˆ—ï¼Œé—´è·16pxï¼Œé¡¶éƒ¨å¤–è¾¹è·24px */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bg-green-400 text-white p-6 rounded-lg shadow-md text-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Box 1</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* ç»¿è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œå†…è¾¹è·24pxï¼Œåœ†è§’ï¼Œé˜´å½±ï¼Œæ–‡æœ¬å±…ä¸­ */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bg-yellow-400 text-gray-900 p-6 rounded-lg shadow-md text-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Box 2</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* é»„è‰²èƒŒæ™¯ï¼Œæ·±ç°æ–‡å­—ï¼Œå†…è¾¹è·24pxï¼Œåœ†è§’ï¼Œé˜´å½±ï¼Œæ–‡æœ¬å±…ä¸­ */&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;bg-red-400 text-white p-6 rounded-lg shadow-md text-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Box 3</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;/* çº¢è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œå†…è¾¹è·24pxï¼Œåœ†è§’ï¼Œé˜´å½±ï¼Œæ–‡æœ¬å±…ä¸­ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;mt-6 text-center text-gray-400 dark:text-gray-300&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        Responsive &amp; Dark Mode Supported</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;/* é¡¶éƒ¨å¤–è¾¹è·24pxï¼Œæ–‡æœ¬å±…ä¸­ï¼Œé»˜è®¤æµ…ç°è‰²ï¼Œåœ¨æ·±è‰²æ¨¡å¼ä¸‹å˜ä¸ºç¨äº®çš„ç°è‰² */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><p><a href="https://www.tailwindcss.cn/docs/border-width">Border Width - TailwindCSSä¸­æ–‡æ–‡æ¡£ | TailwindCSSä¸­æ–‡ç½‘</a></p><h3 id="ğŸ“Œ-åŸºæœ¬ç”¨æ³•åˆ—è¡¨"><a href="#ğŸ“Œ-åŸºæœ¬ç”¨æ³•åˆ—è¡¨" class="headerlink" title="ğŸ“Œ åŸºæœ¬ç”¨æ³•åˆ—è¡¨"></a><strong>ğŸ“Œ åŸºæœ¬ç”¨æ³•åˆ—è¡¨</strong></h3><ol><li><strong>å®ç”¨ç±»ï¼ˆUtility Classesï¼‰</strong></li><li><strong>å¸ƒå±€ï¼ˆFlex&#x2F;Gridï¼‰</strong></li><li><strong>é—´è·ï¼ˆMargin&#x2F;Paddingï¼‰</strong></li><li><strong>å°ºå¯¸ï¼ˆWidth&#x2F;Heightï¼‰</strong></li><li><strong>æ–‡æœ¬æ ·å¼ï¼ˆTypographyï¼‰</strong></li><li><strong>èƒŒæ™¯ï¼ˆBackgroundï¼‰</strong></li><li><strong>è¾¹æ¡†ï¼ˆBorders &amp; Radiusï¼‰</strong></li><li><strong>ä¼ªç±»ï¼ˆHoverã€Focus ç­‰ï¼‰</strong></li><li><strong>çŠ¶æ€å˜ä½“ï¼ˆDark Modeã€Active ç­‰ï¼‰</strong></li><li><strong>åŠ¨ç”»ï¼ˆTransitions &amp; Animationsï¼‰</strong></li><li><strong>å“åº”å¼è®¾è®¡ï¼ˆResponsive Designï¼‰</strong></li><li><strong>å¤ç”¨æ ·å¼ï¼ˆ@apply &amp; è‡ªå®šä¹‰ä¸»é¢˜ï¼‰</strong></li></ol><hr><h3 id="2ï¸âƒ£-å®ç”¨ç±»ï¼ˆUtility-Classesï¼‰"><a href="#2ï¸âƒ£-å®ç”¨ç±»ï¼ˆUtility-Classesï¼‰" class="headerlink" title="2ï¸âƒ£ å®ç”¨ç±»ï¼ˆUtility Classesï¼‰"></a><strong>2ï¸âƒ£ å®ç”¨ç±»ï¼ˆUtility Classesï¼‰</strong></h3><p>Tailwind æä¾›äº†å¤§é‡çš„ç±»æ¥å¿«é€Ÿå¼€å‘ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-center text-lg font-bold text-blue-500&quot;</span>&gt;</span></span><br><span class="line">  Hello Tailwind!</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>text-center</code> â†’ æ–‡æœ¬å±…ä¸­</li><li><code>text-lg</code> â†’ å­—ä½“å¤§å° <code>lg</code></li><li><code>font-bold</code> â†’ åŠ ç²—</li><li><code>text-blue-500</code> â†’ é¢œè‰² <code>blue-500</code></li></ul><hr><h3 id="3ï¸âƒ£-å¸ƒå±€ï¼ˆFlex-Gridï¼‰"><a href="#3ï¸âƒ£-å¸ƒå±€ï¼ˆFlex-Gridï¼‰" class="headerlink" title="3ï¸âƒ£ å¸ƒå±€ï¼ˆFlex&#x2F;Gridï¼‰"></a><strong>3ï¸âƒ£ å¸ƒå±€ï¼ˆFlex&#x2F;Gridï¼‰</strong></h3><h4 id="âœ…-ä½¿ç”¨-Flexbox"><a href="#âœ…-ä½¿ç”¨-Flexbox" class="headerlink" title="âœ… ä½¿ç”¨ Flexbox"></a><strong>âœ… ä½¿ç”¨ Flexbox</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center justify-center h-screen&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å±…ä¸­å¯¹é½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>flex</code> â†’ å¯ç”¨ <code>display: flex</code></li><li><code>items-center</code> â†’ å‚ç›´å±…ä¸­ (<code>align-items: center</code>)</li><li><code>justify-center</code> â†’ æ°´å¹³å±…ä¸­ (<code>justify-content: center</code>)</li><li><code>h-screen</code> â†’ é«˜åº¦ <code>100vh</code></li></ul><h4 id="âœ…-ä½¿ç”¨-Grid"><a href="#âœ…-ä½¿ç”¨-Grid" class="headerlink" title="âœ… ä½¿ç”¨ Grid"></a><strong>âœ… ä½¿ç”¨ Grid</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grid grid-cols-3 gap-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-red-300&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-green-300&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-blue-300&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>grid</code> â†’ å¯ç”¨ <code>display: grid</code></li><li><code>grid-cols-3</code> â†’ ä¸‰åˆ—</li><li><code>gap-4</code> â†’ é—´è· <code>1rem</code></li></ul><hr><h3 id="4ï¸âƒ£-é—´è·ï¼ˆMargin-Paddingï¼‰"><a href="#4ï¸âƒ£-é—´è·ï¼ˆMargin-Paddingï¼‰" class="headerlink" title="4ï¸âƒ£ é—´è·ï¼ˆMargin&#x2F;Paddingï¼‰"></a><strong>4ï¸âƒ£ é—´è·ï¼ˆMargin&#x2F;Paddingï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;m-4 p-6&quot;</span>&gt;</span></span><br><span class="line">  Margin 4, Padding 6</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>m-4</code> â†’ å¤–è¾¹è· <code>1rem</code></li><li><code>p-6</code> â†’ å†…è¾¹è· <code>1.5rem</code></li></ul><p><strong>æ›´ç²¾ç»†çš„æ§åˆ¶</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;mt-2 mb-4 ml-6 mr-8&quot;</span>&gt;</span></span><br><span class="line">  å››ä¸ªæ–¹å‘çš„ Margin</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>mt-2</code> â†’ é¡¶éƒ¨ <code>margin</code> <code>0.5rem</code></li><li><code>mb-4</code> â†’ åº•éƒ¨ <code>margin</code> <code>1rem</code></li><li><code>ml-6</code> â†’ å·¦ä¾§ <code>margin</code> <code>1.5rem</code></li><li><code>mr-8</code> â†’ å³ä¾§ <code>margin</code> <code>2rem</code></li></ul><hr><h3 id="5ï¸âƒ£-å°ºå¯¸ï¼ˆWidth-Heightï¼‰"><a href="#5ï¸âƒ£-å°ºå¯¸ï¼ˆWidth-Heightï¼‰" class="headerlink" title="5ï¸âƒ£ å°ºå¯¸ï¼ˆWidth&#x2F;Heightï¼‰"></a><strong>5ï¸âƒ£ å°ºå¯¸ï¼ˆWidth&#x2F;Heightï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-32 h-16 bg-gray-300&quot;</span>&gt;</span></span><br><span class="line">  å®½ 8rem, é«˜ 4rem</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>w-32</code> â†’ å®½åº¦ <code>8rem</code></li><li><code>h-16</code> â†’ é«˜åº¦ <code>4rem</code></li></ul><hr><h3 id="6ï¸âƒ£-æ–‡æœ¬æ ·å¼ï¼ˆTypographyï¼‰"><a href="#6ï¸âƒ£-æ–‡æœ¬æ ·å¼ï¼ˆTypographyï¼‰" class="headerlink" title="6ï¸âƒ£ æ–‡æœ¬æ ·å¼ï¼ˆTypographyï¼‰"></a><strong>6ï¸âƒ£ æ–‡æœ¬æ ·å¼ï¼ˆTypographyï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-xl font-semibold italic underline&quot;</span>&gt;</span></span><br><span class="line">  å¤§å·åŠ ç²—æ–œä½“å¸¦ä¸‹åˆ’çº¿</span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>text-xl</code> â†’ å­—ä½“å¤§å° <code>1.25rem</code></li><li><code>font-semibold</code> â†’ åŠç²—</li><li><code>italic</code> â†’ æ–œä½“</li><li><code>underline</code> â†’ ä¸‹åˆ’çº¿</li></ul><hr><h3 id="7ï¸âƒ£-èƒŒæ™¯ï¼ˆBackgroundï¼‰"><a href="#7ï¸âƒ£-èƒŒæ™¯ï¼ˆBackgroundï¼‰" class="headerlink" title="7ï¸âƒ£ èƒŒæ™¯ï¼ˆBackgroundï¼‰"></a><strong>7ï¸âƒ£ èƒŒæ™¯ï¼ˆBackgroundï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;bg-gradient-to-r from-blue-400 to-purple-600&quot;</span>&gt;</span></span><br><span class="line">  æ¸å˜èƒŒæ™¯</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>bg-gradient-to-r</code> â†’ çº¿æ€§æ¸å˜</li><li><code>from-blue-400</code> â†’ èµ·ç‚¹é¢œè‰² <code>blue-400</code></li><li><code>to-purple-600</code> â†’ ç»ˆç‚¹é¢œè‰² <code>purple-600</code></li></ul><hr><h3 id="8ï¸âƒ£-è¾¹æ¡†ï¼ˆBorders-Radiusï¼‰"><a href="#8ï¸âƒ£-è¾¹æ¡†ï¼ˆBorders-Radiusï¼‰" class="headerlink" title="8ï¸âƒ£ è¾¹æ¡†ï¼ˆBorders &amp; Radiusï¼‰"></a><strong>8ï¸âƒ£ è¾¹æ¡†ï¼ˆBorders &amp; Radiusï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;border border-red-500 rounded-lg p-4&quot;</span>&gt;</span></span><br><span class="line">  åœ†è§’ + è¾¹æ¡†</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>border</code> â†’ é»˜è®¤ 1px è¾¹æ¡†</li><li><code>border-red-500</code> â†’ çº¢è‰²è¾¹æ¡†</li><li><code>rounded-lg</code> â†’ åœ†è§’ <code>0.5rem</code></li><li><code>p-4</code> â†’ å†…è¾¹è· <code>1rem</code></li></ul><hr><h3 id="9ï¸âƒ£-ä¼ªç±»ï¼ˆHoverã€Focus-ç­‰ï¼‰"><a href="#9ï¸âƒ£-ä¼ªç±»ï¼ˆHoverã€Focus-ç­‰ï¼‰" class="headerlink" title="9ï¸âƒ£ ä¼ªç±»ï¼ˆHoverã€Focus ç­‰ï¼‰"></a><strong>9ï¸âƒ£ ä¼ªç±»ï¼ˆHoverã€Focus ç­‰ï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded&quot;</span>&gt;</span></span><br><span class="line">  Hover æˆ‘</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>hover:bg-blue-700</code> â†’ æ‚¬åœæ—¶å˜æ·±è‰²</li><li><code>text-white</code> â†’ ç™½è‰²æ–‡æœ¬</li><li><code>py-2 px-4</code> â†’ é€‚å½“çš„å†…è¾¹è·</li></ul><hr><h3 id="ğŸ”Ÿ-çŠ¶æ€å˜ä½“ï¼ˆDark-Modeã€Activeï¼‰"><a href="#ğŸ”Ÿ-çŠ¶æ€å˜ä½“ï¼ˆDark-Modeã€Activeï¼‰" class="headerlink" title="ğŸ”Ÿ çŠ¶æ€å˜ä½“ï¼ˆDark Modeã€Activeï¼‰"></a><strong>ğŸ”Ÿ çŠ¶æ€å˜ä½“ï¼ˆDark Modeã€Activeï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dark:bg-gray-800 dark:text-white&quot;</span>&gt;</span></span><br><span class="line">  Dark Mode ä¸‹ç”Ÿæ•ˆ</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>dark:bg-gray-800</code> â†’ æ·±è‰²æ¨¡å¼èƒŒæ™¯ <code>gray-800</code></li><li><code>dark:text-white</code> â†’ æ·±è‰²æ¨¡å¼æ–‡æœ¬ç™½è‰²</li></ul><hr><h3 id="1ï¸âƒ£1ï¸âƒ£-åŠ¨ç”»ï¼ˆTransitions-Animationsï¼‰"><a href="#1ï¸âƒ£1ï¸âƒ£-åŠ¨ç”»ï¼ˆTransitions-Animationsï¼‰" class="headerlink" title="1ï¸âƒ£1ï¸âƒ£ åŠ¨ç”»ï¼ˆTransitions &amp; Animationsï¼‰"></a><strong>1ï¸âƒ£1ï¸âƒ£ åŠ¨ç”»ï¼ˆTransitions &amp; Animationsï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;transition duration-300 ease-in-out transform hover:scale-110&quot;</span>&gt;</span></span><br><span class="line">  æ‚¬åœæ”¾å¤§</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>transition</code> â†’ è¿‡æ¸¡åŠ¨ç”»</li><li><code>duration-300</code> â†’ 300ms è¿‡æ¸¡</li><li><code>ease-in-out</code> â†’ ç¼“åŠ¨å‡½æ•°</li><li><code>transform hover:scale-110</code> â†’ æ‚¬åœæ—¶æ”¾å¤§ <code>1.1</code> å€</li></ul><hr><h3 id="1ï¸âƒ£2ï¸âƒ£-å“åº”å¼è®¾è®¡ï¼ˆResponsive-Designï¼‰"><a href="#1ï¸âƒ£2ï¸âƒ£-å“åº”å¼è®¾è®¡ï¼ˆResponsive-Designï¼‰" class="headerlink" title="1ï¸âƒ£2ï¸âƒ£ å“åº”å¼è®¾è®¡ï¼ˆResponsive Designï¼‰"></a><strong>1ï¸âƒ£2ï¸âƒ£ å“åº”å¼è®¾è®¡ï¼ˆResponsive Designï¼‰</strong></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl&quot;</span>&gt;</span></span><br><span class="line">  æ ¹æ®å±å¹•å¤§å°è°ƒæ•´å­—ä½“å¤§å°</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><code>sm:text-lg</code> â†’ å°å±å¹•æ—¶ <code>lg</code> å¤§å°</li><li><code>md:text-xl</code> â†’ ä¸­ç­‰å±å¹•æ—¶ <code>xl</code> å¤§å°</li><li><code>lg:text-2xl</code> â†’ å¤§å±å¹•æ—¶ <code>2xl</code> å¤§å°</li><li><code>xl:text-3xl</code> â†’ è¶…å¤§å±å¹•æ—¶ <code>3xl</code> å¤§å°</li></ul><hr><h3 id="1ï¸âƒ£3ï¸âƒ£-å¤ç”¨æ ·å¼ï¼ˆ-apply-è‡ªå®šä¹‰ä¸»é¢˜ï¼‰"><a href="#1ï¸âƒ£3ï¸âƒ£-å¤ç”¨æ ·å¼ï¼ˆ-apply-è‡ªå®šä¹‰ä¸»é¢˜ï¼‰" class="headerlink" title="1ï¸âƒ£3ï¸âƒ£ å¤ç”¨æ ·å¼ï¼ˆ@apply &amp; è‡ªå®šä¹‰ä¸»é¢˜ï¼‰"></a><strong>1ï¸âƒ£3ï¸âƒ£ å¤ç”¨æ ·å¼ï¼ˆ@apply &amp; è‡ªå®šä¹‰ä¸»é¢˜ï¼‰</strong></h3><p>åœ¨ <code>globals.css</code> ä¸­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@tailwind</span> base;</span><br><span class="line"><span class="keyword">@tailwind</span> components;</span><br><span class="line"><span class="keyword">@tailwind</span> utilities;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@layer</span> components &#123;</span><br><span class="line">  <span class="selector-class">.btn</span> &#123;</span><br><span class="line">    <span class="keyword">@apply</span> bg-blue-<span class="number">500</span> text-white py-<span class="number">2</span> px-<span class="number">4</span> rounded <span class="attribute">hover</span>:bg-blue-<span class="number">700</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶å HTML ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>æŒ‰é’®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><hr><h2 id="ğŸ¯-ç»“è®º"><a href="#ğŸ¯-ç»“è®º" class="headerlink" title="ğŸ¯ ç»“è®º"></a><strong>ğŸ¯ ç»“è®º</strong></h2><ul><li><strong>Tailwind &#x3D; CSS å˜é‡ + å·¥å…·ç±»</strong></li><li><strong>é«˜æ•ˆå¼€å‘ï¼Œé¿å…æ‰‹å†™ CSS</strong></li><li><strong>æ¨èæ­é… <code>@apply</code> è‡ªå®šä¹‰ç»„ä»¶</strong></li><li><strong>é€‚ç”¨äºå“åº”å¼è®¾è®¡ã€ä¸»é¢˜å®šåˆ¶ã€åŠ¨ç”»ç­‰</strong></li></ul><p>ğŸš€ <strong>å¿«å»è¯•è¯• Tailwind CSSï¼Œè®©ä½ çš„å¼€å‘é€Ÿåº¦èµ·é£å§ï¼</strong> ğŸ¨âœ¨</p><h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="å‘½åå†²çª-v3"><a href="#å‘½åå†²çª-v3" class="headerlink" title="å‘½åå†²çª(v3)"></a>å‘½åå†²çª(v3)</h3><p>æˆ‘æœ¬æ¥æœ‰ä¸ª border çš„ classï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/8849532b5b8d46c399fb8ce31f7a750ctplv-k3u1fbpfcp-watermark.png"></p><p>è€Œ tailwind ä¹Ÿæœ‰ï¼Œä¸å°±å†²çªäº†ä¹ˆï¼Ÿ</p><p>è¿™ä¸ªå¯ä»¥é€šè¿‡åŠ  prefix è§£å†³ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/391a3bb491324a31a3fad76abcc560e4tplv-k3u1fbpfcp-watermark.png"></p><p>ä¸è¿‡è¿™æ ·æ‰€æœ‰çš„åŸå­ class éƒ½å¾—åŠ  prefix äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/468ff84a39fd477980b1a46c1ae9ff0etplv-k3u1fbpfcp-watermark.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/7a0a1ce212ce4a169fd50056a3ac326atplv-k3u1fbpfcp-watermark.png"></p><h3 id="ç±»å‹å¤ªé•¿äº†å¦‚ä½•å¤„ç†"><a href="#ç±»å‹å¤ªé•¿äº†å¦‚ä½•å¤„ç†" class="headerlink" title="ç±»å‹å¤ªé•¿äº†å¦‚ä½•å¤„ç†"></a>ç±»å‹å¤ªé•¿äº†å¦‚ä½•å¤„ç†</h3><p><strong>ç±»å‹å¤ªé•¿äº†è€Œä¸”é‡å¤å¤šæ¬¡</strong></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/11687714e4044a67ad4e67c84d33aceftplv-k3u1fbpfcp-watermark.png"></p><p>è¿™ç§é—®é¢˜å¯ä»¥ç”¨ @layer @apply æŒ‡ä»¤æ¥æ‰©å±•ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/010f4acf2c7e48f09d62260a67905965tplv-k3u1fbpfcp-watermark.png"></p><p>å‰é¢è®²è¿‡ @tailwind æ˜¯å¼•å…¥ä¸åŒçš„æ ·å¼çš„ï¼Œè€Œ @layer å°±æ˜¯åœ¨æŸä¸€å±‚æ ·å¼åšä¿®æ”¹å’Œæ‰©å……ï¼Œé‡Œé¢å¯ä»¥ç”¨ @apply åº”ç”¨å…¶ä»–æ ·å¼ã€‚</p><p>æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/2956afd271aa4c49912fc3e8d1a85a2btplv-k3u1fbpfcp-watermark.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-CSS%E6%96%B9%E6%A1%88/50654d7d033143afba709d6944ab0392tplv-k3u1fbpfcp-watermark.png"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-åŠ¨ç”»åº“</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><ul><li><p><code>react-spring</code></p></li><li><p><code>react-transition-group</code></p><ul><li><code>Transition</code>ã€<code>CSSTransition</code>ã€<code>TransitionGroup</code>ã€<code>SwitchTransition</code></li></ul></li><li><p><code>@use-gesture/react</code></p><blockquote><p>ä¸æ”¯æŒreact19</p></blockquote></li></ul><h1 id="react-spring-web"><a href="#react-spring-web" class="headerlink" title="react-spring&#x2F;web"></a>react-spring&#x2F;web</h1><p><a href="https://react-spring.dev/">å®˜æ–¹æ–‡æ¡£ï¼šreact-spring</a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @react-spring/web</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>react-spring ä¸»æ‰“çš„æ˜¯å¼¹ç°§åŠ¨ç”»ï¼Œå°±æ˜¯ç±»ä¼¼å¼¹ç°§é‚£ç§å›å¼¹æ•ˆæœã€‚</p><p>åªè¦æŒ‡å®š massï¼ˆè´¨é‡ï¼‰ã€tensionï¼ˆå¼ åŠ›ï¼‰ã€frictionï¼ˆæ‘©æ“¦åŠ›ï¼‰å°±å¯ä»¥äº†ã€‚</p><ul><li><p>mass è´¨é‡ï¼šå†³å®šå›å¼¹æƒ¯æ€§ï¼Œmass è¶Šå¤§ï¼Œå›å¼¹çš„è·ç¦»å’Œæ¬¡æ•°è¶Šå¤šã€‚</p></li><li><p>tension å¼ åŠ›ï¼šå¼¹ç°§æ¾ç´§ç¨‹åº¦ï¼Œå¼¹ç°§è¶Šç´§ï¼Œå›å¼¹é€Ÿåº¦è¶Šå¿«ã€‚</p></li><li><p>frictionï¼šæ‘©æ“¦åŠ›ï¼š å¯ä»¥æŠµæ¶ˆè´¨é‡å’Œå¼ åŠ›çš„æ•ˆæœ</p></li></ul><p>react-spring æœ‰ä¸å°‘ apiï¼Œåˆ†åˆ«ç”¨äºå•ä¸ªã€å¤šä¸ªå…ƒç´ çš„åŠ¨ç”»ï¼š</p><ul><li>useSpringValueï¼šæŒ‡å®šå•ä¸ªå±æ€§çš„å˜åŒ–ã€‚</li><li>useSpringï¼šæŒ‡å®šå¤šä¸ªå±æ€§çš„å˜åŒ–</li><li>useSpringsï¼šæŒ‡å®šå¤šä¸ªå…ƒç´ çš„å¤šä¸ªå±æ€§çš„å˜åŒ–ï¼ŒåŠ¨ç”»å¹¶è¡Œæ‰§è¡Œ</li><li>useTrialï¼šæŒ‡å®šå¤šä¸ªå…ƒç´ çš„å¤šä¸ªå±æ€§çš„å˜åŒ–ï¼ŒåŠ¨ç”»ä¾æ¬¡æ‰§è¡Œ</li><li>useSpringRefï¼šç”¨æ¥æ‹¿åˆ°æ¯ä¸ªåŠ¨ç”»çš„ refï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶åŠ¨ç”»çš„å¼€å§‹ã€æš‚åœç­‰</li><li>useChainï¼šä¸²è¡Œæ‰§è¡Œå¤šä¸ªåŠ¨ç”»ï¼Œæ¯ä¸ªåŠ¨ç”»å¯ä»¥æŒ‡å®šä¸åŒçš„å¼€å§‹æ—¶é—´</li></ul><h3 id="useSpringValue-å•åŠ¨ç”»"><a href="#useSpringValue-å•åŠ¨ç”»" class="headerlink" title="useSpringValue(å•åŠ¨ç”»)"></a>useSpringValue(å•åŠ¨ç”»)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> springValue = <span class="title function_">useSpringValue</span>(targetValue, config);</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°ï¼š</strong></p><ul><li><p><code>targetValue</code>ï¼ˆå¿…å¡«ï¼‰ï¼šç›®æ ‡å€¼ï¼Œå¯ä»¥æ˜¯ <code>number | string | object</code></p></li><li><p><code>config</code>ï¼ˆå¯é€‰ï¼‰ï¼šåŠ¨ç”»é…ç½®å¯¹è±¡ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; tension: 170, friction: 26 &#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>è¿”å›å€¼ï¼š</strong></p><ul><li>ä¸€ä¸ª spring å€¼ï¼ˆå¯ç”¨äºç»‘å®šåˆ°ç»„ä»¶æ ·å¼ï¼‰</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSpringValue, animated, useSpring &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> width = <span class="title function_">useSpringValue</span>(<span class="number">0</span>, &#123;</span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    width.<span class="title function_">start</span>(<span class="number">300</span>);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">className</span>=<span class="string">&quot;box&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width</span> &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//css</span></span><br><span class="line">.<span class="property">box</span> &#123;</span><br><span class="line">  <span class="attr">background</span>: blue;</span><br><span class="line">  <span class="attr">height</span>: 100px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œbox ä¼šåœ¨ 2s å†…å®Œæˆ width ä» 0 åˆ° 300 çš„åŠ¨ç”»ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/b1a18049e5a248ef994efd90eb611a81tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥ä¸å®šä¹‰ durationï¼Œè€Œæ˜¯å®šä¹‰æ‘©æ“¦åŠ›ç­‰å‚æ•°ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/e70d41fef0b34dfc9f80461298f3f5fbtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> width = <span class="title function_">useSpringValue</span>(<span class="number">0</span>, &#123;</span><br><span class="line">    <span class="attr">config</span>: &#123;</span><br><span class="line">      <span class="comment">// duration: 2000</span></span><br><span class="line">      <span class="attr">mass</span>: <span class="number">2</span>,</span><br><span class="line">      <span class="attr">friction</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">tension</span>: <span class="number">200</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><p>mass è´¨é‡ï¼šå†³å®šå›å¼¹æƒ¯æ€§ï¼Œmass è¶Šå¤§ï¼Œå›å¼¹çš„è·ç¦»å’Œæ¬¡æ•°è¶Šå¤šã€‚</p></li><li><p>tension å¼ åŠ›ï¼šå¼¹ç°§æ¾ç´§ç¨‹åº¦ï¼Œå¼¹ç°§è¶Šç´§ï¼Œå›å¼¹é€Ÿåº¦è¶Šå¿«ã€‚</p></li><li><p>frictionï¼šæ‘©æ“¦åŠ›ï¼š å¯ä»¥æŠµæ¶ˆè´¨é‡å’Œå¼ åŠ›çš„æ•ˆæœ</p></li></ul><p>æ•ˆæœï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/4a9188e81d8f4302868be2e979a17dd2tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h3 id="useSpring-å•åŠ¨ç”»å¤šå±æ€§"><a href="#useSpring-å•åŠ¨ç”»å¤šå±æ€§" class="headerlink" title="useSpring(å•åŠ¨ç”»å¤šå±æ€§)"></a>useSpring(å•åŠ¨ç”»å¤šå±æ€§)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> styles = <span class="title function_">useSpring</span>(&#123;</span><br><span class="line">  <span class="attr">from</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  <span class="attr">to</span>: &#123; <span class="attr">opacity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  <span class="attr">config</span>: &#123; <span class="attr">tension</span>: <span class="number">120</span>, <span class="attr">friction</span>: <span class="number">14</span> &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°ï¼š</strong></p><ul><li><code>from</code>ï¼ˆå¯é€‰ï¼‰ï¼šåˆå§‹çŠ¶æ€ <code>&#123; key: value &#125;</code></li><li><code>to</code>ï¼ˆå¿…å¡«ï¼‰ï¼šç›®æ ‡çŠ¶æ€ <code>&#123; key: value &#125;</code></li><li><code>config</code>ï¼ˆå¯é€‰ï¼‰ï¼šåŠ¨ç”»é…ç½®</li><li>å…¶ä»–é’©å­å‚æ•°ï¼ˆå¦‚ <code>onRest</code> å›è°ƒï¼‰</li></ul><p><strong>è¿”å›å€¼ï¼š</strong></p><ul><li><code>styles</code> å¯¹è±¡ï¼ŒåŒ…å«å¯ä»¥ç›´æ¥ç»‘å®šåˆ° <code>style</code> çš„åŠ¨ç”»å€¼</li></ul><h3 id="useSprings"><a href="#useSprings" class="headerlink" title="useSprings"></a>useSprings</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [springs, api] = <span class="title function_">useSprings</span>(</span><br><span class="line">    count,</span><br><span class="line">    <span class="function">(<span class="params">index</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">width</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      <span class="attr">to</span>: &#123; <span class="attr">width</span>: <span class="number">300</span> &#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><ul><li><p><strong>å‚æ•°ï¼š</strong></p><ul><li><code>count</code>ï¼ˆå¿…å¡«ï¼‰ï¼šåŠ¨ç”»å¯¹è±¡æ•°é‡</li><li><code>(index) =&gt; object</code>ï¼ˆå¿…å¡«ï¼‰ï¼šè¿”å›ä¸€ä¸ªåŒ…å« <code>from</code>, <code>to</code>, <code>config</code> çš„å¯¹è±¡</li></ul><p><strong>è¿”å›å€¼ï¼š</strong></p><ul><li><code>springs</code> æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª <code>style</code> å¯¹è±¡</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSprings, animated &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [springs, api] = <span class="title function_">useSprings</span>(</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">width</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      <span class="attr">to</span>: &#123; <span class="attr">width</span>: <span class="number">300</span> &#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;springs.map(styles =&gt; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span> <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ))&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//css</span></span><br><span class="line">.<span class="property">box</span> &#123;</span><br><span class="line">  <span class="attr">background</span>: blue;</span><br><span class="line">  <span class="attr">height</span>: 100px;</span><br><span class="line">  <span class="attr">margin</span>: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/6860f4f3b36c454b8770c3fd706c1eb0tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><p>å½“ä½ æŒ‡å®šäº† toï¼Œé‚£ä¼šç«‹åˆ»æ‰§è¡ŒåŠ¨ç”»ï¼Œæˆ–è€…ä¸æŒ‡å®š toï¼Œç”¨ api.start æ¥å¼€å§‹åŠ¨ç”»ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useSprings, animated &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [springs, api] = <span class="title function_">useSprings</span>(</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">width</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    api.<span class="title function_">start</span>(&#123; <span class="attr">width</span>: <span class="number">300</span> &#125;);</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;springs.map(styles =&gt; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span> <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ))&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useTrial"><a href="#useTrial" class="headerlink" title="useTrial"></a>useTrial</h3><p>å¦‚æœå¤šä¸ªå…ƒç´ çš„åŠ¨ç”»æ˜¯ä¾æ¬¡è¿›è¡Œçš„</p><p>è¿™æ—¶å€™è¦ç”¨ useTrail</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; animated, useTrail &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [springs, api] = <span class="title function_">useTrail</span>(</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">width</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    api.<span class="title function_">start</span>(&#123; <span class="attr">width</span>: <span class="number">300</span> &#125;);</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;springs.map(styles =&gt; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;styles&#125;</span> <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ))&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œç›´æ¥æŠŠ useSprings æ¢æˆ useTrail å°±è¡Œï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/30c4b1d52fd34b4192b6afc880fa4550tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h3 id="useSpringRef"><a href="#useSpringRef" class="headerlink" title="useSpringRef"></a>useSpringRef</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> springRef = <span class="title function_">useSpringRef</span>();</span><br><span class="line"><span class="keyword">const</span> styles = <span class="title function_">useSpring</span>(&#123; <span class="attr">opacity</span>: <span class="number">1</span>, <span class="attr">ref</span>: springRef &#125;);</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°ï¼š</strong></p><ul><li>æ— å‚æ•°</li></ul><p><strong>è¿”å›å€¼ï¼š</strong></p><ul><li><code>springRef</code>ï¼Œå¯ç”¨äºæ§åˆ¶åŠ¨ç”»çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå¼€å§‹ã€æš‚åœç­‰ï¼‰</li></ul><h3 id="useChain"><a href="#useChain" class="headerlink" title="useChain"></a>useChain</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useChain</span>([ref1, ref2], [<span class="number">0</span>, <span class="number">0.5</span>]);</span><br></pre></td></tr></table></figure><p><strong>å‚æ•°ï¼š</strong></p><ul><li><code>refs</code>ï¼ˆå¿…å¡«ï¼‰ï¼šä¸€ä¸ªåŒ…å«å¤šä¸ª <code>useSpringRef</code> çš„æ•°ç»„</li><li><code>delays</code>ï¼ˆå¯é€‰ï¼‰ï¼šæ¯ä¸ªåŠ¨ç”»çš„å¯åŠ¨æ—¶é—´ï¼ŒèŒƒå›´ <code>0 ~ 1</code></li></ul><p><strong>è¿”å›å€¼ï¼š</strong></p><ul><li>æ— è¿”å›å€¼ï¼Œç›´æ¥å½±å“åŠ¨ç”»é¡ºåº</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; animated, useChain, useSpring, useSpringRef, useSprings, useTrail &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> api1 = <span class="title function_">useSpringRef</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> [springs] = <span class="title function_">useTrail</span>(</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">ref</span>: api1,</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">width</span>: <span class="number">0</span> &#125;,</span><br><span class="line">      <span class="attr">to</span>: &#123; <span class="attr">width</span>: <span class="number">300</span> &#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> api2 = <span class="title function_">useSpringRef</span>()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">const</span> [springs2] = <span class="title function_">useSprings</span>(</span><br><span class="line">    <span class="number">3</span>,</span><br><span class="line">    <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">ref</span>: api2,</span><br><span class="line">      <span class="attr">from</span>: &#123; <span class="attr">height</span>: <span class="number">100</span> &#125;,</span><br><span class="line">      <span class="attr">to</span>: &#123; <span class="attr">height</span>: <span class="number">50</span>&#125;,</span><br><span class="line">      <span class="attr">config</span>: &#123;</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">1000</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;),</span><br><span class="line">    []</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useChain</span>([api1, api2], [<span class="number">0</span>, <span class="number">1</span>], <span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &#123;springs.map((styles1, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;...styles1,</span> <span class="attr">...springs2</span>[<span class="attr">index</span>]&#125;&#125; <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    ))&#125;</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨ useSpringRef æ‹¿åˆ°ä¸¤ä¸ªåŠ¨ç”»çš„ apiï¼Œç„¶åç”¨ useChain æ¥å®‰æ’ä¸¤ä¸ªåŠ¨ç”»çš„é¡ºåºã€‚</p><p>useChain çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº† 0 å’Œ 1ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šäº† 500ï¼Œé‚£å°±æ˜¯ç¬¬ä¸€ä¸ªåŠ¨ç”»åœ¨ 0s å¼€å§‹ï¼Œç¬¬äºŒä¸ªåŠ¨ç”»åœ¨ 500ms å¼€å§‹ã€‚</p><p>å¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®šäº† 3000ï¼Œé‚£å°±æ˜¯ç¬¬ä¸€ä¸ªåŠ¨ç”»åœ¨ 0s å¼€å§‹ï¼Œç¬¬äºŒä¸ªåŠ¨ç”»åœ¨ 3s å¼€å§‹ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/939415608d594f268455aa87e4742496tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h2 id="è¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨-useTransition"><a href="#è¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨-useTransition" class="headerlink" title="è¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨-useTransition"></a>è¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨-useTransition</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> transitions = <span class="title function_">useTransition</span>(</span><br><span class="line">  items,   <span class="comment">// â‘  éœ€è¦è¿›è¡Œè¿›å‡ºåŠ¨ç”»çš„æ•°ç»„æˆ–å•ä¸ªå€¼</span></span><br><span class="line">  options  <span class="comment">// â‘¡ åŠ¨ç”»é…ç½®å¯¹è±¡</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>1ï¸âƒ£ **<code>items</code>**ï¼ˆå¿…å¡«ï¼‰ï¼š</p><ul><li><strong>æ•°ç»„</strong>ï¼ˆé€‚ç”¨äºåˆ—è¡¨ï¼‰</li><li><strong>å•ä¸ªå€¼</strong>ï¼ˆé€‚ç”¨äºæ¡ä»¶æ¸²æŸ“ï¼‰</li></ul><p>2ï¸âƒ£ **<code>options</code>**ï¼ˆå¿…å¡«ï¼‰ï¼š</p><ul><li><code>from</code>ï¼š<strong>åˆå§‹çŠ¶æ€</strong>ï¼ˆåˆšè¿›å…¥æ—¶çš„æ ·å¼ï¼‰</li><li><code>enter</code>ï¼š<strong>è¿›å…¥åŠ¨ç”»</strong>ï¼ˆç›®æ ‡çŠ¶æ€ï¼‰</li><li><code>leave</code>ï¼š<strong>ç¦»å¼€åŠ¨ç”»</strong>ï¼ˆå…ƒç´ è¢«ç§»é™¤æ—¶çš„æ ·å¼ï¼‰</li><li><code>config</code>ï¼ˆå¯é€‰ï¼‰ï¼šåŠ¨ç”»é…ç½®ï¼ˆå¦‚ <code>tension</code>ã€<code>friction</code>ï¼‰</li><li><code>key</code>ï¼ˆå¯é€‰ï¼‰ï¼šå”¯ä¸€ keyï¼ˆå¦‚æœ <code>items</code> æ˜¯å¯¹è±¡æ•°ç»„ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®š keyï¼‰</li></ul><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/079915eb794b4c9f94c3112842ee1fb7tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><p><strong>ğŸ”¹ è¿”å›å€¼</strong></p><p><code>useTransition</code> è¿”å›ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œå…¶ä¸­æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123; item, key, props &#125;]</span><br></pre></td></tr></table></figure><ul><li><code>item</code>ï¼šå¯¹åº” <code>items</code> é‡Œçš„æ¯ä¸ªå…ƒç´ </li><li><code>key</code>ï¼šå…ƒç´ çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¯æ‰‹åŠ¨æŒ‡å®šï¼‰</li><li><code>props</code>ï¼šåŒ…å«åŠ¨ç”»æ ·å¼çš„ <code>style</code> å¯¹è±¡ï¼Œå¯ç»‘å®šåˆ° <code>animated.div</code> ä¸Š</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState, <span class="title class_">CSSProperties</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useTransition, animated, <span class="title class_">AnimatedProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface <span class="title class_">PageItem</span> &#123;</span><br><span class="line">  (<span class="attr">props</span>: <span class="title class_">AnimatedProps</span>&lt;&#123; <span class="attr">style</span>: <span class="title class_">CSSProperties</span> &#125;&gt;): <span class="title class_">React</span>.<span class="property">ReactElement</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">pages</span>: <span class="title class_">Array</span>&lt;<span class="title class_">PageItem</span>&gt; = [</span><br><span class="line">  <span class="function">(<span class="params">&#123; style &#125;</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">...style</span>, <span class="attr">background:</span> &#x27;<span class="attr">lightpink</span>&#x27; &#125;&#125;&gt;</span>A<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span>,</span><br><span class="line">  <span class="function">(<span class="params">&#123; style &#125;</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">...style</span>, <span class="attr">background:</span> &#x27;<span class="attr">lightblue</span>&#x27; &#125;&#125;&gt;</span>B<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span>,</span><br><span class="line">  <span class="function">(<span class="params">&#123; style &#125;</span>) =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">...style</span>, <span class="attr">background:</span> &#x27;<span class="attr">lightgreen</span>&#x27; &#125;&#125;&gt;</span>C<span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span>,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [index, set] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onClick</span> = (<span class="params"></span>) =&gt; <span class="title function_">set</span>(<span class="function"><span class="params">state</span> =&gt;</span> (state + <span class="number">1</span>) % <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> transitions = <span class="title function_">useTransition</span>(index, &#123;</span><br><span class="line">    <span class="attr">from</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(100%,0,0)&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">enter</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(0%,0,0)&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">leave</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(-100%,0,0)&#x27;</span> &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;container&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;transitions((style, i) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const Page = pages[i]</span></span><br><span class="line"><span class="language-xml">        return <span class="tag">&lt;<span class="name">Page</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &gt; <span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">color</span>: white;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">800</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦‚æœå¤šä¸ªå…ƒç´ å‘¢ï¼Ÿ</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/8f57ed13b55f47668cbb0e2e7aedf5d7tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Šäº†è¿‡æ¸¡åŠ¨ç”»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App2.css&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useTransition, animated &#125; <span class="keyword">from</span> <span class="string">&#x27;@react-spring/web&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&quot;guang&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&quot;guang&quot;</span> &#125;,</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> transitions = <span class="title function_">useTransition</span>(items, &#123;</span><br><span class="line">    <span class="attr">from</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(100%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">enter</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(0%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    <span class="attr">leave</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(-100%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;item-box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;transitions((style, i) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">          return <span class="tag">&lt;<span class="name">animated.div</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">className</span>=<span class="string">&quot;del-btn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">              <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                setItems(items.filter((item) =&gt; item.id !== i.id));</span></span><br><span class="line"><span class="language-xml">              &#125;&#125;</span></span><br><span class="line"><span class="language-xml">            &gt;</span></span><br><span class="line"><span class="language-xml">              x</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;i.text&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">animated.div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setItems([...items, &#123; id: Date.now(), text:  &#x27;guang&#x27; &#125;]);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        Add</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>useTransition ä¼ å•ä¸ªæ•°æ®å°±æ˜¯å•ä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»ã€ä¼ æ•°ç»„å°±æ˜¯å¤šä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œå†™æ³•ä¸€æ ·ã€‚</p><p>æ­¤å¤–ï¼Œç°åœ¨æ˜¯åˆšå¼€å§‹æ‰€æœ‰å…ƒç´ ä¼šåšä¸€æ¬¡åŠ¨ç”»</p><p>è®¾ç½®ä¸‹ initial æ—¶çš„æ ·å¼å°±å¯ä»¥äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/795adc8409784f41851f7fb06dbdaad6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> transitions = <span class="title function_">useTransition</span>(items, &#123;</span><br><span class="line">    <span class="attr">initial</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(0%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    <span class="attr">from</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(100%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">    <span class="attr">enter</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(0%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">1</span> &#125;,</span><br><span class="line">    <span class="attr">leave</span>: &#123; <span class="attr">transform</span>: <span class="string">&#x27;translate3d(-100%,0,0)&#x27;</span>, <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿™æ ·æœ€å¼€å§‹å°±ä¸ä¼šåšä¸€æ¬¡åŠ¨ç”»ï¼Œåªæœ‰åœ¨å¢åˆ å…ƒç´ çš„æ—¶å€™ä¼šè§¦å‘è¿‡æ¸¡åŠ¨ç”»ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/431b061196874473b3a4efe04d9efd06tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>è¿™å°±æ˜¯ç”¨ react-spring çš„ useTransition åšè¿‡æ¸¡åŠ¨ç”»çš„æ–¹å¼ã€‚</p><p>æ­¤å¤–ï¼Œæœ€å¥½åŠ ä¸Š keysï¼Œreact-spring ä¼šæ ¹æ®è¿™ä¸ªæ¥æ·»åŠ  keyï¼Œä»è€Œè¯†åˆ«å‡ºå…ƒç´ çš„å¢åˆ ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/5c6a013ec2584689a194a0f4713447ectplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h1 id="use-gesture-react"><a href="#use-gesture-react" class="headerlink" title="use-gesture&#x2F;react"></a>use-gesture&#x2F;react</h1><p><a href="https://use-gesture.netlify.app/">å®˜æ–¹æ–‡æ¡£</a></p><p>æ‰‹åŠ¿åº“é‡Œå°±æ˜¯å¯¹ dragã€hoverã€scroll è¿™äº›äº‹ä»¶çš„å°è£…ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/image-20250330014539194.png" alt="image-20250330014539194"></p><h2 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @react-spring/web @use-gesture/react</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-1"><a href="#ä½¿ç”¨-1" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>ç”¨ use-gesture ä¹Ÿå¾ˆç®€å•ï¼Œç»‘å®šå•¥äº‹ä»¶å°±ç”¨ useXxxï¼Œæ¯”å¦‚ useDragã€useHoverã€useScroll ç­‰ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/01a8d76baf524342b4218a5c2e9f375ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æˆ–è€…ç”¨ useGesture åŒæ—¶ç»‘å®šå¤šç§äº‹ä»¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2052e5f1650a44469b5fa8ba2db67d00tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="æ‰‹åŠ¿é€‰é¡¹"><a href="#æ‰‹åŠ¿é€‰é¡¹" class="headerlink" title="æ‰‹åŠ¿é€‰é¡¹"></a>æ‰‹åŠ¿é€‰é¡¹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// when you use a gesture-specific hook</span></span><br><span class="line"><span class="title function_">useDrag</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> <span class="title function_">doSomethingWith</span>(state), &#123; ...sharedOptions, ...dragOptions &#125;)</span><br></pre></td></tr></table></figure><h3 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h3><p>æ‰‹åŠ¿åº“æœ€å¤§çš„å¥½å¤„æ˜¯å¯ä»¥æ‹¿åˆ°ç§»åŠ¨çš„æ–¹å‘ã€é€Ÿç‡ã€è·ç¦»ç­‰ä¿¡æ¯ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ‹¿åˆ°çš„è¿™å‡ ä¸ªå‚æ•°ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/0e10b619bf434ac49a4afd5117ca76cftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>movement æ˜¯æ‹–åŠ¨è·ç¦» [x, y] </p><p>direction æ˜¯æ‹–åŠ¨æ–¹å‘ [x, y]ï¼Œ1 ä»£è¡¨å‘å·¦ï¼ˆå‘ä¸Šï¼‰ã€-1 ä»£è¡¨å‘å³ï¼ˆå‘ä¸‹ï¼‰ã€‚</p><p>active æ˜¯å½“å‰æ˜¯å¦åœ¨æ‹–åŠ¨ã€‚</p><p>cancel æ–¹æ³•å¯ä»¥ä¸­æ­¢äº‹ä»¶ã€‚</p><p>ä¸‹é¢æ˜¯å®Œæ•´çš„çŠ¶æ€è¡¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> bind = <span class="title function_">useXXXX</span>(<span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;</span><br><span class="line">    event,         <span class="comment">// åŸå§‹äº‹ä»¶å¯¹è±¡</span></span><br><span class="line">    xy,            <span class="comment">// [x,y] ä½ç½®ï¼ˆæŒ‡é’ˆä½ç½®æˆ–æ»šåŠ¨åç§»é‡ï¼‰</span></span><br><span class="line">    initial,       <span class="comment">// æ‰‹åŠ¿å¼€å§‹æ—¶çš„ xy å€¼</span></span><br><span class="line">    intentional,   <span class="comment">// è¯¥æ‰‹åŠ¿æ˜¯å¦ä¸ºç”¨æˆ·æœ‰æ„è§¦å‘</span></span><br><span class="line">    delta,         <span class="comment">// ç§»åŠ¨å¢é‡ï¼ˆå½“å‰ç§»åŠ¨å€¼ - ä¸Šä¸€æ¬¡ç§»åŠ¨å€¼ï¼‰</span></span><br><span class="line">    offset,        <span class="comment">// ç›¸å¯¹äºæ‰‹åŠ¿èµ·ç‚¹çš„åç§»é‡</span></span><br><span class="line">    lastOffset,    <span class="comment">// ä¸Šæ¬¡æ‰‹åŠ¿å¼€å§‹æ—¶çš„åç§»é‡</span></span><br><span class="line">    movement,      <span class="comment">// ä½ç§»é‡ï¼ˆoffset ä¸ lastOffset ä¹‹é—´çš„å·®å€¼ï¼‰</span></span><br><span class="line">    velocity,      <span class="comment">// æ¯ä¸ªè½´ä¸Šçš„æ‰‹åŠ¿é€Ÿåº¦ï¼ˆå•ä½ï¼špx/msï¼‰</span></span><br><span class="line">    distance,      <span class="comment">// æ¯ä¸ªè½´ä¸Šçš„åç§»è·ç¦»</span></span><br><span class="line">    direction,     <span class="comment">// æ¯ä¸ªè½´ä¸Šçš„ç§»åŠ¨æ–¹å‘</span></span><br><span class="line">    overflow,      <span class="comment">// åç§»é‡æ˜¯å¦è¶…å‡ºè¾¹ç•Œï¼ˆæŒ‰è½´è®¡ç®—ï¼‰</span></span><br><span class="line">    startTime,     <span class="comment">// æ‰‹åŠ¿å¼€å§‹çš„æ—¶é—´æˆ³ï¼ˆå•ä½ï¼šmsï¼‰</span></span><br><span class="line">    timeDelta,     <span class="comment">// å½“å‰äº‹ä»¶ä¸ä¸Šä¸€ä¸ªäº‹ä»¶çš„æ—¶é—´é—´éš”ï¼ˆå•ä½ï¼šmsï¼‰</span></span><br><span class="line">    elapsedTime,   <span class="comment">// æ‰‹åŠ¿æŒç»­æ—¶é—´ï¼ˆå•ä½ï¼šmsï¼‰</span></span><br><span class="line">    timeStamp,     <span class="comment">// äº‹ä»¶çš„æ—¶é—´æˆ³</span></span><br><span class="line">    type,          <span class="comment">// äº‹ä»¶ç±»å‹</span></span><br><span class="line">    target,        <span class="comment">// äº‹ä»¶çš„ target å…ƒç´ </span></span><br><span class="line">    currentTarget, <span class="comment">// äº‹ä»¶çš„ currentTarget å…ƒç´ </span></span><br><span class="line">    first,         <span class="comment">// æ˜¯å¦æ˜¯æ‰‹åŠ¿çš„ç¬¬ä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">    last,          <span class="comment">// æ˜¯å¦æ˜¯æ‰‹åŠ¿çš„æœ€åä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line">    active,        <span class="comment">// æ‰‹åŠ¿å½“å‰æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€</span></span><br><span class="line">    memo,          <span class="comment">// å¤„ç†å‡½æ•°åœ¨ä¸Šä¸€æ¬¡æ‰§è¡Œæ—¶è¿”å›çš„å€¼</span></span><br><span class="line">    cancel,        <span class="comment">// å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°æ¥ä¸­æ–­æŸäº›æ‰‹åŠ¿</span></span><br><span class="line">    canceled,      <span class="comment">// è¯¥æ‰‹åŠ¿æ˜¯å¦å·²è¢«å–æ¶ˆï¼ˆé€‚ç”¨äºæ‹–æ‹½å’Œç¼©æ”¾ï¼‰</span></span><br><span class="line">    down,          <span class="comment">// å½“å‰æ˜¯å¦æŒ‰ä¸‹é¼ æ ‡æŒ‰é’®æˆ–è§¦æ‘¸å±å¹•</span></span><br><span class="line">    buttons,       <span class="comment">// æŒ‰ä¸‹çš„é¼ æ ‡æŒ‰é’®æ•°é‡</span></span><br><span class="line">    touches,       <span class="comment">// è§¦æ‘¸å±å¹•çš„æ‰‹æŒ‡æ•°é‡</span></span><br><span class="line">    args,          <span class="comment">// ä½ åœ¨ React ç»„ä»¶ä¸­é€šè¿‡ bind ä¼ é€’çš„å‚æ•°</span></span><br><span class="line">    ctrlKey,       <span class="comment">// æ˜¯å¦æŒ‰ä¸‹ Control é”®</span></span><br><span class="line">    altKey,        <span class="comment">// æ˜¯å¦æŒ‰ä¸‹ Alt é”®</span></span><br><span class="line">    shiftKey,      <span class="comment">// æ˜¯å¦æŒ‰ä¸‹ Shift é”®</span></span><br><span class="line">    metaKey,       <span class="comment">// æ˜¯å¦æŒ‰ä¸‹ Meta é”®ï¼ˆå¦‚ Cmd æˆ– Windows é”®ï¼‰</span></span><br><span class="line">    locked,        <span class="comment">// æ˜¯å¦å¯ç”¨äº† `document.pointerLockElement`</span></span><br><span class="line">    dragging,      <span class="comment">// ç»„ä»¶å½“å‰æ˜¯å¦æ­£åœ¨è¢«æ‹–æ‹½</span></span><br><span class="line">    moving,        <span class="comment">// ç»„ä»¶å½“å‰æ˜¯å¦æ­£åœ¨ç§»åŠ¨</span></span><br><span class="line">    scrolling,     <span class="comment">// ç»„ä»¶å½“å‰æ˜¯å¦åœ¨æ»šåŠ¨</span></span><br><span class="line">    wheeling,      <span class="comment">// ç»„ä»¶å½“å‰æ˜¯å¦åœ¨è¿›è¡Œæ»šè½®æ“ä½œ</span></span><br><span class="line">    pinching       <span class="comment">// ç»„ä»¶å½“å‰æ˜¯å¦åœ¨è¿›è¡Œç¼©æ”¾æ‰‹åŠ¿</span></span><br><span class="line">  &#125; = state</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ‰‹åŠ¿é€‰é¡¹ç¤ºä¾‹"><a href="#æ‰‹åŠ¿é€‰é¡¹ç¤ºä¾‹" class="headerlink" title="æ‰‹åŠ¿é€‰é¡¹ç¤ºä¾‹"></a>æ‰‹åŠ¿é€‰é¡¹ç¤ºä¾‹</h2><h3 id="axis"><a href="#axis" class="headerlink" title="axis"></a>axis</h3><p><code>axis</code>ä½¿ç”¨æˆ·æ‰‹åŠ¿æ˜“äºå°†ç”¨æˆ·æ‰‹åŠ¿é™åˆ¶ä¸ºç‰¹å®šçš„è½´ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-18-05.gif" alt="2025-03-30-02-18-05"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">AxisExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span> &#125;));</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(</span><br><span class="line">    <span class="function">(<span class="params">&#123; down, movement: [mx] &#125;</span>) =&gt;</span> api.<span class="title function_">start</span>(&#123; <span class="attr">x</span>: down ? mx : <span class="number">0</span> &#125;),</span><br><span class="line">    &#123; <span class="attr">axis</span>: <span class="string">&quot;x&quot;</span> &#125;</span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span> &#125;&#125; /&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>axis: &#39;lock&#39;</code>ä½¿æ‚¨ä¸€æ—¦æ£€æµ‹åˆ°æ–¹å‘ï¼Œå°±å¯ä»¥é”å®šæ‰‹åŠ¿çš„è¿åŠ¨ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœç”¨æˆ·å¼€å§‹æ°´å¹³ç§»åŠ¨ï¼Œåˆ™æ‰‹åŠ¿å°†é”åœ¨<code>x</code>è½´ä¸Šã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-18-37.gif" alt="2025-03-30-02-18-37"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">LockAxisExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x, y &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(</span><br><span class="line">    <span class="function">(<span class="params">&#123; down, movement: [mx, my] &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      api.<span class="title function_">start</span>(&#123; <span class="attr">x</span>: down ? mx : <span class="number">0</span>, <span class="attr">y</span>: down ? my : <span class="number">0</span>, <span class="attr">immediate</span>: down &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">axis</span>: <span class="string">&#x27;lock&#x27;</span> &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span>, <span class="attr">y</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="bounds"><a href="#bounds" class="headerlink" title="bounds"></a>bounds</h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-19-53.gif" alt="2025-03-30-02-19-53"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">BoundsExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x, y &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(<span class="function">(<span class="params">&#123; down, offset: [ox, oy] &#125;</span>) =&gt;</span> api.<span class="title function_">start</span>(&#123; <span class="attr">x</span>: ox, <span class="attr">y</span>: oy, <span class="attr">immediate</span>: down &#125;), &#123;</span><br><span class="line">    <span class="attr">bounds</span>: &#123; <span class="attr">left</span>: -<span class="number">100</span>, <span class="attr">right</span>: <span class="number">100</span>, <span class="attr">top</span>: -<span class="number">50</span>, <span class="attr">bottom</span>: <span class="number">50</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span>, <span class="attr">y</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦å°†çº¦æŸè®¾ç½®ä¸ºç”¨æˆ·æ‰‹åŠ¿ï¼Œåˆ™åº”ä½¿ç”¨<code>bounds</code>é€‰é¡¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¿<code>movement</code>å’Œ<code>offset</code><strong>éƒ½</strong>å°†å¤¹ç´§åˆ°æŒ‡å®šçš„<code>bounds</code> ã€‚æœªè®¾ç½®æ—¶ï¼Œ <code>bounds</code>å°†é»˜è®¤ä¸º<code>Infinity</code> ã€‚</p><h3 id="filterTaps"><a href="#filterTaps" class="headerlink" title="filterTaps"></a>filterTaps</h3><p>è®©å¯æ‹–æ‹½ç»„ä»¶åŒæ—¶æ”¯æŒç‚¹å‡»æˆ–è½»è§¦å¯èƒ½ä¼šæ¯”è¾ƒæ£˜æ‰‹ï¼šåŒºåˆ†â€œç‚¹å‡»â€å’Œâ€œæ‹–æ‹½â€å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆç®€å•ã€‚</p><p>å½“ <code>filterTaps</code> è®¾ç½®ä¸º <code>true</code> æ—¶ï¼Œå¦‚æœ<strong>æ€»ä½ç§»å°äº 3 åƒç´ </strong>ï¼Œåœ¨é‡Šæ”¾æ—¶ <code>tap</code> çŠ¶æ€å±æ€§ä¼šå˜ä¸º <code>true</code>ï¼Œè€Œ <code>down</code> å§‹ç»ˆä¿æŒ <code>false</code>ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-23-50.gif" alt="2025-03-30-02-23-50"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">FilterTapsExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x, y &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(</span><br><span class="line">    <span class="function">(<span class="params">&#123; down, movement: [mx, my], tap &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (tap) <span class="title function_">alert</span>(<span class="string">&#x27;tap!&#x27;</span>)</span><br><span class="line">      api.<span class="title function_">start</span>(&#123; <span class="attr">x</span>: down ? mx : <span class="number">0</span>, <span class="attr">y</span>: down ? my : <span class="number">0</span> &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123; <span class="attr">filterTaps</span>: <span class="literal">true</span> &#125;</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span>, <span class="attr">y</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å¾ˆå¤šå°±ä¸ä¸¾ä¾‹äº†ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://use-gesture.netlify.app/docs/options/#axisthreshold">Gesture options - @use-gesture documentation</a></p><h2 id="çŠ¶æ€ç¤ºä¾‹"><a href="#çŠ¶æ€ç¤ºä¾‹" class="headerlink" title="çŠ¶æ€ç¤ºä¾‹"></a>çŠ¶æ€ç¤ºä¾‹</h2><h3 id="offset"><a href="#offset" class="headerlink" title="offset"></a><strong>offset</strong></h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-02-40.gif" alt="2025-03-30-02-02-40"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">OffsetExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x, y &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(<span class="function">(<span class="params">&#123; offset: [x, y] &#125;</span>) =&gt;</span> api.<span class="title function_">start</span>(&#123; x, y &#125;))</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span>, <span class="attr">y</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="canel"><a href="#canel" class="headerlink" title="canel"></a><strong>canel</strong></h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-05-10.gif" alt="2025-03-30-02-05-10"></p><p>å¦‚æœå°†è“è‰²æ­£æ–¹å½¢æ‹–åˆ°ç²‰çº¢è‰²åŒºåŸŸï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ‰‹åŠ¿è¢«å–æ¶ˆï¼Œè“è‰²æ­£æ–¹å½¢è¿”å›å…¶åŸå§‹ä½ç½®ã€‚ä½¿ç”¨ä»¥ä¸‹ä»£ç è§¦å‘è¿™æ˜¯éå¸¸ç®€å•çš„ã€‚</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">CancelExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [&#123; x &#125;, api] = <span class="title function_">useSpring</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">x</span>: <span class="number">0</span> &#125;))</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(<span class="function">(<span class="params">&#123; active, movement: [mx], cancel &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (mx &gt; <span class="number">200</span>) <span class="title function_">cancel</span>()</span><br><span class="line">    api.<span class="title function_">start</span>(&#123; <span class="attr">x</span>: active ? mx : <span class="number">0</span>, <span class="attr">immediate</span>: active &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œåªæœ‰<code>drag</code>å’Œ<code>pinch</code>æ‰‹åŠ¿æ˜¯å¯ä»¥å–æ¶ˆçš„ï¼ˆå…¶ä»–æ‰‹åŠ¿ä¸Šçš„å‘¼å«<code>cancel</code>å°†æ— èƒ½ä¸ºåŠ›ï¼‰ã€‚</p><h3 id="swipe-drag-only"><a href="#swipe-drag-only" class="headerlink" title="swipe (drag only)"></a><strong>swipe (drag only)</strong></h3><p><code>swipe</code>æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„çŠ¶æ€å±æ€§ï¼Œå¯å¸®åŠ©æ‚¨æ£€æµ‹æ»‘åŠ¨ã€‚ <code>swipe</code>æ˜¯ä¸¤ä¸ªç»„ä»¶çš„å‘é‡<code>1</code>å‡ä¸º<code>-1</code>æˆ–<code>0</code> ã€‚è¯¥ç»„ä»¶ä¿æŒåˆ°<code>0</code> ï¼Œç›´åˆ°æ£€æµ‹åˆ°æ»‘åŠ¨ä¸ºæ­¢ã€‚ <code>1</code>æˆ–<code>-1</code>æŒ‡ç¤ºæ»‘åŠ¨çš„æ–¹å‘ï¼ˆ<strong>å·¦å³</strong> çš„æ°´å¹³è½´ï¼Œå‚ç›´è½´çš„<strong>é¡¶éƒ¨</strong>æˆ–åº•éƒ¨ï¼‰ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/2025-03-30-02-07-18.gif" alt="2025-03-30-02-07-18"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">SwipeExample</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [position, setPosition] = <span class="title class_">React</span>.<span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> &#123; x &#125; = <span class="title function_">useSpring</span>(&#123; <span class="attr">x</span>: position * <span class="number">200</span> &#125;)</span><br><span class="line">  <span class="keyword">const</span> bind = <span class="title function_">useDrag</span>(<span class="function">(<span class="params">&#123; swipe: [swipeX] &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// position will either be -1, 0 or 1</span></span><br><span class="line">    <span class="title function_">setPosition</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">min</span>(<span class="title class_">Math</span>.<span class="title function_">max</span>(-<span class="number">1</span>, p + swipeX), <span class="number">1</span>))</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">animated.div</span> &#123;<span class="attr">...bind</span>()&#125; <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">x</span> &#125;&#125; /&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯åœ¨<code>x</code>è½´ä¸Šæ£€æµ‹åˆ°çš„æ»‘åŠ¨çš„æ¡ä»¶ï¼š</p><ul><li>dragæ‰‹åŠ¿ç»“æŸ</li><li>dragæ‰‹åŠ¿ä¸è¶…è¿‡22ms</li><li><code>movement[0</code>]ä¼˜äº<code>swipe.distance[0]</code>é€‰é¡¹</li><li><code>velocity[0]</code>ä¼˜äº<code>swipe.velocity[0]</code>é€‰é¡¹ã€‚</li></ul><h3 id><a href="#" class="headerlink" title></a></h3><h1 id="react-transition-group"><a href="#react-transition-group" class="headerlink" title="react-transition-group"></a>react-transition-group</h1><ul><li><code>Transition</code>ã€<code>CSSTransition</code>ã€<code>TransitionGroup</code>ã€<code>SwitchTransition</code></li></ul><p>react-transition-group æ˜¯é€šè¿‡æ”¹å˜ className æ¥ç»™ç»„ä»¶åŠ ä¸Šçš„è¿‡æ¸¡æ•ˆæœçš„ã€‚</p><h2 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save react-transition-group</span><br><span class="line"></span><br><span class="line">npm install --save-dev @types/react-transition-group</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-2"><a href="#ä½¿ç”¨-2" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="CSSTransition"><a href="#CSSTransition" class="headerlink" title="CSSTransition"></a>CSSTransition</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSSTransition</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-transition-group&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./App3.css&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [flag, setFlag] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">CSSTransition</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">in</span>=<span class="string">&#123;flag&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">timeout</span>=<span class="string">&#123;1000&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CSSTransition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setFlag(!flag)&#125;&gt;&#123;!flag ?  &#x27;è¿›å…¥&#x27; : &#x27;ç¦»å¼€&#x27;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background</span>: lightblue; </span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.enter</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.enter-done</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.exit</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0%</span>);</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.exit-active</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">100%</span>);</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.exit-done</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/22d0e53abcbe4b86baf78435511e47a4tplv-k3u1fbpfcp-jj-mark0000q75.gif" alt="img"></p><p>å¦‚æœæƒ³æœ€å¼€å§‹å‡ºç°çš„æ—¶å€™å°±åšä¸€æ¬¡åŠ¨ç”»å‘¢ï¼Ÿ</p><p>è¿™å°±éœ€è¦è®¾ç½® appear çš„ props äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/b148fb850d8246fb987ed4f5696cb77dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.appear</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.appear-active</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.appear-done</span> &#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§ç»­çœ‹ react-transition-groupï¼Œç°åœ¨æ˜¯æˆ‘ä»¬è‡ªå·±è®¾ç½® in çš„ props æ¥è§¦å‘è¿›å…¥å’Œç¦»å¼€åŠ¨ç”»çš„ï¼Œå¦‚æœæ˜¯åˆ—è¡¨çš„å¤šä¸ª childï¼Œéƒ½æƒ³åŠ åŠ¨ç”»å‘¢ï¼Ÿ</p><p>è¿™æ—¶å€™å°±ç”¨ TransitionGrop ç»„ä»¶ã€‚</p><h3 id="TransitionGrop"><a href="#TransitionGrop" class="headerlink" title="TransitionGrop"></a>TransitionGrop</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSSTransition</span>, <span class="title class_">TransitionGroup</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-transition-group&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./App4.css&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [items, setItems] = <span class="title function_">useState</span>([</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">&quot;guang&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">&quot;guang&quot;</span> &#125;,</span><br><span class="line">  ]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">TransitionGroup</span> <span class="attr">className</span>=<span class="string">&quot;item-box&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;items.map((&#123; id, text &#125;) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">CSSTransition</span> <span class="attr">key</span>=<span class="string">&#123;id&#125;</span> <span class="attr">timeout</span>=<span class="string">&#123;1000&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">span</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">className</span>=<span class="string">&quot;del-btn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">                  setItems(items.filter((item) =&gt; item.id !== id));</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;</span></span><br><span class="line"><span class="language-xml">              &gt;</span></span><br><span class="line"><span class="language-xml">                x</span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              &#123;text&#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">CSSTransition</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">TransitionGroup</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;btn&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-xml">          setItems([...items, &#123; id: Date.now(), text:  &#x27;guang&#x27; &#125;]);</span></span><br><span class="line"><span class="language-xml">        &#125;&#125;</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        Add</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">.item-box &#123;</span><br><span class="line">  width: <span class="number">300</span>px;</span><br><span class="line">  margin: <span class="number">20</span>px auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.item &#123;</span><br><span class="line">  margin: <span class="number">4</span>px <span class="number">0</span>;</span><br><span class="line">  padding: <span class="number">10</span>px <span class="number">0</span>;</span><br><span class="line">  border-radius: <span class="number">4</span>px;</span><br><span class="line">  background: lightblue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.del-btn &#123;</span><br><span class="line">  padding: <span class="number">0</span> <span class="number">10</span>px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  user-<span class="keyword">select</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.enter &#123;</span><br><span class="line">  opacity: <span class="number">0</span>;</span><br><span class="line">  transform: translateX(<span class="number">-100</span>%);</span><br><span class="line">  background: lightblue;</span><br><span class="line">&#125;</span><br><span class="line">.enter-active &#123;</span><br><span class="line">  opacity: <span class="number">1</span>;</span><br><span class="line">  transform: translateX(<span class="number">0</span>%);</span><br><span class="line">  background: lightblue;</span><br><span class="line">  transition: all <span class="number">1</span>s ease;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">.enter-done &#123;</span><br><span class="line">&#125;</span><br><span class="line">.exit &#123;</span><br><span class="line">  opacity: <span class="number">1</span>;</span><br><span class="line">  transform: translateX(<span class="number">0</span>%);</span><br><span class="line">  background: red;</span><br><span class="line">&#125;</span><br><span class="line">.exit-active &#123;</span><br><span class="line">  opacity: <span class="number">0</span>;</span><br><span class="line">  transform: translateX(<span class="number">100</span>%);</span><br><span class="line">  background: red;</span><br><span class="line">  transition: all <span class="number">1</span>s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.btn &#123;</span><br><span class="line">  color: <span class="meta">#fff;</span></span><br><span class="line">  background-color: <span class="meta">#0069d9;</span></span><br><span class="line">  border-color: <span class="meta">#0062cc;</span></span><br><span class="line">  padding: <span class="number">10</span>px <span class="number">20</span>px;</span><br><span class="line">  border-radius: <span class="number">4</span>px;</span><br><span class="line">  width: fit-content;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">  margin: <span class="number">20</span>px auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•ˆæœå°±æ˜¯å‰é¢ç”¨ react-spring å®ç°è¿‡ä¸€éçš„é‚£ä¸ªï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/b10d4a94b47f4484846a4e772a790be4tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>ç”¨ CSSTransition çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±è®¾ç½® in çš„ props æ¥è§¦å‘è¿›å…¥å’Œç¦»å¼€åŠ¨ç”»ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/a82167f3af694d8a941aaecbd4cae0d0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è€Œç°åœ¨åªéœ€è¦è®¾ç½® keyï¼ŒTransitionGroup ä¼šåœ¨ children å˜åŒ–çš„æ—¶å€™å¯¹æ¯”æ–°æ—§ itemï¼Œæ¥è‡ªåŠ¨è®¾ç½® inï¼Œè§¦å‘åŠ¨ç”»ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/0467becf82fc41e3a60437a8d6c16c28tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™å°±æ˜¯ react-transition-group çš„å¸¸ç”¨åŠŸèƒ½ã€‚</p><h3 id="SwitchTransition"><a href="#SwitchTransition" class="headerlink" title="SwitchTransition"></a>SwitchTransition</h3><p>å…ˆçœ‹ä¸‹æ•ˆæœï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/79f0d6b0254649b39e57657b850d1a5ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åŒ…è£¹ä¸€å±‚ SwitchTransitionï¼Œç„¶åè®¾ç½®ä¸‹ keyã€‚</p><p>å½“ mode ä¸º in-out æ—¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/c153e802cf4047df9c10ac4b3465523ftplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>å½“ mode ä¸º out-in æ—¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/6447929ba61f4e96902af24d1c79a597tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>è¿™ä¸ªç»„ä»¶å°±æ˜¯ç”¨æ¥æ§åˆ¶ä¸¤ä¸ªç»„ä»¶åˆ‡æ¢æ—¶çš„è¿›å…¥ã€ç¦»å¼€åŠ¨ç”»çš„é¡ºåºçš„ã€‚</p><h3 id="Transition"><a href="#Transition" class="headerlink" title="Transition"></a>Transition</h3><p>æŠŠ CSSTransition æ¢æˆ Transitionï¼Œç„¶åæ‰“å°ä¸‹ statusï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/11d3f507a2b9403ba6c4c06fa8c3e9c9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œstatus æœ€å¼€å§‹æ˜¯ä» entering åˆ° enteredï¼Œä» exiting åˆ° exited å˜åŒ–ï¼Œä½†æ˜¯ä¸ä¼šè®¾ç½® classNameï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E5%8A%A8%E7%94%BB%E5%BA%93/cb322756ce7c46279f00dbbda11029betplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>æˆ‘ä»¬å¯ä»¥æ ¹æ® status çš„å˜åŒ–è‡ªå·±è®¾ç½® classNameã€‚</p><p>å…¶å®ï¼ŒCSSTransition å°±æ˜¯åŸºäº Transition å°è£…çš„ã€‚</p><p>ä¸€èˆ¬æˆ‘ä»¬ç”¨ CSSTransition å°±å¥½äº†ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å½“ç»„ä»¶è¿›å…¥ dom å’Œä» dom ä¸­ç§»é™¤çš„æ—¶å€™ï¼Œå‘ç”Ÿçš„åŠ¨ç”»å°±å«åšè¿‡æ¸¡åŠ¨ç”»ã€‚</p><p>react-spring æœ‰ useTransition è¿™ä¸ª hook æ¥å®ç°è¿‡æ¸¡åŠ¨ç”»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ react-trasition-group è¿™ä¸ªåŒ…æ¥å®ç°ã€‚</p><p>è¿™ä¸¤ä¸ªåŒ…èƒ½å®ç°ä¸€æ ·çš„åŠŸèƒ½ï¼Œä½†æ˜¯æ€è·¯ä¸åŒã€‚</p><p>react-spring æœ‰å†…ç½®çš„åŠ¨ç”»æ•ˆæœï¼Œæ‰€ä»¥åªè¦ç”¨ useTransition è®¾ç½® fromã€enterã€leave æ—¶çš„ styleï¼Œå®ƒå°±ä¼šåœ¨æ•°æ®å˜åŒ–çš„æ—¶å€™è§¦å‘è¿‡æ¸¡åŠ¨ç”»ã€‚</p><p>è€Œ react-transition-group æ˜¯é€šè¿‡ className çš„ä¿®æ”¹æ¥å®ç°è¿‡æ¸¡åŠ¨ç”»ï¼Œè€Œä¸”è¦è‡ªå·±ç”¨ transition çš„ css æ¥æ§åˆ¶åŠ¨ç”»æ•ˆæœï¼š</p><ul><li><p>è¿›å…¥çš„æ—¶å€™ä¼šè§¦å‘ enterã€enter-activeã€enter-done çš„ className åˆ‡æ¢</p></li><li><p>ç¦»å¼€çš„æ—¶å€™æ˜¯ exitã€exit-activeã€exit-done çš„åˆ‡æ¢</p></li><li><p>å¦‚æœè®¾ç½®äº† appear å‚æ•°ï¼Œåˆšå‡ºç°çš„æ—¶å€™ï¼Œè¿˜ä¼šæœ‰ appearã€appear-activeã€appear-done çš„åˆ‡æ¢ã€‚</p></li></ul><p>å®ƒæœ‰ Transitionã€CSSTransitionã€TransitionGroupã€SwitchTransition è¿™ 4 ä¸ªç»„ä»¶ã€‚</p><p>å¸¸ç”¨çš„å°±æ˜¯ CSSTransition å’Œ TransitionGroupï¼Œè¿™ä¿©æ˜¯ç”¨æ¥åšå•ä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»å’Œå¤šä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»çš„ã€‚</p><p>è€Œåœ¨ react-spring é‡Œï¼Œå•ä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»å’Œå¤šä¸ªå…ƒç´ çš„è¿‡æ¸¡åŠ¨ç”»å†™æ³•æ²¡åŒºåˆ«ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-ç»„ä»¶åº“æ„å»º</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="ç»„ä»¶æ‰“åŒ…å‰ç½®çŸ¥è¯†"><a href="#ç»„ä»¶æ‰“åŒ…å‰ç½®çŸ¥è¯†" class="headerlink" title="ç»„ä»¶æ‰“åŒ…å‰ç½®çŸ¥è¯†"></a>ç»„ä»¶æ‰“åŒ…å‰ç½®çŸ¥è¯†</h1><h2 id="1-æ¨¡å—è§„èŒƒ"><a href="#1-æ¨¡å—è§„èŒƒ" class="headerlink" title="1. æ¨¡å—è§„èŒƒ"></a>1. æ¨¡å—è§„èŒƒ</h2><p>åœ¨ JavaScript ç”Ÿæ€é‡Œï¼Œä»£ç ç»„ç»‡æ–¹å¼æœ‰ä¸åŒçš„<strong>æ¨¡å—åŒ–è§„èŒƒ</strong>ï¼Œæœ€å¸¸è§çš„æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š</p><ol><li><p><strong>CommonJSï¼ˆCJSï¼‰</strong></p><ul><li><p><code>require()</code> è¯­æ³•</p></li><li><p>ä¸»è¦ç”¨äº Node.js è¿è¡Œç¯å¢ƒ</p></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lodash = <span class="built_in">require</span>(<span class="string">&#x27;lodash&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(lodash);</span><br></pre></td></tr></table></figure></li><li><p>ç¼ºç‚¹ï¼šä¸é€‚ç”¨äºæµè§ˆå™¨ï¼Œä¸èƒ½ <strong>Tree Shaking</strong>ï¼ˆä¼˜åŒ–æ‰“åŒ…æ—¶ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼‰ã€‚</p></li></ul></li><li><p><strong>ES Modulesï¼ˆESMï¼‰</strong></p><ul><li><p><code>import/export</code> è¯­æ³•</p></li><li><p>ç°ä»£ JavaScript è§„èŒƒï¼Œé€‚ç”¨äºæµè§ˆå™¨å’Œ Node.js</p></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; debounce &#125; <span class="keyword">from</span> <span class="string">&#x27;lodash&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(debounce);</span><br></pre></td></tr></table></figure></li><li><p>ä¼˜åŠ¿ï¼šæ”¯æŒ <strong>Tree Shaking</strong>ï¼Œé€‚åˆå‰ç«¯æ‰“åŒ…ä¼˜åŒ–ã€‚</p></li></ul></li><li><p><strong>UMDï¼ˆUniversal Module Definitionï¼‰</strong></p><ul><li><p>å…¼å®¹ CommonJSã€AMDï¼ˆå¦ä¸€ç§æµè§ˆå™¨æ¨¡å—è§„èŒƒï¼‰å’Œå…¨å±€å˜é‡</p></li><li><p>é€‚ç”¨äºåœ¨ <code>&lt;script&gt;</code> ç›´æ¥å¼•å…¥</p></li><li><p>ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params">root, factory</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">module</span> === <span class="string">&quot;object&quot;</span> &amp;&amp; <span class="variable language_">module</span>.<span class="property">exports</span>) &#123;</span><br><span class="line">        <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title function_">factory</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        root.<span class="property">myLibrary</span> = <span class="title function_">factory</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="variable language_">this</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span> &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>é€‚ç”¨äº <strong>CDN ç›´æ¥å¼•å…¥</strong>ï¼Œå¦‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/lodash/lodash.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h2 id="2-ç¼–è¯‘å·¥å…·"><a href="#2-ç¼–è¯‘å·¥å…·" class="headerlink" title="2. ç¼–è¯‘å·¥å…·"></a>2. ç¼–è¯‘å·¥å…·</h2><p>ç»„ä»¶åº“æºç ä¸€èˆ¬ä½¿ç”¨ <strong>TypeScript (TS)</strong> å’Œ <strong>JSX</strong>ï¼Œéœ€è¦è½¬æ¢æˆæµè§ˆå™¨æˆ– Node.js å¯è¿è¡Œçš„ JavaScriptã€‚è¿™é‡Œæ¶‰åŠä¸¤ä¸ªé‡è¦å·¥å…·ï¼š</p><ol><li><p><strong>Babel</strong></p><ul><li><p>ä¸»è¦ç”¨äº <strong>ES6+ è¯­æ³•è½¬æ¢</strong>ï¼Œè®©æ–°è¯­æ³•å…¼å®¹è€æµè§ˆå™¨ã€‚</p></li><li><p>ç»„ä»¶åº“é€šå¸¸ç”¨å®ƒæ¥ç¼–è¯‘ ESM å’Œ CJS ä»£ç ï¼ˆå³ <code>es</code> å’Œ <code>lib</code> ç›®å½•ï¼‰ã€‚</p></li><li><p>é…ç½®ç¤ºä¾‹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;@babel/preset-env&quot;</span><span class="punctuation">,</span> <span class="string">&quot;@babel/preset-react&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li><li><p>ä½œç”¨ï¼š</p><ul><li>æŠŠ JSX è½¬æ¢æˆ <code>React.createElement()</code> è¯­æ³•</li><li>æŠŠ ES6+ ä»£ç è½¬æ¢æˆæ›´ä½ç‰ˆæœ¬çš„ JavaScript</li></ul></li></ul></li><li><p><strong>TSCï¼ˆTypeScript Compilerï¼‰</strong></p><ul><li>TypeScript è‡ªå¸¦çš„ç¼–è¯‘å™¨ï¼Œ<strong>ä¸»è¦ç”¨äºç±»å‹æ£€æŸ¥</strong>å’Œ<strong>ä»£ç è½¬æ¢</strong>ã€‚</li><li>å¯ä»¥ç›´æ¥ç¼–è¯‘ TypeScript åˆ° JavaScriptï¼Œä¸è´Ÿè´£è½¬æ¢æ–°è¯­æ³•ï¼ˆæ¯”å¦‚ JSXï¼‰ã€‚</li><li>ç»„ä»¶åº“é€šå¸¸ç”¨å®ƒæ¥ç¼–è¯‘ TypeScript å¹¶ç”Ÿæˆ <code>.d.ts</code> ç±»å‹å£°æ˜æ–‡ä»¶ã€‚</li></ul></li></ol><hr><h2 id="3-æ‰“åŒ…å·¥å…·"><a href="#3-æ‰“åŒ…å·¥å…·" class="headerlink" title="3. æ‰“åŒ…å·¥å…·"></a>3. æ‰“åŒ…å·¥å…·</h2><p>æ‰“åŒ…å·¥å…·çš„ç›®çš„æ˜¯<strong>å°†ä»£ç è½¬æ¢æˆä¸åŒçš„æ¨¡å—æ ¼å¼ï¼ˆCJSã€ESMã€UMDï¼‰</strong>ï¼Œåšå®¢ä¸­æåˆ°äº†ä»¥ä¸‹ä¸¤ç§å·¥å…·ï¼š</p><ol><li><p><strong>Webpack</strong></p><ul><li><p>ä¸»è¦ç”¨äºæ‰“åŒ… <strong>UMD</strong> ä»£ç ï¼Œé€šå¸¸ç”¨äº<strong>æµè§ˆå™¨ç«¯</strong>çš„ç»„ä»¶åº“ã€‚</p></li><li><p>ä¾‹å¦‚ï¼š</p><ul><li>ä½ æƒ³å‘å¸ƒä¸€ä¸ª UI ç»„ä»¶åº“ï¼Œå¹¶è®©åˆ«äººç›´æ¥ç”¨ <code>&lt;script&gt;</code> å¼•å…¥ï¼Œè¿™å°±éœ€è¦ Webpack ç”Ÿæˆ UMD ç‰ˆæœ¬ã€‚</li></ul></li><li><p>å…¸å‹é…ç½®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">library</span>: <span class="string">&quot;MyLibrary&quot;</span>,</span><br><span class="line">    <span class="attr">libraryTarget</span>: <span class="string">&quot;umd&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>Gulp</strong></p><ul><li><p>ä»»åŠ¡è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå¸¸ç”¨äº<strong>ç¼–æ’å¤šä¸ªç¼–è¯‘ä»»åŠ¡</strong>ã€‚</p></li><li><p>ä¾‹å¦‚ï¼šå…ˆç”¨ TSC ç¼–è¯‘ï¼Œå†ç”¨ Babel å¤„ç†ã€‚</p></li><li><p>å…¸å‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;build-cjs&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;src/**/*.ts&#x27;</span>).<span class="title function_">pipe</span>(<span class="title function_">tsc</span>()).<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;lib&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;build-esm&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> gulp.<span class="title function_">src</span>(<span class="string">&#x27;src/**/*.ts&#x27;</span>).<span class="title function_">pipe</span>(<span class="title function_">babel</span>()).<span class="title function_">pipe</span>(gulp.<span class="title function_">dest</span>(<span class="string">&#x27;es&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.<span class="title function_">task</span>(<span class="string">&#x27;default&#x27;</span>, gulp.<span class="title function_">parallel</span>(<span class="string">&#x27;build-cjs&#x27;</span>, <span class="string">&#x27;build-esm&#x27;</span>));</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h2 id="4-ç»„ä»¶åº“çš„æ„å»ºæµç¨‹"><a href="#4-ç»„ä»¶åº“çš„æ„å»ºæµç¨‹" class="headerlink" title="4. ç»„ä»¶åº“çš„æ„å»ºæµç¨‹"></a>4. ç»„ä»¶åº“çš„æ„å»ºæµç¨‹</h2><p>ç°åœ¨ï¼Œæˆ‘ä»¬å›åˆ°åšå®¢çš„æ ¸å¿ƒå†…å®¹ï¼š<strong>Ant Designã€Arco Designã€Semi Design ç»„ä»¶åº“æ˜¯å¦‚ä½•æ‰“åŒ…çš„ï¼Ÿ</strong></p><h3 id="1ï¸âƒ£-ç›®å½•ç»“æ„"><a href="#1ï¸âƒ£-ç›®å½•ç»“æ„" class="headerlink" title="1ï¸âƒ£ ç›®å½•ç»“æ„"></a>1ï¸âƒ£ ç›®å½•ç»“æ„</h3><p>åšå®¢åˆ†æäº† <code>antd</code>ã€<code>semi-ui</code>ã€<code>arco-design</code> çš„ <code>node_modules</code> ç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lib/   --&gt; CJS æ ¼å¼</span><br><span class="line">es/    --&gt; ESM æ ¼å¼</span><br><span class="line">dist/  --&gt; UMD æ ¼å¼</span><br></pre></td></tr></table></figure><p>è¿™æ„å‘³ç€ï¼š</p><ul><li><strong>libï¼ˆCommonJSï¼‰</strong> ç”¨äº Node.js</li><li><strong>esï¼ˆES Modulesï¼‰</strong> ç”¨äºå‰ç«¯æ‰“åŒ…</li><li><strong>distï¼ˆUMDï¼‰</strong> ç”¨äº <code>&lt;script&gt;</code> å¼•å…¥</li></ul><h3 id="2ï¸âƒ£-æ„å»ºè¿‡ç¨‹"><a href="#2ï¸âƒ£-æ„å»ºè¿‡ç¨‹" class="headerlink" title="2ï¸âƒ£ æ„å»ºè¿‡ç¨‹"></a>2ï¸âƒ£ æ„å»ºè¿‡ç¨‹</h3><p>åšå®¢ä¸­çš„ <strong>Arco Design</strong> ä¾‹å­è¯´æ˜äº†ç»„ä»¶åº“å¦‚ä½•æ‰“åŒ…ï¼š</p><ol><li><p><strong>ESM å’Œ CJS ä»£ç </strong></p><ul><li><p>å…ˆç”¨ <strong>TSC æˆ– Babel</strong> ç¼–è¯‘ <code>tsx</code> å’Œ <code>ts</code></p></li><li><p><code>TSC</code> è´Ÿè´£ <strong>ç±»å‹æ£€æŸ¥</strong></p></li><li><p><code>Babel</code> è´Ÿè´£ <strong>è½¬æ¢æ–°è¯­æ³•ï¼ˆå¦‚ JSXï¼‰</strong></p></li><li><p>äº§ç‰©å­˜æ”¾åœ¨ <code>lib/</code>ï¼ˆCJSï¼‰ å’Œ <code>es/</code>ï¼ˆESMï¼‰</p></li><li><p>å…³é”®ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">compileTS</span>(<span class="string">&quot;es&quot;</span>); <span class="comment">// ç”Ÿæˆ ESM</span></span><br><span class="line"><span class="title function_">compileTS</span>(<span class="string">&quot;cjs&quot;</span>); <span class="comment">// ç”Ÿæˆ CJS</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>UMD ä»£ç </strong></p><ul><li><p>ç”¨ Webpack æ‰“åŒ…æˆ <code>dist/</code></p></li><li><p>ä¸»è¦ç”¨äº <code>unpkg</code>ï¼ˆCDNï¼‰å¼•å…¥</p></li><li><p>å…³é”®ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">webpack</span>(&#123; <span class="attr">output</span>: &#123; <span class="attr">libraryTarget</span>: <span class="string">&quot;umd&quot;</span> &#125; &#125;);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>CSS å¤„ç†</strong></p><ul><li>Arco ç”¨ <strong>Less</strong></li><li>Semi Design ç”¨ <strong>SCSS</strong></li><li>é€šè¿‡ <code>gulp</code> ç¼–è¯‘</li></ul></li></ol><hr><h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><ol><li><strong>ä¸ºä»€ä¹ˆç»„ä»¶åº“è¦æ”¯æŒä¸åŒæ¨¡å—æ ¼å¼ï¼Ÿ</strong><ul><li>ESMï¼ˆES6 æ¨¡å—ï¼‰é€‚ç”¨äºç°ä»£å‰ç«¯æ‰“åŒ…å·¥å…·ï¼ˆå¦‚ Webpackã€Viteï¼‰</li><li>CJSï¼ˆCommonJSï¼‰é€‚ç”¨äº Node.js ç¯å¢ƒ</li><li>UMDï¼ˆé€šç”¨æ¨¡å—ï¼‰é€‚ç”¨äº <code>&lt;script&gt;</code> å¼•å…¥ï¼ˆCDNï¼‰</li></ul></li><li><strong>ç»„ä»¶åº“çš„ç¼–è¯‘è¿‡ç¨‹</strong><ul><li><strong>ESM å’Œ CJS</strong> â†’ TSC æˆ– Babel ç¼–è¯‘</li><li><strong>UMD</strong> â†’ Webpack æ‰“åŒ…</li><li><strong>CSS</strong> â†’ Gulp + Less&#x2F;SCSS å¤„ç†</li></ul></li><li><strong>å¸¸è§å·¥å…·</strong><ul><li><strong>Babel</strong>ï¼šè¯­æ³•è½¬æ¢ï¼ˆJSXã€ES6+ï¼‰</li><li><strong>TSC</strong>ï¼šTypeScript ç¼–è¯‘</li><li><strong>Webpack</strong>ï¼šUMD æ‰“åŒ…</li><li><strong>Gulp</strong>ï¼šä»»åŠ¡ç®¡ç†</li></ul></li></ol><hr><p>ä½ å¯ä»¥è¿™æ ·ç†è§£ï¼š</p><ul><li><strong>TSC</strong> å’Œ <strong>Babel</strong> æ˜¯è´Ÿè´£ <strong>ç¼–è¯‘</strong></li><li><strong>Webpack</strong> æ˜¯è´Ÿè´£ <strong>æ‰“åŒ…</strong></li><li><strong>Gulp</strong> æ˜¯è´Ÿè´£ <strong>ç»„ç»‡ä»»åŠ¡</strong></li></ul><p>çœ‹å®Œè¿™ç¯‡åšå®¢åï¼Œä½ å¯ä»¥å°è¯•è‡ªå·±åˆ›å»ºä¸€ä¸ªç®€å•çš„ React ç»„ä»¶åº“ï¼Œç„¶åä½¿ç”¨ Babelã€TSCã€Webpack è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œè¿™æ ·å°±èƒ½æ›´ç›´è§‚åœ°ç†è§£è¿™äº›æ¦‚å¿µï¼ğŸš€</p><h1 id="ç»„ä»¶åº“æ˜¯æ€ä¹ˆæ„å»ºçš„"><a href="#ç»„ä»¶åº“æ˜¯æ€ä¹ˆæ„å»ºçš„" class="headerlink" title="ç»„ä»¶åº“æ˜¯æ€ä¹ˆæ„å»ºçš„"></a>ç»„ä»¶åº“æ˜¯æ€ä¹ˆæ„å»ºçš„</h1><p>æ¥æºï¼š<a href="https://juejin.cn/book/7294082310658326565?utm_source=profile_book">React é€šå…³ç§˜ç± - zxg_ç¥è¯´è¦æœ‰å…‰ - æ˜é‡‘å°å†Œ</a></p><h2 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h2><p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir component-lib-test</span><br><span class="line"></span><br><span class="line">cd component-lib-test</span><br><span class="line"></span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«å®‰è£… ant-designã€arco-designã€semi-design</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pnpm install antd</span><br><span class="line"></span><br><span class="line">pnpm install @douyinfe/semi-ui</span><br><span class="line"></span><br><span class="line">pnpm install @arco-design/web-react</span><br></pre></td></tr></table></figure><p>npmã€yarn ä¼šæŠŠæ‰€æœ‰ä¾èµ–é“ºå¹³ï¼Œçœ‹ç€æ¯”è¾ƒä¹±ã€‚è€Œ pnpm ä¸ä¼šï¼Œnode_modules ä¸‹å¾ˆæ¸…æ™°ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/2518899cadff43fdb64faceedec43ee0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="antd"><a href="#antd" class="headerlink" title="antd"></a>antd</h3><p>é¦–å…ˆçœ‹ä¸‹ antdï¼Œåˆ†ä¸ºäº† libã€esã€dist 3 ä¸ªç›®å½•ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/b9d31fa31d0148ff8d2598bb3c14d5a8tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åˆ†åˆ«çœ‹ä¸‹è¿™ä¸‰ä¸ªç›®å½•çš„ç»„ä»¶ä»£ç ï¼š</p><p>lib ä¸‹çš„ç»„ä»¶æ˜¯ commonjs çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4f56b42587074655afebf0a555b33981tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>es ä¸‹çš„ç»„ä»¶æ˜¯ es module çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/9131c1971860413a8780a8f4f125a348tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>dist ä¸‹çš„ç»„ä»¶æ˜¯ umd çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4d1c9f6af12d4d0fb72ea940c1a2fca3tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç„¶ååœ¨ package.json é‡Œåˆ†åˆ«å£°æ˜äº† commonjsã€esmã€umd è¿˜æœ‰ç±»å‹çš„å…¥å£ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/dd5451ec3cec426abe12b886d54f2072tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œå½“ä½ ç”¨ require å¼•å…¥çš„å°±æ˜¯ lib ä¸‹çš„ç»„ä»¶ï¼Œç”¨ import å¼•å…¥çš„å°±æ˜¯ es ä¸‹çš„ç»„ä»¶ã€‚</p><p>è€Œç›´æ¥ script æ ‡ç­¾å¼•å…¥çš„å°±æ˜¯ unpkg ä¸‹çš„ç»„ä»¶ã€‚</p><h3 id="arco-design"><a href="#arco-design" class="headerlink" title="arco-design"></a>arco-design</h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a5a97361868947e4b35e34d9be8522bftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä¹Ÿæ˜¯ä¸€æ ·ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1b6d6297540244909e19c92e61a1a30etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åŒæ ·æ˜¯ libã€esã€dist 3 ä¸ªç›®å½•ï¼ŒåŒæ ·æ˜¯åˆ†åˆ«å£°æ˜äº† esmã€commonjsã€umd çš„å…¥å£ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç»„ä»¶åº“éƒ½æ˜¯è¿™æ ·çš„ï¼Œåˆ†åˆ«æ‰“åŒ…å‡º 3 ä»½ä»£ç ï¼ˆesmã€commonjsã€umdï¼‰ï¼Œç„¶ååœ¨ package.json é‡Œå£°æ˜ä¸åŒæ¨¡å—è§„èŒƒçš„å…¥å£ã€‚</p><p>é‚£é—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æœ‰ä¸€ä¸ª esm çš„æ¨¡å—ï¼Œæ€ä¹ˆåˆ†åˆ«æ„å»ºå‡º esmã€commonjsã€umd çš„ 3 ä»½ä»£ç å‘¢ï¼Ÿ</p><p>è¿™ä¸ªé—®é¢˜å¾ˆå®¹æ˜“å›ç­”ã€‚</p><p>umd çš„ä»£ç ç”¨ webpack æ‰“åŒ…å°±è¡Œã€‚</p><p>esm å’Œ commonjs çš„ä¸ç”¨æ‰“åŒ…ï¼Œåªéœ€è¦ç”¨ tsc æˆ–è€… babel ç¼–è¯‘ä¸‹å°±å¥½äº†ã€‚</p><p>æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸‹è¿™ä¸‰ä¸ªç»„ä»¶åº“éƒ½æ˜¯æ€ä¹ˆåšçš„ï¼š</p><h2 id="æ„å»ºé€»è¾‘"><a href="#æ„å»ºé€»è¾‘" class="headerlink" title="æ„å»ºé€»è¾‘"></a>æ„å»ºé€»è¾‘</h2><h3 id="arco-design-1"><a href="#arco-design-1" class="headerlink" title="arco-design"></a>arco-design</h3><p>å®ƒçš„æ„å»ºé€»è¾‘åœ¨ arco-cli çš„ arco-scripts ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/9f40fa37835947739ce6310737dee358tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹ä¸‹è¿™ä¸ª index.ts</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/464b9ddf94e54cad8e8572f1aa04a83btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åˆ†åˆ«æœ‰ build 3 ç§ä»£ç åŠ ä¸Š build css çš„æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/599c297c759c44d5bbfc7f1bdd82ec3etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>esm å’Œ cjs çš„ç¼–è¯‘å®ƒå°è£…äº†ä¸€ä¸ª compileTS çš„æ–¹æ³•ï¼Œç„¶åä¼ å…¥ä¸åŒçš„ typeã€‚</p><p>compileTS é‡Œå¯ä»¥ç”¨ tsc æˆ–è€… babel ç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/c882faab79824713b543cac586a9a692tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>tsc ç¼–è¯‘å°±æ˜¯è¯»å–é¡¹ç›®ä¸‹çš„ tsconfig.jsonï¼Œç„¶å compileï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/544d9ed3a99e48449c3f3618ba086a60tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>babel ç¼–è¯‘æ˜¯åŸºäºå†…ç½®é…ç½®ï¼Œä¿®æ”¹äº†ä¸‹äº§ç‰© modules è§„èŒƒï¼Œç„¶åç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a9ff5c33f81b42938306db453d565c25tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>babelConfig é‡Œé…ç½®äº† typescript å’Œ jsx çš„ç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/fe52600ebb9844798f95095e947be7b4tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å†å°±æ˜¯umd</p><p>å’Œæˆ‘ä»¬åˆ†æçš„ä¸€æ ·ï¼Œç¡®å®æ˜¯ç”¨ webpack æ¥æ‰“åŒ…ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/deabc8d5960241e38238001735c996detplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>webpack é…ç½®é‡Œå¯ä»¥çœ‹åˆ°ï¼Œç¡®å®æ˜¯ä¸ºäº† unpkg å‡†å¤‡çš„ï¼Œç”¨äº† ts-loader å’Œ babel-loaderï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f4c31bb57f8d46b8882385014d999469tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è€Œ css éƒ¨åˆ†åˆ™æ˜¯ç”¨äº† less ç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/fc6883ed9ca540a193755ad088cd9e02tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>gulp æ˜¯ç”¨æ¥ç»„ç»‡ç¼–è¯‘ä»»åŠ¡çš„ï¼Œå¯ä»¥è®©ä»»åŠ¡ä¸²è¡Œã€å¹¶è¡Œçš„æ‰§è¡Œã€‚</p><p>è¿™é‡Œçš„ gulp.series å°±æ˜¯ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œè€Œ gulp.parallel åˆ™æ˜¯å¹¶è¡Œã€‚</p><p>æ‰€ä»¥è¯´ï¼Œé‚£ 3 ç§ä»£ç åŠ ä¸Š css æ–‡ä»¶æ˜¯æ€ä¹ˆæ‰“åŒ…çš„å°±å¾ˆæ¸…æ™°äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/e2d58b5ec46c4a7198300816482e9296tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å…¶ä¸­ç”¨åˆ° gulp åªæ˜¯ç”¨æ¥ç»„ç»‡ç¼–è¯‘ä»»åŠ¡çš„ï¼Œå¯ç”¨å¯ä¸ç”¨ã€‚</p><h3 id="semi-design"><a href="#semi-design" class="headerlink" title="semi-design"></a>semi-design</h3><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/46d142b5319b424986b46903113028adtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®ƒå°±æ²¡æœ‰å•ç‹¬åˆ†ä¸€ä¸ª xx-scripts åŒ…äº†ï¼Œç›´æ¥åœ¨ semi-ui çš„ scripts ç›®å½•ä¸‹ã€‚</p><p>å®ƒä¹Ÿæ˜¯ç”¨åˆ°äº† gulp æ¥ç»„ç»‡ä»»åŠ¡ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a98951609214496db0164e8b6e8ab50dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹ä¸‹è¿™ä¸ª compileLib çš„ gulp taskï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/eed4837772aa4796ac8022d1ffa3d2c5tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™é‡Œçš„ compileTSXForESM å’Œ ForCJS å¾ˆæ˜æ˜¾å°±æ˜¯ç¼–è¯‘ç»„ä»¶åˆ° esm å’Œ cjs ä¸¤ç§ä»£ç çš„ã€‚</p><p>å…ˆç”¨äº† tsc ç¼–è¯‘å†ç”¨äº† babel ç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a362b4f31d464986b473b03216320f0etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç„¶åæ˜¯ umdï¼Œä¹Ÿæ˜¯ç”¨äº† webpackï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4cd9ced7af554c68aca8a33a189207f4tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç”¨äº† babel-loader å’Œ ts-loaderï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/87ee46bf694e4e6c9b4036b981e70ab1tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æœ€åæ˜¯ scss çš„ç¼–è¯‘ï¼š</p><p>semi-design æŠŠæ‰€æœ‰ç»„ä»¶çš„ scss éƒ½æ”¾åœ¨äº† semi-foundation è¿™ä¸ªç›®å½•ä¸‹æ¥ç»´æŠ¤ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/11215467f35a4e388189dde9d9689bbftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ‰€ä»¥ç¼–è¯‘çš„æ—¶å€™å°±æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4ad183672faf44a9b1963097df6e1482tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å°±æ˜¯æŠŠ semi-foundation è¿™ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰ scss ç¼–è¯‘ååˆå¹¶æˆäº†ä¸€ä¸ªæ–‡ä»¶</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/ca98599a49f64196a76d3d7303a0cf86tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è€Œ arco-design çš„æ ·å¼æ˜¯åœ¨ç»„ä»¶ç›®å½•ä¸‹ç»´æŠ¤çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/64a91aeca77a40799523ecbff92e618etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™ä¸ªå€’æ˜¯æ²¡å•¥å¤§çš„åŒºåˆ«ï¼Œåªæ˜¯ç¼–è¯‘çš„æ—¶å€™æ”¹ä¸‹æºç ç›®å½•å°±å¥½äº†ã€‚</p><p>è¿™å°±æ˜¯ semi-design çš„ esmã€cjsã€umdã€scss æ˜¯å¦‚ä½•ç¼–è¯‘æ‰“åŒ…çš„ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/0c382fd5d7ac42e48512926719eca0f3tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å’Œ arco-design çš„ scripts åŒºåˆ«å¤§ä¹ˆï¼Ÿ</p><p>ä¸å¤§ï¼Œåªä¸è¿‡æ²¡æœ‰å•ç‹¬åšä¸€ä¸ª xxx-scripts çš„åŒ…ï¼Œç¼–è¯‘å‡º esm å’Œ cjs ä»£ç ç”¨çš„æ˜¯ tsc + babelï¼Œè€Œä¸”ç”¨çš„æ˜¯ scss ä¸æ˜¯ less è€Œå·²ã€‚</p><h3 id="ant-design"><a href="#ant-design" class="headerlink" title="ant-design"></a>ant-design</h3><p>å®ƒä¹Ÿæ˜¯å•ç‹¬åˆ†äº†ä¸€ä¸ªåŒ…æ¥ç»´æŠ¤ç¼–è¯‘æ‰“åŒ…çš„ scriptsï¼Œå«åš @ant-design&#x2F;toolsã€‚</p><p>å®ƒä¹Ÿæœ‰ä¸ª gulpfile å®šä¹‰äº†å¾ˆå¤š task</p><p>æ¯”å¦‚ compile çš„ task æ˜¯ç¼–è¯‘å‡º es å’Œ cjs ä»£ç çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/3db8648376c0448199706830821956e4tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰çš„æ„Ÿè§‰ï¼Ÿ</p><p>å¤§å®¶éƒ½æ˜¯è¿™ä¹ˆæçš„ã€‚</p><p>å®ƒä¹Ÿæ˜¯å…ˆç”¨äº† tsc å†ç”¨ babel ç¼–è¯‘ï¼Œæœ€åè¾“å‡ºåˆ° es æˆ–è€… lib ç›®å½•ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/c363942819694561bacd19aad8defa25tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ‰“åŒ… umd ä»£ç çš„æ—¶å€™ä¹Ÿæ˜¯ç”¨äº† webpackï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/32f22bd04278441abae85cdf9cfd3cb8tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åªä¸è¿‡å®ƒè¿™ä¸ª webpack é…ç½®æ–‡ä»¶æ˜¯è¯»å–çš„ç»„ä»¶åº“é¡¹ç›®ç›®å½•ä¸‹çš„ï¼Œè€Œä¸åƒ arco-design é‚£æ ·æ˜¯å†…ç½®çš„ã€‚</p><p>è¿™å°±æ˜¯è¿™ä¸‰ä¸ªç»„ä»¶åº“çš„ç¼–è¯‘æ‰“åŒ…çš„é€»è¾‘ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬åˆ†æäº† ant-designã€semi-designã€arco-design ç»„ä»¶åº“çš„äº§ç‰©å’Œç¼–è¯‘æ‰“åŒ…é€»è¾‘ã€‚</p><p>å®ƒä»¬éƒ½æœ‰ libã€esã€dist ç›®å½•ï¼Œåˆ†åˆ«æ”¾ç€ commonjsã€es moduleã€umd è§„èŒƒçš„ç»„ä»¶ä»£ç ã€‚</p><p>å¹¶ä¸”åœ¨ package.json é‡Œç”¨ mainã€moduleã€unpkg æ¥å£°æ˜äº† 3 ç§è§„èŒƒçš„å…¥å£ã€‚</p><p>ä»äº§ç‰©ä¸Šæ¥çœ‹ï¼Œä¸‰ä¸ªç»„ä»¶åº“éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚</p><p>ç„¶åæˆ‘ä»¬åˆ†æäº†ä¸‹ç¼–è¯‘æ‰“åŒ…çš„é€»è¾‘ã€‚</p><p>ant-design å’Œ acro-design éƒ½æ˜¯å•ç‹¬æŠ½äº†ä¸€ä¸ªæ”¾ scripts çš„åŒ…ï¼Œè€Œ semi-design æ²¡æœ‰ã€‚</p><p>å®ƒä»¬ç¼–è¯‘ esm å’Œ cjs ä»£ç éƒ½ç”¨äº† babel å’Œ tsc æ¥ç¼–è¯‘ï¼Œåªä¸è¿‡ arco-design æ˜¯ç”¨ tsc æˆ–è€… babel äºŒé€‰ä¸€ï¼Œè€Œ ant-design å’Œ semi-design æ˜¯å…ˆç”¨ tsc ç¼–è¯‘å†ç”¨ babel ç¼–è¯‘ã€‚</p><p>æ‰“åŒ…å‡º umd çš„ä»£ç ï¼Œä¸‰ä¸ªç»„ä»¶åº“éƒ½æ˜¯ç”¨çš„ webpackï¼Œåªä¸è¿‡æœ‰çš„æ˜¯æŠŠ webpack é…ç½®å†…ç½®äº†ï¼Œæœ‰çš„æ˜¯æ”¾åœ¨ç»„ä»¶åº“é¡¹ç›®ç›®å½•ä¸‹ã€‚</p><p>è€Œæ ·å¼éƒ¨åˆ†ï¼Œant-design æ˜¯ç”¨ css-in-js çš„è¿è¡Œæ—¶æ–¹æ¡ˆäº†ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œè€Œ arco-design ç”¨çš„ lessï¼Œæ ·å¼æ”¾ç»„ä»¶ç›®å½•ä¸‹ç»´æŠ¤ï¼Œsemi-design ç”¨çš„ scssï¼Œå•ç‹¬ä¸€ä¸ªç›®å½•æ¥æ”¾æ‰€æœ‰ç»„ä»¶æ ·å¼ã€‚</p><p>å¹¶ä¸”ç¼–è¯‘ä»»åŠ¡éƒ½æ˜¯ç”¨çš„ gulp æ¥ç»„ç»‡çš„ï¼Œå®ƒå¯ä»¥ä¸²è¡Œã€å¹¶è¡Œçš„æ‰§è¡Œä¸€äº›ä»»åŠ¡ã€‚</p><p>è™½ç„¶æœ‰ä¸€äº›ç»†å°çš„å·®åˆ«ï¼Œä½†ä»æ•´ä½“ä¸Šæ¥çœ‹ï¼Œè¿™ä¸‰å¤§ç»„ä»¶åº“çš„ç¼–è¯‘æ‰“åŒ…é€»è¾‘å¯ä»¥è¯´æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚</p><p>å†™è¿™æ ·çš„ scripts éº»çƒ¦ä¹ˆï¼Ÿ</p><p>å¹¶ä¸éº»çƒ¦ï¼Œumd éƒ¨åˆ†çš„ webpack æ‰“åŒ…å¤§å®¶éƒ½ä¼šï¼Œè€Œ esm å’Œ cjs ç”¨ babel æˆ–è€… tsc ç¼–è¯‘ä¹Ÿä¸éš¾ï¼Œè‡³äº scssã€less éƒ¨åˆ†ï¼Œé‚£ä¸ªå°±æ›´ç®€å•äº†ã€‚</p><p>æ‰€ä»¥ç¼–è¯‘æ‰“åŒ…å¹¶ä¸æ˜¯ç»„ä»¶åº“çš„éš¾ç‚¹ã€‚</p><p>å¦‚æœä½ è¦å†™ä¸€ä¸ªç»„ä»¶åº“ï¼Œä¹Ÿå¯ä»¥è¿™æ ·æ¥å†™ scriptsã€‚</p><h1 id="æ„å»ºesmå’Œcjså¹¶å‘å¸ƒæµç¨‹"><a href="#æ„å»ºesmå’Œcjså¹¶å‘å¸ƒæµç¨‹" class="headerlink" title="æ„å»ºesmå’Œcjså¹¶å‘å¸ƒæµç¨‹"></a>æ„å»ºesmå’Œcjså¹¶å‘å¸ƒæµç¨‹</h1><p>æ¥æºï¼š<a href="https://juejin.cn/book/7294082310658326565?utm_source=profile_book">React é€šå…³ç§˜ç± - zxg_ç¥è¯´è¦æœ‰å…‰ - æ˜é‡‘å°å†Œ</a></p><p>æˆ‘ä»¬å·²ç»å†™äº†å¾ˆå¤šç»„ä»¶äº†ï¼Œæ¯”å¦‚ Calendarã€Watermarkã€OnBoarding ç­‰ï¼Œä½†éƒ½æ˜¯ç”¨ cra æˆ–è€… vite å•ç‹¬åˆ›å»ºé¡¹ç›®æ¥å†™çš„ã€‚</p><p>è¿™èŠ‚æˆ‘ä»¬æŠŠå®ƒä»¬æ•´åˆä¸€ä¸‹ï¼ŒåŠ ä¸Šæ„å»ºè„šæœ¬ï¼Œå‘å¸ƒåˆ° npmï¼Œåšæˆå’Œ Ant Design ä¸€æ ·çš„ç»„ä»¶åº“ã€‚</p><p>ç»„ä»¶åº“çš„æ„å»ºæˆ‘ä»¬ä¸ŠèŠ‚åˆ†æè¿‡ï¼Œå°±æ˜¯æ„å»ºå‡º esmã€commonjsã€umd 3 ç§æ ¼å¼çš„ä»£ç ï¼Œå†åŠ ä¸Š css çš„æ„å»ºå°±å¥½äº†ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/14e1ff13fc1f4a13afdad3e11ffd8ad0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ant designã€arco designã€semi design éƒ½æ˜¯è¿™æ ·ã€‚</p><p>æˆ‘ä»¬å†çœ‹å‡ ä¸ªç»„ä»¶åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir tmp</span><br><span class="line">cd tmp</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/5b287c628ff8412cbd25effdf6eb8a84tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®‰è£… react-bootstrapï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install react-bootstrap</span><br></pre></td></tr></table></figure><p>ï¼ˆç”¨ pnpm å®‰è£…ï¼Œnode_modules ä¸‹ç›®å½•æ¯”è¾ƒç®€æ´ï¼‰</p><p>çœ‹ä¸‹ node_modules&#x2F;react-bootstrap çš„ package.json</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/12de8d4e32cc491180ab049c065d52f9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä¹Ÿæœ‰ main å’Œ moduleï¼Œä¹Ÿå°±æ˜¯ commonjs å’Œ es module ä¸¤ç§å…¥å£ã€‚</p><p>å½“ä½  import çš„æ—¶å€™ï¼Œå¼•å…¥çš„æ˜¯ esm çš„ä»£ç ã€‚</p><p>å½“ä½  require çš„æ—¶å€™ï¼Œå¼•å…¥çš„æ˜¯ commonjs çš„ä»£ç ã€‚</p><p>çœ‹ä¸€ä¸‹ esm å’Œ cjs ä¸‹çš„ä»£ç ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d83083918483470eb625884bc39aaf32tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/624a5483b42a42e286c92f2eda5d6a96tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å½“ç„¶ï¼Œå®ƒä¹Ÿæ˜¯æ”¯æŒ umd çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/573c5142ddc04484aa389d0a3287aab2tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹ä¸‹ <a href="https://github.com/react-bootstrap/react-bootstrap/blob/master/tools/build.js#L101-L103">build è„šæœ¬</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d0d1707bb9cf4cd09530d475ac783bf5tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å°±æ˜¯åˆ†åˆ«ç”¨ babel ç¼–è¯‘å‡º commonjs å’Œ esm çš„ä»£ç å°±å¯ä»¥äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d594710dee8c4743b1d5a264c3f96e55tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç”¨ tsc ä¹Ÿè¡Œã€‚</p><p>umd æ ¼å¼ä»£ç ä¹ŸåŒæ ·æ˜¯ <a href="https://github.com/react-bootstrap/react-bootstrap/blob/master/tools/build.js#L64">webpack æ‰“åŒ…çš„</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d1f83b9f340845bfa495b66b680965bctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä¸åŒäº antdã€arco design å’Œ semi designï¼Œå®ƒå°±æ²¡æœ‰ç”¨ gulp æ¥ç»„ç»‡æµç¨‹ã€‚</p><p>gulp æœ¬æ¥å°±ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ç”¨å¯ä¸ç”¨ã€‚</p><p>ç”šè‡³è¿å•ç‹¬çš„è„šæœ¬éƒ½ä¸éœ€è¦ï¼Œç›´æ¥ tsc ç¼–è¯‘å°±è¡Œï¼š</p><p>æ¯”å¦‚è¿™ä¸ª <a href="https://github.com/palantir/blueprint/blob/develop/packages/table/package.json#L22-L25">blueprint ç»„ä»¶åº“</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a75449789fd64820bd34141386dd2718tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä¹‹å‰æ€»ç»“çš„ç»„ä»¶åº“çš„æ„å»ºæµç¨‹æ˜¯æ²¡é—®é¢˜çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/14e1ff13fc1f4a13afdad3e11ffd8ad0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h2 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h2><p>ç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®æ¥è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-vite guang-components</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/3d79184681c64173ba6bfed6081bd659tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿›å…¥é¡¹ç›®ï¼Œå¤åˆ¶å‡ ä¸ªä¹‹å‰çš„ç»„ä»¶è¿‡æ¥ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/5a3e9a1ecc1c436f921b362524380480tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/00927eb51a1a4688a85cc55b483e01e1tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/8280c32caddc4db58d5c479f91646ae2tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¤åˆ¶ Calendarã€Watermarkã€Message è¿™ä¸‰ä¸ªç»„ä»¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/592fb63501b44f6eb7d487609c5c56d6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç„¶åå®‰è£…ä¸‹ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line"></span><br><span class="line">npm install --save react-transition-group lodash-es dayjs classnames</span><br><span class="line"></span><br><span class="line">npm i --save-dev @types/react-transition-group</span><br></pre></td></tr></table></figure><p>ç„¶åå»æ‰ Calendar å’Œ Message ç»„ä»¶é‡Œæ ·å¼çš„å¼•å…¥ï¼Œcss å’Œ js æ˜¯åˆ†å¼€ç¼–è¯‘çš„ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/ceab8ad1b843405192db61d70a238ae2tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f25f4b5fb2984058b488ed835ab31b40tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æŠŠè¿™äº›æ²¡ç”¨çš„æ–‡ä»¶åˆ æ‰ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/cd79546307b24a6d8a23c44db7b60b59tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åŠ ä¸€ä¸ª index.ts æ¥å¯¼å‡ºç»„ä»¶ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1b7720468849400a8b2e56e43d68b153tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Calendar</span>, &#123; <span class="title class_">CalendarProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Calendar&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Watermark</span>, &#123; <span class="title class_">WatermarkProps</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Watermark&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">MessageProps</span>, <span class="title class_">Position</span>, <span class="title class_">MessageRef</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;./Message&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;./Message/useMessage&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Message/ConfigProvider&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">    <span class="title class_">Calendar</span>,</span><br><span class="line">    <span class="title class_">Watermark</span>,</span><br><span class="line">    <span class="title class_">ConfigProvider</span>,</span><br><span class="line">    useMessage</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type &#123;</span><br><span class="line">    <span class="title class_">CalendarProps</span>,</span><br><span class="line">    <span class="title class_">WatermarkProps</span>,</span><br><span class="line">    <span class="title class_">MessageProps</span>,</span><br><span class="line">    <span class="title class_">Position</span>,</span><br><span class="line">    <span class="title class_">MessageRef</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ·»åŠ ç¼–è¯‘"><a href="#æ·»åŠ ç¼–è¯‘" class="headerlink" title="æ·»åŠ ç¼–è¯‘"></a>æ·»åŠ ç¼–è¯‘</h2><p>æ¥ä¸‹æ¥åŠ ä¸Š tsc å’Œ sass çš„ç¼–è¯‘ï¼š</p><p>æ·»åŠ ä¸€ä¸ª tsconfig.build.json çš„é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;compilerOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;declaration&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;es2015&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;lib&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;ES2020&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM&quot;</span><span class="punctuation">,</span> <span class="string">&quot;DOM.Iterable&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;module&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ESNext&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;skipLibCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;moduleResolution&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Node&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;resolveJsonModule&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;isolatedModules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;jsx&quot;</span><span class="punctuation">:</span> <span class="string">&quot;react-jsx&quot;</span><span class="punctuation">,</span>  </span><br><span class="line">      <span class="attr">&quot;allowImportingTsExtensions&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strict&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;src&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;src/**/*.test.tsx&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;src/**/*.stories.tsx&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç„¶åç¼–è¯‘ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx tsc -p tsconfig.build.json --module ESNext --outDir dist/esm</span><br><span class="line"></span><br><span class="line">npx tsc -p tsconfig.build.json --module commonjs --outDir dist/cjs</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d11f3af339a344ca83e63d9f75d82083tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹ä¸‹ dist çš„äº§ç‰©ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/efc3bc2b1012411f9de5d0e712deaa17tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/727d8abe092c4140825f85a93a9a04aftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f7e81d77d7c743d38a6302341afcf380tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ²¡å•¥é—®é¢˜ï¼Œesm å’Œ commonjs æ ¼å¼çš„ä»£ç éƒ½ç”Ÿæˆäº†ã€‚</p><p>ç„¶åå†ç¼–è¯‘ä¸‹æ ·å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npx sass ./src/Calendar/index.scss ./dist/esm/Calendar/index.css</span><br><span class="line"></span><br><span class="line">npx sass ./src/Calendar/index.scss ./dist/cjs/Calendar/index.css</span><br><span class="line"></span><br><span class="line">npx sass ./src/Message/index.scss ./dist/esm/Message/index.css</span><br><span class="line"></span><br><span class="line">npx sass ./src/Message/index.scss ./dist/cjs/Message/index.css</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/b3517a532c0e4d1bb198e1914c08c1bctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹ä¸‹äº§ç‰©ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/20d5652508484d8a976ecd7452d02d72tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/ec7848ecbf144988974e91b1f296e01ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ²¡é—®é¢˜ã€‚</p><p>å½“ç„¶ï¼Œsass æ–‡ä»¶å¤šäº†ä»¥åä½ å¯ä»¥å†™ä¸ª node è„šæœ¬æ¥è‡ªåŠ¨æŸ¥æ‰¾æ‰€æœ‰ sass æ–‡ä»¶ç„¶åç¼–è¯‘ã€‚</p><p>æ¥ä¸‹æ¥åªè¦æŠŠè¿™ä¸ª dist ç›®å½•å‘åˆ° npm ä»“åº“å°±å¯ä»¥äº†ã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/61d8fb84c2cb45abb0c802886f2a238etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;main&quot;</span>: <span class="string">&quot;dist/cjs/index.js&quot;</span>,</span><br><span class="line"><span class="string">&quot;module&quot;</span>: <span class="string">&quot;dist/esm/index.js&quot;</span>,</span><br><span class="line"><span class="string">&quot;types&quot;</span>: <span class="string">&quot;dist/esm/index.d.ts&quot;</span>,</span><br><span class="line"><span class="string">&quot;files&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;dist&quot;</span>,</span><br><span class="line">    <span class="string">&quot;package.json&quot;</span>,</span><br><span class="line">    <span class="string">&quot;README.md&quot;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure><p>main å’Œ module åˆ†åˆ«æ˜¯ commonjs å’Œ es module çš„å…¥å£ã€‚</p><p>types æ˜¯ dts çš„è·¯å¾„ã€‚</p><p>files æ˜¯å“ªäº›æ–‡ä»¶å‘å¸ƒåˆ° npm ä»“åº“ï¼Œæ²¡åˆ—å‡ºæ¥çš„ä¼šè¢«è¿‡æ»¤æ‰ã€‚</p><p>å¹¶ä¸”ï¼Œè¿˜éœ€è¦æŠŠ private: true å’Œ type: module çš„å­—æ®µç»™å»æ‰ã€‚</p><h2 id="å‘å¸ƒnpmåŒ…"><a href="#å‘å¸ƒnpmåŒ…" class="headerlink" title="å‘å¸ƒnpmåŒ…"></a>å‘å¸ƒnpmåŒ…</h2><p>ç„¶åæˆ‘ä»¬æ¥å‘å¸ƒ npm åŒ…ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm adduser</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ npm adduser å‘½ä»¤ï¼Œä¼šæ‰“å°ä¸€ä¸ªé“¾æ¥è®©ä½ ç™»å½•æˆ–è€…æ³¨å†Œï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d10aae554875447aafb8aeddd0c2cc54tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç™»å½•åå°±å¯ä»¥ npm publish äº†ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/e2f04f9951ec47aaba6ec10cce138810tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å‘å¸ƒå®Œä¹‹åï¼Œåœ¨ <a href="https://www.npmjs.com/">https://www.npmjs.com</a> å°±å¯ä»¥æœç´¢åˆ°ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/72f9671eb37046488b6a388a19f9a9b1tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æˆ‘ä»¬æ–°å»ºä¸ªé¡¹ç›®æ¥ç”¨ç”¨çœ‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-vite guang-test</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/51a0dd12f2b04f4a8c51adc42e28f322tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h2 id="ä½¿ç”¨npmåŒ…"><a href="#ä½¿ç”¨npmåŒ…" class="headerlink" title="ä½¿ç”¨npmåŒ…"></a>ä½¿ç”¨npmåŒ…</h2><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pnpm install</span><br><span class="line"></span><br><span class="line">pnpm install guang-components</span><br></pre></td></tr></table></figure><p>åœ¨ App.tsx é‡Œç”¨ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Watermark</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;guang-components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Watermark</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">content</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">æµ‹è¯•æ°´å°</span>&#x27;, &#x27;<span class="attr">ç¥è¯´è¦æœ‰å…‰</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;height:</span> <span class="attr">800</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Watermark</span>&gt;</span></span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è·‘ä¸‹å¼€å‘æœåŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a5fbd6de7bd5454a804771b56c510579tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æµè§ˆå™¨è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/b40de8500750429694d1bf0e92197bd9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å†è¯•ä¸‹å¦å¤–ä¸¤ä¸ªç»„ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Calendar</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;guang-components&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;guang-components/dist/esm/Calendar/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Calendar</span> <span class="attr">value</span>=<span class="string">&#123;dayjs(</span>&#x27;<span class="attr">2024-07-01</span>&#x27;)&#125;&gt;</span><span class="tag">&lt;/<span class="name">Calendar</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº† dayjsï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pnpm install dayjs</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1fc526abf45c4281bb70be5e85de3a47tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™é‡Œæ ·å¼å— index.css å½±å“äº†ï¼Œå»æ‰å°±å¥½äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/35fcf0f5bd554dc58940880f438afe28tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/560f1fb5936444adb69718d91cd2e5fftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å†æ¥è¯•ä¸‹ Message ç»„ä»¶ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">ConfigProvider</span>, useMessage &#125; <span class="keyword">from</span> <span class="string">&quot;guang-components&quot;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;guang-components/dist/esm/Message/index.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Aaa</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> message = <span class="title function_">useMessage</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span>&#123;</span></span><br><span class="line"><span class="language-xml">    message.add(&#123;</span></span><br><span class="line"><span class="language-xml">      content:&#x27;è¯·æ±‚æˆåŠŸ&#x27;</span></span><br><span class="line"><span class="language-xml">    &#125;)</span></span><br><span class="line"><span class="language-xml">  &#125;&#125;&gt;æˆåŠŸ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ConfigProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">Aaa</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ConfigProvider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/2fbc6cd5ed9e4814b8cf704a00dc5d36tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>æ²¡å•¥é—®é¢˜ã€‚</p><h2 id="ä¼˜åŒ–ä¾èµ–"><a href="#ä¼˜åŒ–ä¾èµ–" class="headerlink" title="ä¼˜åŒ–ä¾èµ–"></a>ä¼˜åŒ–ä¾èµ–</h2><p>ç„¶åæˆ‘ä»¬ä¼˜åŒ–ä¸‹ä¾èµ–ï¼š</p><p>å…¶å®ç”¨åˆ° guang-components çš„é¡¹ç›®éƒ½ä¼šå®‰è£… react å’Œ react-dom åŒ…ï¼Œä¸éœ€è¦æŠŠå®ƒæ”¾åœ¨ dependencies é‡Œã€‚</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/fd4db769717a46e2832be156a102856ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è€Œæ˜¯æ”¾åœ¨ peerDependencies é‡Œï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/94d5d50e256b44bebde63cc59443c7c0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®ƒå’Œ dependencies ä¸€æ ·ï¼Œéƒ½æ˜¯ä¾èµ–ï¼Œä½†æ˜¯ dependencies æ˜¯å­çº§ï¼Œè€Œ peerDependencies æ˜¯å¹³çº§ã€‚</p><p>å¦‚æœå’Œå…¶ä»– react åŒ…çš„ç‰ˆæœ¬å†²çªæ—¶ï¼Œdependencies ä¼šä¿ç•™ä¸€ä»½å‰¯æœ¬ï¼Œè€Œ peerDependencies  ä¼šæç¤ºå¼€å‘è€…å»è§£å†³å†²çªï¼Œä¸ä¼šä¿ç•™å‰¯æœ¬ã€‚</p><p>æ”¹ä¸‹ç‰ˆæœ¬å·ï¼Œé‡æ–° npm publishï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1e803987156045e38ff0a08d79d228d3tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“çš„ npm åŒ…å°±å‘å¸ƒæˆåŠŸäº†ï¼</p><p>å†æµ‹è¯•ä¸‹ commonjs çš„ä»£ç ã€‚</p><p>ç”¨ cra åˆ›å»ºä¸ªé¡¹ç›®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app --template=typescript tmp4</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4e9ff62251514dd1832806bdf8a709b6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿›å…¥é¡¹ç›®ï¼Œå®‰è£…ç»„ä»¶åº“ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save guang-components</span><br></pre></td></tr></table></figure><p>åœ¨ App.tsx ç”¨ä¸€ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Watermark</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;guang-components&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Watermark</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    <span class="attr">content</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">æµ‹è¯•æ°´å°</span>&#x27;, &#x27;<span class="attr">ç¥è¯´è¦æœ‰å…‰</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  &gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;height:</span> <span class="attr">800</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quos quod deserunt quidem quas in rem ipsam ut nesciunt asperiores dignissimos recusandae minus, eaque, harum exercitationem esse sapiente? Eveniet, id provident!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Watermark</span>&gt;</span></span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œè¿™æ¬¡ç”¨ require å¼•å…¥ä»£ç ã€‚</p><p>ç„¶åæŠŠå¼€å‘æœåŠ¡è·‘èµ·æ¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run start</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨é‡Œçœ‹ä¸€ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a394fadf1e29478dacc8534241220db9tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ²¡å•¥é—®é¢˜ã€‚</p><p>æ¡ˆä¾‹ä»£ç ä¸Šä¼ äº†<a href="https://github.com/QuarkGluonPlasma/react-course-code/tree/main/guang-components">å°å†Œä»“åº“</a>ã€‚</p><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»Šå¤©æˆ‘ä»¬æŠŠä¹‹å‰å†™è¿‡çš„éƒ¨åˆ†ç»„ä»¶å°è£…æˆäº†ç»„ä»¶åº“å¹¶å‘å¸ƒåˆ°äº† npm ä»“åº“ã€‚</p><p>å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®é‡Œå¼•å…¥æ¥ç”¨ï¼Œå’Œ antd ç­‰ç»„ä»¶åº“ä¸€æ ·ã€‚</p><p>æ„å»ºéƒ¨åˆ†æˆ‘ä»¬åˆ†æè¿‡å¾ˆå¤šç»„ä»¶åº“ï¼Œéƒ½æ˜¯ä¸€æ ·çš„ï¼š</p><ul><li>commonjs å’Œ esm çš„ä»£ç é€šè¿‡ tsc æˆ–è€… babel ç¼–è¯‘äº§ç”Ÿ</li><li>umd ä»£ç é€šè¿‡ webpack æ‰“åŒ…äº§ç”Ÿ</li><li>css ä»£ç é€šè¿‡ sass æˆ–è€… less ç­‰ç¼–è¯‘äº§ç”Ÿ</li><li>dts ç±»å‹ä¹Ÿæ˜¯é€šè¿‡ tsc ç¼–è¯‘äº§ç”Ÿ</li></ul><p>æˆ‘ä»¬åœ¨ package.json é‡Œé…ç½®äº† main å’Œ moduleï¼Œåˆ†åˆ«å£°æ˜ commonjs å’Œ es module çš„å…¥å£ï¼Œé…ç½®äº† types æŒ‡å®šç±»å‹çš„å…¥å£ã€‚</p><p>ç„¶åé€šè¿‡ npm adduser ç™»å½•ï¼Œä¹‹å npm publish å‘å¸ƒåˆ° npmã€‚</p><p>è¿™æ ·ï¼Œreact é¡¹ç›®é‡Œå°±å¯ä»¥å¼•å…¥è¿™ä¸ªç»„ä»¶åº“æ¥ç”¨äº†ï¼Œä¹‹å‰å†™è¿‡çš„æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥åŠ åˆ°è¿™ä¸ªç»„ä»¶åº“é‡Œã€‚</p><h1 id="æ„å»ºumdäº§ç‰©ã€é€šè¿‡unpkgè®¿é—®"><a href="#æ„å»ºumdäº§ç‰©ã€é€šè¿‡unpkgè®¿é—®" class="headerlink" title="æ„å»ºumdäº§ç‰©ã€é€šè¿‡unpkgè®¿é—®"></a>æ„å»ºumdäº§ç‰©ã€é€šè¿‡unpkgè®¿é—®</h1><p>æ¥æºï¼š<a href="https://juejin.cn/book/7294082310658326565?utm_source=profile_book">React é€šå…³ç§˜ç± - zxg_ç¥è¯´è¦æœ‰å…‰ - æ˜é‡‘å°å†Œ</a></p><p>ä¸ŠèŠ‚åšäº† esm å’Œ commonjsã€scss ä»£ç çš„ç¼–è¯‘ï¼Œå¹¶å‘å¸ƒåˆ° npmï¼Œåœ¨é¡¹ç›®é‡Œä½¿ç”¨æ²¡å•¥é—®é¢˜ã€‚</p><p>ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ ·å°±è¶³å¤Ÿäº†ã€‚</p><p>umd çš„æ‰“åŒ…åšä¸åšéƒ½è¡Œã€‚</p><p>æƒ³ä¸€ä¸‹ï¼Œä½ æ˜¯å¦ç”¨è¿‡ antd çš„ umd æ ¼å¼çš„ä»£ç ï¼Ÿ</p><p>æ˜¯ä¸æ˜¯æ²¡ç”¨è¿‡ï¼Ÿ</p><p>ä½†å¦‚æœä½ åšä¸€ä¸ªå¼€æºç»„ä»¶åº“ï¼Œé‚£è¿˜æ˜¯è¦æ”¯æŒçš„ã€‚</p><p>è¿™èŠ‚æˆ‘ä»¬å°±æ¥åšä¸‹ umd çš„æ‰“åŒ…ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/fa8f1c8fc6464480b6efbbbf5c74988ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å‰é¢åˆ†æè¿‡ï¼Œå¤§å¤šæ•°ç»„ä»¶åº“éƒ½ç”¨ webpack æ¥æ‰“åŒ…çš„ã€‚</p><p>æˆ‘ä»¬å…ˆç”¨ä¸‹ antd çš„ umd çš„ä»£ç ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir antd-umd-test</span><br><span class="line">cd antd-umd-test</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/9c5ce5a438754716bed03d99829f3526tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ–°å»º index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18.3.1/umd/react.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/dayjs@1.11.11/dayjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/antd@5.19.0/dist/antd.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>antd ä¾èµ–çš„ reactã€react-domã€dayjs åŒ…ä¹Ÿå¾—ç”¨ umd å¼•å…¥ã€‚</p><p>è·‘ä¸ªé™æ€æœåŠ¡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx http-server .</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1da996b0f7e4450783e4bde4e858551btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æµè§ˆå™¨è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f13bf2d3442942c5894f362d1373c17ctplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é€šè¿‡å…¨å±€å˜é‡ antd æ¥è®¿é—®å„ç§ç»„ä»¶ã€‚</p><p>æˆ‘ä»¬æ¸²æŸ“ä¸ª Table ç»„ä»¶è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18.3.1/umd/react.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/dayjs@1.11.11/dayjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/antd@5.19.0/dist/antd.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> dataSource = [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">key</span>: <span class="string">&#x27;1&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;èƒ¡å½¦æ–Œ&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="number">32</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">address</span>: <span class="string">&#x27;è¥¿æ¹–åŒºæ¹–åº•å…¬å›­1å·&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">key</span>: <span class="string">&#x27;2&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">name</span>: <span class="string">&#x27;èƒ¡å½¦ç¥–&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">age</span>: <span class="number">42</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">address</span>: <span class="string">&#x27;è¥¿æ¹–åŒºæ¹–åº•å…¬å›­1å·&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            ];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> columns = [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;å§“å&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataIndex</span>: <span class="string">&#x27;name&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">key</span>: <span class="string">&#x27;name&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataIndex</span>: <span class="string">&#x27;age&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">key</span>: <span class="string">&#x27;age&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;ä½å€&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">dataIndex</span>: <span class="string">&#x27;address&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">key</span>: <span class="string">&#x27;address&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            ];</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            root.<span class="title function_">render</span>(<span class="title class_">React</span>.<span class="title function_">createElement</span>(antd.<span class="property">Table</span>, &#123; <span class="attr">dataSource</span>: dataSource, <span class="attr">columns</span>: columns &#125;));</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸èƒ½ç›´æ¥å†™ jsxï¼Œéœ€è¦ç”¨ babel æˆ–è€… tsc ä¹‹ç±»çš„<a href="https://www.typescriptlang.org/play/#code/DwFQhgRgNgpgBAEzAFzAZQPYFcBOBjGAXgG8lVNcCBfOPDKLAWwDsBnEuhl1mgegD4gA">ç¼–è¯‘ä¸€ä¸‹</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/b6cd6fff609642359972c60aed1cef60tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æµè§ˆå™¨çœ‹ä¸€ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/afbf94dc01764f32992f0d02978eb7detplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ¸²æŸ“æˆåŠŸï¼</p><p>è¿™å°±æ˜¯ umd çš„æ–¹å¼å¦‚ä½•ä½¿ç”¨ç»„ä»¶åº“ã€‚</p><p>æˆ‘ä»¬çš„ç»„ä»¶åº“ä¹Ÿæ”¯æŒä¸‹ umdï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/fa8f1c8fc6464480b6efbbbf5c74988ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åŠ ä¸€ä¸‹ webpack.config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@type</span> &#123;<span class="type">import(&#x27;webpack&#x27;).Configuration</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>,</span><br><span class="line">    <span class="attr">entry</span>: &#123;</span><br><span class="line">        <span class="attr">index</span>: [<span class="string">&#x27;./src/index.ts&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;guang-components.js&#x27;</span>,</span><br><span class="line">        <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist/umd&#x27;</span>),</span><br><span class="line">        <span class="attr">library</span>: <span class="string">&#x27;Guang&#x27;</span>,</span><br><span class="line">        <span class="attr">libraryTarget</span>: <span class="string">&#x27;umd&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.tsx?$/</span>,</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">&#x27;ts-loader&#x27;</span>,</span><br><span class="line">                <span class="attr">options</span>: &#123;</span><br><span class="line">                    <span class="attr">configFile</span>: <span class="string">&#x27;tsconfig.build.json&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">extensions</span>: [<span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">externals</span>: &#123;</span><br><span class="line">        <span class="attr">react</span>: <span class="string">&#x27;React&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;react-dom&#x27;</span>: <span class="string">&#x27;ReactDOM&#x27;</span>,</span><br><span class="line">        <span class="attr">dayjs</span>: <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å°±æ˜¯ä» index.ts å…¥å£å¼€å§‹æ‰“åŒ…ï¼Œäº§ç‰©æ ¼å¼ä¸º umdï¼Œæ–‡ä»¶å guang-components.jsï¼Œå…¨å±€å˜é‡ä¸º Guangã€‚</p><p>ç”¨ ts-loader æ¥ç¼–è¯‘ ts ä»£ç ï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶ä¸º tsconfig.build.jsonã€‚</p><p>æ³¨æ„æ‰“åŒ…çš„æ—¶å€™ä¸è¦æŠŠ react å’Œ react-domã€dayjs åŒ…æ‰“è¿›å»ï¼Œè€Œæ˜¯åŠ åœ¨ external é…ç½®é‡Œï¼Œä¹Ÿå°±æ˜¯ä»å…¨å±€å˜é‡æ¥è®¿é—®è¿™äº›ä¾èµ–ã€‚</p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-cli webpack ts-loader</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„ jsdoc æ³¨é‡Šæ˜¯ä¸ºäº†å¼•å…¥ ts ç±»å‹çš„ï¼Œå¯ä»¥è®© webpack.config.js æœ‰ç±»å‹æç¤ºï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/ff65da8d15cf4e079fec9a1e7fb3b26dtplv-k3u1fbpfcp-jj-mark0000q75.png" alt="js.png"></p><p>å¯¹ jsdoc æ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹æˆ‘è¿™ç¯‡æ–‡ç« ï¼š<a href="https://juejin.cn/post/7292437487011856394">JSDoc çœŸèƒ½å–ä»£ TypeScriptï¼Ÿ</a></p><p>æ‰“åŒ…ä¸€ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/2d01ae0da59442eea272a7712f46c350tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç„¶åçœ‹ä¸‹äº§ç‰©ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/09a35292cdde49c19cc9e5d38d097e18tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çœ‹èµ·æ¥æ²¡å•¥é—®é¢˜ã€‚</p><p>è¿™ä¸‰ä¸ªæ¨¡å—ä¹Ÿéƒ½æ˜¯é€šè¿‡ç›´æ¥è¯»å–å…¨å±€å˜é‡çš„æ–¹å¼å¼•å…¥ï¼Œæ²¡æœ‰æ‰“åŒ…è¿›å»ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/e73005d2ba0c4fcc8773da160b9802b1tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åœ¨ package.json æ”¹ä¸‹ç‰ˆæœ¬å·ï¼Œæ·»åŠ  unpkg çš„å…¥å£ï¼Œç„¶åå‘å¸ƒåˆ° npmï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/6b5dcf28251e4821bbcc24fe8f5bb550tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åœ¨ unpkg è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/e11dc57e269b443a8b1c3d0a4dec41betplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è®¿é—® <a href="https://unpkg.com/guang-components">https://unpkg.com/guang-components</a> ä¼šè‡ªåŠ¨é‡å®šå‘åˆ°æœ€æ–°ç‰ˆæœ¬çš„ umd ä»£ç ã€‚</p><p>å›åˆ°åˆšæ‰çš„ antd-umd-test é¡¹ç›®ï¼Œæ·»åŠ ä¸€ä¸ª index2.htmlï¼Œå¼•å…¥ guang-components</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/d7fd49f4e4074e5b9397cda4026336f8tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18.3.1/umd/react.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/dayjs@1.11.11/dayjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/guang-components@0.0.7/dist/umd/guang-components.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/39d7182b1a3647cb818cd90af1fb5bdetplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥é€šè¿‡å…¨å±€å˜é‡ Guang æ¥æ‹¿åˆ°ç»„ä»¶ã€‚</p><p>css ä¹Ÿæ˜¯é€šè¿‡ <a href="https://unpkg.com/guang-components@0.0.8/dist/esm/Calendar/index.css">unpkg æ¥æ‹¿åˆ°</a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/2786da2e5fdf4abcb6bcadfd665c47a7tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç„¶åæˆ‘ä»¬æ¸²æŸ“ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@18.3.1/umd/react.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/dayjs@1.11.11/dayjs.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/guang-components@0.0.7/dist/umd/guang-components.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    https://unpkg.com/guang-components@0.0.8/dist/esm/Calendar/index.css</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> container = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(container);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        root.<span class="title function_">render</span>(<span class="title class_">React</span>.<span class="title function_">createElement</span>(<span class="title class_">Guang</span>.<span class="property">Calendar</span>, &#123; <span class="attr">value</span>: <span class="title function_">dayjs</span>(<span class="string">&#x27;2024-07-01&#x27;</span>) &#125;));</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>jsx åœ¨ <a href="https://www.typescriptlang.org/play/#code/DwYQhgNgpgdgJmATgAgG6QK5QLwG8ECeAVgM4AUA5AEwAMVALALQ0DszAjBQJQC+AfMAD04aPCR8AUEA">ts playground</a> ç¼–è¯‘ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/c0321c55ee894ac3879187603228803btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æµè§ˆå™¨è®¿é—®ä¸‹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f16065ff1e404f9e905ddf7701820cf3tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œumd çš„ç»„ä»¶åº“ä»£ç ç”Ÿæ•ˆäº†ã€‚</p><p>ä½†æ˜¯æ§åˆ¶å°æœ‰ä¸ªæŠ¥é”™ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/4cd5e93c211540fe839d73167843f389tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç‚¹è¿›å»å¯ä»¥çœ‹åˆ°æ˜¯ _jsx è¿™ä¸ªå‡½æ•°çš„é—®é¢˜ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/1877c6caae9046919d03e9b3aba82051tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/3e97a87bf323474fa74b924e9faa269etplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>react æˆ‘ä»¬é€šè¿‡ externals çš„æ–¹å¼ï¼Œä»å…¨å±€å˜é‡å¼•å…¥ã€‚</p><p>ä½†æ˜¯è¿™ä¸ª react&#x2F;jsx-runtime ä¸ä¼šã€‚</p><p>è¿™ä¸ª react&#x2F;jsx-runtime æ˜¯å¹²å•¥çš„å‘¢ï¼Ÿ</p><p>åŒä¸€ä»½ <a href="https://www.typescriptlang.org/play/?jsx=4#code/DwFQhgRgNgpgBAEzAFzAZQPYFcBOBjGAXgG8lVNcCBfOPDKLAWwDsBnEuhl1mgegD4gA">jsx ä»£ç </a>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/8b42357b4855415084c5f6648de106e6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä½ åœ¨ <a href="https://www.typescriptlang.org/play/?jsx=4#code/DwFQhgRgNgpgBAEzAFzAZQPYFcBOBjGAXgG8lVNcCBfOPDKLAWwDsBnEuhl1mgegD4gA">typescript playground</a> é‡ŒæŠŠ jsx ç¼–è¯‘é€‰é¡¹åˆ‡æ¢ä¸º reactï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/7d494ae83431484597f6e098da10645dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/3861ee6277f344458429b07f1b964e9ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å¯ä»¥çœ‹åˆ°æ˜¯ä¸åŒçš„ç¼–è¯‘ç»“æœã€‚</p><p>React 17 ä¹‹å‰éƒ½æ˜¯ç¼–è¯‘ä¸º React.createElementï¼Œè¿™éœ€è¦è¿è¡Œçš„æ—¶å€™æœ‰ React è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥ä¹‹å‰æ¯ä¸ªç»„ä»¶éƒ½è¦åŠ ä¸Š import React from â€˜reactâ€™ æ‰è¡Œã€‚</p><p>React 17 ä¹‹åå°±åŠ äº†ä¸‹é¢çš„æ–¹å¼ï¼Œç›´æ¥ç¼–è¯‘ä¸ºç”¨ react&#x2F;jsx-runtime çš„ api çš„æ–¹å¼ã€‚ä¸å†éœ€è¦éƒ½åŠ ä¸Š import React from â€˜reactâ€™ äº†ã€‚</p><p>æˆ‘ä»¬ç»„ä»¶åº“ä¹Ÿæ˜¯ç”¨çš„è¿™ç§ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/7cc7f24e192e44a096cb6a51ee55cbdetplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ä½†ç°åœ¨æ‰“åŒ… umd ä»£ç çš„æ—¶å€™ï¼Œè¿™æ ·æœ‰é—®é¢˜ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æŠŠ jsx ç¼–è¯‘é…ç½®æ”¹ä¸€ä¸‹å°±å¥½äº†ã€‚</p><p>ä¿®æ”¹ jsx ä¸º react ä¹‹åï¼Œä¼šæœ‰ä¸€äº›æŠ¥é”™ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/f5baf830a05d4a98bac5bac94ed8d58ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>åœ¨æ¯ä¸ªæŠ¥é”™çš„ç»„ä»¶åŠ ä¸€ä¸‹ React å…¨å±€å˜é‡ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/dbe55da03a264299a4f19663697ff392tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å†æ¬¡æ‰“åŒ…å°±å¥½äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/bbab57136cc3441fa7a235175f32b0b5tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ”¹ä¸‹ç‰ˆæœ¬å·ï¼Œé‡æ–°å‘å¸ƒä¸€ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/74a034c3fe4b4a79bcf1dca45551896dtplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>æ”¹ä¸‹ index2.html é‡Œç”¨çš„ç»„ä»¶åº“çš„ç‰ˆæœ¬å·ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/a68eb2f2b76e44d9aa2521272e146285tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>ç°åœ¨å°±æ²¡æŠ¥é”™äº†ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E5%BA%93%E6%9E%84%E5%BB%BA/9a640d7c4d26456bb36cb6486c85ab1btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç»„ä»¶åº“å°±æ”¯æŒäº† umdã€‚</p><p>æ¡ˆä¾‹ä»£ç ä¸Šä¼ äº†<a href="https://github.com/QuarkGluonPlasma/react-course-code/tree/main/guang-components">å°å†Œä»“åº“</a>ã€‚</p><h2 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å‰é¢åˆ†æè¿‡ï¼Œç»„ä»¶åº“åŸºæœ¬éƒ½ä¼šæä¾› esmã€commonjsã€umd ä¸‰ç§æ ¼å¼çš„ä»£ç ã€‚</p><p>è¿™èŠ‚æˆ‘ä»¬å®ç°äº† umd çš„æ”¯æŒï¼Œé€šè¿‡ webpack åšäº†æ‰“åŒ…ã€‚</p><p>æ‰“åŒ…é€»è¾‘å¾ˆç®€å•ï¼šç”¨ ts-loader æ¥ç¼–è¯‘ typescript ä»£ç ï¼Œç„¶å reactã€react-dom ç­‰æ¨¡å—ç”¨ externals çš„æ–¹å¼å¼•å…¥å°±å¥½äº†ã€‚</p><p>å†å°±æ˜¯ react é€šè¿‡ externals çš„æ–¹å¼ï¼Œä¼šå¯¼è‡´ react&#x2F;jsx-runtime å¼•å…¥æœ‰é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹äº† tsconfig.json çš„ jsx çš„ç¼–è¯‘ä¸º reactï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘æˆ React.createElement çš„ä»£ç ã€‚</p><p>è™½ç„¶ umd çš„æ–¹å¼ç”¨çš„åœºæ™¯ä¸å¤šï¼Œä½†æˆ‘ä»¬ç»„ä»¶åº“è¿˜æ˜¯è¦æ”¯æŒçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-ç»„ä»¶ä»¿å†™</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E4%BB%BF%E5%86%99/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%BB%84%E4%BB%B6%E4%BB%BF%E5%86%99/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><ul><li>Calendarç»„ä»¶</li><li>Iconå›¾æ ‡ç»„ä»¶</li><li>Spaceé—´è·ç»„ä»¶</li><li>Messageå…¨å±€æç¤ºç»„ä»¶</li><li>Popoveræ°”æ³¡ç»„ä»¶</li><li>onBoardingå¼•å¯¼ç»„ä»¶</li><li>Uploadæ‹–æ‹½ä¸Šä¼ ç»„ä»¶</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React-çŠ¶æ€ç®¡ç†åº“</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³é”®å­—"><a href="#å…³é”®å­—" class="headerlink" title="å…³é”®å­—"></a>å…³é”®å­—</h1><ul><li><strong>Zustand</strong></li><li><strong>Jotai</strong></li></ul><h1 id="Zustand"><a href="#Zustand" class="headerlink" title="Zustand"></a>Zustand</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save zustand</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set, get, store</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">stateKey</span>: initialValue,  <span class="comment">// åˆå§‹çŠ¶æ€</span></span><br><span class="line">  <span class="attr">actionMethod</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(...), <span class="comment">// ç”¨äºæ›´æ–°çŠ¶æ€çš„æ–¹æ³•</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p><code>create</code> æ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å›è°ƒå‡½æ•°ä¼šè¿”å›ä¸€ä¸ª <strong>çŠ¶æ€å¯¹è±¡ï¼ˆstoreï¼‰</strong>ï¼Œè¿™ä¸ªçŠ¶æ€å¯¹è±¡å¯ä»¥åŒ…å«ï¼š</p><ul><li><strong>çŠ¶æ€ï¼ˆstateï¼‰</strong>ï¼šæ•°æ®ï¼Œä¾‹å¦‚ <code>count: 0</code></li><li><strong>æ–¹æ³•ï¼ˆactionsï¼‰</strong>ï¼šç”¨äºæ›´æ–°çŠ¶æ€çš„å‡½æ•°ï¼Œä¾‹å¦‚ <code>increment: () =&gt; set((state) =&gt; (&#123; count: state.count + 1 &#125;))</code></li></ul><h3 id="å›è°ƒå‡½æ•°çš„å‚æ•°"><a href="#å›è°ƒå‡½æ•°çš„å‚æ•°" class="headerlink" title="å›è°ƒå‡½æ•°çš„å‚æ•°"></a>å›è°ƒå‡½æ•°çš„å‚æ•°</h3><p><code>create</code> çš„å›è°ƒå‡½æ•°ä¼šæ¥æ”¶ <strong>ä¸‰ä¸ªå‚æ•°</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set, get, store</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">increment</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">  <span class="attr">getCount</span>: <span class="function">() =&gt;</span> <span class="title function_">get</span>().<span class="property">count</span>,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><table><thead><tr><th>å‚æ•°</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong><code>set</code></strong></td><td><strong>ä¿®æ”¹çŠ¶æ€</strong>ï¼ˆç±»ä¼¼ <code>setState</code>ï¼‰</td></tr><tr><td><strong><code>get</code></strong></td><td><strong>è·å–å½“å‰çŠ¶æ€</strong></td></tr><tr><td><strong><code>store</code></strong></td><td><strong>è®¿é—®æ•´ä¸ª store API</strong>ï¼ˆå¾ˆå°‘ç”¨ï¼‰</td></tr></tbody></table><h3 id="useStoreçš„è¿”å›å€¼"><a href="#useStoreçš„è¿”å›å€¼" class="headerlink" title="useStoreçš„è¿”å›å€¼"></a>useStoreçš„è¿”å›å€¼</h3><p><code>create</code> è¿”å›çš„æ˜¯ä¸€ä¸ª <strong>React Hook</strong>ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">increment</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥åœ¨ç»„ä»¶ä¸­è¿™æ ·ä½¿ç”¨ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, increment &#125; = <span class="title function_">useStore</span>();</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li><code>useStore()</code> ğŸ‘‰ è®¢é˜…æ•´ä¸ª store</li><li><code>useStore((state) =&gt; state.count)</code> ğŸ‘‰ <strong>åªè®¢é˜… <code>count</code>ï¼Œæå‡æ€§èƒ½</strong></li></ul><p>store é‡Œå®šä¹‰å…¨éƒ¨çš„ stateï¼Œç„¶ååœ¨ç»„ä»¶é‡Œé€‰å‡ºä¸€éƒ¨åˆ†æ¥ç”¨ã€‚</p><p>è¿™ä¸ªå«åš <strong>selector</strong>ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/752ecda80ed1456fbba97f9cde86b20ftplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>çŠ¶æ€å˜äº†ä¹‹åï¼Œzustand ä¼šå¯¹æ¯” selector å‡ºçš„çŠ¶æ€çš„æ–°æ—§å€¼ï¼Œå˜äº†æ‰ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p><p>æ­¤å¤–ï¼Œè¿™ä¸ª selector è¿˜å¯ä»¥èµ·åˆ°æ´¾ç”ŸçŠ¶æ€çš„ä½œç”¨ï¼Œå¯¹åŸå§‹çŠ¶æ€åšä¸€äº›ä¿®æ”¹ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/b7e37f0575b643cfac4bd77af5e51ef6tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><h3 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h3><p>å…¶å®ä¸­é—´ä»¶å¹¶ä¸æ˜¯ zustand è‡ªå·±å®ç°çš„åŠŸèƒ½ã€‚</p><p>ä½ çœ‹è¿™ä¸ª create æ–¹æ³•çš„å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å— setã€getã€store çš„ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/a789b7bbb5214082aac31e915909574btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é‚£æˆ‘ä»¬å¯ä¸å¯ä»¥åŒ…ä¸€å±‚ï¼Œè‡ªå·±æ‹¿åˆ° getã€setã€storeï¼Œå¯¹è¿™äº›åšä¸€äº›ä¿®æ”¹ï¼Œä¹‹åè¿”å›ä¸€ä¸ªæ¥å—ä¸‰ä¸ªå‚æ•°çš„å‡½æ•°å‘¢ï¼Ÿ</p><p>æ¯”å¦‚è¿™æ ·ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">logMiddleware</span>(<span class="params">func</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">set, get, store</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">newSet</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è°ƒç”¨äº† setï¼Œæ–°çš„ stateï¼š&#x27;</span>, <span class="title function_">get</span>());</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">set</span>(...args)</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">func</span>(newSet, get, store)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘æ¥å—ä¹‹å‰çš„å‡½æ•°ï¼Œç„¶åå¯¹æŠŠ setã€getã€store ä¿®æ”¹ä¹‹åå†è°ƒç”¨å®ƒï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/5707cf2971a744b9b2d2a1d3f3ac30f0tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è¿™æ ·ä¸å°±ç»™ zustand çš„ set æ–¹æ³•åŠ ä¸Šäº†é¢å¤–çš„åŠŸèƒ½ä¹ˆï¼Ÿ</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/371915a1fcd44ff5bf7c9245106e76d5tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><p>è¿™ä¸ªå°±æ˜¯ä¸­é—´ä»¶ï¼Œå’Œ redux çš„ä¸­é—´ä»¶æ˜¯ä¸€æ ·çš„è®¾è®¡ã€‚</p><p>å®ƒå¹¶ä¸éœ€è¦ zustand æœ¬èº«åšå•¥æ”¯æŒï¼Œåªè¦æŠŠ create çš„å‚æ•°è®¾è®¡æˆä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ setã€get ç­‰å‡½ä½œä¸ºå‚æ•°ï¼Œé‚£å°±è‡ªç„¶æ”¯æŒäº†ä¸­é—´ä»¶ã€‚</p><p>zustand å†…ç½®äº†ä¸€äº›ä¸­é—´ä»¶ï¼Œæ¯”å¦‚ immerã€persistã€‚</p><h4 id="immer"><a href="#immer" class="headerlink" title="immer"></a>immer</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; immer &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware/immer&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(</span><br><span class="line">  <span class="title function_">immer</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">todos</span>: [],</span><br><span class="line">    <span class="attr">addTodo</span>: <span class="function">(<span class="params">text</span>) =&gt;</span></span><br><span class="line">      <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">        state.<span class="property">todos</span>.<span class="title function_">push</span>(&#123; text, <span class="attr">completed</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">      &#125;),</span><br><span class="line">  &#125;))</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>å…è®¸ç›´æ¥ <strong>ä¿®æ”¹å¯¹è±¡æˆ–æ•°ç»„</strong>ï¼ŒZustand å†…éƒ¨ä¼šè‡ªåŠ¨è¿›è¡Œä¸å¯å˜æ›´æ–°ã€‚</p><h4 id="persist"><a href="#persist" class="headerlink" title="persist"></a>persist</h4><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; persist &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useStore = <span class="title function_">create</span>(</span><br><span class="line">  <span class="title function_">persist</span>(</span><br><span class="line">    <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">increment</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">    &#125;),</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;counter-storage&#x27;</span>, <span class="comment">// å­˜å‚¨çš„ key</span></span><br><span class="line">    &#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p> <strong>ä½œç”¨</strong>ï¼š</p><ul><li>æŠŠçŠ¶æ€å­˜åˆ° <code>localStorage</code>ï¼ˆæˆ– <code>sessionStorage</code>ï¼‰ã€‚</li><li>åˆ·æ–°é¡µé¢åï¼ŒçŠ¶æ€ä¸ä¼šä¸¢å¤±ã€‚</li></ul></blockquote><h5 id="stateCreator"><a href="#stateCreator" class="headerlink" title="stateCreator"></a>stateCreator</h5><p>åœ¨ Zustand ä¸­ï¼Œ<code>StateCreator</code> æ˜¯ç”¨æ¥å®šä¹‰ store ç»“æ„çš„ä¸€ä¸ªå‡½æ•°ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ <code>StateCreator</code> åˆ›å»ºä¸€ä¸ª <code>stateCreator</code>ï¼Œç„¶åå†å°†å…¶ä¼ é€’ç»™ <code>persist</code> è¿›è¡ŒçŠ¶æ€æŒä¹…åŒ–ã€‚</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; create, <span class="title class_">StateCreator</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; persist &#125; <span class="keyword">from</span> <span class="string">&#x27;zustand/middleware&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ State ç±»å‹</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">CounterState</span> &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">increment</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ StateCreator åˆ›å»ºä¸€ä¸ª stateCreator</span></span><br><span class="line"><span class="keyword">const</span> <span class="attr">counterStateCreator</span>: <span class="title class_">StateCreator</span>&lt;<span class="title class_">CounterState</span>&gt; = <span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">increment</span>: <span class="function">() =&gt;</span> <span class="title function_">set</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> (&#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;)),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ persist åŒ…è£… stateCreator</span></span><br><span class="line"><span class="keyword">const</span> useCounterStore = <span class="title function_">create</span>(</span><br><span class="line">  <span class="title function_">persist</span>(counterStateCreator, &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;counter-storage&#x27;</span>, <span class="comment">// å­˜å‚¨ key</span></span><br><span class="line">    <span class="attr">getStorage</span>: <span class="function">() =&gt;</span> <span class="variable language_">localStorage</span>, <span class="comment">// æŒ‡å®šå­˜å‚¨æ–¹å¼</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, increment &#125; = <span class="title function_">useCounterStore</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; create &#125; <span class="keyword">from</span> <span class="string">&quot;zustand&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useXxxStore = <span class="title function_">create</span>(<span class="function">(<span class="params">set</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">aaa</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">bbb</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">updateAaa</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="title function_">set</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">aaa</span>: value &#125;)),</span><br><span class="line">  <span class="attr">updateBbb</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="title function_">set</span>(<span class="function">() =&gt;</span> (&#123; <span class="attr">bbb</span>: value &#125;)),</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> updateAaa = <span class="title function_">useXxxStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">updateAaa</span>);</span><br><span class="line">  <span class="keyword">const</span> aaa = <span class="title function_">useXxxStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">aaa</span>);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    useXxxStore.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(useXxxStore.<span class="title function_">getState</span>());</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> updateAaa(e.currentTarget.value)&#125; value=&#123;aaa&#125; /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Bbb</span>&gt;</span><span class="tag">&lt;/<span class="name">Bbb</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Bbb</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Ccc</span>&gt;</span><span class="tag">&lt;/<span class="name">Ccc</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Ccc</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> aaa = <span class="title function_">useXxxStore</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">aaa</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>hello, &#123;aaa&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="é¢å¤–æ–¹æ³•"><a href="#é¢å¤–æ–¹æ³•" class="headerlink" title="é¢å¤–æ–¹æ³•"></a>é¢å¤–æ–¹æ³•</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›´æ¥è·å–å½“å‰çŠ¶æ€ åœ¨é React ç»„ä»¶ç¯å¢ƒ è®¿é—®çŠ¶æ€</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(useStore.<span class="title function_">getState</span>().<span class="property">count</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›´æ¥æ›´æ–°çŠ¶æ€ï¼ˆä¸ä¼šè§¦å‘ re-renderï¼‰åœ¨ é React ç»„ä»¶ç¯å¢ƒ æ›´æ–°çŠ¶æ€</span></span><br><span class="line">useStore.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: <span class="number">100</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…çŠ¶æ€å˜åŒ–ï¼ˆé€‚ç”¨äºé React ç»„ä»¶ï¼‰</span></span><br><span class="line"><span class="keyword">const</span> unsubscribe = useStore.<span class="title function_">subscribe</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–°çš„ count:&quot;</span>, state.<span class="property">count</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="line"><span class="title function_">unsubscribe</span>();</span><br></pre></td></tr></table></figure><h1 id="Jotai"><a href="#Jotai" class="headerlink" title="Jotai"></a>Jotai</h1><p>Jotai æ˜¯ä¸€ä¸ª react çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä¸»æ‰“åŸå­åŒ–ã€‚</p><p>åœ¨ jotai é‡Œï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯ç‹¬ç«‹çš„åŸå­ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; atom, useAtom &#125; <span class="keyword">from</span> <span class="string">&#x27;jotai&#x27;</span>; </span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> aaaAtom = atom (<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bbbAtom = <span class="title function_">atom</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Aaa</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [aaa, setAaa]= <span class="title function_">useAtom</span>(aaaAtom);</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Aaa render...&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        aaa: &#123;aaa&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setAaa(aaa + 1)&#125;&gt;åŠ ä¸€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Bbb</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [bbb, setBbb]= <span class="title function_">useAtom</span>(bbbAtom);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Bbb render...&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        bbb: &#123;bbb&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setBbb(bbb + 1)&#125;&gt;åŠ ä¸€<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Aaa</span>&gt;</span><span class="tag">&lt;/<span class="name">Aaa</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Bbb</span>&gt;</span><span class="tag">&lt;/<span class="name">Bbb</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/678f0e5bf8a4460dadb1581ce6a106e3tplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h2 id="æ´¾ç”Ÿatom"><a href="#æ´¾ç”Ÿatom" class="headerlink" title="æ´¾ç”Ÿatom"></a>æ´¾ç”Ÿatom</h2><p>çŠ¶æ€å¯ä»¥ç»„åˆï¼Œäº§ç”Ÿæ´¾ç”ŸçŠ¶æ€ï¼š</p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/74d4ca3baa9e434884c8981631f57e83tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p><img src="/2025/03/29/%E5%89%8D%E7%AB%AF-React-React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%BA%93/e5cd85a5b14b4f09b19556fdf31c504ctplv-k3u1fbpfcp-jj-mark0000q75.gif"></p><h2 id="å¯å†™atom"><a href="#å¯å†™atom" class="headerlink" title="å¯å†™atom"></a>å¯å†™atom</h2><p>å¦‚æœä½ éœ€è¦åˆ›å»ºä¸€ä¸ª <strong>è®¡ç®— &amp; å¯ä¿®æ”¹</strong> çš„ <code>atom</code>ï¼Œå¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAtom = <span class="title function_">atom</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯å†™çš„ atom</span></span><br><span class="line"><span class="keyword">const</span> doubleCountAtom = <span class="title function_">atom</span>(</span><br><span class="line">  <span class="function">(<span class="params">get</span>) =&gt;</span> <span class="title function_">get</span>(countAtom) * <span class="number">2</span>, <span class="comment">// è¯»å– countAtom çš„å€¼</span></span><br><span class="line">  <span class="function">(<span class="params">get, set, newValue</span>) =&gt;</span> <span class="title function_">set</span>(countAtom, newValue / <span class="number">2</span>) <span class="comment">// ä¿®æ”¹ countAtom</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>ğŸ“Œ <strong>è§£é‡Š</strong></p><ul><li><strong>è¯»å–æ—¶</strong>ï¼š<code>doubleCountAtom</code> ç­‰äº <code>countAtom * 2</code></li><li><strong>å†™å…¥æ—¶</strong>ï¼šå¦‚æœ <code>set(doubleCountAtom, 10)</code>ï¼Œé‚£ä¹ˆ <code>countAtom</code> å˜æˆ <code>5</code></li></ul><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">DoubleCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [doubleCount, setDoubleCount] = <span class="title function_">useAtom</span>(doubleCountAtom);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Double Count: &#123;doubleCount&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setDoubleCount(20)&#125;&gt;è®¾ç½®ä¸º 20<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>è¿™ç±»ä¼¼äº Vue é‡Œçš„ <code>computed</code>ï¼Œæ—¢èƒ½è¯»å–ï¼Œä¹Ÿèƒ½ä¿®æ”¹ï¼</strong></p><h2 id="å¼‚æ­¥atom"><a href="#å¼‚æ­¥atom" class="headerlink" title="å¼‚æ­¥atom"></a>å¼‚æ­¥atom</h2><p>Jotai å¯ä»¥ç›´æ¥å¤„ç†å¼‚æ­¥æ•°æ®ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userAtom = <span class="title function_">atom</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;https://jsonplaceholder.typicode.com/users/1&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ğŸ“Œ <strong>è§£é‡Š</strong></p><ul><li><code>userAtom</code> æ˜¯ä¸€ä¸ª <strong>å¼‚æ­¥ <code>atom</code></strong></li><li>å®ƒä¼šè‡ªåŠ¨è¯·æ±‚æ•°æ®ï¼Œå¹¶åœ¨å®Œæˆåæ›´æ–°çŠ¶æ€</li></ul><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">UserInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user] = <span class="title function_">useAtom</span>(userAtom);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>User: &#123;user?.name&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>è‡ªåŠ¨å¤„ç†å¼‚æ­¥è¯·æ±‚ï¼Œç±»ä¼¼äº SWR &#x2F; React Queryï¼</strong></p><h2 id="æŒä¹…åŒ–atom"><a href="#æŒä¹…åŒ–atom" class="headerlink" title="æŒä¹…åŒ–atom"></a>æŒä¹…åŒ–atom</h2><p>Jotai æä¾›äº† <code>atomWithStorage</code>ï¼Œå¯ä»¥è®© <code>atom</code> **è‡ªåŠ¨å­˜åˆ° <code>localStorage</code>**ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; atomWithStorage &#125; <span class="keyword">from</span> <span class="string">&#x27;jotai/utils&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæŒä¹…åŒ– atom</span></span><br><span class="line"><span class="keyword">const</span> themeAtom = <span class="title function_">atomWithStorage</span>(<span class="string">&quot;theme&quot;</span>, <span class="string">&quot;light&quot;</span>);</span><br></pre></td></tr></table></figure><p>âœ… <strong>ä½œç”¨</strong></p><ul><li>é»˜è®¤å€¼æ˜¯ <code>&quot;light&quot;</code></li><li>çŠ¶æ€å­˜å‚¨åœ¨ <code>localStorage</code> é‡Œï¼ˆkey &#x3D; <code>&quot;theme&quot;</code>ï¼‰</li><li><strong>åˆ·æ–°é¡µé¢ä¸ä¼šä¸¢å¤±çŠ¶æ€ï¼</strong></li></ul><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ThemeToggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [theme, setTheme] = <span class="title function_">useAtom</span>(themeAtom);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTheme(theme === &quot;light&quot; ? &quot;dark&quot; : &quot;light&quot;)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      ä¸»é¢˜ï¼š&#123;theme&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âœ… <strong>è¶…çº§ç®€å•çš„æŒä¹…åŒ–æ–¹æ¡ˆï¼Œä¸ç”¨ <code>persist</code> é¢å¤–é…ç½®ï¼</strong></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å­¦ä¹ å‘¨æŠ¥-2</title>
      <link href="/2025/03/29/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-2/"/>
      <url>/2025/03/29/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-2/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ¬å‘¨å­¦ä¹ å…³é”®å­—"><a href="#æœ¬å‘¨å­¦ä¹ å…³é”®å­—" class="headerlink" title="æœ¬å‘¨å­¦ä¹ å…³é”®å­—"></a>æœ¬å‘¨å­¦ä¹ å…³é”®å­—</h1><ul><li><strong>ç»„ä»¶</strong><ul><li>Messageå…¨å±€æç¤ºç»„ä»¶</li><li>Popoveræ°”æ³¡ç»„ä»¶</li><li>onBoardingå¼•å¯¼ç»„ä»¶</li><li>Uploadæ‹–æ‹½ä¸Šä¼ ç»„ä»¶</li></ul></li><li><strong>æ‹–æ‹½é«˜çº§ç»„ä»¶</strong><ul><li>dnd</li></ul></li><li><strong>çŠ¶æ€åº“</strong><ul><li>Zustand</li><li>Jotai</li></ul></li><li><strong>è·¯ç”±</strong><ul><li>ReactTouter</li><li>keepalive</li></ul></li><li><strong>åŸºç¡€çŸ¥è¯†</strong><ul><li><p>imuutable</p></li><li><p>immer</p><ul><li>ä¸å¯å˜æ•°æ®</li></ul></li><li><p>history api ï¼š</p><ul><li>lengthï¼šhistory çš„æ¡æ•°</li><li>forwardï¼šå‰è¿›ä¸€ä¸ª</li><li>backï¼šåé€€ä¸€ä¸ª</li><li>goï¼šå‰è¿›æˆ–è€…åé€€ n ä¸ª</li><li>pushStateï¼šæ·»åŠ ä¸€ä¸ª history</li><li>replaceStateï¼šæ›¿æ¢å½“å‰ history</li><li>scrollRestorationï¼šä¿å­˜ scroll ä½ç½®ï¼Œå–å€¼ä¸º auto æˆ–è€… manualï¼Œmanual çš„è¯å°±è¦è‡ªå·±è®¾ç½® scroll ä½ç½®äº†</li></ul></li><li><p>popstate äº‹ä»¶å¯ä»¥ç›‘å¬åˆ° history.goã€history.backã€history.forward çš„å¯¼èˆªï¼Œæ‹¿åˆ°æœ€æ–°çš„ location</p><ul><li>ï¼ˆgoã€backã€forwardï¼‰å¯ä»¥è§¦å‘ popstateï¼Œè€Œä¿®æ”¹ history ï¼ˆpushã€replaceï¼‰ä¸èƒ½è§¦å‘ã€‚</li></ul></li></ul></li><li>åº“<ul><li>click-to-react-componentï¼šå®šä½ç»„ä»¶</li></ul></li></ul><h1 id="ReactContextæ€§èƒ½ç¼ºç‚¹å’Œè§£å†³æ–¹æ¡ˆ"><a href="#ReactContextæ€§èƒ½ç¼ºç‚¹å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="ReactContextæ€§èƒ½ç¼ºç‚¹å’Œè§£å†³æ–¹æ¡ˆ"></a>ReactContextæ€§èƒ½ç¼ºç‚¹å’Œè§£å†³æ–¹æ¡ˆ</h1><p>context åœ¨è·¨å±‚ä¼ é€’æ•°æ®æ–¹é¢å¾ˆå¥½ç”¨ï¼Œåœ¨ç»„ä»¶åº“é‡Œç”¨çš„å¾ˆå¤šï¼Œä½†æ˜¯å®ƒä¹Ÿæœ‰ä¸€äº›æ€§èƒ½æ–¹é¢çš„ç¼ºç‚¹ã€‚</p><p>context ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸ç®¡ä»»æ„å±æ€§å˜äº†ï¼Œéƒ½ä¼šå¯¼è‡´ä¾èµ–å…¶å®ƒå±æ€§çš„ç»„ä»¶è·Ÿç€é‡æ–°æ¸²æŸ“ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜æœ‰å‡ ç§æ–¹æ¡ˆï¼š</p><ul><li>æ‹†åˆ† contextï¼Œæ¯ç§æ•°æ®æ”¾åœ¨ä¸€ä¸ª context é‡Œ</li><li>ç”¨ zustand ç­‰çŠ¶æ€ç®¡ç†åº“ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯ç”¨ context å®ç°çš„ï¼Œè‡ªç„¶æ²¡æœ‰è¿™ç§é—®é¢˜</li><li>ç”¨ memo åŒ…è£¹å­ç»„ä»¶ï¼Œå®ƒä¼šå¯¹æ¯”æ–°æ—§ propsï¼Œæ²¡å˜å°±ä¸ä¼šé‡æ–°æ¸²æŸ“</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯å­¦ä¹ å‘¨æŠ¥-1</title>
      <link href="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/"/>
      <url>/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ¬å‘¨å‰ç«¯å­¦ä¹ å…³é”®å­—"><a href="#æœ¬å‘¨å‰ç«¯å­¦ä¹ å…³é”®å­—" class="headerlink" title="æœ¬å‘¨å‰ç«¯å­¦ä¹ å…³é”®å­—"></a>æœ¬å‘¨å‰ç«¯å­¦ä¹ å…³é”®å­—</h1><ul><li><h2 id="åŸºæœ¬çŸ¥è¯†"><a href="#åŸºæœ¬çŸ¥è¯†" class="headerlink" title="åŸºæœ¬çŸ¥è¯†"></a>åŸºæœ¬çŸ¥è¯†</h2><ul><li>å—æ§æ¨¡å¼vséå—æ§æ¨¡å¼</li><li>å¦‚ä½•å†™å•æµ‹</li><li>å¦‚ä½•è°ƒè¯•</li><li><code>Storybook</code></li><li>æµè§ˆå™¨çš„5ç§<code>Observer</code><ul><li>IntersectionObserverï¼šç›‘å¬å…ƒç´ å¯è§æ€§å˜åŒ–ï¼Œå¸¸ç”¨æ¥åšå…ƒç´ æ˜¾ç¤ºçš„æ•°æ®é‡‡é›†ã€å›¾ç‰‡çš„æ‡’åŠ è½½</li><li>MutationObserverï¼šç›‘å¬å…ƒç´ å±æ€§å’Œå­èŠ‚ç‚¹å˜åŒ–ï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥åšå»ä¸æ‰çš„æ°´å°</li><li>ResizeObserverï¼šç›‘å¬å…ƒç´ å¤§å°å˜åŒ–</li><li>PerformanceObserverï¼šç›‘å¬ performance è®°å½•çš„è¡Œä¸ºï¼Œæ¥ä¸ŠæŠ¥æ•°æ®</li><li>ReportingObserverï¼šç›‘å¬è¿‡æ—¶çš„ apiã€æµè§ˆå™¨çš„ä¸€äº›å¹²é¢„è¡Œä¸ºçš„æŠ¥å‘Šï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å…¨é¢çš„äº†è§£ç½‘é¡µ app çš„è¿è¡Œæƒ…å†µ</li></ul></li><li>ç½‘é¡µçš„å„ç§è·ç¦»</li></ul></li><li><h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul><li><code>sass</code> + <code>classnames</code></li><li><code>styled-components</code></li><li><code>css module</code></li><li><code>tailwind</code></li></ul></li><li><h2 id="Animation"><a href="#Animation" class="headerlink" title="Animation"></a>Animation</h2><ul><li><code>@use-gesture/react</code></li><li><code>@react-spring/web</code></li><li><code>react-transition-group</code><ul><li><code>Transition</code>ã€<code>CSSTransition</code>ã€<code>TransitionGroup</code>ã€<code>SwitchTransition</code></li></ul></li></ul></li><li><h2 id="Hookså°è£…"><a href="#Hookså°è£…" class="headerlink" title="Hookså°è£…"></a>Hookså°è£…</h2><ul><li><code>ahooks</code><ul><li><code>useSize</code>ã€<code>useHover</code>ã€<code>useTimeout</code>ã€<code>useWhyDidYouUpdate</code>ã€<code>useCountDown</code></li></ul></li><li><code>react-use</code><ul><li><code>useMountedState</code>ã€<code>useLifecycles</code>ã€<code>useCookie</code>ã€<code>useHover</code>ã€<code>useScrolling </code></li></ul></li><li>hookå°è£…çš„ä¸‰ç§æ–¹æ³•<ul><li>ä¼ å…¥ React Element ç„¶å cloneElement</li><li>ä¼ å…¥ ref ç„¶åæ‹¿åˆ° dom æ‰§è¡Œ addEventListener</li><li>è¿”å› props å¯¹è±¡æˆ–è€…äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè°ƒç”¨è€…è‡ªå·±ç»‘å®š</li></ul></li></ul></li><li><h2 id="Reactå¸¸ç”¨hook"><a href="#Reactå¸¸ç”¨hook" class="headerlink" title="Reactå¸¸ç”¨hook"></a>Reactå¸¸ç”¨hook</h2><ul><li><p><code>useState</code></p></li><li><p><code>useEffect</code></p></li><li><p><code>useLayoutEffect</code></p></li><li><p><code>useReducer</code></p></li><li><p><code>useRef</code></p></li><li><p><code>forwardRef + useImperativeHandle</code>ï¼šé€šè¿‡ forwardRef å¯ä»¥ä»å­ç»„ä»¶è½¬å‘ ref åˆ°çˆ¶ç»„ä»¶ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰ ref å†…å®¹å¯ä»¥ä½¿ç”¨ useImperativeHandle</p></li><li><p><code>useContext</code></p></li><li><p><code>memo + useMemo + useCallback</code>memo åŒ…è£¹çš„ç»„ä»¶åªæœ‰åœ¨ props å˜çš„æ—¶å€™æ‰ä¼šé‡æ–°æ¸²æŸ“ï¼ŒuseMemoã€useCallback å¯ä»¥é˜²æ­¢ props ä¸å¿…è¦çš„å˜åŒ–ï¼Œä¸¤è€…ä¸€èˆ¬æ˜¯ç»“åˆç”¨ã€‚ä¸è¿‡å½“ç”¨æ¥ç¼“å­˜è®¡ç®—ç»“æœç­‰åœºæ™¯çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ç”¨ useMemoã€useCallback</p></li></ul></li><li><h2 id="ç»„ä»¶å°è£…"><a href="#ç»„ä»¶å°è£…" class="headerlink" title="ç»„ä»¶å°è£…"></a>ç»„ä»¶å°è£…</h2><ul><li>Calendarç»„ä»¶</li><li>Iconå›¾æ ‡ç»„ä»¶</li><li>Spaceé—´è·ç»„ä»¶</li></ul></li></ul><h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="å—æ§æ¨¡å¼vséå—æ§æ¨¡å¼"><a href="#å—æ§æ¨¡å¼vséå—æ§æ¨¡å¼" class="headerlink" title="å—æ§æ¨¡å¼vséå—æ§æ¨¡å¼"></a>å—æ§æ¨¡å¼vséå—æ§æ¨¡å¼</h2><p>æ”¹å˜è¡¨å•å€¼åªæœ‰ä¸¤ç§æƒ…å†µï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324003456281.png" alt="image-20250324003456281"></p><p>ç”¨æˆ·å»æ”¹å˜ value æˆ–è€…ä»£ç å»æ”¹å˜ valueã€‚</p><p>å¦‚æœä¸èƒ½é€šè¿‡ä»£ç æ”¹è¡¨å•å€¼ valueï¼Œé‚£å°±æ˜¯éå—æ§ï¼Œä¹Ÿå°±æ˜¯ä¸å—æˆ‘ä»¬æ§åˆ¶ã€‚</p><p>ä½†æ˜¯ä»£ç å¯ä»¥ç»™è¡¨å•è®¾ç½®åˆå§‹å€¼ defaultValueã€‚</p><h3 id="éå—æ§æ¨¡å¼"><a href="#éå—æ§æ¨¡å¼" class="headerlink" title="éå—æ§æ¨¡å¼"></a>éå—æ§æ¨¡å¼</h3><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324003504259.png" alt="image-20250324003504259"></p><p>ä»£ç è®¾ç½®è¡¨å•çš„åˆå§‹ valueï¼Œä½†æ˜¯èƒ½æ”¹å˜ value çš„åªæœ‰ç”¨æˆ·ï¼Œä»£ç é€šè¿‡ç›‘å¬ onChange æ¥æ‹¿åˆ°æœ€æ–°çš„å€¼ï¼Œæˆ–è€…é€šè¿‡ ref æ‹¿åˆ° dom ä¹‹åè¯»å– valueã€‚</p><p>è¿™ç§å°±æ˜¯éå—æ§æ¨¡å¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> inputRef = useRef&lt;<span class="title class_">HTMLInputElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">    </span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(inputRef.<span class="property">current</span>?.<span class="property">value</span>);</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">defaultValue</span>=<span class="string">&#123;</span>&#x27;<span class="attr">default</span>&#x27;&#125; <span class="attr">ref</span>=<span class="string">&#123;inputRef&#125;/</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h3 id="å—æ§æ¨¡å¼"><a href="#å—æ§æ¨¡å¼" class="headerlink" title="å—æ§æ¨¡å¼"></a>å—æ§æ¨¡å¼</h3><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324003515209.png" alt="image-20250324003515209"></p><p>åè¿‡æ¥ï¼Œä»£ç å¯ä»¥æ”¹å˜è¡¨å•çš„ valueï¼Œå°±æ˜¯å—æ§æ¨¡å¼ã€‚</p><p>æ³¨æ„ï¼Œvalue å’Œ defaultValue ä¸ä¸€æ ·ï¼š</p><p>defaultValue ä¼šä½œä¸º value çš„åˆå§‹å€¼ï¼Œåé¢ç”¨æˆ·æ”¹å˜çš„æ˜¯ valueã€‚</p><p>è€Œä¸€æ—¦ä½ ç»™ input è®¾ç½®äº† valueï¼Œé‚£ç”¨æˆ·å°±ä¸èƒ½ä¿®æ”¹å®ƒäº†ï¼Œå¯ä»¥è¾“å…¥è§¦å‘ onChange äº‹ä»¶ï¼Œä½†æ˜¯è¡¨å•çš„å€¼ä¸ä¼šå˜ã€‚</p><p>ç”¨æˆ·è¾“å…¥ä¹‹ååœ¨ onChange äº‹ä»¶é‡Œæ‹¿åˆ°è¾“å…¥ï¼Œç„¶åé€šè¿‡ä»£ç å»è®¾ç½® valueã€‚</p><p>è¿™å°±æ˜¯å—æ§æ¨¡å¼ã€‚</p><blockquote><p>ä»€ä¹ˆæƒ…å†µç”¨å—æ§æ¨¡å¼ï¼šéœ€è¦å¯¹è¾“å…¥çš„å€¼åšå¤„ç†ä¹‹åè®¾ç½®åˆ°è¡¨å•çš„æ—¶å€™ï¼Œæˆ–è€…æ˜¯ä½ æƒ³å®æ—¶åŒæ­¥çŠ¶æ€å€¼åˆ°çˆ¶ç»„ä»¶ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&#x27;guang&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onChange</span>(<span class="params">event: ChangeEvent&lt;HTMLInputElement&gt;</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line">    <span class="title function_">setValue</span>(event.<span class="property">target</span>.<span class="property">value</span>.<span class="title function_">toUpperCase</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;value&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;onChange&#125;/</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•å†™å•æµ‹"><a href="#å¦‚ä½•å†™å•æµ‹" class="headerlink" title="å¦‚ä½•å†™å•æµ‹"></a>å¦‚ä½•å†™å•æµ‹</h2><p>ä¸»è¦ç”¨<code>@testing-library/react</code> è¿™ä¸ªåº“ï¼Œå®ƒæœ‰ä¸€äº› apiï¼š</p><ul><li>renderï¼šæ¸²æŸ“ç»„ä»¶ï¼Œè¿”å› container å®¹å™¨ dom å’Œå…¶ä»–çš„æŸ¥è¯¢ api</li><li>fireEventï¼šè§¦å‘æŸä¸ªå…ƒç´ çš„æŸä¸ªäº‹ä»¶</li><li>createEventï¼šåˆ›å»ºæŸä¸ªäº‹ä»¶ï¼ˆä¸€èˆ¬ä¸ç”¨è¿™æ ·åˆ›å»ºï¼‰</li><li>waitForï¼šç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆå†æ–­è¨€ï¼Œå¯ä»¥æŒ‡å®š timeout</li><li>actï¼šåŒ…è£¹çš„ä»£ç ä¼šæ›´æ¥è¿‘æµè§ˆå™¨é‡Œè¿è¡Œçš„æ–¹å¼</li><li>renderHookï¼šæ‰§è¡Œ hookï¼Œå¯ä»¥é€šè¿‡ result.current æ‹¿åˆ° hook è¿”å›å€¼</li></ul><p>å…¶å®ä¹Ÿæ²¡å¤šå°‘ä¸œè¥¿ã€‚</p><p>jest çš„ api åŠ ä¸Š @testing-libary&#x2F;react çš„è¿™äº› apiï¼Œå°±å¯ä»¥å†™ä»»ä½•ç»„ä»¶ã€hook çš„å•å…ƒæµ‹è¯•äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; render, fireEvent, createEvent, waitFor, act, renderHook &#125; <span class="keyword">from</span> <span class="string">&#x27;@testing-library/react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">MyComponent</span> <span class="keyword">from</span> <span class="string">&#x27;./MyComponent&#x27;</span>; <span class="comment">// å¯¼å…¥éœ€è¦æµ‹è¯•çš„ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 1: render</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;renders MyComponent correctly&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; container, getByText &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span>);</span><br><span class="line">  <span class="title function_">expect</span>(container.<span class="property">firstChild</span>).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="string">&#x27;Hello World&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 2: fireEvent</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;fires click event correctly&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; getByText &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span>);</span><br><span class="line">  <span class="keyword">const</span> button = <span class="title function_">getByText</span>(<span class="string">&#x27;Click Me&#x27;</span>);</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(button);</span><br><span class="line">  <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="string">&#x27;Button clicked!&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 3: createEventï¼ˆä¸€èˆ¬ä¸æ¨èç›´æ¥ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;creates custom event correctly&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> customEvent = createEvent.<span class="title function_">keyDown</span>(<span class="variable language_">document</span>.<span class="property">body</span>, &#123;</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;Enter&#x27;</span>,</span><br><span class="line">    <span class="attr">keyCode</span>: <span class="number">13</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="title function_">expect</span>(customEvent.<span class="property">key</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;Enter&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 4: waitFor</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;waits for asynchronous content to load&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; getByText, findByText &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span>);</span><br><span class="line">  fireEvent.<span class="title function_">click</span>(<span class="title function_">getByText</span>(<span class="string">&#x27;Load Data&#x27;</span>));</span><br><span class="line">  <span class="keyword">const</span> loadedElement = <span class="keyword">await</span> <span class="title function_">findByText</span>(<span class="string">&#x27;Data loaded!&#x27;</span>);</span><br><span class="line">  <span class="title function_">expect</span>(loadedElement).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 5: act</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;uses act to wrap async code&#x27;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">act</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; getByText &#125; = <span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">MyComponent</span> /&gt;</span></span>);</span><br><span class="line">    fireEvent.<span class="title function_">click</span>(<span class="title function_">getByText</span>(<span class="string">&#x27;Async Action&#x27;</span>));</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">waitFor</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">expect</span>(<span class="title function_">getByText</span>(<span class="string">&#x27;Action Complete&#x27;</span>)).<span class="title function_">toBeInTheDocument</span>();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¤ºä¾‹ 6: renderHook</span></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;renders hook and accesses current result&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; result &#125; = <span class="title function_">renderHook</span>(<span class="function">() =&gt;</span> <span class="title function_">useCustomHook</span>());</span><br><span class="line">  <span class="title function_">expect</span>(result.<span class="property">current</span>.<span class="property">value</span>).<span class="title function_">toBe</span>(<span class="string">&#x27;test value&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¦‚ä½•è°ƒè¯•"><a href="#å¦‚ä½•è°ƒè¯•" class="headerlink" title="å¦‚ä½•è°ƒè¯•"></a>å¦‚ä½•è°ƒè¯•</h2><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324004850306.png" alt="image-20250324004850306"></p><p>é€‰æ‹© chrome ç±»å‹çš„è°ƒè¯•é…ç½®ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324004858556.png" alt="image-20250324004858556"></p><p>æŠŠç«¯å£å·æ”¹ä¸º3000</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324004909125.png" alt="image-20250324004909125"></p><p>ä½†æ˜¯æˆ‘ä»¬è·‘çš„æ˜¯æ–°çš„æµè§ˆå™¨å®ä¾‹ï¼Œæ²¡æœ‰ç”¨æˆ·æ•°æ®ï¼Œä¹Ÿå°±æ²¡æœ‰ä½ å®‰è£…çš„æ’ä»¶</p><p>ç”¨æˆ·æ•°æ®æ˜¯ä¿å­˜åœ¨ userDataDir é‡Œçš„ï¼Œä¸€ä¸ª userDataDir å¯¹åº”ä¸€ä¸ªæµè§ˆå™¨å®ä¾‹ã€‚</p><p>è¿™æ ·å­å°±å¯ä»¥ç”¨æˆ‘ä»¬æµè§ˆå™¨çš„æ’ä»¶äº†</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324005414191.png" alt="image-20250324005414191"></p><p>æˆ–è€…ç›´æ¥false</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324005458410.png" alt="image-20250324005458410"></p><h2 id="Storybook"><a href="#Storybook" class="headerlink" title="Storybook"></a><code>Storybook</code></h2><h2 id="æµè§ˆå™¨çš„5ç§Observer"><a href="#æµè§ˆå™¨çš„5ç§Observer" class="headerlink" title="æµè§ˆå™¨çš„5ç§Observer"></a>æµè§ˆå™¨çš„5ç§<code>Observer</code></h2><ul><li>IntersectionObserverï¼šç›‘å¬å…ƒç´ å¯è§æ€§å˜åŒ–ï¼Œå¸¸ç”¨æ¥åšå…ƒç´ æ˜¾ç¤ºçš„æ•°æ®é‡‡é›†ã€å›¾ç‰‡çš„æ‡’åŠ è½½</li><li>MutationObserverï¼šç›‘å¬å…ƒç´ å±æ€§å’Œå­èŠ‚ç‚¹å˜åŒ–ï¼Œæ¯”å¦‚å¯ä»¥ç”¨æ¥åšå»ä¸æ‰çš„æ°´å°</li><li>ResizeObserverï¼šç›‘å¬å…ƒç´ å¤§å°å˜åŒ–</li><li>PerformanceObserverï¼šç›‘å¬ performance è®°å½•çš„è¡Œä¸ºï¼Œæ¥ä¸ŠæŠ¥æ•°æ®</li><li>ReportingObserverï¼šç›‘å¬è¿‡æ—¶çš„ apiã€æµè§ˆå™¨çš„ä¸€äº›å¹²é¢„è¡Œä¸ºçš„æŠ¥å‘Šï¼Œå¯ä»¥è®©æˆ‘ä»¬æ›´å…¨é¢çš„äº†è§£ç½‘é¡µ app çš„è¿è¡Œæƒ…å†µ</li></ul><h3 id="IntersectionObserver"><a href="#IntersectionObserver" class="headerlink" title="IntersectionObserver"></a>IntersectionObserver</h3><p><strong>IntersectionObserver å¯ä»¥ç›‘å¬ä¸€ä¸ªå…ƒç´ å’Œå¯è§†åŒºåŸŸç›¸äº¤éƒ¨åˆ†çš„æ¯”ä¾‹ï¼Œç„¶ååœ¨å¯è§†æ¯”ä¾‹è¾¾åˆ°æŸä¸ªé˜ˆå€¼çš„æ—¶å€™è§¦å‘å›è°ƒã€‚</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box1&quot;</span>&gt;</span>BOX111<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box2&quot;</span>&gt;</span>BOX222<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box1</span>,<span class="selector-id">#box2</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box1</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">500px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#box2</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intersectionObserver = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">entries</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;info:&#x27;</span>);</span><br><span class="line">        entries.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(item.<span class="property">target</span>, item.<span class="property">intersectionRatio</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">    <span class="attr">threshold</span>: [<span class="number">0.5</span>, <span class="number">1</span>]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">intersectionObserver.<span class="title function_">observe</span>( <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box1&#x27;</span>));</span><br><span class="line">intersectionObserver.<span class="title function_">observe</span>( <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#box2&#x27;</span>));</span><br></pre></td></tr></table></figure><h3 id="MutationObserver"><a href="#MutationObserver" class="headerlink" title="MutationObserver"></a>MutationObserver</h3><p><strong>MutationObserver å¯ä»¥ç›‘å¬å¯¹å…ƒç´ çš„å±æ€§çš„ä¿®æ”¹ã€å¯¹å®ƒçš„å­èŠ‚ç‚¹çš„å¢åˆ æ”¹ã€‚</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>&gt;</span>å…‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">background</span>: blue;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    box.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;red&#x27;</span>;</span><br><span class="line">&#125;,<span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> dom = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line">    dom.<span class="property">textContent</span> = <span class="string">&#x27;ä¸œä¸œä¸œ&#x27;</span>;</span><br><span class="line">    box.<span class="title function_">appendChild</span>(dom);</span><br><span class="line">&#125;,<span class="number">3000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;button&#x27;</span>)[<span class="number">0</span>].<span class="title function_">remove</span>();</span><br><span class="line">&#125;,<span class="number">5000</span>);</span><br></pre></td></tr></table></figure><p>2s çš„æ—¶å€™ä¿®æ”¹èƒŒæ™¯é¢œè‰²ä¸ºçº¢è‰²ï¼Œ3s çš„æ—¶å€™æ·»åŠ ä¸€ä¸ª button çš„å­å…ƒç´ ï¼Œ5s çš„æ—¶å€™åˆ é™¤ç¬¬ä¸€ä¸ª buttonã€‚</p><p>ç„¶åç›‘å¬å®ƒçš„å˜åŒ–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mutationObserver = <span class="keyword">new</span> <span class="title class_">MutationObserver</span>(<span class="function">(<span class="params">mutationsList</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(mutationsList)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">mutationObserver.<span class="title function_">observe</span>(box, &#123;</span><br><span class="line">    <span class="attr">attributes</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">childList</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/a7e836594b754b2e8d262c3fee602ec9tplv-k3u1fbpfcp-watermark.gif" alt="img"></p><p>ç¬¬ä¸€æ¬¡æ”¹å˜çš„æ˜¯ attributesï¼Œå±æ€§æ˜¯ styleï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/7d2b3290ac244c319a307dfe74d9aad8tplv-k3u1fbpfcp-watermark.png"></p><p>ç¬¬äºŒæ¬¡æ”¹å˜çš„æ˜¯ childListï¼Œæ·»åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/35be2e97254f41d9b04e8e7544a1c12btplv-k3u1fbpfcp-watermark.png"></p><p>ç¬¬ä¸‰æ¬¡ä¹Ÿæ˜¯æ”¹å˜çš„ childListï¼Œåˆ é™¤äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/2e22cf73b71342069320a7067fc7d9eftplv-k3u1fbpfcp-watermark.png"></p><h3 id="ResizeObserver"><a href="#ResizeObserver" class="headerlink" title="ResizeObserver"></a>ResizeObserver</h3><p>å…ƒç´ å¯ä»¥ç”¨ ResizeObserver ç›‘å¬å¤§å°çš„æ”¹å˜ï¼Œå½“ widthã€height è¢«ä¿®æ”¹æ—¶ä¼šè§¦å‘å›è°ƒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> resizeObserver = <span class="keyword">new</span> <span class="title class_">ResizeObserver</span>(<span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰å¤§å°&#x27;</span>, entries)</span><br><span class="line">&#125;);</span><br><span class="line">resizeObserver.<span class="title function_">observe</span>(box);</span><br></pre></td></tr></table></figure><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324010208225.png" alt="image-20250324010208225"></p><h3 id="PerformanceObserver"><a href="#PerformanceObserver" class="headerlink" title="PerformanceObserver"></a>PerformanceObserver</h3><p>PerformanceObserver ç”¨äºç›‘å¬è®°å½• performance æ•°æ®çš„è¡Œä¸ºï¼Œä¸€æ—¦è®°å½•äº†å°±ä¼šè§¦å‘å›è°ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å›è°ƒé‡ŒæŠŠè¿™äº›æ•°æ®ä¸ŠæŠ¥ã€‚</p><p>æ¯”å¦‚ performance å¯ä»¥ç”¨ mark æ–¹æ³•è®°å½•æŸä¸ªæ—¶é—´ç‚¹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">performance.<span class="title function_">mark</span>(<span class="string">&#x27;registered-observer&#x27;</span>);</span><br></pre></td></tr></table></figure><p>ç”¨ measure æ–¹æ³•è®°å½•æŸä¸ªæ—¶é—´æ®µï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">performance.<span class="title function_">measure</span>(<span class="string">&#x27;button clicked&#x27;</span>, <span class="string">&#x27;from&#x27;</span>, <span class="string">&#x27;to&#x27;</span>);</span><br></pre></td></tr></table></figure><p>åä¸¤ä¸ªä¸ªå‚æ•°æ˜¯æ—¶é—´ç‚¹ï¼Œä¸ä¼ ä»£è¡¨ä»å¼€å§‹åˆ°ç°åœ¨ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨ PerformanceObserver ç›‘å¬å®ƒä»¬ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;measureClick()&quot;</span>&gt;</span>Measure<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://p9-passport.byteacctimg.com/img/user-avatar/4e9e751e2b32fb8afbbf559a296ccbf2~300x300.image&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">const</span> performanceObserver = <span class="keyword">new</span> <span class="title class_">PerformanceObserver</span>(<span class="function"><span class="params">list</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      list.<span class="title function_">getEntries</span>().<span class="title function_">forEach</span>(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">console</span>.<span class="title function_">log</span>(entry);<span class="comment">// ä¸ŠæŠ¥</span></span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript">    performanceObserver.<span class="title function_">observe</span>(&#123;<span class="attr">entryTypes</span>: [<span class="string">&#x27;resource&#x27;</span>, <span class="string">&#x27;mark&#x27;</span>, <span class="string">&#x27;measure&#x27;</span>]&#125;);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    performance.<span class="title function_">mark</span>(<span class="string">&#x27;registered-observer&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">measureClick</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      performance.<span class="title function_">measure</span>(<span class="string">&#x27;button clicked&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»º PerformanceObserver å¯¹è±¡ï¼Œç›‘å¬ markï¼ˆæ—¶é—´ç‚¹ï¼‰ã€measureï¼ˆæ—¶é—´æ®µï¼‰ã€resourceï¼ˆèµ„æºåŠ è½½è€—æ—¶ï¼‰<br>è¿™ä¸‰ç§è®°å½•æ—¶é—´çš„è¡Œä¸ºã€‚</p><p>ç„¶åæˆ‘ä»¬ç”¨ mark è®°å½•äº†æŸä¸ªæ—¶é—´ç‚¹ï¼Œç‚¹å‡» button çš„æ—¶å€™ç”¨ measure è®°å½•äº†æŸä¸ªæ—¶é—´æ®µçš„æ•°æ®ï¼Œè¿˜åŠ è½½äº†ä¸€ä¸ªå›¾ç‰‡ã€‚</p><p>å½“è¿™äº›è®°å½•è¡Œä¸ºå‘ç”Ÿçš„æ—¶å€™ï¼Œå¸Œæœ›èƒ½è§¦å‘å›è°ƒï¼Œåœ¨é‡Œé¢å¯ä»¥ä¸ŠæŠ¥ã€‚</p><p>æˆ‘ä»¬åœ¨æµè§ˆå™¨è·‘ä¸€ä¸‹è¯•è¯•ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/c5d336a321b147f2ab655e1c6857d55dtplv-k3u1fbpfcp-watermark.gif"></p><p>å¯ä»¥çœ‹åˆ° mark çš„æ—¶é—´ç‚¹è®°å½•ã€èµ„æºåŠ è½½çš„è€—æ—¶ã€ç‚¹å‡»æŒ‰é’®çš„ measure æ—¶é—´æ®µè®°å½•éƒ½ç›‘å¬åˆ°äº†ã€‚</p><p>åˆ†åˆ«æ‰“å°äº†è¿™ä¸‰ç§è®°å½•è¡Œä¸ºçš„æ•°æ®ï¼š</p><p>markï¼š<br><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/4aacfb0969534307b2718f27e3b52472tplv-k3u1fbpfcp-watermark.png"></p><p>å›¾ç‰‡åŠ è½½ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/11a00ac93d614c50a272728b4afd319dtplv-k3u1fbpfcp-watermark.png"></p><p>measureï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/0795f5a92e2947caa1d2c8939912dab3tplv-k3u1fbpfcp-watermark.png"></p><p>æœ‰äº†è¿™äº›æ•°æ®ï¼Œå°±å¯ä»¥ä¸ŠæŠ¥ä¸Šå»åšæ€§èƒ½åˆ†æäº†ã€‚</p><h2 id="ReportingObserver"><a href="#ReportingObserver" class="headerlink" title="ReportingObserver"></a>ReportingObserver</h2><p>å½“æµè§ˆå™¨è¿è¡Œåˆ°è¿‡æ—¶ï¼ˆdeprecationï¼‰çš„ api çš„æ—¶å€™ï¼Œä¼šåœ¨æ§åˆ¶å°æ‰“å°ä¸€ä¸ªè¿‡æ—¶çš„æŠ¥å‘Š:</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/d7d6bcc99daa4c588ccf9005fbfbb453tplv-k3u1fbpfcp-watermark.png"></p><p>æµè§ˆå™¨è¿˜ä¼šåœ¨ä¸€äº›æƒ…å†µä¸‹å¯¹ç½‘é¡µè¡Œä¸ºåšä¸€äº›å¹²é¢„ï¼ˆinterventionï¼‰ï¼Œæ¯”å¦‚ä¼šæŠŠå ç”¨ cpu å¤ªå¤šçš„å¹¿å‘Šçš„ iframe åˆ æ‰ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/f7bb6903a6f846908cde63064336ceabtplv-k3u1fbpfcp-watermark.png"></p><p>ä¼šåœ¨ç½‘ç»œæ¯”è¾ƒæ…¢çš„æ—¶å€™æŠŠå›¾ç‰‡æ›¿æ¢ä¸ºå ä½å›¾ç‰‡ï¼Œç‚¹å‡»æ‰ä¼šåŠ è½½ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/9fa5be3e31ff4846ad8b90b1a61e6ee7tplv-k3u1fbpfcp-watermark.png"></p><p>è¿™äº›å¹²é¢„éƒ½æ˜¯æµè§ˆå™¨åšçš„ï¼Œä¼šåœ¨æ§åˆ¶å°æ‰“å°ä¸€ä¸ªæŠ¥å‘Šï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/7d5f7d6e298a49e8af99792f696ae803tplv-k3u1fbpfcp-watermark.png"></p><p>è¿™äº›å¹²é¢„æˆ–è€…è¿‡æ—¶çš„ api å¹¶ä¸æ˜¯æŠ¥é”™ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨é”™è¯¯ç›‘å¬çš„æ–¹å¼æ¥æ‹¿åˆ°ï¼Œä½†è¿™äº›æƒ…å†µå¯¹ç½‘é¡µ app æ¥è¯´å¯èƒ½ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼š</p><p>æ¯”å¦‚æˆ‘è¿™ä¸ªç½‘é¡µå°±æ˜¯ä¸ºäº†å±•ç¤ºå¹¿å‘Šçš„ï¼Œä½†æµè§ˆå™¨ä¸€å¹²é¢„ç»™æˆ‘æŠŠå¹¿å‘Šåˆ æ‰äº†ï¼Œæˆ‘å´ä¸çŸ¥é“ã€‚å¦‚æœæˆ‘çŸ¥é“çš„è¯æˆ–è®¸å¯ä»¥ä¼˜åŒ–ä¸‹ iframeã€‚</p><p>æ¯”å¦‚æˆ‘è¿™ä¸ªç½‘é¡µçš„å›¾ç‰‡å¾ˆé‡è¦ï¼Œç»“æœæµè§ˆå™¨ä¸€å¹²é¢„ç»™æˆ‘æ¢æˆå ä½å›¾äº†ï¼Œæˆ‘å´ä¸çŸ¥é“ã€‚å¦‚æœæˆ‘çŸ¥é“çš„è¯å¯èƒ½ä¼šä¼˜åŒ–ä¸‹å›¾ç‰‡å¤§å°ã€‚</p><p>æ‰€ä»¥è‡ªç„¶ä¹Ÿè¦ç›‘å¬ï¼Œæ‰€ä»¥æµè§ˆå™¨æä¾›äº† ReportingObserver çš„ api ç”¨æ¥ç›‘å¬è¿™äº›æŠ¥å‘Šçš„æ‰“å°ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°è¿™äº›æŠ¥å‘Šç„¶åä¸Šä¼ ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> reportingObserver = <span class="keyword">new</span> <span class="title class_">ReportingObserver</span>(<span class="function">(<span class="params">reports, observer</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> report <span class="keyword">of</span> reports) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(report.<span class="property">body</span>);<span class="comment">//ä¸ŠæŠ¥</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;<span class="attr">types</span>: [<span class="string">&#x27;intervention&#x27;</span>, <span class="string">&#x27;deprecation&#x27;</span>]&#125;);</span><br><span class="line"></span><br><span class="line">reportingObserver.<span class="title function_">observe</span>();</span><br></pre></td></tr></table></figure><p><strong>ReportingObserver å¯ä»¥ç›‘å¬è¿‡æ—¶çš„ apiã€æµè§ˆå™¨å¹²é¢„ç­‰æŠ¥å‘Šç­‰çš„æ‰“å°ï¼Œåœ¨å›è°ƒé‡Œä¸ŠæŠ¥ï¼Œè¿™äº›æ˜¯é”™è¯¯ç›‘å¬æ— æ³•ç›‘å¬åˆ°ä½†å¯¹äº†è§£ç½‘é¡µè¿è¡Œæƒ…å†µå¾ˆæœ‰ç”¨çš„æ•°æ®ã€‚</strong></p><h2 id="ç½‘é¡µçš„å„ç§è·ç¦»"><a href="#ç½‘é¡µçš„å„ç§è·ç¦»" class="headerlink" title="ç½‘é¡µçš„å„ç§è·ç¦»"></a>ç½‘é¡µçš„å„ç§è·ç¦»</h2><p>è¿™ç±»å±æ€§æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬æ•´ä½“è¿‡äº†ä¸€éï¼š</p><ul><li><p>é¼ æ ‡ç›¸å…³å±æ€§</p><ul><li><p>e.pageYï¼šé¼ æ ‡è·ç¦»æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»</p></li><li><p>e.clientYï¼šé¼ æ ‡è·ç¦»å¯è§†åŒºåŸŸé¡¶éƒ¨çš„è·ç¦»</p></li><li><p>e.offsetYï¼šé¼ æ ‡è·ç¦»è§¦å‘äº‹ä»¶å…ƒç´ é¡¶éƒ¨çš„è·ç¦»</p></li><li><p>e.screenYï¼šé¼ æ ‡è·ç¦»å±å¹•é¡¶éƒ¨çš„è·ç¦»</p></li></ul></li><li><p>é¡µé¢æ»šåŠ¨ &amp; å…ƒç´ æ»šåŠ¨</p><ul><li><p>window.scrollYï¼šé¡µé¢æ»šåŠ¨çš„è·ç¦»ï¼Œä¹Ÿå« window.pageYOffsetï¼Œç­‰åŒäº document.documentElement.scrollTop</p></li><li><p>element.scrollTopï¼šå…ƒç´ æ»šåŠ¨çš„è·ç¦»</p></li><li><p>element.clientTopï¼šä¸Šè¾¹æ¡†é«˜åº¦</p></li><li><p>element.offsetTopï¼šç›¸å¯¹æœ‰ position çš„çˆ¶å…ƒç´ çš„å†…å®¹é¡¶éƒ¨çš„è·ç¦»ï¼Œå¯ä»¥é€’å½’ç´¯åŠ ï¼ŒåŠ ä¸Š clientTopï¼Œç®—å‡ºåˆ°æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»</p></li></ul></li><li><p>å…ƒç´ å°ºå¯¸</p><ul><li><p>clientHeightï¼šå†…å®¹é«˜åº¦ï¼Œä¸åŒ…æ‹¬è¾¹æ¡†</p></li><li><p>offsetHeightï¼šåŒ…å«è¾¹æ¡†çš„é«˜åº¦</p></li><li><p>scrollHeightï¼šæ»šåŠ¨åŒºåŸŸçš„é«˜åº¦ï¼Œä¸åŒ…æ‹¬è¾¹æ¡†</p></li><li><p>window.innerHeightï¼šçª—å£çš„é«˜åº¦</p></li></ul></li><li><p>å…ƒç´ çŸ©å½¢ä¿¡æ¯</p><ul><li>element.getBoundingClientRectï¼šæ‹¿åˆ° widthã€heightã€topã€left å±æ€§ï¼Œå…¶ä¸­ topã€left æ˜¯å…ƒç´ è·ç¦»å¯è§†åŒºåŸŸçš„è·ç¦»ï¼Œwidthã€height ç»å¤§å¤šæ•°æƒ…å†µä¸‹ç­‰åŒ offsetHeightã€offsetWidthï¼Œä½†æ—‹è½¬ä¹‹åå°±ä¸ä¸€æ ·äº†ï¼Œæ‹¿åˆ°çš„æ˜¯åŒ…å›´ç›’çš„å®½é«˜</li></ul></li></ul><p>å…¶ä¸­ï¼Œè¿˜è¦æ³¨æ„ react çš„åˆæˆäº‹ä»¶æ²¡æœ‰ offsetY å±æ€§ï¼Œå¯ä»¥è‡ªå·±ç®—ï¼Œreact-use çš„ useMouse çš„ hook å°±æ˜¯è‡ªå·±ç®—çš„ï¼Œä¹Ÿå¯ä»¥ç”¨ e.nativeEvent.offsetY æ¥æ‹¿åˆ°ã€‚</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324010342354.png" alt="image-20250324010342354"></p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324010346225.png" alt="image-20250324010346225"></p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324010433761.png" alt="image-20250324010433761"></p><p>react äº‹ä»¶æ˜¯åˆæˆäº‹ä»¶ï¼Œæ‰€ä»¥å®ƒå°‘äº†ä¸€äº›åŸç”Ÿäº‹ä»¶çš„å±æ€§ï¼Œæ¯”å¦‚è¿™é‡Œçš„ offsetYï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»çš„ä½ç½®è·ç¦»è§¦å‘äº‹ä»¶çš„å…ƒç´ é¡¶éƒ¨çš„è·ç¦»ã€‚</p><p>ä½ å†™ä»£ç çš„æ—¶å€™ ts å°±æŠ¥é”™äº†ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/25e744fc467f4197b8364b8bacd23d0btplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>é‚£å’‹åŠå‘¢ï¼Ÿ</p><p>react-use æä¾›çš„ useMouse çš„ hook å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/b366be10d2cb4119a009432a37710118tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å®ƒæ˜¯ç”¨ e.pageY å‡å» getBoundingClientRect().top å‡å» window.pageYOffset ç®—å‡ºæ¥çš„ã€‚</p><p>è¿™é‡Œçš„ getBoundingClientRect æ˜¯è¿”å›å…ƒç´ è·ç¦»å¯ä»¥å¯è§†åŒºåŸŸçš„è·ç¦»å’Œå®½é«˜çš„ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/6bef060e51ed48c189742a08cf961c79tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>è€Œ window.pageYOffset ä¹Ÿå« window.scrollYï¼Œé¡¾åæ€ä¹‰å°±æ˜¯çª—å£æ»šåŠ¨çš„è·ç¦»ã€‚</p><p>æƒ³ä¸€ä¸‹ï¼ŒpageY å»äº† window.scrollYï¼Œå»äº† getBoundingClientRect().topï¼Œå‰©ä¸‹çš„å¯ä¸å°±æ˜¯ offsetY ä¹ˆï¼š</p><h1 id="Hookså°è£…-1"><a href="#Hookså°è£…-1" class="headerlink" title="Hookså°è£…"></a>Hookså°è£…</h1><ul><li><p>hookå°è£…çš„ä¸‰ç§æ–¹æ³•</p><ul><li><p>ä¼ å…¥ React Element ç„¶å cloneElement</p></li><li><p>ä¼ å…¥ ref ç„¶åæ‹¿åˆ° dom æ‰§è¡Œ addEventListener</p></li><li><p>è¿”å› props å¯¹è±¡æˆ–è€…äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè°ƒç”¨è€…è‡ªå·±ç»‘å®š</p></li></ul></li></ul><h2 id="ä¼ Element"><a href="#ä¼ Element" class="headerlink" title="ä¼ Element"></a>ä¼ Element</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; cloneElement, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Element</span> = (<span class="function">(<span class="params">state: boolean</span>) =&gt;</span> <span class="title class_">React</span>.<span class="property">ReactElement</span>) | <span class="title class_">React</span>.<span class="property">ReactElement</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useHover = (<span class="attr">element</span>: <span class="title class_">Element</span>): [<span class="title class_">React</span>.<span class="property">ReactElement</span>, boolean] =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, setState] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMouseEnter</span> = (<span class="params">originalOnMouseEnter?: any</span>) =&gt; <span class="function">(<span class="params">event: any</span>) =&gt;</span> &#123;</span><br><span class="line">    originalOnMouseEnter?.(event);</span><br><span class="line">    <span class="title function_">setState</span>(<span class="literal">true</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onMouseLeave</span> = (<span class="params">originalOnMouseLeave?: any</span>) =&gt; <span class="function">(<span class="params">event: any</span>) =&gt;</span> &#123;</span><br><span class="line">    originalOnMouseLeave?.(event);</span><br><span class="line">    <span class="title function_">setState</span>(<span class="literal">false</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> element === <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    element = <span class="title function_">element</span>(state);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> el = <span class="title function_">cloneElement</span>(element, &#123;</span><br><span class="line">    <span class="attr">onMouseEnter</span>: <span class="title function_">onMouseEnter</span>(element.<span class="property">props</span>.<span class="property">onMouseEnter</span>),</span><br><span class="line">    <span class="attr">onMouseLeave</span>: <span class="title function_">onMouseLeave</span>(element.<span class="property">props</span>.<span class="property">onMouseLeave</span>),</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [el, state];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> useHover;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„å¦‚æœä¼ å…¥çš„ React Element æœ¬èº«æœ‰ onMouseEnterã€onMouseLeave çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¦å…ˆè°ƒç”¨ä¸‹ï¼š</p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324011631621.png" alt="image-20250324011631621"></p><p>æœ€åç”¨ cloneElement å¤åˆ¶ ReactElementï¼Œç»™å®ƒæ·»åŠ  onMouseEnterã€onMouseLeave äº‹ä»¶ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">element</span> = (<span class="params">hovered: boolean</span>) =&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Hover me! &#123;hovered &amp;&amp; &#x27;Thanks&#x27;&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [hoverable, hovered] = <span class="title function_">useHover</span>(element);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;hoverable&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;hovered ? &#x27;HOVERED&#x27; : &#x27;&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h2 id="ä¼ Ref"><a href="#ä¼ Ref" class="headerlink" title="ä¼ Ref"></a>ä¼ Ref</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">RefObject</span>, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">Options</span> &#123;</span><br><span class="line">  onEnter?: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">  onLeave?: <span class="function">() =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">  onChange?: <span class="function">(<span class="params">isHovering: boolean</span>) =&gt;</span> <span class="keyword">void</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (<span class="attr">ref</span>: <span class="title class_">RefObject</span>&lt;<span class="title class_">HTMLElement</span>&gt;, options?: <span class="title class_">Options</span>): <span class="function"><span class="params">boolean</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; onEnter, onLeave, onChange &#125; = options || &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> [isEnter, setIsEnter] = useState&lt;boolean&gt;(<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        ref.<span class="property">current</span>?.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            onEnter?.();</span><br><span class="line">            <span class="title function_">setIsEnter</span>(<span class="literal">true</span>);</span><br><span class="line">            onChange?.(<span class="literal">true</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    </span><br><span class="line">        ref.<span class="property">current</span>?.<span class="title function_">addEventListener</span>(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            onLeave?.();</span><br><span class="line">            <span class="title function_">setIsEnter</span>(<span class="literal">false</span>);</span><br><span class="line">            onChange?.(<span class="literal">false</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, [ref]);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> isEnter;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useHover &#125; <span class="keyword">from</span> <span class="string">&#x27;ahooks&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> ref = useRef&lt;<span class="title class_">HTMLDivElement</span>&gt;(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> isHovering = <span class="title function_">useHover</span>(ref);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;ref&#125;</span>&gt;</span>&#123;isHovering ? &#x27;hover&#x27; : &#x27;leaveHover&#x27;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="sass-classnames"><a href="#sass-classnames" class="headerlink" title="sass+classnames"></a>sass+classnames</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm install --save sass</span><br><span class="line">cnpm install classnames</span><br></pre></td></tr></table></figure><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/image-20250324012407738.png" alt="image-20250324012407738"></p><p><img src="/2025/03/23/%E5%89%8D%E7%AB%AF-%E5%91%A8%E6%8A%A5-%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E5%91%A8%E6%8A%A5-1/478d424e5432401eac1e3d4587656537tplv-k3u1fbpfcp-jj-mark0000q75.png"></p><p>å½“ className çš„ç¡®å®šéœ€è¦ä¸€æ®µå¤æ‚è®¡ç®—é€»è¾‘çš„æ—¶å€™ï¼Œå°±ç”¨ classnames è¿™ä¸ªåŒ…ã€‚</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.calendar-month</span> &#123;</span><br><span class="line">  &amp;-<span class="selector-tag">body</span> &#123;</span><br><span class="line">    &amp;-row &#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;-cell &#123;</span><br><span class="line">      <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">      <span class="comment">//padding: 10px;</span></span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#ccc</span>;</span><br><span class="line">      <span class="attribute">overflow</span>: hidden;</span><br><span class="line">      &amp;-current &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#000</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      &amp;-date &#123;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">        &amp;-selected &#123;</span><br><span class="line">          <span class="attribute">background</span>: blue;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">          <span class="attribute">text-align</span>: center;</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">          <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">renderDays</span>(<span class="params"></span></span><br><span class="line"><span class="params">    days: <span class="built_in">Array</span>&lt;&#123; date: Dayjs, currentMonth: boolean&#125;&gt;,</span></span><br><span class="line"><span class="params">    dateRender: MonthCalendarProps[<span class="string">&#x27;dateRender&#x27;</span>],</span></span><br><span class="line"><span class="params">    dateInnerContent:  MonthCalendarProps[<span class="string">&#x27;dateInnerContent&#x27;</span>]</span></span><br><span class="line"><span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> rows = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++ ) &#123;</span><br><span class="line">        <span class="keyword">const</span> row = [];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">7</span>; j++) &#123;</span><br><span class="line">            <span class="keyword">const</span> item = days[i * <span class="number">7</span> + j];</span><br><span class="line">            row[j] = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                &quot;<span class="attr">calendar-month-body-cell</span> &quot; + (<span class="attr">item.currentMonth</span> ? &#x27;<span class="attr">calendar-month-body-cell-current</span>&#x27; <span class="attr">:</span> &#x27;&#x27;)</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123;</span></span><br><span class="line"><span class="language-xml">                    dateRender ? dateRender(item.date) : (</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;calendar-month-body-cell-date&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;calendar-month-body-cell-date-value&quot;</span>&gt;</span>&#123;item.date.date()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;calendar-month-body-cell-date-content&quot;</span>&gt;</span>&#123;dateInnerContent?.(item.date)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    )</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        &#125;</span><br><span class="line">        rows.<span class="title function_">push</span>(row);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> rows.<span class="title function_">map</span>(<span class="function"><span class="params">row</span> =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;calendar-month-body-row&quot;</span>&gt;</span>&#123;row&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="styled-components"><a href="#styled-components" class="headerlink" title="styled-components"></a>styled-components</h2><h2 id="css-module"><a href="#css-module" class="headerlink" title="css module"></a>css module</h2><h2 id="tailwind"><a href="#tailwind" class="headerlink" title="tailwind"></a>tailwind</h2><h1 id="Animation-1"><a href="#Animation-1" class="headerlink" title="Animation"></a>Animation</h1><h2 id="react-spring-web"><a href="#react-spring-web" class="headerlink" title="react-spring&#x2F;web"></a>react-spring&#x2F;web</h2><h2 id="use-gesture-react"><a href="#use-gesture-react" class="headerlink" title="use-gesture&#x2F;react"></a>use-gesture&#x2F;react</h2><h2 id="react-transition-group"><a href="#react-transition-group" class="headerlink" title="react-transition-group"></a>react-transition-group</h2><ul><li><code>Transition</code>ã€<code>CSSTransition</code>ã€<code>TransitionGroup</code>ã€<code>SwitchTransition</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node+Reactå®æˆ˜-è®°è´¦æœ¬â€”ç¯å¢ƒæ­å»º</title>
      <link href="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<p>æœ¬åšå®¢åŸºäºæ˜é‡‘å°å†Œå­ã€Š<a href="https://juejin.cn/book/6966551262766563328?utm_source=course_list">Node + React å®æˆ˜ï¼šä» 0 åˆ° 1 å®ç°è®°è´¦æœ¬</a>ã€‹çš„å†…å®¹è¿›è¡Œæ•´åˆä¸ç¼–å†™ï¼Œæ—¨åœ¨æ„å»ºä¸€ä¸ªç³»ç»Ÿçš„çŸ¥è¯†ç½‘ç»œã€‚</p><h1 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h1><ul><li>eggjs</li><li>react</li><li>Mysql</li><li>DBever</li></ul><h1 id="å¿…å¤‡å·¥å…·"><a href="#å¿…å¤‡å·¥å…·" class="headerlink" title="å¿…å¤‡å·¥å…·"></a>å¿…å¤‡å·¥å…·</h1><ul><li><a href="https://www.postman.com/downloads/">Postman</a><ul><li>ç”¨äºè°ƒè¯•åç«¯æ¥å£</li></ul></li><li><a href="https://dbeaver.io/download/">DBeaver</a><ul><li>å¯è§†åŒ–æ•°æ®åº“å·¥å…·</li></ul></li></ul><h1 id="eggé¡¹ç›®åˆ›å»º"><a href="#eggé¡¹ç›®åˆ›å»º" class="headerlink" title="eggé¡¹ç›®åˆ›å»º"></a>eggé¡¹ç›®åˆ›å»º</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir egg-example &amp;&amp; cd egg-example</span><br><span class="line">$ cnpm init egg --type=simple</span><br><span class="line">$ cnpm i</span><br></pre></td></tr></table></figure><h2 id="é¡¹ç›®æ‰€éœ€é…ç½®"><a href="#é¡¹ç›®æ‰€éœ€é…ç½®" class="headerlink" title="é¡¹ç›®æ‰€éœ€é…ç½®"></a>é¡¹ç›®æ‰€éœ€é…ç½®</h2><h3 id="postæ–¹æ³•"><a href="#postæ–¹æ³•" class="headerlink" title="postæ–¹æ³•"></a><code>post</code>æ–¹æ³•</h3><p>[å®‰å…¨å¨èƒ csrf çš„é˜²èŒƒã€å³ç½‘ç»œè¯·æ±‚çš„å®‰é˜²ç­–ç•¥ï¼Œä½  <code>Egg</code> å¯åŠ¨çš„æ˜¯æœ¬åœ°åœ°å€<code>http://127.0.0.1:7001</code> ï¼Œä½†æ˜¯ä½ è¯·æ±‚çš„ <code>POST</code> æˆ– <code>GET</code> æ¥å£æ˜¯éæœ¬åœ°è®¡ç®—æœºï¼ˆåˆ«äººçš„ç”µè„‘ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ <code>Postman</code> å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šè§¦å‘å®‰é˜²ç­–ç•¥ã€‚</p><p>å‰å¾€ <code>config/config.default.js</code> åšå¥½ç™½åå•é…ç½®ï¼Œè¿™é‡Œæˆ‘ç›´æ¥å…¨éƒ¨å…è®¸è¯·æ±‚ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="property">security</span> = &#123;</span><br><span class="line">  <span class="attr">csrf</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">ignoreJSON</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">domainWhiteList</span>: [ <span class="string">&#x27;*&#x27;</span> ], <span class="comment">// é…ç½®ç™½åå•</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Eggjsä½¿ç”¨å‰ç«¯æ¨¡æ¿egg-view-ejs"><a href="#Eggjsä½¿ç”¨å‰ç«¯æ¨¡æ¿egg-view-ejs" class="headerlink" title="Eggjsä½¿ç”¨å‰ç«¯æ¨¡æ¿egg-view-ejs"></a>Eggjsä½¿ç”¨å‰ç«¯æ¨¡æ¿egg-view-ejs</h3><p>æˆ‘ä»¬å¼€å‘ä¸€äº›ç®€å•çš„ç½‘é¡µï¼Œæƒ³å¿«é€Ÿéƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ä¸Šï¼Œå°±å¯ä»¥ä½¿ç”¨å‰ç«¯æ¨¡æ¿çš„å¼€å‘å½¢å¼ã€‚ä¸‹é¢ä»‹ç»è¯¥ç§æ–¹å¼å¦‚ä½•æ“ä½œï¼š</p><p>é¦–å…ˆå®‰è£…æ’ä»¶ <code>egg-view-ejs</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install egg-view-ejs -save</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>config/plugin.js</code> é‡Œé¢å£°æ˜éœ€è¦ç”¨åˆ°çš„æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">ejs</span>: &#123;</span><br><span class="line">    <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">package</span>: <span class="string">&#x27;egg-view-ejs&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€æˆ‘ä»¬éœ€è¦å» <code>config/config.default.js</code> é‡Œé…ç½® <code>ejs</code> ï¼Œè¿™ä¸€æ­¥æˆ‘ä»¬ä¼šå°† <code>.ejs</code> çš„åç¼€æ”¹æˆ <code>.html</code> çš„åç¼€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="property">view</span> = &#123;</span><br><span class="line">  <span class="attr">mapping</span>: &#123;<span class="string">&#x27;.html&#x27;</span>: <span class="string">&#x27;ejs&#x27;</span>&#125;  <span class="comment">//å·¦è¾¹å†™æˆ.htmlåç¼€ï¼Œä¼šè‡ªåŠ¨æ¸²æŸ“.htmlæ–‡ä»¶</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°çš„é…ç½®ï¼ŒæŒ‡çš„æ˜¯å°† <code>view</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>.html</code> åç¼€çš„æ–‡ä»¶ï¼Œè¯†åˆ«ä¸º <code>.ejs</code>ã€‚</p><p>æ¥ç€ï¼Œåœ¨ <code>app</code> ç›®å½•ä¸‹åˆ›å»º <code>view</code> æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æ–°å»ºä¸€ä¸ª <code>index.html</code> æ–‡ä»¶ï¼Œä½œä¸ºå‰ç«¯æ¨¡æ¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%-title%&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨æ¨¡æ¿æ•°æ® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&lt;%-title%&gt;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šåœ¨ <code>Controller</code> å†…æŠŠå˜é‡æ³¨å…¥åˆ° <code>index.html</code> æ–‡ä»¶ï¼Œæ¨¡æ¿é€šè¿‡ <code>&lt;%-xx%&gt;</code>å…³é”®å­—è·å–åˆ°ä¼ å…¥çš„å˜é‡ã€‚</p><p>ä¸‹é¢ä¿®æ”¹ <code>controller/home.js</code> ä¸‹çš„ <code>index</code> æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="comment">// ctx.render é»˜è®¤ä¼šå» view æ–‡ä»¶å¤¹å¯»æ‰¾ index.htmlï¼Œè¿™æ˜¯ Egg çº¦å®šå¥½çš„ã€‚</span></span><br><span class="line">  <span class="keyword">await</span> ctx.<span class="title function_">render</span>(<span class="string">&#x27;index.html&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;æˆ‘æ˜¯å°¼å…‹é™ˆ&#x27;</span>, <span class="comment">// å°† title ä¼ å…¥ index.html</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°è¯•åœ¨æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:7001/</code>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/1d31534c47314bfe9dc3cc7800a58710_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><p>ä¸Šè¿°ä»£ç åœ¨æœåŠ¡ç«¯å°±å·²ç»æ„å»ºå®Œæ¯•ï¼Œè¾“å‡ºçš„æ˜¯ä¸€ä¸ªçº¯é™æ€çš„ <code>HTML</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨å³é”®ç‚¹å‡»ã€Œæ˜¾ç¤ºç½‘é¡µæºä»£ç ã€ï¼ŒæŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/566d2f0bbaac499d90399e638d9b4f85_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨æ¸²æŸ“çš„ç½‘é¡µä¸Šçœ‹åˆ°çš„å†…å®¹ï¼Œå¦‚æœåœ¨ä¸Šè¿°æºä»£ç é¡µé¢å†…éƒ½èƒ½æ‰¾åˆ°å“åº”çš„éƒ¨åˆ†ï¼Œé‚£å¯ä»¥ç†è§£ä¸ºæ˜¯æœåŠ¡ç«¯ç›´æ¥è¾“å‡ºçš„ <code>HTML</code> æ¸²æŸ“çš„ã€‚</p><h3 id="mysqlä¿¡æ¯é…ç½®"><a href="#mysqlä¿¡æ¯é…ç½®" class="headerlink" title="mysqlä¿¡æ¯é…ç½®"></a>mysqlä¿¡æ¯é…ç½®</h3><p><code>config.default.js</code> çš„æ•°æ®åº“é…ç½®é¡¹ä¸­çš„æ•°æ®åº“åç§°ä¿®æ”¹ä¸€ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exports</span>.<span class="property">mysql</span> = &#123;</span><br><span class="line">  <span class="comment">// å•æ•°æ®åº“ä¿¡æ¯é…ç½®</span></span><br><span class="line">  <span class="attr">client</span>: &#123;</span><br><span class="line">    <span class="comment">// host</span></span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="comment">// ç«¯å£å·</span></span><br><span class="line">    <span class="attr">port</span>: <span class="string">&#x27;3306&#x27;</span>,</span><br><span class="line">    <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="comment">// å¯†ç </span></span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;ä½ çš„æ•°æ®åº“åˆå§‹åŒ–å¯†ç &#x27;</span>, <span class="comment">// Window ç”¨æˆ·å¦‚æœæ²¡æœ‰å¯†ç ï¼Œå¯ä¸å¡«å†™</span></span><br><span class="line">    <span class="comment">// æ•°æ®åº“å</span></span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;juejue-cost&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ˜¯å¦åŠ è½½åˆ° app ä¸Šï¼Œé»˜è®¤å¼€å¯</span></span><br><span class="line">  <span class="attr">app</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="comment">// æ˜¯å¦åŠ è½½åˆ° agent ä¸Šï¼Œé»˜è®¤å…³é—­</span></span><br><span class="line">  <span class="attr">agent</span>: <span class="literal">false</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="é‰´æƒegg-jwt"><a href="#é‰´æƒegg-jwt" class="headerlink" title="é‰´æƒegg-jwt"></a>é‰´æƒegg-jwt</h3><p>æˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸‹å®‰è£… <code>egg-jwt</code> æ’ä»¶ï¼Œæ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i egg-jwt --S</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å®ƒçš„<a href="https://link.juejin.cn/?target=https://github.com/okoala/egg-jwt%23readme">ä»“åº“åœ°å€</a>ï¼Œä»“åº“å†…æœ‰ä¸€äº›ç®€æ˜“çš„æ–‡æ¡£ï¼Œå…·ä½“çš„æ“ä½œå…¶å®å¾ˆå¤šéƒ½æ²¡æœ‰å†™åœ¨æ–‡æ¡£é‡Œï¼Œæˆ‘ä¹Ÿæ˜¯æœäº†å¾ˆå¤šç›¸å…³çš„èµ„æ–™ï¼Œæ‰è®¾è®¡å‡ºè¿™æ ·ä¸€å¥—é‰´æƒæµç¨‹ã€‚</p><p>åœ¨ <code>config/plugin.js</code> ä¸‹æ·»åŠ æ’ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="attr">jwt</span>: &#123;</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">package</span>: <span class="string">&#x27;egg-jwt&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ç´§æ¥ç€å‰å¾€ <code>config/config.default.js</code> ä¸‹æ·»åŠ è‡ªå®šä¹‰åŠ å¯†å­—ç¬¦ä¸²ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="property">jwt</span> = &#123;</span><br><span class="line">  <span class="attr">secret</span>: <span class="string">&#x27;Nick&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="momentå’Œmkdirp-æ—¶é—´æˆ³å’Œæ–°å»ºæ–‡ä»¶å¤¹"><a href="#momentå’Œmkdirp-æ—¶é—´æˆ³å’Œæ–°å»ºæ–‡ä»¶å¤¹" class="headerlink" title="momentå’Œmkdirp æ—¶é—´æˆ³å’Œæ–°å»ºæ–‡ä»¶å¤¹"></a><code>moment</code>å’Œ<code>mkdirp</code> æ—¶é—´æˆ³å’Œæ–°å»ºæ–‡ä»¶å¤¹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i moment mkdirp --S</span><br></pre></td></tr></table></figure><p><code>egg</code> æä¾›ä¸¤ç§æ–‡ä»¶æ¥æ”¶æ¨¡å¼ï¼Œ1 æ˜¯ <code>file</code> ç›´æ¥è¯»å–ï¼Œ2 æ˜¯ <code>stream</code> æµçš„æ–¹å¼ã€‚æˆ‘ä»¬é‡‡ç”¨æ¯”è¾ƒç†Ÿæ‚‰çš„ <code>file</code> å½¢å¼ã€‚æ‰€ä»¥éœ€è¦å‰å¾€ <code>config/config.default.js</code> é…ç½®å¥½æ¥æ”¶å½¢å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="property">multipart</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;file&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>multipart</code> é…ç½®é¡¹æœ‰å¾ˆå¤šé€‰é¡¹ï¼Œæ¯”å¦‚ <code>whitelist</code> ä¸Šä¼ æ ¼å¼çš„å®šåˆ¶ï¼Œ<code>fileSize</code> æ–‡ä»¶å¤§å°çš„é™åˆ¶ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨<a href="https://link.juejin.cn/?target=https://eggjs.github.io/zh/guide/upload.html">æ–‡æ¡£</a>ä¸­æŸ¥æ‰¾åˆ°ã€‚</p><p><code>this.config.uploadDir</code> éœ€è¦å…¨å±€å£°æ˜ï¼Œä¾¿äºåç»­é€šç”¨ï¼Œåœ¨ <code>config/config.default.js</code> ä¸­å£°æ˜å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add your user config here</span></span><br><span class="line"><span class="keyword">const</span> userConfig = &#123;</span><br><span class="line">  <span class="comment">// myAppName: &#x27;egg&#x27;,</span></span><br><span class="line">  <span class="attr">uploadDir</span>: <span class="string">&#x27;app/public/upload&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="è§£å†³è·¨åŸŸegg-cors"><a href="#è§£å†³è·¨åŸŸegg-cors" class="headerlink" title="è§£å†³è·¨åŸŸegg-cors"></a>è§£å†³è·¨åŸŸegg-cors</h3><p>é¦–å…ˆå®‰è£… <code>egg-cors</code> æ’ä»¶ <code>npm i egg-cors</code>ï¼Œå®‰è£…å¥½ä¹‹åï¼Œå‰å¾€ <code>config/plugins.js</code> ä¸‹æ·»åŠ å±æ€§ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cors</span>: &#123;</span><br><span class="line">  <span class="attr">enable</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">package</span>: <span class="string">&#x27;egg-cors&#x27;</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨ <code>config.default.js</code> é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">config.<span class="property">cors</span> = &#123;</span><br><span class="line">  <span class="attr">origin</span>: <span class="string">&#x27;*&#x27;</span>, <span class="comment">// å…è®¸æ‰€æœ‰è·¨åŸŸè®¿é—®</span></span><br><span class="line">  <span class="attr">credentials</span>: <span class="literal">true</span>, <span class="comment">// å…è®¸ Cookie è·¨åŸŸè·¨åŸŸ</span></span><br><span class="line">  <span class="attr">allowMethods</span>: <span class="string">&#x27;GET,HEAD,PUT,POST,DELETE,PATCH&#x27;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h1 id="Mysqlä¸‹è½½"><a href="#Mysqlä¸‹è½½" class="headerlink" title="Mysqlä¸‹è½½"></a>Mysqlä¸‹è½½</h1><p><a href="https://dev.mysql.com/downloads/mysql/">MySQL :: Download MySQL Community Server</a></p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/image-20250315215858717.png" alt="image-20250315215858717"></p><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>é€‰æ‹©8.0.41çš„ç‰ˆæœ¬ï¼Œä¸€å®šä¸è¦æœ€æ–°ç‰ˆ</p><p>ç‚¹å‡»ã€ŒDownloadã€ä¹‹åï¼Œä¼šè®©ä½ æ³¨å†Œç™»å½•è´¦å·ï¼Œæ­¤æ—¶å¯ä»¥é€‰æ‹©ç‚¹å‡»ä¸‹é¢è¿™æ®µæ–‡å­—ï¼Œè·³è¿‡æ³¨å†Œç™»å½•ã€‚</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/77d5a83c24554b299bc6cad6c3635bd2_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><h2 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h2><p>åˆ°ä½ æƒ³è¦æ”¾ç½®çš„æ–‡ä»¶å¤¹ä¸­è§£å‹</p><p>ä¸”åœ¨ <code>mysql-8.0.24-winx64</code> æ–‡ä»¶å¤¹å†…æ–°å»ºä¸€ä¸ªç©ºçš„ <code>my.ini</code>ã€‚</p><h2 id="é…ç½®ç³»ç»Ÿå˜é‡"><a href="#é…ç½®ç³»ç»Ÿå˜é‡" class="headerlink" title="é…ç½®ç³»ç»Ÿå˜é‡"></a>é…ç½®ç³»ç»Ÿå˜é‡</h2><p>ç‚¹å‡»å³ä¸‹è§’çš„ã€Œç¯å¢ƒå˜é‡(N)ã€æŒ‰é’®ï¼Œåœ¨ç³»ç»Ÿå˜é‡é‡Œæ–°å»ºåä¸º ã€ŒMYSQL_HOMEã€ï¼Œå˜é‡å€¼å°±æ˜¯ä½ ä¸Šä¸€æ­¥è§£å‹åå­˜æ”¾ <code>MySQL</code> æ–‡ä»¶çš„å®‰è£…è·¯å¾„ã€‚æˆ‘çš„å®‰è£…è·¯å¾„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/5d10088b081e458eb0f51d5e7c7bf893_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><p>è®¾ç½® <code>Path</code>ï¼Œåœ¨ <code>Path</code> é‡Œé¢æ–°å¢ <code>bin</code> ç›®å½•ã€‚åŒå‡» <code>Path</code>ï¼Œç„¶åç‚¹å‡»æ–°å»ºæŒ‰é’®ï¼Œæ·»åŠ  <code>%MYSQL_HOME%\bin</code> å¦‚ä¸‹ï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/2051620633140_.pic_hd.jpg" alt="img"></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>é¦–å…ˆï¼Œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ <code>cmd</code>ï¼Œ<code>Windows 10</code> ä¸‹ï¼Œç›´æ¥å³é”®ã€Œå¼€å§‹ã€ï¼Œæ‰¾åˆ°ã€Œå‘½ä»¤æç¤ºç¬¦(ç®¡ç†å‘˜)(A)ã€ï¼Œç‚¹å‡»æ‰“å¼€ <code>cmd</code>ã€‚</p><p>1ã€è¿›å…¥å®‰è£… <code>mysql</code> çš„ç›®å½•ï¼Œè¿›å…¥ <code>bin</code>:</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/7be74f5c595d4070b1d5620128866f01_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0-1742047328634-4.awebp" alt="img"></p><p>2ã€è¿è¡Œå®‰è£…æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸçš„è¯ï¼Œæ§åˆ¶å°ä¼šæç¤ºå¦‚ä¸‹ï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/b9d3d686167842f6953a366a21346666_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0-1742047333247-6.awebp" alt="img"></p><p>3ã€è¿è¡Œå¦‚ä¸‹æŒ‡ä»¤ç”Ÿæˆ <code>data</code> ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure><p>4ã€å¯åŠ¨ <code>mysql</code> æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net start mysql</span><br></pre></td></tr></table></figure><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/cc0fb5c438f14718884bb1bf7f7d91db_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0-1742047340375-8.awebp" alt="img"></p><p>æ­¤æ—¶ï¼Œä¸ç”¨æ€€ç–‘ï¼Œä½ å·²ç»æˆåŠŸåœ¨ä½ çš„æœ¬åœ°å¯åŠ¨äº† <code>MySQL</code> æœåŠ¡ã€‚</p><p>5ã€ï¼ˆå…³é”®æ­¥éª¤ï¼‰</p><p>å¦‚æœåç»­ç”¨ <code>egg-mysql</code> æ’ä»¶è¿æ¥æ•°æ®åº“çš„æ—¶å€™ä¼šæŠ¥ä¸‹é¢è¿™æ ·çš„é”™è¯¯ï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/d4141da8bffe455c9d0d6dc272166436_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0-1742047345881-10.awebp" alt="img"></p><p>è¿™æ˜¯å› ä¸º 8.0 ä¹‹å‰çš„ <code>mysql</code> ç‰ˆæœ¬ï¼ŒåŠ å¯†è§„åˆ™æ˜¯ <code>mysql_native_password</code>ï¼Œè€Œåœ¨ 8.0 ä¹‹åï¼ŒåŠ å¯†è§„åˆ™å˜ä¸º <code>caching_sha2_password</code>ã€‚æ­¤æ—¶ä½ å¦‚æœç”¨çš„æ˜¯ 8.0 ä»¥å‰çš„ç‰ˆæœ¬ï¼Œé‚£ä¹ˆé€šè¿‡ <code>egg</code> å¯åŠ¨é¡¹ç›®è¿æ¥æ•°æ®åº“æ˜¯æ²¡é—®é¢˜çš„ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯ 8.0 ä»¥åçš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°ä¸Šè¿°é”™è¯¯ã€‚</p><p><strong>è§£å†³åŠæ³•ï¼š</strong></p><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ <code>cmd</code>ï¼Œä¸Šæ–‡å·²ç»æåˆ°è¿‡ã€‚é€šè¿‡ <code>mysql -u root -p</code> å›è½¦è¿›å…¥ <code>mysql</code> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/b399bc6352ee4db695ed48f37a3315bc_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0-1742047352586-12.awebp" alt="img"></p><p>æˆ‘å·²ç»è®¾ç½®è¿‡å¯†ç äº†ï¼Œæ‰€ä»¥ä¸Šå›¾æˆ‘æ˜¯ç”¨å¯†ç ç™»å½•çš„ï¼Œä½ è‹¥æ˜¯æ²¡æœ‰è®¾ç½®ï¼Œå¯ä»¥ç›´æ¥æ•²å›è½¦ç™»å½•ã€‚</p><p>è¾“å…¥ä¸‹é¢æŒ‡ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br><span class="line">alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified with mysql_native_password by <span class="string">&#x27;ä½ çš„å¯†ç &#x27;</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æŒ‡ä»¤çš„ä½œç”¨æ˜¯ï¼Œè¿˜åŸ <code>MySQL</code> çš„åŠ å¯†è§„åˆ™ï¼Œè¿˜åŸä¹‹åï¼Œä½ å† <code>egg</code> é¡¹ç›®ä¸­è¿æ¥ <code>MySQL</code> çš„æ—¶å€™ï¼Œå°±ä¸ä¼šæŠ¥é”™äº†ã€‚</p><p>å¹¶ä¸”ä¸Šè¿°æŒ‡ä»¤ä¸­çš„ <strong>ã€Œä½ çš„å¯†ç ã€</strong>ï¼Œå¦‚æœä½ è®¾ç½®çš„è¯ï¼Œé‚£å°±ä¼šç”Ÿæ•ˆï¼Œæˆä¸ºä»¥åä½ ç™»å½•æ•°æ®åº“çš„å¯†ç ã€‚</p><blockquote><p>æ³¨æ„ï¼ŒæŒ‡ä»¤ä¸€å®šè¦æŒ‰ç…§ä¸Šè¿°è¾“å…¥ï¼ŒåŒ…æ‹¬æœ€åçš„åˆ†å·ï¼Œä¸ç„¶ä¼šæŒ‡ä»¤é”™è¯¯ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
            <tag> eggjs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Node+Reactå®æˆ˜-è®°è´¦æœ¬â€”åç«¯</title>
      <link href="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/"/>
      <url>/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<p>æœ¬åšå®¢åŸºäºæ˜é‡‘å°å†Œå­ã€Š<a href="https://juejin.cn/book/6966551262766563328?utm_source=course_list">Node + React å®æˆ˜ï¼šä» 0 åˆ° 1 å®ç°è®°è´¦æœ¬</a>ã€‹çš„å†…å®¹è¿›è¡Œæ•´åˆä¸ç¼–å†™ï¼Œæ—¨åœ¨æ„å»ºä¸€ä¸ªç³»ç»Ÿçš„çŸ¥è¯†ç½‘ç»œã€‚</p><p>æœ¬é¡¹ç›®ä½¿ç”¨çš„Nodeæ¡†æ¶æ˜¯<a href="https://www.eggjs.org/zh-CN/basics/structure">Egg</a></p><p>æœ¬é¡¹ç›®githubé“¾æ¥<a href="https://github.com/xxMudCloudxx/TallyBook">xxMudCloudxx&#x2F;TallyBook: React+Eggjs+MySql</a></p><h1 id="Eggjsé¡¹ç›®ç»“æ„"><a href="#Eggjsé¡¹ç›®ç»“æ„" class="headerlink" title="Eggjsé¡¹ç›®ç»“æ„"></a>Eggjsé¡¹ç›®ç»“æ„</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">egg-project</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ app.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ agent.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ app</span><br><span class="line">|   â”œâ”€â”€ router.js</span><br><span class="line">â”‚   â”œâ”€â”€ controller</span><br><span class="line">â”‚   â”‚   â””â”€â”€ home.js</span><br><span class="line">â”‚   â”œâ”€â”€ serviceï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ user.js</span><br><span class="line">â”‚   â”œâ”€â”€ middlewareï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ response_time.js</span><br><span class="line">â”‚   â”œâ”€â”€ scheduleï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ my_task.js</span><br><span class="line">â”‚   â”œâ”€â”€ publicï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ reset.css</span><br><span class="line">â”‚   â”œâ”€â”€ viewï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚   â”‚   â””â”€â”€ home.tpl</span><br><span class="line">â”‚   â””â”€â”€ extendï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â”œâ”€â”€ helper.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â”œâ”€â”€ request.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â”œâ”€â”€ response.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â”œâ”€â”€ context.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â”œâ”€â”€ application.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”‚       â””â”€â”€ agent.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â”œâ”€â”€ config</span><br><span class="line">|   â”œâ”€â”€ plugin.js</span><br><span class="line">|   â”œâ”€â”€ config.default.js</span><br><span class="line">â”‚   â”œâ”€â”€ config.prod.js</span><br><span class="line">|   â”œâ”€â”€ config.test.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">|   â”œâ”€â”€ config.local.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">|   â””â”€â”€ config.unittest.jsï¼ˆå¯é€‰ï¼‰</span><br><span class="line">â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">    â”œâ”€â”€ middleware</span><br><span class="line">    |   â””â”€â”€ response_time.test.js</span><br><span class="line">    â””â”€â”€ controller</span><br><span class="line">        â””â”€â”€ home.test.js</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šï¼Œç”±æ¡†æ¶çº¦å®šçš„ç›®å½•ï¼š</p><ul><li><code>app/router.js</code> ç”¨äºé…ç½® URL è·¯ç”±è§„åˆ™ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/router">Router</a>ã€‚</li><li><code>app/controller/**</code> ç”¨äºè§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/controller">Controller</a>ã€‚</li><li><code>app/service/**</code> ç”¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘å±‚ï¼Œå»ºè®®ä½¿ç”¨ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/service">Service</a>ã€‚</li><li><code>app/middleware/**</code> ç”¨äºç¼–å†™ä¸­é—´ä»¶ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/middleware">Middleware</a>ã€‚</li><li><code>app/public/**</code> ç”¨äºæ”¾ç½®é™æ€èµ„æºï¼Œå…·ä½“å‚è§å†…ç½®æ’ä»¶ <a href="https://github.com/eggjs/egg-static">egg-static</a>ã€‚</li><li><code>app/extend/**</code> ç”¨äºæ¡†æ¶çš„æ‰©å±•ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/extend">æ¡†æ¶æ‰©å±•</a>ã€‚</li><li><code>config/config.&#123;env&#125;.js</code> ç”¨äºç¼–å†™é…ç½®æ–‡ä»¶ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/config">é…ç½®</a>ã€‚</li><li><code>config/plugin.js</code> ç”¨äºé…ç½®éœ€è¦åŠ è½½çš„æ’ä»¶ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/plugin">æ’ä»¶</a>ã€‚</li><li><code>test/**</code> ç”¨äºå•å…ƒæµ‹è¯•ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/core/unittest">å•å…ƒæµ‹è¯•</a>ã€‚</li><li><code>app.js</code> å’Œ <code>agent.js</code> ç”¨äºè‡ªå®šä¹‰å¯åŠ¨æ—¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/app-start">å¯åŠ¨è‡ªå®šä¹‰</a>ã€‚å…³äº <code>agent.js</code> çš„ä½œç”¨ï¼Œå‚è§ <a href="https://www.eggjs.org/zh-CN/core/cluster-and-ipc#agent-%E6%9C%BA%E5%88%B6">Agent æœºåˆ¶</a>ã€‚</li></ul><p>ç”±å†…ç½®æ’ä»¶çº¦å®šçš„ç›®å½•ï¼š</p><ul><li><code>app/public/**</code> ç”¨äºæ”¾ç½®é™æ€èµ„æºï¼Œå…·ä½“å‚è§å†…ç½®æ’ä»¶ <a href="https://github.com/eggjs/egg-static">egg-static</a>ã€‚</li><li><code>app/schedule/**</code> ç”¨äºå®šæ—¶ä»»åŠ¡ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/basics/schedule">å®šæ—¶ä»»åŠ¡</a>ã€‚</li></ul><p><strong>è‹¥éœ€è‡ªå®šä¹‰è‡ªå·±çš„ç›®å½•è§„èŒƒï¼Œå‚è§ <a href="https://eggjs.org/zh-cn/advanced/loader.html">Loader API</a></strong></p><ul><li><code>app/view/**</code> ç”¨äºæ”¾ç½®æ¨¡æ¿æ–‡ä»¶ï¼Œå…·ä½“å‚è§ <a href="https://www.eggjs.org/zh-CN/core/view">æ¨¡æ¿æ¸²æŸ“</a>ã€‚</li><li><code>app/model/**</code> ç”¨äºæ”¾ç½®é¢†åŸŸæ¨¡å‹ï¼Œå¦‚ <a href="https://github.com/eggjs/egg-sequelize"><code>egg-sequelize</code></a> ç­‰é¢†åŸŸç±»ç›¸å…³æ’ä»¶ã€‚</li></ul><h2 id="ç•¥è®²"><a href="#ç•¥è®²" class="headerlink" title="ç•¥è®²"></a>ç•¥è®²</h2><p>æœ¬é¡¹ç›®çš„åç«¯æ¥å£ç¼–å†™çš„è¿‡ç¨‹ä¸­ä¼šé¢‘ç¹åœ°å’Œ<strong>controller</strong>ï¼Œmiddlewareï¼Œ<strong>service</strong>å’Œconfigæ–‡ä»¶å¤¹æ‰“äº¤é“</p><h3 id="app-router-js"><a href="#app-router-js" class="headerlink" title="app&#x2F;router.js"></a><strong>app&#x2F;router.js</strong></h3><p>ç”¨äºé…ç½® URL è·¯ç”±è§„åˆ™ï¼Œæ¯”å¦‚ä¸Šè¿°åˆå§‹åŒ–ä»£ç ä¸­çš„ <code>get</code> è¯·æ±‚ï¼Œ<code>npm run dev</code> å¯åŠ¨é¡¹ç›®ä¹‹åï¼Œä½ å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è®¿é—®å¯åŠ¨çš„<code>ç«¯å£ + è·¯å¾„</code>ï¼Œé»˜è®¤æ˜¯ <code>http://localhost:7001/</code>ï¼Œä½ å°†ä¼šæ‹¿åˆ° <code>app/controller</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œ<code>home.js</code> è„šæœ¬ä¸­ <code>index</code> æ–¹æ³•è¿”å›çš„å†…å®¹ã€‚</p><h3 id="app-controller-xx"><a href="#app-controller-xx" class="headerlink" title="app&#x2F;controller&#x2F;xx"></a><strong>app&#x2F;controller&#x2F;xx</strong></h3><p>ç”¨äºè§£æç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†åè¿”å›ç›¸åº”çš„ç»“æœã€‚ä¸Šè¿°æˆ‘ä»¬ä¹Ÿæåˆ°äº†ï¼Œé€šè¿‡è¯·æ±‚è·¯å¾„å°†ç”¨æˆ·çš„è¯·æ±‚åŸºäº <code>method</code> å’Œ <code>URL</code> åˆ†å‘åˆ°å¯¹åº”çš„ <code>Controller</code> ä¸Šï¼Œè€Œ <code>Controller</code> è¦åšçš„äº‹æƒ…å°±æ˜¯å“åº”ç”¨æˆ·çš„è¯‰æ±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æƒ³æ‹¿åˆ° A ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ï¼Œäºæ˜¯æˆ‘ä»¬è¦åœ¨æ§åˆ¶å™¨ï¼ˆControllerï¼‰é‡Œï¼Œé€šè¿‡è¯·æ±‚æºå¸¦çš„ A ç”¨æˆ·çš„ id å‚æ•°ï¼Œä»æ•°æ®åº“é‡Œè·å–æŒ‡å®šç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ã€‚æˆ‘ç”»äº†ä¸€ä¸ªç®€æ˜“æµç¨‹å›¾å¦‚ä¸‹ï¼š</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/8a6e2954b379440d87573dbe452e5cc2_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><h3 id="app-service-xx"><a href="#app-service-xx" class="headerlink" title="app&#x2F;service&#x2F;xx"></a><strong>app&#x2F;service&#x2F;xx</strong></h3><p>ç®€å•æ¥è¯´ï¼Œ<code>Service</code> å°±æ˜¯åœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹ç”¨äºåšä¸šåŠ¡é€»è¾‘å°è£…çš„ä¸€ä¸ªæŠ½è±¡å±‚ã€‚ä¸Šè¿°åˆå§‹åŒ–é¡¹ç›®ä¸­æœªå£°æ˜ <code>service</code> æ–‡ä»¶å¤¹ï¼Œå®ƒæ˜¯å¯é€‰é¡¹ï¼Œä½†æ˜¯å®˜æ–¹å»ºè®®æˆ‘ä»¬æ“ä½œä¸šåŠ¡é€»è¾‘æœ€å¥½åšä¸€å±‚å°è£…ã€‚æˆ‘ä»¬æ¢ä¸€ç§ç†è§£æ–¹å¼ï¼Œ<code>Service</code> å±‚å°±æ˜¯ç”¨äºæ•°æ®åº“çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å°½é‡å°†ç²’åº¦ç»†åŒ–ï¼Œè¿™æ ·ä»¥ä¾¿å¤šä¸ª <code>Controller</code> å…±åŒè°ƒç”¨åŒä¸€ä¸ª <code>Service</code>ã€‚åç»­æˆ‘ä»¬é“¾æ¥æ•°æ®åº“æ“ä½œçš„æ—¶å€™ï¼Œå†è¿›è¡Œè¯¦ç»†åˆ†æã€‚æ›´åŠ è¯¦ç»†çš„æè¿°è¯·ç§»æ­¥è‡³ <a href="https://link.juejin.cn/?target=https://eggjs.org/zh-cn/basics/service.html">Service æ–‡æ¡£</a>ã€‚</p><h3 id="app-middleware-xx"><a href="#app-middleware-xx" class="headerlink" title="app&#x2F;middleware&#x2F;xx"></a><strong>app&#x2F;middleware&#x2F;xx</strong></h3><p>ç”¨äºç¼–å†™ä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶çš„æ¦‚å¿µå°±æ˜¯åœ¨è·¯ç”±é…ç½®é‡Œè®¾ç½®äº†ä¸­é—´ä»¶çš„è·¯ç”±ï¼Œæ¯æ¬¡è¯·æ±‚å‘½ä¸­åï¼Œéƒ½è¦è¿‡ä¸€å±‚ä¸­é—´ä»¶ã€‚åœ¨æˆ‘ä»¬åç»­çš„å¼€å‘ä¸­ï¼Œä¹Ÿä¼šåˆ©ç”¨åˆ°è¿™ä¸ªä¸­é—´ä»¶çš„åŸç†åšç”¨æˆ·é‰´æƒã€‚å½“ç”¨æˆ·æœªç™»å½•çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸èƒ½è°ƒç”¨æŸäº›æ¥å£çš„ã€‚</p><p>å½“ç„¶ï¼Œä½ å¯ä»¥æ¯æ¬¡éƒ½åœ¨ <code>Controller</code> åˆ¤æ–­ï¼Œå½“å‰è¯·æ±‚æ˜¯å¦æºå¸¦æœ‰æ•ˆçš„ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€‚æ¥å£ä¸€å¤šï¼Œåˆ°å¤„éƒ½æ˜¯è¿™æ ·çš„åˆ¤æ–­ï¼Œé€»è¾‘é‡å¤ã€‚æ‰€ä»¥ï¼Œä¸­é—´ä»¶åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œä¹Ÿç®—æ˜¯ä¼˜åŒ–ä»£ç ç»“æ„çš„ä¸€ç§æ–¹å¼ã€‚æ›´åŠ è¯¦ç»†çš„æè¿°è¯·ç§»æ­¥è‡³ <a href="https://link.juejin.cn/?target=https://eggjs.org/zh-cn/basics/middleware.html">Middleware æ–‡æ¡£</a>ã€‚</p><h3 id="ç®€è€Œè¨€ä¹‹"><a href="#ç®€è€Œè¨€ä¹‹" class="headerlink" title="ç®€è€Œè¨€ä¹‹"></a>ç®€è€Œè¨€ä¹‹</h3><p>æˆ‘ä»¬æ¯æ¬¡ç¼–å†™å¥½æ¥å£åéƒ½éœ€è¦åœ¨<code>router.js</code>æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„<code>get</code>å’Œ<code>post</code>è·¯ç”±:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">app</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller, middleware &#125; = app;</span><br><span class="line">  <span class="keyword">const</span> _jwt = middleware.<span class="title function_">jwtErr</span>(app.<span class="property">config</span>.<span class="property">jwt</span>.<span class="property">secret</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/user/register&quot;</span>, controller.<span class="property">user</span>.<span class="property">register</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/user/login&quot;</span>, controller.<span class="property">user</span>.<span class="property">login</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/user/edit_userinfo&quot;</span>, _jwt, controller.<span class="property">user</span>.<span class="property">editUserInfo</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/upload&quot;</span>, controller.<span class="property">upload</span>.<span class="property">upload</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/bill/add&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">add</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/bill/update&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">update</span>);</span><br><span class="line">  router.<span class="title function_">post</span>(<span class="string">&quot;/api/bill/delete&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">delete</span>);</span><br><span class="line"></span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/user/get_userinfo&quot;</span>, _jwt, controller.<span class="property">user</span>.<span class="property">getUserInfo</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/user/test&quot;</span>, _jwt, controller.<span class="property">user</span>.<span class="property">test</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/user/upload&quot;</span>, controller.<span class="property">user</span>.<span class="property">upload</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/bill/list&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">list</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/bill/detail&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">detail</span>);</span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&quot;/api/bill/data&quot;</span>, _jwt, controller.<span class="property">bill</span>.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è€Œ<code>Controller</code>æ–‡ä»¶é‡Œç¼–å†™çš„æ˜¯æˆ‘ä»¬æ¥å£æ‰€è°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒä¼šè§£æç”¨æˆ·è¾“å…¥ï¼Œç„¶åå¤„ç†åè¿”å›å¯¹åº”çš„ç»“æœ:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Controller</span> = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).<span class="property">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HomeController</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Controller</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">index</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = ctx.<span class="property">query</span>;</span><br><span class="line">    ctx.<span class="property">body</span> = id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">HomeController</span>;</span><br></pre></td></tr></table></figure><ul><li><code>get</code>æ–¹æ³•ä¸€èˆ¬ç”¨<code>ctx.query</code>æ¥è·å–è¾“å…¥</li><li><code>post</code>æ–¹æ³•ä¸€èˆ¬ç”¨<code>ctx.request.body</code>æˆ–<code>ctx.request.header</code>æ¥è·å–è¾“å…¥</li><li><code>ctx.body</code>åˆ™æ˜¯æˆ‘ä»¬æœåŠ¡å™¨çš„å“åº”</li></ul><p>è€Œ<code>service</code>æ–‡ä»¶åˆ™æ˜¯ç”¨æ¥ç¼–å†™<code>Controller</code>è·å–æ•°æ®åº“æ•°æ®çš„æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/service/home.js</span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Service</span> = <span class="built_in">require</span>(<span class="string">&#x27;egg&#x27;</span>).<span class="property">Service</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HomeService</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Service</span> &#123;</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">user</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// å‡è®¾ä»æ•°æ®åº“è·å–çš„ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å˜å­&#x27;</span>,</span><br><span class="line">      <span class="attr">slogen</span>: <span class="string">&#x27;ç½‘ç»œçš„ä¸–ç•Œå¤ªè™šæ‹Ÿ,ä½ æŠŠæ¡ä¸ä½&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">HomeService</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨ <code>Controller</code> å†…æ‹¿åˆ°ä¸Šè¿°æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  app/controller/home.js</span></span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">async</span> <span class="title function_">user</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; ctx &#125; = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="keyword">const</span> &#123; name, slogen &#125; = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">home</span>.<span class="title function_">user</span>();</span><br><span class="line">  ctx.<span class="property">body</span> = &#123;</span><br><span class="line">    name,</span><br><span class="line">    slogen</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è¯¥é¡¹ç›®çš„çŸ¥è¯†ç‚¹"><a href="#è¯¥é¡¹ç›®çš„çŸ¥è¯†ç‚¹" class="headerlink" title="è¯¥é¡¹ç›®çš„çŸ¥è¯†ç‚¹"></a>è¯¥é¡¹ç›®çš„çŸ¥è¯†ç‚¹</h1><ul><li>tokené‰´æƒ</li><li>egg ä¸­é—´ä»¶ç¼–å†™</li><li>æ•°æ®åº“çš„èµ„æºè·å–</li><li><code>Egg</code> æ–‡ä»¶èµ„æºå¤„ç†</li><li>ä¸€å¥—å¢åˆ æ”¹æŸ¥</li><li><code>egg-mysql</code>çš„å¤šç§ä½¿ç”¨</li></ul><h1 id="è¯¥é¡¹ç›®å®ç°çš„åŠŸèƒ½"><a href="#è¯¥é¡¹ç›®å®ç°çš„åŠŸèƒ½" class="headerlink" title="è¯¥é¡¹ç›®å®ç°çš„åŠŸèƒ½"></a>è¯¥é¡¹ç›®å®ç°çš„åŠŸèƒ½</h1><ul><li>ç”¨æˆ·çš„ç™»å½•æ³¨å†Œ</li><li>ç”¨æˆ·çš„ä¿¡æ¯è·å–åŠå…¶æ›´æ”¹</li><li>ç”¨æˆ·èµ„æºçš„ä¸Šä¼ åŠè·å–</li><li>è´¦å•çš„å¢åˆ æŸ¥æ”¹</li><li>è´¦å•è¯¦ç»†åŠå…¶æ•°æ®çš„è·å–</li></ul><h1 id="ç™»å½•æ³¨å†Œ"><a href="#ç™»å½•æ³¨å†Œ" class="headerlink" title="ç™»å½•æ³¨å†Œ"></a>ç™»å½•æ³¨å†Œ</h1><p>ç”¨æˆ·é‰´æƒï¼Œä¸€ç§ç”¨äºåœ¨é€šä¿¡ç½‘ç»œä¸­å¯¹è¯•å›¾è®¿é—®æ¥è‡ªæœåŠ¡æä¾›å•†çš„æœåŠ¡çš„ç”¨æˆ·è¿›è¡Œé‰´æƒçš„æ–¹æ³•ã€‚ç”¨äºç”¨æˆ·ç™»é™†åˆ°DSMPæˆ–ä½¿ç”¨æ•°æ®ä¸šåŠ¡æ—¶ï¼Œä¸šåŠ¡ç½‘å…³æˆ–Portalå‘é€æ­¤æ¶ˆæ¯åˆ°DSMPï¼Œå¯¹è¯¥ç”¨æˆ·ä½¿ç”¨æ•°æ®ä¸šåŠ¡çš„åˆæ³•æ€§å’Œæœ‰æ•ˆæ€§ï¼ˆçŠ¶æ€æ˜¯å¦ä¸ºæ¿€æ´»ï¼‰è¿›è¡Œæ£€æŸ¥ã€‚</p><p>é‰´æƒçš„æœºåˆ¶ï¼Œåˆ†ä¸ºå››ç§ï¼š</p><ul><li>HTTP Basic Authentication</li><li>session-cookie</li><li>Token ä»¤ç‰Œ</li><li>OAuth(å¼€æ”¾æˆæƒ)</li></ul><p>æœ¬é¡¹ç›®ç”¨çš„é‰´æƒæ¨¡å¼æ˜¯ <code>token</code> ä»¤ç‰Œæ¨¡å¼ï¼Œå‡ºäºå¤šç«¯è€ƒè™‘ï¼Œ<code>token</code> å¯ä»¥è¿ç”¨åœ¨å¦‚ç½‘é¡µã€å®¢æˆ·ç«¯ã€å°ç¨‹åºã€æµè§ˆå™¨æ’ä»¶ç­‰ç­‰é¢†åŸŸã€‚å¦‚æœé€‰ç”¨ <code>cookie</code> çš„å½¢å¼é‰´æƒï¼Œåœ¨å®¢æˆ·ç«¯å’Œå°ç¨‹åºå°±æ— æ³•ä½¿ç”¨è¿™å¥—æ¥å£ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰åŸŸçš„æ¦‚å¿µï¼Œè€Œ <code>cookie</code> æ˜¯éœ€è¦å­˜åœ¨æŸä¸ªåŸŸä¸‹ã€‚</p><p>ç™»å½•æ³¨å†Œçš„æµç¨‹å¦‚ä¸‹</p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/14f50febe2c749b486f7cb2fb4491809_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/090527aa47c444f0bcf03f1a7cdb7cdd_tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.awebp" alt="img"></p><h2 id="æ³¨å†Œ"><a href="#æ³¨å†Œ" class="headerlink" title="æ³¨å†Œ"></a>æ³¨å†Œ</h2><ul><li><code>UserController</code>é€šè¿‡<code>ctx.request.body</code>è·å–ä¼ å…¥çš„åå­—å’Œå¯†ç </li><li>å°†è·å¾—çš„ä¿¡æ¯ä¼ å…¥<code>UserService</code>ï¼Œ<code>UserService</code>ä½¿ç”¨<code>get</code>æ–¹æ³•è·å–æ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯<ul><li>è‹¥å­˜åœ¨ä¿¡æ¯ï¼Œåˆ™å“åº”è¿”å›<strong>è´¦æˆ·åå·²è¢«æ³¨å†Œ</strong></li></ul></li><li>å°†ç”¨æˆ·çš„åå­—ï¼Œå¯†ç åŠå…¶é»˜è®¤å¤´åƒé»˜è®¤ç­¾åä¼ å…¥<code>UserService</code>è¿›è¡Œæ³¨å†Œï¼Œ<code>UserService</code>ä½¿ç”¨<code>insert</code>æ–¹æ³•å°†ä¿¡æ¯æ’å…¥æ•°æ®åº“ä¸­</li><li>ç¼–å†™<code>response</code>çš„æ¶ˆæ¯ä½“<ul><li>è¿”å›çŠ¶æ€ç </li><li>æ³¨å†ŒæˆåŠŸä¸å¦</li></ul></li></ul><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><ul><li><p><code>UserController</code>é€šè¿‡<code>ctx.request.body</code>è·å–ä¼ å…¥çš„åå­—å’Œå¯†ç </p></li><li><p>å°†è·å¾—çš„ä¿¡æ¯ä¼ å…¥<code>UserService</code>ï¼Œ<code>UserService</code>ä½¿ç”¨<code>get</code>æ–¹æ³•è·å–æ•°æ®åº“ä¸­çš„ç”¨æˆ·ä¿¡æ¯</p><ul><li>è‹¥ä¸å­˜åœ¨ä¿¡æ¯ï¼Œåˆ™è¿”å›<strong>è´¦æˆ·ä¸å­˜åœ¨</strong></li><li>è‹¥è´¦å·å¯†ç ä¸å¯¹ï¼Œåˆ™è¿”å›<strong>è´¦å·å¯†ç é”™è¯¯</strong></li></ul></li><li><p>ä½¿ç”¨<code>app.jwt.sign</code>æ–¹æ³•é…ç½®<code>token</code></p></li><li><p>ç¼–å†™<code>response</code>çš„æ¶ˆæ¯ä½“</p><ul><li><p>è¿”å›çŠ¶æ€ç </p></li><li><p>ç™»å½•æˆåŠŸ</p></li><li><p><code>token</code></p></li></ul></li></ul><h2 id="ç™»å½•çš„ä¸­é—´ä»¶"><a href="#ç™»å½•çš„ä¸­é—´ä»¶" class="headerlink" title="ç™»å½•çš„ä¸­é—´ä»¶"></a>ç™»å½•çš„ä¸­é—´ä»¶</h2><p>åœ¨<code>app\middleware\jwtErr.js</code>ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function">(<span class="params">secret</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">jwtErr</span>(<span class="params">ctx, next</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> token = ctx.<span class="property">request</span>.<span class="property">header</span>.<span class="property">authorization</span>; <span class="comment">// è‹¥æ˜¯æ²¡æœ‰ tokenï¼Œè¿”å›çš„æ˜¯ null å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">let</span> decode</span><br><span class="line">    <span class="keyword">if</span>(token != <span class="string">&#x27;null&#x27;</span> &amp;&amp; token) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        decode = ctx.<span class="property">app</span>.<span class="property">jwt</span>.<span class="title function_">verify</span>(token, secret); <span class="comment">// éªŒè¯token</span></span><br><span class="line">        <span class="keyword">await</span> <span class="title function_">next</span>();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error&#x27;</span>, error)</span><br><span class="line">        ctx.<span class="property">status</span> = <span class="number">200</span>;</span><br><span class="line">        ctx.<span class="property">body</span> = &#123;</span><br><span class="line">          <span class="attr">msg</span>: <span class="string">&#x27;tokenå·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•&#x27;</span>,</span><br><span class="line">          <span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ctx.<span class="property">status</span> = <span class="number">200</span>;</span><br><span class="line">      ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;tokenä¸å­˜åœ¨&#x27;</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨<code>router.js</code>è·¯ç”±ä¸­ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="function"><span class="params">app</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; router, controller, middleware &#125; = app;</span><br><span class="line">  <span class="keyword">const</span> _jwt = middleware.<span class="title function_">jwtErr</span>(app.<span class="property">config</span>.<span class="property">jwt</span>.<span class="property">secret</span>); <span class="comment">// ä¼ å…¥åŠ å¯†å­—ç¬¦ä¸²</span></span><br><span class="line">  router.<span class="title function_">get</span>(<span class="string">&#x27;/api/user/test&#x27;</span>, _jwt, controller.<span class="property">user</span>.<span class="property">test</span>); <span class="comment">// æ”¾å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œä¸ºä¸­é—´ä»¶è¿‡æ»¤é¡¹</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p><code>_jwt</code>è™½ç„¶ <strong>åªä¼ äº†ä¸€ä¸ªå‚æ•°ï¼ˆ<code>app.config.jwt.secret</code>ï¼‰</strong>ï¼Œä½†å®ƒå®é™…ä¸Š <strong>è¿”å›äº†ä¸€ä¸ªå‡½æ•°</strong>ï¼Œè€Œè¿™ä¸ªè¿”å›çš„å‡½æ•°æ‰æ˜¯çœŸæ­£çš„ä¸­é—´ä»¶ã€‚</p><p><code>get</code>å±•å¼€å®é™…ä¸Šæ˜¯:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/api/user/test&quot;</span>, <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">jwtErr</span>(<span class="params">ctx, next</span>) &#123; ... &#125;, controller.<span class="property">user</span>.<span class="property">test</span>);</span><br></pre></td></tr></table></figure><p>Egg.js åœ¨æ‰§è¡Œ <code>GET /api/user/test</code> è¿™ä¸ªè¯·æ±‚æ—¶ï¼š</p><ol><li>å…ˆæ‰§è¡Œ <code>jwtErr(ctx, next)</code><ul><li>è§£æ <code>token</code>ï¼Œå¦‚æœ <code>token</code> ä¸å­˜åœ¨æˆ–æ— æ•ˆï¼Œè¿”å› <code>401</code></li><li>å¦‚æœ <code>token</code> æœ‰æ•ˆï¼Œç»§ç»­æ‰§è¡Œ <code>next()</code></li></ul></li><li>æ‰§è¡Œ <code>controller.user.test(ctx)</code><ul><li><code>next()</code> å…è®¸è¯·æ±‚è¿›å…¥ <code>controller.user.test</code></li><li>è¿™æ ·ï¼Œåªæœ‰é€šè¿‡ JWT éªŒè¯çš„è¯·æ±‚ï¼Œæ‰èƒ½è¿›å…¥ <code>test</code> æ–¹æ³•</li></ul></li></ol></blockquote><p>åç»­æ‰€æœ‰çš„æ¥å£éƒ½éœ€è¦<code>_jwt</code>è¿™ä¸ªä¸­é—´ä»¶æ¥éªŒè¯ç™»å½•</p><h1 id="ä¿¡æ¯è·å–åŠå…¶æ›´æ”¹"><a href="#ä¿¡æ¯è·å–åŠå…¶æ›´æ”¹" class="headerlink" title="ä¿¡æ¯è·å–åŠå…¶æ›´æ”¹"></a>ä¿¡æ¯è·å–åŠå…¶æ›´æ”¹</h1><h2 id="ä¿¡æ¯è·å–"><a href="#ä¿¡æ¯è·å–" class="headerlink" title="ä¿¡æ¯è·å–"></a>ä¿¡æ¯è·å–</h2><ul><li>å…ˆè·å–<strong>æ¶ˆæ¯å¤´</strong>ä¸­çš„<code>token</code></li><li>å°†<code>token</code>ä¼ å…¥<code>app.jwt</code>ä¸­è¿›è¡Œè§£å¯†</li><li>å°†è§£å¯†åçš„ç”¨æˆ·åå­—ä¼ å…¥<code>UserService</code>ä¸­ï¼Œ<code>UserService</code>é€šè¿‡<code>get</code>æ–¹æ³•è·å–æ•°æ®åº“ä¸­çš„ä¿¡æ¯</li><li>ç¼–å†™å“åº”çš„æ¶ˆæ¯ä½“<ul><li>çŠ¶æ€ç </li><li>è¯·æ±‚æˆåŠŸæ¶ˆæ¯</li><li>ç”¨æˆ·æ•°æ®</li></ul></li></ul><h2 id="ä¿¡æ¯æ›´æ”¹"><a href="#ä¿¡æ¯æ›´æ”¹" class="headerlink" title="ä¿¡æ¯æ›´æ”¹"></a>ä¿¡æ¯æ›´æ”¹</h2><ul><li><p>å› ä¸ºæ˜¯<code>post</code>æ–¹æ³•ï¼Œé€šè¿‡<code>ctx.request.body</code>è·å–éœ€è¦æ›´æ”¹çš„ä¿¡æ¯</p></li><li><p>è·å–<strong>æ¶ˆæ¯å¤´</strong>ä¸­çš„<code>token</code></p></li><li><p>å°†<code>token</code>ä¼ å…¥<code>app.jwt</code>ä¸­è¿›è¡Œè§£å¯†</p></li><li><p>å°†è§£å¯†åçš„ç”¨æˆ·åå­—ä¼ å…¥<code>UserService</code>ä¸­ï¼Œ<code>UserService</code>é€šè¿‡<code>get</code>æ–¹æ³•è·å–æ•°æ®åº“ä¸­çš„ä¿¡æ¯</p></li><li><p>ä½¿ç”¨<code>&#123;...userInfo, signature, avatar&#125;</code>å°†åŸæœ¬çš„ç­¾åå’Œå¤´åƒè¦†ç›–æ‰ï¼Œå¹¶ä¼ å…¥<code>UserService</code>ï¼Œ<code>UserService</code>ä½¿ç”¨<code>update</code>æ–¹æ³•æ›´æ–°æ•°æ®åº“ä¸­çš„ä¿¡æ¯</p><ul><li><h3 id="app-mysql-update-bill-params-id-params-id-user-id-params-user-id"><a href="#app-mysql-update-bill-params-id-params-id-user-id-params-user-id" class="headerlink" title="app.mysql.update(&quot;bill&quot;, { ...params }, { id: params.id, user_id: params.user_id })"></a><code>app.mysql.update(&quot;bill&quot;, &#123; ...params &#125;, &#123; id: params.id, user_id: params.user_id &#125;)</code></h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæ›´æ–°è¡¨ä¸­çš„è®°å½•ã€‚</li><li>APIï¼š<code>app.mysql.update(table, values, conditions)</code>å…¶ä¸­ï¼š<ul><li><code>table</code> æ˜¯è¡¨åã€‚</li><li><code>values</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«è¦æ›´æ–°çš„å­—æ®µå’Œå€¼ã€‚</li><li><code>conditions</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ›´æ–°æ¡ä»¶ã€‚</li></ul></li></ul></li><li><p>ä½¿ç”¨</p><ul><li><pre><code class="js">let result = await app.mysql.update(        &quot;user&quot;,        &#123;          ...params,        &#125;,        &#123;          id: params.id,        &#125;      );<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- è¿”å›å“åº”çš„æ¶ˆæ¯ä½“</span><br><span class="line">  - çŠ¶æ€ç </span><br><span class="line">  - è¯·æ±‚æˆåŠŸä¸å¦</span><br><span class="line">  - æ›´æ”¹åçš„ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"># èµ„æºçš„ä¸Šä¼ åŠè·å–</span><br><span class="line"></span><br><span class="line">å›¾ç‰‡åœ°å€çš„ç»“æ„æ˜¯ `host + IP + å›¾ç‰‡åç§° + åç¼€`</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">// Controller/upload.js</span><br><span class="line">async upload() &#123;</span><br><span class="line">    const &#123; ctx &#125; = this;</span><br><span class="line">    // âœ… ç¡®ä¿ request.files ä¸ä¸ºç©º</span><br><span class="line">    if (!ctx.request.files || ctx.request.files.length === 0) &#123;</span><br><span class="line">      ctx.body = &#123; code: 400, msg: &quot;æ²¡æœ‰ä¸Šä¼ æ–‡ä»¶&quot; &#125;;</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    // éœ€è¦å‰å¾€ config/config.default.js è®¾ç½® config.multipart çš„ mode å±æ€§ä¸º file</span><br><span class="line">    let file = ctx.request.files[0];</span><br><span class="line"></span><br><span class="line">    // å£°æ˜å­˜æ”¾èµ„æºçš„è·¯å¾„</span><br><span class="line">    let uploadDir = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      // ctx.request.files[0] è¡¨ç¤ºè·å–ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œè‹¥å‰ç«¯ä¸Šä¼ å¤šä¸ªæ–‡ä»¶åˆ™å¯ä»¥éå†è¿™ä¸ªæ•°ç»„å¯¹è±¡</span><br><span class="line">      let f = fs.readFileSync(file.filepath);</span><br><span class="line">        </span><br><span class="line">      // &lt;-----åˆ›å»ºä¿å­˜æ–‡ä»¶å¤¹------&gt;</span><br><span class="line">      // 1.è·å–å½“å‰æ—¥æœŸ</span><br><span class="line">      let day = moment(new Date()).format(&quot;YYYYMMDD&quot;);</span><br><span class="line">      // 2.åˆ›å»ºå›¾ç‰‡ä¿å­˜çš„è·¯å¾„</span><br><span class="line">      let dir = path.join(this.config.uploadDir, day);</span><br><span class="line">      //  this.config.uploadDir: &#x27;app/public/upload&#x27;</span><br><span class="line">      // â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span><br><span class="line">      mkdirp.sync(dir);// æ–°ç‰ˆæœ¬çš„mkdirpè¦è¿™æ ·å­å†™</span><br><span class="line">      // â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘</span><br><span class="line">      // æ—§å†™æ³• await mkdirp(dir);</span><br><span class="line">      // &lt;-----åˆ›å»ºä¿å­˜æ–‡ä»¶å¤¹------&gt;</span><br><span class="line">        </span><br><span class="line">      let date = Date.now(); // æ¯«ç§’æ•°  </span><br><span class="line">      // è¿”å›å›¾ç‰‡ä¿å­˜çš„è·¯å¾„</span><br><span class="line">      uploadDir = path.join(dir, date + path.extname(file.filename));</span><br><span class="line">      // å†™å…¥æ–‡ä»¶å¤¹</span><br><span class="line">      fs.writeFileSync(uploadDir, f);</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      // æ¸…é™¤ä¸´æ—¶æ–‡ä»¶</span><br><span class="line">      ctx.cleanupRequestFiles();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ctx.body = &#123;</span><br><span class="line">      code: 200,</span><br><span class="line">      msg: &quot;ä¸Šä¼ æˆåŠŸ&quot;,</span><br><span class="line">      data: uploadDir.replace(/app/g, &quot;&quot;),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul></li></ul><blockquote><p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦å°† <code>app</code> å»é™¤ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨å‰ç«¯è®¿é—®è·¯å¾„çš„æ—¶å€™ï¼Œæ˜¯ä¸éœ€è¦ <code>app</code> è¿™ä¸ªè·¯å¾„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬é¡¹ç›®å¯åŠ¨çš„æ˜¯ 7001 ç«¯å£ï¼Œæœ€åæˆ‘ä»¬è®¿é—®çš„æ–‡ä»¶è·¯å¾„æ˜¯è¿™æ ·çš„ <code>http://localhost:7001/public/upload/20250315/1741973858632.jpg</code>ã€‚</p></blockquote><h1 id="è´¦å•çš„å¢åˆ æŸ¥æ”¹"><a href="#è´¦å•çš„å¢åˆ æŸ¥æ”¹" class="headerlink" title="è´¦å•çš„å¢åˆ æŸ¥æ”¹"></a>è´¦å•çš„å¢åˆ æŸ¥æ”¹</h1><p><img src="/2025/03/15/%E5%89%8D%E7%AB%AF-%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0-%E8%AE%B0%E8%B4%A6%E6%9C%AC-Node-React%E5%AE%9E%E6%88%98-%E8%AE%B0%E8%B4%A6%E6%9C%AC%E2%80%94%E5%90%8E%E7%AB%AF/image-20250315231626163.png" alt="image-20250315231626163"></p><h2 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h2><ul><li>æ ¹æ®æ•°æ®åº“çš„<code>bill</code>è¡¨çš„å±æ€§å¯çŸ¥æˆ‘ä»¬è¦ä»<code>ctx.request.body</code>è·å–6ä¸ªå±æ€§</li><li>å…ˆè·å–<strong>æ¶ˆæ¯å¤´</strong>ä¸­çš„<code>token</code></li><li>å°†<code>token</code>ä¼ å…¥<code>app.jwt</code>ä¸­è¿›è¡Œè§£å¯†</li><li>å°†è§£å¯†çš„idåŒè·å–çš„<strong>å…­ä¸ªå±æ€§</strong>ä¸€åŒä¼ å…¥<code>BillService</code>ä¸­, <code>BillService</code>ä½¿ç”¨<code>insert</code>å°†æ•°æ®æ’å…¥æ•°æ®åº“ä¸­</li><li>è¿”å›å“åº”</li></ul><h2 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h2><ul><li><p>è·å–<code>ctx.request.body</code>çš„<code>id</code>å³æˆ‘ä»¬è¦åˆ é™¤è¡¨çš„<code>id</code></p></li><li><p>é‰´æƒæ“ä½œè·å–<code>user_id</code></p></li><li><p>å°†<code>id</code>å’Œ<code>user_id</code>ä¼ å…¥<code>BillService</code>ä¸­ï¼Œ<code>BillService</code>ä½¿ç”¨<code>delete</code>æ–¹æ³•åˆ é™¤å¯¹åº”æ•°æ®</p><ul><li><h3 id="app-mysql-delete-bill-id-user-id"><a href="#app-mysql-delete-bill-id-user-id" class="headerlink" title="app.mysql.delete(&quot;bill&quot;, { id, user_id })"></a><code>app.mysql.delete(&quot;bill&quot;, &#123; id, user_id &#125;)</code></h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šåˆ é™¤è¡¨ä¸­çš„è®°å½•ã€‚</li><li>APIï¼š<code>app.mysql.delete(table, conditions)</code>å…¶ä¸­ï¼š<ul><li><code>table</code> æ˜¯è¡¨åã€‚</li><li><code>conditions</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºåˆ é™¤æ¡ä»¶ã€‚</li></ul></li></ul></li></ul></li><li><p>è¿”å›å“åº”</p></li></ul><h2 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h2><ul><li><p>è·å–<code>ctx.query</code>çš„<code>id</code>å³æˆ‘ä»¬è¦æŸ¥è¡¨çš„<code>id</code></p><ul><li><code>get</code>æ–¹æ³•ç”¨<code>query</code></li></ul></li><li><p>é‰´æƒæ“ä½œè·å–<code>user_id</code></p></li><li><p>å°†<code>id</code>å’Œ<code>user_id</code>ä¼ å…¥<code>BillService</code>ä¸­ï¼Œ<code>BillService</code>ä½¿ç”¨<code>get</code>æ–¹æ³•åˆ é™¤å¯¹åº”æ•°æ®</p><ul><li><h3 id="app-mysql-get-bill-id-user-id"><a href="#app-mysql-get-bill-id-user-id" class="headerlink" title="app.mysql.get(&quot;bill&quot;, { id, user_id })"></a><code>app.mysql.get(&quot;bill&quot;, &#123; id, user_id &#125;)</code></h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæ ¹æ®æ¡ä»¶è·å–è¡¨ä¸­çš„å•æ¡è®°å½•ã€‚</li><li>APIï¼š<code>app.mysql.get(table, conditions)</code>å…¶ä¸­ï¼š<ul><li><code>table</code> æ˜¯è¡¨åã€‚</li><li><code>conditions</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶ã€‚</li></ul></li></ul></li></ul></li><li><p>è¿”å›å“åº”</p></li></ul><h2 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h2><ul><li><p>é€šè¿‡<code>ctx.request.body</code>è·å–è´¦å•çš„æ‰€æœ‰å±æ€§</p></li><li><p>é‰´æƒæ“ä½œè·å–<code>user_id</code></p></li><li><p>å°†<strong>æ‰€æœ‰å±æ€§</strong>åŠå…¶<code>user_id</code>ä¼ å…¥<code>BillService</code>ä¸­ï¼Œ<code>BillService</code>é€šè¿‡<code>update</code>æ–¹æ³•æ›´æ–°æ•°æ®</p><ul><li><h3 id="app-mysql-update-bill-params-id-params-id-user-id-params-user-id-1"><a href="#app-mysql-update-bill-params-id-params-id-user-id-params-user-id-1" class="headerlink" title="app.mysql.update(&quot;bill&quot;, { ...params }, { id: params.id, user_id: params.user_id })"></a><code>app.mysql.update(&quot;bill&quot;, &#123; ...params &#125;, &#123; id: params.id, user_id: params.user_id &#125;)</code></h3><ul><li><strong>åŠŸèƒ½</strong>ï¼šæ›´æ–°è¡¨ä¸­çš„è®°å½•ã€‚</li><li>APIï¼š<code>app.mysql.update(table, values, conditions)</code>å…¶ä¸­ï¼š<ul><li><code>table</code> æ˜¯è¡¨åã€‚</li><li><code>values</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«è¦æ›´æ–°çš„å­—æ®µå’Œå€¼ã€‚</li><li><code>conditions</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ›´æ–°æ¡ä»¶ã€‚</li></ul></li></ul></li></ul></li><li><p>è¿”å›å“åº”</p></li></ul><h1 id="è´¦å•è¯¦ç»†åŠå…¶æ•°æ®è·å–"><a href="#è´¦å•è¯¦ç»†åŠå…¶æ•°æ®è·å–" class="headerlink" title="è´¦å•è¯¦ç»†åŠå…¶æ•°æ®è·å–"></a>è´¦å•è¯¦ç»†åŠå…¶æ•°æ®è·å–</h1><h2 id="è´¦å•åˆ—è¡¨è·å–"><a href="#è´¦å•åˆ—è¡¨è·å–" class="headerlink" title="è´¦å•åˆ—è¡¨è·å–"></a>è´¦å•åˆ—è¡¨è·å–</h2><p>æˆ‘ä»¬éœ€è¦çš„æ•°æ®ç±»å‹æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    date: &#x27;2020-1-1&#x27;,</span><br><span class="line">    bills: [</span><br><span class="line">      &#123;</span><br><span class="line">        // bill æ•°æ®è¡¨ä¸­çš„æ¯ä¸€é¡¹è´¦å•</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        // bill æ•°æ®è¡¨ä¸­çš„æ¯ä¸€é¡¹è´¦å•</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    date: &#x27;2020-1-2&#x27;,</span><br><span class="line">    bills: [</span><br><span class="line">      &#123;</span><br><span class="line">        // bill æ•°æ®è¡¨ä¸­çš„æ¯ä¸€é¡¹è´¦å•</span><br><span class="line">      &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>å¹¶ä¸”æˆ‘ä»¬å‰ç«¯è¿˜éœ€è¦åšæ»šåŠ¨åŠ è½½æ›´å¤šï¼Œæ‰€ä»¥æœåŠ¡ç«¯æ˜¯éœ€è¦ç»™åˆ†é¡µçš„ã€‚äºæ˜¯å°±éœ€è¦åœ¨è·å– <code>bill</code> è¡¨é‡Œçš„æ•°æ®ä¹‹åï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå°†æ•°æ®æ•´åˆæˆä¸Šè¿°æ ¼å¼ã€‚</p><p>å½“ç„¶ï¼Œè·å–çš„æ—¶é—´ç»´åº¦ä»¥æœˆä¸ºå•ä½ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®è´¦å•ç±»å‹è¿›è¡Œç­›é€‰ã€‚ä¸Šå›¾å·¦ä¸Šè§’æœ‰å½“æœˆçš„æ€»æ”¯å‡ºå’Œæ€»æ”¶å…¥æƒ…å†µï¼Œæˆ‘ä»¬ä¹Ÿåœ¨åˆ—è¡¨æ•°æ®ä¸­ç»™å‡ºï¼Œå› ä¸ºå®ƒå’Œè´¦å•æ•°æ®æ˜¯å¼ºç›¸å…³çš„ã€‚</p><p>äºæ˜¯ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>/controller/bill.js</code> æ·»åŠ ä¸€ä¸ª <code>list</code> æ–¹æ³•ï¼Œæ¥å¤„ç†è´¦å•æ•°æ®åˆ—è¡¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; ctx, app &#125; = <span class="variable language_">this</span>;</span><br><span class="line">  <span class="comment">// è·å–å‰ç«¯ä¼ é€’çš„å‚æ•°ï¼ŒåŒ…æ‹¬æ—¥æœŸã€åˆ†é¡µä¿¡æ¯ã€ä»¥åŠè´¦å•ç±»å‹</span></span><br><span class="line">  <span class="keyword">const</span> &#123; date, page = <span class="number">1</span>, page_size = <span class="number">5</span>, type_id = <span class="string">&quot;all&quot;</span> &#125; = ctx.<span class="property">query</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è§£æ tokenï¼Œè·å– user_id</span></span><br><span class="line">    <span class="keyword">const</span> token = ctx.<span class="property">request</span>.<span class="property">header</span>.<span class="property">authorization</span>;</span><br><span class="line">    <span class="keyword">const</span> decode = <span class="keyword">await</span> app.<span class="property">jwt</span>.<span class="title function_">verify</span>(token, app.<span class="property">config</span>.<span class="property">jwt</span>.<span class="property">secret</span>);</span><br><span class="line">    <span class="keyword">if</span> (!decode) <span class="keyword">return</span>; <span class="comment">// token è§£æå¤±è´¥åˆ™ç›´æ¥è¿”å›</span></span><br><span class="line">    <span class="keyword">const</span> user_id = decode.<span class="property">id</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ•°æ®åº“ï¼Œè·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰è´¦å•æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> list = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">bill</span>.<span class="title function_">list</span>(user_id);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿‡æ»¤ç¬¦åˆæ—¥æœŸå’Œç±»å‹çš„è´¦å•ï¼Œå¹¶ä½¿ç”¨ reduce è¿›è¡Œæ•°æ®å½’ç±»å’Œæ”¶æ”¯ç»Ÿè®¡</span></span><br><span class="line">    <span class="keyword">const</span> &#123; listMap, totalExpense, totalIncome &#125; = list</span><br><span class="line">      .<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ ¼å¼åŒ–è´¦å•æ—¥æœŸï¼ˆå¹´æœˆï¼‰</span></span><br><span class="line">        <span class="keyword">const</span> itemDate = <span class="title function_">moment</span>(<span class="title class_">Number</span>(item.<span class="property">date</span>)).<span class="title function_">format</span>(<span class="string">&quot;YYYY-MM&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> itemDate === date &amp;&amp; (type_id === <span class="string">&quot;all&quot;</span> || item.<span class="property">type_id</span> == type_id);</span><br><span class="line">      &#125;)</span><br><span class="line">      .<span class="title function_">reduce</span>(</span><br><span class="line">        <span class="function">(<span class="params">acc, item</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// æ ¼å¼åŒ–è´¦å•æ—¥æœŸï¼ˆå¹´æœˆæ—¥ï¼‰</span></span><br><span class="line">          <span class="keyword">const</span> formattedDate = <span class="title function_">moment</span>(<span class="title class_">Number</span>(item.<span class="property">date</span>)).<span class="title function_">format</span>(<span class="string">&quot;YYYY-MM-DD&quot;</span>);</span><br><span class="line"></span><br><span class="line">          <span class="comment">// è®¡ç®—æ”¶æ”¯æ€»é¢</span></span><br><span class="line">          <span class="keyword">if</span> (item.<span class="property">pay_type</span> == <span class="number">1</span>) acc.<span class="property">totalExpense</span> += <span class="title class_">Number</span>(item.<span class="property">amount</span>); <span class="comment">// æ”¯å‡º</span></span><br><span class="line">          <span class="keyword">if</span> (item.<span class="property">pay_type</span> == <span class="number">2</span>) acc.<span class="property">totalIncome</span> += <span class="title class_">Number</span>(item.<span class="property">amount</span>); <span class="comment">// æ”¶å…¥</span></span><br><span class="line"></span><br><span class="line">          <span class="comment">// æŸ¥æ‰¾å½“å‰æ—¥æœŸæ˜¯å¦å·²ç»å­˜åœ¨äº listMap æ•°ç»„ä¸­</span></span><br><span class="line">          <span class="keyword">const</span> index = acc.<span class="property">listMap</span>.<span class="title function_">findIndex</span>(<span class="function"><span class="params">i</span> =&gt;</span> i.<span class="property">date</span> === formattedDate);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœå·²æœ‰è¯¥æ—¥æœŸçš„æ•°æ®ï¼Œåˆ™ç›´æ¥å¾€è¯¥æ—¥æœŸçš„ bills æ•°ç»„ä¸­è¿½åŠ </span></span><br><span class="line">            acc.<span class="property">listMap</span>[index].<span class="property">bills</span>.<span class="title function_">push</span>(item);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ï¼Œæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«è¯¥æ—¥æœŸçš„è´¦å•</span></span><br><span class="line">            acc.<span class="property">listMap</span>.<span class="title function_">push</span>(&#123; <span class="attr">date</span>: formattedDate, <span class="attr">bills</span>: [item] &#125;);</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> acc; <span class="comment">// è¿”å›ç´¯ç§¯å¯¹è±¡</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; <span class="attr">listMap</span>: [], <span class="attr">totalExpense</span>: <span class="number">0</span>, <span class="attr">totalIncome</span>: <span class="number">0</span> &#125; <span class="comment">// reduce çš„åˆå§‹å€¼</span></span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŒ‰æ—¥æœŸå€’åºæ’åºï¼Œè®©æœ€æ–°çš„è´¦å•æ’åœ¨æœ€å‰</span></span><br><span class="line">    listMap.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="title function_">moment</span>(b.<span class="property">date</span>) - <span class="title function_">moment</span>(a.<span class="property">date</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ†é¡µå¤„ç†ï¼Œè·å–å½“å‰é¡µçš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> filterListMap = listMap.<span class="title function_">slice</span>((page - <span class="number">1</span>) * page_size, page * page_size);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è¿”å›æ•°æ®</span></span><br><span class="line">    ctx.<span class="property">body</span> = &#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: &#123;</span><br><span class="line">        totalExpense, <span class="comment">// å½“æœˆæ€»æ”¯å‡º</span></span><br><span class="line">        totalIncome, <span class="comment">// å½“æœˆæ€»æ”¶å…¥</span></span><br><span class="line">        <span class="attr">totalPage</span>: <span class="title class_">Math</span>.<span class="title function_">ceil</span>(listMap.<span class="property">length</span> / page_size), <span class="comment">// æ€»é¡µæ•°</span></span><br><span class="line">        <span class="attr">list</span>: filterListMap <span class="comment">// ç»è¿‡åˆ†é¡µå¤„ç†åçš„æ•°æ®</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// æ•è·å¼‚å¸¸ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    ctx.<span class="property">body</span> = &#123;</span><br><span class="line">      <span class="attr">code</span>: <span class="number">500</span>,</span><br><span class="line">      <span class="attr">msg</span>: <span class="string">&quot;ç³»ç»Ÿé”™è¯¯&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="literal">null</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­çš„<strong>date</strong>æ˜¯æ—¶é—´æˆ³ï¼Œå…¶å•ä½æ˜¯æ¯«ç§’ï¼Œæ‰€ä»¥å¯¹äº<code>2025-03-15 23:30:03</code>ï¼Œæˆ‘ä»¬åœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„æ˜¯<code>1742052603000</code>å¤šäº†3ä¸ª0</p></blockquote><blockquote></blockquote><h2 id="è´¦å•æ•°æ®"><a href="#è´¦å•æ•°æ®" class="headerlink" title="è´¦å•æ•°æ®"></a>è´¦å•æ•°æ®</h2><p><strong>æˆ‘ä»¬æœ€ç»ˆè¦è¿”å›çš„æ•°æ®æœºæ„å¦‚ä¸‹ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">total_data</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">number</span>: <span class="number">137.84</span>, <span class="comment">// æ”¯å‡ºæˆ–æ”¶å…¥æ•°é‡</span></span><br><span class="line">      <span class="attr">pay_type</span>: <span class="number">1</span>, <span class="comment">// æ”¯å‡ºæˆ–æ¶ˆè´¹ç±»å‹å€¼</span></span><br><span class="line">      <span class="attr">type_id</span>: <span class="number">1</span>, <span class="comment">// æ¶ˆè´¹ç±»å‹id</span></span><br><span class="line">      <span class="attr">type_name</span>: <span class="string">&quot;é¤é¥®&quot;</span> <span class="comment">// æ¶ˆè´¹ç±»å‹åç§°</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">total_expense</span>: <span class="number">3123.54</span>, <span class="comment">// æ€»æ¶ˆè´¹</span></span><br><span class="line">  <span class="attr">total_income</span>: <span class="number">6555.80</span> <span class="comment">// æ€»æ”¶å…¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; ctx, app &#125; = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> &#123; date = <span class="string">&quot;&quot;</span> &#125; = ctx.<span class="property">query</span>;</span><br><span class="line">    <span class="keyword">const</span> token = ctx.<span class="property">request</span>.<span class="property">header</span>.<span class="property">authorization</span>;</span><br><span class="line">    <span class="keyword">const</span> decode = app.<span class="property">jwt</span>.<span class="title function_">verify</span>(token, app.<span class="property">config</span>.<span class="property">jwt</span>.<span class="property">secret</span>);</span><br><span class="line">    <span class="keyword">const</span> user_id = decode.<span class="property">id</span>;</span><br><span class="line">    <span class="keyword">if</span> (!decode) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> ctx.<span class="property">service</span>.<span class="property">bill</span>.<span class="title function_">list</span>(user_id);</span><br><span class="line">      <span class="keyword">const</span> start = <span class="title function_">moment</span>(date).<span class="title function_">startOf</span>(<span class="string">&quot;month&quot;</span>).<span class="title function_">unix</span>() * <span class="number">1000</span>;</span><br><span class="line">      <span class="keyword">const</span> end = <span class="title function_">moment</span>(date).<span class="title function_">endOf</span>(<span class="string">&quot;month&quot;</span>).<span class="title function_">unix</span>() * <span class="number">1000</span>;</span><br><span class="line">      <span class="keyword">const</span> _data = result.<span class="title function_">filter</span>(</span><br><span class="line">        <span class="function">(<span class="params">item</span>) =&gt;</span> <span class="title class_">Number</span>(item.<span class="property">date</span>) &gt; start &amp;&amp; <span class="title class_">Number</span>(item.<span class="property">date</span>) &lt; end</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">const</span> total_expense = _data.<span class="title function_">reduce</span>(<span class="function">(<span class="params">arr, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.<span class="property">pay_type</span> == <span class="number">1</span>) &#123;</span><br><span class="line">          arr += <span class="title class_">Number</span>(cur.<span class="property">amount</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">const</span> total_income = _data.<span class="title function_">reduce</span>(<span class="function">(<span class="params">arr, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (cur.<span class="property">pay_type</span> == <span class="number">2</span>) &#123;</span><br><span class="line">          arr += <span class="title class_">Number</span>(cur.<span class="property">amount</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">      &#125;, <span class="number">0</span>);</span><br><span class="line">      <span class="keyword">let</span> total_data = _data.<span class="title function_">reduce</span>(<span class="function">(<span class="params">arr, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> index = arr.<span class="title function_">findIndex</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">type_id</span> == cur.<span class="property">type_id</span>);</span><br><span class="line">        <span class="keyword">if</span> (index == -<span class="number">1</span>) &#123;</span><br><span class="line">          arr.<span class="title function_">push</span>(&#123;</span><br><span class="line">            <span class="attr">type_id</span>: cur.<span class="property">type_id</span>,</span><br><span class="line">            <span class="attr">type_name</span>: cur.<span class="property">type_name</span>,</span><br><span class="line">            <span class="attr">pay_type</span>: cur.<span class="property">pay_type</span>,</span><br><span class="line">            <span class="attr">number</span>: <span class="title class_">Number</span>(cur.<span class="property">amount</span>),</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (index &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">          arr[index].<span class="property">number</span> += <span class="title class_">Number</span>(cur.<span class="property">amount</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">      &#125;, []);</span><br><span class="line">      total_data = total_data.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        item.<span class="property">number</span> = <span class="title class_">Number</span>(<span class="title class_">Number</span>(item.<span class="property">number</span>).<span class="title function_">toFixed</span>(<span class="number">2</span>));</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">      &#125;);</span><br><span class="line">      ctx.<span class="property">body</span> = &#123;</span><br><span class="line">        <span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&quot;è¯·æ±‚æˆåŠŸ&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">          <span class="attr">total_expense</span>: <span class="title class_">Number</span>(total_expense).<span class="title function_">toFixed</span>(<span class="number">2</span>),</span><br><span class="line">          <span class="attr">total_income</span>: <span class="title class_">Number</span>(total_income).<span class="title function_">toFixed</span>(<span class="number">2</span>),</span><br><span class="line">          <span class="attr">total_data</span>: total_data || [],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h1 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h1><h2 id="reduce-æ–¹æ³•è¯¦è§£"><a href="#reduce-æ–¹æ³•è¯¦è§£" class="headerlink" title="reduce() æ–¹æ³•è¯¦è§£"></a><strong><code>reduce()</code> æ–¹æ³•è¯¦è§£</strong></h2><p><code>reduce()</code> æ˜¯ <strong>JavaScript æ•°ç»„çš„é«˜é˜¶æ–¹æ³•</strong>ï¼Œç”¨äºå¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œ <strong>ç´¯åŠ ã€å½’çº³ã€åˆå¹¶</strong>ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ª <strong>ç´¯ç§¯è®¡ç®—çš„ç»“æœ</strong>ã€‚</p><hr><h3 id="ğŸ“Œ-è¯­æ³•"><a href="#ğŸ“Œ-è¯­æ³•" class="headerlink" title="ğŸ“Œ è¯­æ³•"></a><strong>ğŸ“Œ è¯­æ³•</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array.<span class="title function_">reduce</span>(<span class="function">(<span class="params">accumulator, currentValue, currentIndex, array</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¤„ç†é€»è¾‘</span></span><br><span class="line">&#125;, initialValue);</span><br></pre></td></tr></table></figure><ul><li><p><code>accumulator</code>ï¼ˆç´¯åŠ å™¨ï¼‰ï¼šä¿å­˜ä¸Šä¸€æ¬¡ <code>reduce</code> è¿­ä»£çš„è¿”å›å€¼ã€‚</p></li><li><p><code>currentValue</code>ï¼ˆå½“å‰å€¼ï¼‰ï¼šå½“å‰æ­£åœ¨å¤„ç†çš„æ•°ç»„å…ƒç´ ã€‚</p></li><li><p><code>currentIndex</code>ï¼ˆå½“å‰ç´¢å¼•ï¼‰ï¼šå½“å‰å…ƒç´ çš„ç´¢å¼•ï¼ˆå¯é€‰ï¼‰ã€‚</p></li><li><p><code>array</code>ï¼ˆåŸæ•°ç»„ï¼‰ï¼šæ­£åœ¨è¢«éå†çš„æ•°ç»„ï¼ˆå¯é€‰ï¼‰ã€‚</p></li><li><p><code> initialValueï¼ˆåˆå§‹å€¼ï¼‰</code>ï¼š<code>accumulator</code> çš„åˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰ã€‚</p><ul><li>å¦‚æœæä¾›äº† <code>initialValue</code>ï¼Œåˆ™ <code>accumulator</code> çš„åˆå§‹å€¼å°±æ˜¯ <code>initialValue</code>ï¼Œå¹¶ä» <code>array[0]</code> å¼€å§‹è¿­ä»£ã€‚</li><li>å¦‚æœ **æœªæä¾› <code>initialValue</code>**ï¼Œåˆ™ <code>accumulator</code> é»˜è®¤ç­‰äº <code>array[0]</code>ï¼Œå¹¶ä» <code>array[1]</code> å¼€å§‹è¿­ä»£ã€‚</li></ul></li></ul><hr><h3 id="ğŸ”-reduce-çš„åŸºæœ¬ç”¨æ³•"><a href="#ğŸ”-reduce-çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="ğŸ” reduce() çš„åŸºæœ¬ç”¨æ³•"></a><strong>ğŸ” <code>reduce()</code> çš„åŸºæœ¬ç”¨æ³•</strong></h3><h4 id="1ï¸âƒ£-è®¡ç®—æ•°ç»„æ€»å’Œ"><a href="#1ï¸âƒ£-è®¡ç®—æ•°ç»„æ€»å’Œ" class="headerlink" title="1ï¸âƒ£ è®¡ç®—æ•°ç»„æ€»å’Œ"></a><strong>1ï¸âƒ£ è®¡ç®—æ•°ç»„æ€»å’Œ</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> sum = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> acc + cur, <span class="number">0</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sum); <span class="comment">// 15</span></span><br></pre></td></tr></table></figure><p><code>acc</code> åˆå§‹å€¼æ˜¯ <code>0</code>ï¼Œæ¯æ¬¡ç´¯åŠ å½“å‰ <code>cur</code>ã€‚</p><ul><li><p>è®¡ç®—è¿‡ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">0</span> + <span class="number">1</span>) -&gt; <span class="number">1</span></span><br><span class="line">(<span class="number">1</span> + <span class="number">2</span>) -&gt; <span class="number">3</span></span><br><span class="line">(<span class="number">3</span> + <span class="number">3</span>) -&gt; <span class="number">6</span></span><br><span class="line">(<span class="number">6</span> + <span class="number">4</span>) -&gt; <span class="number">10</span></span><br><span class="line">(<span class="number">10</span> + <span class="number">5</span>) -&gt; <span class="number">15</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="2ï¸âƒ£-æ‰¾æœ€å¤§å€¼"><a href="#2ï¸âƒ£-æ‰¾æœ€å¤§å€¼" class="headerlink" title="2ï¸âƒ£ æ‰¾æœ€å¤§å€¼"></a><strong>2ï¸âƒ£ æ‰¾æœ€å¤§å€¼</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">10</span>, <span class="number">25</span>, <span class="number">88</span>, <span class="number">3</span>, <span class="number">50</span>];</span><br><span class="line"><span class="keyword">const</span> max = numbers.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(acc, cur));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(max); <span class="comment">// 88</span></span><br></pre></td></tr></table></figure><ul><li><p>è®¡ç®—è¿‡ç¨‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">10</span>, <span class="number">25</span>) -&gt; <span class="number">25</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">25</span>, <span class="number">88</span>) -&gt; <span class="number">88</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">88</span>, <span class="number">3</span>) -&gt; <span class="number">88</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">88</span>, <span class="number">50</span>) -&gt; <span class="number">88</span></span><br></pre></td></tr></table></figure></li></ul><hr><h4 id="3ï¸âƒ£-ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°"><a href="#3ï¸âƒ£-ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°" class="headerlink" title="3ï¸âƒ£ ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°"></a><strong>3ï¸âƒ£ ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = fruits.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">  acc[cur] = (acc[cur] || <span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line"><span class="comment">// &#123; apple: 3, banana: 2, orange: 1 &#125;</span></span><br></pre></td></tr></table></figure><ul><li><code>acc[cur]</code> è®°å½•å½“å‰æ°´æœå‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™é»˜è®¤ä¸º <code>0</code>ã€‚</li></ul><hr><h4 id="4ï¸âƒ£-æ•°ç»„å¯¹è±¡æŒ‰å±æ€§å½’ç±»"><a href="#4ï¸âƒ£-æ•°ç»„å¯¹è±¡æŒ‰å±æ€§å½’ç±»" class="headerlink" title="4ï¸âƒ£ æ•°ç»„å¯¹è±¡æŒ‰å±æ€§å½’ç±»"></a><strong>4ï¸âƒ£ æ•°ç»„å¯¹è±¡æŒ‰å±æ€§å½’ç±»</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Charlie&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;David&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&#x27;Eve&#x27;</span>, <span class="attr">age</span>: <span class="number">35</span> &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> groupedByAge = people.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, person</span>) =&gt;</span> &#123;</span><br><span class="line">  (acc[person.<span class="property">age</span>] = acc[person.<span class="property">age</span>] || []).<span class="title function_">push</span>(person);</span><br><span class="line">  <span class="keyword">return</span> acc;</span><br><span class="line">&#125;, &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(groupedByAge);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  25: [&#123; name: &#x27;Alice&#x27;, age: 25 &#125;, &#123; name: &#x27;Charlie&#x27;, age: 25 &#125;],</span></span><br><span class="line"><span class="comment">  30: [&#123; name: &#x27;Bob&#x27;, age: 30 &#125;, &#123; name: &#x27;David&#x27;, age: 30 &#125;],</span></span><br><span class="line"><span class="comment">  35: [&#123; name: &#x27;Eve&#x27;, age: 35 &#125;]</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨ï¼š</strong> æŠŠç›¸åŒ <code>age</code> çš„äººå½’ç±»åˆ°åŒä¸€ä¸ªæ•°ç»„ã€‚</li></ul><hr><h3 id="ğŸš€-åœ¨ä½ çš„-Egg-js-ä»£ç ä¸­çš„-reduce-ä½œç”¨"><a href="#ğŸš€-åœ¨ä½ çš„-Egg-js-ä»£ç ä¸­çš„-reduce-ä½œç”¨" class="headerlink" title="ğŸš€ åœ¨ä½ çš„ Egg.js ä»£ç ä¸­çš„ reduce() ä½œç”¨"></a><strong>ğŸš€ åœ¨ä½ çš„ Egg.js ä»£ç ä¸­çš„ <code>reduce()</code> ä½œç”¨</strong></h3><p>ä½ çš„ä»£ç é‡Œç”¨ <code>reduce()</code> <strong>æŒ‰ç…§ <code>YYYY-MM-DD</code> å½’ç±»è´¦å•</strong>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> listMap = _list.<span class="title function_">reduce</span>(<span class="function">(<span class="params">curr, item</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> date = <span class="title function_">moment</span>(<span class="title class_">Number</span>(item.<span class="property">date</span>)).<span class="title function_">format</span>(<span class="string">&#x27;YYYY-MM-DD&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// æŸ¥æ‰¾æ˜¯å¦å·²æœ‰ç›¸åŒæ—¥æœŸçš„åˆ†ç»„</span></span><br><span class="line">  <span class="keyword">if</span> (curr.<span class="property">length</span> &amp;&amp; curr.<span class="title function_">findIndex</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">date</span> == date) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> index = curr.<span class="title function_">findIndex</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">date</span> == date);</span><br><span class="line">    curr[index].<span class="property">bills</span>.<span class="title function_">push</span>(item);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    curr.<span class="title function_">push</span>(&#123; date, <span class="attr">bills</span>: [item] &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> curr;</span><br><span class="line">&#125;, []).<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="title function_">moment</span>(b.<span class="property">date</span>) - <span class="title function_">moment</span>(a.<span class="property">date</span>));</span><br></pre></td></tr></table></figure><h3 id="ğŸ‘€-å®ƒåœ¨å¹²ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ‘€-å®ƒåœ¨å¹²ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ‘€ å®ƒåœ¨å¹²ä»€ä¹ˆï¼Ÿ"></a><strong>ğŸ‘€ å®ƒåœ¨å¹²ä»€ä¹ˆï¼Ÿ</strong></h3><ol><li><p><code>reduce()</code> éå†è´¦å•åˆ—è¡¨ <code>_list</code></p><p>ï¼š</p><ul><li><code>curr</code>ï¼šå­˜å‚¨å·²å½’ç±»çš„è´¦å•æ•°æ®ã€‚</li><li><code>item</code>ï¼šå½“å‰è´¦å•é¡¹ã€‚</li></ul></li><li><p>æŒ‰ <code>YYYY-MM-DD</code> å½’ç±»è´¦å•</p><p>ï¼š</p><ul><li><strong>å¦‚æœ <code>curr</code> é‡Œå·²ç»å­˜åœ¨è¯¥æ—¥æœŸ</strong>ï¼Œå°±æŠŠ <code>item</code> åŠ å…¥å·²æœ‰çš„ <code>bills</code>ã€‚</li><li><strong>å¦‚æœ <code>curr</code> é‡Œæ²¡æœ‰è¯¥æ—¥æœŸ</strong>ï¼Œæ–°å»º <code>&#123; date, bills: [item] &#125;</code>ã€‚</li></ul></li><li><p><strong>æœ€åæŒ‰æ—¶é—´å€’åºæ’åº</strong>ã€‚</p></li></ol><hr><h3 id="ğŸ¯-reduce-vs-map-vs-forEach"><a href="#ğŸ¯-reduce-vs-map-vs-forEach" class="headerlink" title="ğŸ¯ reduce() vs map() vs forEach()"></a><strong>ğŸ¯ <code>reduce()</code> vs <code>map()</code> vs <code>forEach()</code></strong></h3><table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>æ˜¯å¦è¿”å›æ–°æ•°ç»„</th><th>ä¸»è¦ç”¨é€”</th></tr></thead><tbody><tr><td><code>reduce()</code></td><td>å½’çº³ &amp; è®¡ç®—</td><td>âŒ éœ€è¦æ‰‹åŠ¨è¿”å›</td><td>ç»Ÿè®¡ã€åˆ†ç»„ã€ç´¯åŠ </td></tr><tr><td><code>map()</code></td><td>æ˜ å°„è½¬æ¢</td><td>âœ… è¿”å›æ–°æ•°ç»„</td><td>å¯¹æ•°ç»„å…ƒç´ è¿›è¡Œè½¬æ¢</td></tr><tr><td><code>forEach()</code></td><td>ä»…éå†</td><td>âŒ æ— è¿”å›å€¼</td><td>ä»…æ‰§è¡Œæ“ä½œï¼Œæ— è¿”å›å€¼</td></tr></tbody></table><blockquote><p><strong>ğŸ“ ç»“è®º</strong>ï¼šå¦‚æœä½ è¦ <strong>ç´¯åŠ ã€å½’ç±»ã€ç»Ÿè®¡</strong>ï¼Œ<code>reduce()</code> æ˜¯æœ€åˆé€‚çš„é€‰æ‹©ï¼</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> react </tag>
            
            <tag> eggjs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-ä¸­ç§‘å¤§è®¡ç½‘-ç¬¬äºŒç« -åº”ç”¨å±‚</title>
      <link href="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/"/>
      <url>/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<p>æœ¬ç« åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>åŸç†<ul><li>ä¼ è¾“å±‚çš„æœåŠ¡æ¨¡å‹</li><li>å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼</li><li>å¯¹ç­‰æ¨¡å¼(peer-to-peer)</li><li>å†…å®¹æ–¹æ³•ç½‘ç»œ</li></ul></li><li>å®ä¾‹<ul><li>HTTP</li><li>FTP</li><li>SMTP&#x2F;POP3&#x2F;IMAP</li><li>DNS</li></ul></li><li>ç¼–ç¨‹<ul><li>Socket API</li></ul></li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123024827721.png" alt="image-20250123024827721"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123024832303.png" alt="image-20250123024832303"></p><h1 id="åº”ç”¨å±‚åè®®åŸç†"><a href="#åº”ç”¨å±‚åè®®åŸç†" class="headerlink" title="åº”ç”¨å±‚åè®®åŸç†"></a>åº”ç”¨å±‚åè®®åŸç†</h1><h2 id="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼-C-S-client-server"><a href="#å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼-C-S-client-server" class="headerlink" title="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼(C&#x2F;S:client&#x2F;server)"></a>å®¢æˆ·-æœåŠ¡å™¨æ¨¡å¼(C&#x2F;S:client&#x2F;server)</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123025028234.png" alt="image-20250123025028234"></p><ul><li>ä¸»è¦åœ¨äºæ‰©å±•æ€§å·®ï¼Œä¸”å®¢æˆ·ç«¯å¤šäºé˜ˆå€¼ï¼ŒæœåŠ¡å™¨çš„æ€§èƒ½ä¼šæ–­å´–å¼åœ°ä¸‹é™</li><li>å¯é æ€§ä¹Ÿå·®</li></ul><h2 id="å¯¹ç­‰æ¨¡å¼-P2P"><a href="#å¯¹ç­‰æ¨¡å¼-P2P" class="headerlink" title="å¯¹ç­‰æ¨¡å¼(P2P)"></a>å¯¹ç­‰æ¨¡å¼(P2P)</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123025039562.png" alt="image-20250123025039562"></p><h2 id="æ··åˆä½“ï¼šCSå’ŒP2Pä½“ç³»ç»“æ„"><a href="#æ··åˆä½“ï¼šCSå’ŒP2Pä½“ç³»ç»“æ„" class="headerlink" title="æ··åˆä½“ï¼šCSå’ŒP2Pä½“ç³»ç»“æ„"></a>æ··åˆä½“ï¼šCSå’ŒP2Pä½“ç³»ç»“æ„</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123025056878.png" alt="image-20250123025056878"></p><h2 id="è¿›ç¨‹é€šä¿¡"><a href="#è¿›ç¨‹é€šä¿¡" class="headerlink" title="è¿›ç¨‹é€šä¿¡"></a>è¿›ç¨‹é€šä¿¡</h2><p><strong>è¿›ç¨‹</strong>ï¼šåœ¨ä¸»æœºä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åº</p><blockquote><p>å®¢æˆ·ç«¯è¿›ç¨‹ï¼šå‘èµ·é€šè®¯çš„è¿›ç¨‹</p><p>æœåŠ¡å™¨è¿›ç¨‹ï¼šç­‰å¾…è¿æ¥çš„è¿›ç¨‹</p></blockquote><ul><li>åœ¨åŒä¸€ä¸ªä¸»æœºå†…ï¼Œä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡æœºåˆ¶é€šä¿¡(æ“ä½œç³»ç»Ÿå®šä¹‰)</li><li>ä¸åŒä¸»æœºï¼Œäº¤æ¢æŠ¥æ–‡(Message)æ¥é€šä¿¡<ul><li>ä½¿ç”¨OSæä¾›çš„é€šè®¯æœåŠ¡</li><li>æŒ‰ç…§åº”ç”¨åè®®äº¤æ¢æŠ¥æ–‡<ul><li>å€ŸåŠ©ä¼ è¾“å±‚æä¾›çš„æœåŠ¡</li></ul></li><li>æ³¨æ„ï¼šP2Pæ¶æ„çš„åº”ç”¨ä¹Ÿæœ‰å®¢æˆ·ç«¯è¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹ä¹‹åˆ†</li></ul></li></ul><h2 id="åˆ†å¸ƒå¼è¿›ç¨‹é€šè®¯éœ€è¦è§£å†³çš„é—®é¢˜"><a href="#åˆ†å¸ƒå¼è¿›ç¨‹é€šè®¯éœ€è¦è§£å†³çš„é—®é¢˜" class="headerlink" title="åˆ†å¸ƒå¼è¿›ç¨‹é€šè®¯éœ€è¦è§£å†³çš„é—®é¢˜"></a>åˆ†å¸ƒå¼è¿›ç¨‹é€šè®¯éœ€è¦è§£å†³çš„é—®é¢˜</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123025817359.png" alt="image-20250123025817359"></p><ul><li>é—®é¢˜1ï¼šè¿›ç¨‹æ ‡ç¤ºå’Œå¯»å€é—®é¢˜**(æœåŠ¡ç”¨æˆ·)**</li><li>é—®é¢˜2ï¼šä¼ è¾“å±‚-åº”ç”¨å±‚æä¾›æœåŠ¡æ˜¯å¦‚ä½•**(æœåŠ¡)**<ul><li>ä½ç½®ï¼šå±‚é—´ç•Œé¢çš„SAP(TCP&#x2F;IPï¼šsocket)</li><li>å½¢å¼ï¼šåº”ç”¨ç¨‹åºæ¥å£API(TCP&#x2F;IP : socket API)</li></ul></li><li>é—®é¢˜3ï¼šå¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡ï¼Œå®ç°åº”ç”¨è¿›ç¨‹é—´çš„æŠ¥æ–‡äº¤æ¢ï¼Œå®ç°åº”ç”¨**(ç”¨æˆ·ä½¿ç”¨æœåŠ¡)**<ul><li>å®šä¹‰åº”ç”¨å±‚åè®®ï¼šæŠ¥æ–‡æ ¼å¼ï¼Œè§£é‡Šï¼Œæ—¶åºç­‰</li><li>ç¼–åˆ¶ç¨‹åºï¼Œä½¿ç”¨OSæä¾›çš„APIï¼Œè°ƒç”¨ç½‘ç»œåŸºç¡€è®¾å¤‡æä¾›é€šè®¯æœåŠ¡ä¼ æŠ¥æ–‡ï¼Œå®ç°ä½¿ç”¨æ—¶åºç­‰</li></ul></li></ul><h3 id="é—®é¢˜1ï¼šå¯¹è¿›ç¨‹è¿›è¡Œç¼–å€-addressing"><a href="#é—®é¢˜1ï¼šå¯¹è¿›ç¨‹è¿›è¡Œç¼–å€-addressing" class="headerlink" title="é—®é¢˜1ï¼šå¯¹è¿›ç¨‹è¿›è¡Œç¼–å€(addressing)"></a>é—®é¢˜1ï¼šå¯¹è¿›ç¨‹è¿›è¡Œç¼–å€(addressing)</h3><ul><li><p>è¿›ç¨‹ä¸ºäº†æ¥æ”¶æŠ¥æ–‡ï¼Œå¿…é¡»æœ‰ä¸€ä¸ª<strong>æ ‡è¯†</strong>å³SAPï¼ˆå‘é€ä¹Ÿéœ€è¦æ ‡ç¤º)</p><ul><li>ä¸»æœºï¼šå”¯ä¸€çš„32ä½<strong>IPåœ°å€</strong><ul><li>ä»…ä»…æœ‰IPåœ°å€ä¸èƒ½å¤Ÿå”¯ä¸€æ ‡ç¤ºå‡ºä¸€ä¸ªè¿›ç¨‹ï¼›åœ¨ä¸€å°ç«¯ç³»ç»Ÿä¸Šæœ‰å¾ˆå¤šåº”ç”¨è¿›ç¨‹åœ¨è¿è¡Œ</li></ul></li><li>æ‰€é‡‡ç”¨çš„ä¼ è¾“å±‚åè®®ï¼šTCP or UDP</li><li><strong>ç«¯å£å·</strong>(Port Numbers)</li></ul></li><li><p>ä¸€äº›çŸ¥åç«¯å£å·çš„ä¾‹å­</p><ul><li>HTTP:TCP 80 Mail: TCP25 ftp:TCP 2</li></ul></li><li><p>ä¸€ä¸ªè¿›ç¨‹ï¼šç”¨IP+portæ ‡ç¤º ç«¯èŠ‚ç‚¹</p></li><li><p>æœ¬è´¨ä¸Šï¼Œä¸€å¯¹ä¸»æœºè¿›ç¨‹ä¹‹é—´çš„é€šè®¯ç”±2ä¸ªç«¯èŠ‚ç‚¹æ„æˆ</p></li></ul><h3 id="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä¿¡æ¯"><a href="#é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä¿¡æ¯" class="headerlink" title="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä¿¡æ¯"></a>é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä¿¡æ¯</h3><ul><li>å±‚é—´æ¥å£å¿…é¡»è¦æºå¸¦çš„ä¿¡æ¯<ul><li>è¦ä¼ è¾“çš„æŠ¥æ–‡(å¯¹æœ¬å±‚æ¥è¯´ï¼šSDU)</li><li>è°ä¼ çš„ï¼šè‡ªå·±çš„åº”ç”¨è¿›ç¨‹æ ‡ç¤ºï¼šIP+TCP(UDP)ç«¯å£</li><li>ä¼ ç»™è°ï¼šå¯¹æ–¹çš„åº”ç”¨è¿›ç¨‹æ ‡ç¤ºï¼šå¯¹æ–¹çš„IP+TCP(UDP)ç«¯å£å·</li></ul></li><li>ä¼ è¾“å±‚å®ä½“(tcpæˆ–udpå®ä½“) æ ¹æ®è¿™äº›ä¿¡æ¯è¿›è¡ŒTCPæŠ¥æ–‡æ®µ(UDPæ•°æ®æŠ¥)çš„å°è£…<ul><li>æºç«¯å£å·ï¼Œç›®æ ‡ç«¯å£å·ï¼Œæ•°æ®ç­‰</li><li>å°†IPåœ°å€å¾€ä¸‹äº¤IPå®ä½“ï¼Œç”¨äºå°è£…IPæ•°æ®æŠ¥ï¼šæºIP, ç›®æ ‡IP</li></ul></li></ul><h3 id="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä»£è¡¨"><a href="#é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä»£è¡¨" class="headerlink" title="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä»£è¡¨"></a>é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-éœ€è¦ç©¿è¿‡å±‚é—´çš„ä»£è¡¨</h3><ul><li><p>å¦‚æœSocket API æ¯æ¬¡ä¼ è¾“æŠ¥æ–‡ï¼Œéƒ½æºå¸¦å¦‚æ­¤å¤šçš„ä¿¡æ¯ï¼Œå¤ªç¹çæ˜“é”™ï¼Œä¸ä¾¿äºç®¡ç†</p><ul><li>æ‰€ä»¥ä½¿ç”¨socketæ¥æ›¿ä»£è‡ªå·±å’Œå¯¹æ–¹çš„IPçš„ä¿¡æ¯</li></ul></li><li><p>ç”¨ä¸ªä»£å·æ ‡ç¤ºé€šä¿¡çš„åŒæ–¹æˆ–è€…å•æ–¹ï¼šsocket</p></li><li><p>å°±åƒOSæ‰“å¼€æ–‡ä»¶è¿”å›çš„å¥æŸ„ä¸€æ ·</p><ul><li>å¯¹å¥æŸ„çš„æ“ä½œï¼Œå°±æ˜¯å¯¹æ–‡ä»¶çš„æ“ä½œ</li></ul></li><li><p>TCP socketï¼š</p><ul><li>TCPæœåŠ¡ï¼Œä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡éœ€è¦ä¹‹å‰è¦å»ºç«‹è¿æ¥<ul><li>ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ä¼š<strong>æŒç»­</strong>ä¸€æ®µæ—¶é—´ï¼Œé€šä¿¡å…³ç³»ç¨³å®š</li></ul></li><li>å¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºä¸¤ä¸ªåº”ç”¨å®ä½“ä¹‹é—´çš„é€šä¿¡å…³ç³»ï¼Œ<strong>æœ¬åœ°</strong>æ ‡ç¤º</li><li>ç©¿è¿‡å±‚é—´æ¥å£çš„ä¿¡æ¯é‡<strong>æœ€å°</strong></li><li>TCP socketï¼šæºIP,æºç«¯å£ï¼Œç›®æ ‡IPï¼Œç›®æ ‡IP,ç›®æ ‡ç«¯å£</li></ul></li></ul><h4 id="TCPä¹‹ä¸Šçš„å¥—æ¥å­—-socket"><a href="#TCPä¹‹ä¸Šçš„å¥—æ¥å­—-socket" class="headerlink" title="TCPä¹‹ä¸Šçš„å¥—æ¥å­—(socket)"></a>TCPä¹‹ä¸Šçš„å¥—æ¥å­—(socket)</h4><ul><li>å¯¹äºä½¿ç”¨é¢å‘è¿æ¥æœåŠ¡ï¼ˆTCPï¼‰çš„åº”ç”¨è€Œè¨€ï¼Œå¥—æ¥å­—æ˜¯4å…ƒç»„çš„ä¸€ä¸ªå…·æœ‰<strong>æœ¬åœ°æ„ä¹‰çš„æ ‡ç¤º</strong><ul><li>4å…ƒç»„ï¼š**(æºIPï¼Œæºportï¼Œç›®æ ‡IPï¼Œç›®æ ‡port)**</li><li>å”¯ä¸€çš„æŒ‡å®šäº†ä¸€ä¸ªä¼šè¯ï¼ˆ2ä¸ªè¿›ç¨‹ä¹‹é—´çš„ä¼šè¯å…³ç³»ï¼‰</li><li>åº”ç”¨ä½¿ç”¨è¿™ä¸ª ï¼Œä¸è¿œç¨‹çš„åº”ç”¨è¿›ç¨‹é€šä¿¡</li><li>ä¸å¿…åœ¨æ¯ä¸€ä¸ªæŠ¥æ–‡çš„å‘é€éƒ½è¦æŒ‡å®šè¿™4å…ƒç»„</li><li>å°±åƒä½¿ç”¨æ“ä½œç³»ç»Ÿæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼ŒOSè¿”å›ä¸€ä¸ªæ–‡ä»¶å¥æŸ„ä¸€æ ·ï¼Œä»¥åä½¿ç”¨è¿™ä¸ªæ–‡ä»¶å¥æŸ„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶çš„ç›®å½•åã€æ–‡ä»¶å</li><li>ç®€å•ï¼Œä¾¿äºç®¡ç†</li></ul></li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031245958.png" alt="image-20250123031245958"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031302707.png" alt="image-20250123031302707"></p><p>TCP socketæ˜¯å­˜åœ¨æœ¬åœ°çš„ï¼Œå› æ­¤åº”ç”¨å±‚ä¼ ç»™ä¼ è¾“å±‚åï¼Œä¼ è¾“å±‚ä¼šæŸ¥socketè¡¨æ¥å¾—åˆ°IP</p><h2 id="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-å±‚é—´ä¿¡æ¯ä»£ç "><a href="#é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-å±‚é—´ä¿¡æ¯ä»£ç " class="headerlink" title="é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-å±‚é—´ä¿¡æ¯ä»£ç "></a>é—®é¢˜2ï¼šä¼ è¾“å±‚æä¾›çš„æœåŠ¡-å±‚é—´ä¿¡æ¯ä»£ç </h2><ul><li>UDP socket:<ul><li>UDPæœåŠ¡ï¼Œä¸¤ä¸ªè¿›ç¨‹é—´çš„é€šè®¯éœ€è¦å‰æ— éœ€å»ºç«‹è¿æ¥<ul><li>æ¯ä¸ªæŠ¥æ–‡éƒ½æ˜¯ç‹¬ç«‹ä¼ è¾“çš„</li><li>å‰åæŠ¥æ–‡å¯èƒ½ç»™ä¸åŒçš„åˆ†å¸ƒå¼è¿›ç¨‹</li></ul></li><li>å› æ­¤ï¼Œåªèƒ½ç”¨ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºæœ¬åº”ç”¨å®ä½“çš„æ ‡ç¤º<ul><li>å› ä¸ºè¿™ä¸ªæŠ¥æ–‡å¯èƒ½ä¼ ç»™å¦å¤–ä¸€ä¸ªåˆ†å¸ƒå¼è¿›ç¨‹</li></ul></li><li>ç©¿è¿‡å±‚é—´æ¥å£çš„ä¿¡æ¯å¤§å°æœ€å°</li><li>UDP socket: æœ¬IPï¼Œ æœ¬ç«¯å£</li><li>ä½†æ˜¯ä¼ è¾“æŠ¥æ–‡æ—¶ï¼Œå¿…é¡»è¦æä¾›å¯¹æ–¹IP,port<ul><li>æ¥æ”¶æŠ¥æ–‡æ—¶ï¼šä¼ è¾“å±‚éœ€è¦ä¸Šä¼ å¯¹æ–¹çš„IPï¼Œport</li></ul></li></ul></li></ul><h4 id="UDPä¹‹ä¸Šçš„å¥—æ¥å­—-socket"><a href="#UDPä¹‹ä¸Šçš„å¥—æ¥å­—-socket" class="headerlink" title="UDPä¹‹ä¸Šçš„å¥—æ¥å­—(socket)"></a>UDPä¹‹ä¸Šçš„å¥—æ¥å­—(socket)</h4><ul><li>å¯¹äºä½¿ç”¨æ— è¿æ¥æœåŠ¡ï¼ˆUDPï¼‰çš„åº”ç”¨è€Œè¨€ï¼Œå¥—æ¥å­—æ˜¯2å…ƒç»„çš„ä¸€ä¸ªå…·æœ‰<strong>æœ¬åœ°æ„ä¹‰çš„æ ‡ç¤º</strong><ul><li>2å…ƒç»„ï¼š<strong>IPï¼Œport</strong> ï¼ˆæºç«¯æŒ‡å®šï¼‰</li><li>UDPå¥—æ¥å­—æŒ‡å®šäº†åº”ç”¨æ‰€åœ¨çš„ä¸€ä¸ª<strong>ç«¯èŠ‚ç‚¹ï¼ˆend pointï¼‰</strong></li><li>åœ¨å‘é€æ•°æ®æŠ¥æ—¶ï¼Œé‡‡ç”¨åˆ›å»ºå¥½çš„æœ¬åœ°å¥—æ¥å­—ï¼ˆæ ‡ç¤ºIDï¼‰ï¼Œå°±ä¸å¿…åœ¨å‘é€æ¯ä¸ªæŠ¥æ–‡ä¸­æŒ‡æ˜è‡ªå·±æ‰€é‡‡ç”¨çš„ipå’Œport</li><li>ä½†æ˜¯åœ¨å‘é€æŠ¥æ–‡æ—¶ï¼Œå¿…é¡»è¦æŒ‡å®šå¯¹æ–¹çš„ipå’Œudp port(å¦å¤–ä¸€ä¸ªæ®µèŠ‚ç‚¹)</li></ul></li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031445502.png" alt="image-20250123031445502"></p><h4 id="å¥—æ¥å­—-Socket"><a href="#å¥—æ¥å­—-Socket" class="headerlink" title="å¥—æ¥å­—(Socket)"></a>å¥—æ¥å­—(Socket)</h4><ul><li>è¿›ç¨‹å‘å¥—æ¥å­—å‘é€æŠ¥æ–‡æˆ–ä»å¥—æ¥å­—æ¥æ”¶æŠ¥æ–‡</li><li>å¥—æ¥å­— &lt;-&gt; é—¨æˆ·<ul><li>å‘é€è¿›ç¨‹å°†æŠ¥æ–‡<strong>æ¨å‡º</strong>é—¨æˆ·ï¼Œå‘é€è¿›ç¨‹ä¾èµ–äºä¼ è¾“å±‚è®¾æ–½åœ¨å¦ä¸€ä¾§é—¨å°†æŠ¥æ–‡äº¤ä»˜ç»™æ¥æ”¶è¿›ç¨‹</li><li>æ¥æ”¶è¿›ç¨‹ä»å¦ä¸€ä¾§é—¨<strong>æ”¶åˆ°</strong>æŠ¥æ–‡(ä¾èµ–äºä¼ è¾“å±‚è®¾æ–½)</li></ul></li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031629874.png" alt="image-20250123031629874"></p><h2 id="é—®é¢˜3ï¼šå¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡å®ç°åº”ç”¨"><a href="#é—®é¢˜3ï¼šå¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡å®ç°åº”ç”¨" class="headerlink" title="é—®é¢˜3ï¼šå¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡å®ç°åº”ç”¨"></a>é—®é¢˜3ï¼šå¦‚ä½•ä½¿ç”¨ä¼ è¾“å±‚æä¾›çš„æœåŠ¡å®ç°åº”ç”¨</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031746279.png" alt="image-20250123031746279"></p><ul><li>å®šä¹‰åº”ç”¨å±‚åè®®: æŠ¥æ–‡æ ¼å¼ï¼Œè§£é‡Šï¼Œæ—¶åºç­‰</li><li>ç¼–åˆ¶ç¨‹åºï¼Œé€šè¿‡APIè°ƒç”¨ç½‘ç»œåŸºç¡€è®¾æ–½æä¾›é€šä¿¡æœåŠ¡ä¼ æŠ¥æ–‡ï¼Œè§£ææŠ¥æ–‡ï¼Œå®ç°åº”ç”¨æ—¶åºç­‰</li></ul><h3 id="åº”ç”¨å±‚åè®®"><a href="#åº”ç”¨å±‚åè®®" class="headerlink" title="åº”ç”¨å±‚åè®®"></a>åº”ç”¨å±‚åè®®</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123031910811.png" alt="image-20250123031910811"></p><h3 id="åº”ç”¨éœ€è¦ä¼ è¾“å±‚æä¾›ä»€ä¹ˆæ ·çš„æœåŠ¡ï¼Ÿå¦‚ä½•æè¿°ä¼ è¾“å±‚çš„æœåŠ¡ï¼Ÿ"><a href="#åº”ç”¨éœ€è¦ä¼ è¾“å±‚æä¾›ä»€ä¹ˆæ ·çš„æœåŠ¡ï¼Ÿå¦‚ä½•æè¿°ä¼ è¾“å±‚çš„æœåŠ¡ï¼Ÿ" class="headerlink" title="åº”ç”¨éœ€è¦ä¼ è¾“å±‚æä¾›ä»€ä¹ˆæ ·çš„æœåŠ¡ï¼Ÿå¦‚ä½•æè¿°ä¼ è¾“å±‚çš„æœåŠ¡ï¼Ÿ"></a>åº”ç”¨éœ€è¦ä¼ è¾“å±‚æä¾›ä»€ä¹ˆæ ·çš„æœåŠ¡ï¼Ÿå¦‚ä½•æè¿°ä¼ è¾“å±‚çš„æœåŠ¡ï¼Ÿ</h3><ul><li>æ•°æ®ä¸¢å¤±ç‡</li><li>åå</li><li>å»¶è¿Ÿ</li><li>å®‰å…¨æ€§</li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123032014169.png" alt="image-20250123032014169"></p><h4 id="å¸¸è§åº”ç”¨å¯¹ä¼ è¾“æœåŠ¡çš„è¦æ±‚"><a href="#å¸¸è§åº”ç”¨å¯¹ä¼ è¾“æœåŠ¡çš„è¦æ±‚" class="headerlink" title="å¸¸è§åº”ç”¨å¯¹ä¼ è¾“æœåŠ¡çš„è¦æ±‚"></a>å¸¸è§åº”ç”¨å¯¹ä¼ è¾“æœåŠ¡çš„è¦æ±‚</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123032032624.png" alt="image-20250123032032624"></p><h4 id="Internetä¼ è¾“å±‚æä¾›çš„æœåŠ¡"><a href="#Internetä¼ è¾“å±‚æä¾›çš„æœåŠ¡" class="headerlink" title="Internetä¼ è¾“å±‚æä¾›çš„æœåŠ¡"></a>Internetä¼ è¾“å±‚æä¾›çš„æœåŠ¡</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123032052396.png" alt="image-20250123032052396"></p><h4 id="UDPå­˜åœ¨çš„å¿…è¦æ€§"><a href="#UDPå­˜åœ¨çš„å¿…è¦æ€§" class="headerlink" title="UDPå­˜åœ¨çš„å¿…è¦æ€§"></a>UDPå­˜åœ¨çš„å¿…è¦æ€§</h4><ul><li>èƒ½å¤Ÿ<strong>åŒºåˆ†ä¸åŒçš„è¿›ç¨‹</strong>ï¼Œè€ŒIPæœåŠ¡ä¸è¡Œ<ul><li>åœ¨IPæä¾›çš„ä¸»æœºåˆ°ä¸»æœºç«¯åˆ°ç«¯åŠŸèƒ½çš„åŸºç¡€ä¸Šï¼ŒåŒºåˆ†äº†ä¸»æœºçš„åº”ç”¨è¿›ç¨‹</li></ul></li><li><strong>æ— éœ€å»ºç«‹è¿æ¥</strong>ï¼Œçœå»äº†å»ºç«‹è¿æ¥æ—¶é—´ï¼Œé€‚åˆäº‹åŠ¡æ€§åº”ç”¨</li><li><strong>ä¸åšå¯é æ€§çš„å·¥ä½œ</strong>ï¼Œä¾‹å¦‚æ£€é”™é‡å‘ï¼Œé€‚åˆé‚£äº›å¯¹å®æ—¶æ€§è¦æ±‚é«˜ä¸”æ­£ç¡®ç‡è¦æ±‚ä¸é«˜çš„åº”ç”¨<ul><li>å› ä¸ºæœªäº†å®ç°å¯é æ€§(æ­£ç¡®æ€§ï¼Œä¿åºç­‰)ï¼Œå¿…é¡»ä»˜å‡ºæ—¶é—´ä»£ä»·</li></ul></li><li>æ²¡æœ‰æ‹¥å¡æ§åˆ¶å’Œæµé‡æ§åˆ¶ï¼Œ<strong>åº”ç”¨èƒ½å¤ŸæŒ‰ç…§è®¾å®šçš„é€Ÿåº¦å‘é€æ•°æ®</strong><ul><li>è€Œåœ¨TCPä¸Šé¢çš„åº”ç”¨ï¼Œåº”ç”¨å‘é€æ•°æ®çš„é€Ÿåº¦å’Œä¸»æœºå‘ç½‘ç»œå‘é€çš„å®é™…æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œå› ä¸ºæœ‰æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶</li></ul></li></ul><h4 id="Internetåº”ç”¨åŠå…¶åº”ç”¨å±‚åè®®å’Œä¼ è¾“å±‚åè®®"><a href="#Internetåº”ç”¨åŠå…¶åº”ç”¨å±‚åè®®å’Œä¼ è¾“å±‚åè®®" class="headerlink" title="Internetåº”ç”¨åŠå…¶åº”ç”¨å±‚åè®®å’Œä¼ è¾“å±‚åè®®"></a>Internetåº”ç”¨åŠå…¶åº”ç”¨å±‚åè®®å’Œä¼ è¾“å±‚åè®®</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123032421154.png" alt="image-20250123032421154"></p><h4 id="å®‰å…¨TCP"><a href="#å®‰å…¨TCP" class="headerlink" title="å®‰å…¨TCP"></a>å®‰å…¨TCP</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123032456861.png" alt="image-20250123032456861"></p><h1 id="Web-and-HTTP"><a href="#Web-and-HTTP" class="headerlink" title="Web and HTTP"></a>Web and HTTP</h1><h2 id="ä¸€äº›æœ¯è¯­"><a href="#ä¸€äº›æœ¯è¯­" class="headerlink" title="ä¸€äº›æœ¯è¯­"></a>ä¸€äº›æœ¯è¯­</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123192311378.png" alt="image-20250123192311378"></p><h2 id="HTTPæ¦‚å†µ"><a href="#HTTPæ¦‚å†µ" class="headerlink" title="HTTPæ¦‚å†µ"></a>HTTPæ¦‚å†µ</h2><p>HTTPï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®</p><ul><li>Webçš„åº”ç”¨å±‚åè®®</li><li>å®¢æˆ·&#x2F;æœåŠ¡å™¨æ¨¡å¼<ul><li>å®¢æˆ·ï¼šè¯·æ±‚ã€æ¥æ”¶å’Œæ˜¾ç¤ºWebå¯¹è±¡çš„æµè§ˆå™¨</li><li>æœåŠ¡å™¨ï¼šå¯¹è¯·æ±‚è¿›è¡Œå“åº”ï¼Œå‘é€å¯¹è±¡çš„WebæœåŠ¡å™¨</li></ul></li><li>HTTP 1.0: RFC 1945</li><li>HTTP 1.1: RFC 2068</li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123192433380.png" alt="image-20250123192433380"></p><ul><li>ä½¿ç”¨TCPï¼š<ul><li>å®¢æˆ·å‘èµ·ä¸€ä¸ªä¸æœåŠ¡å™¨çš„TCPè¿æ¥(å»ºç«‹å¥—æ¥å­—)ï¼Œç«¯å£å·ä¸º80</li><li>æœåŠ¡å™¨æ¥å—å®¢æˆ·çš„TCPè¿æ¥</li><li>åœ¨æµè§ˆå™¨(HTTPå®¢æˆ·ç«¯)ä¸WebæœåŠ¡å™¨(HTTPæœåŠ¡å™¨server)äº¤æ¢HTTPæŠ¥æ–‡(åº”ç”¨å±‚åè®®æŠ¥æ–‡)</li><li>TCPè¿æ¥å…³é—­</li></ul></li><li>HTTPæ˜¯æ— çŠ¶æ€çš„<ul><li>æœåŠ¡å™¨å¹¶ä¸ç»´æŠ¤å…³äºå®¢æˆ·çš„ä»»ä½•ä¿¡æ¯</li><li><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123192625792.png" alt="image-20250123192625792"></li></ul></li></ul><h2 id="HTTPè¿æ¥"><a href="#HTTPè¿æ¥" class="headerlink" title="HTTPè¿æ¥"></a>HTTPè¿æ¥</h2><ul><li><p>éæŒä¹…HTTP</p><ul><li><p>æœ€å¤šåªæœ‰ä¸€ä¸ªå¯¹è±¡åœ¨TCPè¿æ¥ä¸Šå‘é€</p></li><li><p>ä¸‹è½½å¤šä¸ªå¯¹è±¡éœ€è¦å¤šä¸ªTCPè¿æ¥</p></li><li><p>HTTP&#x2F;1.0ä½¿ç”¨éæŒä¹…è¿æ¥</p></li></ul></li><li><p>æŒä¹…HTTP</p><ul><li><p>å¤šä¸ªå¯¹è±¡å¯ä»¥åœ¨ä¸€ä¸ª(åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„)TCPè¿æ¥ä¸Šä¼ è¾“</p></li><li><p>HTTP&#x2F;1.1é»˜è®¤ä½¿ç”¨æŒä¹…è¿æ¥</p></li></ul></li></ul><h3 id="éæŒä¹…HTTPè¿æ¥"><a href="#éæŒä¹…HTTPè¿æ¥" class="headerlink" title="éæŒä¹…HTTPè¿æ¥"></a>éæŒä¹…HTTPè¿æ¥</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212345153.png" alt="image-20250123212345153"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212351548.png" alt="image-20250123212351548"></p><h4 id="å“åº”æ—¶é—´æ¨¡å‹"><a href="#å“åº”æ—¶é—´æ¨¡å‹" class="headerlink" title="å“åº”æ—¶é—´æ¨¡å‹"></a>å“åº”æ—¶é—´æ¨¡å‹</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212427745.png" alt="image-20250123212427745"></p><h3 id="æŒä¹…HTTP"><a href="#æŒä¹…HTTP" class="headerlink" title="æŒä¹…HTTP"></a>æŒä¹…HTTP</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212442645.png" alt="image-20250123212442645"></p><h2 id="HTTPè¯·æ±‚æŠ¥æ–‡"><a href="#HTTPè¯·æ±‚æŠ¥æ–‡" class="headerlink" title="HTTPè¯·æ±‚æŠ¥æ–‡"></a>HTTPè¯·æ±‚æŠ¥æ–‡</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212458392.png" alt="image-20250123212458392"></p><h3 id="é€šç”¨æ ¼å¼"><a href="#é€šç”¨æ ¼å¼" class="headerlink" title="é€šç”¨æ ¼å¼"></a>é€šç”¨æ ¼å¼</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212514701.png" alt="image-20250123212514701"></p><h3 id="æäº¤è¡¨å•è¾“å…¥"><a href="#æäº¤è¡¨å•è¾“å…¥" class="headerlink" title="æäº¤è¡¨å•è¾“å…¥"></a>æäº¤è¡¨å•è¾“å…¥</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212532556.png" alt="image-20250123212532556"></p><h3 id="æ–¹æ³•ç±»å‹"><a href="#æ–¹æ³•ç±»å‹" class="headerlink" title="æ–¹æ³•ç±»å‹"></a>æ–¹æ³•ç±»å‹</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212545311.png" alt="image-20250123212545311"></p><h2 id="HTTPå“åº”æŠ¥æ–‡"><a href="#HTTPå“åº”æŠ¥æ–‡" class="headerlink" title="HTTPå“åº”æŠ¥æ–‡"></a>HTTPå“åº”æŠ¥æ–‡</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212604591.png" alt="image-20250123212604591"></p><h3 id="HTTPå“åº”çŠ¶æ€ç "><a href="#HTTPå“åº”çŠ¶æ€ç " class="headerlink" title="HTTPå“åº”çŠ¶æ€ç "></a>HTTPå“åº”çŠ¶æ€ç </h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212620333.png" alt="image-20250123212620333"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212630396.png" alt="image-20250123212630396"></p><h2 id="cookies"><a href="#cookies" class="headerlink" title="cookies"></a>cookies</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212646707.png" alt="image-20250123212646707"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212652117.png" alt="image-20250123212652117"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212657255.png" alt="image-20250123212657255"></p><h2 id="Webç¼“å­˜-ä»£ç†æœåŠ¡å™¨"><a href="#Webç¼“å­˜-ä»£ç†æœåŠ¡å™¨" class="headerlink" title="Webç¼“å­˜(ä»£ç†æœåŠ¡å™¨)"></a>Webç¼“å­˜(ä»£ç†æœåŠ¡å™¨)</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212718200.png" alt="image-20250123212718200"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212727065.png" alt="image-20250123212727065"></p><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212736467.png" alt="image-20250123212736467"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212753602.png" alt="image-20250123212753602"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212807695.png" alt="image-20250123212807695"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212815790.png" alt="image-20250123212815790"></p><h3 id="æ¡ä»¶GETæ–¹æ³•"><a href="#æ¡ä»¶GETæ–¹æ³•" class="headerlink" title="æ¡ä»¶GETæ–¹æ³•"></a>æ¡ä»¶GETæ–¹æ³•</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123212830275.png" alt="image-20250123212830275"></p><h1 id="FTP"><a href="#FTP" class="headerlink" title="FTP*"></a>FTP*</h1><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042138470.png" alt="image-20250123042138470"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042158411.png" alt="image-20250123042158411"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042215311.png" alt="image-20250123042215311"></p><h1 id="Emailã€SMTPã€POP3ã€IMAP"><a href="#Emailã€SMTPã€POP3ã€IMAP" class="headerlink" title="Emailã€SMTPã€POP3ã€IMAP"></a>Emailã€SMTPã€POP3ã€IMAP</h1><h2 id="Emailç”µå­é‚®ä»¶"><a href="#Emailç”µå­é‚®ä»¶" class="headerlink" title="Emailç”µå­é‚®ä»¶"></a>Emailç”µå­é‚®ä»¶</h2><h3 id="ä¸‰ä¸ªç»„æˆéƒ¨åˆ†"><a href="#ä¸‰ä¸ªç»„æˆéƒ¨åˆ†" class="headerlink" title="ä¸‰ä¸ªç»„æˆéƒ¨åˆ†"></a>ä¸‰ä¸ªç»„æˆéƒ¨åˆ†</h3><ul><li>ç”¨æˆ·ä»£ç†</li><li>é‚®ä»¶æœåŠ¡å™¨</li><li>ç®€å•é‚®ç®±ä¼ è¾“åè®®ï¼šSMTP</li></ul><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042422116.png" alt="image-20250123042422116"></p><h3 id="ç”¨æˆ·ä»£ç†"><a href="#ç”¨æˆ·ä»£ç†" class="headerlink" title="ç”¨æˆ·ä»£ç†"></a>ç”¨æˆ·ä»£ç†</h3><ul><li>åˆåâ€œé‚®ä»¶é˜…è¯»å™¨â€</li><li>æ’°å†™ï¼Œç¼–è¾‘å’Œé˜…è¯»é‚®ä»¶</li><li>å¦‚Outlook</li><li>è¾“å‡ºå’Œè¾“å…¥é‚®ä»¶ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Š</li></ul><h3 id="é‚®ä»¶æœåŠ¡å™¨"><a href="#é‚®ä»¶æœåŠ¡å™¨" class="headerlink" title="é‚®ä»¶æœåŠ¡å™¨"></a>é‚®ä»¶æœåŠ¡å™¨</h3><ul><li><strong>é‚®ä»¶ä¸­</strong>ç®¡ç†å’Œç»´æŠ¤å‘é€ç»™ç”¨æˆ·çš„é‚®ä»¶</li><li><strong>è¾“å‡ºæŠ¥æ–‡é˜Ÿåˆ—</strong>ä¿æŒå¾…å‘é€é‚®ä»¶æŠ¥æ–‡</li><li>é‚®ä»¶æœåŠ¡å™¨ä¹‹é—´çš„<strong>SMTPåè®®</strong>: å‘é€emailæŠ¥æ–‡<ul><li>å®¢æˆ·ï¼šå‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨</li><li>æœåŠ¡å™¨ï¼šæ¥æ”¶ç«¯é‚®ä»¶æœåŠ¡å™¨</li></ul></li></ul><h3 id="Email-SMTP-RFC-2821"><a href="#Email-SMTP-RFC-2821" class="headerlink" title="Email: SMTP{RFC 2821}"></a>Email: SMTP{RFC 2821}</h3><ul><li>ä½¿ç”¨TCPåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ é€æŠ¥æ–‡ï¼Œç«¯å£å·ä¸º25</li><li>ç›´æ¥ä¼ è¾“ï¼šä»å‘é€æ–¹æœåŠ¡å™¨åˆ°æ¥æ”¶æ–¹æœåŠ¡å™¨</li><li>ä¼ è¾“çš„3ä¸ªé˜¶æ®µ<ul><li>æ¡æ‰‹</li><li>ä¼ è¾“æŠ¥æ–‡</li><li>å…³é—­</li></ul></li><li>å‘½ä»¤&#x2F;å“åº”äº¤äº’<ul><li>å‘½ä»¤ï¼šASCIIæ–‡æœ¬</li><li>å“åº”ï¼šçŠ¶æ€ç å’ŒçŠ¶æ€ä¿¡æ¯</li></ul></li><li>æŠ¥æ–‡å¿…é¡»ä¸º7ä½ASCIIç </li></ul><h4 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042817170.png" alt="image-20250123042817170"></p><h4 id="ç®€å•çš„SMTPäº¤äº’"><a href="#ç®€å•çš„SMTPäº¤äº’" class="headerlink" title="ç®€å•çš„SMTPäº¤äº’"></a>ç®€å•çš„SMTPäº¤äº’</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042830213.png" alt="image-20250123042830213"></p><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042840166.png" alt="image-20250123042840166"></p><h4 id="SMTPï¼šæ€»ç»“"><a href="#SMTPï¼šæ€»ç»“" class="headerlink" title="SMTPï¼šæ€»ç»“"></a>SMTPï¼šæ€»ç»“</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042927925.png" alt="image-20250123042927925"></p><h3 id="é‚®ä»¶æŠ¥æ–‡æ ¼å¼"><a href="#é‚®ä»¶æŠ¥æ–‡æ ¼å¼" class="headerlink" title="é‚®ä»¶æŠ¥æ–‡æ ¼å¼"></a>é‚®ä»¶æŠ¥æ–‡æ ¼å¼</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123042950457.png" alt="image-20250123042950457"></p><h4 id="æŠ¥æ–‡æ ¼å¼ï¼šå¤šåª’ä½“æ‰©å±•"><a href="#æŠ¥æ–‡æ ¼å¼ï¼šå¤šåª’ä½“æ‰©å±•" class="headerlink" title="æŠ¥æ–‡æ ¼å¼ï¼šå¤šåª’ä½“æ‰©å±•"></a>æŠ¥æ–‡æ ¼å¼ï¼šå¤šåª’ä½“æ‰©å±•</h4><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123043007180.png" alt="image-20250123043007180"></p><h3 id="é‚®ç®±è®¿é—®åè®®"><a href="#é‚®ç®±è®¿é—®åè®®" class="headerlink" title="é‚®ç®±è®¿é—®åè®®"></a>é‚®ç®±è®¿é—®åè®®</h3><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123043027854.png" alt="image-20250123043027854"></p><ul><li>SMTPï¼šä¼ é€åˆ°æ¥æ”¶æ–¹çš„é‚®ä»¶æœåŠ¡å™¨</li><li>é‚®ä»¶è®¿é—®åè®®ï¼šä»æœåŠ¡å™¨è®¿é—®é‚®ä»¶<ul><li>POPï¼šé‚®å±€è®¿é—®åè®®(Post Office Protocol)[RFC 1939]<ul><li>ç”¨æˆ·èº«ä»½ç¡®è®¤(ä»£ç†&lt;-&gt;æœåŠ¡å™¨)å¹¶ä¸‹è½½</li></ul></li><li>IMAP: Interneté‚®ä»¶è®¿é—®åè®®(Internet Mail Access Protocao)[RFC 1730]<ul><li>æ›´å¤šç‰¹æ€§</li><li>åœ¨æœåŠ¡å™¨ä¸Šå¤„ç†å­˜å‚¨çš„æŠ¥æ–‡</li></ul></li><li>HTTP:Hotmailm Yahoo! Mailç­‰<ul><li>æ–¹ä¾¿</li></ul></li></ul></li></ul><h2 id="POP3åè®®"><a href="#POP3åè®®" class="headerlink" title="POP3åè®®"></a>POP3åè®®</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123043259038.png" alt="image-20250123043259038"></p><h2 id="POP3ä¸IMAP"><a href="#POP3ä¸IMAP" class="headerlink" title="POP3ä¸IMAP"></a>POP3ä¸IMAP</h2><p><img src="/2025/01/22/%E8%AE%A1%E7%BD%91-3-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82/image-20250123043338347.png" alt="image-20250123043338347"></p><h1 id="DNS-åŸŸåè§£æ"><a href="#DNS-åŸŸåè§£æ" class="headerlink" title="DNS(åŸŸåè§£æ)"></a>DNS(åŸŸåè§£æ)</h1><h1 id="P2Påº”ç”¨"><a href="#P2Påº”ç”¨" class="headerlink" title="P2Påº”ç”¨"></a>P2Påº”ç”¨</h1><h1 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h1><h1 id="TCPå¥—æ¥å­—-Socket-ç¼–ç¨‹"><a href="#TCPå¥—æ¥å­—-Socket-ç¼–ç¨‹" class="headerlink" title="TCPå¥—æ¥å­—(Socket)ç¼–ç¨‹"></a>TCPå¥—æ¥å­—(Socket)ç¼–ç¨‹</h1><h1 id="UDPå¥—æ¥å­—ç¼–ç¨‹"><a href="#UDPå¥—æ¥å­—ç¼–ç¨‹" class="headerlink" title="UDPå¥—æ¥å­—ç¼–ç¨‹"></a>UDPå¥—æ¥å­—ç¼–ç¨‹</h1>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸­ç§‘å¤§è®¡ç½‘(äºŒ)-ç¬¬ä¸€ç« -äº’è”ç½‘åŠç»“æ„</title>
      <link href="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/"/>
      <url>/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/</url>
      
        <content type="html"><![CDATA[<p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118152806245.png" alt="image-20250118152806245"></p><h1 id="ä»€ä¹ˆæ˜¯Internet"><a href="#ä»€ä¹ˆæ˜¯Internet" class="headerlink" title="ä»€ä¹ˆæ˜¯Internet"></a>ä»€ä¹ˆæ˜¯Internet</h1><p>ä¸‰å¤§è§’åº¦</p><ul><li>æ„æˆè§’åº¦</li><li>ç½‘ç»œè§’åº¦</li><li>åˆ†å¸ƒå¼åº”ç”¨è§’åº¦</li></ul><h2 id="ç½‘ç»œã€è®¡ç®—æœºç½‘ç»œå’Œäº’è”ç½‘"><a href="#ç½‘ç»œã€è®¡ç®—æœºç½‘ç»œå’Œäº’è”ç½‘" class="headerlink" title="ç½‘ç»œã€è®¡ç®—æœºç½‘ç»œå’Œäº’è”ç½‘"></a>ç½‘ç»œã€è®¡ç®—æœºç½‘ç»œå’Œäº’è”ç½‘</h2><h3 id="ç½‘ç»œ"><a href="#ç½‘ç»œ" class="headerlink" title="ç½‘ç»œ"></a>ç½‘ç»œ</h3><p>ç”±<strong>èŠ‚ç‚¹</strong>å’Œè¾¹æ„æˆçš„æ‹“æ‰‘ç»“æ„</p><h3 id="è®¡ç®—æœºç½‘ç»œ"><a href="#è®¡ç®—æœºç½‘ç»œ" class="headerlink" title="è®¡ç®—æœºç½‘ç»œ"></a>è®¡ç®—æœºç½‘ç»œ</h3><p>è”ç½‘çš„ç”±èŠ‚ç‚¹å’Œè¾¹æ„æˆçš„è®¡ç®—æœºç³»ç»Ÿ</p><h3 id="äº’è”ç½‘"><a href="#äº’è”ç½‘" class="headerlink" title="äº’è”ç½‘"></a>äº’è”ç½‘</h3><p>ç”±<strong>tcpåè®®</strong>å’Œipåè®®ä¸ºä¸»æ”¯æ’‘å·¥ä½œçš„ç½‘ç»œå«äº’è”ç½‘</p><p>è‹¥ä¸ä¸åˆ«äººç›¸è¿ï¼Œè‡ªå·±ç”¨ï¼Œå«internetï¼Œä¼ä¸šç½‘ï¼Œä¸å«Internet</p><h2 id="Internetæ„æˆè§’åº¦"><a href="#Internetæ„æˆè§’åº¦" class="headerlink" title="Internetæ„æˆè§’åº¦"></a>Internetæ„æˆè§’åº¦</h2><p>è”ç½‘çš„è®¡ç®—æœºç³»ç»Ÿç”±èŠ‚ç‚¹å’Œè¾¹æ„æˆçš„è¿™æ ·çš„ç³»ç»Ÿå«è®¡ç®—æœºç½‘ç»œ</p><ul><li><strong>èŠ‚ç‚¹</strong>ï¼šhost&#x2F;end system<ul><li>ä¸»æœºåŠå…¶ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åº<ul><li>èŠ‚ç‚¹çš„ç›®æ ‡æˆ–æºï¼ˆæ–¹å½¢è¡¨ç¤ºï¼‰</li></ul></li><li>è·¯ç”±å™¨ã€äº¤æ¢æœºç­‰ç½‘ç»œäº¤æ¢è®¾å¤‡<ul><li>åšæ•°æ®è½¬å‘ï¼Œä¸æ˜¯æºå’Œç›®æ ‡(åœ†å½¢è¡¨ç¤º)</li><li>è·¯ç”±å™¨åœ¨ç½‘ç»œå±‚</li><li>äº¤æ¢æœºåœ¨é“¾è·¯å±‚</li></ul></li></ul></li><li><strong>è¾¹</strong>ï¼šé€šä¿¡é“¾è·¯ï¼ˆæŠŠèŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·ï¼‰<ul><li><strong>æ¥å…¥ç½‘é“¾è·¯</strong>(access)ï¼šä¸»æœºè¿æ¥åˆ°äº’è”ç½‘çš„é“¾è·¯</li><li><strong>ä¸»å¹²é“¾è·¯</strong>ï¼ˆbackbone)ï¼šè·¯ç”±å™¨é—´çš„é“¾è·¯</li></ul></li><li>åè®®<ul><li>å¯¹ç­‰å±‚çš„å®ä½“åœ¨é€šè®¯è¿‡ç¨‹ä¸­åº”è¯¥éµå®ˆçš„è§„åˆ™çš„é›†åˆï¼ŒåŒ…æ‹¬äº†è¯­æ³•ã€è¯­ä¹‰å’Œæ—¶åº</li></ul></li></ul><p>â€‹</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118144912977.png" alt="image-20250118144912977"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118145623603.png" alt="image-20250118145623603"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118145632290.png" alt="image-20250118145632290"></p><h2 id="ç½‘ç»œè§’åº¦"><a href="#ç½‘ç»œè§’åº¦" class="headerlink" title="ç½‘ç»œè§’åº¦"></a>ç½‘ç»œè§’åº¦</h2><p>ä¸€å †çš„ç½‘ç»œï¼Œé€šè¿‡ç½‘ç»œäº’è”è®¾å¤‡ï¼ˆè·¯ç”±å™¨ï¼‰å°†ä»–ä»¬è¿æ¥åœ¨ä¸€èµ·ï¼Œè¿™å«äº’è”ç½‘</p><h2 id="åˆ†å¸ƒå¼åº”ç”¨è§’åº¦"><a href="#åˆ†å¸ƒå¼åº”ç”¨è§’åº¦" class="headerlink" title="åˆ†å¸ƒå¼åº”ç”¨è§’åº¦"></a>åˆ†å¸ƒå¼åº”ç”¨è§’åº¦</h2><p>äº’è”ç½‘æ˜¯åˆ†å¸ƒå¼çš„åº”ç”¨è¿›ç¨‹ä»¥åŠä¸ºåˆ†å¸ƒå¼åº”ç”¨è¿›ç¨‹æä¾›æœåŠ¡çš„åŸºç¡€è®¾æ–½æ‰€æ„æˆçš„</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118152433987.png" alt="image-20250118152433987"></p><ul><li>é¢å‘è¿æ¥çš„å¯é æœåŠ¡â€”â€”TCP</li><li>æ— è¿æ¥ä¸å¯æ§æœåŠ¡â€”â€”UDP</li></ul><h1 id="ç½‘ç»œç»“æ„"><a href="#ç½‘ç»œç»“æ„" class="headerlink" title="ç½‘ç»œç»“æ„"></a>ç½‘ç»œç»“æ„</h1><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118151028722.png" alt="image-20250118151028722"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118151051820.png" alt="image-20250118151051820"></p><ul><li>è¾¹ç¼˜ç³»ç»Ÿä¸Šé¢çš„ç½‘ç»œåº”ç”¨æ˜¯ç½‘ç»œå­˜åœ¨çš„ç†ç”±</li><li>accessæ˜¯æŠŠè¾¹ç¼˜æ¥å…¥ç½‘ç»œæ ¸å¿ƒ</li><li>ç½‘ç»œæ ¸å¿ƒçš„ä½œç”¨æ˜¯æ•°æ®äº¤æ¢<ul><li>æºç³»ç»Ÿå’Œç›®æ ‡ç³»ç»Ÿä¹‹é—´æœ‰ä¸ªç¬é—´çš„åˆ‡æ¢å¼€å…³è¿åœ¨ä¸€èµ·</li><li>â€œç¬é—´çš„åˆ‡æ¢å¼€å…³â€æ˜¯æ¯”å–»åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œæºç³»ç»Ÿå’Œç›®æ ‡ç³»ç»Ÿä¹‹é—´å»ºç«‹çš„ä¸€ç§ä¸´æ—¶è¿æ¥ï¼ˆå¯ä»¥æ˜¯ç‰©ç†è¿æ¥ï¼Œä¹Ÿå¯ä»¥æ˜¯é€»è¾‘è¿æ¥ï¼‰ã€‚</li></ul></li></ul><h1 id="ç½‘ç»œè¾¹ç¼˜"><a href="#ç½‘ç»œè¾¹ç¼˜" class="headerlink" title="ç½‘ç»œè¾¹ç¼˜"></a>ç½‘ç»œè¾¹ç¼˜</h1><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118151938278.png" alt="image-20250118151938278"></p><h2 id="CSæ¨¡å¼"><a href="#CSæ¨¡å¼" class="headerlink" title="CSæ¨¡å¼"></a>CSæ¨¡å¼</h2><p>å®¢æˆ·ç«¯&#x2F;æœåŠ¡å™¨æ¨¡å¼</p><p>å¼Šç«¯ï¼šå¯æ‰©å±•æ€§å·®</p><p>å½“æŒ‚è½½çš„å®¢æˆ·ç«¯å¤ªå¤šè¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œèƒ½åŠ›ä¼šæ–­å´–å¼ä¸‹é™</p><h2 id="P2Pæ¨¡å¼"><a href="#P2Pæ¨¡å¼" class="headerlink" title="P2Pæ¨¡å¼"></a>P2Pæ¨¡å¼</h2><p>æŸä¸ªåˆ†å¸ƒå¼åº”ç”¨è¿›ç¨‹æ—¢å¯ä»¥æ˜¯å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥æ˜¯æœåŠ¡ç«¯</p><h2 id="åŸºç¡€è®¾æ–½ä¸ºç½‘ç»œåº”ç”¨æä¾›çš„ä¸¤ç§é€šè®¯æœåŠ¡æ–¹å¼"><a href="#åŸºç¡€è®¾æ–½ä¸ºç½‘ç»œåº”ç”¨æä¾›çš„ä¸¤ç§é€šè®¯æœåŠ¡æ–¹å¼" class="headerlink" title="åŸºç¡€è®¾æ–½ä¸ºç½‘ç»œåº”ç”¨æä¾›çš„ä¸¤ç§é€šè®¯æœåŠ¡æ–¹å¼"></a>åŸºç¡€è®¾æ–½ä¸ºç½‘ç»œåº”ç”¨æä¾›çš„ä¸¤ç§é€šè®¯æœåŠ¡æ–¹å¼</h2><h3 id="é‡‡ç”¨ç½‘ç»œè®¾æ–½çš„é¢å‘è¿æ¥è®¿é—®"><a href="#é‡‡ç”¨ç½‘ç»œè®¾æ–½çš„é¢å‘è¿æ¥è®¿é—®" class="headerlink" title="é‡‡ç”¨ç½‘ç»œè®¾æ–½çš„é¢å‘è¿æ¥è®¿é—®"></a>é‡‡ç”¨ç½‘ç»œè®¾æ–½çš„é¢å‘è¿æ¥è®¿é—®</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118152647701.png" alt="image-20250118152647701"></p><blockquote><p>é¢å‘è¿æ¥ â‰  æœ‰è¿æ¥</p><ul><li>é¢å‘è¿æ¥æ˜¯ç«¯å’Œç«¯ä¹‹é—´çš„åº”ç”¨è¿›ç¨‹å’ŒåŸºç¡€è®¾æ–½çŸ¥é“ï¼Œä½†æ˜¯ä¸­é—´çš„è¿æ¥èŠ‚ç‚¹ä¸çŸ¥é“ï¼Œä»…ä»…æ˜¯ç«¯ç³»ç»Ÿç»´æŒè¿æ¥çŠ¶æ€</li><li>æœ‰è¿æ¥æ˜¯ä¸­é—´æ‰€æœ‰è·¯å¾„ä¸Šçš„çš„èŠ‚ç‚¹éƒ½çŸ¥é“</li></ul></blockquote><h3 id="é‡‡ç”¨åŸºç¡€è®¾æ–½çš„æ— è¿æ¥æœåŠ¡"><a href="#é‡‡ç”¨åŸºç¡€è®¾æ–½çš„æ— è¿æ¥æœåŠ¡" class="headerlink" title="é‡‡ç”¨åŸºç¡€è®¾æ–½çš„æ— è¿æ¥æœåŠ¡"></a>é‡‡ç”¨åŸºç¡€è®¾æ–½çš„æ— è¿æ¥æœåŠ¡</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250118152718240.png" alt="image-20250118152718240"></p><h1 id="ç½‘ç»œæ ¸å¿ƒ"><a href="#ç½‘ç»œæ ¸å¿ƒ" class="headerlink" title="ç½‘ç»œæ ¸å¿ƒ"></a>ç½‘ç»œæ ¸å¿ƒ</h1><p>ç”±ä¸¤ç§æ–¹æ³•å®ç°æ•°æ®çš„ä¼ è¾“</p><ul><li>ç”µè·¯äº¤æ¢</li><li>åˆ†ç»„äº¤æ¢</li></ul><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119151123505.png" alt="image-20250119151123505"></p><h2 id="ç”µè·¯äº¤æ¢"><a href="#ç”µè·¯äº¤æ¢" class="headerlink" title="ç”µè·¯äº¤æ¢"></a>ç”µè·¯äº¤æ¢</h2><p>é€šå¸¸æ˜¯ç”µè¯ç½‘</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119151152677.png" alt="image-20250119151152677"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119151217623.png" alt="image-20250119151217623"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119151235995.png" alt="image-20250119151235995"></p><blockquote><ul><li><p>FDM</p></li><li><p>TDM</p></li><li><p>WDM</p></li></ul></blockquote><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119151507317.png" alt="image-20250119151507317"></p><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>åœ¨ä¸€ä¸ªç”µè·¯äº¤æ¢ç½‘ç»œä¸Šï¼Œä»ä¸»æœºAåˆ°ä¸»æœºBå‘é€ä¸€ä¸ª640,000æ¯”ç‰¹çš„æ–‡ä»¶éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</p><ul><li><p>æ‰€æœ‰çš„é“¾è·¯é€Ÿç‡ä¸º1.536 Mbps</p></li><li><p>æ¯æ¡é“¾è·¯ä½¿ç”¨æ—¶éš™æ•°ä¸º24çš„TDM</p></li><li><p>å»ºç«‹ç«¯-ç«¯çš„ç”µè·¯éœ€500 ms</p></li></ul><blockquote><p>æ—¶åˆ†ï¼Œæ¯æ¡é“¾è·¯: 1.536Mbps&#x2F;24 &#x3D; 64 kbps</p><p>ä¼ è¾“æ—¶é—´ï¼š640kb&#x2F;64kps &#x3D; 10s</p><p>å…±ç”¨æ—¶é—´ ä¼ è¾“æ—¶é—´ï¼‹å»ºç«‹æ—¶é—´ &#x3D; 10.5s</p><p>(ä¼ å®Œä¸ä»£è¡¨é€è¾¾Bï¼Œéœ€è¦å…‰ä¼ æ’­)</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119152152966.png" alt="image-20250119152152966"></p><ul><li>å›¾ä¸­æ–œç‡ä»£è¡¨å…‰é€Ÿï¼Œå¤šçš„æ—¶é—´å«ä¼ æ’­å»¶è¿Ÿ</li><li>ä¸€ä¸ªæ¯”ç‰¹ä¼ æ’­æŒç»­çš„æ—¶é—´æ˜¯1&#x2F;64kpsï¼Œä¼ æ’­çš„é•¿åº¦ä¸º1&#x2F;64  x å…‰é€Ÿ<ul><li>åœ¨64 kbpsçš„é“¾è·¯ä¸‹ï¼Œä¼ æ’­ä¸€ä¸ªæ¯”ç‰¹çš„æ—¶é—´æ˜¯1&#x2F;64,000ç§’ï¼Œè€Œåœ¨è¿™ä¸ªæ—¶é—´å†…ï¼Œæ•°æ®èƒ½ä¼ æ’­çš„è·ç¦»å¤§çº¦æ˜¯4.7å…¬é‡Œã€‚</li></ul></li><li>å‘é€10sï¼Œæ¥é€10sï¼Œä½†æ˜¯è®¡ç®—åªèƒ½ç®—ä¸€æ¬¡10s</li></ul></blockquote><h3 id="ç”µè·¯äº¤æ¢ä¸é€‚åˆè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡"><a href="#ç”µè·¯äº¤æ¢ä¸é€‚åˆè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡" class="headerlink" title="ç”µè·¯äº¤æ¢ä¸é€‚åˆè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡"></a>ç”µè·¯äº¤æ¢ä¸é€‚åˆè®¡ç®—æœºä¹‹é—´çš„é€šä¿¡</h3><ul><li>è¿æ¥å»ºç«‹æ—¶é—´é•¿</li><li>è®¡ç®—æœºé€šä¿¡æœ‰çªå‘æ€§ï¼Œå¦‚æœç”¨çº¿è·¯äº¤æ¢ï¼Œæµªè´¹å¤ªå¤šç‰‡äº†ï¼Œä¸”å æ®çš„ç‰‡ä¸èƒ½è¢«åˆ«çš„å‘¼å«ä½¿ç”¨</li><li>ä¸å¯é </li></ul><h2 id="åˆ†ç»„äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢"></a>åˆ†ç»„äº¤æ¢</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119153132478.png" alt="image-20250119153132478"></p><h3 id="ä¸ºä»€ä¹ˆè¦å­˜å‚¨è½¬å‘"><a href="#ä¸ºä»€ä¹ˆè¦å­˜å‚¨è½¬å‘" class="headerlink" title="ä¸ºä»€ä¹ˆè¦å­˜å‚¨è½¬å‘"></a>ä¸ºä»€ä¹ˆè¦å­˜å‚¨è½¬å‘</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119153149929.png" alt="image-20250119153149929"></p><p>å­˜å‚¨è½¬å‘çš„æ„ä¹‰åœ¨äºï¼Œä¸ä¼šåŒæ—¶å ç”¨å¤šä¸ªèŠ‚ç‚¹</p><p>ä½†æ˜¯å¤šäº†æ’é˜Ÿå»¶è¿Ÿå’Œå­˜å‚¨å»¶è¿Ÿï¼Œæ¢æ¥å…±äº«æ€§</p><h3 id="å­˜å‚¨è½¬å‘çš„å»¶è¿Ÿ"><a href="#å­˜å‚¨è½¬å‘çš„å»¶è¿Ÿ" class="headerlink" title="å­˜å‚¨è½¬å‘çš„å»¶è¿Ÿ"></a>å­˜å‚¨è½¬å‘çš„å»¶è¿Ÿ</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119153621632.png" alt="image-20250119153621632"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119153915770.png" alt="image-20250119153915770"></p><blockquote><ul><li><p>è“è‰²æ˜¯æ¥æ”¶è§’åº¦</p></li><li><p>çº¢è‰²æ˜¯å‘é€è§’åº¦</p></li></ul></blockquote><h3 id="æ’é˜Ÿå»¶è¿Ÿå’Œä¸¢å¤±"><a href="#æ’é˜Ÿå»¶è¿Ÿå’Œä¸¢å¤±" class="headerlink" title="æ’é˜Ÿå»¶è¿Ÿå’Œä¸¢å¤±"></a>æ’é˜Ÿå»¶è¿Ÿå’Œä¸¢å¤±</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119153957107.png" alt="image-20250119153957107"></p><h3 id="ç½‘ç»œæ ¸å¿ƒåŠŸèƒ½"><a href="#ç½‘ç»œæ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="ç½‘ç»œæ ¸å¿ƒåŠŸèƒ½"></a>ç½‘ç»œæ ¸å¿ƒåŠŸèƒ½</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119154614499.png" alt="image-20250119154614499"></p><h3 id="ç»Ÿè®¡å¤šè·¯å¤ç”¨"><a href="#ç»Ÿè®¡å¤šè·¯å¤ç”¨" class="headerlink" title="ç»Ÿè®¡å¤šè·¯å¤ç”¨"></a>ç»Ÿè®¡å¤šè·¯å¤ç”¨</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119154816265.png" alt="image-20250119154816265"></p><blockquote><p>ç‰¹æ®Šçš„æ—¶åˆ†</p></blockquote><h3 id="åˆ†ç»„äº¤æ¢vsç”µè·¯äº¤æ¢"><a href="#åˆ†ç»„äº¤æ¢vsç”µè·¯äº¤æ¢" class="headerlink" title="åˆ†ç»„äº¤æ¢vsç”µè·¯äº¤æ¢"></a>åˆ†ç»„äº¤æ¢vsç”µè·¯äº¤æ¢</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119155552636.png" alt="image-20250119155552636"></p><blockquote><p>è¿™é‡Œnå–åˆ°9çš„åŸå› æ˜¯ï¼Œå¦‚æœæ˜¯10ä¸ªåŒæ—¶ä½¿ç”¨ï¼Œæµé‡å¼ºåº¦ç­‰äº1ï¼Œè¿™ä¸ªç½‘ç»œä¼šæŒ‚æ‰</p></blockquote><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119155828327.png" alt="image-20250119155828327"></p><h3 id="ä¸¤ç§åˆ†ç»„äº¤æ¢çš„æ–¹å¼"><a href="#ä¸¤ç§åˆ†ç»„äº¤æ¢çš„æ–¹å¼" class="headerlink" title="ä¸¤ç§åˆ†ç»„äº¤æ¢çš„æ–¹å¼"></a>ä¸¤ç§åˆ†ç»„äº¤æ¢çš„æ–¹å¼</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119160339523.png" alt="image-20250119160339523"></p><ul><li>æ•°æ®æŠ¥ç½‘ç»œä¸éœ€è¦ç»´æŠ¤é€šè®¯çš„çŠ¶æ€ï¼Œå³æ¯ä¸ªåˆ†ç»„éƒ½æºå¸¦äº†ç›®æ ‡çš„å®Œæ•´åœ°å€ï¼Œä¸¤ä¸ªä¸»æœºé€šè®¯å‰ä¸éœ€è¦æ¡æ‰‹</li><li>è™šç”µè·¯ç½‘ç»œéœ€è¦ç»´æŠ¤é€šè®¯çŠ¶æ€ï¼Œä¸¤ä¸ªä¸»æœºé€šä¿¡å‰éœ€è¦æ¡æ‰‹æ¥ä¿æŒä»–ä»¬ä¹‹é—´é€šä¿¡çš„çŠ¶æ€ï¼Œå»ºç«‹ä¸€æ¡è™šæ‹Ÿçš„çº¿è·¯ï¼Œæ¯ä¸ªåˆ†ç»„éƒ½æºå¸¦äº†è™šç”µè·¯å·(è€Œä¸æ˜¯ç›®æ ‡ä¸»æœºçš„å®Œæ•´åœ°å€)<ul><li>å’Œæ‰“ç”µè¯ä¸€æ ·</li></ul></li></ul><h4 id="æ•°æ®æŠ¥"><a href="#æ•°æ®æŠ¥" class="headerlink" title="æ•°æ®æŠ¥"></a>æ•°æ®æŠ¥</h4><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119160817344.png" alt="image-20250119160817344"></p><ul><li>æ— çŠ¶æ€è·¯ç”±å™¨ï¼ŒæŸ¥è·¯ç”±è¡¨è½¬èµ°ï¼Œä¸ç»´æŠ¤ä¸»æœºå’Œä¸»æœºé—´çš„å…³ç³»</li></ul><h4 id="è™šç”µè·¯"><a href="#è™šç”µè·¯" class="headerlink" title="è™šç”µè·¯"></a>è™šç”µè·¯</h4><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119160853058.png" alt="image-20250119160853058"></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250119161229741.png" alt="image-20250119161229741"></p><h1 id="æ¥å…¥ç½‘"><a href="#æ¥å…¥ç½‘" class="headerlink" title="æ¥å…¥ç½‘"></a>æ¥å…¥ç½‘</h1><p>æ€æ ·å°†ç«¯ç³»ç»Ÿå’Œè¾¹ç¼˜è·¯ç”±å™¨è¿æ¥ï¼Ÿ</p><ul><li>ä½å®…æ¥å…¥ç½‘ç»œ</li><li>å•ä½æ¥å…¥ç½‘ç»œ(å­¦æ ¡ã€å…¬å¸)</li><li>æ— çº¿æ¥å…¥ç½‘ç»œ</li></ul><blockquote><p>ä¸»è¦çœ‹</p><ul><li>æ¥å…¥ç½‘ç»œçš„å¸¦å®½(bits per second)</li><li>å…±äº«è¿˜æ˜¯ä¸“ç”¨ï¼Ÿ</li></ul></blockquote><h2 id="ä½å®…æ¥å…¥ç½‘ç»œ"><a href="#ä½å®…æ¥å…¥ç½‘ç»œ" class="headerlink" title="ä½å®…æ¥å…¥ç½‘ç»œ"></a>ä½å®…æ¥å…¥ç½‘ç»œ</h2><h3 id="modem"><a href="#modem" class="headerlink" title="modem"></a>modem</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120031649681.png" alt="image-20250120031649681"></p><p>å‡è®¾ä¸ºç”¨æˆ·ç”µè¯çº¿åˆ†é…4khzç”¨æ¥ä¼ éŸ³é¢‘ï¼Œå½“æˆ‘è¦ä¼ è¾“æ•°æ®çš„æ—¶å€™å¯ä»¥æ”¹æŒ¯å¹…ã€é¢‘ç‡ç­‰æ¥è§„å®š0,1ã€‚è¿™æ ·å­æˆ‘å°±åœ¨éŸ³é¢‘çš„è½½æ³¢ä¿¡å·ä¸ŠåŠ è½½äº†æˆ‘è¦ä¼ è¾“çš„ä¸Šç½‘æ•°æ®ã€‚</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120031927156.png" alt="image-20250120031927156"></p><h3 id="DSL-digital-subscriber-line"><a href="#DSL-digital-subscriber-line" class="headerlink" title="DSL(digital subscriber line)"></a>DSL(digital subscriber line)</h3><p><strong>ads modem</strong></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120032216620.png" alt="image-20250120032216620"></p><p>åŒæ ·æ˜¯è°ƒé¢‘è§£é¢‘ï¼Œä½†æ˜¯å‡å¦‚éŸ³é¢‘å¸¦å®½æ˜¯0-4kHzï¼Œé‚£æˆ‘æŠŠä¸Šè¡Œé¢‘ç‡å’Œä¸‹è¡Œé¢‘ç‡è®¾ç½®åœ¨4kä»¥ä¸Š</p><h3 id="çº¿ç¼†ç½‘ç»œ"><a href="#çº¿ç¼†ç½‘ç»œ" class="headerlink" title="çº¿ç¼†ç½‘ç»œ"></a>çº¿ç¼†ç½‘ç»œ</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120032701325.png" alt="image-20250120032701325"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120032903255.png" alt="image-20250120032903255"></p><p>ç”µè§†å°å…¬å¸æŠŠçº¿ç¼†<strong>å•å‘ä¸‹è¡Œ</strong>æ”¹åŒå‘</p><h3 id="ç”µç¼†æ¨¡å¼"><a href="#ç”µç¼†æ¨¡å¼" class="headerlink" title="ç”µç¼†æ¨¡å¼"></a>ç”µç¼†æ¨¡å¼</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120033659843.png" alt="image-20250120033659843"></p><p>è¶Šå¾€ä¸Šæ˜¯å…‰çº¤ï¼Œè¶Šå¾€ä¸‹æ˜¯ç”µç¼†</p><h3 id="å®¶åº­ç½‘ç»œ"><a href="#å®¶åº­ç½‘ç»œ" class="headerlink" title="å®¶åº­ç½‘ç»œ"></a>å®¶åº­ç½‘ç»œ</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120033748852.png" alt="image-20250120033748852"></p><p>ä¸€ä¸ªè·¯ç”±å™¨æŠŠå®¶é‡Œçš„æ— çº¿å’Œæœ‰çº¿è®¾å¤‡éƒ½é€šä¿¡èµ·æ¥</p><blockquote><ul><li><p><strong>æ— çº¿è®¾å¤‡ (Wireless devices)</strong><br>è¿™äº›è®¾å¤‡åŒ…æ‹¬æ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘ç­‰ï¼Œå®ƒä»¬é€šè¿‡æ— çº¿æ–¹å¼è¿æ¥åˆ°ç½‘ç»œã€‚</p></li><li><p><strong>æ— çº¿æ¥å…¥ç‚¹ (Wireless access point, 54 Mbps)</strong><br>è¿™æ˜¯æ— çº¿ç½‘ç»œçš„å…³é”®è®¾å¤‡ï¼Œæä¾› Wi-Fi æ¥å…¥ï¼Œé€Ÿç‡ä¸º 54 Mbpsã€‚<br>æ— çº¿æ¥å…¥ç‚¹é€šå¸¸ä¸è·¯ç”±å™¨ã€NATã€é˜²ç«å¢™ç­‰åŠŸèƒ½é›†æˆåœ¨ä¸€ä¸ªè®¾å¤‡ä¸­ï¼ˆå¦‚å›¾ä¸­æ ‡æ³¨çš„ â€œoften combined in single boxâ€ï¼‰ã€‚</p></li><li><p><strong>æœ‰çº¿ä»¥å¤ªç½‘ (Wired Ethernet, 100 Mbps)</strong><br>æœ‰çº¿è¿æ¥çš„è®¾å¤‡é€šè¿‡ä»¥å¤ªç½‘çº¿è¿æ¥åˆ°ç½‘ç»œï¼Œæä¾›æ›´é«˜çš„ç¨³å®šæ€§å’Œé€Ÿåº¦ï¼ˆé€Ÿç‡ä¸º100 Mbpsï¼‰ã€‚</p></li><li><p><strong>è·¯ç”±å™¨ã€é˜²ç«å¢™ã€NAT</strong><br>è·¯ç”±å™¨è´Ÿè´£å°†å®¶åº­ç½‘ç»œå†…çš„æµé‡å¼•å¯¼åˆ°æ­£ç¡®çš„è®¾å¤‡ï¼›<br>é˜²ç«å¢™ç”¨äºä¿æŠ¤ç½‘ç»œå…å—å¤–éƒ¨å¨èƒï¼›<br>NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰ä½¿å¤šä¸ªè®¾å¤‡å¯ä»¥å…±äº«ä¸€ä¸ªå…¬å…± IP åœ°å€è®¿é—®äº’è”ç½‘ã€‚</p></li><li><p><strong>DSL æˆ–æœ‰çº¿è°ƒåˆ¶è§£è°ƒå™¨ (Cable or DSL modem)</strong><br>è¿™æ˜¯è¿æ¥å®¶åº­ç½‘ç»œä¸ ISPï¼ˆäº’è”ç½‘æœåŠ¡æä¾›å•†ï¼‰ä¹‹é—´çš„è®¾å¤‡ã€‚è°ƒåˆ¶è§£è°ƒå™¨å°†å®¶åº­ç½‘ç»œè¿æ¥åˆ°ä¸Šæ¸¸çš„äº’è”ç½‘åŸºç¡€è®¾æ–½ï¼ˆå¦‚ headend æˆ– central officeï¼‰ã€‚</p></li></ul></blockquote><h2 id="å•ä½æ¥å…¥ç½‘ç»œ"><a href="#å•ä½æ¥å…¥ç½‘ç»œ" class="headerlink" title="å•ä½æ¥å…¥ç½‘ç»œ"></a>å•ä½æ¥å…¥ç½‘ç»œ</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120034105451.png" alt="image-20250120034105451"></p><ul><li><strong>æ— çº¿è®¾å¤‡ (æ— çº¿æ¥å…¥ç‚¹)</strong><br>å›¾ä¸­ä¸Šæ–¹æ˜¾ç¤ºäº†ä¸€äº›æ— çº¿è®¾å¤‡ï¼ˆå¦‚ç¬”è®°æœ¬ç”µè„‘ï¼‰ï¼Œå®ƒä»¬é€šè¿‡æ— çº¿æ¥å…¥ç‚¹ï¼ˆwireless access pointï¼‰æ¥å…¥ç½‘ç»œã€‚</li><li><strong>Ethernet Switchï¼ˆä»¥å¤ªç½‘äº¤æ¢æœºï¼‰</strong><br>å›¾ä¸­é—´éƒ¨åˆ†çš„äº¤æ¢æœºè´Ÿè´£åœ¨å†…éƒ¨ç½‘ç»œä¸­è½¬å‘æ•°æ®åŒ…ã€‚å®ƒè¿æ¥äº†æœ‰çº¿è®¾å¤‡ï¼ˆå¦‚å°å¼æœºï¼‰å’ŒæœåŠ¡å™¨ã€‚</li><li><strong>Institutional Routerï¼ˆæœºæ„è·¯ç”±å™¨ï¼‰</strong><br>è·¯ç”±å™¨æ˜¯è¿æ¥å†…éƒ¨ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œï¼ˆISPï¼‰çš„è®¾å¤‡ã€‚å®ƒè´Ÿè´£å°†æœ¬åœ°ç½‘ç»œä¸­çš„æµé‡å¼•å¯¼åˆ°äº’è”ç½‘ï¼Œå¹¶ä»å¤–éƒ¨ç½‘ç»œæ¥æ”¶æ•°æ®ã€‚</li><li><strong>Institutional Mail, Web Serversï¼ˆæœºæ„é‚®ä»¶ä¸WebæœåŠ¡å™¨ï¼‰</strong><br>å›¾çš„å³ä¸‹æ–¹å±•ç¤ºäº†æœåŠ¡å™¨ï¼Œé€šå¸¸ç”¨äºæ‰˜ç®¡ä¼ä¸šçš„é‚®ä»¶æœåŠ¡ã€ç½‘ç«™ã€æ–‡ä»¶å­˜å‚¨ç­‰å†…éƒ¨èµ„æºã€‚</li><li><strong>Institutional Link to ISPï¼ˆåˆ°ISPçš„æœºæ„é“¾æ¥ï¼‰</strong><br>è·¯ç”±å™¨é€šè¿‡è¿™ä¸€é“¾è·¯è¿æ¥åˆ°äº’è”ç½‘æœåŠ¡æä¾›å•†ï¼ˆISPï¼‰ã€‚è¿™æ˜¯ä¼ä¸šè®¿é—®äº’è”ç½‘çš„å…³é”®å‡ºå£ã€‚</li></ul><h2 id="æ— çº¿æ¥å…¥ç½‘ç»œ"><a href="#æ— çº¿æ¥å…¥ç½‘ç»œ" class="headerlink" title="æ— çº¿æ¥å…¥ç½‘ç»œ"></a>æ— çº¿æ¥å…¥ç½‘ç»œ</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120034140358.png" alt="image-20250120034140358"></p><h1 id="ç‰©ç†åª’ä½“"><a href="#ç‰©ç†åª’ä½“" class="headerlink" title="ç‰©ç†åª’ä½“"></a>ç‰©ç†åª’ä½“</h1><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120034528729.png" alt="image-20250120034528729"></p><blockquote><ul><li><p>çœ‹å¾—è§çš„å«å¯¼å¼•å‹åª’ä½“</p><ul><li>è¡°å‡å°‘</li></ul></li><li><p>çœ‹ä¸è§çš„æ˜¯éå¯¼å¼•å‹åª’ä½“</p><ul><li>è¡°å‡å¿«</li></ul></li></ul></blockquote><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120034532632.png" alt="image-20250120034532632"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120034543356.png" alt="image-20250120034543356"></p><h1 id="äº’è”ç½‘ç»œç»“æ„ï¼šç½‘ç»œçš„ç½‘ç»œ"><a href="#äº’è”ç½‘ç»œç»“æ„ï¼šç½‘ç»œçš„ç½‘ç»œ" class="headerlink" title="äº’è”ç½‘ç»œç»“æ„ï¼šç½‘ç»œçš„ç½‘ç»œ"></a>äº’è”ç½‘ç»œç»“æ„ï¼šç½‘ç»œçš„ç½‘ç»œ</h1><ul><li>ç«¯ç³»ç»Ÿé€šè¿‡æ¥å…¥**ISPs(Internet Service Providers)**è¿æ¥åˆ°äº’è”ç½‘<ul><li>ä½å®…ï¼Œå…¬å¸å’Œå¤§å°çš„ISPs</li></ul></li><li>æ¥å…¥çš„ISPsç›¸åº”çš„å¿…é¡»æ˜¯äº’è”çš„<ul><li>å› æ­¤ä»»ä½•2ä¸ªç«¯ç³»ç»Ÿå¯ç›¸äº’å‘é€åˆ†ç»„åˆ°å¯¹æ–¹</li></ul></li><li>å¯¼è‡´çš„â€œç½‘ç»œçš„ç½‘ç»œâ€éå¸¸å¤åˆ¶<ul><li>å‘å±•å’Œæ¼”åŒ–æ˜¯é€šè¿‡ç»æµçš„å’Œå›½å®¶çš„æ”¿ç­–æ¥é©±åŠ¨çš„</li></ul></li></ul><h2 id="å¦‚ä½•è¿æ¥"><a href="#å¦‚ä½•è¿æ¥" class="headerlink" title="å¦‚ä½•è¿æ¥"></a>å¦‚ä½•è¿æ¥</h2><p>ä¸¤ä¸¤è¿æ¥ï¼Ÿ</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161507357.png" alt="image-20250120161507357"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161518344.png" alt="image-20250120161518344"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161526105.png" alt="image-20250120161526105"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161535983.png" alt="image-20250120161535983"></p><h2 id="å…¨çƒæ¥å…¥å’ŒåŒºåŸŸæ¥å…¥"><a href="#å…¨çƒæ¥å…¥å’ŒåŒºåŸŸæ¥å…¥" class="headerlink" title="å…¨çƒæ¥å…¥å’ŒåŒºåŸŸæ¥å…¥"></a>å…¨çƒæ¥å…¥å’ŒåŒºåŸŸæ¥å…¥</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161621509.png" alt="image-20250120161621509"></p><h3 id="å†…å®¹æä¾›å•†ç½‘ç»œ-ICP"><a href="#å†…å®¹æä¾›å•†ç½‘ç»œ-ICP" class="headerlink" title="å†…å®¹æä¾›å•†ç½‘ç»œ(ICP)"></a>å†…å®¹æä¾›å•†ç½‘ç»œ(ICP)</h3><p>Internet Content Providers</p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120161818842.png" alt="image-20250120161818842"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162600583.png" alt="image-20250120162600583"></p><blockquote><p>ICPçš„ç”¨æˆ·éœ€è¦æ¥å…¥ISPï¼Œæ‰€ä»¥ISPä¼šæ”¶å–é«˜é¢è´¹ç”¨ï¼ŒåŒæ—¶å¯¹äºå…¨çƒçš„ç”¨æˆ·æ— æ³•æä¾›é«˜è´¨é‡çš„æœåŠ¡ï¼Œå› æ­¤ICPé€šå¸¸è‡ªå·±éƒ¨ç½²ä¸“ç”¨çº¿ç¼†å’Œæ•°æ®ä¸­å¿ƒæœºæˆ¿</p></blockquote><h2 id="å±‚çº§ç»“æ„"><a href="#å±‚çº§ç»“æ„" class="headerlink" title="å±‚çº§ç»“æ„"></a>å±‚çº§ç»“æ„</h2><h3 id="ISPé—´çš„è¿æ¥"><a href="#ISPé—´çš„è¿æ¥" class="headerlink" title="ISPé—´çš„è¿æ¥"></a>ISPé—´çš„è¿æ¥</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162418641.png" alt="image-20250120162418641"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162634484.png" alt="image-20250120162634484"></p><blockquote><p><strong>IXPï¼ˆInternet Exchange Pointï¼Œäº’è”ç½‘äº¤æ¢ä¸­å¿ƒï¼‰</strong>æ˜¯äº’è”ç½‘åŸºç¡€è®¾æ–½ä¸­çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸åŒç½‘ç»œï¼ˆé€šå¸¸æ˜¯ä¸åŒçš„ISPã€å†…å®¹æä¾›å•†æˆ–è€…ä¼ä¸šç½‘ç»œï¼‰ä¹‹é—´è¿›è¡Œæ•°æ®äº¤æ¢çš„ç‰©ç†åœ°ç‚¹ã€‚</p></blockquote><h3 id="ç¬¬ä¸€å±‚"><a href="#ç¬¬ä¸€å±‚" class="headerlink" title="ç¬¬ä¸€å±‚"></a>ç¬¬ä¸€å±‚</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162509983.png" alt="image-20250120162509983"></p><h3 id="ç¬¬äºŒå±‚"><a href="#ç¬¬äºŒå±‚" class="headerlink" title="ç¬¬äºŒå±‚"></a>ç¬¬äºŒå±‚</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162524089.png" alt="image-20250120162524089"></p><h3 id="ç¬¬ä¸‰å±‚"><a href="#ç¬¬ä¸‰å±‚" class="headerlink" title="ç¬¬ä¸‰å±‚"></a>ç¬¬ä¸‰å±‚</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162533544.png" alt="image-20250120162533544"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120162612216.png" alt="image-20250120162612216"></p><h1 id="åˆ†ç»„å»¶æ—¶ã€ä¸¢å¤±ã€ååé‡"><a href="#åˆ†ç»„å»¶æ—¶ã€ä¸¢å¤±ã€ååé‡" class="headerlink" title="åˆ†ç»„å»¶æ—¶ã€ä¸¢å¤±ã€ååé‡"></a>åˆ†ç»„å»¶æ—¶ã€ä¸¢å¤±ã€ååé‡</h1><h2 id="åˆ†ç»„ä¸¢å¤±å’Œå»¶æ—¶çš„å‘ç”Ÿ"><a href="#åˆ†ç»„ä¸¢å¤±å’Œå»¶æ—¶çš„å‘ç”Ÿ" class="headerlink" title="åˆ†ç»„ä¸¢å¤±å’Œå»¶æ—¶çš„å‘ç”Ÿ"></a>åˆ†ç»„ä¸¢å¤±å’Œå»¶æ—¶çš„å‘ç”Ÿ</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120163331379.png" alt="image-20250120163331379"></p><h2 id="åˆ†ç»„å»¶æ—¶"><a href="#åˆ†ç»„å»¶æ—¶" class="headerlink" title="åˆ†ç»„å»¶æ—¶"></a>åˆ†ç»„å»¶æ—¶</h2><p>å››ç§</p><ul><li><p>èŠ‚ç‚¹å¤„ç†å»¶æ—¶</p><ul><li>æ£€æŸ¥bitçº§å·®é”™</li><li>æ£€æŸ¥åˆ†ç»„é¦–éƒ¨å’Œå†³å®šå°†åˆ†ç»„å¯¼å‘ä½•å¤„</li></ul></li><li><p>æ’é˜Ÿå»¶æ—¶</p><ul><li>åœ¨è¾“å‡ºé“¾è·¯ä¸Šç­‰å¾…ä¼ è¾“çš„æ—¶é—´</li><li>ä¾èµ–äºè·¯ç”±å™¨çš„æ‹¥å¡ç¨‹åº¦</li></ul></li><li><p>ä¼ è¾“å»¶æ—¶</p><ul><li>R &#x3D; é“¾è·¯å¸¦å®½(bps)</li><li>L &#x3D; åˆ†ç»„é•¿åº¦(bits)</li><li>å°†åˆ†ç»„å‘é€åˆ°é“¾è·¯ä¸Šçš„æ—¶é—´ &#x3D; L&#x2F;R<ul><li>ä¼ è¾“ä¸€ä¸ªæ¯”ç‰¹éœ€è¦æ—¶é—´ä¸ºï¼š1&#x2F;Rï¼Œé‚£ä¹ˆä¼ è¾“Lä¸ªæ¯”ç‰¹éœ€è¦L&#x2F;R</li></ul></li><li>å­˜å‚¨è½¬å‘å»¶æ—¶</li></ul></li><li><p>ä¼ æ’­å»¶æ—¶</p><ul><li>d &#x3D; ç‰©ç†é“¾è·¯çš„é•¿åº¦</li><li>s &#x3D; åœ¨åª’ä½“ä¸Šçš„ä¼ æ’­é€Ÿåº¦(~2x10å…«æ¬¡æ–¹m&#x2F;sec)</li><li>ä¼ æ’­å»¶æ—¶ &#x3D; d &#x2F; s</li></ul><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164204994.png" alt="image-20250120164204994"></p></li></ul><h3 id="ç±»æ¯”"><a href="#ç±»æ¯”" class="headerlink" title="ç±»æ¯”"></a>ç±»æ¯”</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120163737476.png" alt="image-20250120163737476"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120163744807.png" alt="image-20250120163744807"></p><h3 id="ä¿¡é“å®¹é‡"><a href="#ä¿¡é“å®¹é‡" class="headerlink" title="ä¿¡é“å®¹é‡"></a>ä¿¡é“å®¹é‡</h3><blockquote><p>å®¹é‡æœ‰æ—¶å€™è¯´çš„æ˜¯å®¹çº³çš„åˆ†ç»„ï¼Œæœ‰æ—¶å€™è¯´çš„æ˜¯å¸¦å®½ï¼Œè¿™é‡Œè¯´çš„æ˜¯å¯ä»¥å®¹çº³çš„åˆ†æ”¯</p></blockquote><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120170549752.png" alt="image-20250120170549752"></p><ul><li>å·¦è¾¹çš„å«åšLAN(Local Area Network)<ul><li>LAN æ˜¯æŒ‡åœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„åœ°ç†èŒƒå›´å†…ï¼ˆå¦‚å®¶åº­ã€åŠå…¬å®¤ã€å­¦æ ¡æˆ–å·¥å‚ç­‰ï¼‰è¿æ¥çš„è®¡ç®—æœºå’Œå…¶ä»–è®¾å¤‡çš„ç½‘ç»œã€‚å±€åŸŸç½‘çš„ç‰¹ç‚¹æ˜¯è¦†ç›–èŒƒå›´å°ï¼Œé€šå¸¸åªé™äºä¸€æ ‹å»ºç­‘æˆ–ä¸€ä¸ªæ ¡å›­ã€‚</li><li>å±€åŸŸç½‘å‡ ä¹æ²¡æœ‰å®¹é‡</li></ul></li><li>å³è¾¹çš„å«åšWAN(Wide Area Network)<ul><li>WAN æ˜¯æŒ‡è¦†ç›–è¾ƒå¹¿åœ°ç†èŒƒå›´çš„è®¡ç®—æœºç½‘ç»œï¼Œå®ƒå¯ä»¥è·¨è¶ŠåŸå¸‚ã€å›½å®¶ç”šè‡³å…¨çƒã€‚WANé€šå¸¸ç”±å¤šä¸ªLANé€šè¿‡è·¯ç”±å™¨ã€å«æ˜Ÿã€å…‰çº¤æˆ–æ— çº¿é“¾è·¯è¿æ¥è€Œæˆã€‚</li><li>å¯ä»¥ä¼ å¾ˆå¤šä¸ªåˆ†ç»„ï¼Œæ‰€ä»¥ä¿¡é“å®¹é‡å¤§</li></ul></li></ul><h3 id="èŠ‚ç‚¹å»¶æ—¶"><a href="#èŠ‚ç‚¹å»¶æ—¶" class="headerlink" title="èŠ‚ç‚¹å»¶æ—¶"></a>èŠ‚ç‚¹å»¶æ—¶</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164333480.png" alt="image-20250120164333480"></p><h3 id="æ’é˜Ÿå»¶æ—¶"><a href="#æ’é˜Ÿå»¶æ—¶" class="headerlink" title="æ’é˜Ÿå»¶æ—¶"></a>æ’é˜Ÿå»¶æ—¶</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164409350.png" alt="image-20250120164409350"></p><h3 id="Internetå»¶æ—¶å’Œè·¯ç”±"><a href="#Internetå»¶æ—¶å’Œè·¯ç”±" class="headerlink" title="Internetå»¶æ—¶å’Œè·¯ç”±"></a>Internetå»¶æ—¶å’Œè·¯ç”±</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164424439.png" alt="image-20250120164424439"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250121032031956.png" alt="image-20250121032031956"></p><blockquote><p>åˆ†ç»„åˆ°è·¯ç”±å™¨,TTLå‡1ï¼Œè‹¥TTLå‡ä¸º0åˆ™æ±‡æŠ¥ICMP(äº’è”ç½‘æ§åˆ¶æŠ¥æ–‡åè®® æœ‰å¾ˆå¤šç±»å‹æ•°æ®åŒ…ï¼Œå…¶ä¸­ä¸€ç§æ˜¯ä¸‹é¢é‚£ä¸ªIPå¤´IPé‚®æŠ¥)ç»™æºIPã€‚</p><p>æ‰€ä»¥Tracertæ˜¯ç”¨æ¥è¿”å›æ¯ä¸€è·³è·¯ç”±å™¨å»¶æ—¶çš„(å¾€è¿”å»¶è¿Ÿï¼ŒRTT(Round Trip Time))</p></blockquote><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250121032835402.png" alt="image-20250121032835402"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164434733.png" alt="image-20250120164434733"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164440252.png" alt="image-20250120164440252"></p><h2 id="åˆ†ç»„ä¸¢å¤±"><a href="#åˆ†ç»„ä¸¢å¤±" class="headerlink" title="åˆ†ç»„ä¸¢å¤±"></a>åˆ†ç»„ä¸¢å¤±</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164455458.png" alt="image-20250120164455458"></p><ul><li>å¦‚æœé“¾è·¯å¯é <ul><li>ä¸Šä¸€ä¸ªæ ¸å¿ƒé‡ä¼ </li></ul></li><li>å¦‚ä¸å¯é <ul><li>æºä¸»æœºé‡ä¼ æˆ–ä¸¢å°±ä¸¢äº†</li></ul></li></ul><h2 id="ååé‡"><a href="#ååé‡" class="headerlink" title="ååé‡"></a>ååé‡</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164509439.png" alt="image-20250120164509439"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164532936.png" alt="image-20250120164532936"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164539893.png" alt="image-20250120164539893"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250120164547035.png" alt="image-20250120164547035"></p><h1 id="åè®®å±‚æ¬¡åŠæœåŠ¡æ¨¡å‹"><a href="#åè®®å±‚æ¬¡åŠæœåŠ¡æ¨¡å‹" class="headerlink" title="åè®®å±‚æ¬¡åŠæœåŠ¡æ¨¡å‹"></a>åè®®å±‚æ¬¡åŠæœåŠ¡æ¨¡å‹</h1><h2 id="åè®®å±‚æ¬¡"><a href="#åè®®å±‚æ¬¡" class="headerlink" title="åè®®å±‚æ¬¡"></a>åè®®å±‚æ¬¡</h2><p>é‡‡ç”¨å±‚æ¬¡åŒ–æ–¹å¼æ¥å®ç°ç½‘ç»œåŠŸèƒ½</p><ul><li><p>å°†ç½‘ç»œå¤æ‚çš„åŠŸèƒ½åˆ†å±‚åŠŸèƒ½æ˜ç¡®çš„<strong>å±‚æ¬¡</strong>ï¼Œæ¯ä¸€å±‚å®ç°äº†å…¶ä¸­ä¸€ä¸ªæˆ–ä¸€ç»„<strong>åŠŸèƒ½</strong>ï¼ŒåŠŸèƒ½ä¸­æœ‰å…¶ä¸Šå±‚å¯ä»¥ä½¿ç”¨çš„åŠŸèƒ½ï¼š<strong>æœåŠ¡</strong> </p></li><li><p>æœ¬å±‚åè®®å®ä½“ç›¸äº’äº¤äº’æ‰§è¡Œæœ¬å±‚çš„<strong>åè®®åŠ¨ä½œ</strong>ï¼Œç›®çš„æ˜¯å®ç°æœ¬å±‚åŠŸèƒ½ï¼Œé€šè¿‡æ¥å£ä¸ºä¸Šå±‚æä¾›æ›´å¥½çš„æœåŠ¡ </p></li><li><p>åœ¨å®ç°æœ¬å±‚åè®®çš„æ—¶å€™ï¼Œç›´æ¥<strong>åˆ©ç”¨äº†ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡</strong> </p></li><li><p>æœ¬å±‚çš„æœåŠ¡ï¼šå€ŸåŠ©ä¸‹å±‚æœåŠ¡å®ç°çš„æœ¬å±‚åè®®å®ä½“ä¹‹é—´äº¤äº’å¸¦æ¥çš„æ–°åŠŸèƒ½ï¼ˆä¸Šå±‚å¯ä»¥åˆ©ç”¨çš„ï¼‰**+** æ›´ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡</p></li></ul><h3 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122003520886.png" alt="image-20250122003520886"></p><p>ä¸¤ä¸ªå“²å­¦å®¶äº¤æµï¼Œå¯ä»¥åˆ©ç”¨ä¸‰å±‚çš„åŠŸèƒ½åˆ†å±‚ï¼Œæ¯ä¸ªå±‚æ¬¡åŠŸèƒ½å•ä¸€ä¸”ç‹¬ç«‹</p><p> <strong>ç¬¬3å±‚ï¼šåº”ç”¨å±‚ï¼ˆPhilosopher å“²å­¦å®¶ï¼‰</strong></p><ul><li><strong>åè®®åŠ¨ä½œ</strong>ï¼š<ul><li>å“²å­¦å®¶å¸Œæœ›è¡¨è¾¾ä¸€ä¸ªæƒ³æ³•ï¼Œæ¯”å¦‚â€œ<strong>I like rabbits</strong>â€ï¼ˆæˆ‘å–œæ¬¢å…”å­ï¼‰ã€‚</li><li>è¿™ä¸ªæƒ³æ³•è¢«ç»„ç»‡ä¸ºä¸€å¥å¯ç†è§£çš„æ¶ˆæ¯ï¼Œé€šè¿‡åè®®è§„å®šçš„æ ¼å¼å‡†å¤‡å¥½äº¤ç»™ä¸‹ä¸€å±‚ã€‚</li></ul></li><li><strong>æœåŠ¡</strong>ï¼š<ul><li>æä¾›<strong>æ€æƒ³å’Œè¯­ä¹‰è¡¨è¾¾çš„æœåŠ¡</strong>ï¼Œè®©å“²å­¦å®¶èƒ½å¤Ÿç”Ÿæˆå¹¶ä¼ é€’é«˜å±‚è¯­ä¹‰çš„æ¶ˆæ¯ã€‚</li><li>å“²å­¦å®¶ä¸éœ€è¦å…³å¿ƒå…·ä½“å¦‚ä½•ä¼ é€’è¿™æ¡æ¶ˆæ¯ï¼Œåªéœ€è¦è´Ÿè´£<strong>æ€æƒ³å’Œè¯­ä¹‰çš„å‡†ç¡®æ€§</strong>ã€‚</li></ul></li></ul><p><strong>ç¬¬2å±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼ˆTranslator ç¿»è¯‘äººå‘˜ï¼‰</strong></p><ul><li>åè®®åŠ¨ä½œï¼š<ul><li>ç¿»è¯‘äººå‘˜å°†å“²å­¦å®¶æä¾›çš„æ¶ˆæ¯ï¼ˆè‹±æ–‡ï¼šâ€œI like rabbitsâ€ï¼‰ç¿»è¯‘æˆè·å…°è¯­ï¼šâ€œIk vind konijnen leukâ€ã€‚</li><li>ç¿»è¯‘äººå‘˜ç¡®ä¿æ¶ˆæ¯çš„è¯­ä¹‰åœ¨ä¸åŒè¯­è¨€ä¹‹é—´ä¿æŒä¸€è‡´ï¼ˆç›¸å½“äºæ•°æ®çš„â€œæ ¼å¼è½¬æ¢â€ï¼‰ã€‚</li></ul></li><li>æœåŠ¡ï¼š<ul><li>æä¾›<strong>è¯­è¨€è½¬æ¢æœåŠ¡</strong>ï¼Œç¡®ä¿ä¸åŒè¯­è¨€ç¯å¢ƒä¸­çš„é€šä¿¡åŒæ–¹éƒ½èƒ½ç†è§£æ¶ˆæ¯ã€‚</li><li>ç¿»è¯‘äººå‘˜åªè´Ÿè´£æ¶ˆæ¯çš„è¯­è¨€è½¬æ¢ï¼Œä¸å…³å¿ƒå…·ä½“æ€ä¹ˆä¼ é€’æ¶ˆæ¯ã€‚</li></ul></li></ul><p><strong>ç¬¬1å±‚ï¼šç‰©ç†ä¼ è¾“å±‚ï¼ˆSecretary ç§˜ä¹¦ï¼‰</strong></p><ul><li>åè®®åŠ¨ä½œï¼š<ul><li>ç§˜ä¹¦å°†ç¿»è¯‘åçš„æ¶ˆæ¯é€šè¿‡ä¼ çœŸå‘é€åˆ°å¦ä¸€ç«¯ï¼ˆâ€œLocation Bâ€ï¼‰ã€‚</li><li>ç§˜ä¹¦ç¡®ä¿ä¿¡æ¯æŒ‰ç…§åè®®è§„å®šçš„ç‰©ç†æ–¹å¼ï¼ˆä¼ çœŸæ ¼å¼ï¼‰ä¼ è¾“åˆ°ç›®æ ‡ä½ç½®ã€‚</li></ul></li><li>æœåŠ¡ï¼š<ul><li>æä¾›<strong>æ¶ˆæ¯çš„ç‰©ç†ä¼ è¾“æœåŠ¡</strong>ï¼Œç¡®ä¿ä¿¡æ¯ä»<strong>Location A</strong>çš„ç§˜ä¹¦æ­£ç¡®ä¼ é€’åˆ°<strong>Location B</strong>çš„ç§˜ä¹¦ã€‚</li><li>è¿™ä¸€å±‚åªè´Ÿè´£å°†æ•°æ®é€šè¿‡ä¼ çœŸç½‘ç»œå‘é€ï¼Œä¸å…³å¿ƒæ•°æ®çš„å†…å®¹æˆ–è¯­è¨€ã€‚</li></ul></li></ul><p><strong>æ€»ç»“ï¼šä»é¡¶å±‚åˆ°åº•å±‚çš„è§£é‡Š</strong></p><ol><li><strong>åº”ç”¨å±‚ï¼ˆå“²å­¦å®¶ï¼‰</strong>ï¼šè´Ÿè´£ç”Ÿæˆé«˜å±‚è¯­ä¹‰çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚â€œæˆ‘å–œæ¬¢å…”å­â€ã€‚</li><li><strong>æ•°æ®é“¾è·¯å±‚ï¼ˆç¿»è¯‘äººå‘˜ï¼‰</strong>ï¼šè´Ÿè´£å°†æ¶ˆæ¯ç¿»è¯‘æˆç›®æ ‡è¯­è¨€ï¼Œç¡®ä¿è¯­ä¹‰ä¸€è‡´æ€§ã€‚</li><li><strong>ç‰©ç†ä¼ è¾“å±‚ï¼ˆç§˜ä¹¦ï¼‰</strong>ï¼šè´Ÿè´£å°†æ¶ˆæ¯é€šè¿‡ä¼ çœŸä¼ è¾“åˆ°è¿œç«¯ã€‚</li></ol><hr><p><strong>æ¯å±‚çš„é‡ç‚¹</strong>ï¼š</p><ul><li>ä¸Šå±‚ä¸“æ³¨äºè¯­ä¹‰è¡¨è¾¾ï¼›</li><li>ä¸­å±‚è´Ÿè´£è¯­è¨€è½¬æ¢ï¼›</li><li>ä¸‹å±‚è´Ÿè´£æ¶ˆæ¯çš„ç‰©ç†ä¼ è¾“ã€‚</li></ul><p>æ•´ä¸ªè¿‡ç¨‹æ˜¯é€å±‚é€’äº¤æ¶ˆæ¯ï¼Œæ¯ä¸€å±‚ä¾èµ–ä¸‹ä¸€å±‚çš„æœåŠ¡æ‰èƒ½å®Œæˆè‡ªèº«ä»»åŠ¡ã€‚</p><h2 id="æœåŠ¡å’Œè®¿é—®è®¿é—®ç‚¹"><a href="#æœåŠ¡å’Œè®¿é—®è®¿é—®ç‚¹" class="headerlink" title="æœåŠ¡å’Œè®¿é—®è®¿é—®ç‚¹"></a>æœåŠ¡å’Œè®¿é—®è®¿é—®ç‚¹</h2><ul><li><p>æœåŠ¡( Service)ï¼šä½å±‚å®ä½“å‘ä¸Šå±‚å®ä½“æä¾›å®ƒä»¬ä¹‹é—´çš„é€šä¿¡çš„èƒ½åŠ›</p><ul><li>æœåŠ¡ç”¨æˆ·(service user)</li><li>æœåŠ¡æä¾›è€…(service provider )</li></ul></li><li><p>åŸè¯­(primitive)ï¼šä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æœåŠ¡çš„å½¢å¼ï¼Œé«˜å±‚ä½¿ç”¨ä½å±‚æä¾›çš„æœåŠ¡ï¼Œä»¥åŠä½å±‚å‘é«˜å±‚æä¾›æœåŠ¡éƒ½æ˜¯é€šè¿‡æœåŠ¡è®¿é—®åŸè¯­æ¥è¿›è¡Œäº¤äº’çš„â€”å½¢å¼</p><ul><li>ä¸Šå±‚é€šè¿‡SAPå‘Šè¯‰ä¸‹å±‚è¦è®¿é—®ä»€ä¹ˆæœåŠ¡<ul><li>å»ç‰©æµå…¬å¸è¦å‘Šè¯‰å…¶ä½ æ˜¯è¦å¯„ä¿¡è¿˜æ˜¯å¯„ä»€ä¹ˆ</li></ul></li><li>ä¸‹å±‚è¦é€šè¿‡åŸè¯­æ¥å‘Šè¯‰ä¸Šå±‚æä¾›ä»€ä¹ˆæœåŠ¡</li></ul></li><li><p>æœåŠ¡è®¿é—®ç‚¹ SAP (Services Access Point) ï¼šä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æä¾›çš„æœåŠ¡é€šè¿‡å±‚é—´çš„æ¥å£â€”åœ°ç‚¹ï¼› </p><ul><li>ä¾‹å­:é‚®ç®± </li><li>åœ°å€(address)ï¼šä¸‹å±‚çš„ä¸€ä¸ªå®ä½“æ”¯æ’‘ç€ä¸Šå±‚çš„å¤šä¸ªå®ä½“ï¼ŒSAPæœ‰æ ‡å¿—ä¸åŒä¸Šå±‚å®ä½“çš„ä½œç”¨ </li><li>å¯ä»¥æœ‰ä¸åŒçš„å®ç°ï¼Œé˜Ÿåˆ— </li><li>ä¾‹å­:ä¼ è¾“å±‚çš„SAP: ç«¯å£(port)</li><li><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122013205562.png" alt="image-20250122013205562">å±‚é—´çš„ç‚¹ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒçš„ä¸Šå±‚ç”¨æˆ·</li><li>å¥—æ¥å­—(socket)<ul><li>ä¼ ä¸‹æ¥çš„æ—¶å€™åŠ ä»¥æ ‡è®°ï¼Œä¼ åˆ°å¯¹æ–¹çš„æ—¶å€™åŠ ä»¥åŒºåˆ†ï¼Œè¿™æ ·å­å°±èƒ½çŸ¥é“è°ä¼ ç»™è°çš„äº†</li><li>socket api <ul><li>åº”ç”¨å±‚ä½¿ç”¨ä¼ è¾“å±‚çš„å½¢å¼</li></ul></li></ul></li></ul></li></ul><h2 id="æœåŠ¡çš„ç±»å‹"><a href="#æœåŠ¡çš„ç±»å‹" class="headerlink" title="æœåŠ¡çš„ç±»å‹"></a>æœåŠ¡çš„ç±»å‹</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122014249713.png" alt="image-20250122014249713"></p><p>ä¸¤ä¸ªå®ä½“å¯ä»¥äº¤äº’pduç„¶åå‘ä¸Šå±‚æä¾›æœåŠ¡ï¼Œä¸Šå±‚çš„åº”ç”¨é€šè¿‡ä¸‹å±‚æä¾›æœåŠ¡çš„æ—¶å€™åˆ†ä¸º<strong>é¢å‘è¿æ¥</strong>å’Œæ— è¿æ¥çš„è®¿é—®</p><h3 id="é¢å‘è¿æ¥çš„æœåŠ¡"><a href="#é¢å‘è¿æ¥çš„æœåŠ¡" class="headerlink" title="é¢å‘è¿æ¥çš„æœåŠ¡"></a>é¢å‘è¿æ¥çš„æœåŠ¡</h3><ul><li>é¢å‘è¿æ¥çš„æœåŠ¡( Connection-oriented Service)<ul><li>è¿æ¥(Connection)ï¼šä¸¤ä¸ªé€šä¿¡å®ä½“ä¸ºè¿›è¡Œé€šä¿¡è€Œå»ºç«‹çš„ä¸€ç§ç»“åˆ</li><li>é¢å‘è¿æ¥çš„æœåŠ¡é€šä¿¡çš„è¿‡ç¨‹ï¼šå»ºç«‹è¿æ¥ï¼Œé€šä¿¡ï¼Œæ‹†é™¤è¿æ¥</li><li>é¢å‘è¿æ¥çš„æœåŠ¡çš„ä¾‹å­ï¼šç½‘ç»œå±‚çš„è¿æ¥è¢«æˆä¸ºè™šç”µè·¯</li><li>é€‚ç”¨èŒƒå›´ï¼šå¯¹äºå¤§çš„æ•°æ®å—è¦ä¼ è¾“; ä¸é€‚åˆå°çš„é›¶æ˜ŸæŠ¥æ–‡</li><li>ç‰¹ç‚¹ï¼šä¿åº</li><li>æœåŠ¡ç±»å‹: <ul><li>å¯é çš„ä¿¡æ¯æµ ä¼ é€é¡µé¢(å¯é çš„è·å¾—,é€šè¿‡æ¥æ”¶æ–¹çš„ç¡®è®¤) </li><li>å¯é çš„å­—èŠ‚æµ è¿œç¨‹ç™»å½• </li><li>ä¸å¯é çš„è¿æ¥ æ•°å­—åŒ–å£°éŸ³</li></ul></li></ul></li></ul><h3 id="æ— è¿æ¥çš„æœåŠ¡"><a href="#æ— è¿æ¥çš„æœåŠ¡" class="headerlink" title="æ— è¿æ¥çš„æœåŠ¡"></a>æ— è¿æ¥çš„æœåŠ¡</h3><ul><li>æ— è¿æ¥çš„æœåŠ¡(Connectionless Service)<ul><li>æ— è¿æ¥æœåŠ¡ï¼šä¸¤ä¸ªå¯¹ç­‰å±‚å®ä½“åœ¨é€šä¿¡å‰ä¸éœ€è¦å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œä¸é¢„ç•™èµ„æºï¼›ä¸éœ€è¦é€šä¿¡åŒæ–¹éƒ½æ˜¯æ´»è·ƒï¼›(ä¾‹ï¼šå¯„ä¿¡)</li><li>ç‰¹ç‚¹ï¼šä¸å¯é ã€å¯èƒ½é‡å¤ã€å¯èƒ½å¤±åº</li><li>IPåˆ†ç»„ï¼Œæ•°æ®åŒ…ï¼›</li><li>é€‚ç”¨èŒƒå›´ï¼šé€‚åˆä¼ é€é›¶æ˜Ÿæ•°æ®ï¼›</li><li>æœåŠ¡ç±»å‹ï¼š <ul><li>ä¸å¯é çš„æ•°æ®æŠ¥ ç”µå­æ–¹å¼çš„å‡½ä»¶ </li><li>æœ‰ç¡®è®¤çš„æ•°æ®æŠ¥ æŒ‚å·ä¿¡ </li><li>è¯·æ±‚å›ç­” ä¿¡æ¯æŸ¥è¯¢</li></ul></li></ul></li></ul><h2 id="æœåŠ¡å’Œåè®®çš„åŒºåˆ«è”ç³»"><a href="#æœåŠ¡å’Œåè®®çš„åŒºåˆ«è”ç³»" class="headerlink" title="æœåŠ¡å’Œåè®®çš„åŒºåˆ«è”ç³»"></a>æœåŠ¡å’Œåè®®çš„åŒºåˆ«è”ç³»</h2><h3 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><ul><li>æœåŠ¡(Service)ï¼šä½å±‚å®ä½“å‘ä¸Šå±‚å®ä½“æä¾›å®ƒä»¬ä¹‹é—´çš„é€šä¿¡çš„èƒ½åŠ›ï¼Œæ˜¯é€šè¿‡åŸè¯­(primitive)æ¥æ“ä½œçš„ï¼Œå‚ç›´</li><li>åè®®(protocol) ï¼šå¯¹ç­‰å±‚å®ä½“(peer entity)ä¹‹é—´åœ¨ç›¸äº’é€šä¿¡çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦éµå¾ªçš„è§„åˆ™çš„é›†åˆï¼Œæ°´å¹³</li></ul><h3 id="è”ç³»"><a href="#è”ç³»" class="headerlink" title="è”ç³»"></a>è”ç³»</h3><ul><li>æœ¬å±‚<strong>åè®®çš„å®ç°</strong>è¦é ä¸‹å±‚æä¾›çš„æœåŠ¡æ¥å®ç°</li><li>æœ¬å±‚å®ä½“é€šè¿‡åè®®ä¸ºä¸Šå±‚æä¾›<strong>æ›´é«˜çº§çš„æœåŠ¡</strong></li></ul><h2 id="æ•°æ®å•å…ƒ-DU"><a href="#æ•°æ®å•å…ƒ-DU" class="headerlink" title="æ•°æ®å•å…ƒ(DU)"></a>æ•°æ®å•å…ƒ(DU)</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122005723075.png" alt="image-20250122005723075"></p><ul><li><p>PDUï¼šåè®®æ•°æ®å•å…ƒ</p><ul><li>æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±ç‰¹æ®Šçš„ç§°å‘¼<ul><li>åº”ç”¨å±‚ï¼šåº”ç”¨æŠ¥æ–‡message</li><li>ä¼ è¾“å±‚ï¼šæŠ¥æ–‡æ®µ</li><li>ç½‘ç»œå±‚<ul><li>æœ‰è¿æ¥ï¼šåˆ†ç»„</li><li>æ— è¿æ¥ï¼šæ•°æ®æŠ¥</li></ul></li><li>é“¾è·¯å±‚ï¼šå¸§</li></ul></li></ul></li><li><p>ä¸Šå±‚æ¥çš„æ•°æ®SDU + æœ¬å±‚çš„æ§åˆ¶ä¿¡æ¯(Header)&#x3D;æœ¬å±‚çš„PDU</p><ul><li>Header &#x3D; ä¸Šå±‚çš„ICI + æœ¬èº«é™„åŠ ä¸Šå»çš„</li></ul></li><li><p>å¯¹ç­‰å±‚åè®®å®ä½“äº¤æ¢çš„è¿‡ç¨‹ä¸­éƒ½æ˜¯ç”±ç¬¬nå±‚pduæ¥äº¤æ¢çš„</p></li><li><p>å¦‚æœä¼ ä¸‹æ¥çš„SDUå¤ªå¤§çš„è¯ï¼Œåˆ†è§£æˆä¸ªä¸ªå°SDUï¼Œç„¶åæ¯å—éƒ½åŠ ä¸Šæ§åˆ¶ä¿¡æ¯</p><ul><li><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122015538722.png" alt="image-20250122015538722"></li></ul></li><li><p>å¦‚æœä¼ ä¸‹æ¥çš„SDUå¤ªå°äº†ï¼Œåˆæˆä¸€å—åˆé€‚å¤§å°çš„SDUåå†åŠ ä¸Šå¤´éƒ¨ä¿¡æ¯</p><ul><li><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122015646777.png" alt="image-20250122015646777"></li></ul></li></ul><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122005740595.png" alt="image-20250122005740595"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122005819401.png" alt="image-20250122005819401"></p><h2 id="Internetåè®®æ ˆ"><a href="#Internetåè®®æ ˆ" class="headerlink" title="Internetåè®®æ ˆ"></a>Internetåè®®æ ˆ</h2><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122010022563.png" alt="image-20250122010022563"></p><ul><li>ç‰©ç†å±‚<ul><li>å®Œæˆç›¸åº”ä¸¤ç‚¹ä¹‹é—´æ¯”ç‰¹çš„ä¼ è¾“</li></ul></li><li>é“¾è·¯å±‚<ul><li>ç›¸é‚»ä¸¤ç‚¹ä¹‹é—´ï¼Œåœ¨ç‰©ç†å±‚æ‰€æä¾›çš„è¿™ä¸ªæœåŠ¡çš„åŸºç¡€ä¹‹ä¸Šä¼ è¾“ä»¥å¸§ä¸ºå•ä½çš„æ•°æ®</li><li>é“¾è·¯å±‚å’Œç‰©ç†å±‚çš„åè®®ä¸€èˆ¬å°åœ¨åŒä¸€å¼ ç½‘å¡ä¸­</li></ul></li><li>ç½‘ç»œå±‚<ul><li>åœ¨é“¾è·¯å±‚æ‰€æä¾›çš„ç›¸é‚»ä¸¤ç‚¹ä¹‹é—´çš„æ•°æ®ä¼ è¾“çš„åŸºç¡€ä¸Šä¼ è¾“ä»¥åˆ†ç»„ä¸ºå•ä½çš„ç«¯åˆ°ç«¯çš„æ•°æ®ä¼ è¾“</li><li>ä¸»è¦åŠŸèƒ½ï¼š<ul><li>è½¬å‘</li><li>è·¯ç”±</li></ul></li></ul></li><li>ä¼ è¾“å±‚<ul><li>ç¬¬ä¸€ä¸ªè¿›ç¨‹åˆ°è¿›ç¨‹çš„åŒºåˆ†<ul><li>åœ¨ä¸»æœºåˆ°ä¸»æœºçš„ä¼ è¾“çš„åŸºç¡€ä¸Šå®Œæˆè¿›ç¨‹åˆ°è¿›ç¨‹çš„åŒºåˆ†ï¼šä»aä¸»æœºä¸Šçš„ä¸€ä¸ªè¿›ç¨‹åˆ°bç»„ä¸Šçš„æŸä¸ªç‰¹å®šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´æœ‰é€šä¿¡ï¼Œä¸èƒ½ä¹±</li></ul></li><li>æŠŠç½‘ç»œå±‚çš„ä¸å¯é é€šè®¯æœåŠ¡å˜æˆå¯é çš„é€šè®¯æœåŠ¡</li></ul></li><li>åº”ç”¨å±‚<ul><li>åº”ç”¨è¿›ç¨‹å¯ä»¥åœ¨ä¼ è¾“å±‚æ‰€æä¾›çš„æœåŠ¡åŸºç¡€ä¹‹ä¸Šå®Œæˆåº”ç”¨æŠ¥æ–‡å’Œåº”ç”¨æŠ¥æ–‡ä¹‹é—´çš„äº¤äº’<ul><li>äº¤æ¢åº”ç”¨æŠ¥æ–‡ï¼šæäº¤å¤©çŒ«çš„è®¢å•ã€æŸ¥è¯¢å¤©çŒ«çš„å•†å“ï¼Œéœ€è¦å‘æ•°æ®åº“æœåŠ¡å™¨å‘å‡ºä¸€ä¸ªæŸ¥è¯¢</li></ul></li></ul></li></ul><h3 id="ISO-OSI-å‚è€ƒæ¨¡å‹"><a href="#ISO-OSI-å‚è€ƒæ¨¡å‹" class="headerlink" title="ISO&#x2F;OSI å‚è€ƒæ¨¡å‹"></a>ISO&#x2F;OSI å‚è€ƒæ¨¡å‹</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122010735622.png" alt="image-20250122010735622"></p><h3 id="å°è£…å’Œè§£å°è£…"><a href="#å°è£…å’Œè§£å°è£…" class="headerlink" title="å°è£…å’Œè§£å°è£…"></a>å°è£…å’Œè§£å°è£…</h3><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122010831983.png" alt="image-20250122010831983"></p><p>æ¯ä¸€è·³ç½‘ç»œå±‚éƒ½æ‹¿å‡ºæ¥é“¾è·¯å±‚çš„å¸§åŒºåˆ†å‡ºåˆ†ç»„ï¼Œç„¶åå°è£…å›é“¾è·¯å±‚ï¼Œé€šè¿‡ç‰©ç†å±‚å†è½¬å‘å‡ºå»(äº¤æ¢æœºä¸¤é‡æ¥å°è£…ï¼Œè·¯ç”±å™¨ä¸‰é‡)</p><h4 id="1-äº¤æ¢æœºçš„ä¸¤é‡å°è£…å’Œè§£å°è£…"><a href="#1-äº¤æ¢æœºçš„ä¸¤é‡å°è£…å’Œè§£å°è£…" class="headerlink" title="1. äº¤æ¢æœºçš„ä¸¤é‡å°è£…å’Œè§£å°è£…"></a><strong>1. äº¤æ¢æœºçš„ä¸¤é‡å°è£…å’Œè§£å°è£…</strong></h4><p>äº¤æ¢æœºå·¥ä½œåœ¨ <strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼ˆç¬¬äºŒå±‚ï¼‰ã€‚å®ƒçš„èŒè´£æ˜¯æ ¹æ® <strong>MAC åœ°å€</strong> è½¬å‘æ•°æ®å¸§ï¼Œå› æ­¤ï¼š</p><ul><li><strong>å°è£…</strong>ï¼šå½“äº¤æ¢æœºæ¥æ”¶åˆ°æ•°æ®æ—¶ï¼Œå®ƒåªå¤„ç†é“¾è·¯å±‚çš„å¤´éƒ¨ï¼ˆH2ï¼‰ï¼Œä¸æ¶‰åŠç½‘ç»œå±‚å’Œæ›´é«˜å±‚ã€‚äº¤æ¢æœºåœ¨å¿…è¦æ—¶ä¿®æ”¹é“¾è·¯å±‚å¤´éƒ¨ï¼ˆå¦‚æ›´æ–°æº MAC åœ°å€ï¼‰å¹¶å°†æ•°æ®è½¬å‘åˆ°ç›®çš„ç«¯å£ã€‚</li><li><strong>è§£å°è£…</strong>ï¼šäº¤æ¢æœºä»ç½‘ç»œè®¾å¤‡æ¥æ”¶åˆ°æ•°æ®å¸§ï¼Œè¯»å–æ•°æ®é“¾è·¯å±‚å¤´éƒ¨çš„ä¿¡æ¯ï¼ˆå¦‚æºå’Œç›®çš„ MAC åœ°å€ï¼‰æ¥å†³å®šè½¬å‘è·¯å¾„ã€‚</li></ul><p><strong>æ€»ç»“</strong>ï¼šäº¤æ¢æœºåªæ¶‰åŠ <strong>ç‰©ç†å±‚</strong> å’Œ <strong>æ•°æ®é“¾è·¯å±‚</strong>ï¼Œæ‰€ä»¥å®ƒçš„å°è£…å’Œè§£å°è£…è¿‡ç¨‹åªæœ‰ä¸¤å±‚ã€‚</p><hr><h4 id="2-è·¯ç”±å™¨çš„ä¸‰é‡å°è£…å’Œè§£å°è£…"><a href="#2-è·¯ç”±å™¨çš„ä¸‰é‡å°è£…å’Œè§£å°è£…" class="headerlink" title="2. è·¯ç”±å™¨çš„ä¸‰é‡å°è£…å’Œè§£å°è£…"></a><strong>2. è·¯ç”±å™¨çš„ä¸‰é‡å°è£…å’Œè§£å°è£…</strong></h4><p>è·¯ç”±å™¨å·¥ä½œåœ¨ <strong>ç½‘ç»œå±‚</strong>ï¼ˆç¬¬ä¸‰å±‚ï¼‰ã€‚å®ƒçš„ä¸»è¦èŒè´£æ˜¯æ ¹æ® <strong>IP åœ°å€</strong> è½¬å‘æ•°æ®åŒ…ï¼Œå› æ­¤ï¼š</p><ul><li><strong>å°è£…</strong>ï¼šå½“è·¯ç”±å™¨è½¬å‘æ•°æ®æ—¶ï¼Œå®ƒéœ€è¦ä¿®æ”¹ç½‘ç»œå±‚çš„å¤´éƒ¨ï¼ˆH3ï¼Œå¦‚æ›´æ–° IP æ•°æ®åŒ…ä¸­çš„ TTLï¼‰ã€‚è·¯ç”±å™¨è¿˜å¯èƒ½æ·»åŠ æ–°çš„æ•°æ®é“¾è·¯å±‚å¤´éƒ¨ï¼ˆH2ï¼‰å’Œç‰©ç†å±‚å¤´éƒ¨ï¼ˆH1ï¼‰ä»¥é€‚åº”ä¸‹ä¸€è·³é“¾è·¯ã€‚</li><li><strong>è§£å°è£…</strong>ï¼šè·¯ç”±å™¨éœ€è¦æŸ¥çœ‹ç½‘ç»œå±‚å¤´éƒ¨ï¼ˆH3ï¼‰æ¥å†³å®šæ•°æ®åŒ…çš„è½¬å‘è·¯å¾„ï¼ˆå¦‚ç›®çš„ IP åœ°å€ï¼‰ã€‚è¿™éœ€è¦è§£å°è£…æ•°æ®é“¾è·¯å±‚å¤´éƒ¨ï¼ˆH2ï¼‰å’Œç‰©ç†å±‚å¤´éƒ¨ï¼ˆH1ï¼‰ä»¥è·å–ç½‘ç»œå±‚æ•°æ®ã€‚</li></ul><p><strong>æ€»ç»“</strong>ï¼šè·¯ç”±å™¨æ¶‰åŠ <strong>ç‰©ç†å±‚</strong>ã€<strong>æ•°æ®é“¾è·¯å±‚</strong> å’Œ <strong>ç½‘ç»œå±‚</strong>ï¼Œæ‰€ä»¥å®ƒçš„å°è£…å’Œè§£å°è£…è¿‡ç¨‹æœ‰ä¸‰å±‚ã€‚</p><hr><h4 id="å›¾ä¸­çš„æµç¨‹é€»è¾‘"><a href="#å›¾ä¸­çš„æµç¨‹é€»è¾‘" class="headerlink" title="å›¾ä¸­çš„æµç¨‹é€»è¾‘"></a><strong>å›¾ä¸­çš„æµç¨‹é€»è¾‘</strong></h4><ul><li>åœ¨å›¾ä¸­çš„æ•°æ®ä¼ è¾“è·¯å¾„ä¸Šï¼Œæ•°æ®å¸§ç»è¿‡äº¤æ¢æœºæ—¶ï¼Œåªå¤„ç†é“¾è·¯å±‚ä¿¡æ¯ï¼ˆH2ï¼‰ï¼Œæ‰€ä»¥æ˜¯ä¸¤é‡å°è£…&#x2F;è§£å°è£…ã€‚</li><li>æ•°æ®å¸§åˆ°è¾¾è·¯ç”±å™¨æ—¶ï¼Œéœ€è¦å¤„ç†ç½‘ç»œå±‚ä¿¡æ¯ï¼ˆH3ï¼‰ï¼Œæ‰€ä»¥æ˜¯ä¸‰é‡å°è£…&#x2F;è§£å°è£…ã€‚</li></ul><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122022539308.png" alt="image-20250122022539308"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122010839485.png" alt="image-20250122010839485"></p><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-2-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9C%AF%E8%AF%AD/image-20250122010847229.png" alt="image-20250122010847229"></p><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><ul><li><p>Internet</p></li><li><p>ä»€ä¹ˆæ˜¯åè®®</p></li><li><p>ç½‘ç»œè¾¹ç¼˜ï¼Œæ ¸å¿ƒï¼Œæ¥å…¥ç½‘ç»œ</p></li><li><p>åˆ†ç»„äº¤æ¢ vs. ç”µè·¯äº¤æ¢</p></li><li><p>Internet&#x2F;ISP ç»“æ„</p></li><li><p>æ€§èƒ½: ä¸¢å¤±ï¼Œå»¶æ—¶ï¼Œååé‡</p></li><li><p>å±‚æ¬¡æ¨¡å‹å’ŒæœåŠ¡æ¨¡å‹</p></li><li><p>å†å²</p></li></ul><h2 id="å°ç»“1"><a href="#å°ç»“1" class="headerlink" title="å°ç»“1"></a>å°ç»“1</h2><ul><li><p>ç»„æˆè§’åº¦çœ‹ ä»€ä¹ˆæ˜¯äº’è”ç½‘ </p><ul><li><p>è¾¹ç¼˜ï¼šç«¯ç³»ç»Ÿï¼ˆåŒ…æ‹¬åº”ç”¨ï¼‰+æ¥å…¥ç½‘ </p></li><li><p>æ ¸å¿ƒï¼šç½‘ç»œäº¤æ¢è®¾å¤‡+é€šä¿¡é“¾è·¯ </p></li><li><p>åè®®ï¼šå¯¹ç­‰å±‚å®ä½“é€šä¿¡è¿‡ç¨‹ä¸­éµå®ˆçš„è§„åˆ™çš„é›†åˆ </p><ul><li>è¯­æ³•ï¼Œè¯­ä¹‰ï¼Œæ—¶åº</li></ul></li></ul></li><li><p>ä¸ºäº†å®ç°å¤æ‚çš„ç½‘ç»œåŠŸèƒ½ï¼Œé‡‡ç”¨åˆ†å±‚æ–¹å¼è®¾è®¡ã€å®ç°å’Œè°ƒè¯• </p><ul><li><p>åº”ç”¨å±‚ï¼Œä¼ è¾“å±‚ï¼Œç½‘ç»œå±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç‰©ç†å±‚ </p></li><li><p>åè®®æ•°æ®å•ä½ï¼š </p><ul><li>æŠ¥æ–‡ï¼ŒæŠ¥æ–‡æ®µï¼Œåˆ†ç»„ï¼Œå¸§ï¼Œä½</li></ul></li></ul></li><li><p>ä» æœåŠ¡è§’åº¦çœ‹äº’è”ç½‘ </p><ul><li><p>é€šä¿¡æœåŠ¡åŸºç¡€è®¾æ–½ </p><ul><li>æä¾›çš„é€šä¿¡æœåŠ¡ï¼šé¢å‘è¿æ¥ æ— è¿æ¥</li></ul></li><li><p>åº”ç”¨</p></li></ul></li><li><p>åº”ç”¨ä¹‹é—´çš„äº¤äº’ </p></li><li><p>C&#x2F;Sæ¨¡å¼ </p></li><li><p>P2Pæ¨¡å¼</p></li></ul><h2 id="å°ç»“2"><a href="#å°ç»“2" class="headerlink" title="å°ç»“2"></a>å°ç»“2</h2><ul><li><p>æ•°æ®äº¤æ¢ </p><ul><li>åˆ†ç»„æ•°æ®äº¤æ¢ </li><li>çº¿è·¯äº¤æ¢</li></ul></li><li><p>æ¯”è¾ƒ çº¿è·¯äº¤æ¢å’Œåˆ†ç»„äº¤æ¢</p></li><li><p>åˆ†ç»„äº¤æ¢çš„2ç§æ–¹å¼ </p><ul><li><p>è™šç”µè·¯ </p></li><li><p>æ•°æ®æŠ¥</p></li></ul></li><li><p>æ¥å…¥ç½‘å’Œç‰©ç†åª’ä»‹ </p><ul><li><p>æ¥å…¥ç½‘æŠ€æœ¯ï¼š </p><ul><li>ä½å®…ï¼šADSLï¼Œæ‹¨å·ï¼Œcable modem </li><li>å•ä½ï¼šä»¥å¤ªç½‘ </li><li>æ— çº¿æ¥å…¥æ–¹å¼</li></ul></li><li><p>ç‰©ç†åª’ä»‹ </p><ul><li>å…‰çº¤ï¼ŒåŒè½´ç”µç¼†ï¼Œä»¥å¤ªç½‘ï¼ŒåŒç»çº¿</li></ul></li></ul></li><li><p>ISPå±‚æ¬¡ç»“æ„</p></li></ul><h2 id="å°ç»“3"><a href="#å°ç»“3" class="headerlink" title="å°ç»“3"></a>å°ç»“3</h2><ul><li><p>åˆ†ç»„äº¤æ¢ç½‘ç»œä¸­å»¶è¿Ÿå’Œä¸¢å¤±æ˜¯å¦‚ä½•å‘ç”Ÿçš„</p><ul><li>å»¶è¿Ÿçš„ç»„æˆï¼šå¤„ç†ã€ä¼ è¾“ã€ä¼ æ’­ã€æ’é˜Ÿ</li></ul></li><li><p>ç½‘ç»œçš„åˆ†å±‚ä½“ç³»ç»“æ„</p><ul><li><p>åˆ†å±‚ä½“ç³»ç»“æ„</p></li><li><p>æœåŠ¡</p></li><li><p>åè®®æ•°æ®å•å…ƒ</p></li><li><p>å°è£…ä¸è§£å°è£…</p></li></ul></li><li><p>å†å²</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸­ç§‘å¤§è®¡ç½‘(ä¸€)-åºè¨€</title>
      <link href="/2025/01/18/%E8%AE%A1%E7%BD%91-1-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E5%BA%8F%E8%A8%80/"/>
      <url>/2025/01/18/%E8%AE%A1%E7%BD%91-1-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E5%BA%8F%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<h1 id="å¾€åè¯¾ç¨‹ä¸»è¦å†…å®¹"><a href="#å¾€åè¯¾ç¨‹ä¸»è¦å†…å®¹" class="headerlink" title="å¾€åè¯¾ç¨‹ä¸»è¦å†…å®¹"></a>å¾€åè¯¾ç¨‹ä¸»è¦å†…å®¹</h1><ul><li>åº”ç”¨å±‚</li><li>ä¼ è¾“å±‚</li><li>ç½‘ç»œå±‚<ul><li>æ•°æ®å¹³é¢</li><li>æ§åˆ¶å¹³é¢</li></ul></li><li>æ•°æ®é“¾è·¯å±‚å’Œå±€åŸŸç½‘</li></ul><h1 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h1><ul><li><p>åè®®æ˜¯ä¿è¯å„è®¾å¤‡é—´å¯ä»¥äº’æ“ä½œçš„ç»Ÿä¸€æ ‡å‡†</p><ul><li>åº”ç”¨å±‚åè®®ï¼šç›´æ¥æä¾›ç»™åº”ç”¨è¿›ç¨‹ä½¿ç”¨çš„åè®®ï¼ŒDNSã€HTTP</li><li>ä¼ è¾“å±‚åè®®ï¼šè¿›ç¨‹åˆ°è¿›ç¨‹ä¹‹é—´ä½¿ç”¨ï¼ŒTCPï¼ˆé¢å‘å¯é è¿æ¥ï¼‰ï¼ŒUDPï¼ˆé¢å‘ä¸å¯é è¿æ¥ï¼‰</li><li>ç½‘ç»œå±‚åè®®ï¼šä¸»æœºåˆ°ä¸»æœºï¼ˆE2Eï¼‰ï¼Œåˆ†ä¸ºä¼ ç»Ÿåè®®ï¼ˆIPå’Œè·¯ç”±åè®®ï¼Œè·¯ç”±å™¨å°†IPæŠ¥æ–‡åˆ†ç»„ï¼Œç„¶åæŸ¥è·¯ç”±è¡¨è½¬å‘ï¼‰å’ŒSDNï¼ˆæ•°æ®å®šä¹‰ç½‘ç»œï¼Œåˆ†ä¸ºæ•°æ®å¹³é¢ï¼ˆäº¤æ¢æœºï¼‰å’Œæ§åˆ¶å¹³é¢ï¼ˆç½‘ç»œæ“ä½œç³»ç»Ÿï¼‰ï¼‰</li><li>æ•°æ®é“¾è·¯å±‚åè®®ï¼šç‚¹åˆ°ç‚¹ï¼ˆP2Pï¼‰</li><li>ç‰©ç†å±‚åè®®ï¼šæ•°å­—ä¿¡å·è½¬åŒ–ä¸ºç‰©ç†ä¿¡å·</li><li>ç¬¬0å±‚ï¼Œä»‹è´¨</li></ul><p><img src="/2025/01/18/%E8%AE%A1%E7%BD%91-1-%E4%B8%AD%E7%A7%91%E5%A4%A7%E8%AE%A1%E7%BD%91-%E5%BA%8F%E8%A8%80/mermaid-diagram-2025-01-18-132547.png" alt="mermaid-diagram-2025-01-18-132547"></p></li></ul><h1 id="ä¼ è¾“å±‚åè®®"><a href="#ä¼ è¾“å±‚åè®®" class="headerlink" title="ä¼ è¾“å±‚åè®®"></a>ä¼ è¾“å±‚åè®®</h1><ul><li><p>TCPåè®®</p></li><li><p>UDPåè®®</p></li><li><p>å¯é æ€§ï¼šTCPåè®®</p><ul><li>ä¸å‡ºé”™</li><li>ä¸ä¹±åº</li><li>ä¸é‡å¤</li><li>ä¸ä¸¢å¤±</li></ul></li><li><p>å®æ—¶æ€§ï¼šUDPåè®®</p><ul><li>å¤šåª’ä½“ç‚¹æ’­</li><li>äº‹åŠ¡æ€§</li></ul></li></ul><h1 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h1><h2 id="ä¼ ç»Ÿ"><a href="#ä¼ ç»Ÿ" class="headerlink" title="ä¼ ç»Ÿ"></a>ä¼ ç»Ÿ</h2><ul><li><p><strong>IP</strong>ï¼šæä¾›é€»è¾‘åœ°å€ï¼Œæ”¯æŒåˆ†ç»„äº¤æ¢ã€‚</p></li><li><p><strong>è·¯ç”±</strong>ï¼šå†³å®šåˆ†ç»„çš„ä¼ è¾“è·¯å¾„</p><ul><li>è·¯ç”±å™¨é€šè¿‡æŸ¥è·¯ç”±è¡¨æ¥ç¡®å®šåˆ†ç»„çš„è½¬å‘æ–¹å‘ã€‚</li></ul></li></ul><blockquote><p>è·¯ç”±å™¨å†™æ­»çš„ï¼Œæ¥äº†åˆ†ç»„æŸ¥è·¯ç”±è¡¨æ‰¾è¡¨è±¡ç„¶åè½¬å‘ã€‚</p></blockquote><h3 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h3><ul><li><strong>è·¯ç”±</strong><ul><li>è·¯ç”±åè®®ï¼ˆå¦‚ RIPã€OSPFï¼‰ï¼šäº¤æ¢è·¯ç”±ä¿¡æ¯<ul><li>è·¯ç”±ä¿¡æ¯ï¼šæˆ‘åˆ°å“ªä¸ªå­ç½‘ï¼Œæˆ‘æœ‰å¤šå°‘å»¶è¿Ÿ</li></ul></li><li>è·¯ç”±ç®—æ³•ï¼ˆå¦‚ Dijkstra ç®—æ³•ï¼‰ï¼šè®¡ç®—è·¯ç”±è¡¨<ul><li>è·¯ç”±è¡¨åŒ…å«<ul><li>IPå­ç½‘</li><li>å­ç½‘å¦‚ä½•èµ°</li></ul></li></ul></li></ul></li><li><strong>è½¬å‘</strong><ul><li>IPåè®®ç”¨è·¯ç”±è¡¨æ ¹æ®ç›®æ ‡IPå¯¹åˆ°æ¥çš„åˆ†ç»„åšè½¬å‘å¤„ç†<ul><li>è½¬å‘å¤„ç†<ul><li>æ¥æ”¶åˆ°IPåˆ†ç»„åï¼Œç¡®å®šè¯¥åˆ†ç»„çš„ä¸‹ä¸€è·³ç½‘å¡æ–¹å‘ã€‚</li></ul></li></ul></li></ul></li></ul><h2 id="è½¯ä»¶å®šä¹‰ç½‘ç»œSDN"><a href="#è½¯ä»¶å®šä¹‰ç½‘ç»œSDN" class="headerlink" title="è½¯ä»¶å®šä¹‰ç½‘ç»œSDN"></a>è½¯ä»¶å®šä¹‰ç½‘ç»œSDN</h2><p>ä¸åŒç‚¹</p><ul><li><strong>å­—æ®µç±»å‹çš„ç»†åŒ–</strong><ul><li>æµè¡¨<ul><li>åŒ…å«ç›®æ ‡IPã€æºIPã€ç›®æ ‡MACã€æºMACç­‰å¤šä¸ªå­—æ®µã€‚</li></ul></li></ul></li><li><strong>ç½‘ç»œåº”ç”¨</strong><ul><li>é€šè¿‡è¿ç®—ç”Ÿæˆå¤šç§æµæ ‡ï¼Œå¹¶ä¸‹å‘ç»™äº¤æ¢æœºã€‚</li></ul></li><li><strong>äº¤æ¢æœºæ ¹æ®æµæ ‡æ‰€åšçš„åŠ¨ä½œå¤šæ ·åŒ–</strong><ul><li>åŠ¨ä½œåŒ…æ‹¬ï¼š<ul><li>é˜»æ­¢ã€‚</li><li>ä¿®æ”¹å­—æ®µã€‚</li><li>è½¬å‘ç­‰ã€‚</li></ul></li></ul></li></ul><h3 id="æ§åˆ¶å¹³é¢ï¼šç½‘ç»œæ“ä½œç³»ç»Ÿ"><a href="#æ§åˆ¶å¹³é¢ï¼šç½‘ç»œæ“ä½œç³»ç»Ÿ" class="headerlink" title="æ§åˆ¶å¹³é¢ï¼šç½‘ç»œæ“ä½œç³»ç»Ÿ"></a>æ§åˆ¶å¹³é¢ï¼šç½‘ç»œæ“ä½œç³»ç»Ÿ</h3><ul><li><p>åŒ…å«ç½‘ç»œåº”ç”¨ã€‚</p></li><li><p>è´Ÿè´£è®¡ç®—æµæ ‡ï¼Œå¹¶å°†å…¶ä¸‹å‘åˆ°äº¤æ¢æœºã€‚</p></li></ul><h3 id="æ•°æ®å¹³é¢ï¼šäº¤æ¢æœº"><a href="#æ•°æ®å¹³é¢ï¼šäº¤æ¢æœº" class="headerlink" title="æ•°æ®å¹³é¢ï¼šäº¤æ¢æœº"></a>æ•°æ®å¹³é¢ï¼šäº¤æ¢æœº</h3><ul><li><p>é€šè¿‡å—å‘æ¥å£æ¥æ”¶æµæ ‡ã€‚</p><ul><li>å—å‘æ¥å£ï¼ˆå¦‚ OpenFlowï¼‰æ˜¯æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢çš„é€šä¿¡æ¥å£ã€‚</li><li>å®ƒä¸ä»…ç”¨æ¥â€œä¸Šè½½æµæ ‡â€ï¼Œè¿˜å¯ä»¥ä¸Šä¼ æœªåŒ¹é…åˆ†ç»„ã€æ‹“æ‰‘ä¿¡æ¯ç­‰å†…å®¹ã€‚</li></ul></li><li><p>æ ¹æ®å¤šä¸ªå­—æ®µåŒ¹é…æµæ ‡ã€‚</p></li><li><p>æŒ‰ç…§æµæ ‡å®šä¹‰çš„åŠ¨ä½œå¯¹åˆ†ç»„è¿›è¡Œå¤„ç†ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è®¡ç®—æœºç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¡ç®—æœºç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯ç«¯æ ˆä¹‹çµå…‰ä¹ç°-DrumHero</title>
      <link href="/2024/12/27/%E5%89%8D%E7%AB%AF-%E7%81%B5%E5%85%89%E4%B9%8D%E7%8E%B0-%E5%89%8D%E7%AB%AF%E7%AB%AF%E6%A0%88%E4%B9%8B%E7%81%B5%E5%85%89%E4%B9%8D%E7%8E%B0-DrumHero/"/>
      <url>/2024/12/27/%E5%89%8D%E7%AB%AF-%E7%81%B5%E5%85%89%E4%B9%8D%E7%8E%B0-%E5%89%8D%E7%AB%AF%E7%AB%AF%E6%A0%88%E4%B9%8B%E7%81%B5%E5%85%89%E4%B9%8D%E7%8E%B0-DrumHero/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰åº"><a href="#å‰åº" class="headerlink" title="å‰åº"></a>å‰åº</h1><p>åœ¨å†™<a href="https://soyaine.github.io/JavaScript30/">JavaScript30</a>çš„ç¬¬ä¸€ä¸ªé¡¹ç›®[JS Drum Kit](<a href="https://soyaine.github.io/JavaScript30/01">https://soyaine.github.io/JavaScript30/01</a> - JavaScript Drum Kit&#x2F;index-SOYAINE.html)çš„æ—¶å€™çªç„¶çµå…‰ä¹ç°ï¼Œå¦‚æœæŠŠä¸€ä¸ªæ­Œæ›²è§£ææˆé¼“ç‚¹ï¼Œç„¶åå¥—ç”¨è¿™ä¸ªé¡¹ç›®çš„éŸ³ä¹æ‰“å‡»ã€‚</p><h1 id="éš¾ç‚¹"><a href="#éš¾ç‚¹" class="headerlink" title="éš¾ç‚¹"></a>éš¾ç‚¹</h1><ul><li>å¦‚ä½•æŠŠæ­Œæ›²è§£ææˆé¼“ç‚¹</li><li>å¦‚ä½•æ ¹æ®é¼“ç‚¹å®ç°è‡ªåŠ¨æ•²æ‰“</li><li>å¦‚ä½•å®ç°ç”¨æˆ·è‡ªå®šä¹‰ä¸Šä¼ </li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> çµå…‰ä¹ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> çµå…‰ä¹ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>19-å‰ç«¯æ ˆå­¦ä¹ -MIT_Webç»ˆç¯‡-Gameå®æˆ˜</title>
      <link href="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-19-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-MIT-Web%E7%BB%88%E7%AF%87-Game%E5%AE%9E%E6%88%98/"/>
      <url>/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-19-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-MIT-Web%E7%BB%88%E7%AF%87-Game%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-19-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-MIT-Web%E7%BB%88%E7%AF%87-Game%E5%AE%9E%E6%88%98/mermaid-diagram-2024-12-25-062508.png" alt="mermaid-diagram-2024-12-25-062508"></p><p>æ‚¨æä¾›çš„ä»£ç æ˜¯ä¸€ä¸ªå¤šäººæ¸¸æˆï¼Œç©å®¶å¯ä»¥åœ¨ç”»å¸ƒä¸Šç§»åŠ¨å¹¶å®æ—¶ä¸æ¸¸æˆä¸–ç•Œäº¤äº’ã€‚ç”±äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´é«˜åº¦è§£è€¦ï¼Œæµç¨‹å¯èƒ½ä¼šè¾ƒä¸ºå¤æ‚ã€‚æˆ‘å°†ä» <strong>å®¢æˆ·ç«¯ï¼ˆè¾“å…¥ã€Socketã€Canvasï¼‰</strong> å’Œ <strong>æœåŠ¡å™¨ç«¯ï¼ˆæ¸¸æˆé€»è¾‘ã€Socketã€APIï¼‰</strong> ä¸¤ä¸ªè§’åº¦è¿›è¡Œåˆ†è§£è¯´æ˜ã€‚</p><hr><h1 id="å®¢æˆ·ç«¯æµç¨‹"><a href="#å®¢æˆ·ç«¯æµç¨‹" class="headerlink" title="å®¢æˆ·ç«¯æµç¨‹"></a>å®¢æˆ·ç«¯æµç¨‹</h1><ol><li><strong>ç”¨æˆ·è¾“å…¥ï¼ˆ<code>input.js</code>ï¼‰</strong>ï¼š<ul><li><strong><code>handleInput(e)</code></strong> ç›‘å¬æŒ‰é”®äº‹ä»¶ï¼ˆæ–¹å‘é”®ï¼‰å¹¶è°ƒç”¨ <code>client-socket.js</code> ä¸­çš„ <code>move()</code> å‡½æ•°ï¼Œå‘é€ç§»åŠ¨æ–¹å‘ï¼ˆå¦‚ <code>&quot;up&quot;</code>ã€<code>&quot;down&quot;</code>ã€<code>&quot;left&quot;</code>ã€<code>&quot;right&quot;</code>ï¼‰ã€‚</li></ul></li><li><strong>å‘é€è¾“å…¥ï¼ˆ<code>client-socket.js</code>ï¼‰</strong>ï¼š<ul><li>å½“ç©å®¶ç§»åŠ¨æ—¶ï¼Œ**<code>move()</code>** å‡½æ•°é€šè¿‡ WebSocket è¿æ¥å‘é€ <code>move</code> äº‹ä»¶ï¼ˆ<code>socket.emit(&quot;move&quot;, dir)</code>ï¼‰ã€‚</li><li><code>socket.emit()</code> å°†ç§»åŠ¨æ–¹å‘ä¼ é€’åˆ°æœåŠ¡å™¨ã€‚</li></ul></li><li><strong>æ¸¸æˆç»„ä»¶ï¼ˆ<code>Game.js</code>ï¼‰</strong>ï¼š<ul><li>æ­¤ç»„ä»¶è´Ÿè´£æ˜¾ç¤ºç”»å¸ƒå’Œæ¸¸æˆçŠ¶æ€ã€‚</li><li><strong><code>Socket.on(&quot;update&quot;, update)</code></strong> ç›‘å¬æœåŠ¡å™¨å‘é€çš„æ¸¸æˆçŠ¶æ€æ›´æ–°ï¼ˆå¦‚ç©å®¶ä½ç½®ã€é£Ÿç‰©ä½ç½®ã€è·èƒœè€…ï¼‰ã€‚</li><li><strong><code>processUpdate()</code></strong> å¤„ç†æ¥æ”¶åˆ°çš„æ›´æ–°ï¼Œé€šè¿‡ <code>canvasManager.js</code> ä¸­çš„ <strong><code>drawCanvas()</code></strong> å‡½æ•°ç»˜åˆ¶æ¸¸æˆçŠ¶æ€ï¼ˆç©å®¶ã€é£Ÿç‰©ã€è·èƒœè€…ï¼‰åˆ°ç”»å¸ƒä¸Šã€‚</li></ul></li><li><strong>ç”»å¸ƒç®¡ç†ï¼ˆ<code>canvasManager.js</code>ï¼‰</strong>ï¼š<ul><li><strong><code>drawCanvas()</code></strong> æ¸²æŸ“æ¸¸æˆçŠ¶æ€åˆ° HTML çš„ <code>&lt;canvas&gt;</code> å…ƒç´ ä¸Šï¼ŒåŒ…æ‹¬ç©å®¶ã€é£Ÿç‰©ä»¥åŠå…¶ä»–åŠ¨æ€å…ƒç´ ï¼ˆå¦‚è·èƒœè€…ï¼‰ã€‚</li><li><strong><code>drawPlayer()</code></strong> å’Œ <strong><code>drawCircle()</code></strong> ä½¿ç”¨æ¥è‡ªæœåŠ¡å™¨çš„åæ ‡ç»˜åˆ¶ç©å®¶å’Œé£Ÿç‰©ï¼Œä½¿ç”¨å„è‡ªçš„å›¾åƒæˆ–å½¢çŠ¶ã€‚</li></ul></li><li><strong>ç”¨æˆ·æ“ä½œ</strong>ï¼š<ul><li>ç©å®¶æŒ‰æ–¹å‘é”®è¿›è¡Œç§»åŠ¨ï¼Œæ¯æ¬¡ç§»åŠ¨è§¦å‘ä¸€ä¸ª <code>move</code> äº‹ä»¶å‘é€è‡³æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ›´æ–°æ¸¸æˆçŠ¶æ€åå°†æ–°çŠ¶æ€å‘é€ç»™æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</li><li>ç”»å¸ƒå®æ—¶æ›´æ–°ä»¥åæ˜ è¿™äº›å˜åŒ–ã€‚</li></ul></li></ol><hr><h1 id="æœåŠ¡å™¨ç«¯æµç¨‹"><a href="#æœåŠ¡å™¨ç«¯æµç¨‹" class="headerlink" title="æœåŠ¡å™¨ç«¯æµç¨‹"></a>æœåŠ¡å™¨ç«¯æµç¨‹</h1><ol><li><strong>Socket è¿æ¥ï¼ˆ<code>server-socket.js</code>ï¼‰</strong>ï¼š<ul><li>å½“ç”¨æˆ·è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨åˆå§‹åŒ–è¯¥ç”¨æˆ·çš„ Socketï¼Œå¹¶é€šè¿‡ <code>addUser()</code> å°†ç”¨æˆ·åŠ å…¥æ¸¸æˆçŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨ç›‘å¬ <code>move</code> äº‹ä»¶ï¼Œåœ¨æ¥æ”¶åˆ°äº‹ä»¶æ—¶è°ƒç”¨ <code>gameLogic.movePlayer()</code> æ›´æ–°ç©å®¶çš„ä½ç½®ã€‚</li></ul></li><li><strong>æ¸¸æˆé€»è¾‘ï¼ˆ<code>game-logic.js</code>ï¼‰</strong>ï¼š<ul><li>æœåŠ¡å™¨ç»´æŠ¤æ¸¸æˆçŠ¶æ€ <code>gameState</code>ï¼ŒåŒ…æ‹¬ç©å®¶ä½ç½®ã€å¤§å°ä»¥åŠé£Ÿç‰©ä½ç½®ã€‚</li><li><strong><code>movePlayer(id, dir)</code></strong> æ ¹æ®ç©å®¶çš„ç§»åŠ¨æ–¹å‘æ›´æ–°å…¶ä½ç½®ã€‚</li><li>æœåŠ¡å™¨å¤„ç†ç©å®¶äº¤äº’ï¼ˆå¦‚â€œåƒæ‰â€å…¶ä»–ç©å®¶æˆ–é£Ÿç‰©ï¼‰ã€‚</li><li><strong><code>updateGameState()</code></strong> æ¯å¸§ï¼ˆæ¯ç§’60æ¬¡ï¼‰è°ƒç”¨ï¼Œæ›´æ–°æ¸¸æˆçŠ¶æ€ã€æ£€æŸ¥èƒœåˆ©æ¡ä»¶å¹¶ç”Ÿæˆæ–°é£Ÿç‰©ã€‚</li></ul></li><li><strong>å‘å®¢æˆ·ç«¯å‘é€æ›´æ–°</strong>ï¼š<ul><li>é€šè¿‡ <code>io.emit(&quot;update&quot;, gameLogic.gameState)</code> å°†æ¸¸æˆçŠ¶æ€å‘é€ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚</li><li>è§¦å‘å®¢æˆ·ç«¯çš„ <code>socket.on(&quot;update&quot;, update)</code> å¤„ç†ç¨‹åºï¼Œé‡ç»˜æ¸¸æˆçŠ¶æ€ã€‚</li></ul></li><li><strong>ç”¨æˆ·ç®¡ç†</strong>ï¼š<ul><li>æœåŠ¡å™¨é€šè¿‡ç”¨æˆ·IDä¸ Socket ID çš„æ˜ å°„ï¼ˆ<code>userToSocketMap</code>ï¼Œ<code>socketToUserMap</code>ï¼‰ç®¡ç†ç”¨æˆ·è¿æ¥ã€‚</li><li>æ ¹æ®ç”¨æˆ·çš„è¿æ¥å’Œæ–­å¼€æƒ…å†µæ·»åŠ &#x2F;ç§»é™¤ç©å®¶ï¼Œç¡®ä¿æ¸¸æˆçŠ¶æ€ä¸å½“å‰ç©å®¶åŒ¹é…ã€‚</li></ul></li><li><strong>API è·¯ç”±ï¼ˆ<code>API.js</code>ï¼‰</strong>ï¼š<ul><li>è¿™äº›è·¯ç”±ä¸åç«¯äº¤äº’ï¼Œç”¨äºå¤„ç†ç”¨æˆ·ç™»å½•ã€åœ¨æ¸¸æˆä¸­ç”Ÿæˆç©å®¶ã€å‘é€&#x2F;æ¥æ”¶æ¶ˆæ¯ä»¥åŠè·å–æ´»è·ƒç”¨æˆ·ã€‚</li><li>ä¾‹å¦‚ï¼Œ<code>/api/spawn</code> è·¯ç”±å°†ç©å®¶åŠ å…¥æ¸¸æˆï¼Œ<code>/api/initsocket</code> è·¯ç”±ä¸ºå·²ç™»å½•ç”¨æˆ·æ³¨å†Œ Socket IDã€‚</li></ul></li></ol><hr><h1 id="æ•´ä½“æµç¨‹ï¼šä»è¾“å…¥åˆ°å±•ç¤º"><a href="#æ•´ä½“æµç¨‹ï¼šä»è¾“å…¥åˆ°å±•ç¤º" class="headerlink" title="æ•´ä½“æµç¨‹ï¼šä»è¾“å…¥åˆ°å±•ç¤º"></a>æ•´ä½“æµç¨‹ï¼šä»è¾“å…¥åˆ°å±•ç¤º</h1><ol><li><strong>ç©å®¶æ“ä½œ</strong>ï¼š<ul><li>ç©å®¶æŒ‰ä¸‹æ–¹å‘é”®ã€‚</li><li><strong><code>handleInput()</code></strong> æ•è·æŒ‰é”®å¹¶è°ƒç”¨ <code>move()</code>ã€‚</li><li><strong><code>move()</code></strong> é€šè¿‡ Socket å‘é€ <code>&quot;move&quot;</code> äº‹ä»¶ï¼Œé™„å¸¦ç§»åŠ¨æ–¹å‘ï¼ˆå¦‚ <code>&quot;up&quot;</code>ã€<code>&quot;down&quot;</code> ç­‰ï¼‰ã€‚</li></ul></li><li><strong>æœåŠ¡å™¨æ¥æ”¶ç§»åŠ¨è¯·æ±‚</strong>ï¼š<ul><li>æœåŠ¡å™¨ç›‘å¬ <code>&quot;move&quot;</code> äº‹ä»¶ã€‚</li><li><strong><code>server-socket.js</code></strong> æ¥æ”¶äº‹ä»¶å¹¶è°ƒç”¨ <strong><code>gameLogic.movePlayer()</code></strong> æ›´æ–°ç©å®¶ä½ç½®ã€‚</li></ul></li><li><strong>æ›´æ–°æ¸¸æˆçŠ¶æ€</strong>ï¼š<ul><li>æ›´æ–°ç©å®¶ä½ç½®åï¼ŒæœåŠ¡å™¨æ›´æ–°æ¸¸æˆçŠ¶æ€ï¼ˆåŒ…æ‹¬ç©å®¶ä½ç½®ã€é£Ÿç‰©åŠäº¤äº’æƒ…å†µï¼Œå¦‚â€œåƒæ‰â€ï¼‰ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡ <code>io.emit(&quot;update&quot;, gameState)</code> å°†æ›´æ–°åçš„æ¸¸æˆçŠ¶æ€å‘é€ç»™æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</li></ul></li><li><strong>å®¢æˆ·ç«¯æ¥æ”¶æ›´æ–°</strong>ï¼š<ul><li>å®¢æˆ·ç«¯é€šè¿‡ <code>socket.on(&quot;update&quot;, update)</code> ç›‘å¬ <code>&quot;update&quot;</code> äº‹ä»¶ã€‚</li><li>å®¢æˆ·ç«¯å¤„ç†æ›´æ–°å¹¶è°ƒç”¨ <code>canvasManager.js</code> ä¸­çš„ <strong><code>drawCanvas()</code></strong> å‡½æ•°é‡ç»˜æ¸¸æˆã€‚</li></ul></li><li><strong>ç”»å¸ƒæ˜¾ç¤ºæ¸¸æˆçŠ¶æ€</strong>ï¼š<ul><li>æ ¹æ®æ›´æ–°åçš„ç©å®¶ã€é£Ÿç‰©ç­‰çŠ¶æ€é‡æ–°ç»˜åˆ¶ç”»å¸ƒã€‚å¦‚æœæœ‰è·èƒœè€…ï¼Œä¹Ÿä¼šåœ¨ç”»å¸ƒä¸Šæ˜¾ç¤ºã€‚</li></ul></li></ol><hr><h1 id="å„ç»„ä»¶çš„äº¤äº’æ€»ç»“ï¼š"><a href="#å„ç»„ä»¶çš„äº¤äº’æ€»ç»“ï¼š" class="headerlink" title="å„ç»„ä»¶çš„äº¤äº’æ€»ç»“ï¼š"></a>å„ç»„ä»¶çš„äº¤äº’æ€»ç»“ï¼š</h1><ul><li><strong>å®¢æˆ·ç«¯</strong>ï¼š<ul><li><strong>è¾“å…¥å¤„ç†</strong>ï¼šæ•è·æŒ‰é”®ï¼ˆæ–¹å‘é”®ï¼‰ä»¥ç¡®å®šç©å®¶çš„ç§»åŠ¨ã€‚</li><li><strong>Socket é€šä¿¡</strong>ï¼šå‘æœåŠ¡å™¨å‘é€ç§»åŠ¨æŒ‡ä»¤å¹¶ç›‘å¬æ¸¸æˆçŠ¶æ€æ›´æ–°ã€‚</li><li><strong>ç”»å¸ƒç®¡ç†</strong>ï¼šæ ¹æ®æœåŠ¡å™¨çš„æ›´æ–°é‡ç»˜æ¸¸æˆçŠ¶æ€ã€‚</li></ul></li><li><strong>æœåŠ¡å™¨ç«¯</strong>ï¼š<ul><li><strong>Socket ç®¡ç†</strong>ï¼šæ¥æ”¶å®¢æˆ·ç«¯çš„ç§»åŠ¨æŒ‡ä»¤å¹¶æ›´æ–°æ¸¸æˆçŠ¶æ€ã€‚</li><li><strong>æ¸¸æˆé€»è¾‘</strong>ï¼šæ›´æ–°ç©å®¶ä½ç½®ï¼Œå¤„ç†äº¤äº’ï¼ˆå¦‚åƒæ‰ã€èƒœåˆ©æ¡ä»¶ï¼‰ï¼Œå¹¶å®šæœŸç”Ÿæˆæ–°é£Ÿç‰©ã€‚</li><li><strong>å¹¿æ’­æ¸¸æˆçŠ¶æ€</strong>ï¼šå°†æ›´æ–°åçš„æ¸¸æˆçŠ¶æ€å‘é€ç»™æ‰€æœ‰å®¢æˆ·ç«¯ä»¥è¿›è¡Œæ¸²æŸ“ã€‚</li></ul></li></ul><p>æ¸¸æˆé‡‡ç”¨<strong>å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹</strong>ï¼Œå®¢æˆ·ç«¯å“åº”ç”¨æˆ·è¾“å…¥å¹¶æŒç»­æ¥æ”¶æ›´æ–°ä»¥æ¸²æŸ“æ¸¸æˆä¸–ç•Œï¼Œè€ŒæœåŠ¡å™¨ç®¡ç†æ¸¸æˆé€»è¾‘ã€ç©å®¶æ“ä½œåŠçŠ¶æ€ä¸€è‡´æ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>18-å‰ç«¯æ ˆå­¦ä¹ -Serverless_with_Next.js</title>
      <link href="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/"/>
      <url>/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯serverless"><a href="#ä»€ä¹ˆæ˜¯serverless" class="headerlink" title="ä»€ä¹ˆæ˜¯serverless"></a>ä»€ä¹ˆæ˜¯serverless</h1><ul><li>â€œæ— æœåŠ¡å™¨è®¡ç®—â€ï¼ˆServerless computingï¼‰</li><li>â€œæ— æœåŠ¡å™¨å‡½æ•°â€ï¼ˆServerless functionsï¼‰</li><li>â€œæ— æœåŠ¡å™¨æ¶æ„â€ï¼ˆServerless architectureï¼‰</li></ul><p>é€šå¸¸åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ä»£ç è¢«å†™æˆå‡½æ•° â†’ è¿™äº›å‡½æ•°ä¼šè¢«æ‰“åŒ…ï¼Œå¹¶ç”±ç‰¹å®šçš„åŠ¨ä½œâ€œè§¦å‘â€ã€‚</p><p>ä¼ ç»Ÿä¸Šéœ€è¦è¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šçš„ä»£ç ï¼Œé€šè¿‡æ— æœåŠ¡å™¨æ¶æ„è¢«ç®€åŒ–æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„å‡½æ•°ã€‚è¿™äº›å‡½æ•°è¢«éƒ¨ç½²åˆ°æ— æœåŠ¡å™¨å¹³å°ï¼ˆå¦‚ AWS Lambdaã€Vercel ç­‰ï¼‰ï¼Œå¹¶ä¸”ä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†æœåŠ¡å™¨ã€‚è¿™äº›å‡½æ•°åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ“ä½œï¼ˆå¦‚ API è¯·æ±‚ã€æ–‡ä»¶ä¸Šä¼ ã€æ•°æ®åº“æ›´æ”¹ï¼‰å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘å¹¶æ‰§è¡Œã€‚</p><p>ç®€å•æ¥è¯´ï¼š</p><ul><li><strong>å†™æˆå‡½æ•°</strong>ï¼šå°†æœåŠ¡å™¨ä¸Šçš„ä»»åŠ¡æŠ½è±¡æˆå°çš„å‡½æ•°ã€‚</li><li><strong>æ‰“åŒ…å’Œè§¦å‘</strong>ï¼šè¿™äº›å‡½æ•°è¢«æ‰˜ç®¡åœ¨äº‘ç«¯ï¼Œåœ¨éœ€è¦æ—¶æŒ‰éœ€è¿è¡Œï¼Œè€Œä¸æ˜¯ä¸€ç›´è¿è¡Œï¼ŒèŠ‚çœèµ„æºå’Œç®¡ç†æˆæœ¬ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå½“æœ‰äººè®¿é—®ä½ çš„ç½‘ç«™æ—¶ï¼Œå¯ä»¥è§¦å‘ä¸€ä¸ªæ— æœåŠ¡å™¨å‡½æ•°æ¥ç”Ÿæˆé¡µé¢å†…å®¹å¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯Next-js"><a href="#ä»€ä¹ˆæ˜¯Next-js" class="headerlink" title="ä»€ä¹ˆæ˜¯Next.js"></a>ä»€ä¹ˆæ˜¯Next.js</h1><p><strong>Next.js</strong> æ˜¯ä¸€ä¸ªåŸºäº <strong>React</strong> çš„ç°ä»£å‰ç«¯æ¡†æ¶ï¼Œæ—¨åœ¨ç®€åŒ– React åº”ç”¨çš„å¼€å‘ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€ç”Ÿæˆï¼ˆSSGï¼‰å’Œ API è·¯ç”±ç­‰åŠŸèƒ½çš„å®ç°ã€‚å®ƒåœ¨ React çš„åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›å¼€ç®±å³ç”¨çš„åŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…æ›´é«˜æ•ˆåœ°æ„å»ºç°ä»£ Web åº”ç”¨ã€‚</p><h2 id="Next-js-ä¸-React-çš„ä¸»è¦åŒºåˆ«"><a href="#Next-js-ä¸-React-çš„ä¸»è¦åŒºåˆ«" class="headerlink" title="Next.js ä¸ React çš„ä¸»è¦åŒºåˆ«"></a><strong>Next.js ä¸ React çš„ä¸»è¦åŒºåˆ«</strong></h2><ol><li><strong>ç”¨é€”å’ŒåŠŸèƒ½</strong><ul><li><strong>React</strong>ï¼šReact æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œä¸“æ³¨äºæ„å»ºç”¨æˆ·ç•Œé¢ï¼Œç‰¹åˆ«æ˜¯å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰ã€‚å®ƒä¸»è¦å…³æ³¨ç»„ä»¶çš„å£°æ˜å¼æ„å»ºå’Œ UI çš„æ›´æ–°ï¼Œè€Œå¯¹äºé¡µé¢è·¯ç”±ã€æ•°æ®è·å–ã€æœåŠ¡å™¨ç«¯æ¸²æŸ“ç­‰åŠŸèƒ½åˆ™æ²¡æœ‰ç›´æ¥çš„æ”¯æŒã€‚</li><li><strong>Next.js</strong>ï¼šNext.js æ˜¯ä¸€ä¸ªåŸºäº React çš„æ¡†æ¶ï¼Œæä¾›äº†æ›´å¤šçš„åŠŸèƒ½å’Œå¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€é™æ€é¡µé¢ç”Ÿæˆï¼ˆSSGï¼‰ã€API è·¯ç”±ç­‰ã€‚Next.js æ—¨åœ¨ç®€åŒ– React åº”ç”¨çš„æ„å»ºè¿‡ç¨‹ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ›´æ–¹ä¾¿åœ°æ„å»º SEO å‹å¥½ã€æ€§èƒ½ä¼˜åŒ–ã€å¯æ‰©å±•çš„åº”ç”¨ã€‚</li></ul></li><li><strong>æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR) å’Œé™æ€ç”Ÿæˆ (SSG)</strong><ul><li><strong>React</strong>ï¼šReact é»˜è®¤æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ã€‚å½“åº”ç”¨åŠ è½½æ—¶ï¼Œæµè§ˆå™¨ä¼šä¸‹è½½ JavaScript å¹¶åœ¨å®¢æˆ·ç«¯æ¸²æŸ“é¡µé¢ã€‚è¿™å¯¹äºå•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰å¾ˆæœ‰æ•ˆï¼Œä½†ä¸é€‚åˆéœ€è¦ SEO æˆ–é¦–æ¬¡åŠ è½½æ€§èƒ½ä¼˜åŒ–çš„åœºæ™¯ã€‚</li><li><strong>Next.js</strong>ï¼šNext.js æ”¯æŒ <strong>æœåŠ¡å™¨ç«¯æ¸²æŸ“ (SSR)</strong> å’Œ **é™æ€ç”Ÿæˆ (SSG)**ï¼Œè¿™æ„å‘³ç€é¡µé¢å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯é¢„æ¸²æŸ“å¹¶å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œæˆ–è€…åœ¨æ„å»ºæ—¶å°±ç”Ÿæˆé™æ€é¡µé¢ï¼Œè¿™å¯¹ SEO å’Œæ€§èƒ½éå¸¸æœ‰åˆ©ã€‚</li></ul></li><li><strong>æ–‡ä»¶è·¯ç”±ç³»ç»Ÿ</strong><ul><li><strong>React</strong>ï¼šReact æœ¬èº«ä¸æä¾›è·¯ç”±åŠŸèƒ½ï¼Œé€šå¸¸éœ€è¦ä¸å…¶ä»–è·¯ç”±åº“ï¼ˆå¦‚ <code>react-router</code>ï¼‰ä¸€èµ·ä½¿ç”¨æ¥ç®¡ç†é¡µé¢é—´çš„å¯¼èˆªã€‚</li><li><strong>Next.js</strong>ï¼šNext.js è‡ªå¸¦ä¸€ä¸ªåŸºäºæ–‡ä»¶ç³»ç»Ÿçš„è·¯ç”±ç³»ç»Ÿã€‚ä½ åªéœ€åœ¨ <code>pages</code> ç›®å½•ä¸‹åˆ›å»º <code>.js</code> æ–‡ä»¶ï¼ŒNext.js å°±ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆå¯¹åº”çš„è·¯ç”±ã€‚ä¾‹å¦‚ï¼Œ<code>pages/index.js</code> å°±æ˜¯æ ¹è·¯ç”± <code>/</code>ï¼Œ<code>pages/about.js</code> å¯¹åº” <code>/about</code>ã€‚</li></ul></li><li><strong>API è·¯ç”±</strong><ul><li><strong>React</strong>ï¼šReact åªä¸“æ³¨äºå‰ç«¯ï¼Œä¸æä¾›åç«¯ API çš„æ”¯æŒã€‚å¦‚æœä½ éœ€è¦åœ¨ React åº”ç”¨ä¸­ä½¿ç”¨åç«¯ APIï¼Œä½ é€šå¸¸éœ€è¦è‡ªå·±è®¾ç½®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ã€‚</li><li><strong>Next.js</strong>ï¼šNext.js å†…å»ºæ”¯æŒ <strong>API è·¯ç”±</strong>ï¼Œä½ å¯ä»¥åœ¨ <code>pages/api</code> ç›®å½•ä¸‹åˆ›å»ºæœåŠ¡å™¨ç«¯çš„ API è·¯ç”±æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨å¤„ç†ä¸º API æ¥å£ã€‚ä¾‹å¦‚ï¼Œ<code>pages/api/hello.js</code> å°±å¯ä»¥å®šä¹‰ä¸€ä¸ª API è·¯ç”±ã€‚</li></ul></li><li><strong>æ„å»ºå’Œä¼˜åŒ–</strong><ul><li><strong>React</strong>ï¼šReact æœ¬èº«å¹¶ä¸æä¾›æ„å»ºå’Œä¼˜åŒ–å·¥å…·ï¼Œä½†ä½ å¯ä»¥ç»“åˆå·¥å…·å¦‚ Webpackã€Babelã€Parcel ç­‰æ¥æ„å»ºåº”ç”¨ã€‚</li><li><strong>Next.js</strong>ï¼šNext.js æä¾›äº†å†…ç½®çš„æ„å»ºå·¥å…·ï¼ˆå¦‚ Webpack å’Œ Babel é…ç½®ï¼‰ï¼Œå¹¶ä¸”å®ƒä¼šè‡ªåŠ¨ä¼˜åŒ–ä½ çš„åº”ç”¨ã€‚æ¯”å¦‚ï¼Œè‡ªåŠ¨æ‹†åˆ†ä»£ç ã€æ‡’åŠ è½½é¡µé¢ã€æ”¯æŒä»£ç åˆ†å‰²ç­‰åŠŸèƒ½ã€‚</li></ul></li><li><strong>å¢é‡é™æ€ç”Ÿæˆï¼ˆISRï¼‰</strong><ul><li><strong>React</strong>ï¼šReact æ²¡æœ‰ç›´æ¥çš„æ”¯æŒå¢é‡é™æ€ç”Ÿæˆï¼ˆISRï¼‰ã€‚</li><li><strong>Next.js</strong>ï¼šNext.js æä¾› <strong>å¢é‡é™æ€ç”Ÿæˆï¼ˆISRï¼‰</strong>ï¼Œå®ƒå…è®¸ä½ åœ¨è¿è¡Œæ—¶æ›´æ–°é™æ€é¡µé¢ï¼Œè€Œæ— éœ€é‡æ–°æ„å»ºæ•´ä¸ªç«™ç‚¹ã€‚è¿™æ ·å¯ä»¥é«˜æ•ˆåœ°æ›´æ–°å†…å®¹å¹¶ä¿è¯æ€§èƒ½ã€‚</li></ul></li></ol><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ul><li><strong>React</strong> åªæ˜¯ä¸€ä¸ªæ„å»º UI çš„åº“ï¼Œä¸“æ³¨äºå‰ç«¯å¼€å‘ï¼Œä¸»è¦ç”¨äºæ„å»ºå®¢æˆ·ç«¯åº”ç”¨ã€‚</li><li><strong>Next.js</strong> æ˜¯åŸºäº React çš„æ¡†æ¶ï¼Œæ‰©å±•äº† React çš„åŠŸèƒ½ï¼Œæä¾›äº† SSRã€SSGã€API è·¯ç”±ã€æ–‡ä»¶è·¯ç”±ç­‰ç‰¹æ€§ï¼Œä½¿å¾—å¼€å‘æ›´åŠ ä¾¿æ·ï¼Œå°¤å…¶æ˜¯æ„å»º SEO å‹å¥½ã€æ€§èƒ½ä¼˜åŒ–çš„ç½‘ç«™å’Œåº”ç”¨ã€‚</li></ul><p>å¦‚æœä½ éœ€è¦æ„å»ºä¸€ä¸ªå…·å¤‡å¤æ‚åŠŸèƒ½ã€ä¼˜åŒ–æ€§èƒ½å’Œ SEO çš„ React åº”ç”¨ï¼ŒNext.js æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</p><h1 id="ä»€ä¹ˆæ—¶å€™ç”¨Next-js"><a href="#ä»€ä¹ˆæ—¶å€™ç”¨Next-js" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ç”¨Next.js"></a>ä»€ä¹ˆæ—¶å€™ç”¨Next.js</h1><p>Next.js æ˜¯ä¸€ä¸ªéå¸¸é€‚åˆå„ç§å…¨æ ˆåº”ç”¨çš„é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼š</p><ul><li>ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’</li><li>ä½¿ç”¨æŸç§è®¤è¯æœºåˆ¶</li><li>æ‹¥æœ‰åŠ¨æ€æ•°æ®ï¼ˆæ ¹æ®éœ€æ±‚å˜åŒ–ï¼‰</li><li>æ‹¥æœ‰ API å±‚ï¼ˆå¯¹å†…æˆ–å¯¹å¤–ï¼‰</li></ul><h1 id="æ¸²æŸ“"><a href="#æ¸²æŸ“" class="headerlink" title="æ¸²æŸ“"></a>æ¸²æŸ“</h1><p>Next.js æ”¯æŒå®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰ï¼Œå¹¶å¼•å…¥äº† React æœ¬èº«ä¸å…·å¤‡çš„ä¸€ç§æ¸²æŸ“å½¢å¼â€”â€”æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚ç›®å‰ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ React å’Œ Express æœåŠ¡æ„å»º Catbookï¼Œè¿™æ˜¯ä¸€ç§å®¢æˆ·ç«¯æ¸²æŸ“ï¼ˆCSRï¼‰çš„æ–¹æ³•ã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è€ƒè™‘ä½¿ç”¨ Next.jsï¼Œè€Œä¸æ˜¯ç»§ç»­ä½¿ç”¨ React å’Œ Express æœåŠ¡å‘¢ï¼Ÿ</p><ul><li><strong>Next.js æŠ½è±¡äº†æ„å»ºæœåŠ¡å™¨çš„è¿‡ç¨‹</strong> â†’ åªéœ€è¦ç¼–å†™å‡½æ•°å³å¯ã€‚</li><li><strong>æ— éœ€è‡ªè¡Œç¼–å†™ Express æœåŠ¡ï¼</strong></li><li><strong>æ•æ„Ÿæ•°æ®é€šè¿‡æœåŠ¡å™¨å±‚å¾—åˆ°ä¿æŠ¤ã€‚</strong></li><li><strong>Next.js ä¼šåœ¨æœåŠ¡å™¨ä¸Šé¢„æ¸²æŸ“ HTML æ–‡æ¡£ã€‚</strong></li><li><strong>ç¡®ä¿å®¢æˆ·ç«¯ä¹‹é—´çš„ä¸€è‡´æ€§å’Œæ­£ç¡®æ€§ã€‚</strong></li></ul><h2 id="CSR-React-and-Express"><a href="#CSR-React-and-Express" class="headerlink" title="CSR(React and Express)"></a>CSR(React and Express)</h2><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053048786.png" alt="image-20241225053048786"></p><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053059959.png" alt="image-20241225053059959"></p><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053127300.png" alt="image-20241225053127300"></p><h2 id="SSR"><a href="#SSR" class="headerlink" title="SSR"></a>SSR</h2><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053149108.png" alt="image-20241225053149108"></p><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053201227.png" alt="image-20241225053201227"></p><p>ä¸ºä»€ä¹ˆè¿™å¾ˆæœ‰ä¼˜åŠ¿ï¼Ÿ</p><ul><li><strong>è®©æœåŠ¡å™¨è´Ÿè´£æ‰“åŒ…å’Œæ„å»ºæˆ‘ä»¬çš„æ–‡æ¡£</strong> â†’ æœåŠ¡å™¨æ›´æ¥è¿‘æ•°æ®ï¼Œä¸”æ›´åŠ ä¸€è‡´å¯é ã€‚</li><li><strong>å®¢æˆ·ç«¯çš„æ€§èƒ½å› ç”¨æˆ·è€Œå¼‚</strong> â†’ ä¸å¯é¢„æµ‹ï¼Œå¯èƒ½ä¼šå˜æ…¢ã€‚</li><li><strong>å½“æ„å»ºæ¶‰åŠæ•æ„Ÿæ•°æ®çš„å¤æ‚åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿¡ä»»å®¢æˆ·ç«¯ã€‚</strong></li></ul><h1 id="æˆ‘ä»¬åœ¨-Next-js-ä¸­ä¼šä½¿ç”¨ä»€ä¹ˆï¼Ÿ"><a href="#æˆ‘ä»¬åœ¨-Next-js-ä¸­ä¼šä½¿ç”¨ä»€ä¹ˆï¼Ÿ" class="headerlink" title="æˆ‘ä»¬åœ¨ Next.js ä¸­ä¼šä½¿ç”¨ä»€ä¹ˆï¼Ÿ"></a>æˆ‘ä»¬åœ¨ Next.js ä¸­ä¼šä½¿ç”¨ä»€ä¹ˆï¼Ÿ</h1><p> Next.js æä¾›äº†ä¸€ç§ç»“åˆäº† CSR å’Œ SSR çš„â€œæ··åˆâ€æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>â€œReact Server Componentsâ€ï¼ˆRSCï¼‰</strong>ã€‚</p><h2 id="å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>å…·ä½“æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>æˆ‘ä»¬å°†ä»£ç åˆ†ä¸º <strong>å®¢æˆ·ç«¯ç»„ä»¶</strong> å’Œ <strong>æœåŠ¡å™¨ç«¯ç»„ä»¶</strong>ã€‚</p><h2 id="ä¸-CSR-æˆ–-SSR-æœ‰ä½•ä¸åŒï¼Ÿ"><a href="#ä¸-CSR-æˆ–-SSR-æœ‰ä½•ä¸åŒï¼Ÿ" class="headerlink" title="ä¸ CSR æˆ– SSR æœ‰ä½•ä¸åŒï¼Ÿ"></a>ä¸ CSR æˆ– SSR æœ‰ä½•ä¸åŒï¼Ÿ</h2><ul><li><strong>RSC å…è®¸å®¢æˆ·ç«¯é¦–å…ˆæ¸²æŸ“å®¢æˆ·ç«¯ç»„ä»¶</strong>ï¼ŒåŒæ—¶ç­‰å¾…æœåŠ¡å™¨æ¸²æŸ“æœåŠ¡å™¨ç«¯ç»„ä»¶ã€‚</li><li><strong>è€Œä¸æ˜¯ç­‰å¾…æœåŠ¡å™¨æ¸²æŸ“æ‰€æœ‰å†…å®¹</strong>ï¼Œæˆ‘ä»¬åªåœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“å¿…è¦éƒ¨åˆ†ï¼Œå…¶ä½™éƒ¨åˆ†äº¤ç”±å®¢æˆ·ç«¯å¤„ç†ã€‚</li></ul><hr><h1 id="React-Server-Components"><a href="#React-Server-Components" class="headerlink" title="React Server Components"></a>React Server Components</h1><p>å®¢æˆ·ç«¯ç»„ä»¶ä¼šå‘é€åˆ°å®¢æˆ·ç«¯ï¼Œè€ŒæœåŠ¡å™¨ç«¯ç»„ä»¶ä¼šåœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“åå†å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p><ul><li><strong>è¿™ç§æ··åˆæ–¹æ³•æä¾›äº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ</strong> â†’ é€æ­¥å‘ˆç°ï¼ˆpiece-by-pieceï¼‰è€Œä¸æ˜¯ä¸€æ¬¡æ€§å‘ˆç°ï¼ˆall-inï¼‰ã€‚</li></ul><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053502894.png" alt="image-20241225053502894"></p><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053514010.png" alt="image-20241225053514010"></p><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225053534795.png" alt="image-20241225053534795"></p><h1 id="Next-jså’Œserverlessçš„å…³ç³»"><a href="#Next-jså’Œserverlessçš„å…³ç³»" class="headerlink" title="Next.jså’Œserverlessçš„å…³ç³»"></a>Next.jså’Œserverlessçš„å…³ç³»</h1><ol><li><strong>æ— æœåŠ¡å™¨æ¶æ„ï¼ˆServerlessï¼‰ä¸ Next.js çš„ç»“åˆ</strong>ï¼š<ul><li><strong>Next.js</strong> æœ¬èº«æ”¯æŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰å’Œé™æ€ç”Ÿæˆï¼ˆSSGï¼‰ï¼Œè€Œ <strong>æ— æœåŠ¡å™¨æ¶æ„</strong>ï¼ˆå¦‚ AWS Lambda æˆ– Vercelï¼‰å¯ä»¥ç”¨æ¥æ‰˜ç®¡å’Œè¿è¡Œè¿™äº› Next.js åº”ç”¨çš„åŠŸèƒ½ã€‚</li><li>é€šè¿‡å°† Next.js ä¸æ— æœåŠ¡å™¨æ¶æ„ç»“åˆï¼Œå¯ä»¥è®©ä½ åœ¨æ²¡æœ‰ç®¡ç†ä¼ ç»ŸæœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨æ ¹æ®éœ€æ±‚æ‰©å±•å’Œå¤„ç†è¯·æ±‚ã€‚</li></ul></li><li><strong>Next.js åœ¨æ— æœåŠ¡å™¨ç¯å¢ƒä¸­çš„éƒ¨ç½²</strong>ï¼š<ul><li>åœ¨æ— æœåŠ¡å™¨æ¶æ„ä¸‹ï¼ŒNext.js å¯ä»¥å°†é¡µé¢æˆ– API è·¯ç”±éƒ¨ç½²ä¸ºæ— çŠ¶æ€çš„å‡½æ•°ã€‚è¿™æ„å‘³ç€ï¼Œå½“ç”¨æˆ·è®¿é—®é¡µé¢æ—¶ï¼ŒNext.js ä¼šæ ¹æ®è¯·æ±‚åŠ¨æ€ç”Ÿæˆé¡µé¢å¹¶è¿”å›ï¼ŒåŒæ—¶å¯ä»¥è‡ªåŠ¨æ‰©å±•æ¥å¤„ç†æµé‡çš„æ³¢åŠ¨ã€‚</li><li>Next.js çš„ <strong>API è·¯ç”±</strong>ï¼ˆAPI Routesï¼‰éå¸¸é€‚åˆä¸æ— æœåŠ¡å™¨å¹³å°ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„ HTTP è¯·æ±‚è§¦å‘æœåŠ¡å™¨ç«¯å‡½æ•°ï¼Œè€Œæ— éœ€ä¼ ç»Ÿçš„æœåŠ¡å™¨é…ç½®ã€‚</li></ul></li><li><strong>æ— æœåŠ¡å™¨å‡½æ•°ä¸ Next.js</strong>ï¼š<ul><li><strong>æ— æœåŠ¡å™¨å‡½æ•°</strong>ï¼ˆå¦‚ AWS Lambdaã€Vercel æˆ– Netlifyï¼‰å¯ä»¥ç”¨æ¥å¤„ç† Next.js ä¸­çš„æŸäº›åŠ¨æ€åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå½“ç”¨æˆ·è¯·æ±‚éœ€è¦æ•°æ®åº“æŸ¥è¯¢æˆ–å…¶ä»–å¤æ‚å¤„ç†çš„é¡µé¢æ—¶ï¼ŒNext.js ä¼šå°†è¿™äº›è¯·æ±‚å§”æ‰˜ç»™æ— æœåŠ¡å™¨å‡½æ•°å¤„ç†ã€‚</li><li>è¿™ç§æ–¹å¼å‡å°‘äº†æœåŠ¡å™¨ç»´æŠ¤çš„éœ€æ±‚ï¼Œç®€åŒ–äº†åŸºç¡€è®¾æ–½çš„ç®¡ç†ã€‚</li></ul></li></ol><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Next.js å’Œæ— æœåŠ¡å™¨æ¶æ„çš„ç»“åˆè®©å¼€å‘è€…èƒ½å¤Ÿæ„å»ºé«˜æ•ˆã€å¯æ‰©å±•çš„åº”ç”¨ï¼Œè€Œæ— éœ€æ‹…å¿ƒä¼ ç»ŸæœåŠ¡å™¨çš„ç»´æŠ¤ã€‚æ— æœåŠ¡å™¨æ¶æ„ä¸º Next.js æä¾›äº†è‡ªåŠ¨æ‰©å±•ã€æŒ‰éœ€æ‰§è¡Œå’Œé«˜æ•ˆçš„æˆæœ¬æ§åˆ¶ï¼Œä½¿å¾—å…¨æ ˆå¼€å‘æ›´ç®€ä¾¿ä¸”é«˜æ•ˆã€‚</p><h1 id="å¦‚ä½•æ„å»ºä¸€ä¸ªNext-jsåº”ç”¨"><a href="#å¦‚ä½•æ„å»ºä¸€ä¸ªNext-jsåº”ç”¨" class="headerlink" title="å¦‚ä½•æ„å»ºä¸€ä¸ªNext.jsåº”ç”¨"></a>å¦‚ä½•æ„å»ºä¸€ä¸ªNext.jsåº”ç”¨</h1><h2 id="ä½¿ç”¨ç»ˆç«¯åˆ›å»ºéª¨æ¶"><a href="#ä½¿ç”¨ç»ˆç«¯åˆ›å»ºéª¨æ¶" class="headerlink" title="ä½¿ç”¨ç»ˆç«¯åˆ›å»ºéª¨æ¶"></a>ä½¿ç”¨ç»ˆç«¯åˆ›å»ºéª¨æ¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-next-app@latest</span><br></pre></td></tr></table></figure><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225061324864.png" alt="image-20241225061324864"></p><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p><img src="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-18-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Serverless-with-Next-js/image-20241225061420702.png" alt="image-20241225061420702"></p><p>åªéœ€è¦å…³æ³¨<code>src</code>æ–‡ä»¶å¤¹å’Œ<code>package.json</code>æˆ–<code>package-lock.json</code>å³å¯</p><h2 id="å®æ—¶æ›´æ”¹"><a href="#å®æ—¶æ›´æ”¹" class="headerlink" title="å®æ—¶æ›´æ”¹"></a>å®æ—¶æ›´æ”¹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure><p>Enter <a href="http://localhost:3000/">http://localhost:3000/</a> in your browser to view the Next.js boilerplate</p><h2 id="ç®€å•åº”ç”¨"><a href="#ç®€å•åº”ç”¨" class="headerlink" title="ç®€å•åº”ç”¨"></a>ç®€å•åº”ç”¨</h2><ul><li><p><code>page.js</code></p><ul><li><pre><code class="js">import StatementTable from &quot;@/components/StatementTable&quot;;export default function Home() &#123;  return (    &lt;main className=&quot;flex min-h-screen flex-col items-center justify-between p-24&quot;&gt;      &lt;section&gt;        &lt;h1 className=&quot;font-bold text-4xl&quot;&gt;Bank Statement Viewer&lt;/h1&gt;        &lt;StatementTable /&gt;      &lt;/section&gt;    &lt;/main&gt;  );&#125;<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `StatementTable.js`</span><br><span class="line"></span><br><span class="line">  - ```js</span><br><span class="line">    import StatementItem from &quot;./StatementItem&quot;;</span><br><span class="line">    async function getStatementHistory() &#123;</span><br><span class="line">      const response = await fetch(&quot;https://api.sampleapis.com/fakebank/accounts&quot;);</span><br><span class="line">      const data = await response.json();</span><br><span class="line">      return data;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    export default async function StatementTable() &#123;</span><br><span class="line">      const statementHistory = await getStatementHistory();</span><br><span class="line">      return (</span><br><span class="line">        &lt;section className=&quot;w-full mt-4 p-4 bg-gray-900&quot;&gt;</span><br><span class="line">          &#123;statementHistory.map((item, key) =&gt; (</span><br><span class="line">            &lt;StatementItem data=&#123;item&#125; key=&#123;key&#125; /&gt;</span><br><span class="line">          ))&#125;</span><br><span class="line">        &lt;/section&gt;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br></pre></td></tr></table></figure></code></pre></li></ul></li><li><p><code>StatementItem</code></p><ul><li><pre><code class="js">&quot;use client&quot;;import &#123; useState &#125; from &quot;react&quot;;export default function StatementItem(&#123; data &#125;) &#123;  console.log(data);  const [category, setCategory] = useState(data.category);  const desc = data.description;  const date = data.transactionDate;  return (    &lt;div className=&quot;p-2 bg-black&quot;&gt;      &lt;input        type=&quot;text&quot;        value=&#123;category&#125;        onChange=&#123;(e) =&gt; setCategory(e.target.value)&#125;        className=&quot;text-xl font-bold bg-transparent&quot;      /&gt;      &lt;p&gt;&#123;desc&#125;&lt;/p&gt;      &lt;span&gt;&#123;date&#125;&lt;/span&gt;    &lt;/div&gt;  );&#125;</code></pre></li></ul></li></ul><h2 id="use-client"><a href="#use-client" class="headerlink" title="use client"></a><code>use client</code></h2><p><code>&quot;use client&quot;</code> åœ¨è¿™ä¸ªä»£ç ä¸­æœ‰å½±å“ï¼Œå®ƒæ˜¯ Next.js ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºæŒ‡ç¤ºè¯¥ç»„ä»¶åº”è¯¥åœ¨å®¢æˆ·ç«¯ï¼ˆè€Œä¸æ˜¯æœåŠ¡å™¨ç«¯ï¼‰æ‰§è¡Œã€‚è¿™ä¸ªå£°æ˜é€šå¸¸ç”¨åœ¨ Next.js 13 å’Œä¹‹åçš„ç‰ˆæœ¬ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ <strong>React Server Components</strong> æ—¶ï¼Œç›®çš„æ˜¯ç¡®ä¿æŸä¸ªç»„ä»¶åœ¨å®¢æˆ·ç«¯æ¸²æŸ“ã€‚</p><h3 id="å½±å“ï¼š"><a href="#å½±å“ï¼š" class="headerlink" title="å½±å“ï¼š"></a>å½±å“ï¼š</h3><ol><li><strong>å®¢æˆ·ç«¯æ¸²æŸ“</strong>ï¼š<br><code>use client</code> å‘Šè¯‰ Next.js è¿™ä¸ªç»„ä»¶å¿…é¡»åœ¨å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨ä¸Šæ¸²æŸ“ã€‚å¦‚æœä½ æ²¡æœ‰æ˜ç¡®å£°æ˜ <code>use client</code>ï¼ŒNext.js å¯èƒ½ä¼šé»˜è®¤å°†å…¶è§†ä¸ºæœåŠ¡å™¨ç«¯æ¸²æŸ“ç»„ä»¶ï¼Œå°¤å…¶æ˜¯åœ¨æ··åˆä½¿ç”¨ SSR å’Œ CSR çš„é¡¹ç›®ä¸­ã€‚å¯¹äºåŒ…å« <code>useState</code>ã€<code>useEffect</code> ç­‰å®¢æˆ·ç«¯ç‰¹å®šä»£ç çš„ç»„ä»¶ï¼Œå¿…é¡»æ˜¾å¼åœ°å£°æ˜ <code>&quot;use client&quot;</code>ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ¸²æŸ“é”™è¯¯æˆ–ä¸æŒ‰é¢„æœŸå·¥ä½œã€‚</li><li><strong>React Hooks ä½¿ç”¨</strong>ï¼š<br>ç”±äºç»„ä»¶ä¸­ä½¿ç”¨äº† <code>useState</code> å’Œå…¶ä»– React Hooksï¼Œ<code>use client</code> æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºè¿™äº› Hooks åªèƒ½åœ¨å®¢æˆ·ç«¯æ‰§è¡Œã€‚React Hooks æœ¬è´¨ä¸Šæ˜¯åœ¨å®¢æˆ·ç«¯å¤„ç†çŠ¶æ€å’Œå‰¯ä½œç”¨çš„ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>use client</code> ç¡®ä¿è¯¥ç»„ä»¶åœ¨å®¢æˆ·ç«¯è¿è¡Œã€‚</li></ol><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p><code>&quot;use client&quot;</code> ç¡®ä¿ <code>StatementItem</code> ç»„ä»¶åœ¨å®¢æˆ·ç«¯æ¸²æŸ“å¹¶èƒ½å¤Ÿæ­£å¸¸ä½¿ç”¨ React çš„å®¢æˆ·ç«¯åŠŸèƒ½ï¼ˆå¦‚ <code>useState</code>ï¼‰ï¼Œè€Œä¸æ˜¯åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œé¢„æ¸²æŸ“ã€‚æ²¡æœ‰è¿™ä¸ªå£°æ˜ï¼Œè¯¥ç»„ä»¶å¯èƒ½ä¼šåœ¨æœåŠ¡å™¨ç«¯å¼•å‘é”™è¯¯ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºå®ƒä¾èµ–äºå®¢æˆ·ç«¯çŠ¶æ€å’Œäº¤äº’ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>17-å‰ç«¯æ ˆå­¦ä¹ -Reactçš„çŠ¶æ€ç®¡ç†</title>
      <link href="/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-17-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/"/>
      <url>/2024/12/25/%E5%89%8D%E7%AB%AF-MIT-Web-17-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React%E7%9A%84%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†è®©è¿™ç¯‡åšå®¢æ›´åŠ è¯¦ç»†å’Œé€šä¿—æ˜“æ‡‚ï¼Œæˆ‘å°†ä¸ºæ¯ä¸€éƒ¨åˆ†æä¾›æ›´å¤šçš„è§£é‡Šå’Œä¸€äº›å®é™…åº”ç”¨çš„åœºæ™¯ï¼Œå¹¶å¯¹ä»£ç ä¸­çš„ä¸€äº›é‡è¦æ¦‚å¿µè¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚è¿™é‡Œæ˜¯ä¿®æ”¹åçš„ç‰ˆæœ¬ï¼š</p><h2 id="çŠ¶æ€ç®¡ç†æ–¹æ³•"><a href="#çŠ¶æ€ç®¡ç†æ–¹æ³•" class="headerlink" title="çŠ¶æ€ç®¡ç†æ–¹æ³•"></a>çŠ¶æ€ç®¡ç†æ–¹æ³•</h2><h3 id="1-useState"><a href="#1-useState" class="headerlink" title="1. useState"></a>1. <code>useState</code></h3><p><code>useState</code> æ˜¯ React ä¸­æœ€åŸºæœ¬çš„çŠ¶æ€ç®¡ç†å·¥å…·ã€‚å®ƒç”¨äºç®¡ç†ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€ï¼Œé€‚åˆå¤„ç†ç®€å•çš„çŠ¶æ€éœ€æ±‚ã€‚</p><h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>); <span class="comment">// åˆå§‹åŒ–çŠ¶æ€ä¸º 0</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰è®¡æ•°ï¼š&#123;count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count - 1)&#125;&gt;å‡å°‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Counter</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>useState</code> è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å½“å‰çŠ¶æ€ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯æ›´æ–°çŠ¶æ€çš„å‡½æ•°ã€‚åœ¨æŒ‰é’®ç‚¹å‡»æ—¶ï¼Œ<code>setCount</code> ç”¨æ¥æ›´æ–° <code>count</code> çš„å€¼ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼š<code>useState</code> åªé€‚ç”¨äºç»„ä»¶å†…éƒ¨çŠ¶æ€ã€‚å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«çŠ¶æ€æ—¶ï¼Œä¼ é€’çŠ¶æ€ä¼šå˜å¾—éå¸¸ç¹çã€‚</p></blockquote><h3 id="2-Context"><a href="#2-Context" class="headerlink" title="2. Context"></a>2. <code>Context</code></h3><p><code>Context</code> æä¾›äº†ä¸€ç§è·¨è¶Šç»„ä»¶æ ‘ä¼ é€’æ•°æ®çš„æ–¹å¼ï¼Œæ— éœ€ä¸€å±‚å±‚é€šè¿‡ <code>props</code> ä¼ é€’ã€‚å®ƒé€‚åˆäºä¸€äº›å…¨å±€å…±äº«çš„çŠ¶æ€ï¼Œæ¯”å¦‚ç”¨æˆ·è®¤è¯ä¿¡æ¯ã€è¯­è¨€è®¾ç½®ç­‰ã€‚</p><h4 id="ç¤ºä¾‹ï¼š-1"><a href="#ç¤ºä¾‹ï¼š-1" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><p><strong>çˆ¶ç»„ä»¶ï¼ˆæä¾› Contextï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; createContext, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Child</span> <span class="keyword">from</span> <span class="string">&#x27;./Child&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title class_">UserContext</span> = <span class="title function_">createContext</span>();  <span class="comment">// åˆ›å»ºä¸€ä¸ª Context</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [user, setUser] = <span class="title function_">useState</span>(<span class="string">&#x27;Alice&#x27;</span>);  <span class="comment">// ç”¨æˆ·çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">UserContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;&#123;</span> <span class="attr">user</span>, <span class="attr">setUser</span> &#125;&#125;&gt;</span> &#123;/* æä¾›å…±äº«çŠ¶æ€ */&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>çˆ¶ç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Child</span> /&gt;</span> &#123;/* å­ç»„ä»¶å¯ä»¥è®¿é—®è¿™ä¸ªçŠ¶æ€ */&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">UserContext.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Parent</span>;</span><br></pre></td></tr></table></figure><p><strong>å­ç»„ä»¶ï¼ˆä½¿ç”¨ Contextï¼‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">UserContext</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Parent&#x27;</span>;  <span class="comment">// å¯¼å…¥ UserContext</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; user, setUser &#125; = <span class="title function_">useContext</span>(<span class="title class_">UserContext</span>);  <span class="comment">// ä½¿ç”¨ useContext è·å–çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å½“å‰ç”¨æˆ·ï¼š&#123;user&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setUser(&#x27;Bob&#x27;)&#125;&gt;åˆ‡æ¢ç”¨æˆ·<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Child</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>Parent</code> ç»„ä»¶é€šè¿‡ <code>UserContext.Provider</code> æä¾›äº†å…±äº«çš„ <code>user</code> å’Œ <code>setUser</code>ã€‚<code>Child</code> ç»„ä»¶ä½¿ç”¨ <code>useContext(UserContext)</code> æ¥è®¿é—®å’Œæ›´æ–°çŠ¶æ€ã€‚</p><blockquote><p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼šå½“ <code>Context</code> ä¸­çš„çŠ¶æ€å˜å¾—å¤æ‚æ—¶ï¼Œå¯ä»¥ç»“åˆ <code>useReducer</code> æ¥ç®¡ç†çŠ¶æ€æ›´æ–°é€»è¾‘ï¼Œä½¿ä»£ç æ›´åŠ å¯ç»´æŠ¤ã€‚</p></blockquote><h3 id="3-useReducer"><a href="#3-useReducer" class="headerlink" title="3. useReducer"></a>3. <code>useReducer</code></h3><p><code>useReducer</code> æ˜¯ React æä¾›çš„å¦ä¸€ç§çŠ¶æ€ç®¡ç†æ–¹å¼ï¼Œé€‚ç”¨äºå¤æ‚çš„çŠ¶æ€é€»è¾‘ã€‚å®ƒåŸºäº <strong>Reducer</strong> æ¨¡å¼ï¼Œç±»ä¼¼äº Redux ä¸­çš„çŠ¶æ€æ›´æ–°æœºåˆ¶ã€‚</p><h4 id="ç¤ºä¾‹ï¼š-2"><a href="#ç¤ºä¾‹ï¼š-2" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><p><strong>Reducer å®šä¹‰</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;add&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> [...state, action.<span class="property">payload</span>];  <span class="comment">// æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;remove&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> state.<span class="title function_">filter</span>(<span class="function">(<span class="params">_, index</span>) =&gt;</span> index !== action.<span class="property">payload</span>);  <span class="comment">// åˆ é™¤ä»»åŠ¡</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸»ç»„ä»¶</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">TodoList</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = <span class="title function_">useReducer</span>(reducer, []);  <span class="comment">// ä½¿ç”¨ useReducer æ¥ç®¡ç†ä»»åŠ¡åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">const</span> [task, setTask] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>);  <span class="comment">// å•ç‹¬çš„ä»»åŠ¡è¾“å…¥çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addTask</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span>, <span class="attr">payload</span>: task &#125;);  <span class="comment">// æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">    <span class="title function_">setTask</span>(<span class="string">&#x27;&#x27;</span>);  <span class="comment">// æ¸…ç©ºè¾“å…¥æ¡†</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>å¾…åŠäº‹é¡¹<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">value</span>=<span class="string">&#123;task&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setTask(e.target.value)&#125;  // å¤„ç†è¾“å…¥æ¡†å˜åŒ–</span></span><br><span class="line"><span class="language-xml">        placeholder=&quot;è¾“å…¥ä»»åŠ¡&quot;</span></span><br><span class="line"><span class="language-xml">      /&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;addTask&#125;</span>&gt;</span>æ·»åŠ ä»»åŠ¡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;state.map((t, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;t&#125; <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(&#123; type: &#x27;remove&#x27;, payload: index &#125;)&#125;&gt;åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">TodoList</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>useReducer</code> ç®¡ç†äº†ä»»åŠ¡åˆ—è¡¨çš„å¢åˆ æ“ä½œã€‚é€šè¿‡ <code>dispatch</code> å‡½æ•°æ¥è§¦å‘ <code>reducer</code> ä¸­çš„çŠ¶æ€æ›´æ–°ã€‚</p><blockquote><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<code>useReducer</code> é€‚åˆæœ‰å¤šä¸ªçŠ¶æ€å˜åŒ–é€»è¾‘çš„åœºæ™¯ï¼Œä¾‹å¦‚å¤„ç†è¡¨å•æ•°æ®ã€å¤æ‚çš„äº¤äº’ç­‰ã€‚</p></blockquote><h3 id="4-Redux"><a href="#4-Redux" class="headerlink" title="4. Redux"></a>4. <code>Redux</code></h3><p>Redux æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„çŠ¶æ€ç®¡ç†åº“ï¼Œé€‚ç”¨äºæ›´å¤æ‚çš„åº”ç”¨ç¨‹åºã€‚å®ƒé€šè¿‡å•ä¸€çš„ <strong>Store</strong> ç®¡ç†æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œå¹¶é€šè¿‡ <strong>Action</strong> å’Œ <strong>Reducer</strong> æ¥å¤„ç†çŠ¶æ€çš„æ›´æ–°ã€‚</p><h4 id="ç¤ºä¾‹ï¼š-3"><a href="#ç¤ºä¾‹ï¼š-3" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><p><strong>Redux Store é…ç½®</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  <span class="attr">cart</span>: [],  <span class="comment">// åˆå§‹åŒ–è´­ç‰©è½¦ä¸ºç©º</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">cartReducer</span>(<span class="params">state = initialState, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;ADD_ITEM&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, <span class="attr">cart</span>: [...state.<span class="property">cart</span>, action.<span class="property">payload</span>] &#125;;  <span class="comment">// æ·»åŠ å•†å“</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;REMOVE_ITEM&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        ...state,</span><br><span class="line">        <span class="attr">cart</span>: state.<span class="property">cart</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">_, index</span>) =&gt;</span> index !== action.<span class="property">payload</span>),  <span class="comment">// åˆ é™¤å•†å“</span></span><br><span class="line">      &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = <span class="title function_">createStore</span>(cartReducer);  <span class="comment">// åˆ›å»º Redux Store</span></span><br></pre></td></tr></table></figure><p><strong>ä½¿ç”¨ Redux çš„ç»„ä»¶</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;  <span class="comment">// å¯¼å…¥ Redux hooks</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Cart</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cart = <span class="title function_">useSelector</span>(<span class="function">(<span class="params">state</span>) =&gt;</span> state.<span class="property">cart</span>);  <span class="comment">// è·å–è´­ç‰©è½¦çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>();  <span class="comment">// è·å– dispatch å‡½æ•°</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addItem</span> = (<span class="params">item</span>) =&gt; <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD_ITEM&#x27;</span>, <span class="attr">payload</span>: item &#125;);  <span class="comment">// æ·»åŠ å•†å“</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">removeItem</span> = (<span class="params">index</span>) =&gt; <span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;REMOVE_ITEM&#x27;</span>, <span class="attr">payload</span>: index &#125;);  <span class="comment">// åˆ é™¤å•†å“</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> addItem(&#x27;è‹¹æœ&#x27;)&#125;&gt;æ·»åŠ è‹¹æœ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> addItem(&#x27;é¦™è•‰&#x27;)&#125;&gt;æ·»åŠ é¦™è•‰<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;cart.map((item, index) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;item&#125; <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> removeItem(index)&#125;&gt;åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Cart</span>;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒRedux ç”¨äºç®¡ç†è´­ç‰©è½¦çŠ¶æ€ã€‚<code>useSelector</code> ç”¨äºè·å–çŠ¶æ€ï¼Œ<code>useDispatch</code> ç”¨äºæ´¾å‘ actionsã€‚</p><blockquote><p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå½“ä½ çš„åº”ç”¨æœ‰å¤šä¸ªç»„ä»¶ä¹‹é—´å¤æ‚çš„çŠ¶æ€ä¾èµ–æ—¶ï¼Œæˆ–è€…éœ€è¦æ—¶é—´æ—…è¡Œã€æ“ä½œæ—¥å¿—è®°å½•ç­‰è°ƒè¯•åŠŸèƒ½ï¼ŒRedux æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚</p></blockquote><h2 id="ä½¿ç”¨åœºæ™¯æ€»ç»“"><a href="#ä½¿ç”¨åœºæ™¯æ€»ç»“" class="headerlink" title="ä½¿ç”¨åœºæ™¯æ€»ç»“"></a>ä½¿ç”¨åœºæ™¯æ€»ç»“</h2><ul><li><strong>ç®€å•ç»„ä»¶çŠ¶æ€</strong>ï¼šå½“ä½ åªéœ€è¦ç®¡ç†ç»„ä»¶å†…çš„ç®€å•çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ <code>useState</code> å³å¯ã€‚</li><li><strong>ç»„ä»¶æ ‘é—´çš„å…±äº«çŠ¶æ€</strong>ï¼šå½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«æŸäº›çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ <code>Context</code> æˆ– <code>useReducer</code>ã€‚</li><li><strong>å¤æ‚åº”ç”¨ï¼ˆä¾‹å¦‚ç”µå•†å¹³å°ï¼‰</strong>ï¼šå½“ä½ çš„åº”ç”¨çŠ¶æ€å¤æ‚ï¼Œç»„ä»¶ä¹‹é—´æœ‰å¾ˆå¤šä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨ <code>Redux</code> æ¥é›†ä¸­ç®¡ç†çŠ¶æ€ã€‚</li></ul><h1 id="Reducerå’ŒReduxçš„åŒºåˆ«"><a href="#Reducerå’ŒReduxçš„åŒºåˆ«" class="headerlink" title="Reducerå’ŒReduxçš„åŒºåˆ«"></a><code>Reducer</code>å’Œ<code>Redux</code>çš„åŒºåˆ«</h1><p><code>Reducer</code> å’Œ <code>Redux</code> æ˜¯ä¸¤ä¸ªç›¸å…³ä½†ä¸åŒçš„æ¦‚å¿µã€‚ç†è§£å®ƒä»¬çš„åŒºåˆ«æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°ç®¡ç† React ä¸­çš„çŠ¶æ€ã€‚</p><h2 id="1-Reducer"><a href="#1-Reducer" class="headerlink" title="1. Reducer"></a>1. <strong>Reducer</strong></h2><p><code>Reducer</code> æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œç”¨æ¥æ ¹æ®å½“å‰çš„çŠ¶æ€å’Œä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰æ¥è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚åœ¨ React ä¸­ï¼Œ<code>reducer</code> ä¸»è¦å’Œ <code>useReducer</code> é’©å­ä¸€èµ·ä½¿ç”¨ï¼Œæ¥ç®¡ç†ç»„ä»¶å†…éƒ¨æˆ–è·¨ç»„ä»¶çš„çŠ¶æ€å˜åŒ–ã€‚<code>reducer</code> åªè´Ÿè´£å¦‚ä½•æ›´æ–°çŠ¶æ€ï¼Œè€Œä¸å…³å¿ƒçŠ¶æ€å­˜å‚¨åœ¨å“ªé‡Œæˆ–å¦‚ä½•åˆ†å‘ï¼ˆdispatchï¼‰ã€‚</p><h3 id="Reducer-çš„ç‰¹ç‚¹ï¼š"><a href="#Reducer-çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="Reducer çš„ç‰¹ç‚¹ï¼š"></a><code>Reducer</code> çš„ç‰¹ç‚¹ï¼š</h3><ul><li><p><strong>çº¯å‡½æ•°</strong>ï¼š<code>reducer</code> ä¸ä¼šä¿®æ”¹ä¼ å…¥çš„çŠ¶æ€ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚</p></li><li><p>æ¥æ”¶ä¸¤ä¸ªå‚æ•°</p><p>ï¼š</p><ul><li><strong>state</strong>ï¼šå½“å‰çš„çŠ¶æ€ã€‚</li><li><strong>action</strong>ï¼šæè¿°å¦‚ä½•æ›´æ–°çŠ¶æ€çš„å¯¹è±¡ï¼Œé€šå¸¸åŒ…å«ä¸€ä¸ª <code>type</code> å­—æ®µå’Œä¸€ä¸ª <code>payload</code> å­—æ®µï¼ˆå¯é€‰ï¼‰ã€‚</li></ul></li><li><p><strong>è¿”å›æ–°çš„çŠ¶æ€</strong>ï¼š<code>reducer</code> ä¼šæ ¹æ® <code>action.type</code> çš„ä¸åŒè¿”å›ä¸åŒçš„æ–°çŠ¶æ€ã€‚</p></li></ul><h3 id="ç¤ºä¾‹ï¼š-4"><a href="#ç¤ºä¾‹ï¼š-4" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Reducer ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params">state, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;increment&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;decrement&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>reducer</code> å‡½æ•°æ ¹æ®ä¼ å…¥çš„ <code>action</code> ç±»å‹æ¥æ›´æ–°çŠ¶æ€ã€‚</p><h2 id="2-Redux"><a href="#2-Redux" class="headerlink" title="2. Redux"></a>2. <strong>Redux</strong></h2><p><code>Redux</code> æ˜¯ä¸€ä¸ª JavaScript çŠ¶æ€ç®¡ç†åº“ï¼Œä¸“é—¨ç”¨äºå¤„ç†å¤§å‹åº”ç”¨ä¸­çš„å¤æ‚çŠ¶æ€ç®¡ç†ã€‚å®ƒåŸºäº <strong>å•ä¸€çŠ¶æ€æ ‘</strong>ï¼ˆsingle source of truthï¼‰çš„ç†å¿µï¼Œæ‰€æœ‰çš„çŠ¶æ€éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€çš„ Store ä¸­ã€‚<code>Redux</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒé‡‡ç”¨äº† <code>reducer</code> çš„æ¦‚å¿µæ¥ç®¡ç†çŠ¶æ€æ›´æ–°ï¼Œä½†å®ƒå°† <code>reducer</code>ã€<code>store</code>ã€<code>action</code> å’Œ <code>dispatch</code> ç­‰å¤šä¸ªæ¦‚å¿µç»“åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚</p><h3 id="Redux-çš„ç‰¹ç‚¹ï¼š"><a href="#Redux-çš„ç‰¹ç‚¹ï¼š" class="headerlink" title="Redux çš„ç‰¹ç‚¹ï¼š"></a><code>Redux</code> çš„ç‰¹ç‚¹ï¼š</h3><ul><li><p><strong>å•ä¸€çŠ¶æ€æ ‘</strong>ï¼šåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€éƒ½ä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€çš„ Store ä¸­ã€‚</p></li><li><p><strong>ä¸å¯å˜çŠ¶æ€</strong>ï¼šRedux çš„çŠ¶æ€æ˜¯ä¸å¯å˜çš„ï¼Œæ¯æ¬¡æ›´æ–°çŠ¶æ€æ—¶éƒ½éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚</p></li><li><p>ä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</p><p>ï¼š</p><ul><li><strong>Action</strong>ï¼šä¸€ä¸ª JavaScript å¯¹è±¡ï¼Œæè¿°å‘ç”Ÿäº†ä»€ä¹ˆã€‚é€šå¸¸åŒ…å« <code>type</code> å­—æ®µï¼Œå¯èƒ½è¿˜æœ‰ <code>payload</code> ç­‰é™„åŠ æ•°æ®ã€‚</li><li><strong>Reducer</strong>ï¼šæ¥æ”¶å½“å‰çŠ¶æ€å’Œ actionï¼Œè¿”å›æ–°çš„çŠ¶æ€ã€‚</li><li><strong>Store</strong>ï¼šä¿å­˜åº”ç”¨çš„æ•´ä¸ªçŠ¶æ€æ ‘ã€‚</li><li><strong>Dispatch</strong>ï¼šç”¨äºå‘é€ <code>action</code>ï¼Œè§¦å‘çŠ¶æ€æ›´æ–°ã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹ï¼š-5"><a href="#ç¤ºä¾‹ï¼š-5" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Redux Store é…ç½®</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reducer</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">counterReducer</span>(<span class="params">state = initialState, action</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (action.<span class="property">type</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;INCREMENT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> + <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;DECREMENT&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">count</span>: state.<span class="property">count</span> - <span class="number">1</span> &#125;;</span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">return</span> state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Store</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">createStore</span>(counterReducer);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ´¾å‘ Action æ›´æ–°çŠ¶æ€</span></span><br><span class="line">store.<span class="title function_">dispatch</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;INCREMENT&#x27;</span> &#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(store.<span class="title function_">getState</span>());  <span class="comment">// &#123; count: 1 &#125;</span></span><br></pre></td></tr></table></figure><p>åœ¨ Redux ä¸­ï¼Œ<code>reducer</code> å’Œ <code>action</code> æºæ‰‹å·¥ä½œï¼Œé€šè¿‡ <code>dispatch</code> æ¥æ›´æ–°çŠ¶æ€ã€‚<code>store</code> å­˜å‚¨æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œè€Œ <code>reducer</code> è´Ÿè´£å¤„ç†ä¸åŒçš„ <code>action</code> æ¥æ›´æ–°çŠ¶æ€ã€‚</p><h2 id="ä¸»è¦åŒºåˆ«"><a href="#ä¸»è¦åŒºåˆ«" class="headerlink" title="ä¸»è¦åŒºåˆ«"></a><strong>ä¸»è¦åŒºåˆ«</strong></h2><table><thead><tr><th>ç‰¹æ€§</th><th><strong>Reducer</strong></th><th><strong>Redux</strong></th></tr></thead><tbody><tr><td><strong>æ¦‚å¿µ</strong></td><td>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæè¿°å¦‚ä½•æ ¹æ®åŠ¨ä½œæ›´æ–°çŠ¶æ€ã€‚</td><td>æ˜¯ä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼ŒåŒ…æ‹¬ <code>store</code>ã€<code>reducer</code>ã€<code>action</code> ç­‰ã€‚</td></tr><tr><td><strong>ä½œç”¨</strong></td><td>ä»…ç”¨äºå¤„ç†çŠ¶æ€æ›´æ–°çš„é€»è¾‘ã€‚</td><td>ç®¡ç†æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œç»“åˆ <code>reducer</code>ã€<code>store</code> å’Œ <code>dispatch</code> æ¥å¤„ç†çŠ¶æ€ã€‚</td></tr><tr><td><strong>çŠ¶æ€å­˜å‚¨</strong></td><td>ä¸è´Ÿè´£å­˜å‚¨çŠ¶æ€ï¼Œä»…æ ¹æ®ä¼ å…¥çš„çŠ¶æ€è¿”å›æ–°çŠ¶æ€ã€‚</td><td>ä½¿ç”¨ <code>store</code> å­˜å‚¨æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ã€‚</td></tr><tr><td><strong>åº”ç”¨èŒƒå›´</strong></td><td>é€‚ç”¨äºä»»ä½•åŸºäº <code>Reducer</code> æœºåˆ¶çš„çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ <code>useReducer</code>ï¼‰ã€‚</td><td>ä¸»è¦ç”¨äºå¤æ‚çš„åº”ç”¨ï¼Œå°¤å…¶æ˜¯å¤§å‹åº”ç”¨å’Œè·¨ç»„ä»¶çš„çŠ¶æ€ç®¡ç†ã€‚</td></tr><tr><td><strong>é›†æˆæ–¹å¼</strong></td><td>å¯ä»¥ä¸ <code>useReducer</code> ä¸€èµ·ä½¿ç”¨æ¥ç®¡ç†ç»„ä»¶çŠ¶æ€ã€‚</td><td>éœ€è¦å¼•å…¥ Redux åº“ï¼Œä½¿ç”¨ <code>createStore</code> æ¥åˆ›å»ºå…¨å±€çŠ¶æ€ç®¡ç†ã€‚</td></tr></tbody></table><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ul><li><strong><code>reducer</code></strong> æ˜¯ React ä¸­ç®¡ç†çŠ¶æ€æ›´æ–°çš„å·¥å…·å‡½æ•°ï¼Œç”¨äºæè¿°å¦‚ä½•æ ¹æ® <code>action</code> æ›´æ–°çŠ¶æ€ã€‚</li><li><strong><code>Redux</code></strong> æ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„çŠ¶æ€ç®¡ç†åº“ï¼Œä½¿ç”¨äº† <code>reducer</code> çš„æ¦‚å¿µï¼Œä½†æä¾›äº†æ›´å¤æ‚çš„å·¥å…·ï¼Œå¦‚ <code>store</code>ã€<code>dispatch</code> å’Œ <code>action</code>ï¼Œé€‚åˆç®¡ç†å¤§è§„æ¨¡åº”ç”¨çš„çŠ¶æ€ã€‚</li></ul><p>å¦‚æœä½ åªæ˜¯éœ€è¦ç®¡ç†å•ä¸€ç»„ä»¶çš„çŠ¶æ€æˆ–è€…å°‘æ•°ç»„ä»¶ä¹‹é—´çš„å…±äº«çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨ <code>reducer</code> å’Œ <code>useReducer</code>ã€‚ä½†å¦‚æœä½ çš„åº”ç”¨éå¸¸å¤æ‚ï¼Œç»„ä»¶ä¹‹é—´æœ‰å¾ˆå¤šçŠ¶æ€ä¾èµ–ï¼Œä¸”éœ€è¦å…¨å±€çŠ¶æ€ç®¡ç†å’Œè°ƒè¯•åŠŸèƒ½ï¼ˆå¦‚æ—¶é—´æ—…è¡Œã€æ—¥å¿—è®°å½•ç­‰ï¼‰ï¼Œé‚£ä¹ˆ Redux ä¼šæ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åå…­)-Socket</title>
      <link href="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/"/>
      <url>/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆéœ€è¦-Socket"><a href="#ä¸ºä»€ä¹ˆéœ€è¦-Socket" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦ Socket?"></a>ä¸ºä»€ä¹ˆéœ€è¦ Socket?</h1><p>ç”±äº HTTP çš„é™åˆ¶ï¼Œæˆ‘ä»¬çš„ CatBook çš„ Chat åœ¨æ¯æ¬¡è·å–æ–°çš„èŠå¤©æ—¶éƒ½éœ€è¦åˆ·æ–°ä¸‹ç½‘é¡µæ‰èƒ½åŠ è½½ã€‚</p><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/image-20241218163406677.png" alt="image-20241218163406677"></p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦<code>Socket</code>æ¥æ•™æœåŠ¡å™¨å‘é€ä¼šè¯</p><h1 id="ä»€ä¹ˆæ˜¯-Socketï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Socketï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Socketï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Socketï¼Ÿ</h1><p>Socket æ˜¯ç½‘ç»œé€šä¿¡çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒæä¾›äº†æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´åŒå‘é€šä¿¡çš„èƒ½åŠ›ã€‚é€šè¿‡ Socketï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯ä»¥æŒç»­åœ°äº¤æ¢æ•°æ®ï¼Œè€Œä¸éœ€è¦åƒä¼ ç»Ÿ HTTP è¯·æ±‚é‚£æ ·é¢‘ç¹å»ºç«‹å’Œå…³é—­è¿æ¥ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œæœ€å¸¸ç”¨çš„ Socket æŠ€æœ¯æ˜¯ WebSocket å’ŒåŸºäºåº“çš„å®ç°ï¼ˆå¦‚ Socket.IOï¼‰</p><h1 id="Socket-IO"><a href="#Socket-IO" class="headerlink" title="Socket IO"></a>Socket IO</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/image-20241218163810334.png" alt="image-20241218163810334"></p><h1 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socketManager.<span class="title function_">getIo</span>().<span class="title function_">emit</span>(<span class="string">&quot;event_name&quot;</span>, data);</span><br></pre></td></tr></table></figure><p><code>&quot;event_name&quot;</code>æ˜¯è®¢é˜…çš„ä¸»é¢˜</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.<span class="title function_">on</span>(<span class="string">&quot;event_name&quot;</span>, someFunction);</span><br></pre></td></tr></table></figure><p><code>someFunction</code>: å½“ä½ æ”¶åˆ°ä¸€ä¸ªè¿™æ ·çš„ socket äº‹ä»¶æ—¶ï¼Œåº”è¯¥åšä»€ä¹ˆï¼š</p><p><code>(data) =&gt; &#123; do something with data &#125;</code></p><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/image-20241218170007249.png" alt="image-20241218170007249"></p><h2 id="ç§èŠ"><a href="#ç§èŠ" class="headerlink" title="ç§èŠ"></a>ç§èŠ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socketManager.<span class="title function_">getSocketFromUserID</span>(â€œwhiskers_idâ€).<span class="title function_">emit</span>(â€œmeowâ€, â€œ<span class="variable constant_">FOOD</span>â€)</span><br></pre></td></tr></table></figure><p>å¦‚æœä½¿ç”¨<code>getIo()</code>çš„è¯ä¼šå¯¼è‡´æ‰€æœ‰äººå¯è§</p><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/image-20241218170433226.png" alt="image-20241218170433226"></p><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-16-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-Socket/image-20241218170404976.png" alt="image-20241218170404976"></p><h3 id="è¯¦ç»†æµç¨‹è§£æ"><a href="#è¯¦ç»†æµç¨‹è§£æ" class="headerlink" title="è¯¦ç»†æµç¨‹è§£æ"></a>è¯¦ç»†æµç¨‹è§£æ</h3><hr><h4 id="1-ç”¨æˆ·è¿æ¥åˆ°æœåŠ¡å™¨"><a href="#1-ç”¨æˆ·è¿æ¥åˆ°æœåŠ¡å™¨" class="headerlink" title="1. ç”¨æˆ·è¿æ¥åˆ°æœåŠ¡å™¨"></a><strong>1. ç”¨æˆ·è¿æ¥åˆ°æœåŠ¡å™¨</strong></h4><ul><li>å½“ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚ <strong>Whiskers</strong>ï¼‰ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨ä¼šé€šè¿‡ <code>socketManager.addUser</code> å°†ç”¨æˆ·å’Œ socket è¿›è¡Œç»‘å®šã€‚</li></ul><p>åœ¨å®¢æˆ·ç«¯ï¼Œç”¨æˆ·åˆå§‹åŒ– socket è¿æ¥å¹¶å‘æœåŠ¡å™¨å‘é€åˆå§‹åŒ–è¯·æ±‚ã€‚</p><p><code>App.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> userToken = res.<span class="property">tokenObj</span>.<span class="property">id_token</span>;</span><br><span class="line">  <span class="title function_">post</span>(<span class="string">&quot;/api/login&quot;</span>, &#123; <span class="attr">token</span>: userToken &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setUserId</span>(user.<span class="property">_id</span>);</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/initsocket&quot;</span>, &#123; <span class="attr">socketid</span>: socket.<span class="property">id</span> &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯ä»£ç  (<code>Chatbook.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="string">&quot;/api/activeUsers&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">userId</span>) &#123;</span><br><span class="line">      <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [activeChat.<span class="property">recipient</span>.<span class="property">_id</span>, props.<span class="property">userId</span>]);</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;activeUsers&quot;</span>, callback);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;activeUsers&quot;</span>, callback);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><p><strong>æœåŠ¡å™¨ç«¯ä»£ç  (<code>api.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/initsocket&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">user</span>) &#123;</span><br><span class="line">    socketManager.<span class="title function_">addUser</span>(</span><br><span class="line">      req.<span class="property">user</span>,</span><br><span class="line">      socketManager.<span class="title function_">getSocketFromSocketID</span>(req.<span class="property">body</span>.<span class="property">socketid</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>æµç¨‹æ€»ç»“ï¼š<ol><li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚åˆå§‹åŒ– socket è¿æ¥ã€‚</li><li>æœåŠ¡å™¨è°ƒç”¨ <code>socketManager.addUser</code>ï¼Œå°†ç”¨æˆ·å’Œå¯¹åº”çš„ socket ç»‘å®šã€‚</li></ol></li></ul><hr><h4 id="2-å°†ç”¨æˆ·ä¸å¯¹åº”çš„-Socket-è¿›è¡Œç»‘å®š"><a href="#2-å°†ç”¨æˆ·ä¸å¯¹åº”çš„-Socket-è¿›è¡Œç»‘å®š" class="headerlink" title="2. å°†ç”¨æˆ·ä¸å¯¹åº”çš„ Socket è¿›è¡Œç»‘å®š"></a><strong>2. å°†ç”¨æˆ·ä¸å¯¹åº”çš„ Socket è¿›è¡Œç»‘å®š</strong></h4><ul><li>æœåŠ¡å™¨é€šè¿‡ <code>socketManager.addUser</code> å°†ç”¨æˆ·çš„ ID å’Œ socket è¿›è¡Œæ˜ å°„ï¼Œä¾¿äºåç»­æŸ¥æ‰¾ã€‚</li></ul><p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/initsocket&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">user</span>) &#123;</span><br><span class="line">    socketManager.<span class="title function_">addUser</span>(</span><br><span class="line">      req.<span class="property">user</span>,</span><br><span class="line">      socketManager.<span class="title function_">getSocketFromSocketID</span>(req.<span class="property">body</span>.<span class="property">socketid</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>socketManager.addUser</code> æ˜¯ä¸€ä¸ªå°è£…çš„å‡½æ•°ï¼Œå®ƒè´Ÿè´£è®°å½•ç”¨æˆ·å’Œå¯¹åº” socket çš„å…³ç³»ã€‚</li></ul><hr><h4 id="3-æœåŠ¡å™¨ç«¯å­˜å‚¨æ˜ å°„å…³ç³»"><a href="#3-æœåŠ¡å™¨ç«¯å­˜å‚¨æ˜ å°„å…³ç³»" class="headerlink" title="3. æœåŠ¡å™¨ç«¯å­˜å‚¨æ˜ å°„å…³ç³»"></a><strong>3. æœåŠ¡å™¨ç«¯å­˜å‚¨æ˜ å°„å…³ç³»</strong></h4><ul><li><code>socketManager</code> é€šè¿‡å­˜å‚¨ç”¨æˆ·å’Œ socket ID çš„æ˜ å°„æ¥å®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚</li><li>åœ¨å®¢æˆ·ç«¯ï¼Œç”¨æˆ·çš„ socket è¿æ¥ä¼šæŒç»­æ›´æ–° <strong>æ´»è·ƒç”¨æˆ·åˆ—è¡¨</strong>ã€‚</li></ul><p><strong>æœåŠ¡å™¨ç«¯ä»£ç  (<code>api.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/activeUsers&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">activeUsers</span>: socketManager.<span class="title function_">getAllConnectedUsers</span>() &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯ä»£ç  (<code>Chatbook.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;activeUsers&quot;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;activeUsers&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><hr><h4 id="4-æ ¡éªŒç”¨æˆ·ä¿¡æ¯"><a href="#4-æ ¡éªŒç”¨æˆ·ä¿¡æ¯" class="headerlink" title="4. æ ¡éªŒç”¨æˆ·ä¿¡æ¯"></a><strong>4. æ ¡éªŒç”¨æˆ·ä¿¡æ¯</strong></h4><ul><li>å½“ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼ŒæœåŠ¡å™¨é€šè¿‡ <code>auth.ensureLoggedIn</code> æ ¡éªŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚</li></ul><p><strong>æœåŠ¡å™¨ç«¯ä»£ç  (<code>api.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/message&quot;</span>, auth.<span class="property">ensureLoggedIn</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(</span><br><span class="line">    <span class="string">`Received a chat message from <span class="subst">$&#123;req.user.name&#125;</span>: <span class="subst">$&#123;req.body.content&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> message = <span class="keyword">new</span> <span class="title class_">Message</span>(&#123;</span><br><span class="line">    <span class="attr">recipient</span>: req.<span class="property">body</span>.<span class="property">recipient</span>,</span><br><span class="line">    <span class="attr">sender</span>: &#123;</span><br><span class="line">      <span class="attr">_id</span>: req.<span class="property">user</span>.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">name</span>: req.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  message.<span class="title function_">save</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span> === <span class="string">&quot;ALL_CHAT&quot;</span>) &#123;</span><br><span class="line">    socketManager.<span class="title function_">getIo</span>().<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    socketManager.<span class="title function_">getSocketFromUserID</span>(req.<span class="property">user</span>.<span class="property">_id</span>).<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">user</span>.<span class="property">_id</span> !== req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>) &#123;</span><br><span class="line">      socketManager</span><br><span class="line">        .<span class="title function_">getSocketFromUserID</span>(req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>)</span><br><span class="line">        .<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>æµç¨‹æ€»ç»“ï¼š<ol><li>å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨é€šè¿‡ <code>auth.ensureLoggedIn</code> ç¡®ä¿ç”¨æˆ·å¤„äºç™»å½•çŠ¶æ€ã€‚</li><li>æœåŠ¡å™¨å°†æ¶ˆæ¯å¹¿æ’­ç»™ç›®æ ‡ç”¨æˆ·æˆ– <code>ALL_CHAT</code>ã€‚</li></ol></li></ul><hr><h4 id="5-å®é™…æ•°æ®é€šä¿¡è¿‡ç¨‹"><a href="#5-å®é™…æ•°æ®é€šä¿¡è¿‡ç¨‹" class="headerlink" title="5. å®é™…æ•°æ®é€šä¿¡è¿‡ç¨‹"></a><strong>5. å®é™…æ•°æ®é€šä¿¡è¿‡ç¨‹</strong></h4><ul><li>ç”¨æˆ·å‘é€æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨æ¥æ”¶å¹¶ä¿å­˜åˆ°æ•°æ®åº“ï¼ŒåŒæ—¶é€šè¿‡ socket å‘ç›®æ ‡ç”¨æˆ·æˆ–èŠå¤©å®¤å¹¿æ’­æ¶ˆæ¯ã€‚</li></ul><p><strong>å®¢æˆ·ç«¯ä»£ç  (<code>Chatbook.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addMessages</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setActiveChat</span>(<span class="function">(<span class="params">prevActiveChat</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">recipient</span>: prevActiveChat.<span class="property">recipient</span>,</span><br><span class="line">    <span class="attr">messages</span>: prevActiveChat.<span class="property">messages</span>.<span class="title function_">concat</span>(data),</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [activeChat.<span class="property">recipient</span>.<span class="property">_id</span>, props.<span class="property">userId</span>]);</span><br></pre></td></tr></table></figure><ul><li>å½“æ¶ˆæ¯å‘é€ç»™å½“å‰æ´»è·ƒç”¨æˆ·ï¼Œå®¢æˆ·ç«¯ä¼šè°ƒç”¨ <code>addMessages</code> æ›´æ–°èŠå¤©ç•Œé¢çš„æ¶ˆæ¯çŠ¶æ€ã€‚</li></ul><p><strong>æœåŠ¡å™¨ç«¯ä»£ç  (<code>api.js</code>)ï¼š</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span> === <span class="string">&quot;ALL_CHAT&quot;</span>) &#123;</span><br><span class="line">  socketManager.<span class="title function_">getIo</span>().<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  socketManager.<span class="title function_">getSocketFromUserID</span>(req.<span class="property">user</span>.<span class="property">_id</span>).<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">user</span>.<span class="property">_id</span> !== req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>) &#123;</span><br><span class="line">    socketManager</span><br><span class="line">      .<span class="title function_">getSocketFromUserID</span>(req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>)</span><br><span class="line">      .<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æµç¨‹æ€»ç»“ï¼š<ol><li>ç”¨æˆ·é€šè¿‡ socket å‘é€æ¶ˆæ¯ã€‚</li><li>æœåŠ¡å™¨ä¿å­˜æ¶ˆæ¯åˆ°æ•°æ®åº“ã€‚</li><li>æœåŠ¡å™¨å‘ç›®æ ‡ç”¨æˆ·æˆ–æ‰€æœ‰ç”¨æˆ·å¹¿æ’­æ¶ˆæ¯ã€‚</li><li>å®¢æˆ·ç«¯ç›‘å¬åˆ° <code>message</code> äº‹ä»¶åæ›´æ–°æ¶ˆæ¯åˆ—è¡¨ã€‚</li></ol></li></ul><hr><h4 id="6-æ€»ç»“æµç¨‹"><a href="#6-æ€»ç»“æµç¨‹" class="headerlink" title="6. æ€»ç»“æµç¨‹"></a><strong>6. æ€»ç»“æµç¨‹</strong></h4><ol><li><strong>ç”¨æˆ·è¿æ¥åˆ°æœåŠ¡å™¨ï¼š</strong><ul><li>å®¢æˆ·ç«¯åˆå§‹åŒ– socket è¿æ¥ï¼Œå¹¶å‘æœåŠ¡å™¨å‘é€ <code>initsocket</code> è¯·æ±‚ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡ <code>socketManager.addUser</code> ç»‘å®šç”¨æˆ·ä¸ socketã€‚</li></ul></li><li><strong>è·å–æ´»è·ƒç”¨æˆ·ï¼š</strong><ul><li>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€å½“å‰æ´»è·ƒç”¨æˆ·åˆ—è¡¨ã€‚</li><li>å®¢æˆ·ç«¯ç›‘å¬ <code>activeUsers</code> äº‹ä»¶å¹¶æ›´æ–°åˆ—è¡¨ã€‚</li></ul></li><li><strong>æ¶ˆæ¯å‘é€ä¸æ¥æ”¶ï¼š</strong><ul><li>å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ï¼ŒæœåŠ¡å™¨æ ¡éªŒç”¨æˆ·èº«ä»½å¹¶ä¿å­˜æ¶ˆæ¯ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡ socket å¹¿æ’­æ¶ˆæ¯ç»™ç›®æ ‡ç”¨æˆ·æˆ–èŠå¤©å®¤ã€‚</li><li>å®¢æˆ·ç«¯æ¥æ”¶æ¶ˆæ¯å¹¶æ›´æ–°æ¶ˆæ¯çŠ¶æ€ã€‚</li></ul></li><li><strong>å®æ—¶æ›´æ–°ç•Œé¢ï¼š</strong><ul><li>é€šè¿‡ç›‘å¬ <code>message</code> å’Œ <code>activeUsers</code> äº‹ä»¶ï¼Œå®¢æˆ·ç«¯å®ç°å®æ—¶èŠå¤©å’Œæ´»è·ƒç”¨æˆ·åˆ—è¡¨çš„æ›´æ–°ã€‚</li></ul></li></ol><hr><h3 id="æµç¨‹å›¾ï¼ˆæ€»ç»“ï¼‰"><a href="#æµç¨‹å›¾ï¼ˆæ€»ç»“ï¼‰" class="headerlink" title="æµç¨‹å›¾ï¼ˆæ€»ç»“ï¼‰"></a>æµç¨‹å›¾ï¼ˆæ€»ç»“ï¼‰</h3><ol><li>ç”¨æˆ·åˆå§‹åŒ– socket â†’ æœåŠ¡å™¨ç»‘å®šç”¨æˆ·ä¸ socket</li><li>å®¢æˆ·ç«¯è¯·æ±‚æ´»è·ƒç”¨æˆ· â†’ æœåŠ¡å™¨è¿”å›æ´»è·ƒç”¨æˆ·åˆ—è¡¨</li><li>ç”¨æˆ·å‘é€æ¶ˆæ¯ â†’ æœåŠ¡å™¨å¹¿æ’­æ¶ˆæ¯ â†’ å®¢æˆ·ç«¯æ›´æ–°èŠå¤©ç•Œé¢</li></ol><h1 id="lab-è§£æ"><a href="#lab-è§£æ" class="headerlink" title="lab è§£æ"></a>lab è§£æ</h1><h2 id="1-å®¢æˆ·ç«¯ï¼ˆChatbook-ç»„ä»¶ï¼‰åˆå§‹åŒ–ï¼š"><a href="#1-å®¢æˆ·ç«¯ï¼ˆChatbook-ç»„ä»¶ï¼‰åˆå§‹åŒ–ï¼š" class="headerlink" title="1. å®¢æˆ·ç«¯ï¼ˆChatbook ç»„ä»¶ï¼‰åˆå§‹åŒ–ï¼š"></a><strong>1. å®¢æˆ·ç«¯ï¼ˆ<code>Chatbook</code> ç»„ä»¶ï¼‰åˆå§‹åŒ–ï¼š</strong></h2><p>åœ¨ React å‰ç«¯ä¸­ï¼Œ<code>Chatbook</code> ç»„ä»¶è´Ÿè´£ç®¡ç†èŠå¤©åŠŸèƒ½ï¼Œç”¨æˆ·çŠ¶æ€ä»¥åŠä¸æœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚</p><h4 id="ä»£ç ç‰‡æ®µï¼š"><a href="#ä»£ç ç‰‡æ®µï¼š" class="headerlink" title="ä»£ç ç‰‡æ®µï¼š"></a><strong>ä»£ç ç‰‡æ®µï¼š</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; socket &#125; <span class="keyword">from</span> <span class="string">&quot;../../client-socket.js&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; get &#125; <span class="keyword">from</span> <span class="string">&quot;../../utilities&quot;</span>;</span><br></pre></td></tr></table></figure><ul><li>å¯¼å…¥ <code>socket</code> å¯¹è±¡ï¼Œç”¨äºä¸æœåŠ¡å™¨è¿›è¡Œ <strong>Socket.IO é€šä¿¡</strong>ã€‚</li><li>å¯¼å…¥ <code>get</code> å‡½æ•°ï¼Œç”¨äºå‘æœåŠ¡å™¨å‘é€ <strong>HTTP è¯·æ±‚</strong>ï¼Œæ¯”å¦‚åŠ è½½æ¶ˆæ¯å†å²è®°å½•å’Œè·å–æ´»è·ƒç”¨æˆ·ã€‚</li></ul><hr><h2 id="2-åŠ è½½å†å²æ¶ˆæ¯ï¼š"><a href="#2-åŠ è½½å†å²æ¶ˆæ¯ï¼š" class="headerlink" title="2. åŠ è½½å†å²æ¶ˆæ¯ï¼š"></a><strong>2. åŠ è½½å†å²æ¶ˆæ¯ï¼š</strong></h2><p><code>Chatbook</code> åœ¨ç»„ä»¶æŒ‚è½½æˆ–åˆ‡æ¢èŠå¤©ç”¨æˆ·æ—¶ï¼Œä¼šåŠ è½½å†å²èŠå¤©è®°å½•ã€‚</p><h3 id="ä»£ç ç‰‡æ®µï¼š-1"><a href="#ä»£ç ç‰‡æ®µï¼š-1" class="headerlink" title="ä»£ç ç‰‡æ®µï¼š"></a><strong>ä»£ç ç‰‡æ®µï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">loadMessageHistory</span> = (<span class="params">recipient</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="string">&quot;/api/chat&quot;</span>, &#123; <span class="attr">recipient_id</span>: recipient.<span class="property">_id</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">messages</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setActiveChat</span>(&#123;</span><br><span class="line">      <span class="attr">recipient</span>: recipient,</span><br><span class="line">      <span class="attr">messages</span>: messages,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡ <code>/api/chat</code> GET è¯·æ±‚ï¼Œä»æœåŠ¡å™¨ç«¯è·å–æŒ‡å®š <code>recipient</code> çš„å†å²èŠå¤©è®°å½•ã€‚</li><li>å°†è¿”å›çš„æ¶ˆæ¯åˆ—è¡¨å­˜å‚¨åˆ°ç»„ä»¶çŠ¶æ€ <code>activeChat</code> ä¸­ã€‚</li></ul><hr><h2 id="3-ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯æ¨é€ï¼š"><a href="#3-ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯æ¨é€ï¼š" class="headerlink" title="3. ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯æ¨é€ï¼š"></a><strong>3. ç›‘å¬æœåŠ¡å™¨æ¶ˆæ¯æ¨é€ï¼š</strong></h2><p>é€šè¿‡ Socket.IO ç›‘å¬æ¥è‡ªæœåŠ¡å™¨çš„æ–°æ¶ˆæ¯å¹¶æ›´æ–°èŠå¤©çŠ¶æ€ã€‚</p><h3 id="ä»£ç ç‰‡æ®µï¼š-2"><a href="#ä»£ç ç‰‡æ®µï¼š-2" class="headerlink" title="ä»£ç ç‰‡æ®µï¼š"></a><strong>ä»£ç ç‰‡æ®µï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [activeChat.<span class="property">recipient</span>.<span class="property">_id</span>, props.<span class="property">userId</span>]);</span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨ <code>socket.on(&quot;message&quot;, callback)</code> ç›‘å¬æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ã€‚</li><li><code>addMessages</code> å‡½æ•°å°†æ–°çš„æ¶ˆæ¯åˆå¹¶åˆ°å½“å‰èŠå¤©çš„æ¶ˆæ¯åˆ—è¡¨ä¸­ã€‚</li></ul><h3 id="æ¶ˆæ¯æ›´æ–°é€»è¾‘ï¼š"><a href="#æ¶ˆæ¯æ›´æ–°é€»è¾‘ï¼š" class="headerlink" title="æ¶ˆæ¯æ›´æ–°é€»è¾‘ï¼š"></a><strong>æ¶ˆæ¯æ›´æ–°é€»è¾‘ï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addMessages</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setActiveChat</span>(<span class="function">(<span class="params">prevActiveChat</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">recipient</span>: prevActiveChat.<span class="property">recipient</span>,</span><br><span class="line">    <span class="attr">messages</span>: prevActiveChat.<span class="property">messages</span>.<span class="title function_">concat</span>(data),</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ¶ˆæ¯çš„ <code>recipient</code> åŒ¹é…å½“å‰çš„ <code>activeChat</code>ï¼Œåˆ™å°†æ¶ˆæ¯è¿½åŠ åˆ° <code>messages</code> ä¸­ã€‚</li></ul><hr><h2 id="4-è·å–æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼š"><a href="#4-è·å–æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼š" class="headerlink" title="4. è·å–æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼š"></a><strong>4. è·å–æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼š</strong></h2><p>å®¢æˆ·ç«¯é€šè¿‡ REST API å’Œ Socket.IO è·å–å’Œç›‘å¬åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€‚</p><h3 id="ä»£ç ç‰‡æ®µï¼ˆåˆæ¬¡åŠ è½½æ´»è·ƒç”¨æˆ·ï¼‰ï¼š"><a href="#ä»£ç ç‰‡æ®µï¼ˆåˆæ¬¡åŠ è½½æ´»è·ƒç”¨æˆ·ï¼‰ï¼š" class="headerlink" title="ä»£ç ç‰‡æ®µï¼ˆåˆæ¬¡åŠ è½½æ´»è·ƒç”¨æˆ·ï¼‰ï¼š"></a><strong>ä»£ç ç‰‡æ®µï¼ˆåˆæ¬¡åŠ è½½æ´»è·ƒç”¨æˆ·ï¼‰ï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="string">&quot;/api/activeUsers&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (props.<span class="property">userId</span>) &#123;</span><br><span class="line">      <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡ <code>/api/activeUsers</code> è·å–å½“å‰æ‰€æœ‰åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€‚</li></ul><h3 id="ä»£ç ç‰‡æ®µï¼ˆSocket-æ›´æ–°æ´»è·ƒç”¨æˆ·ï¼‰ï¼š"><a href="#ä»£ç ç‰‡æ®µï¼ˆSocket-æ›´æ–°æ´»è·ƒç”¨æˆ·ï¼‰ï¼š" class="headerlink" title="ä»£ç ç‰‡æ®µï¼ˆSocket æ›´æ–°æ´»è·ƒç”¨æˆ·ï¼‰ï¼š"></a><strong>ä»£ç ç‰‡æ®µï¼ˆSocket æ›´æ–°æ´»è·ƒç”¨æˆ·ï¼‰ï¼š</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;activeUsers&quot;</span>, callback);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;activeUsers&quot;</span>, callback);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure><ul><li>ç›‘å¬æœåŠ¡å™¨æ¨é€çš„ <code>activeUsers</code> äº‹ä»¶ï¼Œå®æ—¶æ›´æ–°åœ¨çº¿ç”¨æˆ·çŠ¶æ€ã€‚</li></ul><hr><h2 id="5-æœåŠ¡ç«¯-API-ä¸-Socket-IO-äº¤äº’ï¼š"><a href="#5-æœåŠ¡ç«¯-API-ä¸-Socket-IO-äº¤äº’ï¼š" class="headerlink" title="5. æœåŠ¡ç«¯ API ä¸ Socket.IO äº¤äº’ï¼š"></a><strong>5. æœåŠ¡ç«¯ API ä¸ Socket.IO äº¤äº’ï¼š</strong></h2><p>åœ¨æœåŠ¡ç«¯ï¼Œé€šè¿‡ <strong><code>socketManager</code></strong> ç®¡ç†ç”¨æˆ·ä¸ Socket.IO å®ä¾‹ï¼Œå¹¶å¤„ç†æ¶ˆæ¯å‘é€å’Œç”¨æˆ·è¿æ¥ã€‚</p><h3 id="åˆå§‹åŒ–-Socket-è¿æ¥ï¼š"><a href="#åˆå§‹åŒ–-Socket-è¿æ¥ï¼š" class="headerlink" title="åˆå§‹åŒ– Socket è¿æ¥ï¼š"></a><strong>åˆå§‹åŒ– Socket è¿æ¥ï¼š</strong></h3><p>å½“ç”¨æˆ·è¿æ¥æ—¶ï¼Œé€šè¿‡ <code>/initsocket</code> API å°†ç”¨æˆ·ä¸ Socket å…³è”ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/initsocket&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">user</span>)</span><br><span class="line">    socketManager.<span class="title function_">addUser</span>(</span><br><span class="line">      req.<span class="property">user</span>,</span><br><span class="line">      socketManager.<span class="title function_">getSocketFromSocketID</span>(req.<span class="property">body</span>.<span class="property">socketid</span>)</span><br><span class="line">    );</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>socketManager.addUser</code> å…³è”ç”¨æˆ· ID ä¸ socket å®ä¾‹ã€‚</li></ul><h3 id="å¤„ç†æ¶ˆæ¯å‘é€ï¼š"><a href="#å¤„ç†æ¶ˆæ¯å‘é€ï¼š" class="headerlink" title="å¤„ç†æ¶ˆæ¯å‘é€ï¼š"></a><strong>å¤„ç†æ¶ˆæ¯å‘é€ï¼š</strong></h3><p>åœ¨ <code>/message</code> è·¯ç”±ä¸­ï¼Œæ¥æ”¶ç”¨æˆ·å‘é€çš„æ¶ˆæ¯å¹¶é€šè¿‡ Socket.IO å¹¿æ’­ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/message&quot;</span>, auth.<span class="property">ensureLoggedIn</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> message = <span class="keyword">new</span> <span class="title class_">Message</span>(&#123;</span><br><span class="line">    <span class="attr">recipient</span>: req.<span class="property">body</span>.<span class="property">recipient</span>,</span><br><span class="line">    <span class="attr">sender</span>: &#123;</span><br><span class="line">      <span class="attr">_id</span>: req.<span class="property">user</span>.<span class="property">_id</span>,</span><br><span class="line">      <span class="attr">name</span>: req.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  message.<span class="title function_">save</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span> == <span class="string">&quot;ALL_CHAT&quot;</span>) &#123;</span><br><span class="line">    socketManager.<span class="title function_">getIo</span>().<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    socketManager.<span class="title function_">getSocketFromUserID</span>(req.<span class="property">user</span>.<span class="property">_id</span>).<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">user</span>.<span class="property">_id</span> !== req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>) &#123;</span><br><span class="line">      socketManager</span><br><span class="line">        .<span class="title function_">getSocketFromUserID</span>(req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>)</span><br><span class="line">        .<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><strong>æ¶ˆæ¯ä¿å­˜åˆ°æ•°æ®åº“</strong>ã€‚</li><li>å¦‚æœæ¶ˆæ¯çš„ <code>recipient</code> æ˜¯ <code>ALL_CHAT</code>ï¼Œé€šè¿‡ <code>getIo().emit</code> å¹¿æ’­ç»™æ‰€æœ‰ç”¨æˆ·ã€‚</li><li>å¦åˆ™ï¼Œåªå‘é€ç»™å‘é€è€…å’Œæ¥æ”¶è€…ã€‚</li></ul><h3 id="è·å–åœ¨çº¿ç”¨æˆ·ï¼š"><a href="#è·å–åœ¨çº¿ç”¨æˆ·ï¼š" class="headerlink" title="è·å–åœ¨çº¿ç”¨æˆ·ï¼š"></a><strong>è·å–åœ¨çº¿ç”¨æˆ·ï¼š</strong></h3><p>åœ¨ <code>/activeUsers</code> API è·¯ç”±ä¸­ï¼Œè·å–æ‰€æœ‰å½“å‰è¿æ¥çš„ç”¨æˆ·åˆ—è¡¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/activeUsers&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">activeUsers</span>: socketManager.<span class="title function_">getAllConnectedUsers</span>() &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>é€šè¿‡ <code>socketManager.getAllConnectedUsers()</code> è·å–æ‰€æœ‰åœ¨çº¿ç”¨æˆ·ã€‚</li></ul><hr><h2 id="6-å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº‹ä»¶å¯¹æ¥ï¼š"><a href="#6-å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº‹ä»¶å¯¹æ¥ï¼š" class="headerlink" title="6. å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº‹ä»¶å¯¹æ¥ï¼š"></a><strong>6. å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯äº‹ä»¶å¯¹æ¥ï¼š</strong></h2><table><thead><tr><th><strong>å®¢æˆ·ç«¯äº‹ä»¶</strong></th><th><strong>æœåŠ¡ç«¯ç›‘å¬&#x2F;è§¦å‘</strong></th><th><strong>æè¿°</strong></th></tr></thead><tbody><tr><td><code>socket.on(&quot;message&quot;)</code></td><td><code>socketManager.getIo().emit(&quot;message&quot;)</code></td><td>å¹¿æ’­æ¶ˆæ¯ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚</td></tr><tr><td><code>socket.on(&quot;activeUsers&quot;)</code></td><td>æ‰‹åŠ¨è§¦å‘ <code>activeUsers</code></td><td>æ›´æ–°å½“å‰åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€‚</td></tr><tr><td>HTTP è¯·æ±‚ <code>/api/chat</code></td><td>MongoDB æŸ¥è¯¢ <code>Message</code> è¡¨</td><td>è·å–å†å²æ¶ˆæ¯è®°å½•ã€‚</td></tr><tr><td>HTTP è¯·æ±‚ <code>/api/activeUsers</code></td><td><code>socketManager.getAllConnectedUsers()</code></td><td>è·å–æ‰€æœ‰å½“å‰åœ¨çº¿ç”¨æˆ·ã€‚</td></tr><tr><td>HTTP è¯·æ±‚ <code>/initsocket</code></td><td><code>socketManager.addUser</code></td><td>å°†ç”¨æˆ·ä¸ socket å®ä¾‹å…³è”ã€‚</td></tr></tbody></table><hr><h2 id="æ€»ç»“æµç¨‹ï¼š"><a href="#æ€»ç»“æµç¨‹ï¼š" class="headerlink" title="æ€»ç»“æµç¨‹ï¼š"></a><strong>æ€»ç»“æµç¨‹ï¼š</strong></h2><ol><li><strong>å®¢æˆ·ç«¯å¯åŠ¨</strong>ï¼ŒåŠ è½½åœ¨çº¿ç”¨æˆ·åˆ—è¡¨å’Œå†å²èŠå¤©è®°å½•ã€‚</li><li><strong>åˆå§‹åŒ– Socket è¿æ¥</strong>ï¼Œå®¢æˆ·ç«¯ç›‘å¬ <code>message</code> å’Œ <code>activeUsers</code> äº‹ä»¶ã€‚</li><li>ç”¨æˆ·é€šè¿‡è¾“å…¥æ¶ˆæ¯è§¦å‘ <code>/message</code> APIï¼ŒæœåŠ¡ç«¯ä¿å­˜æ¶ˆæ¯å¹¶é€šè¿‡ Socket.IO æ¨é€ç»™æ¥æ”¶æ–¹ã€‚</li><li>æœåŠ¡ç«¯åœ¨ç”¨æˆ·ä¸Šçº¿æˆ–ä¸‹çº¿æ—¶ï¼Œè§¦å‘ <code>activeUsers</code> äº‹ä»¶ï¼Œå®¢æˆ·ç«¯å®æ—¶æ›´æ–°åœ¨çº¿ç”¨æˆ·çŠ¶æ€ã€‚</li><li>å®¢æˆ·ç«¯ç•Œé¢é€šè¿‡ React çŠ¶æ€ç®¡ç†å®æ—¶æ›´æ–°èŠå¤©å†…å®¹å’Œç”¨æˆ·åˆ—è¡¨ã€‚</li></ol><hr><p>é€šè¿‡ä»¥ä¸Šæµç¨‹ï¼Œå‰ç«¯ React ç»„ä»¶å’ŒæœåŠ¡ç«¯ API é€šè¿‡ Socket.IO å®ç°äº†<strong>åŒå‘å®æ—¶é€šä¿¡</strong>ï¼ŒåŒæ—¶ä¿è¯äº†æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨å’Œåœ¨çº¿çŠ¶æ€ç®¡ç†ã€‚</p><h1 id="å‰åç«¯äº¤äº’é€»è¾‘"><a href="#å‰åç«¯äº¤äº’é€»è¾‘" class="headerlink" title="å‰åç«¯äº¤äº’é€»è¾‘"></a>å‰åç«¯äº¤äº’é€»è¾‘</h1><p>ä»ç”¨æˆ·è§’åº¦çœ‹ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™ã€è¿›å…¥ <strong>ALL_CHAT</strong>ï¼ˆå…¬å…±èŠå¤©ï¼‰ä»¥åŠä¸ä»–äººè¿›è¡Œç§èŠçš„æ•´ä¸ªæµç¨‹ï¼Œæ¶‰åŠä¸€ç³»åˆ—å‰åç«¯äº¤äº’ï¼Œä¸‹é¢æˆ‘ä¼šè¯¦ç»†è§£é‡Šæµç¨‹ï¼š</p><hr><h3 id="1-ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™"><a href="#1-ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™" class="headerlink" title="1. ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™"></a>1. <strong>ç¬¬ä¸€æ¬¡ç™»å½•ç½‘ç«™</strong></h3><p><strong>å‰ç«¯ï¼š</strong></p><ol><li><p><strong>ç”¨æˆ·æ‰“å¼€ç½‘ç«™</strong></p><ul><li><p>åœ¨ <code>App</code>ç»„ä»¶çš„<code>useEffect</code>ä¸­ï¼Œå‰ç«¯è°ƒç”¨<code>/api/whoami</code>æ¥å£ï¼Œæ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦å·²ç™»å½•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="string">&quot;/api/whoami&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.<span class="property">_id</span>) &#123;</span><br><span class="line">      <span class="title function_">setUserId</span>(user.<span class="property">_id</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;, []);</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œè¿”å›ç©ºå¯¹è±¡ï¼Œç”¨æˆ·æ— æ³•ä½¿ç”¨åŠŸèƒ½ï¼›å¦‚æœç™»å½•æˆåŠŸï¼Œç”¨æˆ·ä¿¡æ¯ä¼šä¿å­˜åœ¨ <code>userId</code> çŠ¶æ€ä¸­ã€‚</p></li></ul></li><li><p><strong>ç™»å½•æ“ä½œ</strong></p><ul><li><p>ç”¨æˆ·é€šè¿‡ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆä¾‹å¦‚ Googleï¼‰ç™»å½•åï¼Œå‰ç«¯ä¼šè°ƒ<code>/api/login</code>æ¥å£ï¼Œå°†ç™»å½•ä¿¡æ¯å‘é€ç»™åç«¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">post</span>(<span class="string">&quot;/api/login&quot;</span>, &#123; <span class="attr">token</span>: userToken &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">setUserId</span>(user.<span class="property">_id</span>);</span><br><span class="line">  <span class="title function_">post</span>(<span class="string">&quot;/api/initsocket&quot;</span>, &#123; <span class="attr">socketid</span>: socket.<span class="property">id</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p>ç™»å½•åï¼Œå‰ç«¯åˆå§‹åŒ–ç”¨æˆ·çš„ WebSocket è¿æ¥ï¼Œè°ƒç”¨ <code>/api/initsocket</code>ã€‚</p></li></ul></li></ol><p><strong>åç«¯ï¼š</strong></p><ol><li><code>/api/login</code> æ¥æ”¶ç”¨æˆ·çš„ç™»å½•è¯·æ±‚ï¼ŒéªŒè¯èº«ä»½åä¿å­˜ç”¨æˆ·ä¼šè¯ä¿¡æ¯ã€‚</li><li><code>/api/initsocket</code> å°†ç”¨æˆ·å’Œå…¶ WebSocket è¿æ¥ç»‘å®šï¼Œæ–¹ä¾¿åç»­æ¶ˆæ¯æ¨é€ã€‚</li></ol><hr><h3 id="2-è¿›å…¥-ALL-CHAT-å…¬å…±èŠå¤©"><a href="#2-è¿›å…¥-ALL-CHAT-å…¬å…±èŠå¤©" class="headerlink" title="2. è¿›å…¥ ALL_CHAT å…¬å…±èŠå¤©"></a>2. <strong>è¿›å…¥ ALL_CHAT å…¬å…±èŠå¤©</strong></h3><p><strong>å‰ç«¯ï¼š</strong></p><ol><li><p>ç”¨æˆ·è¿›å…¥ <code>/chat/</code> è·¯ç”±ï¼Œæ¸²æŸ“ <code>Chatbook</code> ç»„ä»¶ã€‚</p><ul><li><p>é€šè¿‡ <code>useEffect</code>è°ƒç”¨ <code>/api/activeUsers</code>æ¥å£ï¼Œè·å–æ‰€æœ‰å½“å‰æ´»è·ƒç”¨æˆ·åˆ—è¡¨ï¼ŒåŒ…æ‹¬ <code>ALL_CHAT</code>ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">get</span>(<span class="string">&quot;/api/activeUsers&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (props.<span class="property">userId</span>) &#123;</span><br><span class="line">    <span class="title function_">setActiveUsers</span>([<span class="variable constant_">ALL_CHAT</span>].<span class="title function_">concat</span>(data.<span class="property">activeUsers</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul></li><li><p><code>ChatList</code> æ¸²æŸ“ç”¨æˆ·åˆ—è¡¨ï¼š</p><ul><li>ç”¨æˆ·åˆ—è¡¨é€šè¿‡ <code>map</code> æ˜¾ç¤ºæ¯ä¸ªç”¨æˆ·ï¼Œ<code>SingleUser</code> ç»„ä»¶è´Ÿè´£æ˜¾ç¤ºå•ä¸ªç”¨æˆ·çš„åç§°ã€‚</li><li><strong><code>active</code> å±æ€§</strong> ç”¨äºæ ‡è®°å½“å‰é€‰ä¸­çš„èŠå¤©å¯¹è±¡ï¼ŒCSS å˜åŒ–è¡¨ç¤ºç”¨æˆ·å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</li><li>ç‚¹å‡»æŸä¸ªç”¨æˆ·æ—¶ï¼Œè§¦å‘ <code>props.setActiveUser(user)</code>ã€‚</li></ul></li><li><p><code>useEffect</code> ä¸­è§¦å‘åŠ è½½å†å²æ¶ˆæ¯ï¼š</p><ul><li><p>å½“ç”¨æˆ·åˆå§‹åŠ è½½ <code>ALL_CHAT</code>æˆ–ç‚¹å‡»å…¶ä»–ç”¨æˆ·æ—¶ï¼Œè°ƒç”¨ <code>loadMessageHistory</code>ï¼Œè¯·æ±‚å†å²æ¶ˆæ¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">loadMessageHistory</span> = (<span class="params">recipient</span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="string">&quot;/api/chat&quot;</span>, &#123; <span class="attr">recipient_id</span>: recipient.<span class="property">_id</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">messages</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">setActiveChat</span>(&#123;</span><br><span class="line">      <span class="attr">recipient</span>: recipient,</span><br><span class="line">      <span class="attr">messages</span>: messages,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ul></li></ol><p><strong>åç«¯ï¼š</strong></p><ol><li><p><code>/api/activeUsers</code> è¿”å›æ‰€æœ‰å½“å‰æ´»è·ƒçš„ç”¨æˆ·åˆ—è¡¨ã€‚</p></li><li><p><code>/api/chat</code>ï¼š</p><ul><li>å¦‚æœ <code>recipient_id</code> æ˜¯ <code>&quot;ALL_CHAT&quot;</code>ï¼ŒæŸ¥è¯¢æ•°æ®åº“ä¸­å‘é€åˆ° <code>ALL_CHAT</code> çš„æ¶ˆæ¯ã€‚</li><li>è¿”å›è¿™äº›æ¶ˆæ¯ç»™å‰ç«¯ã€‚</li></ul></li></ol><hr><h3 id="3-ä¸ä»–äººç§èŠ"><a href="#3-ä¸ä»–äººç§èŠ" class="headerlink" title="3. ä¸ä»–äººç§èŠ"></a>3. <strong>ä¸ä»–äººç§èŠ</strong></h3><p><strong>å‰ç«¯ï¼š</strong></p><ol><li><p><strong>ç”¨æˆ·ç‚¹å‡»æŸä¸ªç”¨æˆ·</strong></p><ul><li><p>åœ¨ <code> ChatList</code>ä¸­ï¼Œç‚¹å‡»ç”¨æˆ·è§¦å‘ <code>setActiveUser(user)</code>ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setActiveUser</span> = (<span class="params">user</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (user.<span class="property">_id</span> !== activeChat.<span class="property">recipient</span>.<span class="property">_id</span>) &#123;</span><br><span class="line">    <span class="title function_">setActiveChat</span>(&#123;</span><br><span class="line">      <span class="attr">recipient</span>: user,</span><br><span class="line">      <span class="attr">messages</span>: [],</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li><p><strong><code>useEffect</code></strong> ç›‘å¬ <code>activeChat.recipient._id</code> çš„å˜åŒ–ï¼Œè°ƒç”¨ <code>loadMessageHistory</code>ï¼ŒåŠ è½½ä¸è¯¥ç”¨æˆ·çš„å†å²èŠå¤©è®°å½•ã€‚</p></li></ul></li><li><p><strong>æ¥æ”¶æ¶ˆæ¯çš„å®æ—¶æ›´æ–°</strong></p><ul><li><p>å‰ç«¯é€šè¿‡ WebSocket ç›‘å¬ <code>&quot;message&quot;</code>äº‹ä»¶ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">off</span>(<span class="string">&quot;message&quot;</span>, addMessages);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;, [activeChat.<span class="property">recipient</span>.<span class="property">_id</span>, props.<span class="property">userId</span>]);</span><br></pre></td></tr></table></figure></li><li><p>å½“æ–°æ¶ˆæ¯æ¨é€åˆ°å‰ç«¯æ—¶ï¼Œ<code>addMessages</code> ä¼šå°†æ¶ˆæ¯è¿½åŠ åˆ°å½“å‰æ´»è·ƒèŠå¤©çš„ <code>messages</code> ä¸­ã€‚</p></li></ul></li><li><p><strong>å‘é€æ¶ˆæ¯</strong>ï¼ˆå‡è®¾é€šè¿‡è¾“å…¥æ¡†å‘é€ï¼‰</p><ul><li><p>ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼Œå‰ç«¯é€šè¿‡ <code>/api/message</code>å‘åç«¯å‘é€æ¶ˆæ¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">post</span>(<span class="string">&quot;/api/message&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">recipient</span>: activeChat.<span class="property">recipient</span>,</span><br><span class="line">  <span class="attr">content</span>: messageContent,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul></li></ol><p><strong>åç«¯ï¼š</strong></p><ol><li><p><strong>å­˜å‚¨å’Œå¹¿æ’­æ¶ˆæ¯</strong></p><ul><li><p><code>/api/message</code>ä¿å­˜æ¶ˆæ¯åˆ°æ•°æ®åº“ï¼ŒåŒæ—¶é€šè¿‡ WebSocket å‘é€æ¶ˆæ¯ç»™æ¥æ”¶æ–¹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span> == <span class="string">&quot;ALL_CHAT&quot;</span>) &#123;</span><br><span class="line">  socketManager.<span class="title function_">getIo</span>().<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  socketManager</span><br><span class="line">    .<span class="title function_">getSocketFromUserID</span>(req.<span class="property">body</span>.<span class="property">recipient</span>.<span class="property">_id</span>)</span><br><span class="line">    .<span class="title function_">emit</span>(<span class="string">&quot;message&quot;</span>, message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p><strong>å®æ—¶åŒæ­¥æ´»è·ƒç”¨æˆ·</strong></p><ul><li>é€šè¿‡ WebSocket äº‹ä»¶ <code>&quot;activeUsers&quot;</code> æ¨é€å½“å‰åœ¨çº¿ç”¨æˆ·åˆ—è¡¨ã€‚</li></ul></li></ol><hr><h3 id="4-ç”¨æˆ·åˆ‡æ¢èŠå¤©å¯¹è±¡"><a href="#4-ç”¨æˆ·åˆ‡æ¢èŠå¤©å¯¹è±¡" class="headerlink" title="4. ç”¨æˆ·åˆ‡æ¢èŠå¤©å¯¹è±¡"></a>4. <strong>ç”¨æˆ·åˆ‡æ¢èŠå¤©å¯¹è±¡</strong></h3><ol><li><p>å½“ç”¨æˆ·åœ¨ <code>ChatList</code> ä¸­ç‚¹å‡»å…¶ä»–ç”¨æˆ·æ—¶ï¼š</p><ul><li><code>setActiveUser</code> æ›´æ–°å½“å‰æ´»è·ƒèŠå¤©å¯¹è±¡ï¼Œå¹¶æ¸…ç©ºæ¶ˆæ¯ã€‚</li><li><code>useEffect</code> ä¼šè‡ªåŠ¨è°ƒç”¨ <code>loadMessageHistory</code>ï¼ŒåŠ è½½ä¸æ–°ç”¨æˆ·çš„å†å²æ¶ˆæ¯ã€‚</li></ul></li><li><p><strong>åˆ‡æ¢æ—¶çš„æ¶ˆæ¯åŒæ­¥</strong></p><ul><li><p>å¦‚æœåå°æ¨é€äº†æ–°æ¶ˆæ¯ï¼Œ<code>addMessages</code>ä¼šæ£€æŸ¥æ–°æ¶ˆæ¯çš„æ¥æ”¶è€…æ˜¯å¦ä¸å½“å‰èŠå¤©å¯¹è±¡åŒ¹é…ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setActiveChat</span>(<span class="function">(<span class="params">prevActiveChat</span>) =&gt;</span> (&#123;</span><br><span class="line">  <span class="attr">recipient</span>: prevActiveChat.<span class="property">recipient</span>,</span><br><span class="line">  <span class="attr">messages</span>: prevActiveChat.<span class="property">messages</span>.<span class="title function_">concat</span>(data),</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="æ€»ç»“æµç¨‹"><a href="#æ€»ç»“æµç¨‹" class="headerlink" title="æ€»ç»“æµç¨‹"></a>æ€»ç»“æµç¨‹</h3><ol><li><p><strong>ç™»å½•æ—¶</strong>ï¼šå‰ç«¯è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯å¹¶åˆå§‹åŒ– WebSocketã€‚</p></li><li><p><strong>è¿›å…¥èŠå¤©é¡µ</strong>ï¼šåŠ è½½æ´»è·ƒç”¨æˆ·åˆ—è¡¨å’Œ <code>ALL_CHAT</code> å†å²æ¶ˆæ¯ã€‚</p></li><li><p><strong>ç‚¹å‡»ç”¨æˆ·</strong>ï¼šåŠ è½½ç§èŠå†å²æ¶ˆæ¯å¹¶åˆ‡æ¢ <code>activeChat</code>ã€‚</p></li><li><p>æ¶ˆæ¯å®æ—¶åŒæ­¥ï¼š</p><ul><li>å‰ç«¯ç›‘å¬ <code>&quot;message&quot;</code>ï¼Œå°†æ–°æ¶ˆæ¯è¿½åŠ åˆ°å½“å‰èŠå¤©ä¸­ã€‚</li><li>åç«¯é€šè¿‡ WebSocket æ¨é€æ¶ˆæ¯ç»™æ¥æ”¶æ–¹æˆ–å¹¿æ’­ç»™æ‰€æœ‰ç”¨æˆ·ã€‚</li></ul></li><li><p><strong>åˆ‡æ¢èŠå¤©</strong>ï¼š<code>setActiveUser</code> åˆ‡æ¢èŠå¤©å¯¹è±¡ï¼Œé‡æ–°åŠ è½½å¯¹åº”å†å²æ¶ˆæ¯ã€‚</p></li></ol><hr><p>è¿™æ ·ï¼Œæ•´ä¸ªå‰åç«¯äº¤äº’çš„é€»è¾‘å°±å®Œæ•´äº†ï¼æ ¸å¿ƒæ˜¯é€šè¿‡ API åŠ è½½å†å²æ¶ˆæ¯ã€WebSocket å®æ—¶åŒæ­¥æ–°æ¶ˆæ¯ï¼Œä»¥åŠ <code>activeChat</code> çŠ¶æ€æ§åˆ¶å½“å‰æ´»è·ƒèŠå¤©å¯¹è±¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åäº”)-åˆè¯†Typescript</title>
      <link href="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/"/>
      <url>/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/</url>
      
        <content type="html"><![CDATA[<p><strong>TS é¡¹ç›®éª¨æ¶</strong>ï¼š<a href="https://github.com/weblab-workshops/skeleton/tree/typescript">weblab-workshops&#x2F;skeleton at typescript</a></p><p><strong>åœ¨çº¿ç¼–è¾‘ç½‘ç«™</strong>: <a href="https://www.typescriptlang.org/play/#code/PTAEHUFMBsGMHsC2lQBd5oBYoCoE8AHSAZVgCcBLA1UABWgEM8BzM+AVwDsATAGiwoBnUENANQAd0gAjQRVSQAUCEmYKsTKGYUAbpGF4OY0BoadYKdJMoL+gzAzIoz3UNEiPOofEVKVqAHSKymAAmkYI7NCuqGqcANag8ABmIjQUXrFOKBJMggBcISGgoAC0oACCbvCwDKgU8JkY7p7ehCTkVDQS2E6gnPCxGcwmZqDSTgzxxWWVoASMFmgYkAAeRJTInN3ymj4d-jSCeNsMq-wuoPaOltigAKoASgAywhK7SbGQZIIz5VWCFzSeCrZagNYbChbHaxUDcCjJZLfSDbExIAgUdxkUBIursJzCFJtXydajBBCcQQ0MwAUVWDEQC0gADVHBQGNJ3KAALygABEAAkYNAMOB4GRonzFBTBPB3AERcwABS0+mM9ysygc9wASmCKhwzQ8ZC8iHFzmB7BoXzcZmY7AYzEg-Fg0HUiQ58D0Ii8fLpDKZgj5SWxfPADlQAHJhAA5SASPlBFQAeS+ZHegmdWkgR1QjgUrmkeFATjNOmGWH0KAQiGhwkuNok4uiIgMHGxCyYrA4PCCJSAA">TypeScript: TS Playground - An online editor for exploring TypeScript and JavaScript</a></p><h1 id="é™æ€ç±»å‹"><a href="#é™æ€ç±»å‹" class="headerlink" title="é™æ€ç±»å‹"></a>é™æ€ç±»å‹</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161609807.png" alt="image-20241218161609807"></p><h1 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161637028.png" alt="image-20241218161637028"></p><h1 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161645509.png" alt="image-20241218161645509"></p><h1 id="ä¸€èˆ¬ç±»å‹"><a href="#ä¸€èˆ¬ç±»å‹" class="headerlink" title="ä¸€èˆ¬ç±»å‹"></a>ä¸€èˆ¬ç±»å‹</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161709511.png" alt="image-20241218161709511"></p><h2 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h2><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161809070.png" alt="image-20241218161809070"></p><h1 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h1><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161820205.png" alt="image-20241218161820205"></p><h2 id="å¼‚æ­¥å‡½æ•°"><a href="#å¼‚æ­¥å‡½æ•°" class="headerlink" title="å¼‚æ­¥å‡½æ•°"></a>å¼‚æ­¥å‡½æ•°</h2><p><img src="/2024/12/18/%E5%89%8D%E7%AB%AF-MIT-Web-15-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86Typescript/image-20241218161838027.png" alt="image-20241218161838027"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-CSS30å¤©æŒ‘æˆ˜-day1</title>
      <link href="/2024/12/13/%E5%89%8D%E7%AB%AF-CSS-30%E5%A4%A9%E6%8C%91%E6%88%98-2-CSS30%E5%A4%A9%E6%8C%91%E6%88%98-day1/"/>
      <url>/2024/12/13/%E5%89%8D%E7%AB%AF-CSS-30%E5%A4%A9%E6%8C%91%E6%88%98-2-CSS30%E5%A4%A9%E6%8C%91%E6%88%98-day1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1-CSS30å¤©æŒ‘æˆ˜-åºè¨€</title>
      <link href="/2024/12/13/%E5%89%8D%E7%AB%AF-CSS-30%E5%A4%A9%E6%8C%91%E6%88%98-1-CSS30%E5%A4%A9%E6%8C%91%E6%88%98-%E5%BA%8F%E8%A8%80/"/>
      <url>/2024/12/13/%E5%89%8D%E7%AB%AF-CSS-30%E5%A4%A9%E6%8C%91%E6%88%98-1-CSS30%E5%A4%A9%E6%8C%91%E6%88%98-%E5%BA%8F%E8%A8%80/</url>
      
        <content type="html"><![CDATA[<p>30 å¤© CSS3 æ˜¯ä¸€ä¸ªæ—¨åœ¨é€šè¿‡æ¯å¤©ä½¿ç”¨ HTML5 å’Œ CSS3 åˆ›å»ºå°å‹é¡¹ç›®æ¥å¸®åŠ©æ‚¨æå‡ç¼–ç æŠ€èƒ½çš„æŒ‘æˆ˜ã€‚</p><h1 id="é¡¹ç›®åˆ—è¡¨"><a href="#é¡¹ç›®åˆ—è¡¨" class="headerlink" title="é¡¹ç›®åˆ—è¡¨"></a>é¡¹ç›®åˆ—è¡¨</h1><ul><li><a href>ç¬¬ 01 å¤© - åˆ†å±‚ç¤¾äº¤åª’ä½“å›¾æ ‡</a></li><li><a href>ç¬¬ 02 å¤© - åŠ¨ç”»åŠ è½½å™¨</a></li><li><a href>ç¬¬ 03 å¤© - åˆ‡æ¢ div æ—¶çš„æ–‡å­—é¢œè‰²å˜åŒ–</a></li><li><a href>ç¬¬ 04 å¤© - å¸¦æ•ˆæœçš„æŒ‰é’®</a></li><li><a href>ç¬¬ 05 å¤© - å‘¼å¸æ•ˆæœ</a></li><li><a href>ç¬¬ 06 å¤© - é—ªç”µæ–‡å­—æ•ˆæœ</a></li><li><a href>ç¬¬ 07 å¤© - åŠ¨ç”»é¢„åŠ è½½å™¨</a></li><li><a href>ç¬¬ 08 å¤© - è·³åŠ¨çš„å¿ƒå½¢</a></li><li><a href>ç¬¬ 09 å¤© - ç‰›é¡¿æ‘†</a></li><li><a href>ç¬¬ 10 å¤© - æ›¿æ¢æ–‡å­—åŠ¨ç”»</a></li><li><a href>ç¬¬ 11 å¤© - æ‚¬åœæ•ˆæœæŒ‰é’®</a></li><li><a href>ç¬¬ 12 å¤© - é¼ æ ‡æ‚¬åœæ—¶å¡«å……æ•ˆæœ</a></li><li><a href>ç¬¬ 13 å¤© - åŠ¨ç”»åŠ è½½æ•ˆæœ</a></li><li><a href>ç¬¬ 14 å¤© - åŠ¨ç”»æ–‡å­—èƒŒæ™¯</a></li><li><a href>ç¬¬ 15 å¤© - æµ®åŠ¨æ–‡å­—æ•ˆæœ</a></li><li><a href>ç¬¬ 16 å¤© - åŠ¨ç”»æŒ‰é’®</a></li><li><a href>ç¬¬ 17 å¤© - åŠ¨ç”»åŠ è½½å™¨</a></li><li><a href>ç¬¬ 18 å¤© - çƒŸé›¾æ–‡å­—æ•ˆæœ</a></li><li><a href>ç¬¬ 19 å¤© - ç²’å­èƒŒæ™¯åŠ¨ç”»</a></li><li><a href>ç¬¬ 20 å¤© - æŒ‰é’®åŠ¨ç”»æ•ˆæœ</a></li><li><a href>ç¬¬ 21 å¤© - å¼¹è·³çƒ</a></li><li><a href>ç¬¬ 22 å¤© - åŠ¨ç”»å›¾æ ‡</a></li><li><a href>ç¬¬ 23 å¤© - æ‚¬åœæŒ‰é’®æ•ˆæœ</a></li><li><a href>ç¬¬ 24 å¤© - åŠ¨ç”»é¢„åŠ è½½å™¨</a></li><li><a href>ç¬¬ 25 å¤© - åŠ¨ç”»å¤é€‰æ¡†</a></li><li><a href>ç¬¬ 26 å¤© - åŠ è½½åŠ¨ç”»æ•ˆæœ</a></li><li><a href>ç¬¬ 27 å¤© - å‘¼å¸æ•ˆæœ</a></li><li><a href>ç¬¬ 28 å¤© - èƒŒæ™¯è‰²åˆ‡æ¢</a></li><li><a href>ç¬¬ 29 å¤© - å“åº”å¼èœå•ï¼ˆåª’ä½“æŸ¥è¯¢ï¼‰</a></li><li><a href>ç¬¬ 30 å¤© - çƒŸèŠ±åŠ¨ç”»</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åå››)-èº«ä»½éªŒè¯</title>
      <link href="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/"/>
      <url>/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸è¦ç›´æ¥å­˜å‚¨å¯†ç "><a href="#ä¸è¦ç›´æ¥å­˜å‚¨å¯†ç " class="headerlink" title="ä¸è¦ç›´æ¥å­˜å‚¨å¯†ç "></a>ä¸è¦ç›´æ¥å­˜å‚¨å¯†ç </h1><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210222801763.png" alt="image-20241210222801763"></p><p>ç›´æ¥å­˜å‚¨å¯†ç å®¹æ˜“æ³„éœ²</p><h2 id="è§£å†³æ–¹æ³•ä¸€ï¼šä½¿ç”¨Hash"><a href="#è§£å†³æ–¹æ³•ä¸€ï¼šä½¿ç”¨Hash" class="headerlink" title="è§£å†³æ–¹æ³•ä¸€ï¼šä½¿ç”¨Hash"></a>è§£å†³æ–¹æ³•ä¸€ï¼šä½¿ç”¨Hash</h2><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210222902464.png" alt="image-20241210222902464"></p><h2 id="è§£å†³æ–¹æ³•äºŒï¼šä½¿ç”¨Googleç™»å½•"><a href="#è§£å†³æ–¹æ³•äºŒï¼šä½¿ç”¨Googleç™»å½•" class="headerlink" title="è§£å†³æ–¹æ³•äºŒï¼šä½¿ç”¨Googleç™»å½•"></a>è§£å†³æ–¹æ³•äºŒï¼šä½¿ç”¨Googleç™»å½•</h2><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210222941978.png" alt="image-20241210222941978"></p><h1 id="Sessions-Tokens-Cookie"><a href="#Sessions-Tokens-Cookie" class="headerlink" title="Sessions, Tokens, Cookie"></a>Sessions, Tokens, Cookie</h1><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210223055166.png" alt="image-20241210223055166"></p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p><strong>å®¢æˆ·ç«¯é€šè¿‡å‘é€ Cookieï¼Œå…¶ä¸­åŒ…å«äº† Session IDï¼ŒæœåŠ¡å™¨åˆ©ç”¨è¯¥ ID æ¥è¯†åˆ«ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><hr><h3 id="1-å®¢æˆ·ç«¯å‘é€è¯·æ±‚"><a href="#1-å®¢æˆ·ç«¯å‘é€è¯·æ±‚" class="headerlink" title="1. å®¢æˆ·ç«¯å‘é€è¯·æ±‚"></a>1. <strong>å®¢æˆ·ç«¯å‘é€è¯·æ±‚</strong></h3><ul><li>ç”¨æˆ·è®¿é—®ç½‘ç«™å¹¶è¿›è¡Œç™»å½•æ“ä½œï¼ˆä¾‹å¦‚ <code>/login</code>ï¼‰ã€‚</li><li>æœåŠ¡å™¨éªŒè¯ç”¨æˆ·å‡­è¯ï¼ˆå¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰åï¼Œä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªä¼šè¯ï¼ˆSessionï¼‰ã€‚</li></ul><hr><h3 id="2-æœåŠ¡å™¨ç”Ÿæˆ-Session"><a href="#2-æœåŠ¡å™¨ç”Ÿæˆ-Session" class="headerlink" title="2. æœåŠ¡å™¨ç”Ÿæˆ Session"></a>2. <strong>æœåŠ¡å™¨ç”Ÿæˆ Session</strong></h3><ul><li><p><strong>ç”Ÿæˆ Session ID</strong>ï¼šæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ Tokenï¼ˆå¦‚ <code>mZIYWQyNTkyMz</code>ï¼‰ï¼Œå¹¶å°†å…¶ä½œä¸ºè¯¥ç”¨æˆ·ä¼šè¯çš„æ ‡è¯†ã€‚</p></li><li><p>å­˜å‚¨ä¼šè¯æ•°æ®ï¼šæœåŠ¡å™¨ä¼šå°†ç”¨æˆ·çš„ç›¸å…³æ•°æ®ï¼ˆå¦‚ç”¨æˆ·å <code>username</code> å’Œç”¨æˆ· ID <code>user_id</code>ï¼‰ä¸è¯¥ Session ID å…³è”ï¼Œå­˜å‚¨åœ¨ä¼šè¯å­˜å‚¨ï¼ˆå¦‚å†…å­˜ã€æ•°æ®åº“ã€Redis ç­‰ï¼‰ä¸­ã€‚</p><ul><li><p>ä¾‹å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;Session ID&quot;</span><span class="punctuation">:</span> <span class="string">&quot;mZIYWQyNTkyMz&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;User Info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;abbychou&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;user_id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1627201&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="3-å°†-Session-ID-è¿”å›å®¢æˆ·ç«¯"><a href="#3-å°†-Session-ID-è¿”å›å®¢æˆ·ç«¯" class="headerlink" title="3. å°† Session ID è¿”å›å®¢æˆ·ç«¯"></a>3. <strong>å°† Session ID è¿”å›å®¢æˆ·ç«¯</strong></h3><ul><li><p>æœåŠ¡å™¨å°†ç”Ÿæˆçš„ Session ID é€šè¿‡ HTTP å“åº”å¤´ä¸­çš„ <code>Set-Cookie</code> å­—æ®µå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p></li><li><p>æµè§ˆå™¨ä¼šå°† Session ID ä¿å­˜åˆ° Cookie ä¸­ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: session_id=mZIYWQyNTkyMz; Path=/; HttpOnly</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="4-å®¢æˆ·ç«¯æºå¸¦-Cookie-å‘èµ·è¯·æ±‚"><a href="#4-å®¢æˆ·ç«¯æºå¸¦-Cookie-å‘èµ·è¯·æ±‚" class="headerlink" title="4. å®¢æˆ·ç«¯æºå¸¦ Cookie å‘èµ·è¯·æ±‚"></a>4. <strong>å®¢æˆ·ç«¯æºå¸¦ Cookie å‘èµ·è¯·æ±‚</strong></h3><ul><li><p>åœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†å­˜å‚¨çš„ Cookieï¼ˆåŒ…æ‹¬ Session IDï¼‰é™„åŠ åˆ° HTTP è¯·æ±‚å¤´ä¸­å‘é€ç»™æœåŠ¡å™¨ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: session_id=mZIYWQyNTkyMz</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="5-æœåŠ¡å™¨è¯†åˆ«ä¼šè¯"><a href="#5-æœåŠ¡å™¨è¯†åˆ«ä¼šè¯" class="headerlink" title="5. æœåŠ¡å™¨è¯†åˆ«ä¼šè¯"></a>5. <strong>æœåŠ¡å™¨è¯†åˆ«ä¼šè¯</strong></h3><ul><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œæå–è¯·æ±‚å¤´ä¸­çš„ Session IDã€‚</li><li>åœ¨ä¼šè¯å­˜å‚¨ä¸­æŸ¥æ‰¾ä¸è¯¥ Session ID å¯¹åº”çš„ä¼šè¯æ•°æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰ã€‚</li><li>å¦‚æœæ‰¾åˆ°æœ‰æ•ˆçš„ä¼šè¯ï¼Œåˆ™å¯ä»¥è¯†åˆ«ç”¨æˆ·å¹¶æ‰§è¡Œåç»­æ“ä½œï¼ˆå¦‚è¿”å›ç”¨æˆ·çš„ç§äººæ•°æ®æˆ–æˆæƒæ“ä½œï¼‰ã€‚</li></ul><hr><h3 id="6-ä¼šè¯ç®¡ç†"><a href="#6-ä¼šè¯ç®¡ç†" class="headerlink" title="6. ä¼šè¯ç®¡ç†"></a>6. <strong>ä¼šè¯ç®¡ç†</strong></h3><ul><li><p>ä¼šè¯çš„è¶…æ—¶ä¸é”€æ¯ï¼š</p><ul><li>å¦‚æœç”¨æˆ·é•¿æ—¶é—´ä¸æ´»åŠ¨ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå°†è¯¥ä¼šè¯æ ‡è®°ä¸ºè¿‡æœŸã€‚</li><li>å½“ç”¨æˆ·ä¸»åŠ¨æ³¨é”€ï¼ˆLogoutï¼‰æ—¶ï¼ŒæœåŠ¡å™¨ä¼šåˆ é™¤è¯¥ä¼šè¯è®°å½•ã€‚</li></ul></li><li><p>Token çš„æ›´æ–°ï¼š</p><ul><li>åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šå®šæœŸæ›´æ–° Session Token ä»¥å¢å¼ºå®‰å…¨æ€§ï¼ˆä¾‹å¦‚é˜²æ­¢ Session å›ºå®šæ”»å‡»ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><p>å®¢æˆ·ç«¯çš„ Cookie æ˜¯å­˜å‚¨ Session Token çš„è½½ä½“ï¼Œè€ŒæœåŠ¡å™¨é€šè¿‡ Session Token æ¥æŸ¥æ‰¾å¹¶ç®¡ç†ç”¨æˆ·çš„ä¼šè¯æ•°æ®ã€‚ä¸¤è€…é…åˆä½¿ç”¨ï¼Œå®ç°äº†åœ¨æ— çŠ¶æ€çš„ HTTP åè®®ä¸­ç»´æŠ¤ç”¨æˆ·çŠ¶æ€çš„åŠŸèƒ½ã€‚</p><h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><p><strong>Sessionï¼ˆä¼šè¯ï¼‰</strong> æ˜¯ Web å¼€å‘ä¸­çš„ä¸€ä¸ªæ¦‚å¿µï¼Œè¡¨ç¤ºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„ä¸€æ¬¡å¯¹è¯æˆ–äº¤äº’çŠ¶æ€ã€‚å®ƒæ˜¯ç”¨äºåœ¨æ— çŠ¶æ€çš„ HTTP åè®®ä¸Šå®ç°çŠ¶æ€ä¿æŒçš„æœºåˆ¶ï¼Œä½¿æœåŠ¡å™¨èƒ½å¤Ÿåœ¨å¤šä¸ªè¯·æ±‚ä¹‹é—´è®°ä½ç”¨æˆ·çš„ä¿¡æ¯ã€‚ä»¥ä¸‹æ˜¯å¯¹ Session çš„è¯¦ç»†è§£é‡Šï¼š</p><hr><h3 id="Session-çš„å®šä¹‰"><a href="#Session-çš„å®šä¹‰" class="headerlink" title="Session çš„å®šä¹‰"></a><strong>Session çš„å®šä¹‰</strong></h3><ul><li><strong>Session</strong> æ˜¯ä¸€ç§çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·åœ¨æœåŠ¡å™¨ä¸Šçš„æ´»åŠ¨ã€‚å®ƒé€šå¸¸åœ¨ç”¨æˆ·ç™»å½•ã€è®¿é—®å—ä¿æŠ¤èµ„æºæˆ–è¿›è¡Œå¤šæ­¥æ“ä½œï¼ˆå¦‚è´­ç‰©è½¦ã€è¡¨å•å¡«å†™ç­‰ï¼‰æ—¶ä½¿ç”¨ã€‚</li><li>åœ¨ Web åº”ç”¨ä¸­ï¼ŒHTTP æ˜¯æ— çŠ¶æ€çš„åè®®ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡ HTTP è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰è®°å¿†ä»»ä½•ä¹‹å‰çš„è¯·æ±‚ã€‚Session é€šè¿‡åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜ç”¨æˆ·çš„ä¼šè¯æ•°æ®ï¼Œä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºä¸€ä¸ªâ€œä¼šè¯â€ï¼Œä»è€Œå®ç°çŠ¶æ€ä¿æŒã€‚</li></ul><hr><h3 id="Session-çš„å·¥ä½œåŸç†"><a href="#Session-çš„å·¥ä½œåŸç†" class="headerlink" title="Session çš„å·¥ä½œåŸç†"></a><strong>Session çš„å·¥ä½œåŸç†</strong></h3><ol><li><strong>ä¼šè¯çš„å¼€å§‹</strong>ï¼š<ul><li>å½“ç”¨æˆ·é¦–æ¬¡è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼ŒæœåŠ¡å™¨ä¸ºè¯¥ç”¨æˆ·åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ Sessionã€‚</li><li>æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼ˆé€šå¸¸ç§°ä¸º <strong>Session ID</strong>ï¼‰ï¼Œç”¨æ¥æ ‡è¯†è¿™ä¸ªä¼šè¯ã€‚</li></ul></li><li><strong>ä¼šè¯çš„æ ‡è¯†</strong>ï¼š<ul><li>æœåŠ¡å™¨ä¼šå°†ç”Ÿæˆçš„ <strong>Session ID</strong> å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œé€šå¸¸é€šè¿‡ <strong>Cookie</strong> çš„æ–¹å¼ã€‚</li><li>å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¼šä¿å­˜è¿™ä¸ª <strong>Session ID</strong>ï¼Œå¹¶åœ¨åç»­è¯·æ±‚ä¸­è‡ªåŠ¨å°†å…¶é™„åŠ åˆ° HTTP è¯·æ±‚ä¸­ã€‚</li></ul></li><li><strong>ä¼šè¯çš„æ•°æ®å­˜å‚¨</strong>ï¼š<ul><li>æœåŠ¡å™¨ç«¯ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ˆå¦‚å†…å­˜ã€æ•°æ®åº“æˆ–ç¼“å­˜ï¼‰ï¼Œç”¨äºå­˜å‚¨ä¸ä¼šè¯ç›¸å…³çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼š<ul><li>ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯</li><li>è´­ç‰©è½¦å†…å®¹</li><li>è¡¨å•æ•°æ®ç­‰</li></ul></li></ul></li><li><strong>ä¼šè¯çš„å»¶ç»­</strong>ï¼š<ul><li>ç”¨æˆ·åœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚ä¸­ï¼Œæµè§ˆå™¨ä¼šå°†å­˜å‚¨çš„ <strong>Session ID</strong> å‘é€ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡ <strong>Session ID</strong> æ£€ç´¢ç”¨æˆ·çš„ä¼šè¯æ•°æ®ï¼Œä»è€Œäº†è§£ç”¨æˆ·çš„èº«ä»½æˆ–å½“å‰çŠ¶æ€ã€‚</li></ul></li><li><strong>ä¼šè¯çš„ç»“æŸ</strong>ï¼š<ul><li>ä¼šè¯ä¼šåœ¨ä»¥ä¸‹æƒ…å†µä¹‹ä¸€ç»ˆæ­¢ï¼š<ul><li>ç”¨æˆ·ä¸»åŠ¨æ³¨é”€ï¼ˆLogoutï¼‰ã€‚</li><li>ä¼šè¯è¶…æ—¶ï¼ˆInactivity Timeoutï¼‰ï¼Œå³ç”¨æˆ·é•¿æ—¶é—´æœªä¸æœåŠ¡å™¨äº¤äº’ã€‚</li><li>æœåŠ¡å™¨é‡å¯æˆ–æ¸…ç†ä¼šè¯æ•°æ®ã€‚</li></ul></li></ul></li></ol><hr><h3 id="Session-çš„å®ç°æ–¹å¼"><a href="#Session-çš„å®ç°æ–¹å¼" class="headerlink" title="Session çš„å®ç°æ–¹å¼"></a><strong>Session çš„å®ç°æ–¹å¼</strong></h3><p>Session é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><ol><li><strong>Session ID</strong>ï¼š<ul><li>Session çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</li><li>ä¸€èˆ¬æ˜¯éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œé€šå¸¸ä½¿ç”¨åŠ å¯†æŠ€æœ¯ç”Ÿæˆï¼Œç¡®ä¿éš¾ä»¥é¢„æµ‹å’Œç¯¡æ”¹ã€‚</li></ul></li><li><strong>Session æ•°æ®å­˜å‚¨</strong>ï¼š<ul><li>Session æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå¯ä»¥å­˜å‚¨åœ¨ä»¥ä¸‹ä½ç½®ï¼š<ul><li><strong>å†…å­˜</strong>ï¼šé€‚ç”¨äºå°è§„æ¨¡åº”ç”¨ï¼Œä½†ä¸é€‚åˆåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li><li><strong>æ•°æ®åº“</strong>ï¼šé€‚ç”¨äºéœ€è¦æŒä¹…åŒ–ä¼šè¯çš„åœºæ™¯ã€‚</li><li><strong>ç¼“å­˜ç³»ç»Ÿ</strong>ï¼ˆå¦‚ Redisï¼‰ï¼šé€‚ç”¨äºé«˜å¹¶å‘å’Œåˆ†å¸ƒå¼ç³»ç»Ÿã€‚</li></ul></li></ul></li><li><strong>Session ID çš„ä¼ é€’æ–¹å¼</strong>ï¼š<ul><li><strong>Cookie</strong>ï¼šæœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œæµè§ˆå™¨è‡ªåŠ¨å¤„ç†ã€‚</li><li><strong>URL å‚æ•°</strong>ï¼šé€šè¿‡åœ¨ URL ä¸­é™„åŠ  Session IDï¼Œä½†ä¸å®‰å…¨ã€‚</li><li><strong>éšè—å­—æ®µ</strong>ï¼šåœ¨è¡¨å•æäº¤æ—¶é™„åŠ ã€‚</li></ul></li></ol><hr><h3 id="Session-çš„ç‰¹ç‚¹"><a href="#Session-çš„ç‰¹ç‚¹" class="headerlink" title="Session çš„ç‰¹ç‚¹"></a><strong>Session çš„ç‰¹ç‚¹</strong></h3><ol><li><strong>æœåŠ¡å™¨ç«¯çŠ¶æ€</strong>ï¼š<ul><li>Session æ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯ä»…ä¿å­˜ Session IDã€‚</li><li>ç›¸è¾ƒäº Cookieï¼ŒSession æ›´å®‰å…¨ï¼Œå› ä¸ºæ•æ„Ÿæ•°æ®ä¸ä¼šå­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚</li></ul></li><li><strong>çŸ­æœŸæœ‰æ•ˆ</strong>ï¼š<ul><li>Session çš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸ä¸ä¼šè¯æ—¶é—´ä¸€è‡´ã€‚ä¼šè¯ç»“æŸåï¼ŒSession æ•°æ®ä¼šè¢«æ¸…é™¤ã€‚</li></ul></li><li><strong>ä¾èµ–äº Session ID</strong>ï¼š<ul><li>å®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œå¿…é¡»æºå¸¦ Session IDï¼ŒæœåŠ¡å™¨æ‰èƒ½è¯†åˆ«å¹¶æ¢å¤ä¼šè¯ã€‚</li></ul></li></ol><hr><h3 id="Session-å’Œ-Cookie-çš„åŒºåˆ«"><a href="#Session-å’Œ-Cookie-çš„åŒºåˆ«" class="headerlink" title="Session å’Œ Cookie çš„åŒºåˆ«"></a><strong>Session å’Œ Cookie çš„åŒºåˆ«</strong></h3><table><thead><tr><th>ç‰¹æ€§</th><th><strong>Session</strong></th><th><strong>Cookie</strong></th></tr></thead><tbody><tr><td>å­˜å‚¨ä½ç½®</td><td>æœåŠ¡å™¨ç«¯</td><td>å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰</td></tr><tr><td>æ•°æ®å¤§å°</td><td>è¾ƒå¤§ï¼ˆå–å†³äºæœåŠ¡å™¨å­˜å‚¨èƒ½åŠ›ï¼‰</td><td>è¾ƒå°ï¼ˆä¸€èˆ¬é™åˆ¶ä¸º 4KBï¼‰</td></tr><tr><td>å®‰å…¨æ€§</td><td>æ›´å®‰å…¨ï¼Œæ•°æ®ä¸æš´éœ²ç»™å®¢æˆ·ç«¯</td><td>è¾ƒä¸å®‰å…¨ï¼Œæ•°æ®å¯èƒ½è¢«ç¯¡æ”¹æˆ–ç›—å–</td></tr><tr><td>ç”Ÿå‘½å‘¨æœŸ</td><td>é€šå¸¸çŸ­æœŸæœ‰æ•ˆ</td><td>å¯è®¾ç½®é•¿æœŸæœ‰æ•ˆ</td></tr><tr><td>ä¾èµ–æ€§</td><td>ä¾èµ– Session ID</td><td>æ— éœ€ä¾èµ–æœåŠ¡å™¨</td></tr></tbody></table><hr><h3 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a><strong>ä¸¾ä¾‹è¯´æ˜</strong></h3><h4 id="åœºæ™¯ï¼šè´­ç‰©è½¦åŠŸèƒ½"><a href="#åœºæ™¯ï¼šè´­ç‰©è½¦åŠŸèƒ½" class="headerlink" title="åœºæ™¯ï¼šè´­ç‰©è½¦åŠŸèƒ½"></a>åœºæ™¯ï¼šè´­ç‰©è½¦åŠŸèƒ½</h4><ol><li>ç”¨æˆ·è®¿é—®ç”µå•†ç½‘ç«™ï¼Œæ·»åŠ å•†å“åˆ°è´­ç‰©è½¦ã€‚</li><li>æœåŠ¡å™¨ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ª Sessionï¼Œç”Ÿæˆä¸€ä¸ª Session IDï¼Œå¹¶é€šè¿‡ Cookie å‘é€ç»™ç”¨æˆ·ã€‚</li><li>æœåŠ¡å™¨åœ¨ Session ä¸­ä¿å­˜è´­ç‰©è½¦æ•°æ®ï¼ˆå¦‚å•†å“ ID å’Œæ•°é‡ï¼‰ã€‚</li><li>ç”¨æˆ·åˆ·æ–°é¡µé¢æˆ–ç»§ç»­è´­ç‰©æ—¶ï¼Œæµè§ˆå™¨å‘é€ Cookie ä¸­çš„ Session ID ç»™æœåŠ¡å™¨ã€‚</li><li>æœåŠ¡å™¨é€šè¿‡ Session ID æ£€ç´¢è´­ç‰©è½¦æ•°æ®ï¼Œå¹¶è¿”å›ç»™ç”¨æˆ·ã€‚</li></ol><hr><h3 id="Session-çš„å®‰å…¨æ€§"><a href="#Session-çš„å®‰å…¨æ€§" class="headerlink" title="Session çš„å®‰å…¨æ€§"></a><strong>Session çš„å®‰å…¨æ€§</strong></h3><ol><li><strong>é˜²æ­¢ Session ID è¢«ç›—ç”¨</strong>ï¼š<ul><li>ä½¿ç”¨ HTTPS åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œé˜²æ­¢ Session ID åœ¨ç½‘ç»œä¸­è¢«çªƒå–ã€‚</li><li>è®¾ç½® Cookie çš„ <code>HttpOnly</code> å’Œ <code>Secure</code> å±æ€§ã€‚</li></ul></li><li><strong>é˜²æ­¢ä¼šè¯åŠ«æŒ</strong>ï¼š<ul><li>å®šæœŸæ›´æ¢ Session IDã€‚</li><li>ä½¿ç”¨ IP ç»‘å®šã€ç”¨æˆ·ä»£ç†éªŒè¯ç­‰æªæ–½ã€‚</li></ul></li><li><strong>è®¾ç½®ä¼šè¯è¿‡æœŸæ—¶é—´</strong>ï¼š<ul><li>é¿å…é•¿æœŸæœªä½¿ç”¨çš„ Session å ç”¨æœåŠ¡å™¨èµ„æºã€‚</li></ul></li></ol><h2 id="Tokenï¼ŒCookie"><a href="#Tokenï¼ŒCookie" class="headerlink" title="Tokenï¼ŒCookie"></a>Tokenï¼ŒCookie</h2><p><strong>Session Token</strong> å’Œ <strong>Cookie</strong> æ˜¯ Web å¼€å‘ä¸­ç”¨äºå®ç°ç”¨æˆ·ä¼šè¯ç®¡ç†çš„ä¸¤ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒä»¬åˆ†åˆ«åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯æœ‰ä¸åŒçš„ä½œç”¨ã€‚è®©æˆ‘ä»¬è¯¦ç»†è§£é‡Šè¿™ä¸¤ä¸ªæ¦‚å¿µï¼š</p><h3 id="1-Session-Tokenï¼ˆä¼šè¯ä»¤ç‰Œï¼‰"><a href="#1-Session-Tokenï¼ˆä¼šè¯ä»¤ç‰Œï¼‰" class="headerlink" title="1. Session Tokenï¼ˆä¼šè¯ä»¤ç‰Œï¼‰"></a>1. <strong>Session Tokenï¼ˆä¼šè¯ä»¤ç‰Œï¼‰</strong></h3><p><strong>Session Token</strong> æ˜¯ä¸€ä¸ªç”±æœåŠ¡å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚å®ƒé€šå¸¸æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç”¨äºä¸æœåŠ¡å™¨ç«¯çš„ä¼šè¯æ•°æ®è¿›è¡Œå…³è”ï¼Œç¡®ä¿æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«ä¸€ä¸ªç‰¹å®šçš„ç”¨æˆ·ï¼Œå¹¶ç»´æŒè¯¥ç”¨æˆ·çš„ä¼šè¯çŠ¶æ€ã€‚</p><ul><li><strong>ç”Ÿæˆ</strong>ï¼šå½“ç”¨æˆ·ç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®ç”¨æˆ·çš„èº«ä»½ç”Ÿæˆä¸€ä¸ª Session Tokenã€‚è¿™ä¸ª Token é€šå¸¸æ˜¯ä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸€ç»„å­—ç¬¦ï¼ˆä¾‹å¦‚ï¼š<code>e4f08d8bf5f9e34a34f1c6d6ed567b9c</code>ï¼‰ã€‚</li><li><strong>å­˜å‚¨</strong>ï¼šSession Token åœ¨æœåŠ¡å™¨ç«¯é€šå¸¸å­˜å‚¨åœ¨ä¸€ä¸ªä¼šè¯ç®¡ç†ç³»ç»Ÿä¸­ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªæ•°æ®åº“ã€å†…å­˜å­˜å‚¨æˆ–è€…åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆå¦‚ Redisï¼‰ã€‚æœåŠ¡å™¨é€šè¿‡è¿™ä¸ª Token æŸ¥æ‰¾å¯¹åº”çš„ä¼šè¯æ•°æ®ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿¡æ¯ã€è®¿é—®æƒé™ç­‰ã€‚</li><li><strong>ä½œç”¨</strong>ï¼šSession Token çš„ä½œç”¨æ˜¯ä¿æŒç”¨æˆ·çš„èº«ä»½çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨é€šè¿‡ Session Token è¯†åˆ«ç”¨æˆ·ï¼Œé¿å…ç”¨æˆ·æ¯æ¬¡è¯·æ±‚éƒ½é‡æ–°è¿›è¡Œèº«ä»½éªŒè¯ã€‚</li><li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šSession Token çš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸ä¸ç”¨æˆ·çš„ä¼šè¯æ—¶é—´ä¸€è‡´ã€‚ä¼šè¯ç»“æŸæˆ–è¶…æ—¶åï¼ŒSession Token ä¼šå¤±æ•ˆã€‚</li></ul><h3 id="2-Cookieï¼ˆæµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶ï¼‰"><a href="#2-Cookieï¼ˆæµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶ï¼‰" class="headerlink" title="2. Cookieï¼ˆæµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶ï¼‰"></a>2. <strong>Cookieï¼ˆæµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶ï¼‰</strong></h3><p><strong>Cookie</strong> æ˜¯æµè§ˆå™¨ç”¨äºå­˜å‚¨å°é‡æ•°æ®ï¼ˆå¦‚ Session Tokenï¼‰çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒç”±æœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œå¹¶ç”±å®¢æˆ·ç«¯çš„æµè§ˆå™¨åœ¨éšåçš„è¯·æ±‚ä¸­è‡ªåŠ¨æºå¸¦è¿”å›æœåŠ¡å™¨ã€‚</p><ul><li><p><strong>å­˜å‚¨</strong>ï¼šCookie è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¸­ï¼Œæ˜¯ä¸€äº›å°æ–‡ä»¶ï¼Œé€šå¸¸ä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª Session Token çš„ Cookie å¯èƒ½æ˜¯è¿™æ ·ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Name: session_id</span><br><span class="line">Value: e4f08d8bf5f9e34a34f1c6d6ed567b9c</span><br><span class="line">Domain: example.com</span><br><span class="line">Path: /</span><br><span class="line">Expiry: Session-based (æˆ–æŒ‡å®šæ—¶é—´)</span><br></pre></td></tr></table></figure></li><li><p><strong>ä½œç”¨</strong>ï¼šCookie ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å­˜å‚¨ä¿¡æ¯ï¼ˆå¦‚ Session Tokenï¼‰ï¼Œå¹¶åœ¨ç”¨æˆ·ä¸æœåŠ¡å™¨çš„äº¤äº’ä¸­è‡ªåŠ¨æºå¸¦è¿™äº›ä¿¡æ¯ã€‚æ¯æ¬¡ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°† Cookie ä¸­çš„ Session Token é™„åŠ åˆ°è¯·æ±‚å¤´ä¸­ï¼ŒæœåŠ¡å™¨åˆ©ç”¨è¿™ä¸ª Token æŸ¥æ‰¾ä¼šè¯ä¿¡æ¯å¹¶è¯†åˆ«ç”¨æˆ·èº«ä»½ã€‚</p></li><li><p><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼š</p><ul><li><strong>Session Cookie</strong>ï¼šæ²¡æœ‰è®¾ç½®æ˜ç¡®è¿‡æœŸæ—¶é—´çš„ Cookieï¼Œé€šå¸¸åœ¨æµè§ˆå™¨å…³é—­æ—¶è¢«åˆ é™¤ã€‚</li><li><strong>Persistent Cookieï¼ˆæŒä¹…åŒ– Cookieï¼‰</strong>ï¼šæœ‰æ˜ç¡®è¿‡æœŸæ—¶é—´çš„ Cookieï¼Œä¼šåœ¨æŒ‡å®šçš„æ—¶é—´ç‚¹è¿‡æœŸã€‚</li></ul></li><li><p><strong>ä½œç”¨èŒƒå›´</strong>ï¼šCookie å—é™äºå…¶è®¾ç½®çš„ <strong>Domain</strong> å’Œ <strong>Path</strong>ã€‚ä¾‹å¦‚ï¼ŒCookie å¯èƒ½åªå¯¹ <code>example.com</code> æˆ– <code>sub.example.com</code> ç”Ÿæ•ˆã€‚</p></li></ul><h3 id="äºŒè€…çš„å…³ç³»å’Œé…åˆ"><a href="#äºŒè€…çš„å…³ç³»å’Œé…åˆ" class="headerlink" title="äºŒè€…çš„å…³ç³»å’Œé…åˆ"></a><strong>äºŒè€…çš„å…³ç³»å’Œé…åˆ</strong></h3><ul><li><strong>Session Token</strong> æ˜¯æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„æ ‡è¯†ç¬¦ï¼Œå®ƒç”¨äºè·Ÿè¸ªå’Œè¯†åˆ«ç”¨æˆ·çš„ä¼šè¯ã€‚å½“ç”¨æˆ·ç™»å½•æ—¶ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆ Session Tokenï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ã€‚</li><li><strong>Cookie</strong> æ˜¯å®¢æˆ·ç«¯æµè§ˆå™¨ç”¨æ¥å­˜å‚¨ Session Token çš„åœ°æ–¹ã€‚å½“æœåŠ¡å™¨ç”Ÿæˆ Session Token åï¼Œå®ƒä¼šé€šè¿‡ HTTP å“åº”å°† Token ä½œä¸ºä¸€ä¸ª Cookie å‘é€åˆ°å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¼šåœ¨åç»­çš„è¯·æ±‚ä¸­è‡ªåŠ¨å°†è¿™ä¸ª Cookie å’Œå…¶ä¸­çš„ Session Token å‘é€å›æœåŠ¡å™¨ã€‚</li><li><strong>ä¼šè¯ç®¡ç†</strong>ï¼š<ul><li>å®¢æˆ·ç«¯çš„æµè§ˆå™¨ä¼šå­˜å‚¨ä¸€ä¸ª <strong>Session Cookie</strong>ï¼Œå®ƒçš„å†…å®¹åŒ…å«äº† <strong>Session Token</strong>ã€‚</li><li>æ¯å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°† Session Tokenï¼ˆå­˜å‚¨åœ¨ Cookie ä¸­ï¼‰é™„åŠ åˆ° HTTP è¯·æ±‚å¤´éƒ¨ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œä½¿ç”¨è¿™ä¸ª Session Token æŸ¥æ‰¾ç›¸åº”çš„ä¼šè¯æ•°æ®ï¼Œè¯†åˆ«ç”¨æˆ·èº«ä»½ï¼Œç»´æŒä¼šè¯çŠ¶æ€ã€‚</li></ul></li></ul><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>Session Token</strong> æ˜¯ä¸€ä¸ªç”±æœåŠ¡å™¨ç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºæ ‡è¯†ç”¨æˆ·ä¼šè¯ï¼Œå®ƒå­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œé€šå¸¸åœ¨ç™»å½•åç”±æœåŠ¡å™¨ç”Ÿæˆå¹¶é€šè¿‡ Cookie ä¼ é€’ç»™å®¢æˆ·ç«¯ã€‚</li><li><strong>Cookie</strong> æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­çš„å°æ–‡ä»¶ï¼Œå®ƒå­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ï¼ˆå¦‚ Session Tokenï¼‰ã€‚æ¯æ¬¡ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°† Cookie ä¸­çš„ä¿¡æ¯å¸¦å›æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨é€šè¿‡ Cookie ä¸­çš„ Session Token è¯†åˆ«ç”¨æˆ·ã€‚</li></ul><p>é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒSession Token å’Œ Cookie é…åˆä½¿ç”¨ï¼Œèƒ½å¤Ÿä¿æŒç”¨æˆ·ä¼šè¯çš„çŠ¶æ€ï¼Œå…å»æ¯æ¬¡è¯·æ±‚éƒ½è¿›è¡Œèº«ä»½éªŒè¯çš„éº»çƒ¦ã€‚</p><h1 id="åœ¨CatBookä¸­æ·»åŠ ç™»å…¥åŠŸèƒ½"><a href="#åœ¨CatBookä¸­æ·»åŠ ç™»å…¥åŠŸèƒ½" class="headerlink" title="åœ¨CatBookä¸­æ·»åŠ ç™»å…¥åŠŸèƒ½"></a>åœ¨CatBookä¸­æ·»åŠ ç™»å…¥åŠŸèƒ½</h1><ul><li><p><strong>åˆ†ç¦»è®¤è¯æœåŠ¡å™¨å’Œèµ„æºæœåŠ¡å™¨</strong></p><ul><li><strong>å­˜å‚¨å¯†ç å¾ˆå›°éš¾</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬è®© Google æ¥å¤„ç†è®¤è¯ã€‚</li></ul></li><li><p>åˆæ¬¡ç™»å½•ï¼šé€šè¿‡ Google ç™»å½•ã€‚</p><ul><li>ä½¿ç”¨ä»¤ç‰Œï¼ˆå¦‚ JWTï¼‰ã€‚</li></ul></li><li><p><strong>ä¿æŒç™»å½•çŠ¶æ€</strong>ï¼šä½¿ç”¨ Express.js çš„ä¼šè¯ï¼ˆSessionsï¼‰ã€‚</p></li></ul><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210224310570.png" alt="image-20241210224310570"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210224234705.png" alt="image-20241210224234705"></p><p>è¿™æ ·å­å¾ˆä¸å®‰å…¨ï¼Œæˆ‘ä»¬éœ€è¦Gooleè¿”å›ä¸€ä¸ªToken è¿™æ ·å­æˆ‘ä»¬æ‰èƒ½å®‰å…¨çš„è¯†åˆ«æ˜¯ä¸æ˜¯çœŸæ­£çš„ç”¨æˆ·</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210224358844.png" alt="image-20241210224358844"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-14-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81/image-20241210224407381.png" alt="image-20241210224407381"></p><h2 id="å¦‚ä½•è·å¾—Google-Auth-æ³¨å†Œ"><a href="#å¦‚ä½•è·å¾—Google-Auth-æ³¨å†Œ" class="headerlink" title="å¦‚ä½•è·å¾—Google Auth æ³¨å†Œ"></a>å¦‚ä½•è·å¾—Google Auth æ³¨å†Œ</h2><div class="row">    <embed src="Registering_for_Google_Auth.pdf" width="100%" height="550" type="application/pdf"></div><p><a href="https://console.cloud.google.com/apis/dashboard?inv=1&invt=AbjwWA&project=brilliant-scene-439117-u3">API å’ŒæœåŠ¡ â€“ API å’ŒæœåŠ¡ â€“ My First Project â€“ Google Cloud Console</a></p><p><a href="https://developers.google.com/identity/sign-in/web/sign-in?hl=zh-cn#before_you_begin">å°† Google ç™»å½•åŠŸèƒ½é›†æˆåˆ°æ‚¨çš„ Web åº”ç”¨ä¸­  | Authentication  | Google for Developers</a></p><h2 id="å·¥ä½œæ­¥éª¤"><a href="#å·¥ä½œæ­¥éª¤" class="headerlink" title="å·¥ä½œæ­¥éª¤"></a>å·¥ä½œæ­¥éª¤</h2><ul><li>Step0: Add Login&#x2F;Logout Button </li><li>Step1: Add API routes for login&#x2F;logout (connect frontend with backend) </li><li>Step2: Add User database schema </li><li>Step3: Add whoami endpoint</li></ul><p><code>Navbar</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">NavBar</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [userId, setUserId] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="string">&quot;/api/whoami&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (user.<span class="property">_id</span>) &#123;</span><br><span class="line">        <span class="comment">// they are registed in the database, and currently logged in.</span></span><br><span class="line">        <span class="title function_">setUserId</span>(user.<span class="property">_id</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleLogin</span> = (<span class="params">res</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// &#x27;res&#x27; contains the response from Google&#x27;s authentication servers</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> userToken = res.<span class="property">tokenObj</span>.<span class="property">id_token</span>;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/login&quot;</span>, &#123; <span class="attr">token</span>: userToken &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// the server knows we&#x27;re logged in now</span></span><br><span class="line">      <span class="title function_">setUserId</span>(user.<span class="property">_id</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(user);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleLogout</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Logged out successfully!&quot;</span>);</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/logout&quot;</span>);</span><br><span class="line">    <span class="title function_">setUserId</span>(<span class="literal">null</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">className</span>=<span class="string">&quot;NavBar-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;NavBar-title u-inlineBlock&quot;</span>&gt;</span>Catbook<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;NavBar-linkContainer u-inlineBlock&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/&quot;</span> <span class="attr">className</span>=<span class="string">&quot;NavBar-link&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          Home</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;userId &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>`/<span class="attr">profile</span>/$&#123;<span class="attr">userId</span>&#125;`&#125; <span class="attr">className</span>=<span class="string">&quot;NavBar-link&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            Profile</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">        &#123;userId ? (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">GoogleLogout</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">clientId</span>=<span class="string">&#123;GOOGLE_CLIENT_ID&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">buttonText</span>=<span class="string">&quot;Logout&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onLogoutSuccess</span>=<span class="string">&#123;handleLogout&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onFailure</span>=<span class="string">&#123;(err)</span> =&gt;</span> console.log(err)&#125;</span></span><br><span class="line"><span class="language-xml">            className=&quot;NavBar-link NavBar-login&quot;</span></span><br><span class="line"><span class="language-xml">          /&gt;</span></span><br><span class="line"><span class="language-xml">        ) : (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">GoogleLogin</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">clientId</span>=<span class="string">&#123;GOOGLE_CLIENT_ID&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">buttonText</span>=<span class="string">&quot;Login&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onSuccess</span>=<span class="string">&#123;handleLogin&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onFailure</span>=<span class="string">&#123;(err)</span> =&gt;</span> console.log(err)&#125;</span></span><br><span class="line"><span class="language-xml">            className=&quot;NavBar-link NavBar-login&quot;</span></span><br><span class="line"><span class="language-xml">          /&gt;</span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>api.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/story&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newStory = <span class="keyword">new</span> <span class="title class_">Story</span>(&#123;</span><br><span class="line">    <span class="attr">creator_id</span>: req.<span class="property">user</span>.<span class="property">_id</span>,</span><br><span class="line">    <span class="attr">creator_name</span>: req.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  newStory.<span class="title function_">save</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">story</span>) =&gt;</span> res.<span class="title function_">send</span>(story));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/comment&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newComment = <span class="keyword">new</span> <span class="title class_">Comment</span>(&#123;</span><br><span class="line">    <span class="attr">creator_id</span>: req.<span class="property">user</span>.<span class="property">_id</span>,</span><br><span class="line">    <span class="attr">creator_name</span>: req.<span class="property">user</span>.<span class="property">name</span>,</span><br><span class="line">    <span class="attr">parent</span>: req.<span class="property">body</span>.<span class="property">parent</span>,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  newComment.<span class="title function_">save</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">comment</span>) =&gt;</span> res.<span class="title function_">send</span>(comment));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/login&quot;</span>, auth.<span class="property">login</span>);</span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/logout&quot;</span>, auth.<span class="property">logout</span>);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/whoami&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (req.<span class="property">user</span>) &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(req.<span class="property">user</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// user is not logged in</span></span><br><span class="line">    res.<span class="title function_">send</span>(&#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åä¸‰)-åˆè¯†æ•°æ®åº“</title>
      <link href="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
      <url>/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ç”¨çš„æ˜¯<code>mongoDB</code></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010430932.png" alt="image-20241210010430932"></p><div class="row">    <embed src="databases-cheatsheet.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="mongoDBçš„ç»“æ„"><a href="#mongoDBçš„ç»“æ„" class="headerlink" title="mongoDBçš„ç»“æ„"></a>mongoDBçš„ç»“æ„</h1><ul><li>**MongoDB å®ä¾‹(MongoDB Instance)**ï¼šä¸€ç»„æ•°æ®åº“</li><li>**æ•°æ®åº“(Database)**ï¼ˆä¾‹å¦‚ Catbook æ•°æ®åº“ï¼‰ï¼šä¸€ç»„é›†åˆï¼Œé€šå¸¸å¯¹åº”ä¸€ä¸ª Web åº”ç”¨ç¨‹åº</li><li>**é›†åˆ(Collection)**ï¼ˆä¾‹å¦‚ Stories é›†åˆï¼‰ï¼šä¸€ç»„éå¸¸ç›¸ä¼¼çš„æ•°æ®ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¸Œæœ›ç»™å®šé›†åˆä¸­çš„æ‰€æœ‰æ•°æ®å…·æœ‰ç›¸åŒçš„ç»“æ„ï¼Œå³å…·æœ‰ç›¸åŒçš„é”®å’Œç±»å‹</li><li>**æ–‡æ¡£(Document)**ï¼ˆä¾‹å¦‚å•ä¸ªæ•…äº‹çš„æ•°æ®ï¼‰ï¼šä¸€ä¸ªå•ç‹¬çš„ JSON æˆ– JavaScript å¯¹è±¡ã€‚åº”ç”¨ç¨‹åºä¸­çš„å•ä¸ªæ•°æ®ï¼Œç±»ä¼¼äº SQL ä¸­çš„è¡Œ</li><li>**å­—æ®µ(Field)**ï¼ˆä¾‹å¦‚å•ä¸ªæ•…äº‹çš„ content å±æ€§ï¼‰ï¼šæˆ‘ä»¬å¸Œæœ›è®°å½•å…¶å€¼çš„å±æ€§ï¼ŒJavaScript å¯¹è±¡ä¸­çš„é”®</li></ul><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010603514.png" alt="image-20241210010603514"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010612838.png" alt="image-20241210010612838"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010619986.png" alt="image-20241210010619986"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010629026.png" alt="image-20241210010629026"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010635615.png" alt="image-20241210010635615"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210010834000.png" alt="image-20241210010834000"></p><h1 id="Mongoose"><a href="#Mongoose" class="headerlink" title="Mongoose"></a>Mongoose</h1><p>NodeJSå…è®¸çš„MongoDBé›†æˆåº“</p><h2 id="Mongooseåšäº†ä»€ä¹ˆ"><a href="#Mongooseåšäº†ä»€ä¹ˆ" class="headerlink" title="Mongooseåšäº†ä»€ä¹ˆ"></a>Mongooseåšäº†ä»€ä¹ˆ</h2><ul><li><strong>è¿æ¥åˆ°é›†ç¾¤(cluster)</strong></li><li><strong>åˆ›å»ºæ–‡æ¡£</strong></li><li><strong>ä¸æ•°æ®åº“äº¤äº’</strong><ul><li>åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤ç­‰æ“ä½œ</li></ul></li></ul><blockquote><p> MongoDBçš„é›†ç¾¤æŒ‡çš„æ˜¯ç”±å¤šä¸ª MongoDB å®ä¾‹ç»„æˆçš„ç³»ç»Ÿï¼Œå®ƒä»¬å…±åŒå­˜å‚¨å’Œç®¡ç†æ•°æ®ã€‚MongoDB é›†ç¾¤é€šå¸¸ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p><ol><li><strong>å‰¯æœ¬é›†ï¼ˆReplica Setï¼‰</strong>ï¼šä¸€ç»„åŒ…å«åŒä¸€æ•°æ®é›†çš„ MongoDB å®ä¾‹ï¼Œä¿è¯æ•°æ®çš„é«˜å¯ç”¨æ€§å’Œå†—ä½™ã€‚</li><li><strong>åˆ†ç‰‡ï¼ˆShardingï¼‰</strong>ï¼šç”¨äºåˆ†å¸ƒå¼å­˜å‚¨å’Œå¤„ç†å¤§è§„æ¨¡æ•°æ®ï¼Œå°†æ•°æ®åˆ†å‰²æˆå¤šä¸ªéƒ¨åˆ†å¹¶åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚</li><li><strong>è·¯ç”±å™¨ï¼ˆMongosï¼‰</strong>ï¼šä¸€ä¸ªä¸­é—´å±‚ï¼Œç”¨äºå°†å®¢æˆ·ç«¯çš„è¯·æ±‚è·¯ç”±åˆ°åˆé€‚çš„ MongoDB å®ä¾‹æˆ–åˆ†ç‰‡ã€‚</li></ol><p>MongoDB é›†ç¾¤å¯ä»¥æé«˜æ•°æ®çš„å¤„ç†èƒ½åŠ›ï¼Œå¹¶ä¿è¯å³ä½¿éƒ¨åˆ†èŠ‚ç‚¹å‡ºç°æ•…éšœï¼Œç³»ç»Ÿä¾ç„¶èƒ½å¤Ÿç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p></blockquote><h2 id="æ¨¡å¼Schema"><a href="#æ¨¡å¼Schema" class="headerlink" title="æ¨¡å¼Schema"></a>æ¨¡å¼Schema</h2><ul><li><p>æ¨¡å¼ï¼ˆSchemasï¼‰å®šä¹‰æ–‡æ¡£çš„ç»“æ„ï¼š</p></li><li><p>å®šä¹‰é”®ä»¥åŠå¯¹åº”é”®çš„å€¼çš„ç±»å‹</p></li><li><p>ç»„ç»‡ç»“æ„è‡³å…³é‡è¦ï¼</p></li></ul><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210011636373.png" alt="image-20241210011636373"></p><h3 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h3><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210011500161.png" alt="image-20241210011500161"></p><h3 id="Documentsçš„åŠ å·¥"><a href="#Documentsçš„åŠ å·¥" class="headerlink" title="Documentsçš„åŠ å·¥"></a>Documentsçš„åŠ å·¥</h3><ul><li><p><strong>MongoDB æ–‡æ¡£çš„ç»“æ„åŒ–æ–¹å¼</strong>ï¼š</p><ul><li><strong>æŒ‡å®šæ–‡æ¡£ä¸­çš„å­—æ®µ</strong><br>åœ¨ MongoDB ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ schema æ¥å®šä¹‰æ–‡æ¡£ä¸­åŒ…å«çš„å­—æ®µå’Œå®ƒä»¬çš„æ•°æ®ç±»å‹ã€‚</li></ul></li><li><p><strong>æ¯ä¸ªé›†åˆéƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ¨¡å¼ï¼ˆSchemaï¼‰</strong><br>æ¯ä¸ªé›†åˆçš„æ–‡æ¡£åº”è¯¥éµå¾ªä¸€å®šçš„ç»“æ„ï¼Œå®šä¹‰å“ªäº›å­—æ®µæ˜¯å¿…é¡»çš„ã€å­—æ®µçš„æ•°æ®ç±»å‹ä»¥åŠå…¶ä»–çº¦æŸæ¡ä»¶ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå¯ç®¡ç†æ€§ã€‚</p></li></ul><h3 id="Mongoose-Schemaçš„ç±»å‹"><a href="#Mongoose-Schemaçš„ç±»å‹" class="headerlink" title="Mongoose Schemaçš„ç±»å‹"></a>Mongoose Schemaçš„ç±»å‹</h3><ul><li>String </li><li>Number</li><li>Date </li><li>Buffer </li><li>Boolean </li><li>Mixed </li><li>ObjectId </li><li>Array</li><li>â€¦.</li></ul><p>Read more about schema types: <a href="http://mongoosejs.com/docs/schematypes.html">http://mongoosejs.com/docs/schematypes.html</a></p><h2 id="Mongoose-Models"><a href="#Mongoose-Models" class="headerlink" title="Mongoose Models"></a>Mongoose Models</h2><p>æ¨¡å‹ï¼ˆModelsï¼‰è®©ä½ èƒ½å¤Ÿï¼š</p><ul><li>æ„å»ºæ–‡æ¡£</li><li>è·å–ç¬¦åˆæ¨¡å‹çš„æ–‡æ¡£</li><li>å‘å¸ƒæ–‡æ¡£</li><li>â€¦â€¦æˆ–æ‰§è¡Œä»»ä½•ä¸ç¬¦åˆæ¨¡å‹çš„æ–‡æ¡£ç›¸å…³çš„æ“ä½œï¼</li></ul><p>æ¨¡å‹åƒå¯¹è±¡ä¸€æ ·ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å®ƒä»¬æ¥æŸ¥è¯¢æˆ–ä¿®æ”¹æ•°æ®åº“ï¼</p><h3 id="æ„å»ºä¸€ä¸ªMongoose-Model"><a href="#æ„å»ºä¸€ä¸ªMongoose-Model" class="headerlink" title="æ„å»ºä¸€ä¸ªMongoose Model"></a>æ„å»ºä¸€ä¸ªMongoose Model</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Import mongoose</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> mongoConectionSRV = :<span class="string">&quot;your SRV&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> databaseName = <span class="string">&quot;test&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;<span class="attr">useNewUrlParser</span>: <span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>, <span class="attr">dbName</span>: databaseName&#125;;</span><br><span class="line"></span><br><span class="line">mongoose.<span class="title function_">connect</span>(mongoConnectionSRV, options)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connected.&quot;</span>))</span><br><span class="line">.<span class="title class_">Catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(error));<span class="number">222</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Create a mongoose.Schema</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">UserScheme</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="title class_">String</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="title class_">Number</span>,</span><br><span class="line">    <span class="attr">pets</span>: [<span class="title class_">String</span>],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Create a mongoose.model</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">User</span> = mongoose.<span class="title function_">model</span>(<span class="string">&quot;User&quot;</span>, <span class="title class_">UserSchema</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//Creating Documents</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Tim</span> = <span class="keyword">new</span> <span class="title class_">User</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;Tim&quot;</span>, <span class="attr">age</span>:<span class="number">21</span>, pets[<span class="string">&quot;cloude&quot;</span>]&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Tim</span>.<span class="title function_">save</span>()</span><br><span class="line">   .<span class="title function_">then</span>(<span class="function">(<span class="params">student</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Added $&#123;student.name&#125;&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="finding-Documents"><a href="#finding-Documents" class="headerlink" title="finding Documents"></a><code>finding Documents</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™ä¸ªè¡¨ç¤ºè¿”å›æ‰€æœ‰çš„Documents</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>(&#123;&#125;) </span><br><span class="line">   .<span class="title function_">then</span>(<span class="function">(<span class="params">users</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Found $&#123;users.length&#125; users&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™ä¸ªè¿”å›æ‰€æœ‰21å²çš„ç”¨æˆ·</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>(&#123;<span class="attr">age</span>: <span class="number">21</span>&#125;) </span><br><span class="line">   .<span class="title function_">then</span>(<span class="function">(<span class="params">users</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Found $&#123;users.length&#125; users&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™ä¸ªè¿”å›æ‰€æœ‰21å²ï¼Œå«Timçš„ç”¨æˆ·</span></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">find</span>(&#123;<span class="attr">name</span>: <span class="string">&quot;Tim&quot;</span>, <span class="attr">age</span>: <span class="number">21</span>&#125;) </span><br><span class="line">   .<span class="title function_">then</span>(<span class="function">(<span class="params">users</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Found $&#123;users.length&#125; users&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="Deleting-Documents"><a href="#Deleting-Documents" class="headerlink" title="Deleting Documents"></a><code>Deleting Documents</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">User</span>.<span class="title function_">deleteOne</span>(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Tim&quot;</span>&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Deleted 1 user!&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title class_">User</span>.<span class="title function_">deleteMany</span>(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Tim&quot;</span>&#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;error&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Deleted all user!&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="Mongoose-Parameters"><a href="#Mongoose-Parameters" class="headerlink" title="Mongoose Parameters"></a>Mongoose Parameters</h2><p> <a href="http://mongoosejs.com/docs/schematypes.html">http://mongoosejs.com/docs/schematypes.html</a> (from â€œAll Schema Typesâ€) </p><p>More advanced: <a href="http://mongoosejs.com/docs/validation.html">http://mongoosejs.com/docs/validation.html</a> </p><p>More advanced: <a href="http://mongoosejs.com/docs/guide.html">http://mongoosejs.com/docs/guide.html</a></p><h1 id="å¦‚ä½•æ„å»ºè‡ªå·±çš„Mongo-DBMS"><a href="#å¦‚ä½•æ„å»ºè‡ªå·±çš„Mongo-DBMS" class="headerlink" title="å¦‚ä½•æ„å»ºè‡ªå·±çš„Mongo DBMS?"></a>å¦‚ä½•æ„å»ºè‡ªå·±çš„Mongo DBMS?</h1><h2 id="ç¬¬ä¸€æ¬¡ä½¿ç”¨"><a href="#ç¬¬ä¸€æ¬¡ä½¿ç”¨" class="headerlink" title="ç¬¬ä¸€æ¬¡ä½¿ç”¨"></a>ç¬¬ä¸€æ¬¡ä½¿ç”¨</h2><ol><li><p>è¿›å…¥ç½‘ç«™ï¼Œæ³¨å†Œç™»å½• <a href="https://www.mongodb.com/products/platform/cloud">MongoDB Cloud | MongoDB</a></p></li><li><p>ç¬¬ä¸€æ¬¡æ³¨å†Œåè¿›å…¥çš„é¡µé¢ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª<code>Clusters</code></p></li></ol><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210020243581.png" alt="image-20241210020243581"></p><ol start="3"><li><code>Clusters</code>è¿æ¥</li></ol><p>æˆ‘ä»¬ç‚¹å‡»è¿™ä¸ª<code>Connect</code>(ä½ åˆ›å»ºçš„æ—¶å€™ä»–ä¼šè‡ªåŠ¨åˆ°è¿™ä¸ªé¡µé¢)</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210020651334.png" alt="image-20241210020651334"></p><p>è¾“å…¥ä½ çš„ç”¨æˆ·åå’Œå¯†ç (åé¢è¿æ¥æ—¶éœ€è¦ç”¨åˆ°)</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210020800273.png" alt="image-20241210020800273"></p><p>å•å‡»<code>Create Database User</code>ï¼Œç„¶åä¸‹ä¸€æ­¥:</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210020919900.png" alt="image-20241210020919900"></p><p>å°†<code>Driver</code>é€‰æˆ<code>Node.js</code>, å…¶ä¸­çº¢æ¡†ä¸ºæˆ‘ä»¬éœ€è¦çš„SRV, å¤åˆ¶æˆ‘ä»¬çš„SRVï¼Œå°†<code>&lt;db_password&gt;</code>ç›´æ¥æ›¿æ¢æˆåˆšæ‰æˆ‘ä»¬è®¾ç½®çš„å¯†ç å³å¯ã€‚</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021007931.png" alt="image-20241210021007931"></p><ol start="4"><li>è®¾ç½®æˆå…è®¸ä»»ä½•äººè®¿é—®</li></ol><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210020556404.png" alt="image-20241210020556404"></p><ol start="5"><li>è®¾ç½®æ•°æ®åº“</li></ol><blockquote><p>ç¡®ä¿è‡ªå·±å¯¼èˆªæ åœ¨<code>Clusters</code>å¤„</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210022005354.png" alt="image-20241210022005354"></p></blockquote><p>è¿›å…¥<code>Collections</code></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021251283.png" alt="image-20241210021251283"></p><p>åˆ›å»ºæ•°æ®åº“</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021400558.png" alt="image-20241210021400558"></p><blockquote><p>æˆ‘ä»¬åœ¨åˆ›å»º<code>Clusters</code>çš„æ—¶å€™å¯èƒ½å‹¾é€‰äº†åˆ›å»ºsampleæ•°æ®åº“ï¼Œæ‰€ä»¥ä»–ä¼šç”Ÿæˆä¸€ä¸ªæ²¡ä»€ä¹ˆç”¨çš„æ•°æ®åº“ï¼Œè¿™ä¸ªæ— æ‰€è°“</p></blockquote><p><strong>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„<code>Database name</code>ä¸€å®šè¦å’Œä»£ç é‡Œè®¾ç½®çš„ä¸€æ ·ï¼Œä¸ç„¶è®¿é—®ä¸åˆ°ï¼Œè‡³äºC<code>ollection name</code>éšæ„ï¼Œæˆ‘ä»¬ä¼ æ•°æ®ç»™æ•°æ®åº“çš„æ—¶å€™ä¼šè‡ªåŠ¨ç”ŸæˆCollection</strong></p><p>è¿™æ ·å­å°±å¤§åŠŸå‘Šæˆäº†</p><h2 id="åˆ›å»ºæ–°çš„Clusters"><a href="#åˆ›å»ºæ–°çš„Clusters" class="headerlink" title="åˆ›å»ºæ–°çš„Clusters"></a>åˆ›å»ºæ–°çš„Clusters</h2><p>å¦‚æœæˆ‘ä»¬ä¹‹å‰åˆ›å»ºè¿‡<code>Clusters</code>çš„è¯ï¼Œå¯èƒ½æ²¡æœ‰å¿«é€Ÿå¼€å§‹çš„é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±ä»å¤´å¼€å§‹.</p><p>1, åˆ›å»ºæ–°é¡¹ç›®</p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021729514.png" alt="image-20241210021729514"></p><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021805783.png" alt="image-20241210021805783"></p><ol start="2"><li>åˆ›å»º<code>Cluster</code></li></ol><p><img src="/2024/12/10/%E5%89%8D%E7%AB%AF-MIT-Web-13-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86%E6%95%B0%E6%8D%AE%E5%BA%93/image-20241210021840181.png" alt="image-20241210021840181"></p><ol start="3"><li>åé¢çš„æ­¥éª¤å’Œç¬¬ä¸€æ¬¡ä½¿ç”¨çš„ä¸€æ ·äº†</li></ol><h1 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h1><p><code>comment.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//define a comment schema for the database</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">CommentSchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  <span class="attr">creator_name</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">parent</span>: <span class="title class_">String</span>, <span class="comment">// links to the _id of a parent story (_id is an autogenerated field by Mongoose).</span></span><br><span class="line">  <span class="attr">content</span>: <span class="title class_">String</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// compile model from schema</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = mongoose.<span class="title function_">model</span>(<span class="string">&quot;comment&quot;</span>, <span class="title class_">CommentSchema</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>story.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//define a story schema for the database</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">StorySchema</span> = <span class="keyword">new</span> mongoose.<span class="title class_">Schema</span>(&#123;</span><br><span class="line">  <span class="attr">creator_name</span>: <span class="title class_">String</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="title class_">String</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// compile model from schema</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = mongoose.<span class="title function_">model</span>(<span class="string">&quot;story&quot;</span>, <span class="title class_">StorySchema</span>);</span><br></pre></td></tr></table></figure><p><code>api.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/stories&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// empty selector means get all documents</span></span><br><span class="line">  <span class="title class_">Story</span>.<span class="title function_">find</span>(&#123;&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">stories</span>) =&gt;</span> res.<span class="title function_">send</span>(stories));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/story&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newStory = <span class="keyword">new</span> <span class="title class_">Story</span>(&#123;</span><br><span class="line">    <span class="attr">creator_name</span>: myName,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  newStory.<span class="title function_">save</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">story</span>) =&gt;</span> res.<span class="title function_">send</span>(story));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/comment&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title class_">Comment</span>.<span class="title function_">find</span>(&#123; <span class="attr">parent</span>: req.<span class="property">query</span>.<span class="property">parent</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">comments</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(comments);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/comment&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newComment = <span class="keyword">new</span> <span class="title class_">Comment</span>(&#123;</span><br><span class="line">    <span class="attr">creator_name</span>: myName,</span><br><span class="line">    <span class="attr">parent</span>: req.<span class="property">body</span>.<span class="property">parent</span>,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  newComment.<span class="title function_">save</span>().<span class="title function_">then</span>(<span class="function">(<span class="params">comment</span>) =&gt;</span> res.<span class="title function_">send</span>(comment));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>server.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| server.js -- The core of your server</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| This file defines how your server starts up. Think of it as the main() of your server.</span></span><br><span class="line"><span class="comment">| At a high level, this file does the following things:</span></span><br><span class="line"><span class="comment">| - Connect to the database</span></span><br><span class="line"><span class="comment">| - Sets up server middleware (i.e. addons that enable things like json parsing)</span></span><br><span class="line"><span class="comment">| - Hooks up all the backend routes specified in api.js</span></span><br><span class="line"><span class="comment">| - Fowards frontend routes that should be handled by the React router</span></span><br><span class="line"><span class="comment">| - Sets up error handling in case something goes wrong when handling a request</span></span><br><span class="line"><span class="comment">| - Actually starts the webserver</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// validator runs some basic checks to make sure you&#x27;ve set everything up correctly</span></span><br><span class="line"><span class="comment">// this is a tool provided by staff, so you don&#x27;t need to worry about it</span></span><br><span class="line"><span class="keyword">const</span> validator = <span class="built_in">require</span>(<span class="string">&quot;./validator&quot;</span>);</span><br><span class="line">validator.<span class="title function_">checkSetup</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// import libraries needed for the webserver to work!</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>); <span class="comment">// backend framework for our node server.</span></span><br><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">&quot;mongoose&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>); <span class="comment">// provide utilities for working with file and directory paths</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> api = <span class="built_in">require</span>(<span class="string">&quot;./api&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Server configuration below</span></span><br><span class="line"><span class="comment">// TODO change connection URL after setting up your own database</span></span><br><span class="line"><span class="keyword">const</span> mongoConnectionURL =</span><br><span class="line">  <span class="string">&quot;mongodb+srv://weblab:jAT4po55IAgYWQgR@catbook-ylndp.mongodb.net/test?retryWrites=true&amp;w=majority&quot;</span>;</span><br><span class="line"><span class="comment">// TODO change database name to the name you chose</span></span><br><span class="line"><span class="keyword">const</span> databaseName = <span class="string">&quot;catbook&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span>, <span class="attr">useUnifiedTopology</span>: <span class="literal">true</span>, <span class="attr">dbName</span>: databaseName&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect to mongodb</span></span><br><span class="line">mongoose</span><br><span class="line">  .<span class="title function_">connect</span>(mongoConnectionURL, options)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connected to MongoDB&quot;</span>))</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Error connecting to MongoDB: <span class="subst">$&#123;err&#125;</span>`</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a new express server</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line">app.<span class="title function_">use</span>(validator.<span class="property">checkRoutes</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// allow us to parse POST request data using middleware</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect user-defined routes</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api&quot;</span>, api);</span><br><span class="line"></span><br><span class="line"><span class="comment">// load the compiled react files, which will serve /index.html and /bundle.js</span></span><br><span class="line"><span class="keyword">const</span> reactPath = path.<span class="title function_">resolve</span>(__dirname, <span class="string">&quot;..&quot;</span>, <span class="string">&quot;client&quot;</span>, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(reactPath));</span><br><span class="line"></span><br><span class="line"><span class="comment">// for all other routes, render index.html and let react router handle it</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;*&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">sendFile</span>(path.<span class="title function_">join</span>(reactPath, <span class="string">&quot;index.html&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// any server errors cause this function to run</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> status = err.<span class="property">status</span> || <span class="number">500</span>;</span><br><span class="line">  <span class="keyword">if</span> (status === <span class="number">500</span>) &#123;</span><br><span class="line">    <span class="comment">// 500 means Internal Server Error</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;The server errored when processing a request!&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">status</span>(status);</span><br><span class="line">  res.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">status</span>: status,</span><br><span class="line">    <span class="attr">message</span>: err.<span class="property">message</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// hardcode port to 3000 for now</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">3000</span>;</span><br><span class="line">app.<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running on port: <span class="subst">$&#123;port&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åäºŒ)-å¼‚æ­¥æ§åˆ¶æµ</title>
      <link href="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/"/>
      <url>/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚æœ¬æ–‡å°†ç»“åˆ Promises å’Œ async&#x2F;await çš„æ¦‚å¿µï¼Œå¸®åŠ©æ‚¨æ·±å…¥ç†è§£ JavaScript çš„å¼‚æ­¥æ§åˆ¶æµã€‚</p><h1 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ</h1><p>åœ¨ JavaScript ä¸­ï¼Œå•çº¿ç¨‹æ¨¡å‹é™åˆ¶äº†å®ƒä¸€æ¬¡åªèƒ½æ‰§è¡Œä¸€é¡¹ä»»åŠ¡ã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½å®Œæˆï¼Œæ¯”å¦‚ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œé‚£ä¹ˆè¿™ä¼šé˜»å¡å…¶ä»–ä»»åŠ¡çš„è¿è¡Œã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript æä¾›äº†å¼‚æ­¥æœºåˆ¶ï¼Œä½¿å¾—å¯ä»¥åœ¨ç­‰å¾…é•¿æ—¶é—´ä»»åŠ¡å®Œæˆçš„åŒæ—¶ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130164746004.png" alt="image-20241130164746004"></p><p>åœ¨å¼‚æ­¥ç¨‹åºä¸­ï¼Œ<code>Promises</code>å¯ä»¥æŠŠæˆ‘ä»¬ä»æµªè´¹æ—¶é—´ä¸­è§£è„±ï¼Œè®©æˆ‘ä»¬è¿è¡Œå…¶ä»–ä»£ç </p><h1 id="Promises-çš„åŸºç¡€æ¦‚å¿µ"><a href="#Promises-çš„åŸºç¡€æ¦‚å¿µ" class="headerlink" title="Promises çš„åŸºç¡€æ¦‚å¿µ"></a>Promises çš„åŸºç¡€æ¦‚å¿µ</h1><h2 id="Promise-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Promise-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Promise æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Promise æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>Promise æ˜¯ä¸€ç§ç”¨äºç®¡ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡ã€‚å®ƒçš„çŠ¶æ€æœ‰ä¸‰ç§ï¼š</p><ol><li><strong>Pendingï¼ˆè¿›è¡Œä¸­ï¼‰</strong>ï¼šåˆå§‹çŠ¶æ€ï¼Œæ“ä½œå°šæœªå®Œæˆã€‚</li><li><strong>Fulfilledï¼ˆå·²å®Œæˆï¼‰</strong>ï¼šæ“ä½œæˆåŠŸå®Œæˆï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ã€‚</li><li><strong>Rejectedï¼ˆå·²æ‹’ç»ï¼‰</strong>ï¼šæ“ä½œå¤±è´¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŸå› ã€‚</li></ol><p>é€šè¿‡ Promiseï¼Œæˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼Œé¿å…å›è°ƒå‡½æ•°å±‚å±‚åµŒå¥—çš„é—®é¢˜ï¼ˆå³â€å›è°ƒåœ°ç‹±â€ï¼‰ã€‚</p><h2 id="ä½¿ç”¨-Promise"><a href="#ä½¿ç”¨-Promise" class="headerlink" title="ä½¿ç”¨ Promise"></a>ä½¿ç”¨ Promise</h2><h3 id="ä½¿ç”¨-then-å’Œ-catch"><a href="#ä½¿ç”¨-then-å’Œ-catch" class="headerlink" title="ä½¿ç”¨ .then å’Œ .catch"></a>ä½¿ç”¨ <code>.then</code> å’Œ <code>.catch</code></h3><p>Promise æä¾›äº† <code>.then</code> å’Œ <code>.catch</code> æ–¹æ³•æ¥å¤„ç†æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myPromise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// è¾“å‡º &quot;æ“ä½œæˆåŠŸ&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><ul><li><code>.then</code><ul><li>å½“promiseæ˜¯<strong>å·²å®Œæˆ</strong>çŠ¶æ€ï¼Œè°ƒç”¨<code>.then</code>åçš„å›è°ƒå‡½æ•°</li></ul></li><li><code>.catch</code><ul><li>å½“promiseæ˜¯<strong>å·²æ‹’ç»</strong>çŠ¶æ€ï¼Œè°ƒç”¨<code>.catch</code>åçš„å›è°ƒå‡½æ•°</li></ul></li></ul><h3 id="Promisesé“¾"><a href="#Promisesé“¾" class="headerlink" title="Promisesé“¾"></a>Promisesé“¾</h3><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130164926242.png" alt="image-20241130164926242"></p><blockquote><p><code>.then</code>è¿”å›ä¸€ä¸ª<code>promise</code>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»§ç»­ä¸æ–­åœ°<code>.then</code></p></blockquote><h1 id="ä½¿ç”¨å¤šå±‚promises"><a href="#ä½¿ç”¨å¤šå±‚promises" class="headerlink" title="ä½¿ç”¨å¤šå±‚promises"></a>ä½¿ç”¨å¤šå±‚promises</h1><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165044501.png" alt="image-20241130165044501"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165052200.png" alt="image-20241130165052200"></p><h1 id="Promise-çš„æ§åˆ¶æµ"><a href="#Promise-çš„æ§åˆ¶æµ" class="headerlink" title="Promise çš„æ§åˆ¶æµ"></a>Promise çš„æ§åˆ¶æµ</h1><p>Promise æä¾›äº†ä¸€äº›å·¥å…·æ¥å¤„ç†å¤šä¸ªå¼‚æ­¥æ“ä½œï¼š</p><h3 id="Promise-all"><a href="#Promise-all" class="headerlink" title="Promise.all"></a><code>Promise.all</code></h3><p><code>Promise.all</code> æ¥å—ä¸€ä¸ª Promise æ•°ç»„ï¼Œåªæœ‰å½“æ‰€æœ‰ Promise éƒ½ Fulfilled æ—¶ï¼Œå®ƒæ‰ä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç»“æœçš„æ•°ç»„ã€‚å¦‚æœæœ‰ä¸€ä¸ª Promise Rejectedï¼Œå®ƒä¼šç«‹å³è¿”å›é”™è¯¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">20</span>);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([promise1, promise2, promise3])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">results</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(results); <span class="comment">// è¾“å‡º [10, 20, 30]</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a><code>Promise.race</code></h3><p><code>Promise.race</code> ä¹Ÿæ˜¯æ¥å—ä¸€ä¸ª Promise æ•°ç»„ï¼Œä½†å®ƒä¼šè¿”å›ç¬¬ä¸€ä¸ªæ”¹å˜çŠ¶æ€çš„ Promise çš„ç»“æœï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&#x27;å¿«&#x27;</span>), <span class="number">100</span>));</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&#x27;æ…¢&#x27;</span>), <span class="number">200</span>));</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// è¾“å‡º &quot;å¿«&quot;</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any"></a><code>Promise.any</code></h3><p><code>Promise.any</code> è¿”å›ç¬¬ä¸€ä¸ª Fulfilled çš„ Promiseã€‚å¦‚æœæ‰€æœ‰ Promise éƒ½ Rejectedï¼Œå®ƒä¼šæŠ›å‡ºä¸€ä¸ª AggregateErrorï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;å¤±è´¥1&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;æˆåŠŸ&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;å¤±è´¥2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">any</span>([promise1, promise2, promise3])</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// è¾“å‡º &quot;æˆåŠŸ&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure><h1 id="Async-Await-ç®€åŒ–å¼‚æ­¥ä»£ç "><a href="#Async-Await-ç®€åŒ–å¼‚æ­¥ä»£ç " class="headerlink" title="Async&#x2F;Await ç®€åŒ–å¼‚æ­¥ä»£ç "></a>Async&#x2F;Await ç®€åŒ–å¼‚æ­¥ä»£ç </h1><p>è™½ç„¶ Promises å¾ˆå¼ºå¤§ï¼Œä½†å½“æˆ‘ä»¬éœ€è¦å¤„ç†å¤æ‚çš„å¼‚æ­¥æµç¨‹æ—¶ï¼Œé“¾å¼è°ƒç”¨å¯èƒ½ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES2017 å¼•å…¥äº† <code>async/await</code>ï¼Œè®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ã€‚</p><h2 id="å¼‚æ­¥çš„æ–¹æ³•"><a href="#å¼‚æ­¥çš„æ–¹æ³•" class="headerlink" title="å¼‚æ­¥çš„æ–¹æ³•"></a>å¼‚æ­¥çš„æ–¹æ³•</h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165154731.png" alt="image-20241130165154731"></p><p>è®¡ç®—å®Œæˆå‰å°†æ§åˆ¶è¿”å›ç»™è°ƒç”¨è€…çš„å‡½æ•°</p><h2 id="åŒæ­¥æ§åˆ¶æµ"><a href="#åŒæ­¥æ§åˆ¶æµ" class="headerlink" title="åŒæ­¥æ§åˆ¶æµ"></a>åŒæ­¥æ§åˆ¶æµ</h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165220592.png" alt="image-20241130165220592"></p><p>å…¶ä¸­æ‰€æœ‰æ“ä½œæŒ‰é¡ºåºä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‰§è¡Œã€‚<code>handleClick</code>åªæœ‰åœ¨å‰é¢ä¸¤ä¸ªæ“ä½œéƒ½å®Œæˆçš„æƒ…å†µä¸‹æ‰ä¼šæ‰§è¡Œ</p><h2 id="å¼‚æ­¥æ§åˆ¶æµ"><a href="#å¼‚æ­¥æ§åˆ¶æµ" class="headerlink" title="å¼‚æ­¥æ§åˆ¶æµ"></a>å¼‚æ­¥æ§åˆ¶æµ</h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165233751.png" alt="image-20241130165233751"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130165449502.png" alt="image-20241130165449502"></p><blockquote><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>handle click</code> å¯ä»¥<code>get</code>ä¹‹å‰è¿è¡Œï¼Œæˆ–è€…åœ¨æˆ‘ä»¬<code>get</code>çš„æ—¶å€™è¿è¡Œï¼Œæˆ–è€…æ˜¯åœ¨<code>setStories</code>ã€‚è¿™æ„å‘³ç€ç¨‹åºçš„æ‰§è¡Œä¸éœ€è¦ç­‰åˆ°ä¸€ä¸ªä»»åŠ¡å®Œå…¨å®Œæˆæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚</p><p><code>handle click</code> ä¸éœ€è¦ç­‰å¾…è·å–æ•…äº‹æˆ–è®¾ç½®æ•…äº‹çš„æ“ä½œå®Œæˆï¼Œè€Œæ˜¯å¯ä»¥åœ¨è¿™ä¸¤ä¸ªæ“ä½œä¸­çš„ä»»ä½•ä¸€ä¸ªä»»åŠ¡æ­£åœ¨ç­‰å¾…æ—¶ç«‹å³æ‰§è¡Œã€‚è¿™ç§åšæ³•é¿å…äº†ç­‰å¾…ï¼Œä»è€ŒåŠ å¿«äº†æ•´ä½“æ‰§è¡Œé€Ÿåº¦ã€‚</p></blockquote><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><h3 id="ä½¿ç”¨-await"><a href="#ä½¿ç”¨-await" class="headerlink" title="ä½¿ç”¨ await"></a>ä½¿ç”¨ await</h3><p><code>await</code> ç”¨äºç­‰å¾…ä¸€ä¸ª Promise å®Œæˆå¹¶è¿”å›å…¶ç»“æœï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="title function_">slowNumber</span>(<span class="number">9</span>);</span><br><span class="line"><span class="keyword">const</span> b = <span class="title function_">slowNumber</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> a + <span class="keyword">await</span> b)</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœaéœ€è¦èŠ±è´¹3så®Œæˆï¼Œbéœ€è¦5s, é‚£ä¹ˆéœ€è¦<strong>8s</strong>æ‰ä¼šæˆåŠŸæ‰“å°</p></blockquote><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ç¨‹åºçš„æœ€å¤–å±‚ä¸æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå› æ­¤å®ƒä¸èƒ½ä½¿ç”¨ <code>await</code>ã€‚ç„¶è€Œï¼Œåœ¨ç¨‹åºç»“æŸå‰ï¼Œå®ƒä¼šç­‰å¾…è§£å†³æ‰€æœ‰çš„ Promiseï¼Œç„¶åå†é€€å‡ºã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130170849898.png" alt="image-20241130170849898"></p><blockquote><p>è¿™é‡Œçš„â€œæœ€å¤–å±‚â€æŒ‡çš„æ˜¯<strong>æ²¡æœ‰åŒ…å«åœ¨ä»»ä½•å¼‚æ­¥å‡½æ•°ä¸­çš„ä»£ç </strong>ï¼Œä¾‹å¦‚ä½ åœ¨é¡¶å±‚ä»£ç ä¸­ç›´æ¥è°ƒç”¨çš„éƒ¨åˆ†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>main()</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨äº† <code>await</code>ï¼Œä½†æ˜¯å¦‚æœä½ æŠŠ <code>await</code> æ”¾åœ¨ <code>main()</code> å‡½æ•°å¤–é¢ï¼ˆå³åœ¨æœ€å¤–å±‚çš„ä»£ç ä¸­ï¼‰ï¼Œä½ å°±ä¸èƒ½ç›´æ¥ä½¿ç”¨ <code>await</code>ï¼Œå› ä¸ºæœ€å¤–å±‚çš„ä»£ç æ˜¯åŒæ­¥çš„ã€‚</p><p>å¦‚æœä½ å°è¯•åœ¨æœ€å¤–å±‚ç›´æ¥ä½¿ç”¨ <code>await</code>ï¼Œä½ ä¼šé‡åˆ°é”™è¯¯ï¼Œå› ä¸ºæœ€å¤–å±‚çš„ä»£ç é€šå¸¸æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œè€Œ <code>await</code> åªèƒ½åœ¨å¼‚æ­¥å‡½æ•°å†…ä½¿ç”¨ã€‚ä½ å¯ä»¥é€šè¿‡å°†æœ€å¤–å±‚çš„ä»£ç åŒ…è£…åœ¨ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ä¸­æ¥é¿å…è¿™ç§é—®é¢˜</p></blockquote><h3 id="å®šä¹‰ä¸€ä¸ª-async-å‡½æ•°"><a href="#å®šä¹‰ä¸€ä¸ª-async-å‡½æ•°" class="headerlink" title="å®šä¹‰ä¸€ä¸ª async å‡½æ•°"></a>å®šä¹‰ä¸€ä¸ª async å‡½æ•°</h3><p><code>async</code> å‡½æ•°ä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ª Promiseï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">myFunction</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> a + <span class="keyword">await</span> b);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title function_">myFunction</span>();</span><br></pre></td></tr></table></figure><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130170613655.png" alt="image-20241130170613655"></p><h3 id="å¼‚æ­¥å‡½æ•°"><a href="#å¼‚æ­¥å‡½æ•°" class="headerlink" title="å¼‚æ­¥å‡½æ•°"></a>å¼‚æ­¥å‡½æ•°</h3><ul><li><p>åœ¨è®¡ç®—å®Œæˆä¹‹å‰å°†æ§åˆ¶æƒè¿”å›ç»™è°ƒç”¨è€…çš„å‡½æ•°</p></li><li><p>å¯ä»¥ä½œä¸ºå›è°ƒå‡½æ•° <code>() =&gt; &#123;&#125;</code> å®ç°</p></li><li><p><strong>æˆ–è€…</strong>ä½¿ç”¨ <code>async</code> å…³é”®å­—</p><ul><li>é€‚ç”¨äºå‡½æ•°ã€ç®­å¤´å‡½æ•°ã€ç±»æ–¹æ³•ç­‰</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">slowNumber</span>(<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="title function_">sleep</span>(<span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>async</code> å’Œ <code>await</code> å¯ä»¥ç”¨æ¥é‡å†™æˆ‘ä»¬ä½¿ç”¨ Promises æ—¶çš„ä»»ä½•æ“ä½œã€‚<code>async</code> å’Œ <code>await</code> æ­£å˜å¾—æ¯”ä¼ ç»Ÿçš„ <code>.then()</code> Promises å†™æ³•æ›´å¸¸è§ã€‚</p><p>ç„¶è€Œï¼Œåœ¨ web.lab å·¥ä½œåŠä¸­ï¼Œä½ å†™çš„å¤§éƒ¨åˆ†ä»£ç ä»ç„¶ä¼šä½¿ç”¨ <code>.then()</code> å†™æ³•ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130171206329.png" alt="image-20241130171206329"></p><h2 id="æ•è·é”™è¯¯"><a href="#æ•è·é”™è¯¯" class="headerlink" title="æ•è·é”™è¯¯"></a>æ•è·é”™è¯¯</h2><p>å¯ä»¥ä½¿ç”¨ <code>try/catch</code> å—æ¥æ•è·å¼‚æ­¥æ“ä½œçš„é”™è¯¯ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">processData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/data&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;è·å–æ•°æ®å¤±è´¥&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸²è¡Œä¸å¹¶è¡Œ"><a href="#ä¸²è¡Œä¸å¹¶è¡Œ" class="headerlink" title="ä¸²è¡Œä¸å¹¶è¡Œ"></a>ä¸²è¡Œä¸å¹¶è¡Œ</h2><h3 id="ä¸²è¡Œæ‰§è¡Œ"><a href="#ä¸²è¡Œæ‰§è¡Œ" class="headerlink" title="ä¸²è¡Œæ‰§è¡Œ"></a>ä¸²è¡Œæ‰§è¡Œ</h3><p>ä½¿ç”¨ <code>await</code> æ—¶ï¼Œä»»åŠ¡é»˜è®¤æ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> result1 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/1&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> result2 = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/api/2&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result1, result2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¹¶è¡Œæ‰§è¡Œ"><a href="#å¹¶è¡Œæ‰§è¡Œ" class="headerlink" title="å¹¶è¡Œæ‰§è¡Œ"></a>å¹¶è¡Œæ‰§è¡Œ</h3><p>ä¸ºäº†æå‡æ€§èƒ½ï¼Œå¯ä»¥ç”¨ <code>Promise.all</code> å¹¶è¡Œæ‰§è¡Œï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [result1, result2] = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">all</span>([</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;/api/1&#x27;</span>),</span><br><span class="line">    <span class="title function_">fetch</span>(<span class="string">&#x27;/api/2&#x27;</span>)</span><br><span class="line">  ]);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(result1, result2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥"></a>ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥</h1><p>ä» JavaScript çš„ <strong>äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</strong> è§’åº¦æ¥çœ‹ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸ºäº†é¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼Œç¡®ä¿ç¨‹åºèƒ½å¤Ÿé«˜æ•ˆåœ°æ‰§è¡Œã€‚</p><h2 id="JavaScript-çš„å•çº¿ç¨‹æ¨¡å‹"><a href="#JavaScript-çš„å•çº¿ç¨‹æ¨¡å‹" class="headerlink" title="JavaScript çš„å•çº¿ç¨‹æ¨¡å‹"></a>JavaScript çš„å•çº¿ç¨‹æ¨¡å‹</h2><p>JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨ä»»ä½•ç»™å®šæ—¶åˆ»åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœæŸä¸ªä»»åŠ¡éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´ï¼Œæ¯”å¦‚è¯»å–æ–‡ä»¶ã€ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ç­‰ï¼Œä¸»çº¿ç¨‹å°±ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆã€‚è¿™ç§é˜»å¡çš„æ‰§è¡Œæ–¹å¼ä¼šå¯¼è‡´ç•Œé¢å¡é¡¿ï¼Œç”¨æˆ·ä½“éªŒå·®ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130171448354.png" alt="image-20241130171448354"></p><h2 id="äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥"><a href="#äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥" class="headerlink" title="äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥"></a>äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥</h2><p>ä¸ºäº†å…‹æœè¿™ä¸ªé—®é¢˜ï¼ŒJavaScript ä½¿ç”¨äº† <strong>äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</strong> å’Œ <strong>å¼‚æ­¥å›è°ƒ</strong> æ¥å¤„ç†é•¿æ—¶é—´è¿è¡Œçš„æ“ä½œã€‚</p><ol><li><strong>è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰</strong>ï¼šJavaScript åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œä¼šå°†å‡½æ•°è°ƒç”¨å‹å…¥è°ƒç”¨æ ˆä¸­ã€‚æ ˆæ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œå½“å‰æ ˆé¡¶çš„å‡½æ•°ä¼šæ‰§è¡Œå®Œæˆåï¼Œæ‰ä¼šæ‰§è¡Œæ ˆä¸­çš„ä¸‹ä¸€ä¸ªå‡½æ•°ã€‚</li><li><strong>ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTask Queueï¼‰</strong>ï¼šå½“æœ‰å¼‚æ­¥æ“ä½œï¼ˆå¦‚ <code>setTimeout</code>ã€ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å–ç­‰ï¼‰æ—¶ï¼Œè¿™äº›æ“ä½œä¼šå…ˆäº¤ç»™æµè§ˆå™¨ï¼ˆæˆ– Node.jsï¼‰å¤„ç†ï¼Œå¤„ç†å®Œåï¼Œå®ƒä»¬çš„å›è°ƒå‡½æ•°ä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</li><li><strong>äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</strong>ï¼šäº‹ä»¶å¾ªç¯çš„ä»»åŠ¡æ˜¯ä¸æ–­æ£€æŸ¥è°ƒç”¨æ ˆæ˜¯å¦ä¸ºç©ºã€‚å¦‚æœè°ƒç”¨æ ˆä¸ºç©ºï¼Œäº‹ä»¶å¾ªç¯ä¼šä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå°†å…¶æ¨å…¥è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¼‚æ­¥æ“ä½œèƒ½å¤Ÿåœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡Œçš„åŸå› ã€‚</li></ol><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130171435526.png" alt="image-20241130171435526"></p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Ÿ</h2><ol><li><strong>éé˜»å¡æ€§</strong>ï¼šå¼‚æ­¥æ“ä½œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚ä¾‹å¦‚ï¼Œæ‰§è¡Œä¸€ä¸ª <code>setTimeout</code> æˆ–å‘é€ä¸€ä¸ª AJAX è¯·æ±‚æ—¶ï¼ŒJavaScript ä¸ä¼šç­‰å®ƒå®Œæˆåæ‰ç»§ç»­æ‰§è¡Œå…¶ä»–ä»£ç ã€‚ç›¸åï¼ŒJavaScript ä¼šæŠŠè¿™äº›æ“ä½œäº¤ç»™æµè§ˆå™¨å»å¤„ç†ï¼ŒåŒæ—¶ç»§ç»­æ‰§è¡Œåé¢çš„ä»£ç ã€‚å½“è¿™äº›æ“ä½œå®Œæˆåï¼Œå›è°ƒå‡½æ•°ä¼šè¢«æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…äº‹ä»¶å¾ªç¯æŠŠå®ƒä»¬æ¨å…¥è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚</li><li><strong>æé«˜æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ</strong>ï¼šå¼‚æ­¥æ“ä½œå¯ä»¥è®© JavaScript å¤„ç†æ›´å¤šçš„ä»»åŠ¡è€Œä¸è¢«é•¿æ—¶é—´çš„æ“ä½œæ‰€é˜»å¡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åšä¸€ä¸ª AJAX è¯·æ±‚æ¥è·å–æ•°æ®ï¼Œä½¿ç”¨å¼‚æ­¥æ“ä½œå¯ä»¥è®©æˆ‘ä»¬åœ¨ç­‰å¾…æ•°æ®è¿”å›çš„è¿‡ç¨‹ä¸­ç»§ç»­å“åº”ç”¨æˆ·è¾“å…¥ï¼Œè€Œä¸ä¼šè®©ç•Œé¢å†»ç»“ã€‚</li><li><strong>è§£å†³å›è°ƒåœ°ç‹±</strong>ï¼šä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥ä»»åŠ¡ï¼ˆä¾‹å¦‚ <code>.then()</code> æˆ– <code>callback</code>ï¼‰ã€‚ä½†æ˜¯ï¼Œå½“å¼‚æ­¥æ“ä½œåµŒå¥—è¿‡å¤šæ—¶ï¼Œä»£ç ä¼šå˜å¾—éå¸¸éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚<code>async/await</code> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®©å¼‚æ­¥ä»£ç æ›´åƒåŒæ­¥ä»£ç ï¼Œæ˜“äºç†è§£å’Œè°ƒè¯•ã€‚</li></ol><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Start&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Async Task&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;End&quot;</span>);</span><br></pre></td></tr></table></figure><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼š</p><ul><li><code>console.log(&quot;Start&quot;)</code> å’Œ <code>console.log(&quot;End&quot;)</code> ä¼šç«‹åˆ»æ‰“å°ã€‚</li><li><code>setTimeout</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè™½ç„¶å®ƒæœ‰ä¸€ä¸ª 1 ç§’çš„å»¶æ—¶ï¼Œä½†ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚å®ƒä¼šæŠŠå›è°ƒå‡½æ•° <code>console.log(&quot;Async Task&quot;)</code> æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸»çº¿ç¨‹ç©ºé—²åæ‰§è¡Œã€‚</li></ul><p>è¾“å‡ºç»“æœæ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Start</span><br><span class="line">End</span><br><span class="line">Async Task</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ—¶å€™éœ€è¦å¼‚æ­¥"><a href="#ä»€ä¹ˆæ—¶å€™éœ€è¦å¼‚æ­¥" class="headerlink" title="ä»€ä¹ˆæ—¶å€™éœ€è¦å¼‚æ­¥"></a>ä»€ä¹ˆæ—¶å€™éœ€è¦å¼‚æ­¥</h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-12-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BC%82%E6%AD%A5%E6%8E%A7%E5%88%B6%E6%B5%81/image-20241130171519979.png" alt="image-20241130171519979"></p><p><strong>åå°ä»»åŠ¡</strong><br> ä½ å¯ä»¥è¿è¡Œåå°ä»»åŠ¡ï¼Œè€Œä¸ä¼šé˜»æ­¢ç”¨æˆ·ä¸å‰ç«¯äº¤äº’ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ul><li>è·å–æ•°æ®ï¼ˆä¾‹å¦‚åŠ è½½ Facebook ä¸Šçš„æ–°å¸–å­ï¼‰</li><li>ä¸‹è½½&#x2F;ä¸Šä¼ </li><li>æ’­æ”¾éŸ³ä¹æˆ–è§†é¢‘ï¼ˆåœ¨ YouTube æˆ– Spotify ä¸Šæ’­æ”¾éŸ³ä¹æˆ–è§†é¢‘æ—¶ï¼Œä»ç„¶å¯ä»¥ç‚¹å‡»å…¶ä»–å†…å®¹ï¼‰</li><li>åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä¸€äº›å¤§è§„æ¨¡è®¡ç®—</li><li>ä»¥åŠæ›´å¤šï¼</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (åä¸€)-CSSçš„æ˜¾ç¤ºç±»å‹ã€æº¢å‡ºã€åŠ¨ç”»ä»¥åŠTailwindåº“</title>
      <link href="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/"/>
      <url>/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/</url>
      
        <content type="html"><![CDATA[<p>è¿™ç¯‡åšå®¢å°†è®¨è®ºï¼š</p><ul><li>CSSé€‰æ‹©å™¨</li><li>æ˜¾ç¤ºç±»å‹</li><li>å†…å®¹æº¢å‡º</li><li>åŠ¨ç”»</li></ul><p>æ¼”ç¤ºç½‘ç«™<a href="https://play.tailwindcss.com/">Tailwind Play</a></p><h1 id="CSSé€‰æ‹©å™¨"><a href="#CSSé€‰æ‹©å™¨" class="headerlink" title="CSSé€‰æ‹©å™¨"></a>CSSé€‰æ‹©å™¨</h1><p>æˆ‘ä»¬æœ‰å››ç§ä¸åŒçš„CSSé€‰æ‹©å™¨</p><ul><li>åä»£é€‰æ‹©å™¨(ç©ºæ ¼)<ul><li><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130151207195.png" alt="image-20241130151207195"></li></ul></li><li>å­é€‰æ‹©å™¨(&gt;)<ul><li><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130151214430.png" alt="image-20241130151214430"></li></ul></li><li>ä¸€èˆ¬å…„å¼Ÿé€‰æ‹©å™¨(+)<ul><li><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130151220108.png" alt="image-20241130151220108"></li></ul></li><li>ç´§é‚»å…„å¼Ÿé€‰æ‹©å™¨(~)<ul><li><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130151225543.png" alt="image-20241130151225543"></li></ul></li></ul><blockquote><p>è™½ç„¶æˆ‘ä»¬åœ¨ç¬¬ä¸€ç¯‡åšå®¢å·²ç»è®¨è®ºè¿‡äº†</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>subchild<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c2&quot;</span>&gt;</span>child2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c3&quot;</span>&gt;</span>child3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c4&quot;</span>&gt;</span>child4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h1 id="æ˜¾ç¤ºç±»å‹"><a href="#æ˜¾ç¤ºç±»å‹" class="headerlink" title="æ˜¾ç¤ºç±»å‹"></a>æ˜¾ç¤ºç±»å‹</h1><p>æˆ‘ä»¬å·²ç»è®¨è®ºè¿‡äº†</p><ul><li><code>block</code></li><li><code>flex</code></li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è®¨è®º</p><ul><li><code>grid</code></li><li><code>none</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c1&quot;</span>&gt;</span>child1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c2&quot;</span>&gt;</span>child2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c3&quot;</span>&gt;</span>child3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;child&quot;</span> <span class="attr">id</span>=<span class="string">&quot;c4&quot;</span>&gt;</span>child4<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="grid"><a href="#grid" class="headerlink" title="grid"></a><code>grid</code></h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130151940915.png" alt="image-20241130151940915"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="grid-auto-flow"><a href="#grid-auto-flow" class="headerlink" title="grid-auto-flow"></a>grid-auto-flow</h3><p>è‡ªåŠ¨å¸ƒå±€ï¼ˆauto-flowï¼‰èµ‹äºˆæˆ‘ä»¬ä¸€ç§èƒ½åŠ›ï¼Œå¯ä»¥å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•è‡ªåŠ¨å¤„ç†åˆ°è¾¾ç½‘æ ¼å¸ƒå±€æœ«ç«¯çš„å­å…ƒç´ ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152109951.png" alt="image-20241130152109951"></p><blockquote><p><code>row</code>æ˜¯é»˜è®¤å€¼</p></blockquote><h3 id="grid-template-rows-columns"><a href="#grid-template-rows-columns" class="headerlink" title="grid-template-rows&#x2F;columns"></a>grid-template-rows&#x2F;columns</h3><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152233117.png" alt="image-20241130152233117"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152236716.png" alt="image-20241130152236716"></p><h2 id="none"><a href="#none" class="headerlink" title="none"></a><code>none</code></h2><p>å‘Šè¯‰æµè§ˆå™¨å°†å…ƒç´ ä»æ–‡æ¡£ä¸­ç§»é™¤â€”â€”åœ¨å¸ƒå±€ä¸­ä¸ä¼šå ç”¨ä»»ä½•ç©ºé—´ã€‚</p><ul><li>è¿™ä¸ <code>visibility: hidden</code> ä¸åŒï¼Œåè€…ä¼šéšè—å…ƒç´ ä½†ä»ç„¶å æ®å¸ƒå±€ä¸­çš„ç©ºé—´ã€‚</li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152334323.png" alt="image-20241130152334323"></p><h1 id="å†…å®¹æº¢å‡º"><a href="#å†…å®¹æº¢å‡º" class="headerlink" title="å†…å®¹æº¢å‡º"></a>å†…å®¹æº¢å‡º</h1><p>æº¢å‡ºå±æ€§(<code>overflow</code>)å…è®¸æˆ‘ä»¬å‘Šè¯‰æµè§ˆå™¨å¦‚ä½•å¤„ç†å¯èƒ½è¶…è¿‡çˆ¶å…ƒç´ å¤§å°çš„å­å…ƒç´ ã€‚</p><p>æˆ‘ä»¬å°†å…³æ³¨ä¸‹é¢å‡ ä¸ªå€¼</p><ul><li><code>visible</code></li><li><code>hidden</code></li><li><code>scroll</code></li><li><code>auto</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>the quick brown fox jumps over the lazy dog<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="overflow-visible"><a href="#overflow-visible" class="headerlink" title="overflow: visible"></a><code>overflow: visible</code></h2><p>é»˜è®¤å€¼ï¼šå‘Šè¯‰æµè§ˆå™¨æ˜¾ç¤ºæº¢å‡ºçš„å†…å®¹</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152634964.png" alt="image-20241130152634964"></p><p><code>overflow: hidden</code></p><p>å‘Šè¯‰æµè§ˆå™¨éšè—æº¢å‡ºå†…å®¹</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152808227.png" alt="image-20241130152808227"></p><p><code>overflow: scroll</code></p><p>å‘Šè¯‰æµè§ˆå™¨ä¸ºçˆ¶å…ƒç´ æ˜¾ç¤ºä¸€ä¸ªæ»šåŠ¨æ¡â†’è¿™ä¸ªæ»šåŠ¨æ¡å°†ä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å¯èƒ½æ²¡æœ‰ä»»ä½•æº¢å‡ºçš„å†…å®¹ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130152858505.png" alt="image-20241130152858505"></p><p><code>overflow: auto</code></p><p>å‘Šè¯‰æµè§ˆå™¨å¦‚æœçˆ¶å…ƒç´ éœ€è¦ï¼Œæ˜¾ç¤ºæ»šåŠ¨æ¡â†’è¿™ä¸ªæ»šåŠ¨æ¡åªæœ‰åœ¨æœ‰ä»»ä½•æº¢å‡ºå†…å®¹æ—¶æ‰ä¼šå‡ºç°ã€‚</p><ul><li><strong>æº¢å‡º:</strong></li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130153004496.png" alt="image-20241130153004496"></p><ul><li><strong>æ²¡æº¢å‡º</strong></li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130153030639.png" alt="image-20241130153030639"></p><h1 id="åŠ¨ç”»"><a href="#åŠ¨ç”»" class="headerlink" title="åŠ¨ç”»"></a>åŠ¨ç”»</h1><p>æˆ‘ä»¬å°†è®¨è®ºä¸‹é¢å‡ ä¸ªåŠ¨ç”»ä¸»é¢˜</p><ul><li>Keyframes</li><li>Calling our animation</li><li>Duration</li><li>Delay</li><li>Timing functions</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        the quick brown fox jumps over the lazy dog</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å…³é”®å¸§-Keyframes"><a href="#å…³é”®å¸§-Keyframes" class="headerlink" title="å…³é”®å¸§(Keyframes)"></a>å…³é”®å¸§(Keyframes)</h2><p>æè¿°äº†æˆ‘ä»¬æ­£åœ¨åˆ›ä½œçš„åŠ¨ç”»ï¼Œä»¥åŠåœ¨åŠ¨ç”»çš„ä¸åŒç‚¹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> fadeIn&#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>â€œfadeInâ€ æ˜¯æˆ‘ä»¬çš„åŠ¨ç”»åç§°</li><li>æˆ‘ä»¬é€šè¿‡ç™¾åˆ†æ¯”è¡¨ç¤ºåŠ¨ç”»çš„ä¸åŒé˜¶æ®µ<ul><li>0% â†’ åŠ¨ç”»å¼€å§‹æ—¶</li><li>100% â†’ åŠ¨ç”»ç»“æŸæ—¶</li></ul></li><li>åœ¨è¿™äº›ç™¾åˆ†æ¯”å†…ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå¸Œæœ›åŠ¨ç”»çš„ CSS å±æ€§ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨åŠ¨ç”»åŒ–é€æ˜åº¦ï¼ˆopacityï¼‰ã€‚</li></ul><h2 id="æŒç»­æ—¶é—´"><a href="#æŒç»­æ—¶é—´" class="headerlink" title="æŒç»­æ—¶é—´"></a>æŒç»­æ—¶é—´</h2><p>å‘Šè¯‰æµè§ˆå™¨åŠ¨ç”»åº”è¯¥æŒç»­å¤šé•¿æ—¶é—´ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">5s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/2024-11-30-15-37-18.gif" alt="2024-11-30-15-37-18"></p><h2 id="å»¶è¿Ÿ"><a href="#å»¶è¿Ÿ" class="headerlink" title="å»¶è¿Ÿ"></a>å»¶è¿Ÿ</h2><p>åœ¨åŠ¨ç”»æ‰§è¡Œä¹‹å‰ç»™æµè§ˆå™¨ä¸€ä¸ªå»¶æ—¶ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">2s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ—¶é—´å‡½æ•°"><a href="#æ—¶é—´å‡½æ•°" class="headerlink" title="æ—¶é—´å‡½æ•°"></a>æ—¶é—´å‡½æ•°</h2><p>æ—¶é—´å‡½æ•°ï¼ˆTiming Functionsï¼‰æ”¹å˜åŠ¨ç”»è¿›å±•çš„é€Ÿåº¦ï¼š</p><ul><li>easeï¼ˆé»˜è®¤ï¼‰ï¼šå¼€å§‹æ…¢ â†’ ä¸­é—´å¿« â†’ ç»“æŸæ…¢</li><li>ease-inï¼šå¼€å§‹æ…¢</li><li>ease-outï¼šç»“æŸæ…¢</li><li>ease-in-outï¼šå¼€å§‹æ…¢ â†’ ç»“æŸæ…¢</li><li>linearï¼šå‡åŒ€é€Ÿåº¦</li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130153944306.png" alt="image-20241130153944306"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">  <span class="attribute">animation</span>: fadeIn;</span><br><span class="line">  <span class="attribute">animation-duration</span>: <span class="number">5s</span>;</span><br><span class="line">  <span class="attribute">animation-delay</span>: <span class="number">2s</span>;</span><br><span class="line">  <span class="attribute">animation-timing-function</span>: ease-out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/2024-11-30-15-42-24.gif" alt="2024-11-30-15-42-24"></p><h1 id="CSSåº“-Tailwind"><a href="#CSSåº“-Tailwind" class="headerlink" title="CSSåº“(Tailwind)"></a>CSSåº“(Tailwind)</h1><h2 id="ä»€ä¹ˆæ˜¯-TailwindCSS"><a href="#ä»€ä¹ˆæ˜¯-TailwindCSS" class="headerlink" title="ä»€ä¹ˆæ˜¯ TailwindCSS?"></a>ä»€ä¹ˆæ˜¯ TailwindCSS?</h2><p><strong>TailwindCSS</strong> æ˜¯ä¸€ä¸ªä»¥å®ç”¨æ€§ä¸ºæ ¸å¿ƒçš„ CSS æ¡†æ¶ï¼Œå®ƒé€šè¿‡é¢„åˆ¶çš„ç±»åä½¿å¼€å‘æ›´å¿«æ·ã€æ›´é«˜æ•ˆã€‚</p><p>å®ƒæ˜¯ä¸€ä¸ªæ€æ ·çš„â€<strong>æ•ˆç”¨ä¼˜å…ˆ(utility-first)</strong>â€œæ¡†æ¶?</p><ul><li><p>TailwindCSS æä¾›ç”¨äºæ ·å¼åŒ–çš„å®ç”¨ç±»å â†’ æ¶ˆé™¤äº†å‘½åæ–¹æ¡ˆçš„å›°æ‰°  </p><ul><li>ç±»åçš„å«ä¹‰å³å…¶åŠŸèƒ½ï¼ˆå®ç”¨æ€§ï¼‰  </li><li>ç¤ºä¾‹ï¼š<code>m-4</code> â†’ è¡¨ç¤º 4px çš„å¤–è¾¹è·</li></ul></li><li><p>é¢„åˆ¶çš„ç±»åè®©é¢œè‰²é€‰æ‹©ã€é—´è·ã€æ’ç‰ˆç­‰è®¾è®¡ä¿æŒä¸€è‡´æ€§å˜å¾—ç®€å•ã€‚</p></li></ul><hr><h2 id="TailwindCSSæœ‰ä»€ä¹ˆç‰¹åˆ«çš„"><a href="#TailwindCSSæœ‰ä»€ä¹ˆç‰¹åˆ«çš„" class="headerlink" title="TailwindCSSæœ‰ä»€ä¹ˆç‰¹åˆ«çš„?"></a>TailwindCSSæœ‰ä»€ä¹ˆç‰¹åˆ«çš„?</h2><ul><li><strong>ä½çº§è®¾è®¡</strong>ï¼šTailwindCSS ä¸ç›´æ¥æä¾›ç»„ä»¶ç±»ï¼Œè€Œæ˜¯é€šè¿‡ç›¸åŒçš„å®ç”¨ç±»å¯ä»¥åˆ›å»ºä¸åŒçš„ç»„ä»¶ã€‚<ul><li>ä¾‹å¦‚ï¼šBootstrap æä¾›ç»„ä»¶æ¨¡æ¿ â†’ å¯¼è‡´ç»„ä»¶å¤–è§‚é«˜åº¦ç»Ÿä¸€ï¼Œä¸”éš¾ä»¥åœ¨ä½çº§åˆ«ä¿®æ”¹ã€‚</li></ul></li><li><strong>æœ€å°åŒ– CSS æ–‡ä»¶å¤§å°</strong>ï¼šTailwind çš„ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ CSS â†’ æ›´å°çš„ CSS æ–‡ä»¶ä½“ç§¯ &#x3D; æ›´å¿«çš„åŠ è½½æ—¶é—´ã€‚</li><li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šTailwind æä¾›ç”¨äºå“åº”å¼è®¾è®¡çš„å®ç”¨é€‰æ‹©å™¨ï¼Œå¸®åŠ©å¤„ç†ä¸åŒå±å¹•å°ºå¯¸çš„æ ·å¼å˜åŒ–ã€‚</li></ul><h2 id="TailwindCSSä½¿ç”¨ä¾‹å­"><a href="#TailwindCSSä½¿ç”¨ä¾‹å­" class="headerlink" title="TailwindCSSä½¿ç”¨ä¾‹å­"></a>TailwindCSSä½¿ç”¨ä¾‹å­</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨TailwindCSSæ¥å®ç°è¿™ä¸ªæ¨ç‰¹æ¡†</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-11-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E9%AB%98%E7%BA%A7CSS%E4%BB%A5%E5%8F%8A%E5%85%B6%E4%BB%96%E5%BA%93/image-20241130154823285.png" alt="image-20241130154823285"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;bg-gray-900 w-full p-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- èƒŒæ™¯ä¸ºæ·±ç°è‰²ï¼Œå®½åº¦å æ»¡çˆ¶å®¹å™¨ï¼Œå†…è¾¹è·ä¸º16px --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex justify-between&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå·¦å³ä¸¤ç«¯å¯¹é½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-white&quot;</span>&gt;</span>Close<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ–‡æœ¬é¢œè‰²ä¸ºç™½è‰² --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;text-blue-400 font-semibold&quot;</span>&gt;</span>Drafts<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æµ…è“è‰²å­—ä½“ï¼Œå­—ä½“åŠ ç²— --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex gap-4 py-8 h-48&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ é—´è·16pxï¼Œä¸Šä¸‹(yè½´)å†…è¾¹è·32pxï¼Œé«˜åº¦192px --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;w-16 h-16 aspect-square bg-blue-400 rounded-full&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ­£æ–¹å½¢ï¼ˆå®½é«˜64pxï¼‰ï¼Œæµ…è“è‰²èƒŒæ™¯ï¼Œå®Œå…¨åœ†è§’ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&quot;w-full mt-4 bg-transparent text-white text-2xl focus:outline-none&quot;</span> </span></span><br><span class="line"><span class="tag">              <span class="attr">placeholder</span>=<span class="string">&quot;What is happening?!&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å®½åº¦100%ï¼Œé¡¶éƒ¨å¤–è¾¹è·16pxï¼Œé€æ˜èƒŒæ™¯ï¼Œç™½è‰²æ–‡å­—ï¼Œå¤§å­—ä½“ï¼Œç§»é™¤èšç„¦é«˜äº® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;font-bold text-blue-400&quot;</span>&gt;</span> Everyone can reply<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- åŠ ç²—å­—ä½“ï¼Œæµ…è“è‰²æ–‡å­— --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;border-gray-500 my-4&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ç°è‰²è¾¹æ¡†çš„æ°´å¹³çº¿ï¼Œä¸Šä¸‹å¤–è¾¹è·16px --&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;flex items-center justify-between&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ å‚ç›´å±…ä¸­ï¼Œä¸¤ç«¯å¯¹é½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;flex gap-4 text-blue-400&quot;</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- ä½¿ç”¨Flexboxå¸ƒå±€ï¼Œå­å…ƒç´ æ°´å¹³é—´è·16pxï¼Œæµ…è“è‰²æ–‡å­— --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Image<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>GIF<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Poll<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Emoji<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Location<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">botton</span> <span class="attr">class</span>=<span class="string">&quot;text-white bg-blue-400 px-4 py-2 rounded-full font-bold&quot;</span>&gt;</span> </span><br><span class="line">      Post </span><br><span class="line">    <span class="tag">&lt;/<span class="name">botton</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç™½è‰²æ–‡å­—ï¼Œæµ…è“è‰²èƒŒæ™¯ï¼Œæ°´å¹³å†…è¾¹è·16pxï¼Œå‚ç›´å†…è¾¹è·8pxï¼Œå®Œå…¨åœ†è§’ï¼Œå­—ä½“åŠ ç²— --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><code>py</code>: <code>y</code> è½´çš„<code>padding</code></li><li><code>my</code>: <code>y</code> è½´çš„<code>marging</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (å)-å»ºAPIå®æˆ˜</title>
      <link href="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/"/>
      <url>/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<div class="row">    <embed src="16.W5-Build_an_API.pdf" width="100%" height="550" type="application/pdf"></div><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130012324703.png" alt="image-20241130012324703"></p><h1 id="Use-api-Route-for-Requests"><a href="#Use-api-Route-for-Requests" class="headerlink" title="Use api Route for Requests"></a>Use api Route for Requests</h1><p><code>api.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">| api.js -- server routes</span></span><br><span class="line"><span class="comment">|--------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">| This file defines the routes for your server.</span></span><br><span class="line"><span class="comment">|</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="comment">// TODO-1 add router</span></span><br><span class="line"><span class="keyword">const</span> router = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO-5 migrate api/test endpoint from server.js</span></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Wow I made my first API!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO-2 export router</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = router;</span><br></pre></td></tr></table></figure><p><code>server.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import libraries needed for the webserver to work!</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>); <span class="comment">// backend framework for our node server.</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>); <span class="comment">// provide utilities for working with file and directory paths</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO-3 import the router from our API file</span></span><br><span class="line"><span class="keyword">const</span> api = <span class="built_in">require</span>(<span class="string">&quot;./api.js&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// create a new express server</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// allow us to make post requests</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO-4 connect API routes from api.js</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api&quot;</span>, api);</span><br><span class="line"></span><br><span class="line"><span class="comment">// TODO-5 migrate endpoint to api.js</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/api/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Wow I made my first API!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>åœ¨ä»£ç ä¸­ï¼Œ<code>app.use(&quot;/api&quot;, api)</code> çš„ä½œç”¨æ˜¯å°†ä» <code>api.js</code> æ–‡ä»¶ä¸­å¯¼å…¥çš„ <strong>è·¯ç”±æ¨¡å—</strong> æŒ‚è½½åˆ° <code>/api</code> è·¯å¾„ä¸‹ï¼Œä½¿å¾—è¯¥æ¨¡å—ä¸­çš„æ‰€æœ‰è·¯ç”±éƒ½å¯ä»¥é€šè¿‡ <code>/api</code> çš„è·¯å¾„å‰ç¼€è®¿é—®ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„è§£é‡Šï¼š</p><hr><h2 id="app-use-çš„ä½œç”¨"><a href="#app-use-çš„ä½œç”¨" class="headerlink" title="app.use() çš„ä½œç”¨"></a><code>app.use()</code> çš„ä½œç”¨</h2><ul><li><strong><code>app.use()</code> æ˜¯ Express æä¾›çš„æ–¹æ³•ï¼Œç”¨äºæ³¨å†Œä¸­é—´ä»¶æˆ–è·¯ç”±æ¨¡å—ã€‚</strong><ul><li><strong>ä¸­é—´ä»¶</strong>ï¼šå¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼ˆå¦‚è§£æ JSON æ•°æ®ã€èº«ä»½éªŒè¯ç­‰ï¼‰ã€‚</li><li><strong>è·¯ç”±æ¨¡å—</strong>ï¼šå®šä¹‰å¤šä¸ªè·¯ç”±ï¼ˆå¦‚ GETã€POSTï¼‰æ¥å¤„ç†ä¸åŒçš„è·¯å¾„ã€‚</li></ul></li><li>åœ¨æœ¬ä¾‹ä¸­ï¼Œ<code>app.use(&quot;/api&quot;, api)</code> æ³¨å†Œçš„æ˜¯ä¸€ä¸ªè·¯ç”±æ¨¡å—ï¼ˆ<code>api</code>ï¼‰ï¼Œå¹¶å°†å…¶æŒ‚è½½åˆ° <code>/api</code> è·¯å¾„ä¸‹ã€‚</li></ul><h2 id="app-use-api-api-çš„ä½œç”¨"><a href="#app-use-api-api-çš„ä½œç”¨" class="headerlink" title="app.use(&quot;/api&quot;, api) çš„ä½œç”¨"></a><code>app.use(&quot;/api&quot;, api)</code> çš„ä½œç”¨</h2><ul><li><p><strong>æŒ‚è½½è·¯ç”±æ¨¡å—åˆ° <code>/api</code> è·¯å¾„</strong>ï¼š</p><ul><li>è¿™é‡Œçš„ <code>&quot;/api&quot;</code> æ˜¯è·¯å¾„å‰ç¼€ï¼Œè¡¨ç¤º <code>api</code> ä¸­å®šä¹‰çš„æ‰€æœ‰è·¯ç”±éƒ½ä¼šåŠ ä¸Šè¿™ä¸ªå‰ç¼€ã€‚</li></ul></li><li><p><strong>è·¯å¾„çš„æ‹¼æ¥</strong>ï¼š</p><ul><li><p>å¦‚æœ <code>api.js</code> ä¸­å®šä¹‰äº† <code>/test</code> è·¯ç”±ï¼Œé‚£ä¹ˆè®¿é—®å®Œæ•´è·¯å¾„ä¸ºï¼š</p><ul><li><code>/api/test</code></li></ul></li><li><p>å¦‚æœå®šä¹‰äº† <code>/submit</code> è·¯ç”±ï¼Œé‚£ä¹ˆè®¿é—®å®Œæ•´è·¯å¾„ä¸ºï¼š</p><ul><li><code>/api/submit</code></li></ul></li></ul></li></ul><hr><h2 id="è¿è¡Œé€»è¾‘"><a href="#è¿è¡Œé€»è¾‘" class="headerlink" title="è¿è¡Œé€»è¾‘"></a>è¿è¡Œé€»è¾‘</h2><p>ç»“åˆ <code>api.js</code> çš„ä¾‹å­ï¼ŒæœåŠ¡å™¨å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š</p><h3 id="GET-è¯·æ±‚-api-test"><a href="#GET-è¯·æ±‚-api-test" class="headerlink" title="GET è¯·æ±‚ /api/test"></a><strong>GET è¯·æ±‚ <code>/api/test</code></strong></h3><ul><li>å®¢æˆ·ç«¯è®¿é—®ï¼š<code>http://localhost:3000/api/test</code></li><li>æ‰§è¡Œæµç¨‹ï¼š<ol><li>è¯·æ±‚åŒ¹é… <code>app.use(&quot;/api&quot;, api)</code>ã€‚</li><li>è¿›å…¥ <code>api.js</code> æ¨¡å—çš„è·¯ç”±ä¸­æŸ¥æ‰¾è·¯å¾„ä¸º <code>/test</code> çš„è·¯ç”±ã€‚</li><li>æ‰¾åˆ° <code>router.get(&quot;/test&quot;, ...)</code>ï¼Œæ‰§è¡Œå…¶å›è°ƒå‡½æ•°ã€‚</li><li>è¿”å›å“åº”ï¼š<code>&#123; message: &quot;This is a test route&quot; &#125;</code>ã€‚</li></ol></li></ul><h2 id="æ›´å¤æ‚çš„è·¯ç”±ç®¡ç†"><a href="#æ›´å¤æ‚çš„è·¯ç”±ç®¡ç†" class="headerlink" title="æ›´å¤æ‚çš„è·¯ç”±ç®¡ç†"></a><strong>æ›´å¤æ‚çš„è·¯ç”±ç®¡ç†</strong></h2><p>ä½¿ç”¨ <code>app.use()</code> æŒ‚è½½è·¯ç”±æ¨¡å—ï¼Œå¯ä»¥è®©ä»£ç æ›´æ¸…æ™°å’Œæ¨¡å—åŒ–ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹é¡¹ç›®ã€‚</p><p><strong>ç¤ºä¾‹ï¼šå¤šä¸ªæ¨¡å—çš„è·¯ç”±ç®¡ç†</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> users = <span class="built_in">require</span>(<span class="string">&quot;./routes/users&quot;</span>); <span class="comment">// ç”¨æˆ·ç›¸å…³è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> posts = <span class="built_in">require</span>(<span class="string">&quot;./routes/posts&quot;</span>); <span class="comment">// å¸–å­ç›¸å…³è·¯ç”±</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/users&quot;</span>, users); <span class="comment">// æŒ‚è½½ç”¨æˆ·æ¨¡å—</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api/posts&quot;</span>, posts); <span class="comment">// æŒ‚è½½å¸–å­æ¨¡å—</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœ <code>users.js</code> å®šä¹‰äº† <code>/profile</code> è·¯ç”±ï¼Œåˆ™å®Œæ•´è·¯å¾„ä¸º <code>/api/users/profile</code>ã€‚</li><li>å¦‚æœ <code>posts.js</code> å®šä¹‰äº† <code>/create</code> è·¯ç”±ï¼Œåˆ™å®Œæ•´è·¯å¾„ä¸º <code>/api/posts/create</code>ã€‚</li></ul><h1 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h1><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130135136270.png" alt="image-20241130135136270"></p><h2 id="req"><a href="#req" class="headerlink" title="req"></a><code>req</code></h2><p><code>req</code>æ˜¯ä¼ å…¥çš„è¯·æ±‚</p><ul><li><code>req.query</code></li><li><code>req.body</code></li><li><code>req.params</code></li><li><code>Custom keys (ie. req.user)</code></li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130135425855.png" alt="image-20241130135425855"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130135434692.png" alt="image-20241130135434692"></p><h2 id="res"><a href="#res" class="headerlink" title="res"></a><code>res</code></h2><p><code>res</code>æ˜¯ä½ æœåŠ¡å™¨çš„å“åº”</p><ul><li><code>res.status (&lt;status code&gt;)</code></li><li><code>res.send(&lt;object&gt;)</code></li></ul><h2 id="GETè·¯ç”±"><a href="#GETè·¯ç”±" class="headerlink" title="GETè·¯ç”±"></a><code>GET</code>è·¯ç”±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Wow I made my first API! In its own file!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/stories&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// send back all of the stories!</span></span><br><span class="line">  res.<span class="title function_">send</span>(data.<span class="property">stories</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">get</span>(<span class="string">&quot;/comment&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> filteredComments = data.<span class="property">comments</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">comment</span>) =&gt;</span> comment.<span class="property">parent</span> == req.<span class="property">query</span>.<span class="property">parent</span>);</span><br><span class="line">  res.<span class="title function_">send</span>(filteredComments);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="POSTè·¯ç”±"><a href="#POSTè·¯ç”±" class="headerlink" title="POSTè·¯ç”±"></a><code>POST</code>è·¯ç”±</h2><p>å½“æˆ‘ä»¬å†™å¥½<code>GET</code>è·¯ç”±åï¼Œæˆ‘ä»¬å¯ä»¥æäº¤ä¸‹æ–°çš„storyï¼Œæ‰“å¼€æ§åˆ¶æ¿ä¼šå‘ç°è¿™æ ·çš„è¯·æ±‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130140034623.png" alt="image-20241130140034623"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-10-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%BB%BAAPI%E5%AE%9E%E6%88%98/image-20241130140044038.png" alt="image-20241130140044038"></p><p>ä»–æäº¤äº†<code>content: &quot;1&quot;</code>å¤±è´¥ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡å¼€å§‹å†™<code>post</code>è·¯ç”±</p><p>æˆ‘ä»¬åœ¨å†™<code>post</code>è·¯ç”±çš„æ—¶å€™å¯ä»¥ç”¨<code>req.body.content</code>æŠŠç”¨æˆ·è¯·æ±‚çš„å†…å®¹æ·»åŠ è¿›æ¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/story&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newStory = &#123;</span><br><span class="line">    <span class="attr">_id</span>: data.<span class="property">stories</span>.<span class="property">length</span>,</span><br><span class="line">    <span class="attr">creator_name</span>: myName,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  data.<span class="property">stories</span>.<span class="title function_">push</span>(newStory);</span><br><span class="line">  res.<span class="title function_">send</span>(newStory);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.<span class="title function_">post</span>(<span class="string">&quot;/comment&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> newComment = &#123;</span><br><span class="line">    <span class="attr">_id</span>: data.<span class="property">comments</span>.<span class="property">length</span>,</span><br><span class="line">    <span class="attr">creator_name</span>: myName,</span><br><span class="line">    <span class="attr">parent</span>: req.<span class="property">body</span>.<span class="property">parent</span>,</span><br><span class="line">    <span class="attr">content</span>: req.<span class="property">body</span>.<span class="property">content</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  data.<span class="property">comments</span>.<span class="title function_">push</span>(newComment);</span><br><span class="line">  res.<span class="title function_">send</span>(newComment);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="catch-all-api-è·¯ç”±"><a href="#catch-all-api-è·¯ç”±" class="headerlink" title="catch all &#x2F;api è·¯ç”±"></a><code>catch all </code>&#x2F;api è·¯ç”±</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">router.<span class="title function_">all</span>(<span class="string">&quot;*&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`API Route not found: <span class="subst">$&#123;req.method&#125;</span> <span class="subst">$&#123;req.url&#125;</span>`</span>);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">404</span>).<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;API Route not found&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ®µä»£ç éœ€è¦å†™åœ¨å…¶ä»–è·¯ç”±çš„ä¸‹é¢ï¼Œä¸ç„¶æ‰€æœ‰è·¯ç”±éƒ½ä¼šè¢«å®ƒæˆªå–</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><strong>HTTP è¯·æ±‚å’Œå“åº”çš„åŸºæœ¬æµç¨‹</strong>ï¼š</p><ul><li>å®¢æˆ·ç«¯å‘é€ HTTP è¯·æ±‚ï¼ˆå¦‚ GET è¯·æ±‚ï¼‰åˆ°æœåŠ¡å™¨ï¼ŒæŒ‡å®šç›®æ ‡èµ„æºï¼ˆå¦‚ <code>localhost:3000/stories</code>ï¼‰ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åå¤„ç†é€»è¾‘ï¼Œæå–æ‰€éœ€æ•°æ®ã€‚</li><li>æœåŠ¡å™¨è¿”å› HTTP å“åº”ï¼ŒåŒ…å«çŠ¶æ€ç ï¼ˆå¦‚ 200 è¡¨ç¤ºæˆåŠŸï¼‰å’Œæ•°æ®ï¼ˆå¦‚ JSON æ ¼å¼çš„æ•…äº‹åˆ—è¡¨ï¼‰ã€‚</li><li>å®¢æˆ·ç«¯æ¥æ”¶å“åº”ï¼Œå¹¶å°†è·å–çš„æ•°æ®ï¼ˆå¦‚æ•…äº‹åˆ—è¡¨ï¼‰æ¸²æŸ“åˆ°é¡µé¢ä¸Šä¾›ç”¨æˆ·æŸ¥çœ‹ã€‚</li></ul><p><strong>HTTP è¯·æ±‚ç»“æ„</strong>ï¼š</p><ul><li>åŒ…æ‹¬æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€ç›®æ ‡ URL å’Œå¯é€‰çš„è¯·æ±‚ä½“ã€‚</li><li>ç¤ºä¾‹ï¼šGET è¯·æ±‚ä¸­è¯·æ±‚ä½“ä¸ºç©ºï¼Œä»…é€šè¿‡ URL å’ŒæŸ¥è¯¢å‚æ•°æŒ‡å®šæ‰€éœ€æ•°æ®ã€‚</li></ul><p><strong>HTTP å“åº”ç»“æ„</strong>ï¼š</p><ul><li>åŒ…æ‹¬çŠ¶æ€ç å’Œå“åº”ä½“ã€‚çŠ¶æ€ç å¦‚ 200 è¡¨ç¤ºæˆåŠŸï¼Œå“åº”ä½“é€šå¸¸ä¸º JSON æ ¼å¼æ•°æ®ï¼ˆå¦‚æ•…äº‹çš„æ•°ç»„ï¼Œæ¯ä¸ªæ•…äº‹æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚</li></ul><p><strong>ä»£ç å®ç°çš„å…³è”</strong>ï¼š</p><ul><li><strong>å‰ç«¯</strong>ï¼šä½¿ç”¨ <code>fetch</code> æˆ–ç±»ä¼¼å·¥å…·å‘é€ GET è¯·æ±‚ï¼Œå¤„ç† Promiseï¼Œæ¥æ”¶æœåŠ¡å™¨å“åº”å¹¶æ¸²æŸ“æ•°æ®ã€‚</li><li><strong>åç«¯</strong>ï¼šå®šä¹‰è·¯ç”±ï¼ˆå¦‚ <code>router.get(&#39;/stories&#39;)</code>ï¼‰ï¼Œç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè·å–æ‰€éœ€æ•°æ®å¹¶é€šè¿‡ <code>res.send()</code> è¿”å›å“åº”ã€‚</li></ul><p><strong>å››ä¸ªæ ¸å¿ƒæ­¥éª¤</strong>ï¼š</p><ol><li>å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ˆå¦‚è°ƒç”¨ <code>getSLStories()</code>ï¼‰ã€‚</li><li>æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶è¿›è¡Œå¤„ç†ã€‚</li><li>æœåŠ¡å™¨å‘é€å“åº”ï¼ŒåŒ…å«è¯·æ±‚æ•°æ®ã€‚</li><li>å®¢æˆ·ç«¯æ¸²æŸ“æ•°æ®ï¼Œå°†å…¶æ˜¾ç¤ºåœ¨å‰ç«¯é¡µé¢ã€‚</li></ol><p><strong>æŸ¥è¯¢å‚æ•°çš„ä½¿ç”¨</strong>ï¼š</p><ul><li>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œéœ€è¦é€šè¿‡æŸ¥è¯¢å‚æ•°å‘æœåŠ¡å™¨ä¼ é€’é¢å¤–ä¿¡æ¯ï¼ˆå¦‚è·å–ç‰¹å®šè¯„è®ºï¼‰ï¼Œä»¥å®ç°æ›´åŠ ç»†ç²’åº¦çš„æ•°æ®è·å–ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ -æœåŠ¡å™¨(ä¹)ã€Node.jså’ŒNPM</title>
      <link href="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/"/>
      <url>/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æœåŠ¡å™¨ï¼Ÿ</h1><p>æœåŠ¡å™¨æ˜¯ä¸€ä¸ªå“åº”å®¢æˆ·ç«¯è¯·æ±‚å¹¶æä¾›æœåŠ¡çš„ç³»ç»Ÿã€‚åœ¨ Web å¼€å‘ä¸­ï¼ŒæœåŠ¡å™¨é€šè¿‡ <strong>è¯·æ±‚-å“åº”</strong> çš„æ¨¡å¼ä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚</p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡å™¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡å™¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡å™¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡å™¨ï¼Ÿ</h2><ul><li><strong>æ–‡ä»¶è®¿é—®</strong>ï¼šé›†ä¸­å­˜å‚¨å’Œç®¡ç†æ–‡ä»¶ã€‚</li><li><strong>é›†ä¸­åŒ–</strong>ï¼šç»Ÿä¸€ç®¡ç†æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ã€‚</li><li><strong>å®‰å…¨æ€§</strong>ï¼šé€šè¿‡æœåŠ¡å™¨æ§åˆ¶è®¿é—®æƒé™ï¼Œä¿æŠ¤æ•°æ®ã€‚</li></ul><h2 id="æœåŠ¡å™¨å¦‚ä½•å·¥ä½œï¼Ÿ"><a href="#æœåŠ¡å™¨å¦‚ä½•å·¥ä½œï¼Ÿ" class="headerlink" title="æœåŠ¡å™¨å¦‚ä½•å·¥ä½œï¼Ÿ"></a>æœåŠ¡å™¨å¦‚ä½•å·¥ä½œï¼Ÿ</h2><p>æ¯ä¸ªæœåŠ¡å™¨éƒ½ç»‘å®šåˆ°è®¡ç®—æœºä¸Šçš„ä¸€ä¸ªç«¯å£ï¼ˆå¦‚ 80ã€443ï¼‰ã€‚å®¢æˆ·ç«¯é€šè¿‡ <strong>åè®®:&#x2F;&#x2F;åŸŸå:ç«¯å£</strong> çš„æ–¹å¼è¿æ¥åˆ°æœåŠ¡å™¨ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:3000</span><br></pre></td></tr></table></figure><ul><li><code>localhost</code> è¡¨ç¤ºæœ¬åœ°è®¡ç®—æœºã€‚</li><li><code>3000</code> æ˜¯æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£ã€‚</li></ul><h2 id="ä½¿ç”¨æœ¬æœºä½œä¸ºæœåŠ¡å™¨"><a href="#ä½¿ç”¨æœ¬æœºä½œä¸ºæœåŠ¡å™¨" class="headerlink" title="ä½¿ç”¨æœ¬æœºä½œä¸ºæœåŠ¡å™¨"></a>ä½¿ç”¨æœ¬æœºä½œä¸ºæœåŠ¡å™¨</h2><p>å®é™…ä¸Šï¼Œæ¯å°è®¡ç®—æœºéƒ½å¯ä»¥è¿è¡ŒæœåŠ¡å™¨ä»£ç ï¼Œåªéœ€è¦å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç¨‹åºã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, Server!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on http://localhost:3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ­¤ä»£ç åï¼Œè®¿é—® <code>http://localhost:3000</code>ï¼Œä½ å°†çœ‹åˆ°æµè§ˆå™¨ä¸­æ˜¾ç¤º â€œHello, Server!â€ã€‚</p><hr><h1 id="Node-js-å’Œ-Express-js"><a href="#Node-js-å’Œ-Express-js" class="headerlink" title="Node.js å’Œ Express.js"></a>Node.js å’Œ Express.js</h1><h2 id="ä»€ä¹ˆæ˜¯-Node-jsï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Node-jsï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Node.jsï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Node.jsï¼Ÿ</h2><p>Node.js æ˜¯ä¸€ä¸ªè¿è¡Œ JavaScript çš„æœåŠ¡å™¨ç«¯å¹³å°ï¼ŒåŸºäº Chrome çš„ V8 å¼•æ“ã€‚å®ƒå…è®¸ä½ åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ JavaScriptã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-Express-jsï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-Express-jsï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ Express.jsï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Express.jsï¼Ÿ</h2><p>Express.js æ˜¯ Node.js ä¸Šçš„ä¸€ä¸ªè½»é‡çº§ Web æ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿæ„å»ºæœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºã€‚å®ƒç®€åŒ–äº†è·¯ç”±ã€ä¸­é—´ä»¶å’Œè¯·æ±‚å¤„ç†ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ Express.js æ„å»ºç®€å• API çš„ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/api&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Hello, API!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;API server running on http://localhost:3000/api&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è®¿é—® <code>/api</code> è·¯å¾„ä¼šè¿”å› JSON æ•°æ®ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello, API!&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="æˆ‘ä»¬éœ€è¦ä»ç‰¹æ®Šåˆ°ä¸ç‰¹æ®Šåœ°å®šä¹‰ç«¯ç‚¹"><a href="#æˆ‘ä»¬éœ€è¦ä»ç‰¹æ®Šåˆ°ä¸ç‰¹æ®Šåœ°å®šä¹‰ç«¯ç‚¹" class="headerlink" title="æˆ‘ä»¬éœ€è¦ä»ç‰¹æ®Šåˆ°ä¸ç‰¹æ®Šåœ°å®šä¹‰ç«¯ç‚¹"></a>æˆ‘ä»¬éœ€è¦ä»ç‰¹æ®Šåˆ°ä¸ç‰¹æ®Šåœ°å®šä¹‰ç«¯ç‚¹</h2><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130001917084.png" alt="image-20241130001917084"></p><h1 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h1><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130001637804.png" alt="image-20241130001637804"></p><ul><li><p><strong>&#x2F;client</strong> - åŒ…å«æˆ‘ä»¬æ‰€æœ‰çš„ React ä»£ç ã€ç»„ä»¶ã€é¡µé¢ã€å·¥å…·ç­‰å†…å®¹ã€‚ï¼ˆå‰ç«¯ï¼‰</p></li><li><p><strong>&#x2F;server</strong> - åŒ…å«æˆ‘ä»¬æ‰€æœ‰çš„åç«¯ä»£ç ã€‚</p></li><li><p><strong>å…¶ä»–æ–‡ä»¶</strong> - ç”±å›¢é˜Ÿäººå‘˜è®¾ç½®ï¼Œç”¨äºé…ç½® React åº”ç”¨ã€‚å¦‚æœ‰ç–‘é—®ï¼Œè¯·éšæ—¶å’¨è¯¢ç›¸å…³äººå‘˜ã€‚</p></li></ul><hr><h1 id="NPMï¼ˆNode-åŒ…ç®¡ç†å™¨ï¼‰"><a href="#NPMï¼ˆNode-åŒ…ç®¡ç†å™¨ï¼‰" class="headerlink" title="NPMï¼ˆNode åŒ…ç®¡ç†å™¨ï¼‰"></a>NPMï¼ˆNode åŒ…ç®¡ç†å™¨ï¼‰</h1><p>NPM æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼Œç”¨äºå®‰è£…å’Œç®¡ç†ä¾èµ–ã€‚</p><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><ul><li><code>npm install</code>ï¼šå®‰è£…ä¾èµ–ã€‚</li><li><code>npm start</code>ï¼šè¿è¡Œé¡¹ç›®ã€‚</li><li><code>npm run &lt;script&gt;</code>ï¼šè¿è¡Œåœ¨ <code>package.json</code> ä¸­å®šä¹‰çš„è„šæœ¬ã€‚</li><li><code>npm run hotloader</code>ï¼šè¿è¡Œå¼€å‘ç¯å¢ƒï¼ˆå…·ä½“ä»»åŠ¡ç”±è„šæœ¬é…ç½®ï¼‰ã€‚</li></ul><p>é¡¹ç›®ç»“æ„ï¼š</p><ul><li><strong>package.json</strong>ï¼šå­˜å‚¨é¡¹ç›®å…ƒä¿¡æ¯ï¼Œä¾‹å¦‚ä¾èµ–é¡¹ã€è„šæœ¬ç­‰ã€‚</li><li><strong>node_modules</strong>ï¼šåŒ…å«å®‰è£…çš„ä¾èµ–ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯å…¸å‹çš„ <code>package.json</code> æ–‡ä»¶ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;my-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;start&quot;</span><span class="punctuation">:</span> <span class="string">&quot;node server.js&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;test&quot;</span><span class="punctuation">:</span> <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;express&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.18.2&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿è¡Œ <code>npm install</code>ï¼ŒNPM ä¼šä¸‹è½½ <code>express</code> å¹¶å°†å…¶å­˜å‚¨åœ¨ <code>node_modules</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130001503527.png" alt="image-20241130001503527"></p><hr><h1 id="åˆ›å»º-API-ç«¯ç‚¹"><a href="#åˆ›å»º-API-ç«¯ç‚¹" class="headerlink" title="åˆ›å»º API ç«¯ç‚¹"></a>åˆ›å»º API ç«¯ç‚¹</h1><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130002058179.png" alt="image-20241130002058179"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130002109137.png" alt="image-20241130002109137"></p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130002117242.png" alt="image-20241130002117242"></p><h1 id="ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰"><a href="#ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰" class="headerlink" title="ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰"></a>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰</h1><p>ä¸­é—´ä»¶æ˜¯ Express.js çš„æ ¸å¿ƒæ¦‚å¿µï¼Œç”¨äºåœ¨è¯·æ±‚å’Œå“åº”ä¹‹é—´æ’å…¥é¢å¤–çš„å¤„ç†é€»è¾‘ã€‚</p><ul><li><p>ä¸­é—´ä»¶æ˜¯å½“è¯·æ±‚åˆ°è¾¾æ—¶è¿è¡Œçš„å‡½æ•°</p></li><li><p>å¯ä»¥åœ¨è·¯ç”±å¤„ç†å™¨ä¹‹å‰è¿è¡Œ</p></li><li><p>è·¯ç”±å¤„ç†å™¨ä¹Ÿæ˜¯ä¸­é—´ä»¶ï¼</p></li></ul><h2 id="ä¸­é—´ä»¶çš„ä½œç”¨"><a href="#ä¸­é—´ä»¶çš„ä½œç”¨" class="headerlink" title="ä¸­é—´ä»¶çš„ä½œç”¨"></a>ä¸­é—´ä»¶çš„ä½œç”¨</h2><ul><li><strong>ä¿®æ”¹è¯·æ±‚</strong>ï¼šä¸ºè¯·æ±‚å¯¹è±¡æ·»åŠ å±æ€§ã€‚</li><li><strong>é¢„å¤„ç†</strong>ï¼šè§£æè¯·æ±‚ä½“ã€éªŒè¯ç”¨æˆ·èº«ä»½ç­‰ã€‚</li><li><strong>å¤„ç†é”™è¯¯</strong>ï¼šæ•è·å¹¶å¤„ç†å¼‚å¸¸ã€‚</li><li><strong>æä¾›é™æ€å†…å®¹</strong></li></ul><h2 id="ä¸­é—´ä»¶çš„å®šä¹‰å’Œè°ƒç”¨"><a href="#ä¸­é—´ä»¶çš„å®šä¹‰å’Œè°ƒç”¨" class="headerlink" title="ä¸­é—´ä»¶çš„å®šä¹‰å’Œè°ƒç”¨"></a>ä¸­é—´ä»¶çš„å®šä¹‰å’Œè°ƒç”¨</h2><p>Express.js ä½¿ç”¨ <code>app.use(middlewareFunction)</code> æ³¨å†Œä¸­é—´ä»¶ã€‚</p><blockquote><p><strong><code>app.use()</code> æ˜¯ Express æä¾›çš„æ–¹æ³•ï¼Œç”¨äºæ³¨å†Œä¸­é—´ä»¶æˆ–è·¯ç”±æ¨¡å—ã€‚</strong></p><ul><li><strong>ä¸­é—´ä»¶</strong>ï¼šå¯¹è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼ˆå¦‚è§£æ JSON æ•°æ®ã€èº«ä»½éªŒè¯ç­‰ï¼‰ã€‚</li><li><strong>è·¯ç”±æ¨¡å—</strong>ï¼šå®šä¹‰å¤šä¸ªè·¯ç”±ï¼ˆå¦‚ GETã€POSTï¼‰æ¥å¤„ç†ä¸åŒçš„è·¯å¾„ã€‚</li></ul></blockquote><p>é”™è¯¯ä¸­é—´ä»¶éœ€è¦å››ä¸ªå‚æ•°ï¼š<code>error</code>ã€<code>req</code>ã€<code>res</code>ã€<code>next</code>ã€‚</p><ul><li>åœ¨æ¥æ”¶åˆ°è¯·æ±‚å’Œæ‰§è¡Œç«¯ç‚¹ä»£ç ä¹‹é—´è¿è¡Œçš„ä»£ç </li><li>ä¸­é—´ä»¶å°±åƒæµæ°´çº¿ä¸Šçš„å·¥äºº<ul><li>å®ƒä»¬å¯ä»¥ä¼ é€’è¯·æ±‚å¹¶ä¿®æ”¹&#x2F;è¿”å›å“åº”</li></ul></li><li>ä¸­é—´ä»¶æŒ‰å®šä¹‰çš„é¡ºåºè¢«è°ƒç”¨</li></ul><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130002244445.png" alt="image-20241130002244445"></p><h2 id="æ·»åŠ ä¸­é—´ä»¶"><a href="#æ·»åŠ ä¸­é—´ä»¶" class="headerlink" title="æ·»åŠ ä¸­é—´ä»¶"></a>æ·»åŠ ä¸­é—´ä»¶</h2><p>é€šè¿‡è°ƒç”¨<code>app.use()</code>æ¥æ³¨å†Œä¸­é—´ä»¶</p><p>ä¾‹å­ï¼š</p><p><img src="/2024/11/30/%E5%89%8D%E7%AB%AF-MIT-Web-9-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%81Node-js%E5%92%8CNPM/image-20241130003035151.png" alt="image-20241130003035151"></p><h3 id="åŸºæœ¬ç»“æ„å’Œè°ƒç”¨"><a href="#åŸºæœ¬ç»“æ„å’Œè°ƒç”¨" class="headerlink" title="åŸºæœ¬ç»“æ„å’Œè°ƒç”¨"></a>åŸºæœ¬ç»“æ„å’Œè°ƒç”¨</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸­é—´ä»¶å®šä¹‰</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Request received at:&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toISOString</span>());</span><br><span class="line">  <span class="title function_">next</span>(); <span class="comment">// è°ƒç”¨ next() å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯ç”±å¤„ç†</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, Middleware!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨æœåŠ¡å™¨</span></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server running on http://localhost:3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p><strong><code>next()</code> çš„ä½œç”¨</strong></p><ul><li><p><strong><code>next()</code> æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li><code>next()</code> æ˜¯ Express ä¸­é—´ä»¶å‡½æ•°æä¾›çš„ä¸€ä¸ªå›è°ƒï¼Œç”¨äºå°†è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±å¤„ç†å™¨ã€‚</li><li>å®ƒç¡®ä¿ä¸­é—´ä»¶é“¾èƒ½å¤ŸæŒ‰é¡ºåºæ‰§è¡Œã€‚</li></ul></li><li><p><strong>å¦‚æœæ²¡æœ‰è°ƒç”¨ <code>next()</code> ä¼šæ€ä¹ˆæ ·ï¼Ÿ</strong></p><ul><li><p>å¦‚æœä¸­é—´ä»¶æ²¡æœ‰è°ƒç”¨ <code>next()</code>ï¼Œè¯·æ±‚ä¼šè¢«æŒ‚èµ·ï¼Œå®¢æˆ·ç«¯å°†æ— æ³•æ¥æ”¶åˆ°å“åº”ã€‚</p></li><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Middleware 1&quot;</span>);</span><br><span class="line">  <span class="comment">// æ²¡æœ‰è°ƒç”¨ next()ï¼Œè¯·æ±‚åœåœ¨è¿™é‡Œ</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on http://localhost:3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>å½“å®¢æˆ·ç«¯è®¿é—® <code>/</code> æ—¶ï¼Œ<code>Middleware 1</code> ä¼šæ‰“å°æ—¥å¿—ï¼Œä½†è¯·æ±‚ä¸ä¼šç»§ç»­æ‰§è¡Œåˆ°è·¯ç”± <code>/</code> çš„å¤„ç†å™¨ï¼Œå®¢æˆ·ç«¯æœ€ç»ˆä¼šè¶…æ—¶ã€‚</li></ul></li></ul></li><li><p><strong>æ­£ç¡®ä½¿ç”¨ <code>next()</code> çš„ç¤ºä¾‹</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Middleware 1&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>(); <span class="comment">// å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(<span class="number">3000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running on http://localhost:3000&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>è¾“å‡ºé¡ºåºï¼š<ul><li>æœåŠ¡ç«¯æ—¥å¿—ï¼š<code>Middleware 1</code></li><li>å®¢æˆ·ç«¯å“åº”ï¼š<code>Hello, world!</code></li></ul></li></ul></li></ul><hr><h3 id="next-çš„æ ¸å¿ƒä½œç”¨"><a href="#next-çš„æ ¸å¿ƒä½œç”¨" class="headerlink" title="next() çš„æ ¸å¿ƒä½œç”¨"></a><strong><code>next()</code> çš„æ ¸å¿ƒä½œç”¨</strong></h3><ol><li><p><strong>ä¼ é€’æ§åˆ¶æƒ</strong></p><ul><li>å°†å½“å‰è¯·æ±‚ä¼ é€’ç»™ä¸‹ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ä¸­é—´ä»¶æˆ–è·¯ç”±å¤„ç†å™¨ã€‚</li><li>å¦‚æœæ²¡æœ‰è°ƒç”¨ <code>next()</code>ï¼Œè¯·æ±‚ä¼šè¢«ä¸­æ­¢ã€‚</li></ul></li><li><p><strong>é”™è¯¯å¤„ç†</strong></p><ul><li>å½“è°ƒç”¨ <code>next(err)</code> æ—¶ï¼Œå¯ä»¥å°†é”™è¯¯ä¼ é€’ç»™é”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Something went wrong&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>(error); <span class="comment">// å°†é”™è¯¯ä¼ é€’åˆ°é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err, req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="property">message</span>);</span><br><span class="line">  res.<span class="title function_">status</span>(<span class="number">500</span>).<span class="title function_">send</span>(<span class="string">&quot;Server Error&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>æ§åˆ¶æ‰§è¡Œé¡ºåº</strong></p><ul><li>ä¸­é—´ä»¶æ˜¯æŒ‰ç…§å®šä¹‰çš„é¡ºåºæ‰§è¡Œï¼Œ<code>next()</code> å†³å®šæ˜¯å¦è®©è¯·æ±‚ç»§ç»­å‘ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æµè½¬ã€‚</li></ul></li></ol></blockquote><h3 id="ä¸ºç‰¹å®šè·¯å¾„å®šä¹‰ä¸­é—´ä»¶"><a href="#ä¸ºç‰¹å®šè·¯å¾„å®šä¹‰ä¸­é—´ä»¶" class="headerlink" title="ä¸ºç‰¹å®šè·¯å¾„å®šä¹‰ä¸­é—´ä»¶"></a>ä¸ºç‰¹å®šè·¯å¾„å®šä¹‰ä¸­é—´ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(<span class="string">&quot;/api&quot;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;API middleware triggered&quot;</span>);</span><br><span class="line">  <span class="title function_">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/api/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;API Test Endpoint&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>è§£æ</strong>ï¼š</p><ul><li><code>/api</code> ä¸­é—´ä»¶åªä¼šå¯¹ <code>/api</code> å¼€å¤´çš„è·¯å¾„ç”Ÿæ•ˆï¼Œå¦‚ <code>/api/test</code>ã€‚</li><li>ä¸­é—´ä»¶åœ¨å¤„ç†è·¯å¾„åŒ¹é…åå¯ä»¥ç»§ç»­è°ƒç”¨ <code>next()</code> å°†æ§åˆ¶æƒäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æˆ–è·¯ç”±ã€‚</li></ul><h3 id="ç”¨ä¸­é—´ä»¶å¤„ç†-JSON-æ•°æ®"><a href="#ç”¨ä¸­é—´ä»¶å¤„ç†-JSON-æ•°æ®" class="headerlink" title="ç”¨ä¸­é—´ä»¶å¤„ç† JSON æ•°æ®"></a>ç”¨ä¸­é—´ä»¶å¤„ç† JSON æ•°æ®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>()); <span class="comment">// è§£æ JSON è¯·æ±‚ä½“</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/data&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>); <span class="comment">// è¾“å‡ºè§£æåçš„ JSON æ•°æ®</span></span><br><span class="line">  res.<span class="title function_">send</span>(<span class="string">&quot;Data received&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>è§£æ</strong>ï¼š</p><ul><li><code>express.json()</code> æ˜¯ Express å†…ç½®çš„ JSON è§£æä¸­é—´ä»¶ã€‚</li><li>ç”¨äºå¤„ç†è¯·æ±‚ä½“ä¸­çš„ JSON æ•°æ®ï¼Œå°†å…¶è§£æä¸º JavaScript å¯¹è±¡å¹¶èµ‹å€¼ç»™ <code>req.body</code>ã€‚</li></ul><hr><h1 id="Catch-All-è·¯ç”±å’Œ-React-é›†æˆ"><a href="#Catch-All-è·¯ç”±å’Œ-React-é›†æˆ" class="headerlink" title="Catch All è·¯ç”±å’Œ React é›†æˆ"></a>Catch All è·¯ç”±å’Œ React é›†æˆ</h1><p>åœ¨ä½¿ç”¨ React å’Œ Express æ„å»ºå…¨æ ˆåº”ç”¨æ—¶ï¼Œé€šå¸¸éœ€è¦å¤„ç† â€œCatch Allâ€ è·¯ç”±ä»¥æ”¯æŒå‰ç«¯çš„è·¯ç”±åŠŸèƒ½ã€‚</p><h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&quot;express&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/api/test&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">send</span>(&#123; <span class="attr">message</span>: <span class="string">&quot;Wow I made my first API!&quot;</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ React é™æ€æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> reactPath = path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;..&quot;</span>, <span class="string">&quot;client&quot;</span>, <span class="string">&quot;dist&quot;</span>);</span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">static</span>(reactPath));</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•è·æ‰€æœ‰æœªå®šä¹‰çš„è·¯ç”±å¹¶è¿”å› React çš„ index.html</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;*&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">sendFile</span>(path.<span class="title function_">join</span>(reactPath, <span class="string">&quot;index.html&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="è§£é‡Š"><a href="#è§£é‡Š" class="headerlink" title="è§£é‡Š"></a>è§£é‡Š</h2><ul><li><p><strong><code>require(&quot;express&quot;)</code> æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p><ul><li><code>require</code> æ˜¯ Node.js ä¸­ç”¨äºå¼•å…¥æ¨¡å—çš„å‡½æ•°ã€‚</li><li><code>express</code> æ˜¯ä¸€ä¸ªæµè¡Œçš„ Node.js æ¡†æ¶ï¼Œç”¨äºæ„å»º Web åº”ç”¨ç¨‹åºå’Œ APIã€‚</li><li><code>require(&quot;express&quot;)</code> å¯¼å…¥äº† Express æ¡†æ¶çš„ä¸»æ¨¡å—ã€‚</li><li><strong>ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong><ul><li>Express æä¾›äº†ç®€å•çš„ API æ¥åˆ›å»ºæœåŠ¡å™¨ã€å®šä¹‰è·¯ç”±ã€ä¸­é—´ä»¶å’Œå¤„ç†è¯·æ±‚&#x2F;å“åº”ã€‚</li></ul></li></ul></li><li><h3 id="const-path-require-path"><a href="#const-path-require-path" class="headerlink" title="const path = require(&quot;path&quot;);"></a><strong><code>const path = require(&quot;path&quot;);</code></strong></h3><ul><li><p><code>path</code> æ˜¯ Node.js å†…ç½®çš„æ¨¡å—ï¼Œç”¨äºå¤„ç†æ–‡ä»¶å’Œç›®å½•è·¯å¾„ã€‚</p></li><li><p>é€šè¿‡ä½¿ç”¨ <code>path</code> æ¨¡å—ï¼Œä½ å¯ä»¥æ„å»ºè·¨å¹³å°å…¼å®¹çš„è·¯å¾„ï¼Œé¿å…æ‰‹åŠ¨æ‹¼æ¥è·¯å¾„æ—¶å‡ºé”™ã€‚</p><p><strong>ä½œç”¨</strong>ï¼šè¿™è¡Œä»£ç ä½¿ä½ èƒ½å¤Ÿä½¿ç”¨ <code>path</code> æ¨¡å—æ¥å¤„ç†è·¯å¾„ç›¸å…³çš„æ“ä½œï¼Œç¡®ä¿è·¯å¾„çš„å…¼å®¹æ€§ã€‚</p></li></ul></li><li><h3 id="const-app-express"><a href="#const-app-express" class="headerlink" title="const app = express();"></a><strong><code>const app = express();</code></strong></h3><ul><li><p>è¿™è¡Œä»£ç è°ƒç”¨äº† <code>express()</code> å‡½æ•°ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Express åº”ç”¨å®ä¾‹ï¼Œå¹¶èµ‹å€¼ç»™ <code>app</code> å˜é‡ã€‚</p></li><li><p><code>app</code> æ˜¯ä½ çš„ Express åº”ç”¨ï¼Œæ‰€æœ‰è·¯ç”±å’Œä¸­é—´ä»¶éƒ½ä¼šåœ¨è¿™ä¸ªå®ä¾‹ä¸Šå®šä¹‰å’Œå¤„ç†ã€‚</p><p><strong>ä½œç”¨</strong>ï¼šè¿™è¡Œä»£ç åˆå§‹åŒ–äº†ä¸€ä¸ª Express åº”ç”¨ï¼Œå…è®¸ä½ åœ¨ <code>app</code> ä¸Šå®šä¹‰è·¯ç”±ã€æ·»åŠ ä¸­é—´ä»¶ç­‰ã€‚</p></li></ul></li><li><p><code>express.static(reactPath)</code> æä¾› React çš„é™æ€èµ„æºï¼ˆå¦‚ JSã€CSS æ–‡ä»¶ï¼‰ã€‚</p><ul><li><p><strong>ä»€ä¹ˆæ˜¯é™æ€æ–‡ä»¶ï¼Ÿ</strong></p><ul><li><p>é™æ€æ–‡ä»¶æ˜¯æŒ‡æ— éœ€æœåŠ¡å™¨åŠ¨æ€å¤„ç†ã€å¯ä»¥ç›´æ¥ä¼ é€åˆ°å®¢æˆ·ç«¯çš„èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š</p><ul><li>HTML æ–‡ä»¶</li><li>CSS æ ·å¼è¡¨</li><li>JavaScript è„šæœ¬</li><li>å›¾ç‰‡ï¼ˆå¦‚ PNGã€JPGï¼‰</li><li>å…¶ä»–å¦‚å­—ä½“æ–‡ä»¶ã€éŸ³é¢‘æ–‡ä»¶ç­‰</li></ul></li><li><p>å®ƒä»¬æ˜¯ç›´æ¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„å›ºå®šå†…å®¹ï¼Œä¸ä¾èµ–ç”¨æˆ·è¾“å…¥è¿›è¡ŒåŠ¨æ€ç”Ÿæˆã€‚</p></li></ul></li><li><p><strong>é™æ€æ–‡ä»¶çš„ä½œç”¨</strong></p><ul><li><p>æä¾›ç½‘ç«™çš„å‰ç«¯èµ„æºï¼ˆæ¯”å¦‚å¸ƒå±€ã€æ ·å¼ã€äº¤äº’ç­‰ï¼‰ã€‚</p></li><li><p>é«˜æ•ˆåœ°å‘å®¢æˆ·ç«¯ä¼ é€’æ–‡ä»¶å†…å®¹ï¼Œå‡å°‘æœåŠ¡å™¨çš„è®¡ç®—è´Ÿæ‹…ã€‚</p></li></ul></li></ul></li><li><p><strong><code>app.get(&quot;\*&quot;, (req, res) =&gt; &#123; ... &#125;);</code></strong></p></li><li><p>è¿™è¡Œä»£ç å®šä¹‰äº†ä¸€ä¸ª <strong>é€šé…ç¬¦è·¯ç”±</strong>ï¼ˆcatch-all routeï¼‰ï¼Œ<code>*</code> è¡¨ç¤ºåŒ¹é…ä»»ä½•è·¯å¾„ã€‚</p></li><li><p>å½“ç”¨æˆ·è®¿é—®ä»»ä½•æœªè¢«å‰é¢å®šä¹‰çš„è·¯ç”±æ—¶ï¼Œéƒ½ä¼šè¢«è¿™ä¸ªè·¯ç”±æ•è·ã€‚</p></li><li><p>è¿™é‡Œçš„ <code>res.sendFile(path.join(reactPath, &quot;index.html&quot;));</code> è¡¨ç¤ºæœåŠ¡å™¨è¿”å› <code>reactPath</code> ç›®å½•ä¸‹çš„ <code>index.html</code> æ–‡ä»¶ã€‚</p><p><strong>ä½œç”¨</strong>ï¼šæ•è·æ‰€æœ‰æœªåŒ¹é…çš„è·¯å¾„ï¼Œå¹¶è¿”å› React åº”ç”¨çš„ <code>index.html</code> æ–‡ä»¶ã€‚è¿™æ˜¯å•é¡µåº”ç”¨ï¼ˆSPAï¼‰çš„å¸¸è§åšæ³•ï¼Œå½“ç”¨æˆ·åˆ·æ–°æˆ–è®¿é—®å…¶ä»– URL æ—¶ï¼Œéƒ½ä¼šè¿”å›åŒä¸€ä¸ª <code>index.html</code> æ–‡ä»¶ï¼Œç”± React è·¯ç”±æ¥å¤„ç†é¡µé¢åˆ‡æ¢ã€‚</p></li><li><p>React ä¼šé€šè¿‡å‰ç«¯è·¯ç”±ï¼ˆå¦‚ React Routerï¼‰å¤„ç†è·¯å¾„å¹¶æ¸²æŸ“å¯¹åº”é¡µé¢ã€‚</p></li></ul><h3 id="ä»£ç æ€»ä½“è§£é‡Š"><a href="#ä»£ç æ€»ä½“è§£é‡Š" class="headerlink" title="ä»£ç æ€»ä½“è§£é‡Š"></a><strong>ä»£ç æ€»ä½“è§£é‡Š</strong></h3><p>è¿™æ®µä»£ç æ˜¯å…¸å‹çš„ <strong>å‰åç«¯åˆ†ç¦»</strong> é¡¹ç›®ä¸­çš„æœåŠ¡å™¨ç«¯è®¾ç½®ï¼š</p><ol><li><strong>åç«¯ API</strong>ï¼šé€šè¿‡ <code>/api/test</code> æä¾›ä¸€ä¸ªç®€å•çš„ APIï¼Œå½“ç”¨æˆ·è®¿é—®æ—¶ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ¶ˆæ¯çš„ JSON å“åº”ã€‚</li><li><strong>æ‰˜ç®¡é™æ€æ–‡ä»¶</strong>ï¼šé€šè¿‡ <code>express.static()</code> ä¸­é—´ä»¶ï¼Œå°†æ„å»ºåçš„ React åº”ç”¨æ–‡ä»¶å¤¹ï¼ˆ<code>dist</code>ï¼‰ä½œä¸ºé™æ€æ–‡ä»¶æä¾›ç»™å‰ç«¯ã€‚</li><li><strong>å•é¡µåº”ç”¨æ”¯æŒ</strong>ï¼šä½¿ç”¨ <code>*</code> è·¯ç”±æ•è·æ‰€æœ‰æœªå®šä¹‰çš„è·¯å¾„ï¼Œè¿”å› React åº”ç”¨çš„ <code>index.html</code>ï¼Œç¡®ä¿å®¢æˆ·ç«¯çš„å‰ç«¯è·¯ç”±å¯ä»¥æ­£å¸¸å·¥ä½œã€‚</li></ol><p><strong>æ€»ç»“</strong>ï¼šè¿™æ®µä»£ç ä¸»è¦å®ç°äº†ä¸€ä¸ªç®€æ˜“çš„åç«¯æœåŠ¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç®€å•çš„ API å’Œ React åº”ç”¨çš„é™æ€æ–‡ä»¶æ‰˜ç®¡ï¼ŒåŒæ—¶ç¡®ä¿ React åº”ç”¨èƒ½å¤„ç†ç”¨æˆ·ç›´æ¥è®¿é—®ä¸åŒ URL çš„æƒ…å†µã€‚</p><h1 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a><strong>è¿è¡ŒæœåŠ¡å™¨</strong></h1><ul><li>åŒæ—¶è¿è¡Œä¸¤ä¸ªæœåŠ¡å™¨ï¼š<ul><li><code>localhost:5050</code>ï¼šå¤„ç† React çƒ­åŠ è½½ã€‚</li><li><code>localhost:3000</code>ï¼šNode.js åç«¯æœåŠ¡å™¨ã€‚</li></ul></li><li>æµ‹è¯•åç«¯ç”¨ <code>localhost:3000</code>ï¼ŒæŸ¥çœ‹ç½‘ç«™ç”¨ <code>localhost:5050</code>ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (å…«)-reactå®æˆ˜ä¹‹è·¯ç”±ä¸ç½‘ç»œè¯·æ±‚</title>
      <link href="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/"/>
      <url>/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<div class="row">    <embed src="W3-Catbook_using_APIs_and_Routing.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨Workshop2å½“ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†è¿™æ ·çš„ä¸€ä¸ªé¡µé¢</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129171807145.png" alt="image-20241129171807145"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129171837195.png" alt="image-20241129171837195"></p><p>åœ¨è¿™ä¸ªworkshop3å½“ä¸­ï¼Œæˆ‘ä»¬å°†ç»™è¿™ä¸ªé¡µé¢æ·»åŠ è·¯ç”±å’Œæ–°çš„è¯„è®ºé¡µé¢</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129171916772.png" alt="image-20241129171916772"></p><h1 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h1><p>æˆ‘ä»¬ä¸»è¦ç”¨<code>&lt;Router /&gt;</code>æˆ–<code>&lt;Link /&gt;</code></p><h2 id><a href="#" class="headerlink" title="&lt;Router /&gt;"></a><code>&lt;Router /&gt;</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129172124651.png" alt="image-20241129172124651"></p><ul><li>æœ‰<code>/</code>çš„æ˜¯ç»å¯¹è·¯å¾„</li><li>æ— <code>/</code>çš„æ˜¯ç›¸å¯¹è·¯å¾„</li></ul><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129172251257.png" alt="image-20241129172251257"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129172554545.png" alt="image-20241129172554545"></p><blockquote><p><strong>å­è·¯ç”±çš„è·¯å¾„æ˜¯ç›¸å¯¹äºå…¶çˆ¶è·¯ç”±çš„</strong>ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¹è·¯å¾„ã€‚å…·ä½“æ¥è¯´ï¼Œ<code>&lt;DashboardHome path=&quot;/&quot; /&gt;</code> æ˜¯å®šä¹‰åœ¨ <code>&lt;Dashboard&gt;</code> å†…éƒ¨çš„ï¼Œå®ƒçš„è·¯å¾„ä¼šè¢«è§£é‡Šä¸ºç›¸å¯¹äº <code>Dashboard</code> çš„ <code>path=&quot;dashboard&quot;</code>ï¼Œè€Œä¸ä¼šç›´æ¥ä½œç”¨äºå…¨å±€çš„ <code>/</code>ã€‚</p></blockquote><h2 id="-1"><a href="#-1" class="headerlink" title="&lt;Link /&gt;"></a><code>&lt;Link /&gt;</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241129172645686.png" alt="image-20241129172645686"></p><h1 id="ç½‘ç»œè¯·æ±‚"><a href="#ç½‘ç»œè¯·æ±‚" class="headerlink" title="ç½‘ç»œè¯·æ±‚"></a>ç½‘ç»œè¯·æ±‚</h1><p>æˆ‘ä»¬çš„æœ€ç»ˆç›®çš„ï¼š</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209185655859.png" alt="image-20241209185655859"></p><p>å½“å‰ç»“æ„:</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209191311326.png" alt="image-20241209191311326"></p><h2 id="Feed-jsçš„Story"><a href="#Feed-jsçš„Story" class="headerlink" title="Feed.jsçš„Story"></a><code>Feed.js</code>çš„Story</h2><ul><li><strong>Step 0: æ›¿æ¢ <code>Profile</code> ç»„ä»¶ä¸º <code>Feed</code> ç»„ä»¶</strong><ul><li>å°†åŸæœ¬çš„ <code>Profile</code> ç»„ä»¶æ›¿æ¢æˆ <code>Feed</code> ç»„ä»¶ï¼Œä½œä¸ºå±•ç¤ºæ•…äº‹çš„ä¸»è¦å®¹å™¨ã€‚</li></ul></li><li><strong>Step 1: å£°æ˜çŠ¶æ€ï¼Œä½¿ç”¨ GET è¯·æ±‚åŠ è½½æ‰€æœ‰è¯„è®ºæ•°æ®</strong><ul><li>åœ¨ç»„ä»¶ä¸­å£°æ˜çŠ¶æ€ï¼Œç”¨æ¥å­˜å‚¨ä»æ•°æ®åº“åŠ è½½çš„è¯„è®ºæ•°æ®ã€‚</li><li>ä½¿ç”¨ GET è¯·æ±‚ä»æ•°æ®åº“è·å–æ‰€æœ‰è¯„è®ºå¹¶æ›´æ–°çŠ¶æ€ã€‚</li></ul></li><li><strong>Step 2: ä½¿ç”¨ Dummy æ•°æ®æ¸²æŸ“ <code>SingleStory</code> ç»„ä»¶</strong><ul><li>ä½¿ç”¨è™šæ‹Ÿçš„ï¼ˆDummyï¼‰æ•°æ®æ¥æµ‹è¯•å¹¶æ¸²æŸ“ <code>SingleStory</code> ç»„ä»¶ï¼Œæ¨¡æ‹Ÿå¦‚ä½•å±•ç¤ºæ¯ä¸€æ¡æ•…äº‹ã€‚</li></ul></li><li><strong>Step 3: ä½¿ç”¨ <code>.map()</code> æ–¹æ³•å°†æ•…äº‹æ•°æ®ï¼ˆæ¥è‡ª GET è¯·æ±‚ï¼‰æ˜ å°„ä¸ºå•ä¸ªæ•…äº‹</strong><ul><li>é€šè¿‡ <code>.map()</code> æ–¹æ³•éå†è·å–åˆ°çš„æ•…äº‹æ•°æ®ï¼Œå°†æ¯ä¸ªæ•…äº‹æ¸²æŸ“æˆ <code>SingleStory</code> ç»„ä»¶ã€‚</li></ul></li><li><strong>Step 4: å°† <code>NewPostInput</code> åŒ…è£¹åœ¨ä¸€ä¸ªæ–°çš„ç»„ä»¶ä¸­ï¼Œå¹¶æ·»åŠ å‘å¸ƒåŠŸèƒ½</strong><ul><li>å°† <code>NewPostInput</code> ç»„ä»¶å°è£…åˆ°ä¸€ä¸ªæ–°çš„ç»„ä»¶ä¸­ï¼Œå¹¶å®ç°å‘å¸ƒæ–°æ•…äº‹çš„åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·æäº¤æ•°æ®ã€‚</li></ul></li></ul><h2 id="Card-jsçš„Comment"><a href="#Card-jsçš„Comment" class="headerlink" title="Card.jsçš„Comment"></a><code>Card.js</code>çš„Comment</h2><ul><li><strong>Step 6- 8ï¼š åœ¨æ¯ä¸ªstoryä¸‹é¢æ˜¾ç¤ºè¯„è®ºï¼ŒåŒæ—¶æ·»åŠ è¯„è®ºæ¡†</strong><ul><li><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209192748628.png" alt="image-20241209192748628"></li></ul></li></ul><h2 id="Step-1-4ç»“æœ"><a href="#Step-1-4ç»“æœ" class="headerlink" title="Step 1-4ç»“æœ"></a>Step 1-4ç»“æœ</h2><h2 id="story"><a href="#story" class="headerlink" title="story"></a><code>story</code></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Feed</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [stories, setStories] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="string">&quot;/api/stories&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">storyObjs</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setStories</span>(storyObjs);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> storiesList = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> hasStories = stories.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasStories) &#123;</span><br><span class="line">    storiesList = stories.<span class="title function_">map</span>(<span class="function">(<span class="params">storyObj</span>) =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">SingleStory</span> <span class="attr">creator_name</span>=<span class="string">&#123;storyObj.creator_name&#125;</span> <span class="attr">content</span>=<span class="string">&#123;storyObj.content&#125;</span> /&gt;</span></span></span><br><span class="line">    ));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    storiesList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No stories!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NewStory</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;storiesList&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// TODO (step6): use Card instead of SingleStory</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>newPostInput.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">NewStory</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addStory</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/story&quot;</span>, body);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Story&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addStory&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç›®å‰ç»“æœ:</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209191517104.png" alt="image-20241209191517104"></p><h2 id="Step-6-9"><a href="#Step-6-9" class="headerlink" title="Step 6-9"></a>Step 6-9</h2><h3 id="comment"><a href="#comment" class="headerlink" title="comment"></a><code>comment</code></h3><p>æœ€ç»ˆç›®çš„ï¼š</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209190647532.png" alt="image-20241209190647532"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Feed</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [stories, setStories] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="string">&quot;/api/stories&quot;</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">storyObjs</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setStories</span>(storyObjs);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> storiesList = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> hasStories = stories.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasStories) &#123;</span><br><span class="line">    storiesList = stories.<span class="title function_">map</span>(<span class="function">(<span class="params">storyObj</span>) =&gt;</span> (</span><br><span class="line">      <span class="comment">//â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“//</span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span> <span class="attr">_id</span>=<span class="string">&#123;storyObj._id&#125;</span> <span class="attr">creator_name</span>=<span class="string">&#123;storyObj.creator_name&#125;</span> <span class="attr">content</span>=<span class="string">&#123;storyObj.content&#125;</span> /&gt;</span></span></span><br><span class="line">      <span class="comment">//â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘//</span></span><br><span class="line">      <span class="comment">//before: </span></span><br><span class="line">      <span class="comment">//&lt;SingleStory creator_name=&#123;storyObj.creator_name&#125; content=&#123;storyObj.content&#125; /&gt;</span></span><br><span class="line">      ));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    storiesList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No stories!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NewStory</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;storiesList&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Feed</span>;</span><br></pre></td></tr></table></figure><p><code>card.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Card</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [comments, setComments] = <span class="title function_">useState</span>([]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="string">&quot;/api/comment&quot;</span>, &#123; <span class="attr">parent</span>: props.<span class="property">_id</span> &#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">commentItems</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setComments</span>(commentItems);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> commentsList = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">const</span> hasComments = comments.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (hasComments) &#123;</span><br><span class="line">      commentsList = comments.<span class="title function_">map</span>(<span class="function">(<span class="params">commentObj</span>) =&gt;</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">SingleComment</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">_id</span>=<span class="string">&#123;commentObj._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">creator_name</span>=<span class="string">&#123;commentObj.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">content</span>=<span class="string">&#123;commentObj.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line">      ));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      commentsList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No comments!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Card-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">SingleStory</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">_id</span>=<span class="string">&#123;props._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">creator_name</span>=<span class="string">&#123;props.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">content</span>=<span class="string">&#123;props.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;commentsList&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">NewComment</span> <span class="attr">storyId</span>=<span class="string">&#123;props._id&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">  <span class="comment">// TODO (step9): use CommentsBlock</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Card</span>;</span><br></pre></td></tr></table></figure><p><code>newComment</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">NewComment</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addComment</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">parent</span>: props.<span class="property">storyId</span>, <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/comment&quot;</span>, body);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Comment&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addComment&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209191020995.png" alt="image-20241209191020995"></p><h2 id="Step10"><a href="#Step10" class="headerlink" title="Step10"></a>Step10</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209191103251.png" alt="image-20241209191103251"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Card</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  ....</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Card-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SingleStory</span> <span class="attr">_id</span>=<span class="string">&#123;props._id&#125;</span> <span class="attr">creator_name</span>=<span class="string">&#123;props.creator_name&#125;</span> <span class="attr">content</span>=<span class="string">&#123;props.content&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CommentsBlock</span> <span class="attr">storyId</span>=<span class="string">&#123;props._id&#125;</span> <span class="attr">comments</span>=<span class="string">&#123;comments&#125;</span> <span class="attr">addNewComment</span>=<span class="string">&#123;addNewComment&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">CommentsBlock</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Card-commentSection&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;story-comments&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;props.comments.map((comment) =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">SingleComment</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">SingleComment_</span>$&#123;<span class="attr">comment._id</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">_id</span>=<span class="string">&#123;comment._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">creator_name</span>=<span class="string">&#123;comment.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">content</span>=<span class="string">&#123;comment.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          /&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">NewComment</span> <span class="attr">storyId</span>=<span class="string">&#123;props.storyId&#125;</span> <span class="attr">addNewComment</span>=<span class="string">&#123;props.addNewComment&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="æœ€åä¸€æ­¥-å®æ—¶è¯„è®º"><a href="#æœ€åä¸€æ­¥-å®æ—¶è¯„è®º" class="headerlink" title="æœ€åä¸€æ­¥-å®æ—¶è¯„è®º"></a>æœ€åä¸€æ­¥-å®æ—¶è¯„è®º</h2><p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡æäº¤æ•…äº‹æˆ–è¯„è®ºçš„æ—¶å€™ï¼Œéƒ½éœ€è¦é‡æ–°åˆ·æ–°æ‰ä¼šæ˜¾ç¤ºå‡ºå¤–é¢æ–°æ·»åŠ çš„è¯„è®ºï¼Œæˆ‘ä»¬è¦æ€ä¹ˆä¿®æ”¹æˆ‘ä»¬çš„ä»£ç æ‰èƒ½åšåˆ° <strong>æˆ‘ä»¬ä¸€æäº¤ï¼Œé¡µé¢å°±æ˜¾ç¤ºå‡ºæ–°å†…å®¹ï¼Ÿ</strong></p><p>æˆ‘ä»¬çš„<code>stories</code>åˆ—è¡¨æ˜¯å­˜åœ¨<code>Feed.js</code>å½“ä¸­ï¼Œ<code>comment</code>åˆ—è¡¨æ˜¯å­˜åœ¨<code>Card.js</code>å½“ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ¯æ¬¡æäº¤çš„æ—¶å€™éƒ½ä¼šè°ƒç”¨ä»–ä»¬çš„<strong>å›è°ƒå‡½æ•°</strong>çš„è¯å°±èƒ½å®æ—¶æ›´æ–°äº†</p><p><code>Feed.js</code></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209195215829.png" alt="image-20241209195215829"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BEFORE:</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Feed</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [stories, setStories] = <span class="title function_">useState</span>([]);</span><br><span class="line">    ...</span><br><span class="line">  <span class="keyword">let</span> storiesList = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> hasStories = stories.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasStories) &#123;</span><br><span class="line">    storiesList = stories.<span class="title function_">map</span>(<span class="function">(<span class="params">storyObj</span>) =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span> <span class="attr">_id</span>=<span class="string">&#123;storyObj._id&#125;</span> <span class="attr">creator_name</span>=<span class="string">&#123;storyObj.creator_name&#125;</span> <span class="attr">content</span>=<span class="string">&#123;storyObj.content&#125;</span> /&gt;</span></span></span><br><span class="line">      ));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    storiesList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No stories!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NewStory</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;storiesList&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AFTER</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Feed</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [stories, setStories] = <span class="title function_">useState</span>([]);</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// this gets called when the user pushes &quot;Submit&quot;, so their</span></span><br><span class="line">  <span class="comment">// post gets added to the screen right away</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addNewStory</span> = (<span class="params">storyObj</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setStories</span>(stories.<span class="title function_">concat</span>([storyObj]));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> storiesList = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">const</span> hasStories = stories.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (hasStories) &#123;</span><br><span class="line">    storiesList = stories.<span class="title function_">map</span>(<span class="function">(<span class="params">storyObj</span>) =&gt;</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">Card</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">Card_</span>$&#123;<span class="attr">storyObj._id</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">_id</span>=<span class="string">&#123;storyObj._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">creator_name</span>=<span class="string">&#123;storyObj.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">content</span>=<span class="string">&#123;storyObj.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      /&gt;</span></span></span><br><span class="line">    ));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    storiesList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No stories!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">NewStory</span> <span class="attr">addNewStory</span>=<span class="string">&#123;addNewStory&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;storiesList&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>card.js</code></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209195105655.png" alt="image-20241209195105655"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BRFORE</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Card</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [comments, setComments] = <span class="title function_">useState</span>([]);</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">let</span> commentsList = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">const</span> hasComments = comments.<span class="property">length</span> !== <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (hasComments) &#123;</span><br><span class="line">      commentsList = comments.<span class="title function_">map</span>(<span class="function">(<span class="params">commentObj</span>) =&gt;</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">SingleComment</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">_id</span>=<span class="string">&#123;commentObj._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">creator_name</span>=<span class="string">&#123;commentObj.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">content</span>=<span class="string">&#123;commentObj.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line">      ));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      commentsList = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>No comments!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Card-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">SingleStory</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">_id</span>=<span class="string">&#123;props._id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">creator_name</span>=<span class="string">&#123;props.creator_name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">content</span>=<span class="string">&#123;props.content&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">CommentsBlock</span> <span class="attr">storyId</span>=<span class="string">&#123;props._id&#125;</span> <span class="attr">comments</span>=<span class="string">&#123;comments&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AFTER</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Card</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [comments, setComments] = <span class="title function_">useState</span>([]);</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">// this gets called when the user pushes &quot;Submit&quot;, so their</span></span><br><span class="line">  <span class="comment">// post gets added to the screen right away</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addNewComment</span> = (<span class="params">commentObj</span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setComments</span>(comments.<span class="title function_">concat</span>([commentObj]));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;Card-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">SingleStory</span> <span class="attr">_id</span>=<span class="string">&#123;props._id&#125;</span> <span class="attr">creator_name</span>=<span class="string">&#123;props.creator_name&#125;</span> <span class="attr">content</span>=<span class="string">&#123;props.content&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">CommentsBlock</span> <span class="attr">storyId</span>=<span class="string">&#123;props._id&#125;</span> <span class="attr">comments</span>=<span class="string">&#123;comments&#125;</span> <span class="attr">addNewComment</span>=<span class="string">&#123;addNewComment&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><code>NewPostInput.js</code></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-8-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%AE%9E%E6%88%98%E4%B9%8B%E8%B7%AF%E7%94%B1%E4%B8%8E%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/image-20241209195111607.png" alt="image-20241209195111607"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BEFORE</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * New Story is a New Post component for stories</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">NewStory</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addStory</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/story&quot;</span>, body);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Story&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addStory&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * New Comment is a New Post component for comments</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Proptypes</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; storyId to add comment to</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">NewComment</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addComment</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">parent</span>: props.<span class="property">storyId</span>, <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/comment&quot;</span>, body);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Comment&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addComment&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AFTER</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * New Story is a New Post component for stories</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">NewStory</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addStory</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/story&quot;</span>, body).<span class="title function_">then</span>(<span class="function">(<span class="params">story</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// display this story on the screen</span></span><br><span class="line">      props.<span class="title function_">addNewStory</span>(story);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Story&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addStory&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * New Comment is a New Post component for comments</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Proptypes</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; storyId to add comment to</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">NewComment</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">addComment</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> body = &#123; <span class="attr">parent</span>: props.<span class="property">storyId</span>, <span class="attr">content</span>: value &#125;;</span><br><span class="line">    <span class="title function_">post</span>(<span class="string">&quot;/api/comment&quot;</span>, body).<span class="title function_">then</span>(<span class="function">(<span class="params">comment</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// display this comment on the screen</span></span><br><span class="line">      props.<span class="title function_">addNewComment</span>(comment);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">NewPostInput</span> <span class="attr">defaultText</span>=<span class="string">&quot;New Comment&quot;</span> <span class="attr">onSubmit</span>=<span class="string">&#123;addComment&#125;</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (ä¸ƒ)-APIs_and_Promises</title>
      <link href="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/"/>
      <url>/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/</url>
      
        <content type="html"><![CDATA[<h1 id="æµè§ˆå™¨åŸºç¡€çŸ¥è¯†"><a href="#æµè§ˆå™¨åŸºç¡€çŸ¥è¯†" class="headerlink" title="æµè§ˆå™¨åŸºç¡€çŸ¥è¯†"></a>æµè§ˆå™¨åŸºç¡€çŸ¥è¯†</h1><h2 id="ç½‘å€-URL"><a href="#ç½‘å€-URL" class="headerlink" title="ç½‘å€(URL)"></a>ç½‘å€(URL)</h2><p>å­¦å: <strong>ç»Ÿä¸€èµ„æºå®šä½ç¬¦</strong></p><h3 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h3><ul><li><p>ç½‘ç»œåè®®ç±»å‹:HTTPã€HTTPSã€FTPç­‰</p></li><li><p>åŸŸå:å¦‚<a href="http://www.mudcloud.fun/">www.mudcloud.fun</a></p></li><li><p>èµ„æºåœ¨æµè§ˆå™¨ä¸­çš„ä½ç½®:æœ‰æ—¶ä»¥æ–‡ä»¶<strong>è·¯å¾„</strong>å½¢å¼å‡ºç°,æœ‰æ—¶ä»¥<strong>è·¯ç”±</strong>å½¢å¼å‡ºç°.</p><blockquote><p>æ¯”å¦‚æˆ‘ä»¬ä¸€çœ‹åˆ° URL <code>https://www.sample.com/ç¼–ç¨‹/æµ‹è¯•éŸ³é¢‘.mp3</code>ï¼Œå°±çŸ¥é“è¿™æ˜¯åœ¨è·å–åŸŸåä¸º <code>sample.com</code> çš„æœåŠ¡å™¨ä¸­ï¼Œç¼–ç¨‹æ–‡ä»¶å¤¹ä¸‹çš„ <strong>æµ‹è¯•éŸ³é¢‘.mp3</strong> æ–‡ä»¶ã€‚</p><p>æ¯”å¦‚æ‰‡è´ç¼–ç¨‹é¦–é¡µçš„ URL æ˜¯ <code>https://www.bailog.top/archives/</code>ï¼Œå…¶ä¸­çš„ <code>/archives/</code> æ˜¯èµ„æºå¯¹åº”çš„è·¯ç”±ï¼Œåªæœ‰æä¾›ç½‘ç»œæœåŠ¡è¿™ä¸€ç«¯çŸ¥é“èµ„æºåˆ°åº•åœ¨å“ªé‡Œã€‚</p></blockquote></li><li><p>é”šç‚¹:å¦‚<code>https://www.bailog.top/2023/12/14/Python-treeé€’å½’-treeé€’å½’/#æ€»ç»“</code>åé¢ä¸­çš„#æ€»ç»“ï¼Œç”¨äºå®šä½æ–‡ç« å¯¹åº”çš„å†…å®¹ã€‚</p></li></ul><h2 id="ç½‘ç»œè¯·æ±‚"><a href="#ç½‘ç»œè¯·æ±‚" class="headerlink" title="ç½‘ç»œè¯·æ±‚"></a>ç½‘ç»œè¯·æ±‚</h2><p>æµè§ˆå™¨åªæ˜¯ä¸€ä¸ªâ€œä¸­è½¬ç«™â€ï¼Œå¹¶æ²¡æœ‰ä¿å­˜ç½‘ç«™å†…å®¹ã€‚æˆ‘ä»¬æµè§ˆç½‘é¡µï¼Œæ˜¯åœ¨é€šè¿‡æµè§ˆå™¨ï¼Œè·Ÿæä¾›èµ„æºå†…å®¹çš„ <strong>æœåŠ¡å™¨</strong> é€šä¿¡ã€‚å®ƒçš„å®é™…è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p><ul><li>æˆ‘ä»¬åœ¨æµè§ˆå™¨è¾“å…¥ <strong>ç½‘å€</strong>ï¼ˆURLï¼‰ï¼›</li><li>æµè§ˆå™¨æ ¹æ®ç½‘å€ï¼Œè°ƒç”¨æˆ‘ä»¬è®¾å¤‡çš„ç½‘ç»œèƒ½åŠ›ï¼Œæ‰¾åˆ°åŸŸåå¯¹åº”çš„æœåŠ¡å™¨ï¼Œå‘æœåŠ¡å™¨ <strong>è¯·æ±‚</strong>ï¼ˆrequestï¼‰è·å–æŸæŸèµ„æºï¼›</li><li>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åä¼šä½œå‡º <strong>å“åº”</strong>ï¼ˆresponseï¼‰ï¼Œåœ¨å†…éƒ¨ç¿»ç®±å€’æŸœæ‰¾å‡ºç›¸åº”èµ„æºï¼ŒæŠŠèµ„æºäº¤ç»™æµè§ˆå™¨ï¼›</li><li>æµè§ˆå™¨åŠ è½½èµ„æºï¼ŒæŠŠå†…å®¹å‘ˆç°åˆ°æˆ‘ä»¬é¢å‰ã€‚</li><li><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20231219000056624.png" alt="image-20231219000056624"></li></ul><blockquote><p>è¿™ä¹Ÿæ˜¯â€œæµè§ˆå™¨â€åç§°çš„ç”±æ¥ï¼Œå³åœ¨è‡ªå·±çš„è”ç½‘è®¾å¤‡ä¸Š <strong>æµè§ˆ</strong> ä»–äººè®¾å¤‡ä¸Šçš„èµ„æºã€‚åœ¨äº’è”ç½‘é¢†åŸŸï¼Œæˆ‘ä»¬è‡ªå·±çš„è®¾å¤‡å«åš <strong>å®¢æˆ·ç«¯</strong>ï¼›ä»–äººè®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯æä¾›å†…å®¹çš„è®¾å¤‡ï¼Œå«åš <strong>æœåŠ¡å™¨</strong>ã€<strong>æœåŠ¡ç«¯</strong>ã€‚æµè§ˆå™¨æ¯å‘é€ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨å°±ä¼šåšå‡ºä¸€æ¬¡å“åº”ã€‚å¦‚æ­¤ä¸€æ¥ä¸€å›ï¼Œæˆ‘ä»¬å°±åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°äº†ç½‘é¡µçš„å†…å®¹ã€‚</p></blockquote><h1 id="HTTP-S"><a href="#HTTP-S" class="headerlink" title="HTTP(S)"></a>HTTP(S)</h1><p>â€œHypertext Transfer Protocolâ€çš„ç¼©å†™</p><h2 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129011459215.png" alt="image-20241129011459215"></p><h3 id="HTTPæ–¹æ³•"><a href="#HTTPæ–¹æ³•" class="headerlink" title="HTTPæ–¹æ³•"></a>HTTPæ–¹æ³•</h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129011714921.png" alt="image-20241129011714921"></p><p>æˆ‘ä»¬ä¸€èˆ¬ç”¨åˆ°GETå’ŒPOSTæ–¹æ³•, æ›´å¤šçš„å¯ä»¥è®¿é—®<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods</a></p><h3 id="æ¶ˆæ¯å¤´å’ŒBody"><a href="#æ¶ˆæ¯å¤´å’ŒBody" class="headerlink" title="æ¶ˆæ¯å¤´å’ŒBody"></a>æ¶ˆæ¯å¤´å’ŒBody</h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012031557.png" alt="image-20241129012031557"></p><h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p>åŒæ ·æºå¸¦äº†<code>Headers</code>å’Œ<code>Body</code>ä½†æ˜¯å¤šäº†ä¸ªçŠ¶æ€ç </p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012049903.png" alt="image-20241129012049903"></p><h3 id="çŠ¶æ€ç "><a href="#çŠ¶æ€ç " class="headerlink" title="çŠ¶æ€ç "></a>çŠ¶æ€ç </h3><p>åæ˜ æœ¬æ¬¡å“åº”çš„çŠ¶æ€ï¼Œåˆ†ä¸ºäº”ç±»:</p><ul><li>ä»£ç  <code>100</code>ï½<code>199</code>ï¼š<strong>ä¿¡æ¯å“åº”</strong>ï¼Œè¿™æ˜¯æœåŠ¡å™¨åœ¨è¡¨æ˜ï¼Œâ€œæˆ‘æ”¶åˆ°ä½ çš„è¯·æ±‚äº†ï¼Œä¸è¿‡å¤„ç†èµ·æ¥æœ‰ç‚¹éº»çƒ¦ï¼Œä½ æ¥ç€å‘å…¶å®ƒè¯·æ±‚å§ï¼Œæˆ‘å¹²å®Œæ´»äº†å‘Šè¯‰ä½ ä¸€å£°â€ï¼›</li><li>ä»£ç  <code>200</code>ï½<code>299</code>ï¼š<strong>æˆåŠŸ</strong>ï¼Œè¡¨ç¤ºæœåŠ¡å™¨æˆåŠŸæ¥æ”¶ã€ç†è§£ã€å¤„ç†äº†è¯·æ±‚ï¼›</li><li>ä»£ç  <code>300</code>ï½<code>399</code>ï¼š<strong>é‡å®šå‘</strong>ï¼Œä¸€èˆ¬ç”¨äº URL é‡å®šå‘ï¼Œä½ å¯ä»¥ç†è§£ä¸ºèµ„æºå·²ç»æ¬å®¶äº†ï¼ŒæœåŠ¡å™¨å¸®ä½ æŠŠè¯·æ±‚ URL æ”¹æˆäº†èµ„æºæ‰€åœ¨çš„æ–°åœ°å€ï¼›</li><li>ä»£ç  <code>400</code>ï½<code>499</code>ï¼š<strong>å®¢æˆ·ç«¯é”™è¯¯</strong>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯·æ±‚è·å–èµ„æºçš„æ–¹å¼ä¸å¯¹ï¼Œæ¯”å¦‚ URL è¾“å…¥é”™è¯¯ï¼Œæˆ–è€…æ²¡æœ‰ç™»å½•ç­‰ç­‰ï¼›</li><li>ä»£ç  <code>500</code>ï½<code>599</code>ï¼š<strong>æœåŠ¡å™¨é”™è¯¯</strong>ï¼Œè¡¨æ˜æœåŠ¡å™¨ç”±äºæŸäº›åŸå› ï¼Œç°åœ¨æ— æ³•ä½œå‡ºå“åº”ã€‚</li></ul><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20231219152306544.png" alt="image-20231219152306544"></p><h3 id="Headerså’ŒBody"><a href="#Headerså’ŒBody" class="headerlink" title="Headerså’ŒBody"></a>Headerså’ŒBody</h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012151418.png" alt="image-20241129012151418"></p><h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><p>åœ¨å‰ç«¯æŠ€æœ¯ä¸­ï¼Œ<strong>API</strong>ï¼ˆ<strong>åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</strong>ï¼‰æ˜¯ä¸€ç§è®©ä¸åŒè½¯ä»¶ç³»ç»Ÿäº’ç›¸æ²Ÿé€šå’Œäº¤æ¢æ•°æ®çš„â€œæ¡¥æ¢â€ã€‚é€šä¿—åœ°è¯´ï¼ŒAPI å°±åƒæ˜¯ä¸€ä¸ªèœå•ï¼Œå®ƒåˆ—å‡ºäº†ä½ å¯ä»¥å‘å…¶ä»–ç¨‹åºè¯·æ±‚çš„ä¿¡æ¯æˆ–æœåŠ¡ï¼Œç„¶åè¿”å›ä½ éœ€è¦çš„å†…å®¹ã€‚</p><h2 id="API-çš„ç›®çš„"><a href="#API-çš„ç›®çš„" class="headerlink" title="API çš„ç›®çš„"></a>API çš„ç›®çš„</h2><ul><li>ä½ éœ€è¦è®¿é—®æ•°æ®ã€‚</li><li>ä½ ä¸åº”è¯¥ç›´æ¥è®¿é—®æœåŠ¡å™¨ä¸Šçš„æ•°æ®ï¼Œå› ä¸ºé‚£æ—¢ä¸æ–¹ä¾¿ï¼Œä¹Ÿéå¸¸ä¸å®‰å…¨ã€‚<ul><li>å¦‚æœæˆ‘ä»¬æƒ³è®¿é—®è‡ªå·±çš„ç§äººæ•°æ®å‘¢ï¼Ÿ<ul><li>ä¸åº”è¯¥èƒ½å¤Ÿè®¿é—®ä»–äººçš„ç§äººæ•°æ®ï¼šAPI å¯†é’¥ &#x2F; èº«ä»½éªŒè¯ï¼</li></ul></li></ul></li><li>API æä¾›äº†ç»“æ„åŒ–çš„åœ°æ–¹ï¼ˆç«¯ç‚¹ï¼‰ä¾›ä½ å‘é€è¯·æ±‚ã€‚</li></ul><h2 id="ç«¯ç‚¹-EndPoints"><a href="#ç«¯ç‚¹-EndPoints" class="headerlink" title="ç«¯ç‚¹(EndPoints)"></a><strong>ç«¯ç‚¹(EndPoints)</strong></h2><ul><li>é€šè¿‡è®¿é—®ä¸€ä¸ª URLï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å‘ä¸€ä¸ªç«¯ç‚¹å‘èµ·è¯·æ±‚ã€‚</li><li><code>GET catbook-5bwk.onrender.com/api/stories</code>ï¼šè¿™æ˜¯ä¸€ä¸ª GET è¯·æ±‚ï¼Œç”¨äºè·å–æ‰€æœ‰æ•…äº‹ã€‚</li><li><code>POST catbook-5bwk.onrender.com/api/story</code>ï¼šè¿™æ˜¯ä¸€ä¸ª POST è¯·æ±‚ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°æ•…äº‹ã€‚</li><li>ä¸€ä¸ª URL ä¸‹å¯ä»¥æœ‰å¤šä¸ªç«¯ç‚¹ï¼Œè¿™äº›ç«¯ç‚¹é€šè¿‡è¯·æ±‚ç±»å‹æ¥åŒºåˆ†ã€‚</li><li><code>catbook-5bwk.onrender.com/api/comment</code>ï¼šæ ¹æ®æ˜¯ GET è¿˜æ˜¯ POST è¯·æ±‚ï¼Œè¿™ä¸ªç«¯ç‚¹å¯ä»¥ç”¨æ¥è·å–æˆ–æ·»åŠ è¯„è®ºã€‚</li></ul><h2 id="æƒ³è±¡ä¸€ä¸‹ï¼š"><a href="#æƒ³è±¡ä¸€ä¸‹ï¼š" class="headerlink" title="æƒ³è±¡ä¸€ä¸‹ï¼š"></a>æƒ³è±¡ä¸€ä¸‹ï¼š</h2><p>å‡è®¾ä½ å»é¤å…åƒé¥­ï¼š</p><ul><li>èœå•å°±åƒ APIï¼Œå®ƒå‘Šè¯‰ä½ ä½ å¯ä»¥é€‰æ‹©çš„èœå“ï¼ˆæœåŠ¡ï¼‰ã€‚</li><li>æœåŠ¡å‘˜å°±åƒ API çš„â€œä¸­ä»‹â€ï¼Œä½ å‘Šè¯‰ä»–ä½ è¦ç‚¹ä»€ä¹ˆï¼ˆè¯·æ±‚ï¼‰ï¼Œç„¶åä»–å»å¨æˆ¿ï¼ˆæœåŠ¡å™¨ï¼‰å–å‡ºä½ éœ€è¦çš„èœå“ï¼ˆæ•°æ®ï¼‰ã€‚</li><li>å¨æˆ¿åšå‡ºèœå“åï¼ŒæœåŠ¡å‘˜æŠŠå®ƒé€åˆ°ä½ æ¡Œå­ä¸Šï¼ˆè¿”å›å“åº”æ•°æ®ï¼‰ã€‚</li></ul><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012507744.png" alt="image-20241129012507744"></p><h2 id="åœ¨å‰ç«¯å¼€å‘ä¸­ï¼š"><a href="#åœ¨å‰ç«¯å¼€å‘ä¸­ï¼š" class="headerlink" title="åœ¨å‰ç«¯å¼€å‘ä¸­ï¼š"></a>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼š</h2><ul><li><strong>API å°±æ˜¯ä¸€ä¸ªæ¥å£</strong>ï¼Œå®ƒå…è®¸å‰ç«¯åº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚ä½ çš„ç½‘ç«™ï¼‰ä»åç«¯æœåŠ¡å™¨è·å–æ•°æ®ï¼Œæˆ–è€…å°†æ•°æ®å‘é€åˆ°åç«¯ã€‚</li><li>ä½ å¯èƒ½é€šè¿‡ API è·å–ç”¨æˆ·æ•°æ®ã€æäº¤è¡¨å•ä¿¡æ¯ï¼Œæˆ–è€…åšå…¶ä»–ä»»ä½•éœ€è¦ä¸æœåŠ¡å™¨äº¤äº’çš„æ“ä½œã€‚</li></ul><h2 id="ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ä¸¾ä¸ªä¾‹å­ï¼š"></a>ä¸¾ä¸ªä¾‹å­ï¼š</h2><ol><li><p><strong>GET è¯·æ±‚</strong>ï¼š æ¯”å¦‚ï¼Œä½ æƒ³ä»ä¸€ä¸ªç½‘ç«™è·å–ç”¨æˆ·åˆ—è¡¨ã€‚ä½ å‘è¿™ä¸ªç½‘ç«™çš„ API å‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼ˆå°±åƒæ˜¯å‘é¤å…ç‚¹èœï¼‰ï¼ŒAPI è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨ï¼ˆæœåŠ¡å™¨å“åº”æ•°æ®ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/api/users&#x27;</span>) <span class="comment">// GET è¯·æ±‚</span></span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>()) <span class="comment">// è§£æè¿”å›çš„æ•°æ®</span></span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data)); <span class="comment">// æ˜¾ç¤ºè·å–çš„ç”¨æˆ·æ•°æ®</span></span><br></pre></td></tr></table></figure></li><li><p><strong>POST è¯·æ±‚</strong>ï¼š å‡è®¾ä½ å¡«å†™äº†ä¸€ä¸ªè¡¨å•å¹¶ç‚¹å‡»æäº¤ï¼Œå‰ç«¯é€šè¿‡ API å°†ä½ çš„æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼ˆå°±åƒä½ æŠŠç‚¹èœå•äº¤ç»™æœåŠ¡å‘˜ï¼‰ã€‚æœåŠ¡å™¨æ¥æ”¶åˆ°æ•°æ®åå¯èƒ½ä¼šä¿å­˜ä¿¡æ¯æˆ–è€…æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œç„¶åè¿”å›ç»“æœã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;https://example.com/api/users&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">  <span class="attr">headers</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">body</span>: <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;John Doe&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;),</span><br><span class="line">&#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>()) <span class="comment">// è§£æè¿”å›çš„æ•°æ®</span></span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(data)); <span class="comment">// æ˜¾ç¤ºæ“ä½œç»“æœ</span></span><br></pre></td></tr></table></figure></li></ol><p>åœ¨è¿™é—¨è¯¾ä¸­æˆ‘ä»¬æ˜¯ç›´æ¥ç”¨çš„<code>get</code>å’Œ<code>post</code></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012805383.png" alt="image-20241129012805383"></p><p>è¿™äº›æ–¹æ³•è¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ª<code>Promise</code></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129012830617.png" alt="image-20241129012830617"></p><p><strong>Promise</strong> æ˜¯ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸€ä¸ªæ¦‚å¿µï¼Œå®ƒä»£è¡¨ç€æŸä¸ªå¯èƒ½è¿˜æ²¡æœ‰å®Œæˆï¼Œä½†æœ€ç»ˆä¼šå®Œæˆçš„æ“ä½œçš„ç»“æœã€‚é€šä¿—æ¥è¯´ï¼ŒPromise å°±åƒæ˜¯ä¸€ä¸ªæ‰¿è¯ºï¼Œæ‰¿è¯ºä½ å°†æ¥ä¼šå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œå¯èƒ½æ˜¯æˆåŠŸçš„ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯å¤±è´¥çš„ç»“æœã€‚</p><p>æ¯•ç«Ÿæˆ‘ä»¬çš„è¯·æ±‚éœ€è¦æ—¶é—´</p><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p><code>Promise</code>å…è®¸å¼‚æ­¥å¤„ç†</p><h3 id="Promise-çš„ä¸‰ç§çŠ¶æ€ï¼š"><a href="#Promise-çš„ä¸‰ç§çŠ¶æ€ï¼š" class="headerlink" title="Promise çš„ä¸‰ç§çŠ¶æ€ï¼š"></a>Promise çš„ä¸‰ç§çŠ¶æ€ï¼š</h3><ol><li><strong>Pendingï¼ˆå¾…å®šï¼‰</strong>ï¼šåˆå§‹çŠ¶æ€ï¼ŒPromise è¿˜æ²¡æœ‰å®Œæˆï¼Œç»“æœè¿˜ä¸å¯ç”¨ã€‚</li><li><strong>Fulfilledï¼ˆå·²å®Œæˆï¼‰</strong>ï¼šæ“ä½œæˆåŠŸå®Œæˆï¼ŒPromise å·²ç»è§£å†³ï¼Œè¿”å›äº†ç»“æœã€‚</li><li><strong>Rejectedï¼ˆå·²æ‹’ç»ï¼‰</strong>ï¼šæ“ä½œå¤±è´¥ï¼ŒPromise è¢«æ‹’ç»ï¼Œè¿”å›äº†é”™è¯¯æˆ–å¤±è´¥çš„åŸå› ã€‚</li></ol><h3 id="then"><a href="#then" class="headerlink" title=".then()"></a><code>.then()</code></h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129013003072.png" alt="image-20241129013003072"></p><p><code>then()</code> ç”¨äºå¤„ç†æˆåŠŸçš„ç»“æœï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ Promise æ‰§è¡ŒæˆåŠŸåçš„è¿”å›å€¼ã€‚</p><h3 id="catch"><a href="#catch" class="headerlink" title=".catch()"></a><code>.catch()</code></h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129013009461.png" alt="image-20241129013009461"></p><p><code>catch()</code> ç”¨äºå¤„ç†å¤±è´¥çš„ç»“æœï¼Œæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯é”™è¯¯ä¿¡æ¯ã€‚</p><h3 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h3><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129013217609.png" alt="image-20241129013217609"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-7-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-APIs-and-Promises/image-20241129013207470.png" alt="image-20241129013207470"></p><h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><ul><li><strong>API æ˜¯å‰ç«¯å’Œåç«¯ä¹‹é—´çš„â€œæ²Ÿé€šæ¡¥æ¢â€</strong>ï¼Œå®ƒå®šä¹‰äº†å‰ç«¯å¯ä»¥å¦‚ä½•è¯·æ±‚åç«¯çš„æ•°æ®ï¼Œæˆ–è€…å°†æ•°æ®å‘é€ç»™åç«¯ã€‚</li><li>API å¯ä»¥è®©ä½ çš„å‰ç«¯åº”ç”¨åŠ¨æ€è·å–æ•°æ®ã€æ›´æ–°æ•°æ®ï¼Œæˆ–è€…æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œè€Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (å…­)-React_Lifecycle_and_Hooks</title>
      <link href="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/"/>
      <url>/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ—¶å€™åº”è¯¥å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™åº”è¯¥å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™åº”è¯¥å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼Ÿ"></a><strong>ä»€ä¹ˆæ—¶å€™åº”è¯¥å°†ä¸€ä¸ªç»„ä»¶æ‹†åˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼Ÿ</strong></h1><ol><li><strong>ç»„ä»¶ä»£ç å˜å¾—å¤ªé•¿æˆ–éš¾ä»¥é˜…è¯»</strong><br> <strong>å…ˆä¾‹</strong>ï¼šå»ºé€ æˆ¿å±‹<br> å°±åƒä½ ä¸ä¼šæŠŠæ•´æ ‹æˆ¿å­çš„è®¾è®¡å›¾éƒ½æ”¾åœ¨ä¸€å¼ å›¾çº¸ä¸Šï¼Œè€Œæ˜¯ä¼šä¸ºæµ´å®¤ã€ä¸»å§ã€å¨æˆ¿ç­‰éƒ¨åˆ†åˆ†åˆ«åšå…·ä½“çš„è®¾è®¡å›¾ã€‚<br> <strong>React ç¤ºä¾‹</strong>ï¼šå³ä½¿ <code>&lt;Navbar /&gt;</code> ç»„ä»¶åœ¨ <code>App.js</code> ä¸­ä¸éœ€è¦è¢«é‡ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå•ç‹¬æå–å‡ºæ¥ï¼Œè¿™æ ·ä»£ç æ›´æ¸…æ™°ã€‚</li><li><strong>ç»„ä»¶åŒ…å«æœ‰è‡ªå·±åŠŸèƒ½çš„éƒ¨åˆ†æˆ–åŒºå—ï¼ˆé€šå¸¸æ˜¯å¯é‡ç”¨çš„ï¼‰</strong><br> <strong>å…ˆä¾‹</strong>ï¼šè´­ç‰©ä¸­å¿ƒ<br> åœ¨ä¸€ä¸ªè´­ç‰©ä¸­å¿ƒä¸­ï¼Œæ¯ä¸ªå•†åº—éƒ½æœ‰è‡ªå·±çš„å‘˜å·¥ã€å•†å“ç­‰ï¼Œå› æ­¤å°†æ¯ä¸ªâ€œå•†åº—â€å°è£…æˆä¸€ä¸ªç‹¬ç«‹çš„éƒ¨åˆ†æ˜¯åˆç†çš„ã€‚<br> <strong>React ç¤ºä¾‹</strong>ï¼šè¯„è®ºéƒ¨åˆ†åº”è¯¥è¢«æ¸²æŸ“æˆä¸€ä¸ªå¯é‡ç”¨çš„ <code>&lt;Comment /&gt;</code> ç»„ä»¶ã€‚</li><li><strong>ç»„ä»¶æ‰¿æ‹…äº†å¤ªå¤šè´£ä»»</strong><br> <strong>å…ˆä¾‹</strong>ï¼šç»„ç»‡ä¸­çš„é¢†å¯¼è§’è‰²<br> åœ¨ä¸€ä¸ªç»„ç»‡ä¸­ï¼Œè§’è‰²å’Œä»»åŠ¡åº”è¯¥åˆ†é…ç»™å…·ä½“çš„äººï¼Œè€Œä¸æ˜¯ä¸€ä¸ªäººæ‰¿æ‹…æ‰€æœ‰çš„èŒè´£ï¼ˆä¾‹å¦‚ï¼šå­¦æœ¯å§”å‘˜ä¼šä¸»å¸­ã€è´¢åŠ¡ä¸»ç®¡ã€è¿è¥ä¸»ç®¡ç­‰ï¼‰ã€‚<br> <strong>React ç¤ºä¾‹</strong>ï¼šä¸€ä¸ªè¡¨å•çš„æäº¤æŒ‰é’®å¯èƒ½éœ€è¦å¤„ç†å¾ˆå¤šé€»è¾‘ï¼Œå› æ­¤å¯ä»¥å°†å…¶æå–æˆä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶æ¥å°è£…è¿™äº›é€»è¾‘ã€‚</li></ol><h1 id="çŠ¶æ€æå‡"><a href="#çŠ¶æ€æå‡" class="headerlink" title="çŠ¶æ€æå‡"></a>çŠ¶æ€æå‡</h1><p>å½“ä¸¤ä¸ªå­ç»„ä»¶éƒ½éœ€è¦æŸä¸ªçŠ¶æ€å±æ€§æ—¶ï¼Œå°†è¯¥çŠ¶æ€ç§»æ¤åˆ°çˆ¶ç»„ä»¶ï¼Œé€šè¿‡<code>props</code>æ¥ä¼ é€’</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013737664.png" alt="image-20241129013737664"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013741861.png" alt="image-20241129013741861"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013748967.png" alt="image-20241129013748967"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013816520.png" alt="image-20241129013816520"></p><h1 id="Reactç”Ÿå‘½å‘¨æœŸ"><a href="#Reactç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Reactç”Ÿå‘½å‘¨æœŸ"></a>Reactç”Ÿå‘½å‘¨æœŸ</h1><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013842462.png" alt="image-20241129013842462"></p><blockquote><p><strong>è§¦å‘</strong>: <code>&lt;Steak /&gt;</code> ç»„ä»¶é¦–æ¬¡è¢«è°ƒç”¨ã€‚è¿™è¢«ç§°ä¸º <strong>æŒ‚è½½ï¼ˆMountingï¼‰</strong>ã€‚</p><p><strong>æ¸²æŸ“</strong>: å­ç»„ä»¶è¢«è°ƒç”¨ï¼Œæ‰€éœ€çš„è®¡ç®—å®Œæˆã€‚</p><p><strong>æäº¤</strong>: HTML DOM è¢«æ›´æ–°ï¼Œæ˜¾ç¤ºå‡ºâ€œsteakâ€ç»™ç”¨æˆ·ã€‚</p></blockquote><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129013904279.png" alt="image-20241129013904279"></p><ol><li><strong>React ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸‰ä¸ªä¸»è¦é˜¶æ®µ</strong>ï¼š<ul><li><strong>Triggerï¼ˆè§¦å‘é˜¶æ®µï¼‰</strong>: å½“ç»„ä»¶é¦–æ¬¡è¢«è°ƒç”¨ï¼Œæˆ–å½“ç»„ä»¶çš„çŠ¶æ€ï¼ˆstateï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ã€‚ç±»ä¼¼äºé¤å…ä¸­ï¼Œé¡¾å®¢ä¸‹å•æ—¶è§¦å‘äº†è®¢å•ã€‚</li><li><strong>Renderï¼ˆæ¸²æŸ“é˜¶æ®µï¼‰</strong>: React è¿è¡Œç»„ä»¶ä¸­çš„ JavaScript ä»£ç å¹¶è°ƒç”¨ä»»ä½•å­ç»„ä»¶ï¼Œè¿›è¡Œå¿…è¦çš„è®¡ç®—ã€‚è¿™é˜¶æ®µå°±åƒé¤å…ä¸­çš„å¨å¸ˆå¼€å§‹å‡†å¤‡é£Ÿç‰©ã€‚</li><li><strong>Commitï¼ˆæäº¤é˜¶æ®µï¼‰</strong>: React å°†è¿”å›çš„ JSX æ›´æ–°åˆ° HTML DOM ä¸­ï¼Œæœ€ç»ˆå°†æ¸²æŸ“ç»“æœå‘ˆç°ç»™ç”¨æˆ·ã€‚å°±åƒé¤å…çš„æœåŠ¡å‘˜æŠŠå‡†å¤‡å¥½çš„é£Ÿç‰©ç«¯åˆ°æ¡Œå­ä¸Šã€‚</li></ul></li><li><strong>ç»„ä»¶æŒ‚è½½ï¼ˆMountingï¼‰</strong>ï¼š<ul><li>åœ¨é¦–æ¬¡è§¦å‘ç»„ä»¶æ—¶ï¼ˆä¾‹å¦‚ç‚¹å‡»â€œè®¢å•â€æŒ‰é’®ï¼‰ï¼ŒReact ä¼šå¼€å§‹æŒ‚è½½è¿‡ç¨‹ï¼Œè¿›å…¥è§¦å‘é˜¶æ®µï¼Œç„¶åè¿›å…¥æ¸²æŸ“é˜¶æ®µï¼Œæœ€ç»ˆåœ¨æäº¤é˜¶æ®µæ›´æ–° DOMï¼Œå°†ç»“æœå‘ˆç°ç»™ç”¨æˆ·ã€‚</li></ul></li><li><strong>æ›´æ–°çŠ¶æ€ä¸é‡æ–°æ¸²æŸ“</strong>ï¼š<ul><li>ç»„ä»¶çŠ¶æ€æ›´æ–°æ—¶ï¼ˆä¾‹å¦‚ç‚¹å‡»â€œé€å›å¨æˆ¿â€æŒ‰é’®æ›´æ”¹â€œç†Ÿåº¦â€ï¼‰ï¼Œä¼šè§¦å‘ React ç”Ÿå‘½å‘¨æœŸçš„å†æ¬¡è¿è¡Œï¼š<ul><li>æ›´æ–°çŠ¶æ€ï¼ˆä¾‹å¦‚ä¿®æ”¹ç†Ÿåº¦å€¼ï¼‰ï¼Œå¹¶è¿›å…¥æ–°çš„æ¸²æŸ“é˜¶æ®µã€‚</li><li>ç»„ä»¶çš„æ¸²æŸ“å’Œæäº¤è¿‡ç¨‹ä¼šé‡å¤ï¼Œæ›´æ–°åçš„ UI ä¼šè¢«å‘ˆç°ç»™ç”¨æˆ·ã€‚</li></ul></li></ul></li><li><strong>ç»„ä»¶å¸è½½ï¼ˆUnmountingï¼‰</strong>ï¼š<ul><li>å½“åˆ é™¤ç»„ä»¶æ—¶ï¼ˆä¾‹å¦‚åˆ é™¤â€œç‰›æ’â€ï¼‰ï¼ŒReact ä¼šæ‰§è¡Œç»„ä»¶å¸è½½ï¼ˆDismountï¼‰ï¼Œå³ä» HTML DOM ä¸­ç§»é™¤ç»„ä»¶ã€‚</li></ul></li><li><strong>React ä¸­çš„çŠ¶æ€ï¼ˆStateï¼‰</strong>ï¼š<ul><li>åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ<strong>çŠ¶æ€</strong>ï¼ˆå¦‚ <code>dness</code>ï¼‰æ˜¯å”¯ä¸€èƒ½åœ¨é‡æ–°æ¸²æŸ“æ—¶ä¿æŒçš„å˜é‡ã€‚</li><li>æ¯æ¬¡æ¸²æŸ“é˜¶æ®µéƒ½æ‰§è¡Œä»£ç ï¼Œä½†åªæœ‰çŠ¶æ€ï¼ˆstateï¼‰ä¼šåœ¨ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ä¸­è¢«ä¿ç•™ã€‚éçŠ¶æ€å˜é‡åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šä¸¢å¤±ã€‚</li></ul></li><li><strong>ç”Ÿå‘½å‘¨æœŸè¿‡ç¨‹ä¸­çš„è§¦å‘ã€æ¸²æŸ“ä¸æäº¤</strong>ï¼š<ul><li>è§¦å‘æ˜¯æŒ‡å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æˆ–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å¯åŠ¨ã€‚</li><li>æ¸²æŸ“é˜¶æ®µæ˜¯ React æ ¹æ®ç»„ä»¶é€»è¾‘æ¸²æŸ“å†…å®¹ï¼Œè°ƒç”¨å­ç»„ä»¶ã€‚</li><li>æäº¤é˜¶æ®µæ˜¯ React å°†æ¸²æŸ“ç»“æœæœ€ç»ˆæäº¤åˆ° HTML ä¸­ï¼Œæ›´æ–° DOMã€‚</li></ul></li><li><strong>React ç”Ÿå‘½å‘¨æœŸæ€»ç»“</strong>ï¼š<ul><li>ç»„ä»¶é¦–å…ˆè¿›å…¥<strong>æŒ‚è½½ï¼ˆmountingï¼‰</strong>é˜¶æ®µã€‚</li><li>éšç€ç”¨æˆ·æ“ä½œï¼Œç»„ä»¶è¿›å…¥<strong>æ›´æ–°ï¼ˆupdatingï¼‰</strong>é˜¶æ®µï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶å¹¶æ›´æ–° DOMã€‚</li><li>æœ€åï¼Œç»„ä»¶ä¼šè¿›å…¥<strong>å¸è½½ï¼ˆunmountingï¼‰</strong>é˜¶æ®µï¼Œä» DOM ä¸­åˆ é™¤ã€‚</li></ul></li></ol><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014450413.png" alt="image-20241129014450413"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014455984.png" alt="image-20241129014455984"></p><h1 id="Hook"><a href="#Hook" class="headerlink" title="Hook"></a>Hook</h1><p><code>Hook</code>æ˜¯Reactæä¾›çš„è®¿é—®ç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸­éƒ¨åˆ†ç»„ä»¶çš„ç‰¹æ®Šå‡½æ•°ã€‚ä¾‹å¦‚ï¼š<code>useState</code>å…è®¸æˆ‘ä»¬æ§åˆ¶ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</p><h2 id="useEffect-Hook"><a href="#useEffect-Hook" class="headerlink" title="useEffect Hook"></a><code>useEffect</code> Hook</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014546319.png" alt="image-20241129014546319"></p><p>åœ¨è°ƒç”¨ <code>setPersons</code> æ›´æ–°çŠ¶æ€åï¼Œ<code>console.log(persons)</code> æ‰“å°çš„ <code>persons</code> å¯èƒ½ä¸ä¼šç«‹å³æ˜¾ç¤ºæ›´æ–°åçš„å€¼ã€‚åŸå› åœ¨äº React çš„çŠ¶æ€æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Œ<code>setPersons</code> ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œä½†è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šç«‹å³ç”Ÿæ•ˆï¼Œè€Œæ˜¯ä¼šåœ¨ä¸‹ä¸€ä¸ªæ¸²æŸ“å‘¨æœŸä¸­æ‰§è¡Œã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦<code>useEffect</code>:</p><ul><li><p><strong>ä½œç”¨</strong>: åœ¨ç‰¹å®šå˜é‡å‘ç”Ÿå˜åŒ–åè¿è¡Œã€‚</p><ul><li>å¯ä»¥ç†è§£ä¸ºå¯¹çŠ¶æ€å˜åŒ–çš„å“åº”ã€‚</li></ul></li><li><p><strong>å¸¸ç”¨åœºæ™¯</strong>:</p><ul><li>ç”¨äºä¸ React å¤–éƒ¨çš„ä¸œè¥¿åŒæ­¥ã€‚</li><li>å¸¸ç”¨äºå°†å¤–éƒ¨æ•°æ®åŠ è½½åˆ°ç»„ä»¶çš„çŠ¶æ€ä¸­ã€‚</li><li>åœ¨ç‰¹å®šæ—¶æœºè°ƒç”¨ APIã€æ‰§è¡Œè®¡ç®—ç­‰ã€‚</li></ul></li><li><p><strong>è¯­æ³•</strong>:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">useEffect</span>(<span class="keyword">function</span>, optional dependency array)</span><br></pre></td></tr></table></figure><ul><li>æ¯å½“ä¾èµ–æ•°ç»„ä¸­çš„æŸä¸ªå˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<code>useEffect</code> ä¸­çš„ <code>function</code> å°±ä¼šè¢«æ‰§è¡Œã€‚</li></ul></li></ul><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014858650.png" alt="image-20241129014858650"></p><p>æ”¹å†™ä¹‹å‰å‡ºé—®é¢˜çš„ä»£ç ï¼š</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014919322.png" alt="image-20241129014919322"></p><h2 id="hook-cleanup"><a href="#hook-cleanup" class="headerlink" title="hook cleanup"></a>hook cleanup</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129014957915.png" alt="image-20241129014957915"></p><h1 id="Reactçš„å¸¸è§æ¨¡å¼"><a href="#Reactçš„å¸¸è§æ¨¡å¼" class="headerlink" title="Reactçš„å¸¸è§æ¨¡å¼"></a>Reactçš„å¸¸è§æ¨¡å¼</h1><h2 id="æ•°æ®çš„è·å–å’Œå‘é€"><a href="#æ•°æ®çš„è·å–å’Œå‘é€" class="headerlink" title="æ•°æ®çš„è·å–å’Œå‘é€"></a>æ•°æ®çš„è·å–å’Œå‘é€</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015219587.png" alt="image-20241129015219587"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015227816.png" alt="image-20241129015227816"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015235700.png" alt="image-20241129015235700"></p><h2 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015100402.png" alt="image-20241129015100402"></p><p>ç®€å†™ï¼š</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015113868.png" alt="image-20241129015113868"></p><p>æˆ–</p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015123123.png" alt="image-20241129015123123"></p><h2 id="æ¸²æŸ“æ•°ç»„çš„æ•°æ®"><a href="#æ¸²æŸ“æ•°ç»„çš„æ•°æ®" class="headerlink" title="æ¸²æŸ“æ•°ç»„çš„æ•°æ®"></a>æ¸²æŸ“æ•°ç»„çš„æ•°æ®</h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015336676.png" alt="image-20241129015336676"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015400526.png" alt="image-20241129015400526"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015354922.png" alt="image-20241129015354922"></p><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015410463.png" alt="image-20241129015410463"></p><blockquote><p>ä¸¤ç§å†™æ³•ï¼š</p><ul><li>æœ‰èŠ±æ‹¬å·å°±è¦æœ‰<code>return</code>å’Œ<code>;</code></li><li>æ— èŠ±æ‹¬å·å°±ä¸ç”¨<code>;</code></li></ul></blockquote><h1 id="ç»„åˆä¾‹å­"><a href="#ç»„åˆä¾‹å­" class="headerlink" title="ç»„åˆä¾‹å­"></a>ç»„åˆä¾‹å­</h1><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015525900.png" alt="image-20241129015525900"></p><h1 id="æ›´å¤šæ–¹æ³•"><a href="#æ›´å¤šæ–¹æ³•" class="headerlink" title="æ›´å¤šæ–¹æ³•"></a>æ›´å¤šæ–¹æ³•</h1><h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a><code>Math</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015631619.png" alt="image-20241129015631619"></p><h2 id="Dates"><a href="#Dates" class="headerlink" title="Dates"></a><code>Dates</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015637841.png" alt="image-20241129015637841"></p><h2 id="Sets"><a href="#Sets" class="headerlink" title="Sets"></a><code>Sets</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015644565.png" alt="image-20241129015644565"></p><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a><code>JSON</code></h2><p><img src="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-6-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-React-Lifecycle-and-Hooks/image-20241129015650801.png" alt="image-20241129015650801"></p><h2 id="æ›´å¤šHooks"><a href="#æ›´å¤šHooks" class="headerlink" title="æ›´å¤šHooks"></a>æ›´å¤š<code>Hooks</code></h2><p>Hooks reference: <a href="https://react.dev/reference/react/hooks">Built-in React Hooks â€“ React</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (äº”)-reactåˆå®æˆ˜</title>
      <link href="/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-5-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%88%9D%E5%AE%9E%E6%88%98/"/>
      <url>/2024/11/29/%E5%89%8D%E7%AB%AF-MIT-Web-5-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-react%E5%88%9D%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<p>å…ˆæ¬ ç€</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (å››)-åˆè¯†react</title>
      <link href="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/"/>
      <url>/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h1><h2 id="ç¼–å†™ç»„ä»¶"><a href="#ç¼–å†™ç»„ä»¶" class="headerlink" title="ç¼–å†™ç»„ä»¶"></a>ç¼–å†™ç»„ä»¶</h2><ul><li>æˆ‘ä»¬å°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶æ”¾åœ¨ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ä¸­ã€‚</li><li>æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ <code>props</code> ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å› JSXï¼ˆç±»ä¼¼ HTML çš„ä»£ç ï¼‰ã€‚</li><li><code>()</code> å…è®¸æˆ‘ä»¬è¿›å…¥ä¸€ä¸ª JSX ç¯å¢ƒã€‚</li><li>åœ¨ JSX ç¯å¢ƒä¸­ï¼Œ<code>&#123;&#125;</code> å…è®¸æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªè¿·ä½  JS ç¯å¢ƒã€‚</li></ul><h2 id="ä¼ é€’å’Œä½¿ç”¨-Props"><a href="#ä¼ é€’å’Œä½¿ç”¨-Props" class="headerlink" title="ä¼ é€’å’Œä½¿ç”¨ Props"></a>ä¼ é€’å’Œä½¿ç”¨ Props</h2><ul><li>æˆ‘ä»¬é€šè¿‡ <code>&lt;Post text=&quot;I love weblab&quot; /&gt;</code> å°† <code>props</code> ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li><li>åœ¨å­ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>props.text</code> æ¥è¯»å–ä¼ å…¥çš„ <code>props</code>ã€‚</li></ul><h2 id="å£°æ˜-State-çŠ¶æ€"><a href="#å£°æ˜-State-çŠ¶æ€" class="headerlink" title="å£°æ˜ State çŠ¶æ€"></a>å£°æ˜ State çŠ¶æ€</h2><ul><li>ä½¿ç”¨ <code>const [something, setSomething] = useState(initialValue)</code> æ¥å£°æ˜ state å˜é‡ã€‚</li></ul><h2 id="CSS-æ ·å¼"><a href="#CSS-æ ·å¼" class="headerlink" title="CSS æ ·å¼"></a>CSS æ ·å¼</h2><ul><li>React ä¸­ä½¿ç”¨ <code>className</code> æ¥æ›¿ä»£ HTML ä¸­çš„ <code>class</code> å±æ€§ï¼Œä»¥ä¾¿åº”ç”¨ CSS æ ·å¼ã€‚</li></ul><h1 id="ç¼–å†™ç»„ä»¶-1"><a href="#ç¼–å†™ç»„ä»¶-1" class="headerlink" title="ç¼–å†™ç»„ä»¶"></a>ç¼–å†™ç»„ä»¶</h1><h2 id="ç»„ä»¶æ ‘"><a href="#ç»„ä»¶æ ‘" class="headerlink" title="ç»„ä»¶æ ‘"></a>ç»„ä»¶æ ‘</h2><ul><li>é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆæŠŠé¡µé¢æ‹†åˆ†æˆ<strong>ç»„ä»¶æ ‘</strong>:</li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127171418295.png" alt="image-20241127171418295"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127171342613.png" alt="image-20241127171342613"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127171505696.png" alt="image-20241127171505696"></p><ul><li><p>React æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå®ƒå…è®¸ä½ å°†ç½‘ç«™æ‹†åˆ†æˆå¯å¤ç”¨çš„ç»„ä»¶ã€‚</p><ul><li>è¿™æ„å‘³ç€ React æä¾›äº†ä¸€ç§æ–¹å¼è®©ä½ å°†ä¸€ä¸ªå¤§å‹çš„ç½‘é¡µåº”ç”¨åˆ†è§£æˆå°çš„ã€ç‹¬ç«‹çš„éƒ¨åˆ†ï¼ˆç»„ä»¶ï¼‰ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥å•ç‹¬å¼€å‘ã€ç®¡ç†ã€æ›´æ–°ã€‚è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ã€‚</li></ul></li><li><p>æ¯ä¸ªç»„ä»¶æœ‰ç‚¹åƒä½ å®šä¹‰çš„â€œè‡ªå®šä¹‰ HTML æ ‡ç­¾â€ã€‚</p><ul><li>åœ¨ React ä¸­ï¼Œç»„ä»¶å°±åƒè‡ªå®šä¹‰çš„ HTML æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª <code>Header</code> ç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨ React ä¸­åƒä½¿ç”¨æ™®é€š HTML æ ‡ç­¾ä¸€æ ·ä½¿ç”¨å®ƒï¼š<code>&lt;Header /&gt;</code>ã€‚è¿™ç§æ–¹å¼è®©å¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ ‡ç­¾ï¼Œå¹¶ä¸”åœ¨ä»£ç ä¸­é‡å¤ä½¿ç”¨å®ƒã€‚</li></ul></li><li><p>ç»„ä»¶æ˜¯ HTMLã€CSS å’Œ JavaScript çš„æŠ½è±¡ã€‚</p><ul><li>ç»„ä»¶å°† HTMLã€CSS å’Œ JavaScript çš„ä¸åŒéƒ¨åˆ†é›†æˆåœ¨ä¸€èµ·ã€‚React ç»„ä»¶ä¸ä»…åŒ…å« HTML ç»“æ„ï¼ˆé€šè¿‡ JSX å®ç°ï¼‰ï¼Œè¿˜åŒ…å«æ ·å¼å’Œè¡Œä¸ºï¼ˆé€šè¿‡ JavaScriptï¼‰ã€‚ç»„ä»¶æ˜¯å¯¹è¿™äº›å…ƒç´ çš„å°è£…ï¼Œä½¿å¾—å®ƒä»¬æˆä¸ºä¸€ä¸ªæ•´ä½“ã€‚</li></ul></li><li><p>è¿™äº›ç»„ä»¶å¯ä»¥è¢«ç»„ç»‡æˆæ ‘çŠ¶å±‚çº§ç»“æ„ã€‚</p><ul><li>ç»„ä»¶ä¹‹é—´çš„å…³ç³»å¯ä»¥åƒæ ‘ä¸€æ ·ç»„ç»‡ã€‚çˆ¶ç»„ä»¶å¯ä»¥åŒ…å«å­ç»„ä»¶ï¼Œå­ç»„ä»¶åˆå¯ä»¥åŒ…å«å…¶ä»–å­ç»„ä»¶ï¼Œå½¢æˆå±‚çº§ç»“æ„ã€‚è¿™ç§æ ‘çŠ¶ç»“æ„æ˜¯ React çš„æ ¸å¿ƒï¼Œå®ƒå…è®¸ä½ é€šè¿‡åµŒå¥—ç»„ä»¶æ¥æ„å»ºå¤æ‚çš„ UI ç»“æ„ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ¸…æ™°å’Œå¯ç®¡ç†ã€‚</li></ul></li><li><p><strong>å¯å¤ç”¨ã€å°è£…æ€§ã€ç»“æ„åŒ–å’ŒæŠ½è±¡åŒ–</strong></p></li></ul><h1 id="å¼•ä¾‹"><a href="#å¼•ä¾‹" class="headerlink" title="å¼•ä¾‹"></a>å¼•ä¾‹</h1><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127171705565.png" alt="image-20241127171705565"></p><p>å°†æˆ‘ä»¬éœ€è¦çš„è¯„è®ºç»„ä»¶ç¼–å†™æˆä¸€ä¸ª<strong>éª¨æ¶</strong>æˆ–è€…è¯´<strong>æ¨¡ç‰ˆ</strong>ã€‚</p><h2 id="é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•çŸ¥é“æ¯ä¸ªè¯„è®ºæœ‰ä»€ä¹ˆä¿¡æ¯è¦å±•ç¤ºï¼Ÿ"><a href="#é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•çŸ¥é“æ¯ä¸ªè¯„è®ºæœ‰ä»€ä¹ˆä¿¡æ¯è¦å±•ç¤ºï¼Ÿ" class="headerlink" title="é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•çŸ¥é“æ¯ä¸ªè¯„è®ºæœ‰ä»€ä¹ˆä¿¡æ¯è¦å±•ç¤ºï¼Ÿ"></a>é‚£ä¹ˆï¼Œæˆ‘ä»¬è¦å¦‚ä½•çŸ¥é“æ¯ä¸ªè¯„è®ºæœ‰ä»€ä¹ˆä¿¡æ¯è¦å±•ç¤ºï¼Ÿ</h2><h3 id="Props-å±æ€§"><a href="#Props-å±æ€§" class="headerlink" title="Props(å±æ€§)"></a>Props(å±æ€§)</h3><p>é€šè¿‡<code>Props</code>å°†æˆ‘ä»¬æƒ³è¦å±•ç¤ºçš„ä¿¡æ¯ä¼ é€’ç»™å­ç»„ä»¶</p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127171950121.png" alt="image-20241127171950121"></p><ul><li>ä¿¡æ¯(input)ä»<strong>çˆ¶ç»„ä»¶</strong>ä¼ é€’ç»™å­ç»„ä»¶</li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127172032691.png" alt="image-20241127172032691"></p><blockquote><p>åªèƒ½å•å‘ä¼ é€’! <code>props</code> æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¢«å­ç»„ä»¶ç›´æ¥ä¿®æ”¹ã€‚</p></blockquote><h2 id="æˆ‘ä»¬å¦‚ä½•è·Ÿè¸ªæ¯ä¸ªè¯„è®ºçš„æ‰€æœ‰-Props"><a href="#æˆ‘ä»¬å¦‚ä½•è·Ÿè¸ªæ¯ä¸ªè¯„è®ºçš„æ‰€æœ‰-Props" class="headerlink" title="æˆ‘ä»¬å¦‚ä½•è·Ÿè¸ªæ¯ä¸ªè¯„è®ºçš„æ‰€æœ‰ Props?"></a>æˆ‘ä»¬å¦‚ä½•è·Ÿè¸ªæ¯ä¸ªè¯„è®ºçš„æ‰€æœ‰ Props?</h2><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>ç»„ä»¶ç»´æŠ¤çš„ä¿¡æ¯</p><ul><li><p><strong>State è®©æˆ‘ä»¬æ§åˆ¶åº”ç”¨ä¸­æ˜¾ç¤ºçš„å†…å®¹</strong></p><ul><li><code>State</code> æ˜¯ React ä¸­ç”¨æ¥ç®¡ç†å’Œæ§åˆ¶åº”ç”¨ç•Œé¢å†…å®¹çš„æœºåˆ¶ã€‚å®ƒå†³å®šäº†æŸä¸ªç»„ä»¶åœ¨ç‰¹å®šæ—¶åˆ»çš„è¡¨ç°ã€‚</li></ul></li><li><p><strong>State æ˜¯å¯æ›´æ–°çš„ï¼ˆä¸ <code>props</code> ä¸åŒï¼Œ<code>props</code> æ˜¯ä¸å¯å˜çš„ï¼‰</strong></p><ul><li><code>State</code> å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¿®æ”¹ï¼Œå› æ­¤å®ƒæ˜¯ <strong>å¯å˜çš„</strong>ã€‚ä¸ <code>props</code> ä¸åŒï¼Œ<code>props</code> æ˜¯çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼Œæ˜¯åªè¯»çš„ã€‚</li></ul></li><li><p><strong>State å¯ä»¥é€šè¿‡äººå·¥è¾“å…¥ï¼ˆä¾‹å¦‚æŒ‰é’®ç‚¹å‡»ï¼‰æˆ–è®¡ç®—æœºè¾“å…¥ï¼ˆä¾‹å¦‚ç½‘ç»œå“åº”ï¼‰è¿›è¡Œæ›´æ–°</strong></p><ul><li>ç”¨æˆ·çš„äº¤äº’ï¼ˆå¦‚ç‚¹å‡»æŒ‰é’®ï¼‰æˆ–å¤–éƒ¨äº‹ä»¶ï¼ˆå¦‚ä»ç½‘ç»œè·å–æ•°æ®ï¼‰éƒ½å¯ä»¥è§¦å‘ <code>State</code> çš„æ›´æ–°ã€‚</li></ul></li><li><p><code>State</code>ä¸€èˆ¬å­˜å‚¨åœ¨çˆ¶ç»„ä»¶ï¼Œä»¥ä¾¿ä½œä¸º<code>Props</code>ä¼ é€’åˆ°å¯é‡ç”¨çš„å­ç»„ä»¶ä¸­</p></li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127172548126.png" alt="image-20241127172548126"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127172559239.png" alt="image-20241127172559239"></p><ul><li>åŒæ—¶ï¼Œ<code>State</code>æ˜¯å¯å˜çš„</li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127172616291.png" alt="image-20241127172616291"></p><h1 id="React-çš„è¯„è®ºç»„ä»¶ä»£ç ç¤ºä¾‹"><a href="#React-çš„è¯„è®ºç»„ä»¶ä»£ç ç¤ºä¾‹" class="headerlink" title="React çš„è¯„è®ºç»„ä»¶ä»£ç ç¤ºä¾‹"></a>React çš„è¯„è®ºç»„ä»¶ä»£ç ç¤ºä¾‹</h1><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127173701079.png" alt="image-20241127173701079"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127173908519.png" alt="image-20241127173908519"></p><p><code>CommentReply</code>ç»„ä»¶æ˜¯ä¸€ä¸ªæŠŠ<code>props</code>ä½œä¸ºè¾“å…¥ï¼Œè¿”å›ä½ æ‰€æƒ³æ¸²æŸ“çš„åšå®Œè¾“å‡ºçš„ä¸€ä¸ªæ–¹æ³•ã€‚</p><p><code>return</code>å¤„ä½¿ç”¨<code>JSX</code>è¯­è¨€ï¼Œå¯ä»¥åŸºæœ¬çœ‹åšæ˜¯<code>HTML</code>è¯­è¨€</p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174151597.png" alt="image-20241127174151597"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174256213.png" alt="image-20241127174256213"></p><h2 id="JSXä¸HTMLçš„å·®å¼‚"><a href="#JSXä¸HTMLçš„å·®å¼‚" class="headerlink" title="JSXä¸HTMLçš„å·®å¼‚"></a><code>JSX</code>ä¸<code>HTML</code>çš„å·®å¼‚</h2><p><strong>JSX</strong> å’Œ <strong>HTML</strong> çœ‹èµ·æ¥éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›å…³é”®çš„å·®å¼‚ã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„ä¸»è¦åŒºåˆ«ï¼š</p><h3 id="1-JSX-æ˜¯-JavaScript-çš„æ‰©å±•"><a href="#1-JSX-æ˜¯-JavaScript-çš„æ‰©å±•" class="headerlink" title="1. JSX æ˜¯ JavaScript çš„æ‰©å±•"></a>1. <strong>JSX æ˜¯ JavaScript çš„æ‰©å±•</strong></h3><ul><li><strong>JSX</strong> æ˜¯ <strong>JavaScript çš„è¯­æ³•æ‰©å±•</strong>ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ JavaScript ä»£ç ä¸­å†™ç±»ä¼¼ HTML çš„è¯­æ³•ã€‚JSX è®©æˆ‘ä»¬å¯ä»¥å°† HTML ç»“æ„åµŒå…¥åˆ° JavaScript ä¸­ï¼ŒåŒæ—¶è¿˜æ”¯æŒ JavaScript çš„åŠŸèƒ½å’Œé€»è¾‘ã€‚</li><li><strong>HTML</strong> æ˜¯æ ‡å‡†çš„ç½‘é¡µæ ‡è®°è¯­è¨€ï¼Œå®ƒç”¨äºæè¿°ç½‘é¡µçš„ç»“æ„ï¼Œé€šå¸¸åªåŒ…å« HTML æ ‡ç­¾å’Œé™æ€å†…å®¹ã€‚</li></ul><h3 id="2-å±æ€§å‘½åå·®å¼‚"><a href="#2-å±æ€§å‘½åå·®å¼‚" class="headerlink" title="2. å±æ€§å‘½åå·®å¼‚"></a>2. <strong>å±æ€§å‘½åå·®å¼‚</strong></h3><ul><li><strong>HTML</strong> ä½¿ç”¨ <code>class</code> æ¥å®šä¹‰å…ƒç´ çš„ç±»å±æ€§ï¼Œä¾‹å¦‚ï¼š<code>&lt;div class=&quot;my-class&quot;&gt;&lt;/div&gt;</code>ã€‚</li><li><strong>JSX</strong> ä½¿ç”¨ <code>className</code> æ¥ä»£æ›¿ <code>class</code>ï¼Œå› ä¸º <code>class</code> æ˜¯ JavaScript çš„ä¿ç•™å…³é”®å­—ã€‚ä¾‹å¦‚ï¼š<code>&lt;div className=&quot;my-class&quot;&gt;&lt;/div&gt;</code>ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JSX --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="3-é—­åˆæ ‡ç­¾"><a href="#3-é—­åˆæ ‡ç­¾" class="headerlink" title="3. é—­åˆæ ‡ç­¾"></a>3. <strong>é—­åˆæ ‡ç­¾</strong></h3><ul><li><strong>HTML</strong> å…è®¸ä¸é—­åˆçš„æ ‡ç­¾ï¼ˆå°¤å…¶æ˜¯è‡ªé—­åˆæ ‡ç­¾ï¼‰ï¼Œä¾‹å¦‚ <code>&lt;img&gt;</code>ã€<code>&lt;input&gt;</code> ç­‰å¯ä»¥çœç•¥ç»“æŸæ ‡ç­¾ã€‚</li><li><strong>JSX</strong> è¦æ±‚æ‰€æœ‰æ ‡ç­¾å¿…é¡»è‡ªé—­åˆï¼Œæˆ–è€…æœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œ<code>&lt;img /&gt;</code> æˆ– <code>&lt;input /&gt;</code> åœ¨ JSX ä¸­æ˜¯å¿…éœ€çš„è‡ªé—­åˆæ ‡ç­¾ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image.jpg&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JSX --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image.jpg&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-JavaScript-è¡¨è¾¾å¼"><a href="#4-JavaScript-è¡¨è¾¾å¼" class="headerlink" title="4. JavaScript è¡¨è¾¾å¼"></a>4. <strong>JavaScript è¡¨è¾¾å¼</strong></h3><ul><li><strong>JSX</strong> å…è®¸åœ¨å¤§æ‹¬å· <code>&#123;&#125;</code> ä¸­åµŒå…¥ JavaScript è¡¨è¾¾å¼ã€‚ä½ å¯ä»¥åœ¨ JSX ä¸­æ’å…¥å˜é‡ã€å‡½æ•°è°ƒç”¨ã€ç®—å¼ç­‰ã€‚</li><li><strong>HTML</strong> åªèƒ½å†™é™æ€å†…å®¹ï¼Œä¸æ”¯æŒåŠ¨æ€è¡¨è¾¾å¼ã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSX ä¸­æ’å…¥ JavaScript è¡¨è¾¾å¼</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><p>åœ¨ HTML ä¸­ï¼Œè¿™æ— æ³•ç›´æ¥å®ç°ã€‚</p><h3 id="5-äº‹ä»¶å¤„ç†"><a href="#5-äº‹ä»¶å¤„ç†" class="headerlink" title="5. äº‹ä»¶å¤„ç†"></a>5. <strong>äº‹ä»¶å¤„ç†</strong></h3><ul><li><strong>HTML</strong> ä½¿ç”¨å°å†™å­—æ¯æ¥ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¦‚ <code>onclick</code>ã€<code>onmouseover</code> ç­‰ã€‚</li><li><strong>JSX</strong> ä½¿ç”¨é©¼å³°å‘½åæ³•æ¥ç»‘å®šäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¦‚ <code>onClick</code>ã€<code>onMouseOver</code> ç­‰ã€‚äº‹ä»¶å¤„ç†å‡½æ•°ä¹Ÿå¿…é¡»æ˜¯ JavaScript å‡½æ•°ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;Hello!&#x27;)&quot;</span>&gt;</span>Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JSX --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> alert(&#x27;Hello!&#x27;)&#125;&gt;Click me<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="6-å±æ€§å€¼å¼•å·"><a href="#6-å±æ€§å€¼å¼•å·" class="headerlink" title="6. å±æ€§å€¼å¼•å·"></a>6. <strong>å±æ€§å€¼å¼•å·</strong></h3><ul><li><strong>HTML</strong> å±æ€§å€¼é€šå¸¸ç”¨åŒå¼•å· <code>&quot;</code> æˆ–å•å¼•å· <code>&#39;</code> æ¥åŒ…è£¹ã€‚</li><li><strong>JSX</strong> å±æ€§å€¼æ˜¯å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼çš„ï¼Œå› æ­¤éœ€è¦ç”¨å¤§æ‹¬å· <code>&#123;&#125;</code> æ¥åŒ…è£¹ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;image.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;An image&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- JSX --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;&#123;imageUrl&#125;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;An image&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯"><a href="#7-æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯" class="headerlink" title="7. æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯"></a>7. <strong>æ¡ä»¶æ¸²æŸ“å’Œå¾ªç¯</strong></h3><ul><li><strong>JSX</strong> å…è®¸æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¡ä»¶è¯­å¥å’Œå¾ªç¯è¯­å¥ï¼ˆå¦‚ <code>if</code>ã€<code>map</code> ç­‰ï¼‰ï¼Œè€Œ HTML ä¸æ”¯æŒã€‚</li></ul><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isLoggedIn = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ JSX ä¸­ä½¿ç”¨æ¡ä»¶è¡¨è¾¾å¼</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;isLoggedIn ? &quot;Welcome!&quot; : &quot;Please log in&quot;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure><p>åœ¨ HTML ä¸­ï¼Œä½ æ— æ³•ç›´æ¥å®ç°è¿™æ ·çš„é€»è¾‘ã€‚</p><h3 id="8-JSX-ä¼šè¢«ç¼–è¯‘æˆ-JavaScript"><a href="#8-JSX-ä¼šè¢«ç¼–è¯‘æˆ-JavaScript" class="headerlink" title="8. JSX ä¼šè¢«ç¼–è¯‘æˆ JavaScript"></a>8. <strong>JSX ä¼šè¢«ç¼–è¯‘æˆ JavaScript</strong></h3><ul><li><strong>JSX</strong> åœ¨æµè§ˆå™¨ä¸­æ— æ³•ç›´æ¥æ‰§è¡Œã€‚å®ƒéœ€è¦é€šè¿‡å·¥å…·ï¼ˆå¦‚ Babelï¼‰ç¼–è¯‘æˆæ ‡å‡†çš„ JavaScript ä»£ç ã€‚è¿™äº›ç¼–è¯‘åçš„ä»£ç æ˜¯åŸç”Ÿçš„ <code>React.createElement()</code> è°ƒç”¨ã€‚</li><li><strong>HTML</strong> æ˜¯åŸç”Ÿçš„æ ‡è®°è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘ã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li><strong>JSX</strong> æ˜¯ JavaScript çš„æ‰©å±•ï¼Œå®ƒæä¾›äº†ä¸€ç§åœ¨ JavaScript ä¸­å†™ç±»ä¼¼ HTML çš„è¯­æ³•ï¼Œå¹¶æ”¯æŒåµŒå…¥åŠ¨æ€çš„ JavaScript ä»£ç ã€‚</li><li><strong>HTML</strong> æ˜¯é™æ€çš„ç½‘é¡µæ ‡è®°è¯­è¨€ï¼Œç”¨äºå®šä¹‰ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹ã€‚</li></ul><h1 id="React-çˆ¶åˆ°å­ç»„ä»¶ä»£ç ç¤ºä¾‹"><a href="#React-çˆ¶åˆ°å­ç»„ä»¶ä»£ç ç¤ºä¾‹" class="headerlink" title="React çˆ¶åˆ°å­ç»„ä»¶ä»£ç ç¤ºä¾‹"></a>React çˆ¶åˆ°å­ç»„ä»¶ä»£ç ç¤ºä¾‹</h1><ul><li>é¦–å…ˆæˆ‘ä»¬æŠŠé¡µé¢æ‹†åˆ†æˆç»„ä»¶æ ‘ï¼Œç„¶åå°†ä»–ä»¬è¿›è¡ŒæŠ½è±¡</li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174415886.png" alt="image-20241127174415886"></p><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174448916.png" alt="image-20241127174448916"></p><ul><li>ç°åœ¨æˆ‘ä»¬æŠŠ<code>props</code>ä¼ é€’ç»™æˆ‘ä»¬çš„æŠ½è±¡å­ç»„ä»¶</li></ul><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174600324.png" alt="image-20241127174600324"></p><ul><li><p><code>Intro.js</code></p><ul><li><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174638660.png" alt="image-20241127174638660"></li></ul></li><li><p><code>Photo.js</code></p><ul><li><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174657447.png" alt="image-20241127174657447"></li></ul></li><li><p><code>Post.js</code></p><ul><li><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174754560.png" alt="image-20241127174754560"></p></li><li><p><img src="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-4-%E5%89%8D%E7%AB%AF%E6%A0%88-%E5%88%9D%E8%AF%86react/image-20241127174815839.png" alt="image-20241127174815839"></p></li></ul></li><li><p>æ€»ç»“</p><ul><li>æˆ‘ä»¬çš„<code>App.js</code>åŒ…å«äº†æ•°æ®ï¼Œç„¶åå­ç»„ä»¶æ˜¯æŠ½è±¡ä¸”å¯å¤ç”¨çš„ã€‚</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (ä¸‰)-JSåˆå®æˆ˜</title>
      <link href="/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-3-%E5%89%8D%E7%AB%AF%E6%A0%88-JS%E5%88%9D%E5%AE%9E%E6%88%98/"/>
      <url>/2024/11/27/%E5%89%8D%E7%AB%AF-MIT-Web-3-%E5%89%8D%E7%AB%AF%E6%A0%88-JS%E5%88%9D%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<div class="row">    <embed src="W2_Static_Catbook_in_React.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">catbook-react</span><br><span class="line">â”œâ”€â”€ food.js</span><br><span class="line">â”œâ”€â”€ game.js</span><br><span class="line">â”œâ”€â”€ index.html</span><br><span class="line">â”œâ”€â”€ input.js</span><br><span class="line">â”œâ”€â”€ README.md</span><br><span class="line">â”œâ”€â”€ snake.js</span><br><span class="line">â”œâ”€â”€ snakeUtils.js</span><br><span class="line">â””â”€â”€ style.css</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="index-html"><a href="#index-html" class="headerlink" title="index.html"></a>index.html</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;style.css&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Snake<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;snake.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;input.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;food.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;snakeUtils.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;game.js&quot;</span> <span class="attr">defer</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;game-board&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="ä»£ç è¯´æ˜ï¼š"><a href="#ä»£ç è¯´æ˜ï¼š" class="headerlink" title="ä»£ç è¯´æ˜ï¼š"></a>ä»£ç è¯´æ˜ï¼š</h3><ol><li><strong>åŸºæœ¬ç»“æ„</strong>ï¼š<ul><li><code>&lt;head&gt;</code> ä¸­å¼•å…¥äº† <code>style.css</code> æ¥å®šä¹‰æ ·å¼ã€‚</li><li><code>&lt;div id=&quot;game-board&quot;&gt;&lt;/div&gt;</code> æ˜¯æ¸¸æˆçš„ä¸»è¦åŒºåŸŸã€‚</li></ul></li><li><strong>è„šæœ¬åŠ è½½é¡ºåº</strong>ï¼š<ul><li><code>snake.js</code>ã€<code>input.js</code>ã€<code>food.js</code> å’Œ <code>snakeUtils.js</code> è¢«åŒæ­¥åŠ è½½ã€‚</li><li><code>game.js</code> ä½¿ç”¨äº† <code>defer</code> å±æ€§ï¼Œå»¶è¿Ÿåˆ° HTML è§£æå®Œæˆåæ‰æ‰§è¡Œã€‚</li></ul></li></ol><h3 id="ä¸ºä»€ä¹ˆä½¿ç”¨-defer-å±æ€§ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨-defer-å±æ€§ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨ defer å±æ€§ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>defer</code> å±æ€§ï¼Ÿ</h3><ol><li><code>defer</code> ä¼šåœ¨ HTML å®Œå…¨è§£æåæ‰§è¡Œè„šæœ¬ï¼Œé¿å…é˜»å¡é¡µé¢çš„åŠ è½½ã€‚</li><li>æ‰€æœ‰å¸¦ <code>defer</code> çš„è„šæœ¬ä¼šæŒ‰ç…§å®ƒä»¬åœ¨ HTML ä¸­çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</li><li>å¦‚æœè„šæœ¬ä¸ DOM äº¤äº’å¼ºç›¸å…³ï¼ˆå¦‚ <code>document.getElementById</code>ï¼‰ï¼Œ<code>defer</code> èƒ½ä¿è¯è„šæœ¬è¿è¡Œæ—¶ DOM å·²åŠ è½½å®Œæˆã€‚</li></ol><p>ä½¿ç”¨ <code>defer</code> çš„æ³¨æ„ç‚¹ï¼š</p><ul><li>ä¸å»ºè®®ä¸ <code>async</code> æ··ç”¨ã€‚</li><li>é€‚åˆæ‰€æœ‰è„šæœ¬å¯¹ DOM æ“ä½œçš„åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯å¤šä¸ªè„šæœ¬é—´å­˜åœ¨ä¾èµ–å…³ç³»æ—¶ã€‚</li></ul><h2 id="game-js"><a href="#game-js" class="headerlink" title="game.js"></a>game.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">SNAKE_SPEED</span> = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gameBoard = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;game-board&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> isGameOver = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">main</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">update</span>();</span><br><span class="line">  <span class="title function_">draw</span>();</span><br><span class="line">  <span class="keyword">if</span> (isGameOver) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&quot;Game Over&quot;</span>);</span><br><span class="line">    <span class="title function_">resetGame</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gameLoop = <span class="built_in">setInterval</span>(main, <span class="number">1000</span> / <span class="variable constant_">SNAKE_SPEED</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">update</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Updating&quot;</span>);</span><br><span class="line">  <span class="title function_">updateSnake</span>();</span><br><span class="line">  <span class="title function_">updateFood</span>();</span><br><span class="line">  isGameOver = <span class="title function_">checkGameOver</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">draw</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  gameBoard.<span class="property">innerHTML</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="title function_">drawSnake</span>(gameBoard);</span><br><span class="line">  <span class="title function_">drawFood</span>(gameBoard);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkGameOver</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">snakeOutOfBounds</span>() || <span class="title function_">snakeIntersectSelf</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resetGame</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// Make sure the game loop is not still running</span></span><br><span class="line">  <span class="built_in">clearInterval</span>(gameLoop);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Reset the snake&#x27;s position and direction</span></span><br><span class="line">  <span class="title function_">resetSnake</span>();</span><br><span class="line">  <span class="title function_">resetDirection</span>();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Restart the interval</span></span><br><span class="line">  gameLoop = <span class="built_in">setInterval</span>(main, <span class="number">1000</span> / <span class="variable constant_">SNAKE_SPEED</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="input-js"><a href="#input-js" class="headerlink" title="input.js"></a>input.js</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> inputDirection = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;ArrowUp&quot;</span> &amp;&amp; inputDirection.<span class="property">x</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    inputDirection = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: -<span class="number">1</span> &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;ArrowDown&quot;</span> &amp;&amp; inputDirection.<span class="property">x</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    inputDirection = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;ArrowRight&quot;</span> &amp;&amp; inputDirection.<span class="property">y</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    inputDirection = &#123; <span class="attr">x</span>: <span class="number">1</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;ArrowLeft&quot;</span> &amp;&amp; inputDirection.<span class="property">y</span> !== <span class="number">0</span>) &#123;</span><br><span class="line">    inputDirection = &#123; <span class="attr">x</span>: -<span class="number">1</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (event.<span class="property">key</span> === <span class="string">&quot;r&quot;</span>) &#123;</span><br><span class="line">    <span class="title function_">resetGame</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getInputDirection</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> inputDirection;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">resetDirection</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  inputDirection = &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">1</span> &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>&#x2F;&#x2F; Create a â€œkeydownâ€ event listener<br>&#x2F;&#x2F; (<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener</a>)<br>&#x2F;&#x2F; key has been pressed<br>&#x2F;&#x2F; (<a href="https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key">https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key</a>)<br>&#x2F;&#x2F; List of key values:<br>&#x2F;&#x2F; <a href="https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values">https://developer.mozilla.org/en-US/docs/Web/API/UI_Events/Keyboard_event_key_values</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (äºŒ)-Htmlã€CSSåˆå®æˆ˜</title>
      <link href="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/"/>
      <url>/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<p>åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ä¸€ä¸ªç®€å•çš„çŒ«å’ªä¸»é¡µé¡¹ç›®ä¸ºä¾‹ï¼Œè®¨è®ºå‡ ä¸ªå…³é”®çš„å‰ç«¯å¼€å‘çŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬ä½ç½®è®¾ç½®ã€å›¾ç‰‡å¤„ç†ã€å­—ä½“å¤„ç†ã€:rootå˜é‡çš„ä½¿ç”¨ã€8pxè®¾è®¡åŸåˆ™ï¼Œä»¥åŠå¦‚ä½•åˆ©ç”¨Flexå¸ƒå±€è¿›è¡Œé¡µé¢è®¾è®¡ã€‚</p><h2 id="é¡¹ç›®ç»“æ„"><a href="#é¡¹ç›®ç»“æ„" class="headerlink" title="é¡¹ç›®ç»“æ„"></a>é¡¹ç›®ç»“æ„</h2><p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸ºâ€Catbookâ€çš„é¡µé¢ï¼ŒHTMLç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Catbook<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;navTitle&quot;</span>&gt;</span>Catbook<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;appContainer&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatarContainer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&quot;name u-textCenter&quot;</span>&gt;</span>Buka Buka<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;line&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;u-flex&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;subContainer u-textCenter&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;subTitle&quot;</span>&gt;</span>About Me<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>I am more of a turtle person but I&#x27;m just trying to fit in and get a catbook.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;subContainer u-textCenter&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;subTitle&quot;</span>&gt;</span>My Favorite Type of Cat<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>I actually prefer turtles.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>CSSæ ·å¼æ–‡ä»¶ <code>styles.css</code> åŒ…å«äº†å…¨å±€å˜é‡ã€ç»„ä»¶æ ·å¼ä»¥åŠå®ç”¨ç±»ã€‚ä»¥ä¸‹æ˜¯å…³é”®çŸ¥è¯†ç‚¹çš„è¯¦ç»†è§£æã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;https://fonts.googleapis.com/css?family=Open+Sans:300,600&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--primary</span>: <span class="number">#396dff</span>;</span><br><span class="line">  <span class="attr">--grey</span>: <span class="number">#f7f7f7</span>;</span><br><span class="line">  <span class="attr">--white</span>: <span class="number">#fff</span>;</span><br><span class="line"></span><br><span class="line">  <span class="attr">--xs</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attr">--s</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attr">--m</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attr">--l</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&quot;Open Sans&quot;</span>, sans-serif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.u-flex</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.u-textCenter</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navContainer</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="built_in">var</span>(--s) <span class="built_in">var</span>(--m);</span><br><span class="line"></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.navTitle</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--white);</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="comment">/* Below cancels out some of the default styling of h1 */</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>; </span><br><span class="line">  <span class="attribute">font-weight</span>: normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.appContainer</span> &#123;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Add a max width, padding, and margin so that</span></span><br><span class="line"><span class="comment">   * the content on the page isn&#x27;t larger than 960px and</span></span><br><span class="line"><span class="comment">   * this div is centered if the browser is larger tahn 960px.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="built_in">var</span>(--m) <span class="built_in">var</span>(--m);</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatarContainer</span> &#123;</span><br><span class="line">  <span class="comment">/* padding makes the image only takes up 30% of the container */</span></span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">35%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="comment">/* make it responsive */</span></span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="comment">/* div height to be the same as width*/</span></span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* make it a circle */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Add image */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;cat.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* Centering on image`s center*/</span></span><br><span class="line">  <span class="attribute">background-position</span>-y: center;</span><br><span class="line">  <span class="attribute">background-position</span>-x: center;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* it makes the clue thing, takes smaller dimension to fill div */</span></span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* it is optional, for making this div centered in parent*/</span></span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.name</span> &#123;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Change the size and weight of the font so it feels</span></span><br><span class="line"><span class="comment">   * important!</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2.4em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.line</span> &#123;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Change the color of the line so that it&#x27;s less weighty */</span></span><br><span class="line">  <span class="attribute">border-color</span>: <span class="built_in">var</span>(--grey);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.subContainer</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.subContainer</span> + <span class="selector-class">.subContainer</span> &#123;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Hmm, I wonder if this can be used to add spacing between</span></span><br><span class="line"><span class="comment">   * subContainers...</span></span><br><span class="line"><span class="comment">   * https://developer.mozilla.org/en-US/docs/Web/CSS/Adjacent_sibling_combinator</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="built_in">var</span>(--m);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.subTitle</span> &#123;</span><br><span class="line">  <span class="comment">/* <span class="doctag">TODO:</span> Change the size and weight of the font so it feels</span></span><br><span class="line"><span class="comment">   * important! Optionally add some margin.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">1.5em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">300</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="built_in">var</span>(--m) <span class="built_in">var</span>(--s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>æœ‰ä¸€äº›ä½¿ç”¨äº†<code>u-</code>å¼€å¤´ï¼Œæˆ‘ä»¬ç§°è¿™ç±»åªåº”ç”¨ä¸€ä¸ªcsså±æ€§çš„ç±»ä¸ºæ•ˆç”¨ç±»(utility classese)ã€‚</p></blockquote><hr><h2 id="1-ä½ç½®è®¾ç½®"><a href="#1-ä½ç½®è®¾ç½®" class="headerlink" title="1. ä½ç½®è®¾ç½®"></a>1. ä½ç½®è®¾ç½®</h2><h3 id="å†…å®¹å±…ä¸­"><a href="#å†…å®¹å±…ä¸­" class="headerlink" title="å†…å®¹å±…ä¸­"></a><strong>å†…å®¹å±…ä¸­</strong></h3><p>ä¸ºäº†è®©é¡µé¢å†…å®¹å±…ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>.appContainer</code> ä¸­ä½¿ç”¨ä»¥ä¸‹æ ·å¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.appContainer</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">960px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="built_in">var</span>(--m) <span class="built_in">var</span>(--m);</span><br><span class="line">  <span class="attribute">margin</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>max-width: 960px;</code></strong> ç¡®ä¿é¡µé¢å®½åº¦ä¸ä¼šè¶…å‡º960pxã€‚</li><li><strong><code>margin: auto;</code></strong> æ°´å¹³å±…ä¸­å†…å®¹ã€‚</li><li><strong><code>padding</code></strong> ä¸ºå†…å®¹æ·»åŠ å†…è¾¹è·ï¼Œé˜²æ­¢å†…å®¹ç´§è´´è¾¹æ¡†ã€‚</li></ul><h3 id="å›¾ç‰‡ä½ç½®è°ƒæ•´"><a href="#å›¾ç‰‡ä½ç½®è°ƒæ•´" class="headerlink" title="å›¾ç‰‡ä½ç½®è°ƒæ•´"></a><strong>å›¾ç‰‡ä½ç½®è°ƒæ•´</strong></h3><p>ä¸ºäº†ä½¿å¤´åƒå›¾ç‰‡åœ¨çˆ¶å®¹å™¨ä¸­å±…ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>.avatar</code> ä¸­ä½¿ç”¨äº†ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>margin: 0 auto;</code></strong> å°†å—çº§å…ƒç´ æ°´å¹³å±…ä¸­ã€‚</li></ul><p>æ­¤å¤–ï¼Œé€šè¿‡è®¾ç½® <code>background-position</code> å±æ€§ï¼Œä½¿èƒŒæ™¯å›¾ç‰‡å§‹ç»ˆå±…ä¸­ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">background-position</span>: center;</span><br></pre></td></tr></table></figure><hr><h2 id="2-å›¾ç‰‡å¤„ç†"><a href="#2-å›¾ç‰‡å¤„ç†" class="headerlink" title="2. å›¾ç‰‡å¤„ç†"></a>2. å›¾ç‰‡å¤„ç†</h2><h3 id="å“åº”å¼è®¾è®¡"><a href="#å“åº”å¼è®¾è®¡" class="headerlink" title="å“åº”å¼è®¾è®¡"></a><strong>å“åº”å¼è®¾è®¡</strong></h3><p>å¤´åƒå›¾ç‰‡ä½¿ç”¨ä»¥ä¸‹æ ·å¼ç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸­ä¿æŒè‰¯å¥½çš„å±•ç¤ºæ•ˆæœï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>max-width: 100%;</code></strong> é˜²æ­¢å›¾ç‰‡è¶…å‡ºå®¹å™¨å®½åº¦ã€‚</li><li><strong><code>padding-top: 100%;</code></strong> é€šè¿‡è®¾ç½®é«˜åº¦ä¸å®½åº¦ç›¸ç­‰ï¼Œä½¿å›¾ç‰‡ä¿æŒæ­£æ–¹å½¢ã€‚</li></ul><h3 id="åœ†å½¢è£å‰ª"><a href="#åœ†å½¢è£å‰ª" class="headerlink" title="åœ†å½¢è£å‰ª"></a><strong>åœ†å½¢è£å‰ª</strong></h3><p>é€šè¿‡ <code>border-radius</code> å±æ€§å°†å›¾ç‰‡è£å‰ªæˆåœ†å½¢ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="3-å­—ä½“å¤„ç†"><a href="#3-å­—ä½“å¤„ç†" class="headerlink" title="3. å­—ä½“å¤„ç†"></a>3. å­—ä½“å¤„ç†</h2><h3 id="å¼•å…¥è‡ªå®šä¹‰å­—ä½“"><a href="#å¼•å…¥è‡ªå®šä¹‰å­—ä½“" class="headerlink" title="å¼•å…¥è‡ªå®šä¹‰å­—ä½“"></a><strong>å¼•å…¥è‡ªå®šä¹‰å­—ä½“</strong></h3><ul><li><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154020650.png" alt="image-20241127154020650"></p></li><li><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154053638.png" alt="image-20241127154053638"></p></li><li><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154106481.png" alt="image-20241127154106481"></p></li><li><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154200964.png" alt="image-20241127154200964"></p></li></ul><p>ä½¿ç”¨ <code>@import</code> ä» <a href="https://fonts.google.com/">Browse Fonts - Google Fonts</a> å¼•å…¥ â€œOpen Sansâ€ å­—ä½“ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;https://fonts.googleapis.com/css?family=Open+Sans:300,600&quot;</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="4-ä½¿ç”¨-root-å®šä¹‰å…¨å±€å˜é‡"><a href="#4-ä½¿ç”¨-root-å®šä¹‰å…¨å±€å˜é‡" class="headerlink" title="4. ä½¿ç”¨ :root å®šä¹‰å…¨å±€å˜é‡"></a>4. ä½¿ç”¨ <code>:root</code> å®šä¹‰å…¨å±€å˜é‡</h2><p><code>:root</code> æä¾›äº†ä¸€ç§é›†ä¸­ç®¡ç†é¢œè‰²ã€é—´è·ç­‰æ ·å¼çš„æ–¹æ³•ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--primary</span>: <span class="number">#396dff</span>;</span><br><span class="line">  <span class="attr">--grey</span>: <span class="number">#f7f7f7</span>;</span><br><span class="line">  <span class="attr">--white</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attr">--xs</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attr">--s</span>: <span class="number">8px</span>;</span><br><span class="line">  <span class="attr">--m</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attr">--l</span>: <span class="number">24px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å®šä¹‰é¢œè‰²å˜é‡ï¼Œå¦‚ <code>--primary</code> ç”¨äºå¯¼èˆªæ èƒŒæ™¯ã€‚</li><li>å®šä¹‰é—´è·å˜é‡ï¼Œç¡®ä¿å¸ƒå±€ä¸€è‡´æ€§ã€‚</li></ul><p>ä½¿ç”¨è¿™äº›å˜é‡ï¼Œå¯ä»¥è½»æ¾æ›´æ–°æ•´ä¸ªé¡µé¢çš„æ ·å¼ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.navContainer</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="built_in">var</span>(--s) <span class="built_in">var</span>(--m);</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--primary);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="5-éµå¾ª8pxç½‘æ ¼ç³»ç»Ÿ"><a href="#5-éµå¾ª8pxç½‘æ ¼ç³»ç»Ÿ" class="headerlink" title="5. éµå¾ª8pxç½‘æ ¼ç³»ç»Ÿ"></a>5. éµå¾ª8pxç½‘æ ¼ç³»ç»Ÿ</h2><h3 id="é—´è·ä¸å°ºå¯¸"><a href="#é—´è·ä¸å°ºå¯¸" class="headerlink" title="é—´è·ä¸å°ºå¯¸"></a><strong>é—´è·ä¸å°ºå¯¸</strong></h3><p>CSSä¸­æ‰€æœ‰çš„é—´è·å’Œå°ºå¯¸éƒ½ä½¿ç”¨äº† <code>8px</code> çš„å€æ•°ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">--xs</span>: <span class="number">4px</span>;</span><br><span class="line"><span class="attr">--s</span>: <span class="number">8px</span>;</span><br><span class="line"><span class="attr">--m</span>: <span class="number">16px</span>;</span><br><span class="line"><span class="attr">--l</span>: <span class="number">24px</span>;</span><br></pre></td></tr></table></figure><ul><li><code>4px</code> ç”¨äºå¾®è°ƒã€‚</li><li><code>8px</code> å’Œ <code>16px</code> ç”¨äºç»„ä»¶çš„å†…å¤–è¾¹è·ã€‚</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.subTitle</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="built_in">var</span>(--m) <span class="built_in">var</span>(--s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­æ£€æŸ¥å…ƒç´ æ¥è§‚å¯Ÿmarginå’Œpadding:</p><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154632834.png" alt="image-20241127154632834"></p><p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»–ä»¬çš„å€¼æ˜¯ä»é¡¶éƒ¨å¼€å§‹ï¼Œé¡ºæ—¶é’ˆæ–¹å‘èµ‹å€¼çš„<br><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154717341.png" alt="image-20241127154717341"></p><hr><h2 id="6-Flexå¸ƒå±€"><a href="#6-Flexå¸ƒå±€" class="headerlink" title="6. Flexå¸ƒå±€"></a>6. Flexå¸ƒå±€</h2><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154820702.png" alt="image-20241127154820702"></p><p><img src="/2024/11/26/%E5%89%8D%E7%AB%AF-MIT-Web-2-%E5%89%8D%E7%AB%AF%E6%A0%88-CatBook%E5%88%9D%E5%AE%9E%E6%88%98/image-20241127154834368.png" alt="image-20241127154834368"></p><p>å¥½çš„ï¼Œä¸‹é¢æ˜¯ Flexå¸ƒå±€ä¸­<strong>å¸¸ç”¨çš„å±æ€§</strong>ä»¥åŠå®ƒä»¬çš„ç®€è¦ä»‹ç»ï¼Œå¹¶é™„ä¸Šç›¸åº”çš„ç¤ºä¾‹ï¼š</p><h3 id="1-Flexå®¹å™¨çš„å¸¸ç”¨å±æ€§"><a href="#1-Flexå®¹å™¨çš„å¸¸ç”¨å±æ€§" class="headerlink" title="1. Flexå®¹å™¨çš„å¸¸ç”¨å±æ€§"></a>1. <strong>Flexå®¹å™¨çš„å¸¸ç”¨å±æ€§</strong></h3><p>1.1 <code>display: flex</code></p><p>è¿™ä¸ªå±æ€§æ˜¯å¯ç”¨ Flex å¸ƒå±€çš„å…³é”®ï¼Œå®ƒä½¿å¾—å…ƒç´ æˆä¸º Flex å®¹å™¨ï¼Œå®¹å™¨ä¸­çš„ç›´æ¥å­å…ƒç´ ä¼šè‡ªåŠ¨æˆä¸º Flex é¡¹ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;  <span class="comment">/* å¯ç”¨ Flex å¸ƒå±€ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.2 <code>flex-direction</code></p><p><code>flex-direction</code> æ§åˆ¶ Flex é¡¹åœ¨å®¹å™¨ä¸­çš„æ’åˆ—æ–¹å‘ã€‚</p><ul><li><code>row</code>ï¼šé»˜è®¤å€¼ï¼Œä¸»è½´ä¸ºæ°´å¹³æ–¹å‘ï¼Œå­é¡¹ä»å·¦åˆ°å³æ’åˆ—ã€‚</li><li><code>row-reverse</code>ï¼šå­é¡¹ä»å³åˆ°å·¦æ’åˆ—ã€‚</li><li><code>column</code>ï¼šä¸»è½´ä¸ºå‚ç›´æ–¹å‘ï¼Œå­é¡¹ä»ä¸Šåˆ°ä¸‹æ’åˆ—ã€‚</li><li><code>column-reverse</code>ï¼šå­é¡¹ä»ä¸‹åˆ°ä¸Šæ’åˆ—ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-direction</span>: row;  <span class="comment">/* å­é¡¹æ°´å¹³æ–¹å‘æ’åˆ—ï¼ˆé»˜è®¤ï¼‰ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.3 <code>flex-wrap</code></p><p><code>flex-wrap</code> æ§åˆ¶ Flex é¡¹æ˜¯å¦æ¢è¡Œã€‚</p><ul><li><code>nowrap</code>ï¼šé»˜è®¤å€¼ï¼Œä¸æ¢è¡Œï¼Œæ‰€æœ‰é¡¹ä¼šåœ¨ä¸€è¡Œå†…æ˜¾ç¤ºã€‚</li><li><code>wrap</code>ï¼šå½“ä¸€è¡Œå®¹çº³ä¸ä¸‹æ—¶ï¼Œè‡ªåŠ¨æ¢è¡Œã€‚</li><li><code>wrap-reverse</code>ï¼šæ¢è¡Œï¼Œä½†æ–°è¡Œçš„ä½ç½®åœ¨ä¸Šæ–¹ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;  <span class="comment">/* è‡ªåŠ¨æ¢è¡Œ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.4 <code>justify-content</code></p><p><code>justify-content</code> æ§åˆ¶ä¸»è½´ï¼ˆé»˜è®¤æ°´å¹³è½´ï¼‰ä¸Šé¡¹çš„å¯¹é½æ–¹å¼ã€‚</p><ul><li><code>flex-start</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°ä¸»è½´çš„èµ·ç‚¹ï¼ˆé»˜è®¤ï¼‰ã€‚</li><li><code>flex-end</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°ä¸»è½´çš„ç»ˆç‚¹ã€‚</li><li><code>center</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°ä¸»è½´çš„ä¸­å¿ƒã€‚</li><li><code>space-between</code>ï¼šé¡¹ä¹‹é—´åˆ†é…ç›¸ç­‰çš„ç©ºé—´ï¼Œé¦–å°¾é¡¹ç´§è´´å®¹å™¨è¾¹ç¼˜ã€‚</li><li><code>space-around</code>ï¼šé¡¹ä¹‹é—´åˆ†é…ç›¸ç­‰çš„ç©ºé—´ï¼Œé¦–å°¾é¡¹ä¸¤ç«¯æœ‰ç©ºéš™ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;  <span class="comment">/* å­é¡¹æ°´å¹³å±…ä¸­ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.5 <code>align-items</code></p><p><code>align-items</code> æ§åˆ¶äº¤å‰è½´ï¼ˆé»˜è®¤å‚ç›´è½´ï¼‰ä¸Šé¡¹çš„å¯¹é½æ–¹å¼ã€‚</p><ul><li><code>flex-start</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°äº¤å‰è½´çš„èµ·ç‚¹ã€‚</li><li><code>flex-end</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°äº¤å‰è½´çš„ç»ˆç‚¹ã€‚</li><li><code>center</code>ï¼šå°†æ‰€æœ‰é¡¹å¯¹é½åˆ°äº¤å‰è½´çš„ä¸­å¿ƒã€‚</li><li><code>baseline</code>ï¼šå°†æ‰€æœ‰é¡¹æ²¿åŸºçº¿å¯¹é½ã€‚</li><li><code>stretch</code>ï¼šé»˜è®¤å€¼ï¼Œè®©é¡¹æ‹‰ä¼¸å¡«å……äº¤å‰è½´ï¼ˆä¸€èˆ¬ç”¨äºé«˜åº¦ï¼‰ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">align-items</span>: center;  <span class="comment">/* å­é¡¹å‚ç›´å±…ä¸­ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.6 <code>align-content</code></p><p><code>align-content</code> æ§åˆ¶å¤šè¡Œçš„å¯¹é½æ–¹å¼ã€‚ä¸ <code>align-items</code> ä¸åŒï¼Œ<code>align-content</code> åªåœ¨æœ‰å¤šè¡Œæ—¶æœ‰æ•ˆã€‚</p><ul><li><code>flex-start</code>ï¼šå°†æ‰€æœ‰è¡Œå¯¹é½åˆ°äº¤å‰è½´çš„èµ·ç‚¹ã€‚</li><li><code>flex-end</code>ï¼šå°†æ‰€æœ‰è¡Œå¯¹é½åˆ°äº¤å‰è½´çš„ç»ˆç‚¹ã€‚</li><li><code>center</code>ï¼šå°†æ‰€æœ‰è¡Œå¯¹é½åˆ°äº¤å‰è½´çš„ä¸­å¿ƒã€‚</li><li><code>space-between</code>ï¼šåœ¨è¡Œä¹‹é—´åˆ†é…ç›¸ç­‰çš„ç©ºé—´ã€‚</li><li><code>space-around</code>ï¼šåœ¨è¡Œä¹‹é—´åˆ†é…ç›¸ç­‰çš„ç©ºé—´ã€‚</li><li><code>stretch</code>ï¼šè®©æ‰€æœ‰è¡Œå æ»¡å®¹å™¨çš„äº¤å‰è½´ã€‚</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">flex-wrap</span>: wrap;  <span class="comment">/* å¤šè¡Œæ˜¾ç¤º */</span></span><br><span class="line">  <span class="attribute">align-content</span>: space-between;  <span class="comment">/* è¡Œä¹‹é—´åˆ†é…ç©ºé—´ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h3 id="2-Flexé¡¹çš„å¸¸ç”¨å±æ€§"><a href="#2-Flexé¡¹çš„å¸¸ç”¨å±æ€§" class="headerlink" title="2. Flexé¡¹çš„å¸¸ç”¨å±æ€§"></a>2. <strong>Flexé¡¹çš„å¸¸ç”¨å±æ€§</strong></h3><p>2.1 <code>flex-grow</code></p><p><code>flex-grow</code> å®šä¹‰äº† Flex é¡¹åœ¨å®¹å™¨ä¸­å‰©ä½™ç©ºé—´çš„åˆ†é…æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º <code>0</code>ï¼Œè¡¨ç¤ºä¸æ”¾å¤§ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;  <span class="comment">/* å¹³åˆ†å‰©ä½™ç©ºé—´ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.2 <code>flex-shrink</code></p><p><code>flex-shrink</code> å®šä¹‰äº† Flex é¡¹åœ¨ç©ºé—´ä¸è¶³æ—¶çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤å€¼ä¸º <code>1</code>ï¼Œè¡¨ç¤ºä¼šç¼©å°ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">1</span>;  <span class="comment">/* ä¼šç¼©å°ä»¥é€‚åº”å®¹å™¨ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.3 <code>flex-basis</code></p><p><code>flex-basis</code> å®šä¹‰äº† Flex é¡¹çš„åˆå§‹å¤§å°ã€‚å¯ä»¥æ˜¯åƒç´ ã€ç™¾åˆ†æ¯”ç­‰ã€‚å®ƒä¼šåœ¨ <code>flex-grow</code> å’Œ <code>flex-shrink</code> ä¹‹å‰åº”ç”¨ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">200px</span>;  <span class="comment">/* è®¾ç½®åˆå§‹å®½åº¦ä¸º200px */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.4 <code>flex</code></p><p><code>flex</code> æ˜¯ <code>flex-grow</code>ã€<code>flex-shrink</code> å’Œ <code>flex-basis</code> çš„ç®€å†™ï¼Œå¯ä»¥åŒæ—¶è®¾ç½®è¿™ä¸‰ä¸ªå±æ€§ã€‚ä¾‹å¦‚ï¼Œ<code>flex: 1</code> ç­‰ä»·äº <code>flex-grow: 1; flex-shrink: 1; flex-basis: 0</code>ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">flex</span>: <span class="number">1</span>;  <span class="comment">/* å¹³åˆ†å‰©ä½™ç©ºé—´ï¼Œå¹¶ä¸”é¡¹çš„åˆå§‹å®½åº¦ä¸º0 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.5 <code>order</code></p><p><code>order</code> å±æ€§å®šä¹‰äº† Flex é¡¹çš„æ’åˆ—é¡ºåºï¼Œé»˜è®¤å€¼æ˜¯ <code>0</code>ï¼Œæ•°å€¼è¶Šå°çš„é¡¹æ’åœ¨å‰é¢ã€‚é€šè¿‡ <code>order</code> å¯ä»¥æ”¹å˜å…ƒç´ çš„é¡ºåºï¼Œè€Œä¸å½±å“å®ƒä»¬åœ¨HTMLä¸­çš„é¡ºåºã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.item</span> &#123;</span><br><span class="line">  <span class="attribute">order</span>: <span class="number">2</span>;  <span class="comment">/* è®¾ç½®è¯¥é¡¹ä¸ºç¬¬ä¸‰ä¸ª */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°æ°´å¹³æ’åˆ—å’Œç­‰åˆ†å®½åº¦"><a href="#å®ç°æ°´å¹³æ’åˆ—å’Œç­‰åˆ†å®½åº¦" class="headerlink" title="å®ç°æ°´å¹³æ’åˆ—å’Œç­‰åˆ†å®½åº¦"></a><strong>å®ç°æ°´å¹³æ’åˆ—å’Œç­‰åˆ†å®½åº¦</strong></h3><p>é€šè¿‡ <code>.u-flex</code> å’Œ <code>.subContainer</code> å®ç°å­å…ƒç´ çš„æ°´å¹³æ’åˆ—ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.u-flex</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.subContainer</span> &#123;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">flex-basis</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>flex-grow: 1;</code></strong> ä½¿æ‰€æœ‰å­å®¹å™¨æŒ‰æ¯”ä¾‹å‡åˆ†å‰©ä½™ç©ºé—´ã€‚</li><li><strong><code>flex-basis: 0;</code></strong> ç¡®ä¿æ¯ä¸ªå­å®¹å™¨åˆå§‹å®½åº¦ä¸º0ï¼Œä»è€Œè¾¾åˆ°ç­‰åˆ†å¸ƒå±€ã€‚</li></ul><h3 id="æ·»åŠ é—´è·"><a href="#æ·»åŠ é—´è·" class="headerlink" title="æ·»åŠ é—´è·"></a><strong>æ·»åŠ é—´è·</strong></h3><p>ä½¿ç”¨ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ä¸ºå­å®¹å™¨ä¹‹é—´æ·»åŠ é—´è·ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.subContainer</span> + <span class="selector-class">.subContainer</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="built_in">var</span>(--m);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><strong><code>+</code></strong> é€‰æ‹©å™¨ä»…ä½œç”¨äºç›¸é‚»çš„ <code>.subContainer</code>ï¼Œå®ç°ç²¾ç¡®æ§åˆ¶ã€‚</li></ul><hr><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>é€šè¿‡è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬æ¢ç´¢äº†å¦‚ä½•ä½¿ç”¨HTMLå’ŒCSSæ„å»ºä¸€ä¸ªç®€å•çš„çŒ«å’ªä¸»é¡µã€‚ä»ä½ç½®è®¾ç½®ã€å›¾ç‰‡è£å‰ªåˆ°å­—ä½“ç®¡ç†ï¼Œä»¥åŠä½¿ç”¨ <code>:root</code> å’Œ Flex å¸ƒå±€å®ç°é«˜æ•ˆã€ç°ä»£çš„è®¾è®¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µè·¯ä¸æ•°å­—ç³»ç»Ÿå¤ä¹ </title>
      <link href="/2024/11/18/%E8%AF%BE%E7%A8%8B%E5%A4%8D%E4%B9%A0-%E7%94%B5%E8%B7%AF%E4%B8%8E%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/"/>
      <url>/2024/11/18/%E8%AF%BE%E7%A8%8B%E5%A4%8D%E4%B9%A0-%E7%94%B5%E8%B7%AF%E4%B8%8E%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/</url>
      
        <content type="html"><![CDATA[<div class="row">    <embed src="ç”µè·¯ä¸æ•°å­—ç³»ç»Ÿå¤ä¹ è¯¾.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="åˆ†æ•°åˆ†å¸ƒ"><a href="#åˆ†æ•°åˆ†å¸ƒ" class="headerlink" title="åˆ†æ•°åˆ†å¸ƒ"></a>åˆ†æ•°åˆ†å¸ƒ</h1><h2 id="ç”µè·¯-40-åˆ†"><a href="#ç”µè·¯-40-åˆ†" class="headerlink" title="ç”µè·¯(40 åˆ†)"></a>ç”µè·¯(40 åˆ†)</h2><ul><li>10 åˆ†é€‰æ‹©</li><li>3 é“å¤§é¢˜ 30</li></ul><h2 id="æ•°ç”µ-60-åˆ†"><a href="#æ•°ç”µ-60-åˆ†" class="headerlink" title="æ•°ç”µ(60 åˆ†)"></a>æ•°ç”µ(60 åˆ†)</h2><ul><li><p>ç»„åˆ 20 åˆ†</p><ul><li>æ•°æ®é€‰æ‹©å™¨</li><li>è¯‘ç å™¨</li><li><blockquote><p>é™ç»´å¡è¯ºå›¾</p></blockquote></li></ul></li><li><p>æ—¶åº 20 åˆ†</p><ul><li><p>åŒæ­¥</p></li><li><p>è¿›åˆ¶</p></li><li><blockquote><p>çŠ¶æ€æ–¹ç¨‹</p></blockquote></li></ul></li><li><p>ç¼–ç¨‹ 20 åˆ†</p><ul><li>æœ€åä¸€æ¬¡æ•°ç”µå®éªŒ<ul><li>fpã€è®¡æ•°ã€æ˜¾ç¤º</li></ul></li></ul></li></ul><h1 id="é‡ç‚¹æ¦‚æ‹¬"><a href="#é‡ç‚¹æ¦‚æ‹¬" class="headerlink" title="é‡ç‚¹æ¦‚æ‹¬"></a>é‡ç‚¹æ¦‚æ‹¬</h1><h2 id="ç”µè·¯é‡ç‚¹"><a href="#ç”µè·¯é‡ç‚¹" class="headerlink" title="ç”µè·¯é‡ç‚¹"></a>ç”µè·¯é‡ç‚¹</h2><ul><li>KCL, KVL</li><li>æ”¯è·¯ç”µæµæ³•ï¼Œç½‘å­”ç”µæµæ³•ï¼Œç»“ç‚¹ç”µå‹æ³•<ul><li>ç”µå‹æºï¼Œç”µæµæºï¼Œå—æ§æº</li></ul></li><li>å»å¹´æˆ´ç»´å—ï¼Œå‰å¹´å åŠ ï¼Œä»Šå¹´ã€‚ã€‚ã€‚ã€‚å åŠ ï¼Ÿ</li><li>æ­£å¼¦å‘é‡ä¸€é“å¤§é¢˜</li></ul><h2 id="æ•°ç”µé‡ç‚¹"><a href="#æ•°ç”µé‡ç‚¹" class="headerlink" title="æ•°ç”µé‡ç‚¹"></a>æ•°ç”µé‡ç‚¹</h2><ul><li>é—¨ è¯‘ç  æ•°æ®é€‰æ‹©å™¨ é™ç»´å›¾</li><li>è§¦å‘å™¨å’Œæ—¶åºä¸€èµ·å‡ºé¢˜<ul><li>D JK ç‰¹å¾æ–¹ç¨‹</li></ul></li><li>ä¼šåˆ†ææ—¶åºé€»è¾‘ç”µè·¯åšä»€ä¹ˆ</li><li>ä¼šè®¾è®¡ èŠ¯ç‰‡è®¾è®¡</li><li>ä¼šå†™ fp è®¡æ•° è¯‘ç ç¨‹åº</li></ul><h1 id="æœ‰æ—¶é—´çœ‹çœ‹"><a href="#æœ‰æ—¶é—´çœ‹çœ‹" class="headerlink" title="æœ‰æ—¶é—´çœ‹çœ‹"></a>æœ‰æ—¶é—´çœ‹çœ‹</h1><ul><li>TTL ç”µè·¯ CMOS ç”µè·¯ å¼€å…³ç”µå‹ ä¼˜ç‚¹</li><li>è¯‘ç å™¨è¾“å‡ºä½ç”µå¹³æœ‰æ•ˆ ä¸éè¿˜æ˜¯é«˜ç”µå¹³æœ‰æ•ˆ æˆ–ä»¬</li><li>èŠ¯ç‰‡æœ‰æ²¡æœ‰ä½¿èƒ½ç«¯</li><li>èŠ¯ç‰‡é«˜ä½ä½é¡ºåºè¦ä¸€è‡´</li><li>æ•°æ®é€‰æ‹©å™¨é™æœ€ä½ä½</li><li>138 è¯‘ç å™¨ å®ç°å››ä¸ªå˜é‡ ç”¨é™çº¬å¡è¯ºå›¾</li><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> å¤ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MS-VimåŸºç¡€æ“ä½œ</title>
      <link href="/2024/11/17/Miss-Semester-MS-Vim%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"/>
      <url>/2024/11/17/Miss-Semester-MS-Vim%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<h1 id="åŸºç¡€æ“ä½œ"><a href="#åŸºç¡€æ“ä½œ" class="headerlink" title="åŸºç¡€æ“ä½œ"></a>åŸºç¡€æ“ä½œ</h1><p>Vim æ˜¯<em>åŸºäºæ¨¡å¼</em>çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Normal</span> --&lt; i &gt;--------&gt; <span class="type">Insert</span></span><br><span class="line">       --&lt; <span class="type">R</span> &gt;--------&gt; <span class="type">Replace</span></span><br><span class="line">&lt;esc&gt; &lt;--&lt; <span class="type">V</span> &gt;--------&gt; <span class="type">View</span></span><br><span class="line">       --&lt; <span class="type">Shift</span>-<span class="type">V</span> &gt;--&gt; <span class="type">View</span> <span class="type">Line</span></span><br><span class="line">       --&lt; <span class="type">Ctrl</span>-<span class="type">V</span> &gt;---&gt; <span class="type">View</span> <span class="type">Block</span></span><br><span class="line">       --&lt; : &gt;--------&gt; <span class="type">Command</span> <span class="type">Line</span></span><br></pre></td></tr></table></figure><p>éœ€è¦ç†Ÿæ‚‰è¿™äº›åˆ‡æ¢ï¼Œä¸ç„¶ä½ å°±å¯ä»¥åœ¨ä½ çš„å±å¹•ä¸Šå¾—åˆ°ä¸€ä¸²éšæœºå­—ç¬¦ä¸² ğŸ˜€</p><p>å› ä¸ºä½ ä¼šåœ¨ä½¿ç”¨ Vim æ—¶å¤§é‡ä½¿ç”¨ <code>&lt;ESC&gt;</code> é”®ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘æŠŠå¤§å°å†™é”å®šé”®é‡å®šä¹‰æˆ <code>&lt;ESC&gt;</code> é”®ï¼Œè¿™ä¸ªé€šè¿‡ Vim é‡Œé¢çš„<code>æ˜ å°„</code>æ¥å®Œæˆã€‚</p><h2 id="ç¼“å­˜ï¼Œ-æ ‡ç­¾é¡µï¼Œ-çª—å£"><a href="#ç¼“å­˜ï¼Œ-æ ‡ç­¾é¡µï¼Œ-çª—å£" class="headerlink" title="ç¼“å­˜ï¼Œ æ ‡ç­¾é¡µï¼Œ çª—å£"></a>ç¼“å­˜ï¼Œ æ ‡ç­¾é¡µï¼Œ çª—å£</h2><p>Vim çš„çª—å£ä¸æˆ‘ä»¬ä»¥å‰æ‰€ç”¨çš„ç¼–è¾‘å™¨éƒ½ä¸åŒã€‚</p><p>Vim ä¼šç»´æŠ¤ä¸€ç³»åˆ—æ‰“å¼€çš„æ–‡ä»¶ï¼Œç§°ä¸ºâ€œç¼“å­˜â€ï¼ˆå³ <code>buffer</code>ï¼‰ã€‚ä¸€ä¸ª Vim ä¼šè¯åŒ…å«ä¸€ç³»åˆ—æ ‡ç­¾é¡µï¼ˆå³ <code>tab</code>ï¼‰ï¼Œæ¯ä¸ªæ ‡ç­¾é¡µåŒ…å« ä¸€ç³»åˆ—çª—å£ï¼ˆåˆ†éš”é¢æ¿ <code>window</code>ï¼‰ã€‚æ¯ä¸ªçª—å£æ˜¾ç¤ºä¸€ä¸ªç¼“å­˜ã€‚è·Ÿç½‘é¡µæµè§ˆå™¨ç­‰å…¶ä»–ä½ ç†Ÿæ‚‰çš„ç¨‹åºä¸ä¸€æ ·çš„æ˜¯ï¼Œ ç¼“å­˜å’Œçª—å£ä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼›<strong>çª—å£åªæ˜¯è§†è§’</strong>ã€‚ä¸€ä¸ªç¼“å­˜å¯ä»¥åœ¨<em>å¤šä¸ª</em>çª—å£æ‰“å¼€ï¼Œç”šè‡³åœ¨åŒä¸€ ä¸ªæ ‡ç­¾é¡µå†…çš„å¤šä¸ªçª—å£æ‰“å¼€ã€‚è¿™ä¸ªåŠŸèƒ½å…¶å®å¾ˆå¥½ç”¨ï¼Œæ¯”å¦‚åœ¨æŸ¥çœ‹åŒä¸€ä¸ªæ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†çš„æ—¶å€™ï¼Œ<strong>å³ä½ å¯ä»¥åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µå†…æ‰“å¼€ä¸¤ä¸ªçª—å£ï¼Œä¸€ä¸ªçª—å£çœ‹æ–‡ä»¶å¤´éƒ¨ï¼Œä¸€ä¸ªçœ‹æ–‡ä»¶å°¾éƒ¨çš„å†…å®¹ã€‚</strong>ä½ åœ¨å…¶ä¸­ä¸€ä¸ªçª—å£è¾“å…¥çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªåœ¨åŒä¸€ä¸ª<code>buffer</code>ä¸‹çš„çª—å£å†…å®¹ä¹Ÿä¼šè·Ÿç€æ”¹å˜ã€‚</p><h2 id="å‘½ä»¤è¡Œæ¨¡å¼"><a href="#å‘½ä»¤è¡Œæ¨¡å¼" class="headerlink" title="å‘½ä»¤è¡Œæ¨¡å¼"></a>å‘½ä»¤è¡Œæ¨¡å¼</h2><p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹é”®å…¥ <code>:</code> è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ã€‚ åœ¨é”®å…¥ <code>:</code> åï¼Œä½ çš„å…‰æ ‡ä¼šç«‹å³è·³åˆ°å±å¹•ä¸‹æ–¹çš„å‘½ä»¤è¡Œã€‚ è¿™ä¸ªæ¨¡å¼æœ‰å¾ˆå¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬æ‰“å¼€ï¼Œä¿å­˜ï¼Œå…³é—­æ–‡ä»¶ï¼Œä»¥åŠé€€å‡º Vimã€‚</p><ul><li><p><code>:q</code> é€€å‡ºï¼ˆå…³é—­çª—å£ï¼‰</p></li><li><p><code>:w</code> ä¿å­˜ï¼ˆå†™ï¼‰</p></li><li><p><code>:wq</code> ä¿å­˜ç„¶åé€€å‡º</p></li><li><p><code>:e &#123;æ–‡ä»¶å&#125;</code> æ‰“å¼€è¦ç¼–è¾‘çš„æ–‡ä»¶ï¼ˆé…åˆä¸Šä¸‹é”®é€‰æ‹©å·²ç»æ‰“å¼€çš„ç¼“å­˜ï¼‰</p></li><li><p><code>:ls</code> æ˜¾ç¤ºæ‰“å¼€çš„ç¼“å­˜</p></li><li><p><code>:help &#123;æ ‡é¢˜&#125;</code></p><p>æ‰“å¼€å¸®åŠ©æ–‡æ¡£æ—¶è¦æ³¨æ„åŒºåˆ«ï¼š</p><ul><li><code>:help :w</code> æ‰“å¼€ <code>:w</code> å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£</li><li><code>:help w</code> æ‰“å¼€ <code>w</code> ç§»åŠ¨çš„å¸®åŠ©æ–‡æ¡£</li></ul></li></ul><h1 id="Vim-è®¾è®¡æ€æƒ³"><a href="#Vim-è®¾è®¡æ€æƒ³" class="headerlink" title="Vim è®¾è®¡æ€æƒ³"></a>Vim è®¾è®¡æ€æƒ³</h1><h3 id="ç§»åŠ¨"><a href="#ç§»åŠ¨" class="headerlink" title="ç§»åŠ¨"></a>ç§»åŠ¨</h3><ul><li><p>åŸºæœ¬ç§»åŠ¨: <code>hjkl</code> ï¼ˆå·¦ï¼Œ ä¸‹ï¼Œ ä¸Šï¼Œ å³ï¼‰</p></li><li><p>è¯ï¼š <code>w</code> ï¼ˆä¸‹ä¸€ä¸ªè¯ï¼‰ï¼Œ <code>b</code> ï¼ˆè¯åˆï¼‰ï¼Œ <code>e</code> ï¼ˆè¯å°¾ï¼‰</p></li><li><p>è¡Œï¼š <code>0</code> ï¼ˆè¡Œåˆï¼‰ï¼Œ <code>^</code> ï¼ˆç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ï¼‰ï¼Œ <code>$</code> ï¼ˆè¡Œå°¾ï¼‰</p></li><li><p>å±å¹•ï¼š <code>H</code> ï¼ˆå±å¹•é¦–è¡Œï¼‰ï¼Œ <code>M</code> ï¼ˆå±å¹•ä¸­é—´ï¼‰ï¼Œ <code>L</code> ï¼ˆå±å¹•åº•éƒ¨ï¼‰</p></li><li><p>ç¿»é¡µï¼š <code>Ctrl-u</code> ï¼ˆä¸Šç¿»ï¼‰ï¼Œ <code>Ctrl-d</code> ï¼ˆä¸‹ç¿»ï¼‰</p></li><li><p>æ–‡ä»¶ï¼š <code>gg</code> ï¼ˆæ–‡ä»¶å¤´ï¼‰ï¼Œ <code>G</code> ï¼ˆæ–‡ä»¶å°¾ï¼‰</p></li><li><p>è¡Œæ•°è·³è½¬ï¼š</p><ul><li><code>:&#123;è¡Œæ•°&#125;&lt;CRå›è½¦&gt;</code>ï¼Œè·³è½¬çš„æŒ‡å®šçš„è¡Œ</li><li><code>&#123;è¡Œæ•°&#125;G</code> ï¼Œè·³è½¬åˆ°ä¸‹ n è¡Œ</li></ul></li><li><p>æ‚é¡¹ï¼š <code>%</code> ï¼ˆæ‰¾åˆ°é…å¯¹ï¼Œæ¯”å¦‚æ‹¬å·æˆ–è€… &#x2F;* *&#x2F; ä¹‹ç±»çš„æ³¨é‡Šå¯¹ï¼‰</p></li><li><p>æŸ¥æ‰¾ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f&#123;å­—ç¬¦&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t&#123;å­—ç¬¦&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F&#123;å­—ç¬¦&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">T&#123;å­—ç¬¦&#125;</span><br></pre></td></tr></table></figure><ul><li>æŸ¥æ‰¾&#x2F;åˆ° å‘å‰&#x2F;å‘å åœ¨æœ¬è¡Œçš„<strong>å­—ç¬¦</strong></li><li>å°å†™å‘åæŸ¥æ‰¾ï¼Œå¤§å†™å‘å‰æŸ¥æ‰¾</li><li><code>f</code>æ˜¯å®šä½åˆ°æŸ¥æ‰¾çš„å­—ç¬¦ä¸Šï¼Œ<code>t</code>æ˜¯å®šä½åˆ°æŸ¥æ‰¾çš„å­—ç¬¦å‰ï¼Œå¤§å†™åŒç†</li><li><code>,</code> &#x2F; <code>;</code> ç”¨äºå¯¼èˆªåŒ¹é…</li></ul></li><li><p>æœç´¢: <code>/&#123;æ­£åˆ™è¡¨è¾¾å¼&#125;</code>, æŒ‰ä¸‹<code>enter</code>ç¡®å®šåï¼Œ<code>n</code> &#x2F; <code>N</code> ç”¨äºå¯¼èˆªåŒ¹é…ï¼ˆä¸‹ä¸€ä¸ª&#x2F;ä¸Šä¸€ä¸ªåŒ¹é…é¡¹ï¼‰</p></li></ul><h3 id="é€‰æ‹©"><a href="#é€‰æ‹©" class="headerlink" title="é€‰æ‹©"></a>é€‰æ‹©</h3><p>å³è¿›å…¥å¯è§†åŒ–æ¨¡å¼ï¼š</p><ul><li>å¯è§†åŒ–ï¼š<code>v</code></li><li>å¯è§†åŒ–è¡Œï¼š <code>V</code>ï¼ˆå³ <code>shift-v</code>ï¼‰</li><li>å¯è§†åŒ–å—ï¼š<code>Ctrl+v</code></li></ul><p>å¯ä»¥ç”¨ç§»åŠ¨å‘½ä»¤æ¥é€‰ä¸­ã€‚</p><h3 id="ç¼–è¾‘"><a href="#ç¼–è¾‘" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h3><p>æ‰€æœ‰ä½ éœ€è¦ç”¨é¼ æ ‡åšçš„äº‹ï¼Œ ä½ ç°åœ¨éƒ½å¯ä»¥ç”¨é”®ç›˜ï¼šé‡‡ç”¨ç¼–è¾‘å‘½ä»¤å’Œç§»åŠ¨å‘½ä»¤çš„ç»„åˆæ¥å®Œæˆã€‚ è¿™å°±æ˜¯ Vim çš„ç•Œé¢å¼€å§‹çœ‹èµ·æ¥åƒä¸€ä¸ªç¨‹åºè¯­è¨€çš„æ—¶å€™ã€‚ä¸‹é¢æ˜¯ Vim å¤„äºæ™®é€šæ¨¡å¼ä¸‹çš„ä¸€äº›ç¼–è¾‘å‘½ä»¤ï¼š</p><ul><li><p><code>i</code>è¿›å…¥æ’å…¥æ¨¡å¼</p></li><li><p><code>O</code> &#x2F; <code>o</code> åœ¨ä¹‹ä¸Š&#x2F;ä¹‹ä¸‹æ’å…¥è¡Œå¹¶è¿›å…¥æ’å…¥æ¨¡å¼</p></li><li><p><code>d&#123;ç§»åŠ¨å‘½ä»¤&#125;</code></p><ul><li>ä¾‹å¦‚ï¼Œ<code>dw</code> åˆ é™¤è¯, <code>d$</code> åˆ é™¤åˆ°è¡Œå°¾, <code>d0</code> åˆ é™¤åˆ°è¡Œå¤´ã€‚</li></ul></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c&#123;ç§»åŠ¨å‘½ä»¤&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¾‹å¦‚ï¼Œ<code>cw</code> æ”¹å˜è¯</p></li><li><p>ç›¸å½“äº <code>d&#123;ç§»åŠ¨å‘½ä»¤&#125;</code> å† <code>i</code>ï¼Œ<code>c</code>å‘½ä»¤ä¼šè‡ªåŠ¨è¿›å…¥<code>insert</code>æ¨¡å¼</p></li><li><p><code>x</code> åˆ é™¤å­—ç¬¦ï¼ˆç­‰åŒäº <code>dl</code>ï¼‰</p></li><li><p><code>s</code> æ›¿æ¢å­—ç¬¦ï¼ˆç­‰åŒäº <code>xi</code>ï¼‰</p></li><li><p>å¯è§†åŒ–æ¨¡å¼ + æ“ä½œ</p><ul><li>é€‰ä¸­æ–‡å­—, <code>d</code> åˆ é™¤ æˆ–è€… <code>c</code> æ”¹å˜ï¼Œæˆ–è€… <code>y</code> <code>p</code> å¤åˆ¶ç²˜è´´</li></ul></li><li><p><code>u</code> æ’¤é”€, <code>&lt;C-r&gt;</code> é‡åš</p></li><li><p><code>y</code> å¤åˆ¶ &#x2F; â€œyankâ€ ï¼ˆå…¶ä»–ä¸€äº›å‘½ä»¤æ¯”å¦‚ <code>d</code> ä¹Ÿä¼šå¤åˆ¶ï¼Œç›¸å½“äºå‰ªåˆ‡ï¼‰</p></li><li><p><code>p</code> ç²˜è´´ &#x2F; â€œpasteâ€</p></li><li><p>æ›´å¤šå€¼å¾—å­¦ä¹ çš„: æ¯”å¦‚ <code>~</code> æ”¹å˜å­—ç¬¦çš„å¤§å°å†™ï¼Œçœ‹è€å¸ˆæ¼”ç¤ºæ—¶æŒºéš¾èšŒçš„</p></li></ul><h3 id="è®¡æ•°"><a href="#è®¡æ•°" class="headerlink" title="è®¡æ•°"></a>è®¡æ•°</h3><p>ä½ å¯ä»¥ç”¨ä¸€ä¸ªè®¡æ•°æ¥ç»“åˆâ€œåè¯â€å’Œâ€œåŠ¨è¯â€ï¼Œè¿™ä¼šæ‰§è¡ŒæŒ‡å®šæ“ä½œè‹¥å¹²æ¬¡ã€‚</p><ul><li><code>3w</code> å‘å‰ç§»åŠ¨ä¸‰ä¸ªè¯</li><li><code>5j</code> å‘ä¸‹ç§»åŠ¨ 5 è¡Œ</li><li><code>7dw</code> åˆ é™¤ 7 ä¸ªè¯</li></ul><h3 id="ä¿®é¥°è¯­"><a href="#ä¿®é¥°è¯­" class="headerlink" title="ä¿®é¥°è¯­"></a>ä¿®é¥°è¯­</h3><p>ä½ å¯ä»¥ç”¨ä¿®é¥°è¯­æ”¹å˜â€œåè¯â€çš„æ„ä¹‰ã€‚ä¿®é¥°è¯­æœ‰ <code>i</code>ï¼Œè¡¨ç¤ºâ€œå†…éƒ¨â€æˆ–è€…â€œåœ¨å†…â€œï¼Œå’Œ <code>a</code>ï¼Œ è¡¨ç¤ºâ€å‘¨å›´â€œã€‚</p><ul><li><code>i</code>ä¸åŒ…å«é…å¯¹ç¬¦ï¼Œ<code>a</code>åˆ™åŒ…å«</li><li><code>ci(</code> æ”¹å˜å½“å‰æ‹¬å·å†…çš„å†…å®¹</li><li><code>ci[</code> æ”¹å˜å½“å‰æ–¹æ‹¬å·å†…çš„å†…å®¹</li><li><code>da&#39;</code> åˆ é™¤ä¸€ä¸ªå•å¼•å·å­—ç¬¦ä¸²ï¼Œ åŒ…æ‹¬å‘¨å›´çš„å•å¼•å·</li></ul><h2 id="æ¼”ç¤ºä¾‹å­"><a href="#æ¼”ç¤ºä¾‹å­" class="headerlink" title="æ¼”ç¤ºä¾‹å­"></a>æ¼”ç¤ºä¾‹å­</h2><p>è¿™é‡Œæ˜¯ä¸€ä¸ªæœ‰é—®é¢˜çš„ <a href="https://en.wikipedia.org/wiki/Fizz_buzz">fizz buzz</a> å®ç°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fizz_buzz</span>(<span class="params">limit</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(limit):</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">3</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;fizz&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">5</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;fizz&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> i % <span class="number">3</span> <span class="keyword">and</span> i % <span class="number">5</span>:</span><br><span class="line">            <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    fizz_buzz(<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¼šä¿®å¤ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>ä¸»å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨</li><li>ä» 0 è€Œä¸æ˜¯ 1 å¼€å§‹</li><li>åœ¨ 15 çš„æ•´æ•°å€çš„æ—¶å€™åœ¨ä¸ç”¨è¡Œæ‰“å° â€œfizzâ€ å’Œ â€œbuzzâ€</li><li>åœ¨ 5 çš„æ•´æ•°å€çš„æ—¶å€™æ‰“å° â€œfizzâ€</li><li>é‡‡ç”¨ç¡¬ç¼–ç çš„å‚æ•° 10 è€Œä¸æ˜¯ä»å‘½ä»¤æ§åˆ¶è¡Œè¯»å–å‚æ•°</li><li>ä¸»å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨<ul><li><code>G</code> æ–‡ä»¶å°¾</li><li><code>o</code> å‘ä¸‹æ‰“å¼€ä¸€ä¸ªæ–°è¡Œ</li><li>è¾“å…¥ â€œif <strong>name</strong> â€¦â€</li></ul></li><li>ä» 0 è€Œä¸æ˜¯ 1 å¼€å§‹<ul><li>æœç´¢ <code>/range</code></li><li><code>ww</code> å‘å‰ç§»åŠ¨ä¸¤ä¸ªè¯</li><li><code>i</code> æ’å…¥æ–‡å­—ï¼Œ â€œ1, â€œ</li><li><code>ea</code> åœ¨ limit åæ’å…¥ï¼Œ â€œ+1â€</li></ul></li><li>åœ¨æ–°çš„ä¸€è¡Œ â€œfizzbuzzâ€<ul><li><code>jj$i</code> æ’å…¥æ–‡å­—åˆ°è¡Œå°¾</li><li>åŠ å…¥ â€œ, end&#x3D;â€™â€™â€</li><li><code>jj.</code> <strong>é‡å¤ç¬¬äºŒä¸ªæ‰“å°</strong></li><li><code>jjo</code> åœ¨ if æ‰“å¼€ä¸€è¡Œ</li><li>åŠ å…¥ â€œelse: print()â€</li></ul></li><li>fizz fizz<ul><li><code>ci&#39;</code> å˜åˆ° fizz</li></ul></li><li>å‘½ä»¤æ§åˆ¶è¡Œå‚æ•°<ul><li><code>ggO</code> å‘ä¸Šæ‰“å¼€</li><li>â€œimport sysâ€</li><li><code>/10</code></li><li><code>ci(</code> to â€œint(sys.argv[1])â€</li></ul></li></ul><h1 id="Vim-å­¦ä¹ å°ç»“"><a href="#Vim-å­¦ä¹ å°ç»“" class="headerlink" title="Vim å­¦ä¹ å°ç»“"></a>Vim å­¦ä¹ å°ç»“</h1><h2 id="ç¬¬ä¸€è®²å°ç»“"><a href="#ç¬¬ä¸€è®²å°ç»“" class="headerlink" title="ç¬¬ä¸€è®²å°ç»“"></a>ç¬¬ä¸€è®²å°ç»“</h2><ul><li><p><strong>å…‰æ ‡ç§»åŠ¨</strong><br>ä½¿ç”¨ <code>hjkl</code> å­—æ¯é”®ï¼š</p><ul><li><code>h</code> (å·¦ç§»)</li><li><code>j</code> (ä¸‹è¡Œ)</li><li><code>k</code> (ä¸Šè¡Œ)</li><li><code>l</code> (å³ç§»)</li></ul></li><li><p><strong>è¿›å…¥ Vim ç¼–è¾‘å™¨</strong><br>è¾“å…¥ï¼š<code>vim æ–‡ä»¶å &lt;å›è½¦&gt;</code></p></li><li><p><strong>é€€å‡º Vim ç¼–è¾‘å™¨</strong></p><ul><li>æ”¾å¼ƒæ”¹åŠ¨ï¼š<code>&lt;ESC&gt; :q! &lt;å›è½¦&gt;</code></li><li>ä¿å­˜æ”¹åŠ¨ï¼š<code>&lt;ESC&gt; :wq &lt;å›è½¦&gt;</code></li></ul></li><li><p><strong>åˆ é™¤å…‰æ ‡æ‰€åœ¨å­—ç¬¦</strong><br>æŒ‰é”®ï¼š<code>x</code></p></li><li><p><strong>æ’å…¥&#x2F;æ·»åŠ æ–‡æœ¬</strong></p><ul><li><code>i</code>ï¼šå…‰æ ‡å‰æ’å…¥æ–‡æœ¬ï¼ŒæŒ‰ <code>&lt;ESC&gt;</code> é€€å‡º</li><li><code>A</code>ï¼šåœ¨ä¸€è¡Œæœ«å°¾æ·»åŠ æ–‡æœ¬ï¼ŒæŒ‰ <code>&lt;ESC&gt;</code> é€€å‡º</li></ul></li><li><p><strong>ç‰¹åˆ«æç¤º</strong><br>æŒ‰ <code>&lt;ESC&gt;</code> é”®å¯è¿”å›æ­£å¸¸æ¨¡å¼æˆ–å–æ¶ˆä¸å®Œæ•´å‘½ä»¤ã€‚</p></li></ul><hr><h2 id="ç¬¬äºŒè®²å°ç»“"><a href="#ç¬¬äºŒè®²å°ç»“" class="headerlink" title="ç¬¬äºŒè®²å°ç»“"></a>ç¬¬äºŒè®²å°ç»“</h2><ul><li><p><strong>åˆ é™¤å‘½ä»¤</strong></p><ul><li>åˆ é™¤è‡³ä¸‹ä¸€ä¸ªå•è¯ï¼š<code>dw</code></li><li>åˆ é™¤è‡³è¡Œæœ«ï¼š<code>d$</code></li><li>åˆ é™¤æ•´è¡Œï¼š<code>dd</code></li></ul></li><li><p><strong>é‡å¤åŠ¨ä½œ</strong><br>åœ¨å‘½ä»¤å‰åŠ æ•°å­—ï¼š<code>2w</code></p></li><li><p><strong>å‘½ä»¤æ ¼å¼</strong><br><code>operator [number] motion</code></p><ul><li><code>operator</code>ï¼šæ“ä½œç¬¦ï¼ˆå¦‚ <code>d</code> ä»£è¡¨åˆ é™¤ï¼‰</li><li><code>[number]</code>ï¼šé‡å¤æ¬¡æ•°</li><li><code>motion</code>ï¼šç§»åŠ¨æ–¹å¼ï¼ˆå¦‚ <code>w</code> ä»£è¡¨å•è¯ï¼Œ<code>$</code> ä»£è¡¨è¡Œæœ«ï¼‰</li></ul></li><li><p><strong>å…¶ä»–å‘½ä»¤</strong></p><ul><li>ç§»åŠ¨è‡³è¡Œé¦–ï¼š<code>0</code></li><li>æ’¤é”€ï¼š<code>u</code></li><li>æ’¤é”€æ•´è¡Œæ”¹åŠ¨ï¼š<code>U</code></li><li>æ¢å¤æ’¤é”€ï¼š<code>CTRL-R</code></li></ul></li></ul><hr><h2 id="ç¬¬ä¸‰è®²å°ç»“"><a href="#ç¬¬ä¸‰è®²å°ç»“" class="headerlink" title="ç¬¬ä¸‰è®²å°ç»“"></a>ç¬¬ä¸‰è®²å°ç»“</h2><ul><li><p><strong>ç½®å…¥å·²åˆ é™¤æ–‡æœ¬</strong><br>æŒ‰ <code>p</code> å°†åˆ é™¤å†…å®¹ç½®äºå…‰æ ‡åã€‚åˆ é™¤æ•´è¡Œæ—¶ç½®äºä¸‹ä¸€è¡Œã€‚</p></li><li><p><strong>å­—ç¬¦æ›¿æ¢</strong><br>è¾“å…¥ï¼š<code>r æ–°å­—ç¬¦</code></p></li><li><p><strong>æ›´æ”¹å‘½ä»¤</strong></p><ul><li>æ›¿æ¢è‡³å•è¯æœ«å°¾ï¼š<code>ce</code></li><li>æ›¿æ¢è‡³è¡Œæœ«ï¼š<code>c$</code><br>æ ¼å¼ï¼š<code>c [number] motion</code></li></ul></li></ul><hr><h2 id="ç¬¬å››è®²å°ç»“"><a href="#ç¬¬å››è®²å°ç»“" class="headerlink" title="ç¬¬å››è®²å°ç»“"></a>ç¬¬å››è®²å°ç»“</h2><ul><li><p><strong>è·³è½¬å‘½ä»¤</strong></p><ul><li>æ˜¾ç¤ºæ–‡ä»¶çŠ¶æ€ï¼š<code>CTRL-G</code></li><li>è·³è‡³æ–‡ä»¶æœ«å°¾ï¼š<code>G</code></li><li>è·³è‡³æŒ‡å®šè¡Œï¼š<code>è¡Œå·G</code></li><li>è·³è‡³æ–‡ä»¶å¼€å¤´ï¼š<code>gg</code></li></ul></li><li><p><strong>æŸ¥æ‰¾å‘½ä»¤</strong></p><ul><li>æ­£å‘æŸ¥æ‰¾ï¼š<code>/å­—ç¬¦ä¸²</code></li><li>åå‘æŸ¥æ‰¾ï¼š<code>?å­—ç¬¦ä¸²</code></li><li>æŸ¥æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…ï¼š<code>n</code></li><li>åå‘æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼š<code>N</code></li></ul></li><li><p><strong>è·³è½¬å›æ—§ä½ç½®</strong></p><ul><li>è¾ƒæ—§ä½ç½®ï¼š<code>CTRL-O</code></li><li>è¾ƒæ–°ä½ç½®ï¼š<code>CTRL-I</code></li></ul></li><li><p><strong>æ‹¬å·é…å¯¹è·³è½¬</strong><br>æŒ‰ <code>%</code></p></li><li><p><strong>æ›¿æ¢å‘½ä»¤</strong></p><ul><li>æ›¿æ¢å½“å‰è¡Œé¦–ä¸ªï¼š<code>:s/old/new</code></li><li>æ›¿æ¢å½“å‰è¡Œæ‰€æœ‰ï¼š<code>:s/old/new/g</code></li><li>æ›¿æ¢ä¸¤è¡Œé—´æ‰€æœ‰ï¼š<code>:#,#s/old/new/g</code></li><li>å…¨æ–‡æ›¿æ¢ï¼š<code>:%s/old/new/g</code></li><li>å…¨æ–‡æ›¿æ¢å¹¶ç¡®è®¤ï¼š<code>:%s/old/new/gc</code></li></ul></li></ul><hr><h2 id="ç¬¬äº”è®²å°ç»“"><a href="#ç¬¬äº”è®²å°ç»“" class="headerlink" title="ç¬¬äº”è®²å°ç»“"></a>ç¬¬äº”è®²å°ç»“</h2><ul><li><p><strong>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤</strong><br><code>:!command</code></p></li><li><p><strong>ä¿å­˜æ–‡ä»¶</strong></p><ul><li>ä¿å­˜ä¸ºæ–°æ–‡ä»¶ï¼š<code>:w FILENAME</code></li><li>å¯è§†æ¨¡å¼ä¿å­˜ï¼š<code>v motion :w FILENAME</code></li></ul></li><li><p><strong>æ’å…¥æ–‡ä»¶å†…å®¹</strong></p><ul><li>ä»ç£ç›˜æ’å…¥ï¼š<code>:r FILENAME</code></li><li>æ’å…¥å‘½ä»¤è¾“å‡ºï¼š<code>:r !dir</code></li></ul></li></ul><hr><h2 id="ç¬¬å…­è®²å°ç»“"><a href="#ç¬¬å…­è®²å°ç»“" class="headerlink" title="ç¬¬å…­è®²å°ç»“"></a>ç¬¬å…­è®²å°ç»“</h2><ul><li><p><strong>æ’å…¥&#x2F;æ·»åŠ æ–‡æœ¬</strong></p><ul><li>åœ¨ä¸‹æ–¹æ’å…¥æ–°è¡Œï¼š<code>o</code></li><li>åœ¨ä¸Šæ–¹æ’å…¥æ–°è¡Œï¼š<code>O</code></li><li>å…‰æ ‡åæ’å…¥ï¼š<code>a</code></li><li>è¡Œæœ«åæ’å…¥ï¼š<code>A</code></li></ul></li><li><p><strong>ç§»åŠ¨å…‰æ ‡</strong><br>åˆ°å•è¯æœ«å°¾ï¼š<code>e</code></p></li><li><p><strong>å¤åˆ¶&#x2F;ç²˜è´´æ–‡æœ¬</strong></p><ul><li>å¤åˆ¶ï¼š<code>y</code></li><li>ç²˜è´´ï¼š<code>p</code></li></ul></li><li><p><strong>æ›¿æ¢æ¨¡å¼</strong><br>è¾“å…¥ <code>R</code> æŒç»­æ›¿æ¢ï¼ŒæŒ‰ <code>&lt;ESC&gt;</code> é€€å‡ºã€‚</p></li><li><p><strong>è®¾ç½®é€‰é¡¹</strong></p><ul><li>å¿½ç•¥å¤§å°å†™ï¼š<code>:set ic</code></li><li>æœç´¢æ—¶é«˜äº®æ˜¾ç¤ºï¼š<code>:set hls</code></li><li>å…³é—­é€‰é¡¹ï¼š<code>:set noic</code></li></ul></li></ul><hr><h2 id="ç¬¬ä¸ƒè®²å°ç»“"><a href="#ç¬¬ä¸ƒè®²å°ç»“" class="headerlink" title="ç¬¬ä¸ƒè®²å°ç»“"></a>ç¬¬ä¸ƒè®²å°ç»“</h2><ul><li><p><strong>å¸®åŠ©å‘½ä»¤</strong></p><ul><li>æ‰“å¼€å¸®åŠ©ï¼š<code>:help</code></li><li>æŸ¥çœ‹ç‰¹å®šå‘½ä»¤å¸®åŠ©ï¼š<code>:help cmd</code></li><li>å…³é—­å¸®åŠ©çª—å£ï¼š<code>:q</code></li></ul></li><li><p><strong>çª—å£æ“ä½œ</strong><br>çª—å£é—´è·³è½¬ï¼š<code>CTRL-W</code></p></li><li><p><strong>è¡¥å…¨å‘½ä»¤</strong></p><ul><li>æŸ¥çœ‹è¡¥å…¨ï¼šæŒ‰ <code>CTRL-D</code></li><li>ä½¿ç”¨è¡¥å…¨ï¼šæŒ‰ <code>&lt;TAB&gt;</code></li></ul></li><li><p><strong>é…ç½®å¯åŠ¨æ–‡ä»¶</strong><br>å¯åˆ›å»º <code>vimrc</code> è„šæœ¬ä¿å­˜åå¥½è®¾ç½®ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> Missing-Semester </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Missing-Semester </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu-oh-My-Zshé…ç½®</title>
      <link href="/2024/11/15/Miss-Semester-MS-ohMyZsh%E9%85%8D%E7%BD%AE/"/>
      <url>/2024/11/15/Miss-Semester-MS-ohMyZsh%E9%85%8D%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>è¿™æ˜¯é…ç½®çš„æœ€ç»ˆæ•ˆæœ:</p><p><img src="/2024/11/15/Miss-Semester-MS-ohMyZsh%E9%85%8D%E7%BD%AE/image-20241115185553613.png" alt="image-20241115185553613"></p><h1 id="å®‰è£…Oh-My-Zsh"><a href="#å®‰è£…Oh-My-Zsh" class="headerlink" title="å®‰è£…Oh My Zsh"></a>å®‰è£…Oh My Zsh</h1><h2 id="ç¬¬ä¸€æ­¥ï¼šå®‰è£…Zsh"><a href="#ç¬¬ä¸€æ­¥ï¼šå®‰è£…Zsh" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå®‰è£…Zsh"></a>ç¬¬ä¸€æ­¥ï¼šå®‰è£…Zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… Zsh</span></span><br><span class="line">sudo apt install zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† Zsh è®¾ç½®ä¸ºé»˜è®¤ Shell</span></span><br><span class="line">chsh -s /bin/zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¯†ç æ–‡ä»¶</span></span><br><span class="line">sudo vim /etc/passwd</span><br></pre></td></tr></table></figure><p>æŠŠç¬¬ä¸€è¡Œçš„&#x2F;bin&#x2F;bashæ”¹æˆ&#x2F;bin&#x2F;zshï¼Œè¿™ä¸ªæ˜¯rootç”¨æˆ·çš„ã€‚</p><h2 id="ç¬¬äºŒæ­¥-å®‰è£…Oh-My-Zsh"><a href="#ç¬¬äºŒæ­¥-å®‰è£…Oh-My-Zsh" class="headerlink" title="ç¬¬äºŒæ­¥ å®‰è£…Oh My Zsh"></a>ç¬¬äºŒæ­¥ å®‰è£…Oh My Zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£… Oh My Zsh</span></span><br><span class="line">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span><br><span class="line"><span class="comment"># ä»¥ä¸Šå‘½ä»¤å¯èƒ½ä¸å¥½ä½¿ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹ä¸¤æ¡å‘½ä»¤</span></span><br><span class="line">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh</span><br><span class="line">bash ./install.sh</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…å­—ä½“"><a href="#å®‰è£…å­—ä½“" class="headerlink" title="å®‰è£…å­—ä½“"></a>å®‰è£…å­—ä½“</h1><h2 id="å®‰è£…å­—ä½“ä¾èµ–"><a href="#å®‰è£…å­—ä½“ä¾èµ–" class="headerlink" title="å®‰è£…å­—ä½“ä¾èµ–"></a>å®‰è£…å­—ä½“ä¾èµ–</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ttf-mscorefonts-installer</span><br><span class="line">sudo apt-get install fontconfig</span><br></pre></td></tr></table></figure><blockquote><p>å®‰è£…è¿‡ç¨‹æ—¶ï¼Œåœåœ¨â€œæ­£åœ¨è®¾å®šttf-mscorefonts-installerâ€çš„æ—¶å€™ æŒ‰<code>Tap</code>ç„¶å<code>Enter</code>å°±å¥½äº†</p></blockquote><h2 id="ä¸‹è½½Nerd-Fontså­—ä½“"><a href="#ä¸‹è½½Nerd-Fontså­—ä½“" class="headerlink" title="ä¸‹è½½Nerd-Fontså­—ä½“"></a>ä¸‹è½½<a href="https://github.com/ryanoasis/nerd-fonts/releases">Nerd-Fonts</a>å­—ä½“</h2><p>ç›´æ¥ç”¨<code>wget</code>å‘½ä»¤ä¸‹è½½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/ryanoasis/nerd-fonts/releases/download/v3.0.2/FiraCode.zip</span><br></pre></td></tr></table></figure><h2 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p ~/.local/share/fonts <span class="comment">#åœ¨ç”¨æˆ·æœ¬åœ°å­—ä½“</span></span><br></pre></td></tr></table></figure><h2 id="åˆ·æ–°å­—ä½“ç¼“å­˜"><a href="#åˆ·æ–°å­—ä½“ç¼“å­˜" class="headerlink" title="åˆ·æ–°å­—ä½“ç¼“å­˜"></a>åˆ·æ–°å­—ä½“ç¼“å­˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fc-cache -fv</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®ç»ˆç«¯å­—ä½“"><a href="#è®¾ç½®ç»ˆç«¯å­—ä½“" class="headerlink" title="è®¾ç½®ç»ˆç«¯å­—ä½“"></a>è®¾ç½®ç»ˆç«¯å­—ä½“</h2><p>æ‰“å¼€ <strong>Preferences -&gt; Text -&gt; Font</strong>ï¼Œé€‰æ‹© <code>Fira Code Nerd Font</code></p><h1 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><h2 id="zsh-autosuggestions"><a href="#zsh-autosuggestions" class="headerlink" title="zsh-autosuggestions"></a><a href="https://github.com/zsh-users/zsh-autosuggestions">zsh-autosuggestions</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span><br></pre></td></tr></table></figure><h2 id="zsh-syntax-highlighting"><a href="#zsh-syntax-highlighting" class="headerlink" title="zsh-syntax-highlighting:"></a><a href="https://github.com/zsh-users/zsh-syntax-highlighting">zsh-syntax-highlighting:</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-syntax-highlighting</span><br></pre></td></tr></table></figure><h1 id="å®‰è£…colorls"><a href="#å®‰è£…colorls" class="headerlink" title="å®‰è£…colorls"></a>å®‰è£…colorls</h1><p><code>colorls</code> æ˜¯ä¸€ä¸ª Ruby Gemï¼Œå¯ä»¥è®©ä½ åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨å½©è‰²æ–‡ä»¶åˆ—è¡¨æ˜¾ç¤ºï¼Œé€šå¸¸å¯ä»¥å’Œ <code>ls</code> å‘½ä»¤é…åˆä½¿ç”¨ï¼Œæå‡æ–‡ä»¶æ˜¾ç¤ºçš„å¯è¯»æ€§ã€‚</p><h2 id="å®‰è£…ruby"><a href="#å®‰è£…ruby" class="headerlink" title="å®‰è£…ruby"></a>å®‰è£…ruby</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install ruby-full</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…colorls-1"><a href="#å®‰è£…colorls-1" class="headerlink" title="å®‰è£…colorls"></a>å®‰è£…colorls</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install colorls</span><br></pre></td></tr></table></figure><h1 id="æœ€ç»ˆæ­¥éª¤-é…ç½®zshæ–‡ä»¶"><a href="#æœ€ç»ˆæ­¥éª¤-é…ç½®zshæ–‡ä»¶" class="headerlink" title="æœ€ç»ˆæ­¥éª¤-é…ç½®zshæ–‡ä»¶"></a>æœ€ç»ˆæ­¥éª¤-é…ç½®zshæ–‡ä»¶</h1><h2 id="æ‰“å¼€é…ç½®æ–‡ä»¶"><a href="#æ‰“å¼€é…ç½®æ–‡ä»¶" class="headerlink" title="æ‰“å¼€é…ç½®æ–‡ä»¶"></a>æ‰“å¼€é…ç½®æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="æ ¹æ®ä¸‹é¢æ›´æ”¹"><a href="#æ ¹æ®ä¸‹é¢æ›´æ”¹" class="headerlink" title="æ ¹æ®ä¸‹é¢æ›´æ”¹"></a>æ ¹æ®ä¸‹é¢æ›´æ”¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Path to your Oh My Zsh installation. </span></span><br><span class="line">  </span><br><span class="line"><span class="built_in">export</span> XDG_DATA_DIRS=<span class="string">&#x27;/var/lib/flatpak/exports/share:/home/zrx/.local/share/flatpak/exports/share&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ZSH=<span class="string">&quot;<span class="variable">$HOME</span>/.oh-my-zsh&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å­—ä½“æ¨¡å¼ä»¥åŠé…ç½®å‘½ä»¤è¡Œçš„ä¸»é¢˜</span></span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(<span class="built_in">dir</span> vcs newline os_icon )</span><br><span class="line"></span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status virtualenv time)</span><br><span class="line"></span><br><span class="line">POWERLEVEL9K_PROMPT_ADD_NEWLINE=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">POWERLEVEL9K_HIDE_BRANCH_ICON=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">POWERLEVEL9K_OS_ICON_BACKGROUND=<span class="string">&#x27;131&#x27;</span> </span><br><span class="line">POWERLEVEL9K_MODE=<span class="string">&#x27;nerdfont-complete&#x27;</span></span><br><span class="line">ZSH_THEME=<span class="string">&quot;powerlevel9k/powerlevel9k&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># å¯åŠ¨é”™è¯¯å‘½ä»¤è‡ªåŠ¨æ›´æ­£</span></span><br><span class="line">ENABLE_CORRECTION=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨å‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨å°çº¢ç‚¹è¿›è¡Œæç¤º</span></span><br><span class="line">COMPLETION_WAITING_DOTS=<span class="string">&quot;true&quot;</span></span><br><span class="line"></span><br><span class="line">plugins=(</span><br><span class="line">git</span><br><span class="line">zsh-autosuggestions </span><br><span class="line">zsh-syntax-highlighting</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">source</span> <span class="variable">$ZSH</span>/oh-my-zsh.sh</span><br><span class="line"></span><br><span class="line"><span class="built_in">alias</span> <span class="built_in">ls</span>=<span class="string">&#x27;colorls&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿é…ç½®ç”Ÿæ•ˆ"><a href="#ä½¿é…ç½®ç”Ÿæ•ˆ" class="headerlink" title="ä½¿é…ç½®ç”Ÿæ•ˆ"></a>ä½¿é…ç½®ç”Ÿæ•ˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Missing-Semester </category>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Missing-Semester </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‰ç«¯æ ˆå­¦ä¹ (ä¸€)-åˆè¯†HTMLã€CSSã€JSä¸‰å¤§ä»¶</title>
      <link href="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/"/>
      <url>/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸‰å¤§ä»¶åŒºåˆ«"><a href="#ä¸‰å¤§ä»¶åŒºåˆ«" class="headerlink" title="ä¸‰å¤§ä»¶åŒºåˆ«"></a>ä¸‰å¤§ä»¶åŒºåˆ«</h1><p><strong>HTML è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</strong>ï¼ˆè‹±è¯­ï¼š<strong>H</strong>yper<strong>T</strong>ext <strong>M</strong>arkup <strong>L</strong>anguageï¼Œç®€ç§°ï¼š<strong>HTML</strong>ï¼‰</p><p><strong>CSS å±‚å æ ·å¼è¡¨</strong>ï¼ˆè‹±è¯­ï¼š<strong>C</strong>ascading <strong>S</strong>tyle <strong>S</strong>heetsï¼Œç¼©å†™ï¼š<strong>CSS</strong>ï¼›åˆç§°<strong>ä¸²æ ·å¼åˆ—è¡¨</strong>ã€<strong>çº§è”</strong> <strong>æ ·å¼è¡¨</strong>ã€<strong>ä¸²æ¥æ ·å¼è¡¨</strong>ã€<strong>é˜¶å±‚å¼æ ·å¼è¡¨</strong>ï¼‰</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/AGV_vUd9FmXSexTyIJ_uX7HgHvuqIiqx0BSwTGYH93DJpprRG3wf_-D2AnXgqH2y5oKVqxeWHdUWjWrvVexAvln1CUjc-7OJtq94s09MciQDQSNTpOWiFWprbONIjduwpI-rOzLPCTP3qje7fCip4r3G_fzU3KEx__8=nw.png" alt="img"></p><p>å¯¹äºè¿™ä¸ªç½‘é¡µ</p><ul><li>è‹¥åªæœ‰ HTML</li></ul><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/AGV_vUcsGGQbWawgS7RxolXNchK_5LfDlyO5OF3TZ_Ty4cF4oP7YhrkAE2Hw7_rGl_WkMe1dg_YTsrBJc7VmQC-uyRBq14cGGJNhg7n7zoeb3_bOskAyz_aLI3mR18GdbFcPlTvkYtTUjwqOFH2RY6e9P1FMYPS_SaHj=nw.gif" alt="img"></p><ul><li>è‹¥åŠ ä¸Šäº† CSS</li></ul><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/AGV_vUdY_WKW-Mmt29NfGC2GVcS7sz00a4PJTq4BkGmxA7zF8R6G8yaeDVfQXITF2aItW_qieOgrEj4mX1qqPdRweBz-iEY77Yv2Xbu1CvJ_8UqpcUBQfnqnKDf7KOZgMVKfHZtLavkZOKZjUwrpmJSGKxQYMzbqW2ts=nw.gif" alt="img"></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/AGV_vUfScqvhrtwcEZedD9vhbk4w8hjaKfLcLbaAR7NOd8q2IOPtMtLmAV93dhJ326N5fXKbSk3vVhk8IbYoT59avjHCZJNJqAnN4i_7ihvyWgl0WzkN3z9-CHbs2sZFFa2Z1lLbHLDlIIiNpYlhaoNb2RIBY8XmRwE=nw.png" alt="img"></p><p>å¯ä»¥è¯´ HTML å°±æ˜¯é¡µé¢çš„éª¨æ¶ï¼ŒCSS æ˜¯çš®è‚¤ï¼ŒJS å°±æ˜¯èƒ½è®©ç”¨æˆ·å’Œé¡µé¢äº’åŠ¨çš„ç¥ç»ç½‘ç»œ</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/cd56e9d81730f5e40b37dd7f26642465.fd9f78ff6a7b98b9198c84acbf7b975f.gif" alt="cd56e9d81730f5e40b37dd7f26642465.fd9f78ff6a7b98b9198c84acbf7b975f"></p><h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>HTML å¯ä»¥è¯´æ˜¯ä¸€ä¸ªä¸ªåµŒå¥—çš„å°ç›’å­ï¼Œå°±åƒä¸‹å›¾è¿™æ ·ä¸€å±‚ä¸€å±‚åµŒå¥—ä¸‹å»ã€‚</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101010811404.png" alt="image-20241101010811404"></p><p>ä¸¾ä¸ªåŸºç¡€çš„ä»£ç ä¾‹å­</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101010854274.png" alt="image-20241101010854274"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åµŒå¥—äº†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è€Œ<code>head</code>å’Œ<code>body</code>å†…éƒ¨åˆåµŒå¥—äº†ä¸€äº›å…ƒç´ </p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011236637.png" alt="image-20241101011236637"></p><h2 id="åŸºç¡€-HTML-æ ‡ç­¾"><a href="#åŸºç¡€-HTML-æ ‡ç­¾" class="headerlink" title="åŸºç¡€ HTML æ ‡ç­¾"></a>åŸºç¡€ HTML æ ‡ç­¾</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011538967.png" alt="image-20241101011538967"></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011930852.png" alt="image-20241101011930852"></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011942577.png" alt="image-20241101011942577"></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20231219154503075.png" alt="image-20231219154503075"></p><h2 id="HTML-å±æ€§"><a href="#HTML-å±æ€§" class="headerlink" title="HTML å±æ€§"></a>HTML å±æ€§</h2><p>æœ‰äº›æ ‡ç­¾ä¼šæºå¸¦å±æ€§ï¼Œå¦‚ä¸‹å›¾</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011704261.png" alt="image-20241101011704261"></p><p>å®ä¾‹æ ‡ç­¾æœ‰:</p><ul><li><h3 id><a href="#" class="headerlink" title="&lt;a&gt;"></a><code>&lt;a&gt;</code></h3><ul><li><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011740438.png" alt="image-20241101011740438"></li><li><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011753892.png" alt="image-20241101011753892"></li></ul></li><li><h3 id="-1"><a href="#-1" class="headerlink" title="&lt;img&gt;"></a><code>&lt;img&gt;</code></h3><ul><li><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011816421.png" alt="image-20241101011816421"></li></ul></li></ul><blockquote><p><code>&lt;img&gt;</code>æ˜¯è‡ªé—­æ ‡ç­¾ï¼Œè€Œä¸”ç…§ç‰‡çš„ä½ç½®è‹¥ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œåˆ™ä¸ºç›¸å¯¹ä½ç½®</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101011856504.png" alt="image-20241101011856504"></p></blockquote><h2 id="div-span"><a href="#div-span" class="headerlink" title="div &amp; span"></a>div &amp; span</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125163139825.png" alt="image-20241125163139825"></p><h3 id="å…ƒç´ "><a href="#å…ƒç´ " class="headerlink" title="&lt;div&gt; å…ƒç´ "></a><strong><code>&lt;div&gt;</code> å…ƒç´ </strong></h3><ol><li><p><strong>å®šä¹‰ï¼š</strong></p><ul><li><code>&lt;div&gt;</code> æ˜¯å—çº§å…ƒç´ ï¼ˆblock-level elementï¼‰ï¼Œè¡¨ç¤ºæ–‡æ¡£ä¸­çš„ä¸€ä¸ªå—ã€‚</li><li>ç”¨äºå°†å†…å®¹åˆ†ç»„ï¼Œå¹¶é€šå¸¸ç”¨äºå¸ƒå±€å’Œæ ·å¼ç›®çš„ã€‚</li></ul></li><li><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>ç‹¬å ä¸€è¡Œï¼Œå æ®çˆ¶å®¹å™¨çš„å…¨éƒ¨å®½åº¦ã€‚</li><li>å¯åŒ…å«æ®µè½ã€æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ç­‰å—çº§å…ƒç´ æˆ–è¡Œå†…å…ƒç´ ã€‚</li><li>é»˜è®¤æ²¡æœ‰ä»»ä½•æ ·å¼æˆ–ç‰¹æ®Šå«ä¹‰ï¼Œé€šå¸¸éœ€è¦é€šè¿‡ CSS æ¥æ·»åŠ æ ·å¼ã€‚</li></ul></li><li><p><strong>å¸¸è§åº”ç”¨ï¼š</strong></p><ul><li>ä½œä¸ºå¸ƒå±€çš„å®¹å™¨ã€‚</li><li>åŒ…è£¹ä¸€ç»„å†…å®¹è¿›è¡Œæ ·å¼åŒ–ã€‚</li></ul></li><li><p><strong>ä¾‹å­ï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="å…ƒç´ -1"><a href="#å…ƒç´ -1" class="headerlink" title="&lt;span&gt; å…ƒç´ "></a><strong><code>&lt;span&gt;</code> å…ƒç´ </strong></h3><ol><li><p><strong>å®šä¹‰ï¼š</strong></p><ul><li><code>&lt;span&gt;</code> æ˜¯è¡Œå†…å…ƒç´ ï¼ˆinline elementï¼‰ï¼Œç”¨äºåŒ…è£¹æ–‡æ¡£ä¸­çš„ä¸€å°å—æ–‡å­—æˆ–å…¶ä»–è¡Œå†…å†…å®¹ã€‚</li><li>æ²¡æœ‰è¯­ä¹‰ï¼Œåªæ˜¯ä¸€ä¸ªçº¯ç²¹çš„å®¹å™¨ã€‚</li></ul></li><li><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œåªå ç”¨å®ƒå†…éƒ¨å†…å®¹çš„å®½åº¦ã€‚</li><li>é€šå¸¸ç”¨äºä¸ºä¸€å°æ®µå†…å®¹åº”ç”¨æ ·å¼æˆ–è¡Œä¸ºã€‚</li></ul></li><li><p><strong>å¸¸è§åº”ç”¨ï¼š</strong></p><ul><li>åœ¨æ®µè½æˆ–æ–‡æœ¬ä¸­ä¸ºæŸäº›å­—ç¬¦æ·»åŠ æ ·å¼ã€‚</li><li>ä¸ JavaScript ç»“åˆï¼Œç»™æŸäº›å°èŒƒå›´å†…å®¹æ·»åŠ äº¤äº’è¡Œä¸ºã€‚</li></ul></li><li><p><strong>ä¾‹å­ï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘çš„åå­—æ˜¯ <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span>å°æ˜<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="å’Œ-çš„åŒºåˆ«"><a href="#å’Œ-çš„åŒºåˆ«" class="headerlink" title="&lt;div&gt; å’Œ &lt;span&gt; çš„åŒºåˆ«"></a><strong><code>&lt;div&gt;</code> å’Œ <code>&lt;span&gt;</code> çš„åŒºåˆ«</strong></h3><table><thead><tr><th>ç‰¹æ€§</th><th><code>&lt;div&gt;</code></th><th><code>&lt;span&gt;</code></th></tr></thead><tbody><tr><td><strong>ç±»å‹</strong></td><td>å—çº§å…ƒç´ </td><td>è¡Œå†…å…ƒç´ </td></tr><tr><td><strong>å®½åº¦è¡¨ç°</strong></td><td>é»˜è®¤å æ»¡çˆ¶å®¹å™¨å®½åº¦</td><td>ä»…å è‡ªèº«å†…å®¹å®½åº¦</td></tr><tr><td><strong>å¸¸è§ç”¨æ³•</strong></td><td>å®¹å™¨ã€å¸ƒå±€</td><td>å°èŒƒå›´æ ·å¼æˆ–è¡Œä¸º</td></tr><tr><td><strong>åµŒå¥—å†…å®¹</strong></td><td>å¯ä»¥åµŒå¥—å—çº§å’Œè¡Œå†…å…ƒç´ </td><td>åªèƒ½åµŒå¥—è¡Œå†…å…ƒç´ </td></tr><tr><td><strong>è¯­ä¹‰</strong></td><td>æ— è¯­ä¹‰</td><td>æ— è¯­ä¹‰</td></tr></tbody></table><hr><h3 id="å¦‚ä½•é€‰æ‹©ï¼Ÿ"><a href="#å¦‚ä½•é€‰æ‹©ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€‰æ‹©ï¼Ÿ"></a><strong>å¦‚ä½•é€‰æ‹©ï¼Ÿ</strong></h3><ul><li>ä½¿ç”¨ <code>&lt;div&gt;</code> æ—¶ï¼š<ul><li>éœ€è¦ç»„ç»‡å’Œå¸ƒå±€æ•´ä¸ªé¡µé¢çš„ç»“æ„ã€‚</li><li>å†…å®¹éœ€è¦æ¢è¡Œæˆ–åˆ†ç»„æ—¶ã€‚</li></ul></li><li>ä½¿ç”¨ <code>&lt;span&gt;</code> æ—¶ï¼š<ul><li>ä»…éœ€æ”¹å˜æŸæ®µæ–‡å­—æˆ–å†…è”å†…å®¹çš„æ ·å¼ã€‚</li><li>ä¸éœ€è¦æ¢è¡Œæˆ–æ”¹å˜æ–‡æ¡£æµæ—¶ã€‚</li></ul></li></ul><h3 id="ä¸ºä»€ä¹ˆä¸æ¨èåªç”¨-ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¸æ¨èåªç”¨-ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¸æ¨èåªç”¨ &lt;div&gt;ï¼Ÿ"></a><strong>ä¸ºä»€ä¹ˆä¸æ¨èåªç”¨ <code>&lt;div&gt;</code>ï¼Ÿ</strong></h3><h4 id="1-ç¼ºä¹è¯­ä¹‰"><a href="#1-ç¼ºä¹è¯­ä¹‰" class="headerlink" title="1. ç¼ºä¹è¯­ä¹‰"></a>1. <strong>ç¼ºä¹è¯­ä¹‰</strong></h4><ul><li><code>&lt;div&gt;</code> æ²¡æœ‰ä»»ä½•è¯­ä¹‰ï¼Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å®¹å™¨ã€‚</li><li>å¦‚æœæ•´ä¸ªé¡µé¢åªæœ‰ <code>&lt;div&gt;</code>ï¼Œå¯¹å¼€å‘è€…å’Œå±å¹•é˜…è¯»å™¨ï¼ˆè¾…åŠ©æŠ€æœ¯ï¼‰æ¥è¯´ï¼Œå†…å®¹ä¼šç¼ºä¹æ„ä¹‰å’Œä¸Šä¸‹æ–‡ã€‚</li><li>ä¾‹å¦‚ï¼Œä¸€ä¸ªæ ‡é¢˜ç”¨ <code>&lt;h1&gt;</code> è¡¨ç¤ºä¼šæ›´æœ‰æ„ä¹‰ï¼Œè€Œä¸æ˜¯ç®€å•åœ°ç”¨ä¸€ä¸ª <code>&lt;div&gt;</code> åŠ æ ·å¼ã€‚</li></ul><p><strong>å¯¹æ¯”ï¼š</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">htmlå¤åˆ¶ä»£ç &lt;!-- è¯­ä¹‰åŒ– --&gt;</span><br><span class="line">&lt;h1&gt;è¿™æ˜¯æ ‡é¢˜&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚&lt;/p&gt;</span><br><span class="line">htmlå¤åˆ¶ä»£ç &lt;!-- éè¯­ä¹‰åŒ– --&gt;</span><br><span class="line">&lt;div class=&quot;header&quot;&gt;è¿™æ˜¯æ ‡é¢˜&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;paragraph&quot;&gt;è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚&lt;/div&gt;</span><br></pre></td></tr></table></figure><h4 id="2-å¯ç»´æŠ¤æ€§å·®"><a href="#2-å¯ç»´æŠ¤æ€§å·®" class="headerlink" title="2. å¯ç»´æŠ¤æ€§å·®"></a>2. <strong>å¯ç»´æŠ¤æ€§å·®</strong></h4><ul><li>å¦‚æœé¡µé¢åªæœ‰ <code>&lt;div&gt;</code>ï¼Œå¼€å‘äººå‘˜å¾ˆéš¾å¿«é€Ÿç†è§£å†…å®¹çš„ç»“æ„æˆ–ç”¨é€”ã€‚</li><li>ç”¨åˆé€‚çš„æ ‡ç­¾ï¼ˆå¦‚ <code>&lt;span&gt;</code>ã€<code>&lt;section&gt;</code>ã€<code>&lt;article&gt;</code>ï¼‰å¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§ã€‚</li></ul><h4 id="3-å¯¹æœç´¢å¼•æ“ä¸å‹å¥½"><a href="#3-å¯¹æœç´¢å¼•æ“ä¸å‹å¥½" class="headerlink" title="3. å¯¹æœç´¢å¼•æ“ä¸å‹å¥½"></a>3. <strong>å¯¹æœç´¢å¼•æ“ä¸å‹å¥½</strong></h4><ul><li>æœç´¢å¼•æ“ä¼šæ ¹æ®è¯­ä¹‰æ ‡ç­¾æ›´å¥½åœ°ç†è§£é¡µé¢å†…å®¹ï¼Œè¿›è€Œæé«˜ SEO æ’åã€‚</li><li>ä¾‹å¦‚ï¼Œç”¨ <code>&lt;h1&gt;</code>ã€<code>&lt;nav&gt;</code>ã€<code>&lt;article&gt;</code> ç­‰æ ‡ç­¾å¯ä»¥å¸®åŠ©æœç´¢å¼•æ“æ­£ç¡®æŠ“å–å†…å®¹ã€‚</li></ul><h4 id="4-æ— åŠ©äºæ— éšœç¢æ”¯æŒ"><a href="#4-æ— åŠ©äºæ— éšœç¢æ”¯æŒ" class="headerlink" title="4. æ— åŠ©äºæ— éšœç¢æ”¯æŒ"></a>4. <strong>æ— åŠ©äºæ— éšœç¢æ”¯æŒ</strong></h4><ul><li>å±å¹•é˜…è¯»å™¨ä¾èµ– HTML çš„è¯­ä¹‰åŒ–æ ‡ç­¾æ¥ä¸ºè§†éšœç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒã€‚</li><li>åªç”¨ <code>&lt;div&gt;</code> ä¼šä½¿è¾…åŠ©æŠ€æœ¯éš¾ä»¥åŒºåˆ†å†…å®¹çš„å±‚æ¬¡ç»“æ„ã€‚</li></ul><hr><h3 id="é€‚åˆ-çš„åœºæ™¯"><a href="#é€‚åˆ-çš„åœºæ™¯" class="headerlink" title="é€‚åˆ &lt;div&gt; çš„åœºæ™¯"></a><strong>é€‚åˆ <code>&lt;div&gt;</code> çš„åœºæ™¯</strong></h3><ul><li>å½“ä½ éœ€è¦ä¸€ä¸ªæ²¡æœ‰ç‰¹å®šè¯­ä¹‰çš„å®¹å™¨æ—¶ã€‚</li><li>ç”¨æ¥å®ç°å¸ƒå±€æ—¶ï¼Œä¾‹å¦‚ç½‘æ ¼ã€å¼¹æ€§ç›’å­ï¼ˆflexboxï¼‰ã€‚</li><li>åŒ…è£¹ä¸€ç»„å†…å®¹ï¼Œç”¨äºæ ·å¼åŒ–æˆ–äº¤äº’ã€‚</li></ul><h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>è‹¥ HTML çœ‹åšéª¨æ¶ï¼Œé‚£ä¹ˆ CSS å°±æ˜¯è¡£æœ</p><h2 id="CSS-è§„åˆ™"><a href="#CSS-è§„åˆ™" class="headerlink" title="CSS è§„åˆ™"></a>CSS è§„åˆ™</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241101012123819.png" alt="image-20241101012123819"></p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p>å¦‚æœæ²¡æœ‰ CSS:</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125164111287.png" alt="image-20241125164111287"></p><p>å¦‚æœåŠ ä¸Š CSS:</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125164135012.png" alt="image-20241125164135012"></p><p>å¦‚æœç»™å…¶ä¸­ä¸€ä¸ª<code>div</code>åŠ ä¸Š<code>class</code></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125164203869.png" alt="image-20241125164203869"></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125164213558.png" alt="image-20241125164213558"></p><p>å¦‚æœåŠ ä¸Šçš„æ˜¯<code>id</code></p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125164231845.png" alt="image-20241125164231845"></p><h2 id="idå’Œclassçš„åŒºåˆ«"><a href="#idå’Œclassçš„åŒºåˆ«" class="headerlink" title="idå’Œclassçš„åŒºåˆ«"></a><code>id</code>å’Œ<code>class</code>çš„åŒºåˆ«</h2><p>åœ¨ HTML ä¸­ï¼Œ<code>id</code> å’Œ <code>class</code> æ˜¯ä¸¤ç§å¸¸è§çš„å±æ€§ï¼Œç”¨äºæ ‡è¯†å’ŒåŒºåˆ†å…ƒç´ ã€‚å®ƒä»¬çš„åŠŸèƒ½å’Œä½¿ç”¨åœºæ™¯ä¸åŒï¼Œä»¥ä¸‹æ˜¯å®ƒä»¬çš„åŒºåˆ«å’Œç”¨æ³•ï¼š</p><hr><h3 id="1-å®šä¹‰ä¸è¯­æ³•"><a href="#1-å®šä¹‰ä¸è¯­æ³•" class="headerlink" title="1. å®šä¹‰ä¸è¯­æ³•"></a><strong>1. å®šä¹‰ä¸è¯­æ³•</strong></h3><h4 id="id"><a href="#id" class="headerlink" title="id"></a><strong><code>id</code></strong></h4><ul><li><strong>å”¯ä¸€æ€§</strong>ï¼š<code>id</code> æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªç‰¹å®šçš„å…ƒç´ ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>id=&quot;unique-id&quot;</code></li><li><strong>ç”¨é€”</strong>ï¼šé€šå¸¸ç”¨äºéœ€è¦å”¯ä¸€æ ‡è¯†çš„å…ƒç´ ï¼Œä¾‹å¦‚ç”¨äºè„šæœ¬äº¤äº’ï¼ˆå¦‚ JavaScriptï¼‰æˆ–ç‰¹å®šæ ·å¼ã€‚</li></ul><h4 id="class"><a href="#class" class="headerlink" title="class"></a><strong><code>class</code></strong></h4><ul><li><strong>å¤šç”¨æ€§</strong>ï¼š<code>class</code> å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œå¤šä¸ªå…ƒç´ å¯ä»¥æ‹¥æœ‰ç›¸åŒçš„ <code>class</code> å€¼ã€‚</li><li><strong>è¯­æ³•</strong>ï¼š<code>class=&quot;class-name&quot;</code></li><li><strong>ç”¨é€”</strong>ï¼šä¸»è¦ç”¨äºä¸ºå¤šä¸ªå…ƒç´ åˆ†ç»„ï¼Œä¾¿äºæ ·å¼åº”ç”¨æˆ– JavaScript æ“ä½œã€‚</li></ul><hr><h3 id="2-ä½¿ç”¨åœºæ™¯"><a href="#2-ä½¿ç”¨åœºæ™¯" class="headerlink" title="2. ä½¿ç”¨åœºæ™¯"></a><strong>2. ä½¿ç”¨åœºæ™¯</strong></h3><h4 id="id-çš„ä½¿ç”¨åœºæ™¯"><a href="#id-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="id çš„ä½¿ç”¨åœºæ™¯"></a><strong><code>id</code> çš„ä½¿ç”¨åœºæ™¯</strong></h4><ol><li><p><strong>å”¯ä¸€æ ‡è¯†å•ä¸ªå…ƒç´ </strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span>è¿™æ˜¯å¤´éƒ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>JavaScript æ“ä½œç‰¹å®šå…ƒç´ </strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">innerText</span> = <span class="string">&quot;å·²ç‚¹å‡»&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>é”šç‚¹é“¾æ¥</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#section1&quot;</span>&gt;</span>è·³åˆ°éƒ¨åˆ†1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;section1&quot;</span>&gt;</span>è¿™æ˜¯éƒ¨åˆ†1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="class-çš„ä½¿ç”¨åœºæ™¯"><a href="#class-çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="class çš„ä½¿ç”¨åœºæ™¯"></a><strong><code>class</code> çš„ä½¿ç”¨åœºæ™¯</strong></h4><ol><li><p><strong>ä¸ºå¤šä¸ªå…ƒç´ åº”ç”¨ç›¸åŒæ ·å¼</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>ç›’å­1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>ç›’å­2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åœ¨ JavaScript ä¸­æ“ä½œä¸€ç»„å…ƒç´ </strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>é¡¹1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>é¡¹2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> items = <span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&quot;item&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> items) &#123;</span></span><br><span class="line"><span class="language-javascript">    item.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨å¤šä¸ªç±»å</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box highlight&quot;</span>&gt;</span>é«˜äº®çš„ç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><hr><h3 id="3-åŒºåˆ«æ€»ç»“"><a href="#3-åŒºåˆ«æ€»ç»“" class="headerlink" title="3. åŒºåˆ«æ€»ç»“"></a><strong>3. åŒºåˆ«æ€»ç»“</strong></h3><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong><code>id</code></strong></th><th><strong><code>class</code></strong></th></tr></thead><tbody><tr><td><strong>å”¯ä¸€æ€§</strong></td><td>é¡µé¢ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡</td><td>å¯ä»¥å¤šæ¬¡é‡å¤ä½¿ç”¨</td></tr><tr><td><strong>ä½œç”¨èŒƒå›´</strong></td><td>é€‚ç”¨äºå”¯ä¸€å…ƒç´ </td><td>é€‚ç”¨äºä¸€ç»„å…ƒç´ </td></tr><tr><td><strong>é€‰æ‹©å™¨ä¼˜å…ˆçº§</strong></td><td>åœ¨ CSS ä¸­ä¼˜å…ˆçº§é«˜äº <code>class</code></td><td>åœ¨ CSS ä¸­ä¼˜å…ˆçº§ä½äº <code>id</code></td></tr><tr><td><strong>JavaScript è·å–</strong></td><td><code>document.getElementById(&quot;id&quot;)</code></td><td><code>document.getElementsByClassName(&quot;class&quot;)</code></td></tr><tr><td><strong>æ ·å¼ç”¨é€”</strong></td><td>ä¸»è¦ç”¨äºå”¯ä¸€æ€§æ ·å¼æˆ–ç‰¹æ®Šç”¨é€”</td><td>ç”¨äºå¤ç”¨æ ·å¼</td></tr></tbody></table><hr><h3 id="4-æ³¨æ„äº‹é¡¹"><a href="#4-æ³¨æ„äº‹é¡¹" class="headerlink" title="4. æ³¨æ„äº‹é¡¹"></a><strong>4. æ³¨æ„äº‹é¡¹</strong></h3><ol><li><p>**é¿å…è¿‡åº¦ä½¿ç”¨ <code>id</code>**ï¼š</p><ul><li><code>id</code> åº”è¯¥ä»…åœ¨éœ€è¦å”¯ä¸€æ ‡è¯†å…ƒç´ æ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚è¡¨å•ã€é”šç‚¹ç­‰ã€‚</li><li>è¿‡å¤šä½¿ç”¨ <code>id</code> ä¼šé™ä½ä»£ç çš„çµæ´»æ€§ï¼Œå› ä¸ºå®ƒæ— æ³•å¤ç”¨ã€‚</li></ul></li><li><p>**ä¼˜å…ˆä½¿ç”¨ <code>class</code>**ï¼š</p><ul><li>å¦‚æœåªæ˜¯éœ€è¦æ ·å¼æˆ–åˆ†ç»„ï¼Œä¼˜å…ˆé€‰æ‹© <code>class</code>ã€‚</li><li><code>class</code> æ›´é€‚åˆå“åº”å¼è®¾è®¡å’Œç»„ä»¶åŒ–å¼€å‘ã€‚</li></ul></li><li><p><strong>æ··åˆä½¿ç”¨</strong>ï¼š</p><ul><li><p>å¦‚æœéœ€è¦æŸä¸ªå…ƒç´ åŒæ—¶å…·æœ‰å”¯ä¸€æ€§å’Œå…±äº«æ ·å¼ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨ <code>id</code>å’Œ<code>class</code>:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span>ä¸»è¦å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ol><hr><h3 id="5-å®è·µä¾‹å­"><a href="#5-å®è·µä¾‹å­" class="headerlink" title="5. å®è·µä¾‹å­"></a><strong>5. å®è·µä¾‹å­</strong></h3><h4 id="ç¤ºä¾‹é¡µé¢ï¼š"><a href="#ç¤ºä¾‹é¡µé¢ï¼š" class="headerlink" title="ç¤ºä¾‹é¡µé¢ï¼š"></a>ç¤ºä¾‹é¡µé¢ï¼š</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>id å’Œ class ç¤ºä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-id">#header</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: blue;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;header&quot;</span>&gt;</span>è¿™æ˜¯å”¯ä¸€çš„å¤´éƒ¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>é¡¹ç›®1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span>é¡¹ç›®2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥çœ‹åˆ° <code>id</code> å’Œ <code>class</code> çš„å®é™…ç”¨é€”ã€‚</p><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong><code>id</code></strong> æ˜¯å”¯ä¸€çš„ï¼Œç”¨äºç‰¹å®šå…ƒç´ çš„æ ‡è¯†ã€‚</li><li><strong><code>class</code></strong> æ˜¯å¯ä»¥å¤ç”¨çš„ï¼Œé€‚ç”¨äºå¤šä¸ªå…ƒç´ çš„åˆ†ç»„å’Œæ ·å¼å…±äº«ã€‚</li><li><strong>æ¨èåŸåˆ™</strong>ï¼šå¦‚æœæ˜¯å•ä¸€ç”¨é€”ï¼Œä½¿ç”¨ <code>id</code>ï¼›å¦‚æœæ˜¯æ ·å¼å’Œåˆ†ç»„ï¼Œä¼˜å…ˆä½¿ç”¨ <code>class</code>ï¼</li></ul><h2 id="é‡è¦çš„æ¦‚å¿µ"><a href="#é‡è¦çš„æ¦‚å¿µ" class="headerlink" title="é‡è¦çš„æ¦‚å¿µ"></a>é‡è¦çš„æ¦‚å¿µ</h2><ul><li><p>æœ‰ä¸€äº›æ ‡ç­¾ï¼Œå¦‚<code>&lt;h1&gt;</code>æœ‰ä¸€äº›é»˜è®¤çš„æ ·å¼<code>&lt;div&gt;</code>å’Œ<code>&lt;span&gt;</code>æ²¡æœ‰çš„</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">2em</span>;</span><br><span class="line">  <span class="attribute">margin-block-start</span>: <span class="number">0.67em</span>;</span><br><span class="line">  <span class="attribute">margin-block-end</span>: <span class="number">0.67em</span>;</span><br><span class="line">  <span class="attribute">margin-inline-start</span>: <span class="number">0.67em</span>;</span><br><span class="line">  <span class="attribute">margin-inline-end</span>: <span class="number">0.67em</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>div</code>é»˜è®¤æ˜¾ç¤º<code>block</code>ï¼Œä½†æ˜¯æ²¡æœ‰å…¶ä»–æ ·å¼</p></blockquote></li><li><p>æˆ‘ä»¬è‡ªå®šä¹‰ CSS ä¼šè¦†ç›–è¿™äº›é»˜è®¤æ ·å¼</p></li></ul><h2 id="é€‰æ‹©å™¨"><a href="#é€‰æ‹©å™¨" class="headerlink" title="é€‰æ‹©å™¨"></a>é€‰æ‹©å™¨</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20231219171814988.png" alt="image-20231219171814988"></p><p><strong>åä»£é€‰æ‹©å™¨</strong></p><p>è¯­æ³•ï¼š <code>A B &#123;æ ·å¼&#125;</code></p><p>åä»£é€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯<strong>ç¥–å…ˆå…ƒç´ </strong>ä¸º <code>A</code> çš„ <code>B</code> å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é€‰æ‹© .container çš„åä»£ .title */</span></span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: teal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>å­é€‰æ‹©å™¨</strong></p><p>è¯­æ³•ï¼š <code>A &gt; B &#123;æ ·å¼&#125;</code></p><p>å­é€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯<strong>çˆ¶å…ƒç´ </strong>ä¸º <code>A</code> çš„ <code>B</code> å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* é€‰æ‹© .container çš„ç›´æ¥åä»£ .title */</span></span><br><span class="line"><span class="selector-class">.container</span> &gt; <span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: teal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸€èˆ¬å…„å¼Ÿé€‰æ‹©å™¨</strong></p><p>è¯­æ³•ï¼š <code>A ~ B &#123; æ ·å¼ &#125;</code></p><p>ä¸€èˆ¬å…„å¼Ÿé€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯æ‰€æœ‰ä¸ <code>A</code> åŒçº§çš„ï¼Œæ‰€æœ‰åœ¨ <code>A</code> ä¹‹åçš„ <code>B</code> å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.third</span> ~ <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: teal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç´§é‚»å…„å¼Ÿé€‰æ‹©å™¨</strong></p><p>è¯­æ³•ï¼š <code>A + B &#123; æ ·å¼ &#125;</code></p><p>ç´§é‚»å…„å¼Ÿé€‰æ‹©å™¨é€‰æ‹©çš„æ˜¯ä¸ <code>A</code> åŒçº§çš„ï¼Œç´§è·Ÿåœ¨ <code>A</code> ä¹‹åçš„ <code>B</code> å…ƒç´ ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.third</span> + <span class="selector-tag">p</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: teal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="CSS-å’Œ-HTML-ç»“åˆ"><a href="#CSS-å’Œ-HTML-ç»“åˆ" class="headerlink" title="CSS å’Œ HTML ç»“åˆ"></a>CSS å’Œ HTML ç»“åˆ</h1><ol><li>è¡Œå†…æ ·å¼è¡¨ (åŸºæœ¬ä¸ä½¿ç”¨</li><li>å†…éƒ¨æ ·å¼è¡¨</li><li>å¤–éƒ¨æ ·å¼è¡¨ (æ¨è ğŸ˜</li></ol><ul><li>è¡Œå†…æ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">p</span> style=&quot;<span class="attribute">background-color</span>: red; <span class="attribute">font-size</span>: <span class="number">30px</span>; <span class="attribute">color</span>: blue;&quot;&gt;è¿™æ˜¯ä¸€ä¸ªè¡Œå†…æ ·å¼&lt;/<span class="selector-tag">p</span>&gt;</span><br></pre></td></tr></table></figure><ul><li>å†…éƒ¨æ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"> <span class="selector-tag">button</span> &#123;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">     <span class="attribute">background-color</span>: yellow;</span><br><span class="line">     <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><ul><li>å¤–éƒ¨æ ·å¼</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: yellow;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;./style<span class="selector-class">.css</span>&quot;&gt;</span><br></pre></td></tr></table></figure><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241125171222233.png" alt="image-20241125171222233"></p><h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><ul><li>Boolean</li><li>Number</li><li>String</li><li>Null</li><li>Undefined</li></ul><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127160012736.png" alt="image-20241127160012736"></p><h3 id="å’Œ"><a href="#å’Œ" class="headerlink" title="===å’Œ=="></a><code>===</code>å’Œ<code>==</code></h3><p>æˆ‘ä»¬åˆ¤æ–­ç›¸ç­‰çš„æ—¶å€™ä¸ç”¨<code>==</code>è€Œæ˜¯ç”¨<code>===</code>ï¼Œè¿™æ˜¯å› ä¸º<code>==</code>ä¼šå¼ºåˆ¶å‘ç”Ÿç±»å‹è½¬æ¢ï¼Œå¯¼è‡´ä¸åŒç±»å‹ä¹Ÿå¯ä»¥ç›¸ç­‰:</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127160112187.png" alt="image-20241127160112187"></p><h2 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h2><h3 id="èµ‹å€¼è¯­å¥"><a href="#èµ‹å€¼è¯­å¥" class="headerlink" title="èµ‹å€¼è¯­å¥"></a>èµ‹å€¼è¯­å¥</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myBoolean = <span class="literal">true</span>;</span><br><span class="line">myBoolean = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myNumber = <span class="number">3</span>;</span><br><span class="line">myNumber = <span class="number">42</span>; <span class="comment">// constä¿®é¥°çš„ä¸å¯å˜ï¼Œè¿™æ ·å­ä¸ä¼šèµ·ä½œç”¨</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæˆ‘æœŸæœ›æŸä¸ªå€¼åœ¨åé¢çš„ç¨‹åºä¸­å§‹ç»ˆéƒ½æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç»™ä»–åŠ ä¸Š const å¯ä»¥é¢„é˜²é”™è¯¯çš„èµ‹å€¼æ“ä½œ</p></blockquote><h2 id="nullå’Œundefined"><a href="#nullå’Œundefined" class="headerlink" title="nullå’Œundefined"></a><code>null</code>å’Œ<code>undefined</code></h2><ul><li><p><code>undefined</code>è¡¨ç¤ºâ€<strong>å£°æ˜ä½†å°šæœªèµ‹å€¼</strong>â€œï¼Œ</p></li><li><p><code>null</code>è¡¨ç¤ºâ€æ— å€¼â€ã€‚</p></li></ul><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127160438933.png" alt="image-20241127160438933"></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127160637406.png" alt="image-20241127160637406"></p><ul><li>ä»¥<code>const</code>ä¿®é¥°æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›å­˜åœ¨ä¸¤ä¸ªç›¸åŒåå­—çš„å‡½æ•°</li><li><code>()</code>å†…æ˜¯å‚æ•°</li><li>å®é™…ä¸Šæ˜¯æŠŠä¸€ä¸ªåŒ¿åå‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œ<code>greatestCommonDivisor</code>æŒ‡å‘è¿™ä¸ªåŒ¿åå‡½æ•°</li></ul><h3 id="è¾“å‡ºå‡½æ•°"><a href="#è¾“å‡ºå‡½æ•°" class="headerlink" title="è¾“å‡ºå‡½æ•°"></a>è¾“å‡ºå‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>();</span><br></pre></td></tr></table></figure><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127160949388.png" alt="image-20241127160949388"></p><h3 id="å¯¹è¯æ¡†å‡½æ•°"><a href="#å¯¹è¯æ¡†å‡½æ•°" class="headerlink" title="å¯¹è¯æ¡†å‡½æ•°"></a>å¯¹è¯æ¡†å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;Congratulations!;&quot;</span>);</span><br></pre></td></tr></table></figure><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127161044329.png" alt="image-20241127161044329"></p><h3 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval()"></a><code>setInterval()</code></h3><p><code>setInterval</code> æ˜¯ JavaScript ä¸­ç”¨äº<strong>å®šæ—¶é‡å¤æ‰§è¡Œ</strong>æŸä¸ªå‡½æ•°çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ã€‚å®ƒä¼šæŒ‰ç…§æŒ‡å®šçš„æ—¶é—´é—´éš”é‡å¤æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œç›´åˆ°è¢«æ‰‹åŠ¨æ¸…é™¤ã€‚</p><h4 id="è¯­æ³•ï¼š"><a href="#è¯­æ³•ï¼š" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(callback, delay, [arg1, arg2, ...]);</span><br></pre></td></tr></table></figure><ul><li><strong>callback</strong>ï¼šéœ€è¦é‡å¤æ‰§è¡Œçš„å‡½æ•°ã€‚</li><li><strong>delay</strong>ï¼šæ—¶é—´é—´éš”ï¼ˆå•ä½æ˜¯æ¯«ç§’ï¼Œ1 ç§’ &#x3D; 1000 æ¯«ç§’ï¼‰ã€‚</li><li>**arg1, arg2, â€¦**ï¼ˆå¯é€‰ï¼‰ï¼šä¼ é€’ç»™å›è°ƒå‡½æ•°çš„é¢å¤–å‚æ•°ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This message will repeat every 2 seconds!&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>); <span class="comment">// æ¯2ç§’è¾“å‡ºä¸€æ¬¡æ¶ˆæ¯</span></span><br></pre></td></tr></table></figure><h4 id="è§£é‡Šï¼š"><a href="#è§£é‡Šï¼š" class="headerlink" title="è§£é‡Šï¼š"></a>è§£é‡Šï¼š</h4><ul><li>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>setInterval</code> è®¾ç½®äº†ä¸€ä¸ªæ¯ 2 ç§’æ‰§è¡Œä¸€æ¬¡çš„å›è°ƒå‡½æ•°ï¼Œæ¯æ¬¡æ‰§è¡Œæ—¶éƒ½ä¼šè¾“å‡º <code>&quot;This message will repeat every 2 seconds!&quot;</code>ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š"><a href="#æ³¨æ„äº‹é¡¹ï¼š" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ol><li><code>setInterval</code> ä¼š<strong>ä¸€ç›´æ‰§è¡Œ</strong>ï¼Œç›´åˆ°è°ƒç”¨ <code>clearInterval</code> æ¥åœæ­¢å®ƒã€‚</li><li>å¦‚æœå›è°ƒå‡½æ•°æ‰§è¡Œæ—¶é—´è¶…è¿‡è®¾å®šçš„é—´éš”æ—¶é—´ï¼Œå¯èƒ½ä¼šå‡ºç°å›è°ƒå‡½æ•°é‡å æ‰§è¡Œçš„æƒ…å†µã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­æ§åˆ¶æ‰§è¡Œçš„é¢‘ç‡ã€‚</li></ol><h4 id="å–æ¶ˆå®šæ—¶å™¨ï¼š"><a href="#å–æ¶ˆå®šæ—¶å™¨ï¼š" class="headerlink" title="å–æ¶ˆå®šæ—¶å™¨ï¼š"></a>å–æ¶ˆå®šæ—¶å™¨ï¼š</h4><p>ä½ å¯ä»¥ä½¿ç”¨ <code>clearInterval</code> æ¥å–æ¶ˆ <code>setInterval</code> åˆ›å»ºçš„å®šæ—¶å™¨ï¼Œåœæ­¢é‡å¤æ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This will repeat every second!&quot;</span>);</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœæ­¢å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(intervalId); <span class="comment">// 5ç§’ååœæ­¢é‡å¤è¾“å‡º</span></span><br><span class="line">&#125;, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure><h4 id="è§£é‡Šï¼š-1"><a href="#è§£é‡Šï¼š-1" class="headerlink" title="è§£é‡Šï¼š"></a>è§£é‡Šï¼š</h4><ul><li>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>setInterval</code> æ¯ç§’è¾“å‡ºä¸€æ¬¡ä¿¡æ¯ï¼Œè€Œ <code>setTimeout</code> åœ¨ 5 ç§’åè°ƒç”¨ <code>clearInterval</code>ï¼Œåœæ­¢äº†å®šæ—¶å™¨ã€‚</li></ul><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><ul><li><code>setInterval</code> ç”¨äº<strong>å®šæ—¶é‡å¤æ‰§è¡Œ</strong>å›è°ƒå‡½æ•°ã€‚</li><li><code>clearInterval</code> ç”¨äºåœæ­¢å®šæ—¶å™¨ã€‚</li><li>å®ƒå¸¸ç”¨äºè½®è¯¢ã€åŠ¨ç”»ã€å‘¨æœŸæ€§ä»»åŠ¡ç­‰åœºæ™¯ã€‚</li></ul><h3 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout()"></a><code>setTimeout()</code></h3><p><code>setTimeout</code> æ˜¯ JavaScript ä¸­ç”¨äº<strong>å»¶è¿Ÿæ‰§è¡Œ</strong>æŸä¸ªå‡½æ•°çš„ä¸€ä¸ªå†…ç½®æ–¹æ³•ã€‚å®ƒä¼šåœ¨æŒ‡å®šçš„æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰åæ‰§è¡Œä¸€æ¬¡ç»™å®šçš„å›è°ƒå‡½æ•°ã€‚</p><h4 id="è¯­æ³•ï¼š-1"><a href="#è¯­æ³•ï¼š-1" class="headerlink" title="è¯­æ³•ï¼š"></a>è¯­æ³•ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(callback, delay, [arg1, arg2, ...]);</span><br></pre></td></tr></table></figure><ul><li><strong>callback</strong>ï¼šéœ€è¦å»¶è¿Ÿæ‰§è¡Œçš„å‡½æ•°ã€‚</li><li><strong>delay</strong>ï¼šå»¶è¿Ÿçš„æ—¶é—´ï¼ˆå•ä½æ˜¯æ¯«ç§’ï¼Œ1 ç§’ &#x3D; 1000 æ¯«ç§’ï¼‰ã€‚</li><li>**arg1, arg2, â€¦**ï¼ˆå¯é€‰ï¼‰ï¼šä¼ é€’ç»™å›è°ƒå‡½æ•°çš„é¢å¤–å‚æ•°ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼š-1"><a href="#ç¤ºä¾‹ï¼š-1" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This message is delayed!&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>); <span class="comment">// 2ç§’åæ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br></pre></td></tr></table></figure><h4 id="è§£é‡Šï¼š-2"><a href="#è§£é‡Šï¼š-2" class="headerlink" title="è§£é‡Šï¼š"></a>è§£é‡Šï¼š</h4><ul><li>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ<code>setTimeout</code> è®¾ç½®äº†ä¸€ä¸ªå»¶è¿Ÿ 2 ç§’åæ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå‡½æ•°å†…è¾“å‡º <code>&quot;This message is delayed!&quot;</code>ã€‚</li></ul><h4 id="æ³¨æ„äº‹é¡¹ï¼š-1"><a href="#æ³¨æ„äº‹é¡¹ï¼š-1" class="headerlink" title="æ³¨æ„äº‹é¡¹ï¼š"></a>æ³¨æ„äº‹é¡¹ï¼š</h4><ol><li><code>setTimeout</code> åªä¼š<strong>æ‰§è¡Œä¸€æ¬¡</strong>ï¼Œå¦‚æœéœ€è¦é‡å¤æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ <code>setInterval</code>ã€‚</li><li>å¦‚æœåœ¨å›è°ƒå‡½æ•°æ‰§è¡Œå‰è°ƒç”¨ <code>clearTimeout</code>ï¼Œå¯ä»¥å–æ¶ˆå®šæ—¶å™¨ï¼Œä¸å†æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</li></ol><h4 id="å–æ¶ˆå®šæ—¶å™¨ï¼š-1"><a href="#å–æ¶ˆå®šæ—¶å™¨ï¼š-1" class="headerlink" title="å–æ¶ˆå®šæ—¶å™¨ï¼š"></a>å–æ¶ˆå®šæ—¶å™¨ï¼š</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeoutId = <span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;This will not run&quot;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">clearTimeout</span>(timeoutId); <span class="comment">// å–æ¶ˆå®šæ—¶å™¨</span></span><br></pre></td></tr></table></figure><p><code>setTimeout</code> æ˜¯å¤„ç†å»¶æ—¶æ“ä½œå’Œéé˜»å¡ä»£ç æ‰§è¡Œçš„å¸¸ç”¨æ–¹æ³•ã€‚</p><h3 id="setInterval-vs-setTimeout"><a href="#setInterval-vs-setTimeout" class="headerlink" title="setInterval() vs setTimeout()"></a><code>setInterval() vs setTimeout()</code></h3><p><code>setInterval()</code> å’Œ <code>setTimeout()</code> éƒ½æ˜¯ JavaScript ä¸­ç”¨äºå®šæ—¶æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ–¹æ³•ï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›å…³é”®çš„åŒºåˆ«ã€‚ä¸‹é¢æ˜¯å®ƒä»¬çš„å¯¹æ¯”ï¼š</p><table><thead><tr><th>ç‰¹æ€§</th><th><code>setTimeout()</code></th><th><code>setInterval()</code></th></tr></thead><tbody><tr><td>æ‰§è¡Œæ¬¡æ•°</td><td>åªæ‰§è¡Œä¸€æ¬¡</td><td>ä¼šæŒç»­é‡å¤æ‰§è¡Œ</td></tr><tr><td>ç”¨é€”</td><td>ä¸€æ¬¡æ€§ä»»åŠ¡</td><td>å‘¨æœŸæ€§ä»»åŠ¡</td></tr><tr><td>å–æ¶ˆæ–¹æ³•</td><td><code>clearTimeout()</code></td><td><code>clearInterval()</code></td></tr><tr><td>è¡Œä¸º</td><td>å»¶è¿Ÿæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°</td><td>æ¯éš”æŒ‡å®šæ—¶é—´é—´éš”æ‰§è¡Œå›è°ƒå‡½æ•°</td></tr><tr><td>ä¾‹å­</td><td><code>setTimeout(() =&gt; &#123; console.log(&quot;Done&quot;); &#125;, 1000);</code></td><td><code>setInterval(() =&gt; &#123; console.log(&quot;Tick&quot;); &#125;, 1000);</code></td></tr></tbody></table><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>ä½¿ç”¨ <strong><code>setTimeout()</code></strong> å½“ä½ éœ€è¦åœ¨æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œä¸€æ¬¡ä»»åŠ¡æ—¶ã€‚</li><li>ä½¿ç”¨ <strong><code>setInterval()</code></strong> å½“ä½ éœ€è¦å®šæœŸã€æŒç»­åœ°æ‰§è¡Œä»»åŠ¡æ—¶ã€‚</li><li>ä¸¤è€…éƒ½å¯ä»¥é€šè¿‡ç›¸åº”çš„å–æ¶ˆæ–¹æ³• <code>clearTimeout()</code> å’Œ <code>clearInterval()</code> åœæ­¢å®šæ—¶å™¨ã€‚</li></ul><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">let</span> pets = [<span class="string">&quot;flower&quot;</span>, <span class="number">42</span>, <span class="literal">false</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¿é—®</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(pets[<span class="number">2</span>]); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ›¿æ¢</span></span><br><span class="line">pets[<span class="number">2</span>] = <span class="string">&quot;none&quot;</span>; <span class="comment">// [&quot;flower&quot;, 42, &quot;none&quot;]</span></span><br><span class="line"></span><br><span class="line">pets.<span class="title function_">pop</span>(); <span class="comment">// [&quot;flower&quot;, 42]</span></span><br><span class="line">pets.<span class="title function_">push</span>(<span class="literal">true</span>); <span class="comment">// [&quot;flower&quot;, 42, true]</span></span><br><span class="line">pets.<span class="title function_">unshift</span>(<span class="literal">false</span>); <span class="comment">// [false, &quot;flower&quot;, 42, true]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> copyPets = &#123; ...pets &#125;; <span class="comment">//æ‹·è´[false, &quot;flower&quot;, 42, true]</span></span><br><span class="line"><span class="keyword">let</span> copyPet = &#123; ...pets[<span class="number">0</span>] &#125;; <span class="comment">//æ‹·è´false</span></span><br></pre></td></tr></table></figure><h2 id="æ¡ä»¶è¯­å¥"><a href="#æ¡ä»¶è¯­å¥" class="headerlink" title="æ¡ä»¶è¯­å¥"></a>æ¡ä»¶è¯­å¥</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a &lt; b) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aå°äºb&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aå¤§äºb&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;aç­‰äºb&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="while-å¾ªç¯"><a href="#while-å¾ªç¯" class="headerlink" title="while å¾ªç¯"></a>while å¾ªç¯</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> z = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (z &lt; <span class="number">199</span>) &#123;</span><br><span class="line">  z = z * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="for-å¾ªç¯"><a href="#for-å¾ªç¯" class="headerlink" title="for å¾ªç¯"></a>for å¾ªç¯</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127161403267.png" alt="image-20241127161403267"></p><h2 id="å¯¹è±¡-Objects"><a href="#å¯¹è±¡-Objects" class="headerlink" title="å¯¹è±¡(Objects)"></a>å¯¹è±¡(Objects)</h2><p>å…¶å®å°±æ˜¯é”®å€¼å¯¹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myCar = &#123;</span><br><span class="line">    make : <span class="string">&quot;Ford&quot;</span>,</span><br><span class="line">    year : <span class="number">2005</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myCar.<span class="property">make</span>); <span class="comment">// &quot;Ford&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myCar[<span class="string">&quot;year&quot;</span>]); <span class="comment">// 2005;</span></span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡è§£æ„èµ‹å€¼"><a href="#å¯¹è±¡è§£æ„èµ‹å€¼" class="headerlink" title="å¯¹è±¡è§£æ„èµ‹å€¼"></a>å¯¹è±¡è§£æ„èµ‹å€¼</h3><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127161640724.png" alt="image-20241127161640724"></p><blockquote><p>myCar æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œä»–å¼•ç”¨æˆ‘ä»¬è®¾ç½®çš„ Objectï¼Œæ‰€ä»¥æ˜¯æ— æ³•åˆ¤æ–­æ˜¯å¦ç›¸ç­‰çš„</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127161734057.png" alt="image-20241127161734057"></p></blockquote><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127162254655.png" alt="image-20241127162254655"></p><h2 id="å‡½æ•°çš„å›è°ƒ"><a href="#å‡½æ•°çš„å›è°ƒ" class="headerlink" title="å‡½æ•°çš„å›è°ƒ"></a>å‡½æ•°çš„å›è°ƒ</h2><p><strong>å›è°ƒå‡½æ•°</strong>ï¼ˆcallback functionï¼‰æ˜¯æŒ‡<strong>ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°</strong>å¹¶åœ¨è¯¥å‡½æ•°å®ŒæˆæŸäº›ä»»åŠ¡åè¢«æ‰§è¡Œçš„å‡½æ•°ã€‚</p><p>ç®€å•æ¥è¯´ï¼Œå›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªâ€œè¢«è°ƒç”¨çš„å‡½æ•°â€ï¼Œå®ƒåœ¨æŸäº›æ“ä½œå®Œæˆåè¢«è‡ªåŠ¨æ‰§è¡Œã€‚</p><h3 id="å¼•ä¾‹"><a href="#å¼•ä¾‹" class="headerlink" title="å¼•ä¾‹"></a>å¼•ä¾‹</h3><p>å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œä»–ä¼ å…¥ä¸€ä¸ª<code>a</code> ç„¶åå¯¹<code>a</code>è¿›è¡Œäº†ä¸€ç³»åˆ—çš„<strong>è¿ç®—</strong>åè¿”å›<code>b</code>å‡ºæ¥ã€‚</p><p>å¦‚æœæˆ‘ä»¬å¸Œæœ›å¯¹<code>a</code>è¿›è¡Œä¸åŒçš„è¿ç®—ï¼Œæˆ‘ä»¬åªèƒ½å¤åˆ¶å¤šæ¬¡è¿™ä¸ªå‡½æ•°ï¼Œç„¶åä¿®æ”¹<strong>è¿ç®—</strong>éƒ¨åˆ†ï¼Œè¿™æ ·å­æˆ‘ä»¬çš„ä»£ç å°±å†—ä½™äº†ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è¿™ä¸ªå‡½æ•°ä¼ å…¥ä¸€ä¸ªè¿ç®—å‡½æ•°ï¼Œç„¶åæŠŠ<strong>è¿ç®—</strong>éƒ¨åˆ†æ›¿æ¢æˆè¯¥å‡½æ•°ï¼Œè¿™æ ·å­æˆ‘ä»¬å°±å®ç°äº†ä¸€ä»½ä»£ç å¤šæ¬¡ä½¿ç”¨ã€‚</p><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127163040033.png" alt="image-20241127163040033"></p><h3 id="ä¸¾ä¸ªä¾‹å­ï¼š"><a href="#ä¸¾ä¸ªä¾‹å­ï¼š" class="headerlink" title="ä¸¾ä¸ªä¾‹å­ï¼š"></a>ä¸¾ä¸ªä¾‹å­ï¼š</h3><p>å‡è®¾ä½ åœ¨åšä¸€ä¸ªé¡¹ç›®ï¼Œå‘ä¸€ä¸ªåŒäº‹è¯·æ±‚æŸé¡¹ä»»åŠ¡çš„å¸®åŠ©ã€‚ä½ å‘Šè¯‰ä»–ï¼šâ€œå¸®æˆ‘åšè¿™ä¸ªä»»åŠ¡ï¼Œåšå®Œäº†å°±é€šçŸ¥æˆ‘ã€‚â€ä½ çš„åŒäº‹å®Œæˆä»»åŠ¡åä¼šé€šçŸ¥ä½ ï¼Œè¿™ä¸ªé€šçŸ¥å°±æ˜¯â€œå›è°ƒâ€ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œå›è°ƒå‡½æ•°çš„ä½œç”¨ç±»ä¼¼ï¼Œå°±æ˜¯è®©æˆ‘ä»¬æŒ‡å®šä¸€äº›ä»»åŠ¡å®Œæˆåçš„æ“ä½œã€‚</p><h3 id="ä»£ç ç¤ºä¾‹ï¼š"><a href="#ä»£ç ç¤ºä¾‹ï¼š" class="headerlink" title="ä»£ç ç¤ºä¾‹ï¼š"></a>ä»£ç ç¤ºä¾‹ï¼š</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greetUser</span>(<span class="params">name, callback</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>!`</span>);</span><br><span class="line">  <span class="title function_">callback</span>(); <span class="comment">// è°ƒç”¨å›è°ƒå‡½æ•°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayGoodbye</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Goodbye!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="title function_">greetUser</span>(<span class="string">&quot;Alice&quot;</span>, sayGoodbye); <span class="comment">// è¾“å‡ºï¼šHello, Alice!  Goodbye!</span></span><br></pre></td></tr></table></figure><h3 id="è§£é‡Šï¼š-3"><a href="#è§£é‡Šï¼š-3" class="headerlink" title="è§£é‡Šï¼š"></a>è§£é‡Šï¼š</h3><ul><li><code>greetUser</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªåå­— (<code>name</code>) å’Œä¸€ä¸ªå›è°ƒå‡½æ•° (<code>callback</code>)ã€‚</li><li>åœ¨ <code>greetUser</code> å‡½æ•°å†…éƒ¨ï¼Œå½“å®ƒå®Œæˆäº†æ‰“å° <code>Hello, Alice!</code> åï¼Œå®ƒä¼šè°ƒç”¨ <code>callback()</code>ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ <code>sayGoodbye()</code> å‡½æ•°ã€‚</li><li>ç»“æœæ˜¯å…ˆè¾“å‡º <code>Hello, Alice!</code>ï¼Œç„¶åå†è¾“å‡º <code>Goodbye!</code>ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ç”¨å›è°ƒå‡½æ•°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨å›è°ƒå‡½æ•°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨å›è°ƒå‡½æ•°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨å›è°ƒå‡½æ•°ï¼Ÿ</h3><ol><li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šåœ¨ JavaScript ä¸­ï¼Œå¾ˆå¤šæ“ä½œæ˜¯å¼‚æ­¥çš„ï¼ˆæ¯”å¦‚è¯»å–æ–‡ä»¶ã€ç½‘ç»œè¯·æ±‚ç­‰ï¼‰ã€‚å›è°ƒå‡½æ•°å¯ä»¥åœ¨å¼‚æ­¥æ“ä½œå®ŒæˆåæŒ‡å®šæ¥ä¸‹æ¥çš„æ“ä½œã€‚ä¾‹å¦‚ï¼Œä½ å‘èµ·äº†ä¸€ä¸ªè¯·æ±‚ï¼Œç­‰æœåŠ¡å™¨å“åº”åï¼Œå†æ‰§è¡Œå›è°ƒå‡½æ•°æ¥å¤„ç†ç»“æœã€‚</li><li><strong>çµæ´»æ€§</strong>ï¼šä½ å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚ä¼ é€’ä¸åŒçš„å›è°ƒå‡½æ•°ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»å’Œå¯å¤ç”¨ã€‚</li></ol><h3 id="å¦ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼šäº‹ä»¶å¤„ç†"><a href="#å¦ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼šäº‹ä»¶å¤„ç†" class="headerlink" title="å¦ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼šäº‹ä»¶å¤„ç†"></a>å¦ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ï¼šäº‹ä»¶å¤„ç†</h3><p>å½“ä½ ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œæµè§ˆå™¨ä¼šè§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œå›è°ƒå‡½æ•°ä¼šå¤„ç†è¿™ä¸ªäº‹ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Button clicked!&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“ï¼š-1"><a href="#æ€»ç»“ï¼š-1" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>å›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªâ€œè¢«ä¼ é€’å¹¶ç­‰å¾…æ‰§è¡Œçš„å‡½æ•°â€ã€‚å®ƒé€šå¸¸ä½œä¸ºå…¶ä»–å‡½æ•°çš„å‚æ•°ï¼Œç”¨æ¥åœ¨æŸäº›æ“ä½œå®Œæˆååšç‰¹å®šçš„äº‹æƒ…ã€‚åœ¨ JavaScript ä¸­ï¼Œå›è°ƒå‡½æ•°æ˜¯å¤„ç†å¼‚æ­¥æ“ä½œå’Œäº‹ä»¶å“åº”çš„å¸¸è§æ–¹å¼ã€‚</p><h3 id="map"><a href="#map" class="headerlink" title="map()"></a><code>map()</code></h3><p>é€šè¿‡å¯¹èµ·å§‹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ åº”ç”¨å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºæ–°çš„æ•°ç»„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">const</span> newArray = myArray.<span class="title function_">map</span>(<span class="function">(<span class="params">num</span>) =&gt;</span> num * <span class="number">3</span>);</span><br></pre></td></tr></table></figure><h3 id="fliter"><a href="#fliter" class="headerlink" title="fliter()"></a><code>fliter()</code></h3><p><img src="/2024/11/01/%E5%89%8D%E7%AB%AF-MIT-Web-1-%E5%89%8D%E7%AB%AF%E6%A0%88%E5%AD%A6%E4%B9%A0-%E5%88%9D%E8%AF%86HTML%E3%80%81CSS%E3%80%81JS%E4%B8%89%E5%A4%A7%E4%BB%B6/image-20241127162558067.png" alt="image-20241127162558067"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
          <category> MIT_Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‰ç«¯ </tag>
            
            <tag> MIT_Web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cé¡¹ç›®ç¬”è®°(å››)-proj3-æ„å»ºCPUæµæ°´çº¿</title>
      <link href="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/"/>
      <url>/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©æ˜¯ 24Â·10Â·21 æ—¥ï¼Œæ—¶éš” 1 ä¸ªæœˆé‡æ–°å¼€å§‹å®Œæˆ proj3 è¿™ä¸ªå¤§é¡¹ç›®ï¼Œè¯¥é¡¹ç›®ä¸»è¦æ˜¯æ„å»º CPU æµæ°´çº¿ï¼Œæˆ‘ä¹‹å‰å†™åˆ° partA çš„ task3 çš„æ—¶å€™å°±åœäº†ï¼Œè¿™æ¬¡ä» task3 å¼€å§‹å†™ã€‚</p><p>åœ¨ partA ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†é’ˆå¯¹ addi æŒ‡ä»¤çš„ CPUï¼Œåœ¨ partB ä¸­ä¸»è¦å®ç°ä¸€ä¸ªå¯ä»¥å®Œæˆå¯¹å¤šç§ç±»å‹æŒ‡ä»¤è¿›è¡Œå¤„ç†çš„ CPUã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨è¿™ä¸ªéƒ¨åˆ†æˆ‘ä»¬éœ€è¦å®ç° I å‹ã€R å‹ã€B å‹ã€load&amp;storeã€jump&amp;U å‹æŒ‡ä»¤ã€‚åœ¨å®éªŒä¸­è¿™å‡ ä¸ªéƒ¨åˆ†è¢«åˆ†ä¸ºä¸åŒçš„äº”ä¸ªä»»åŠ¡ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›ç›¸åŒçš„éƒ¨åˆ†ï¼Œæ¯”å¦‚æ•°æ®é€šè·¯å’Œæ§åˆ¶é€»è¾‘ï¼Œæ‰€ä»¥å®Œå…¨å¯ä»¥æŒ‰ç…§ä¸åŒçš„æ¨¡æ¿æ¥è¿›è¡Œå®ç°ï¼Œè€Œä¸æ˜¯æ ¹æ®ä»»åŠ¡åˆ’åˆ†å¤šæ¬¡åˆ†æ­¥å®ç°ã€‚</p><h1 id="å…³äº-part-A"><a href="#å…³äº-part-A" class="headerlink" title="å…³äº part A"></a>å…³äº part A</h1><p>Part A åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>å®ç° Arithmetic Logic Unit (ALU)</li><li>å®ç° Register File (RegFile)</li><li>å®ç° The <code>addi</code> Instruction</li></ul><h2 id="ALU"><a href="#ALU" class="headerlink" title="ALU"></a>ALU</h2><p>ä»»åŠ¡è¦æ±‚ï¼š</p><table><thead><tr><th>Input Name</th><th>Bit Width</th><th align="left">Description</th></tr></thead><tbody><tr><td>A</td><td>32</td><td align="left">Data to use for Input A in the ALU operation</td></tr><tr><td>B</td><td>32</td><td align="left">Data to use for Input B in the ALU operation</td></tr><tr><td>ALUSel</td><td>4</td><td align="left">Selects which operation the ALU should perform (see the list of operations with corresponding switch values below)</td></tr></tbody></table><p>å…³äº ALUSel</p><p>| Switch Value | Instruction                              |<br>| â€”â€”â€”â€” | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | â€” |<br>| 0            | add: <code>Result = A + B</code>                    |<br>| 1            | and: <code>Result = A &amp; B</code>                    |<br>| 2            | or: <code>Result = A                          | B</code>  |<br>| 3            | xor: <code>Result = A ^ B</code>                    |<br>| 4            | srl: <code>Result = (unsigned) A &gt;&gt; B</code>        |<br>| 5            | sra: <code>Result = (signed) A &gt;&gt; B</code>          |<br>| 6            | sll: <code>Result = A &lt;&lt; B</code>                   |<br>| 7            | slt: <code>Result = (A &lt; B (signed)) ? 1 : 0</code> |<br>| 8            | Unused                                   |<br>| 9            | Unused                                   |<br>| 10           | mul: <code>Result = (signed) (A * B)[31:0]</code>   |<br>| 11           | mulhu: <code>Result = (A * B)[63:32]</code>         |<br>| 12           | sub: <code>Result = A - B</code>                    |<br>| 13           | bsel: <code>Result = B</code>                       |<br>| 14           | mulh: <code>Result = (signed) (A * B)[63:32]</code> |</p><p>æˆ‘çš„å®ç°ï¼š</p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022011425739.png" alt="image-20241022011425739"></p><h2 id="RegFile"><a href="#RegFile" class="headerlink" title="RegFile"></a>RegFile</h2><p>æ­£å¦‚æ‚¨åœ¨è¯¾å ‚ä¸Šå­¦åˆ°çš„é‚£æ ·ï¼ŒRISC-V æ¶æ„æœ‰ 32 ä¸ªå¯„å­˜å™¨ã€‚å¯¹äºè¿™ä¸ªé¡¹ç›®ï¼Œ<strong>æˆ‘ä»¬å°†å®ç°æ‰€æœ‰è¿™äº›</strong>ã€‚ä¸ºäº†å¸®åŠ©è°ƒè¯•ï¼Œ<strong>æˆ‘ä»¬ç¼–å†™äº† regfile æ¥å…¬å¼€ä¸‹é¢æŒ‡å®šçš„ 9 ä¸ªç«¯å£</strong>ã€‚è¯·ç¡®ä¿è¿™äº› register çš„å€¼é™„åŠ åˆ°æ­£ç¡®çš„ outputsã€‚</p><p>æ‚¨çš„ RegFile åº”è¯¥èƒ½å¤Ÿå†™å…¥æˆ–è¯»å–ç»™å®š RISC-V æŒ‡ä»¤ä¸­æŒ‡å®šçš„è¿™äº›å¯„å­˜å™¨ï¼Œè€Œä¸ä¼šå½±å“ä»»ä½•å…¶ä»–å¯„å­˜å™¨ã€‚æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¾‹å¤–ï¼šå³ä½¿æŒ‡ä»¤å°è¯•ï¼Œæ‚¨çš„ RegFile ä¹Ÿä¸åº”å†™å…¥ x0ã€‚è¯·è®°ä½ï¼Œé›¶å¯„å­˜å™¨çš„å€¼åº”å§‹ç»ˆä¸º 0x0ã€‚æ‚¨ä¸åº”åœ¨ RegFile ä¸­çš„ä»»ä½•ä½ç½®å¯¹æ—¶é’Ÿè¿›è¡Œé—¨æ§ï¼šæ—¶é’Ÿä¿¡å·åº”å§‹ç»ˆç›´æ¥è¿æ¥åˆ°å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥ï¼Œè€Œæ— éœ€é€šè¿‡ä»»ä½•ç»„åˆé€»è¾‘ã€‚</p><table><thead><tr><th>Register Number</th><th>Register Name</th></tr></thead><tbody><tr><td>x0</td><td>x0</td></tr><tr><td>x1</td><td>ra</td></tr><tr><td>x2</td><td>sp</td></tr><tr><td>x5</td><td>t0</td></tr><tr><td>x6</td><td>t1</td></tr><tr><td>x7</td><td>t2</td></tr><tr><td>x8</td><td>s0</td></tr><tr><td>x9</td><td>s1</td></tr><tr><td>x10</td><td>a0</td></tr></tbody></table><p>The register file circuit has six inputs:</p><table><thead><tr><th>Input Name</th><th>Bit Width</th><th align="left">Description</th></tr></thead><tbody><tr><td>Clock</td><td>1</td><td align="left">Input providing the clock. This signal can be sent into subcircuits or attached directly to the clock inputs of memory units in Logisim, but should not otherwise be gated (i.e., do not invert it, do not â€œandâ€ it with anything, etc.).</td></tr><tr><td>RegWEn</td><td>1</td><td align="left">Determines whether data is written to the register file on the next rising edge of the clock.</td></tr><tr><td>Read Register 1 (rs1)</td><td>5</td><td align="left">Determines which registerâ€™s value is sent to the Read Data 1 output, see below.</td></tr><tr><td>Read Register 2 (rs2)</td><td>5</td><td align="left">Determines which registerâ€™s value is sent to the Read Data 2 output, see below.</td></tr><tr><td>Write Register (rd)</td><td>5</td><td align="left">Determines which register to set to the value of Write Data on the next rising edge of the clock, assuming that RegWEn is a 1.</td></tr><tr><td>Write Data (wb)</td><td>32</td><td align="left">Determines what data to write to the register identified by the Write Register input on the next rising edge of the clock, assuming that RegWEn is 1.</td></tr></tbody></table><p>The register file also has the following outputs:</p><table><thead><tr><th>Output Name</th><th>Bit Width</th><th align="left">Description</th></tr></thead><tbody><tr><td>rs1</td><td>32</td><td align="left">Driven with the value of the register identified by the Read Register 1 input.</td></tr><tr><td>rs2</td><td>32</td><td align="left">Driven with the value of the register identified by the Read Register 2 input.</td></tr><tr><td><code>ra</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>ra</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>sp</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>sp</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>t0</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>t0</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>t1</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>t1</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>t2</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>t2</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>s0</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>s0</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>s1</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>s1</code> (This is a DEBUG&#x2F;TEST output.)</td></tr><tr><td><code>a0</code> Value</td><td>32</td><td align="left">Always driven with the value of <code>a0</code> (This is a DEBUG&#x2F;TEST output.)</td></tr></tbody></table><p>æˆ‘çš„å®ç°</p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022011842802.png" alt="image-20241022011842802"></p><h1 id="å…³äº-part-B"><a href="#å…³äº-part-B" class="headerlink" title="å…³äº part B"></a>å…³äº part B</h1><p>part B è¢«åˆ†ä¸ºå‡ ä¸ªç»†å°çš„ä»»åŠ¡</p><h2 id="Branch-Comparator-çš„å®ç°"><a href="#Branch-Comparator-çš„å®ç°" class="headerlink" title="Branch Comparator çš„å®ç°"></a>Branch Comparator çš„å®ç°</h2><table><thead><tr><th>Signal Name</th><th>Direction</th><th>Bit Width</th><th align="left">Description</th></tr></thead><tbody><tr><td>rs1</td><td>Input</td><td>32</td><td align="left">Value in the first register to be compared</td></tr><tr><td>rs2</td><td>Input</td><td>32</td><td align="left">Value in the second register to be compared</td></tr><tr><td>BrUn</td><td>Input</td><td>1</td><td align="left">Equal to one when an unsigned comparison is wanted, or zero when a signed comparison is wanted</td></tr><tr><td>BrEq</td><td>Output</td><td>1</td><td align="left">Equal to one if the two values are equal</td></tr><tr><td>BrLt</td><td>Output</td><td>1</td><td align="left">Equal to one if the value in rs1 is less than the value in rs2</td></tr></tbody></table><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022012114625.png" alt="image-20241022012114625"></p><h2 id="Imm-Generator-çš„å®ç°"><a href="#Imm-Generator-çš„å®ç°" class="headerlink" title="Imm Generator çš„å®ç°"></a>Imm Generator çš„å®ç°</h2><table><thead><tr><th>Signal Name</th><th>Direction</th><th>Bit Width</th><th align="left">Description</th></tr></thead><tbody><tr><td>inst</td><td>Input</td><td>32</td><td align="left">The instruction being executed</td></tr><tr><td>ImmSel</td><td>Input</td><td>3</td><td align="left">Value determining how to reconstruct the immediate</td></tr><tr><td>imm</td><td>Output</td><td>32</td><td align="left">Value of the immediate in the instruction</td></tr></tbody></table><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022012250914.png" alt="image-20241022012250914"></p><h2 id="ç›®å‰æˆ‘å¡åœ¨-Control-Logic"><a href="#ç›®å‰æˆ‘å¡åœ¨-Control-Logic" class="headerlink" title="ç›®å‰æˆ‘å¡åœ¨ Control Logic"></a>ç›®å‰æˆ‘å¡åœ¨ Control Logic</h2><p>è¯¥æ–‡æ¡£å°†é‡ç‚¹è®°å½•æˆ‘å®ç°å¾€åçš„æ€è·¯</p><h3 id="10Â·21"><a href="#10Â·21" class="headerlink" title="10Â·21"></a>10Â·21</h3><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022012452360.png" alt="image-20241022012452360"></p><p>è¿™æ˜¯ CPU çš„ DataPathï¼Œç›®å‰æˆ‘åœ¨ç”µè·¯æ¨¡æ‹Ÿä¸­æ‰€ç”»çš„ç”µè·¯å›¾å¦‚ä¸‹:</p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022012656315.png" alt="image-20241022012656315"></p><blockquote><p>æˆ‘çš„ DMEM è¿˜æ²¡æœ‰ä½“ç°åœ¨è¿™é‡Œ</p></blockquote><p>æŒ‡å—ä¸­æ¨èçš„æ–¹æ³•æœ‰ï¼š</p><ul><li><strong>hard-wired control</strong>,<strong>ç¡¬è¿çº¿æ§åˆ¶</strong>ï¼Œå¦‚è®²åº§ä¸­æ‰€è¿°ï¼Œè¿™é€šå¸¸æ˜¯ MIPS å’Œ RISC-V ç­‰ RISC æ¶æ„çš„é¦–é€‰æ–¹æ³•ã€‚ç¡¬è¿çº¿æ§åˆ¶ä½¿ç”¨ â€œANDâ€ã€â€œORâ€ å’Œ â€œNOTâ€ é—¨ï¼ˆä»¥åŠæˆ‘ä»¬å­¦åˆ°çš„å¯ä»¥ä»è¿™äº›é—¨æ„å»ºçš„å„ç§ç»„ä»¶ï¼Œå¦‚ MUX å’Œ DEMUXï¼‰æ¥äº§ç”Ÿé€‚å½“çš„æ§åˆ¶ä¿¡å·ã€‚<strong>æŒ‡ä»¤è§£ç å™¨</strong>æ¥æ”¶ä¸€æ¡æŒ‡ä»¤å¹¶è¾“å‡ºè¯¥æŒ‡ä»¤çš„æ‰€æœ‰æ§åˆ¶ä¿¡å·ã€‚</li><li>å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ <strong>ROM æ§åˆ¶</strong>ã€‚å¤„ç†å™¨å®ç°çš„æ¯æ¡æŒ‡ä»¤éƒ½æ˜ å°„åˆ°åªè¯»å­˜å‚¨å™¨ ï¼ˆROMï¼‰ å•å…ƒä¸­çš„åœ°å€ã€‚ROM ä¸­è¯¥åœ°å€çš„ address æ˜¯è¯¥æŒ‡ä»¤çš„æ§åˆ¶å­—ã€‚<strong>åœ°å€è§£ç å™¨</strong>æ¥æ”¶ä¸€æ¡æŒ‡ä»¤å¹¶è¾“å‡ºè¯¥æŒ‡ä»¤çš„æ§åˆ¶å­—åœ°å€ã€‚è¿™ç§æ–¹æ³•åœ¨ Intel çš„ x86-64 ç­‰ CISC æ¶æ„ä¸­å¾ˆå¸¸è§ï¼Œå¹¶ä¸”åœ¨ç°å®ç”Ÿæ´»ä¸­æä¾›äº†ä¸€äº›çµæ´»æ€§ï¼Œå› ä¸ºå®ƒå¯ä»¥é€šè¿‡æ›´æ”¹ ROM çš„å†…å®¹æ¥é‡æ–°ç¼–ç¨‹ã€‚</li></ul><p>æˆ‘å°†ä½¿ç”¨ ROM æ§åˆ¶</p><h4 id="å…³äº-ROM-æ§åˆ¶"><a href="#å…³äº-ROM-æ§åˆ¶" class="headerlink" title="å…³äº ROM æ§åˆ¶"></a>å…³äº ROM æ§åˆ¶</h4><p>ROM ç›¸å…³è®²åº§åœ¨ Lec20 å½“ä¸­</p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022013003371.png" alt="image-20241022013003371"></p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022012952513.png" alt="image-20241022012952513"></p><p>ä»¥ä¸Šæ˜¯ ROM çš„å·¥ä½œåŸç†ï¼Œä»¥ add æŒ‡ä»¤ä¸ºä¾‹å­</p><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022013033709.png" alt="image-20241022013033709"></p><h4 id="ç›®å‰èµ„æ–™"><a href="#ç›®å‰èµ„æ–™" class="headerlink" title="ç›®å‰èµ„æ–™"></a>ç›®å‰èµ„æ–™</h4><h5 id="ROM-Control-Logic-è¡¨æ ¼"><a href="#ROM-Control-Logic-è¡¨æ ¼" class="headerlink" title="ROM Control Logic è¡¨æ ¼"></a>ROM Control Logic è¡¨æ ¼</h5><p><img src="/2024/10/22/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj3-%E6%9E%84%E5%BB%BACPU%E6%B5%81%E6%B0%B4%E7%BA%BF/image-20241022013223786.png" alt="image-20241022013223786"></p><h5 id="Lec20-çš„-ppt"><a href="#Lec20-çš„-ppt" class="headerlink" title="Lec20 çš„ ppt"></a>Lec20 çš„ ppt</h5><div class="row">    <embed src="lec20.pdf" width="100%" height="550" type="application/pdf"></div><h4 id="æ˜å¤©éœ€è¦åšçš„äº‹æƒ…"><a href="#æ˜å¤©éœ€è¦åšçš„äº‹æƒ…" class="headerlink" title="æ˜å¤©éœ€è¦åšçš„äº‹æƒ…"></a>æ˜å¤©éœ€è¦åšçš„äº‹æƒ…</h4><p>å®Œæ•´äº†è§£ä¸€é cpu æ•°æ®è·¯å¾„ï¼Œæ ¹æ® excel è¡¨æ ¼åˆæ­¥ç¡®è®¤è‡ªå·±è¦åšä»€ä¹ˆ</p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>12-CS61Cå­¦ä¹ ç¬”è®°-Pipelining</title>
      <link href="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/"/>
      <url>/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/</url>
      
        <content type="html"><![CDATA[<h1 id="6ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼Ÿå¤§æ€æƒ³"><a href="#6ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼Ÿå¤§æ€æƒ³" class="headerlink" title="6ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼Ÿå¤§æ€æƒ³"></a>6ä¸ªè®¡ç®—æœºä½“ç³»ç»“æ„çš„ä¼Ÿå¤§æ€æƒ³</h1><ol><li><p>æŠ½è±¡ï¼ˆè¡¨ç¤º&#x2F;è§£é‡Šçš„å±‚æ¬¡ï¼‰</p></li><li><p>æ‘©å°”å®šå¾‹</p></li><li><p>å±€éƒ¨æ€§åŸç†&#x2F;å†…å­˜å±‚æ¬¡ç»“æ„</p></li><li><p>å¹¶è¡Œæ€§</p></li><li><p>æ€§èƒ½æµ‹é‡ä¸æ”¹è¿›</p></li><li><p>å†—ä½™å®ç°çš„å¯é æ€§</p></li></ol><blockquote><h3 id="1-æŠ½è±¡ï¼ˆAbstractionï¼šLayers-of-Representation-Interpretationï¼‰"><a href="#1-æŠ½è±¡ï¼ˆAbstractionï¼šLayers-of-Representation-Interpretationï¼‰" class="headerlink" title="1. æŠ½è±¡ï¼ˆAbstractionï¼šLayers of Representation&#x2F;Interpretationï¼‰"></a>1. æŠ½è±¡ï¼ˆAbstractionï¼šLayers of Representation&#x2F;Interpretationï¼‰</h3><p>æŠ½è±¡æ˜¯å°†å¤æ‚çš„ç³»ç»Ÿåˆ†è§£ä¸ºæ›´ç®€å•çš„ã€å¯ç®¡ç†çš„å±‚æ¬¡ï¼Œæ¯ä¸€å±‚å¯¹ä¸Šå±‚æä¾›ç®€åŒ–çš„æ¥å£ã€‚è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­ï¼Œç¡¬ä»¶å’Œè½¯ä»¶çš„å„ä¸ªå±‚æ¬¡ï¼ˆä¾‹å¦‚ç”µè·¯ã€é€»è¾‘é—¨ã€æŒ‡ä»¤é›†ã€æ“ä½œç³»ç»Ÿç­‰ï¼‰éƒ½æ˜¯é€šè¿‡æŠ½è±¡æ¥å½¼æ­¤åˆ†ç¦»çš„ã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ç‰¹å®šçš„å±‚æ¬¡ä¸Šå·¥ä½œï¼Œè€Œä¸ç”¨äº†è§£åº•å±‚çš„ç»†èŠ‚ã€‚</p><h3 id="2-æ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s-Lawï¼‰"><a href="#2-æ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s-Lawï¼‰" class="headerlink" title="2. æ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s Lawï¼‰"></a>2. æ‘©å°”å®šå¾‹ï¼ˆMooreâ€™s Lawï¼‰</h3><p>æ‘©å°”å®šå¾‹æ˜¯ç”±è‹±ç‰¹å°”è”åˆåˆ›å§‹äººæˆˆç™»Â·æ‘©å°”æå‡ºçš„ï¼ŒæŒ‡å‡ºæ¯éš”çº¦18åˆ°24ä¸ªæœˆï¼Œé›†æˆç”µè·¯ä¸Šå¯å®¹çº³çš„æ™¶ä½“ç®¡æ•°é‡å°±ä¼šç¿»å€ï¼Œå¯¼è‡´è®¡ç®—èƒ½åŠ›çš„å¿«é€Ÿå¢é•¿ã€‚è™½ç„¶è¿™ä¸€è¶‹åŠ¿åœ¨æœ€è¿‘å‡ å¹´æœ‰æ‰€å‡ç¼“ï¼Œä½†å®ƒä»ç„¶æ˜¯ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„å‘å±•ä¸­æœ€é‡è¦çš„æ¨åŠ¨åŠ›ä¹‹ä¸€ã€‚</p><h3 id="3-å±€éƒ¨æ€§åŸç†-å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆPrinciple-of-Locality-Memory-Hierarchyï¼‰"><a href="#3-å±€éƒ¨æ€§åŸç†-å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆPrinciple-of-Locality-Memory-Hierarchyï¼‰" class="headerlink" title="3. å±€éƒ¨æ€§åŸç†&#x2F;å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆPrinciple of Locality&#x2F;Memory Hierarchyï¼‰"></a>3. å±€éƒ¨æ€§åŸç†&#x2F;å†…å­˜å±‚æ¬¡ç»“æ„ï¼ˆPrinciple of Locality&#x2F;Memory Hierarchyï¼‰</h3><p>å±€éƒ¨æ€§åŸç†è¡¨ç¤ºç¨‹åºå’Œæ•°æ®çš„è®¿é—®è¡Œä¸ºå…·æœ‰ç©ºé—´å’Œæ—¶é—´ä¸Šçš„å±€éƒ¨æ€§ï¼Œå³è®¿é—®æŸä¸€ä½ç½®çš„å†…å­˜åï¼Œæ¥ä¸‹æ¥å¾ˆå¯èƒ½ä¼šè®¿é—®å…¶é™„è¿‘çš„å†…å­˜ä½ç½®ã€‚åŸºäºè¿™ä¸€åŸç†ï¼Œè®¡ç®—æœºå†…å­˜ç³»ç»Ÿè¢«è®¾è®¡ä¸ºå±‚æ¬¡ç»“æ„ï¼Œå¦‚å¯„å­˜å™¨ã€ç¼“å­˜ã€ä¸»å­˜å’Œç¡¬ç›˜ç­‰ï¼Œä»¥å¹³è¡¡é€Ÿåº¦å’Œæˆæœ¬ã€‚åˆ©ç”¨ç¼“å­˜å¯ä»¥æ˜¾è‘—æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚</p><h3 id="4-å¹¶è¡Œæ€§ï¼ˆParallelismï¼‰"><a href="#4-å¹¶è¡Œæ€§ï¼ˆParallelismï¼‰" class="headerlink" title="4. å¹¶è¡Œæ€§ï¼ˆParallelismï¼‰"></a>4. å¹¶è¡Œæ€§ï¼ˆParallelismï¼‰</h3><p>å¹¶è¡Œæ€§æ˜¯æŒ‡é€šè¿‡åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡æ¥æé«˜æ€§èƒ½ã€‚ç°ä»£è®¡ç®—æœºç³»ç»Ÿä¸­çš„å¤šæ ¸å¤„ç†å™¨ã€å›¾å½¢å¤„ç†å•å…ƒï¼ˆGPUï¼‰ç­‰éƒ½åˆ©ç”¨å¹¶è¡Œæ€§æ¥æé«˜è®¡ç®—èƒ½åŠ›ã€‚å¹¶è¡Œæ€§å¯ä»¥å­˜åœ¨äºä¸åŒå±‚æ¬¡ï¼Œä¾‹å¦‚æŒ‡ä»¤çº§å¹¶è¡Œã€çº¿ç¨‹çº§å¹¶è¡Œå’Œæ•°æ®çº§å¹¶è¡Œç­‰ã€‚</p><h3 id="5-æ€§èƒ½æµ‹é‡ä¸æ”¹è¿›ï¼ˆPerformance-Measurement-Improvementï¼‰"><a href="#5-æ€§èƒ½æµ‹é‡ä¸æ”¹è¿›ï¼ˆPerformance-Measurement-Improvementï¼‰" class="headerlink" title="5. æ€§èƒ½æµ‹é‡ä¸æ”¹è¿›ï¼ˆPerformance Measurement &amp; Improvementï¼‰"></a>5. æ€§èƒ½æµ‹é‡ä¸æ”¹è¿›ï¼ˆPerformance Measurement &amp; Improvementï¼‰</h3><p>è¡¡é‡ç³»ç»Ÿæ€§èƒ½æ˜¯è®¾è®¡å’Œä¼˜åŒ–è®¡ç®—æœºä½“ç³»ç»“æ„çš„é‡è¦éƒ¨åˆ†ï¼Œå¸¸ç”¨çš„æ€§èƒ½æŒ‡æ ‡åŒ…æ‹¬æŒ‡ä»¤æ¯ç§’æ‰§è¡Œæ•°ï¼ˆIPSï¼‰ã€å»¶è¿Ÿã€ååé‡ç­‰ã€‚é€šè¿‡è¿™äº›æŒ‡æ ‡ï¼Œè®¾è®¡è€…å¯ä»¥è¯†åˆ«ç³»ç»Ÿç“¶é¢ˆå¹¶è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚é€šè¿‡æ›´é«˜æ•ˆçš„æŒ‡ä»¤é›†è®¾è®¡ã€ç¡¬ä»¶ä¼˜åŒ–ã€ç¼–è¯‘å™¨ä¼˜åŒ–ç­‰æé«˜æ€§èƒ½ã€‚</p><h3 id="6-å†—ä½™å®ç°çš„å¯é æ€§ï¼ˆDependability-via-Redundancyï¼‰"><a href="#6-å†—ä½™å®ç°çš„å¯é æ€§ï¼ˆDependability-via-Redundancyï¼‰" class="headerlink" title="6. å†—ä½™å®ç°çš„å¯é æ€§ï¼ˆDependability via Redundancyï¼‰"></a>6. å†—ä½™å®ç°çš„å¯é æ€§ï¼ˆDependability via Redundancyï¼‰</h3><p>ä¸ºäº†ç¡®ä¿ç³»ç»Ÿçš„å¯é æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å…³é”®ä»»åŠ¡åº”ç”¨ä¸­ï¼Œè®¾è®¡è€…å¾€å¾€é€šè¿‡å†—ä½™æ¥æé«˜å®¹é”™èƒ½åŠ›ã€‚å†—ä½™å¯ä»¥åœ¨ç¡¬ä»¶ã€è½¯ä»¶æˆ–æ•°æ®å±‚é¢è¿›è¡Œï¼Œä¾‹å¦‚å†—ä½™ç¡¬ç›˜é˜µåˆ—ï¼ˆRAIDï¼‰ã€é”™è¯¯æ£€æµ‹ä¸çº æ­£ç ï¼ˆECCï¼‰ç­‰ã€‚é€šè¿‡å¼•å…¥å†—ä½™ï¼Œå³ä¾¿æŸäº›ç»„ä»¶å‡ºç°æ•…éšœï¼Œç³»ç»Ÿä¾ç„¶èƒ½å¤Ÿç»§ç»­æ­£å¸¸è¿è¡Œã€‚</p></blockquote><p>è®©æˆ‘ä»¬é›†ä¸­åœ¨ç¬¬5ä¸ªæ€æƒ³ï¼šPerformance Measurement &amp; Improvement</p><h1 id="Instruction-Timing"><a href="#Instruction-Timing" class="headerlink" title="Instruction Timing"></a>Instruction Timing</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170555712.png" alt="image-20240908170555712"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170600629.png" alt="image-20240908170600629"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170636242.png" alt="image-20240908170636242"></p><h1 id="äº¤é€šå·¥å…·æ¨¡æ‹Ÿ"><a href="#äº¤é€šå·¥å…·æ¨¡æ‹Ÿ" class="headerlink" title="äº¤é€šå·¥å…·æ¨¡æ‹Ÿ"></a>äº¤é€šå·¥å…·æ¨¡æ‹Ÿ</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170714481.png" alt="image-20240908170714481"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170725957.png" alt="image-20240908170725957"></p><h1 id="å¤„ç†å™¨æ€§èƒ½é“å¾‹"><a href="#å¤„ç†å™¨æ€§èƒ½é“å¾‹" class="headerlink" title="å¤„ç†å™¨æ€§èƒ½é“å¾‹"></a>å¤„ç†å™¨æ€§èƒ½é“å¾‹</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908170758798.png" alt="image-20240908170758798"></p><h2 id="Instructions-per-Program"><a href="#Instructions-per-Program" class="headerlink" title="Instructions per Program"></a>Instructions per Program</h2><p>ç”±ä»¥ä¸‹å†³å®šï¼š</p><ul><li>ä»»åŠ¡</li><li>ç®—æ³•</li><li>ç¼–ç¨‹è¯­è¨€</li><li>ç¼–è¯‘ç¨‹åº</li><li>æŒ‡ä»¤é›†æ¶æ„Instruction Set Architecture( ISA )</li></ul><h2 id="CPI-Average-Clock-Cycle-per-Instruction"><a href="#CPI-Average-Clock-Cycle-per-Instruction" class="headerlink" title="CPI(Average) Clock Cycle per Instruction"></a>CPI(Average) Clock Cycle per Instruction</h2><p>ç”±ä»¥ä¸‹å†³å®šï¼š</p><ul><li>æŒ‡ä»¤é›†æ¶æ„Instruction Set Architecture( ISA )</li><li>å¤„ç†å™¨å®ç°(æˆ–å¾®ä½“ç³»ç»“æ„)</li><li>E.g. for â€œourâ€ single-cycle RISC-V design, CPI &#x3D; 1</li><li>å¤æ‚æŒ‡ä»¤(å¦‚strcpy )ï¼ŒCPI &gt; &gt; 1</li><li>è¶…æ ‡é‡å¤„ç†å™¨(Superscalar processors)ï¼ŒCPI &lt; 1</li></ul><h2 id="Time-per-Cycle-1-Frequency"><a href="#Time-per-Cycle-1-Frequency" class="headerlink" title="Time per Cycle(1&#x2F;Frequency)"></a>Time per Cycle(1&#x2F;Frequency)</h2><p>ç”±ä»¥ä¸‹å†³å®šï¼š</p><ul><li>å¤„ç†å™¨å¾®æ¶æ„(é€šè¿‡é€»è¾‘é—¨ç¡®å®šå…³é”®è·¯å¾„)</li><li>æŠ€æœ¯(ä¾‹å¦‚5nmå’Œ28nm)</li><li>åŠŸç‡é¢„ç®—(ä½ç”µå‹é™ä½äº†æ™¶ä½“ç®¡çš„é€Ÿåº¦)</li></ul><h2 id="é€Ÿåº¦æƒè¡¡-Speed-Tradeoff-ç¤ºä¾‹"><a href="#é€Ÿåº¦æƒè¡¡-Speed-Tradeoff-ç¤ºä¾‹" class="headerlink" title="é€Ÿåº¦æƒè¡¡(Speed Tradeoff)ç¤ºä¾‹"></a>é€Ÿåº¦æƒè¡¡(Speed Tradeoff)ç¤ºä¾‹</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908171113949.png" alt="image-20240908171113949"></p><blockquote><p>å…³é”®åœ¨äºCPI</p></blockquote><h1 id="å“è¿™ä¸ªåé¢ä¸æƒ³å†™ï¼Œä»¥åç”¨åˆ°äº†å†æ•´ç†"><a href="#å“è¿™ä¸ªåé¢ä¸æƒ³å†™ï¼Œä»¥åç”¨åˆ°äº†å†æ•´ç†" class="headerlink" title="å“è¿™ä¸ªåé¢ä¸æƒ³å†™ï¼Œä»¥åç”¨åˆ°äº†å†æ•´ç†"></a>å“è¿™ä¸ªåé¢ä¸æƒ³å†™ï¼Œä»¥åç”¨åˆ°äº†å†æ•´ç†</h1><h1 id="Pipelining"><a href="#Pipelining" class="headerlink" title="Pipelining"></a>Pipelining</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908231826914.png" alt="image-20240908231826914"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908231833729.png" alt="image-20240908231833729"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908231844914.png" alt="image-20240908231844914"></p><h1 id="Pipelining-Datapath"><a href="#Pipelining-Datapath" class="headerlink" title="Pipelining Datapath"></a>Pipelining Datapath</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908231917041.png" alt="image-20240908231917041"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908231943802.png" alt="image-20240908231943802"></p><h1 id="Pipeline-Hazards"><a href="#Pipeline-Hazards" class="headerlink" title="Pipeline Hazards"></a>Pipeline Hazards</h1><p>å±é™©æ˜¯åœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸä¸­é˜»æ­¢å¯åŠ¨ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æƒ…å†µ</p><ol><li><p>Structural hazard</p><ul><li>ä¸€ä¸ªéœ€è¦çš„èµ„æºæ˜¯ç¹å¿™çš„( e.g.éœ€è¦åœ¨å¤šä¸ªé˜¶æ®µè¿›è¡Œ)</li></ul></li><li><p>Data hazard</p><ul><li>æŒ‡ä»¤ä¹‹é—´çš„æ•°æ®ä¾èµ–å…³ç³»</li><li>éœ€è¦ç­‰å¾…ä¹‹å‰çš„æŒ‡ä»¤æ‰èƒ½å®Œæˆå…¶æ•°æ®è¯»å†™æ–¹æ³•</li></ul></li><li><p>Control hazard</p><ul><li>æ‰§è¡Œæµç¨‹å–å†³äºå…ˆå‰çš„æŒ‡ä»¤</li></ul></li></ol><ul><li>é—®é¢˜ï¼šæµæ°´çº¿ä¸­çš„ä¸¤æ¡æˆ–å¤šæ¡æŒ‡ä»¤ç«äº‰è®¿é—®å•ä¸ªç‰©ç†èµ„æº</li><li>è§£å†³æ–¹æ¡ˆ1ï¼šæŒ‡ä»¤è½®æµä½¿ç”¨èµ„æºï¼Œä¸€äº›æŒ‡ä»¤ä¸å¾—ä¸åœé¡¿ã€‚</li><li>è§£å†³æ–¹æ¡ˆ2ï¼šå¢åŠ æ›´å¤šçš„ç¡¬ä»¶åˆ°æœºå™¨ä¸­ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æ›´å¤šçš„ç¡¬ä»¶æ¥è§£å†³ç»“æ„å±é™©</li></ul><h2 id="Structural-hazard"><a href="#Structural-hazard" class="headerlink" title="Structural hazard"></a>Structural hazard</h2><ul><li>æ¯æ¡æŒ‡ä»¤ï¼š<ul><li>åœ¨è§£ç é˜¶æ®µå¯ä»¥è¯»åˆ°ä¸¤ä¸ªæ“ä½œæ•°</li><li>åœ¨å†™å›é˜¶æ®µå¯ä»¥å†™ä¸€ä¸ªå€¼ã€‚</li></ul></li><li>é€šè¿‡å…·æœ‰ç‹¬ç«‹çš„â€ç«¯å£â€æ¥é¿å…ç»“æ„å±é™©ã€‚<ul><li>ä¸¤ä¸ªç‹¬ç«‹çš„è¯»ç«¯å£å’Œä¸€ä¸ªç‹¬ç«‹çš„å†™ç«¯å£</li></ul></li><li>æ¯ä¸ªå‘¨æœŸå¯ä»¥åŒæ—¶è¿›è¡Œä¸‰æ¬¡è®¿é—®</li></ul><h3 id="Structural-hazard-å†…å­˜è®¿é—®"><a href="#Structural-hazard-å†…å­˜è®¿é—®" class="headerlink" title="Structural hazard: å†…å­˜è®¿é—®"></a>Structural hazard: å†…å­˜è®¿é—®</h3><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232419465.png" alt="image-20240908232419465"></p><h2 id="Data-Hazards"><a href="#Data-Hazards" class="headerlink" title="Data Hazards"></a>Data Hazards</h2><h3 id="å¯„å­˜å™¨è®¿é—®"><a href="#å¯„å­˜å™¨è®¿é—®" class="headerlink" title="å¯„å­˜å™¨è®¿é—®"></a>å¯„å­˜å™¨è®¿é—®</h3><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232621537.png" alt="image-20240908232621537"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232635998.png" alt="image-20240908232635998"></p><h3 id="Solution-1-Stalling"><a href="#Solution-1-Stalling" class="headerlink" title="Solution 1: Stalling"></a>Solution 1: Stalling</h3><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232650044.png" alt="image-20240908232650044"></p><h3 id="Solution-2-Forwarding"><a href="#Solution-2-Forwarding" class="headerlink" title="Solution 2: Forwarding"></a>Solution 2: Forwarding</h3><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232710697.png" alt="image-20240908232710697"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232719501.png" alt="image-20240908232719501"></p><h3 id="Pipelined-RV32I-Datapath"><a href="#Pipelined-RV32I-Datapath" class="headerlink" title="Pipelined RV32I Datapath"></a>Pipelined RV32I Datapath</h3><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232732386.png" alt="image-20240908232732386"></p><h2 id="Load-Data-Hazard"><a href="#Load-Data-Hazard" class="headerlink" title="Load Data Hazard"></a>Load Data Hazard</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232902628.png" alt="image-20240908232902628"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Pipelining/image-20240908232910469.png" alt="image-20240908232910469"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>11-CS61Cå­¦ä¹ ç¬”è®°-SingleCycleCPU_Control</title>
      <link href="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/"/>
      <url>/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/</url>
      
        <content type="html"><![CDATA[<p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165353509.png" alt="image-20240908165353509"></p><h1 id="æ§åˆ¶å¯„å­˜å™¨å’ŒçŠ¶æ€å¯„å­˜å™¨"><a href="#æ§åˆ¶å¯„å­˜å™¨å’ŒçŠ¶æ€å¯„å­˜å™¨" class="headerlink" title="æ§åˆ¶å¯„å­˜å™¨å’ŒçŠ¶æ€å¯„å­˜å™¨"></a>æ§åˆ¶å¯„å­˜å™¨å’ŒçŠ¶æ€å¯„å­˜å™¨</h1><ul><li>æ§åˆ¶å’ŒçŠ¶æ€å¯„å­˜å™¨( CSR )ä»å¯„å­˜å™¨æ–‡ä»¶( x0-x31 )ä¸­åˆ†ç¦»å‡ºæ¥ã€‚<ul><li>ç”¨äºç›‘æµ‹çŠ¶æ€å’Œæ€§èƒ½</li><li>CSRsæœ€å¤šå¯è¾¾4096ä¸ª</li></ul></li><li>ä¸åœ¨åŸºç¡€çš„ISAä¸­ï¼Œä½†å‡ ä¹åœ¨æ¯ä¸€ä¸ªå®ç°ä¸­éƒ½æ˜¯å¼ºåˆ¶æ€§çš„<ul><li>ISAæ˜¯æ¨¡å—åŒ–çš„</li><li>å¿…è¦çš„è®¡æ•°å™¨å’Œå®šæ—¶å™¨ï¼Œä»¥åŠä¸å¤–è®¾çš„é€šä¿¡</li></ul></li></ul><h1 id="CSRæŒ‡ä»¤"><a href="#CSRæŒ‡ä»¤" class="headerlink" title="CSRæŒ‡ä»¤"></a>CSRæŒ‡ä»¤</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165504240.png" alt="image-20240908165504240"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165545804.png" alt="image-20240908165545804"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165553055.png" alt="image-20240908165553055"></p><blockquote><ul><li>CSRRW (åŸå­è¯»å†™æ–¹æ³•CSR)æŒ‡ä»¤â€åŸå­æ€§â€åœ°äº¤æ¢CSRå’Œæ•´æ•°å¯„å­˜å™¨ä¸­çš„å€¼ã€‚</li><li>CSRRWè¯»å–CSRçš„å‰ä¸€ä¸ªå€¼ï¼Œå¹¶å†™å…¥æ•´æ•°å¯„å­˜å™¨rdã€‚ç„¶åå°†rs1å†™å…¥CSR</li><li>ä¼ªæŒ‡ä»¤csrw csrï¼Œrs1ä¸ºcsrrw x0ï¼Œcsrï¼Œrs1<ul><li>rd &#x3D; x0ï¼Œåªéœ€å°†rs1å†™å…¥CSRå³å¯</li></ul></li><li>ä¼ªæŒ‡ä»¤csrwi csrï¼Œuimmä¸ºcsrrwi x0ï¼Œcsrï¼Œuimm<ul><li>Rd &#x3D; x0ï¼Œåªéœ€å°†uimmå†™å…¥CSR</li></ul></li><li>æç¤ºï¼šä½¿ç”¨write enable å’Œæ—¶é’Ÿ. . .</li></ul></blockquote><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165718248.png" alt="image-20240908165718248"></p><h1 id="Single-Cycle-RV32I-Datapath-and-Control"><a href="#Single-Cycle-RV32I-Datapath-and-Control" class="headerlink" title="Single-Cycle RV32I Datapath and Control"></a>Single-Cycle RV32I Datapath and Control</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165737888.png" alt="image-20240908165737888"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165743534.png" alt="image-20240908165743534"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165748168.png" alt="image-20240908165748168"></p><h1 id="Instruction-timing"><a href="#Instruction-timing" class="headerlink" title="Instruction timing"></a>Instruction timing</h1><h2 id="add"><a href="#add" class="headerlink" title="add"></a>add</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165806784.png" alt="image-20240908165806784"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165812393.png" alt="image-20240908165812393"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165818824.png" alt="image-20240908165818824"></p><h2 id="lw"><a href="#lw" class="headerlink" title="lw"></a>lw</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165841871.png" alt="image-20240908165841871"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165848120.png" alt="image-20240908165848120"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165853362.png" alt="image-20240908165853362"></p><h1 id="Control-Logic-Design"><a href="#Control-Logic-Design" class="headerlink" title="Control Logic Design"></a>Control Logic Design</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908165906745.png" alt="image-20240908165906745"></p><h2 id="æ§åˆ¶å®ç°æ–¹å¼çš„é€‰æ‹©"><a href="#æ§åˆ¶å®ç°æ–¹å¼çš„é€‰æ‹©" class="headerlink" title="æ§åˆ¶å®ç°æ–¹å¼çš„é€‰æ‹©"></a>æ§åˆ¶å®ç°æ–¹å¼çš„é€‰æ‹©</h2><ul><li>ROM<ul><li>Read Only Memory</li><li>è§„åˆ™ç»“æ„</li><li>Can be easily reprogrammed<ul><li>fix errors  </li><li>add instructions</li></ul></li><li>åœ¨æ‰‹åŠ¨è®¾è®¡æ§åˆ¶é€»è¾‘æ—¶æµè¡Œ</li></ul></li><li>ç»„åˆé€»è¾‘<ul><li>å¦‚ä»Šï¼ŒèŠ¯ç‰‡è®¾è®¡è€…ä½¿ç”¨é€»è¾‘ç»¼åˆå·¥å…·å°†çœŸå€¼è¡¨è½¬æ¢ä¸ºé—¨çš„ç½‘ç»œ</li></ul></li></ul><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908170059966.png" alt="image-20240908170059966"></p><h2 id="ROM-based-Control"><a href="#ROM-based-Control" class="headerlink" title="ROM-based Control"></a>ROM-based Control</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908170123564.png" alt="image-20240908170123564"></p><h2 id="Rom-Controllerçš„å®ç°"><a href="#Rom-Controllerçš„å®ç°" class="headerlink" title="Rom Controllerçš„å®ç°"></a>Rom Controllerçš„å®ç°</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908170137561.png" alt="image-20240908170137561"></p><h2 id="Combinational-Logic-Control"><a href="#Combinational-Logic-Control" class="headerlink" title="Combinational Logic Control"></a>Combinational Logic Control</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908170150818.png" alt="image-20240908170150818"></p><h2 id="Control-Logic-to-Decode-add"><a href="#Control-Logic-to-Decode-add" class="headerlink" title="Control Logic to Decode add"></a>Control Logic to Decode add</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Control/image-20240908170219233.png" alt="image-20240908170219233"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°-SingleCycleCPU_Datapath(å)</title>
      <link href="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/"/>
      <url>/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/</url>
      
        <content type="html"><![CDATA[<h1 id="Risc-V-å¤„ç†å™¨è®¾è®¡"><a href="#Risc-V-å¤„ç†å™¨è®¾è®¡" class="headerlink" title="Risc - V å¤„ç†å™¨è®¾è®¡"></a>Risc - V å¤„ç†å™¨è®¾è®¡</h1><h2 id="The-CPU"><a href="#The-CPU" class="headerlink" title="The CPU"></a>The CPU</h2><h3 id="Processor-CPU"><a href="#Processor-CPU" class="headerlink" title="Processor(CPU)"></a>Processor(CPU)</h3><p>è®¡ç®—æœºçš„æ´»åŠ¨éƒ¨åˆ†å³å®Œæˆå…¨éƒ¨å·¥ä½œçš„(æ•°æ®æ“çºµä¸å†³ç­–)</p><h3 id="Datapath"><a href="#Datapath" class="headerlink" title="Datapath"></a>Datapath</h3><p>å¤„ç†å™¨çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«æ‰§è¡Œå¤„ç†å™¨æ‰€éœ€æ“ä½œæ‰€éœ€çš„ç¡¬ä»¶( è‚Œè‚‰ )</p><h3 id="Control"><a href="#Control" class="headerlink" title="Control"></a>Control</h3><p>å¤„ç†å™¨çš„ä¸€éƒ¨åˆ†(åœ¨ç¡¬ä»¶æ–¹é¢ä¹Ÿæ˜¯å¦‚æ­¤)ï¼Œå‘Šè¯‰æ•°æ®é€šè·¯éœ€è¦åšä»€ä¹ˆ(å¤§è„‘)</p><h2 id="éœ€è¦å®ç°çš„æ‰€æœ‰-Rv32I-æŒ‡ä»¤"><a href="#éœ€è¦å®ç°çš„æ‰€æœ‰-Rv32I-æŒ‡ä»¤" class="headerlink" title="éœ€è¦å®ç°çš„æ‰€æœ‰ Rv32I æŒ‡ä»¤"></a>éœ€è¦å®ç°çš„æ‰€æœ‰ Rv32I æŒ‡ä»¤</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908151829845.png" alt="image-20240908151829845"></p><h2 id="å•æŒ‡ä»¤æ¯å‘¨æœŸ-Risc-V-æœº"><a href="#å•æŒ‡ä»¤æ¯å‘¨æœŸ-Risc-V-æœº" class="headerlink" title="å•æŒ‡ä»¤æ¯å‘¨æœŸ Risc - V æœº"></a>å•æŒ‡ä»¤æ¯å‘¨æœŸ Risc - V æœº</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908151937450.png" alt="image-20240908151937450"></p><ul><li>åœ¨æ—¶é’Ÿçš„æ¯ä¸€ä¸ªåˆ»åº¦ä¸Šï¼Œè®¡ç®—æœºæ‰§è¡Œä¸€æ¡æŒ‡ä»¤</li><li>å½“å‰çŠ¶æ€çš„è¾“å‡º<strong>é©±åŠ¨</strong>ç»„åˆé€»è¾‘çš„è¾“å…¥ï¼Œç»„åˆé€»è¾‘çš„è¾“å‡ºå›ºå®šåœ¨ä¸‹ä¸€ä¸ªæ—¶é’Ÿè¾¹ä¹‹å‰çš„çŠ¶æ€å€¼</li><li>åœ¨ä¸Šå‡çš„æ—¶é’Ÿè¾¹æ²¿ï¼Œæ‰€æœ‰çš„çŠ¶æ€å˜é‡ç”¨ç»„åˆé€»è¾‘è¾“å‡ºè¿›è¡Œæ›´æ–°ï¼Œæ‰§è¡Œè½¬ç§»åˆ°ä¸‹ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸ</li></ul><h2 id="æ•°æ®é€šè·¯çš„é˜¶æ®µï¼šæ¦‚è¿°"><a href="#æ•°æ®é€šè·¯çš„é˜¶æ®µï¼šæ¦‚è¿°" class="headerlink" title="æ•°æ®é€šè·¯çš„é˜¶æ®µï¼šæ¦‚è¿°"></a>æ•°æ®é€šè·¯çš„é˜¶æ®µï¼šæ¦‚è¿°</h2><ul><li>é—®é¢˜ï¼šâ€æ‰§è¡ŒæŒ‡ä»¤â€ çš„å•ä¸ªâ€å•ç‰‡â€å—(ä»å–æŒ‡ä»¤å¼€å§‹æ‰§è¡Œæ‰€æœ‰å¿…è¦çš„æ“ä½œ)è¿‡äºåºå¤§ï¼Œæ•ˆç‡ä½ä¸‹</li><li>è§£å†³æ–¹æ³•ï¼šå°†â€æ‰§è¡ŒæŒ‡ä»¤â€çš„è¿‡ç¨‹åˆ†è§£ä¸ºé˜¶æ®µï¼Œç„¶åè¿æ¥å„ä¸ªé˜¶æ®µåˆ›å»ºæ•´ä¸ªæ•°æ®é€šè·¯<ul><li>-æ›´å°çš„é˜¶æ®µæ›´å®¹æ˜“è®¾è®¡</li><li>-å®¹æ˜“ä¼˜åŒ–(æ›´æ”¹)ä¸€ä¸ªé˜¶æ®µè€Œä¸æ¥è§¦å…¶ä»–é˜¶æ®µ(æ¨¡å—åŒ–)</li></ul></li></ul><h2 id="æ•°æ®é€šè·¯çš„äº”ä¸ªé˜¶æ®µ"><a href="#æ•°æ®é€šè·¯çš„äº”ä¸ªé˜¶æ®µ" class="headerlink" title="æ•°æ®é€šè·¯çš„äº”ä¸ªé˜¶æ®µ"></a>æ•°æ®é€šè·¯çš„äº”ä¸ªé˜¶æ®µ</h2><ul><li>Stage 1: Instruction Fetch (IF)<ul><li>å–æŒ‡ä»¤</li></ul></li><li>Stage 2: Instruction Decode (ID)<ul><li>æŒ‡ä»¤è§£ç </li></ul></li><li>Stage 3: Execute (EX) - ALU (Arithmetic-Logic Unit)<ul><li>æ‰§è¡Œ</li></ul></li><li>Stage 4: Memory Access (MEM)<ul><li>å­˜å‚¨å™¨å­˜å–</li></ul></li><li>Stage 5: Write Back to Register (WB)<ul><li>å†™å›å¯„å­˜å™¨</li></ul></li></ul><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908152423453.png" alt="image-20240908152423453"></p><h1 id="R-Type-Add-Datapath"><a href="#R-Type-Add-Datapath" class="headerlink" title="R-Type Add Datapath"></a>R-Type Add Datapath</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908152822758.png" alt="image-20240908152822758"></p><h2 id="add-æŒ‡ä»¤çš„å®ç°"><a href="#add-æŒ‡ä»¤çš„å®ç°" class="headerlink" title="add æŒ‡ä»¤çš„å®ç°"></a>add æŒ‡ä»¤çš„å®ç°</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908152853063.png" alt="image-20240908152853063"></p><h2 id="Datapath-for-add"><a href="#Datapath-for-add" class="headerlink" title="Datapath for add"></a>Datapath for add</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908152921456.png" alt="image-20240908152921456"></p><h2 id="add-æ—¶åºå›¾"><a href="#add-æ—¶åºå›¾" class="headerlink" title="add æ—¶åºå›¾"></a>add æ—¶åºå›¾</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908152941025.png" alt="image-20240908152941025"></p><h1 id="Sub-Datapath"><a href="#Sub-Datapath" class="headerlink" title="Sub Datapath"></a>Sub Datapath</h1><h2 id="sub-æŒ‡ä»¤çš„å®ç°"><a href="#sub-æŒ‡ä»¤çš„å®ç°" class="headerlink" title="sub æŒ‡ä»¤çš„å®ç°"></a>sub æŒ‡ä»¤çš„å®ç°</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153118051.png" alt="image-20240908153118051"></p><h2 id="add-sub-çš„-Datapath"><a href="#add-sub-çš„-Datapath" class="headerlink" title="add&#x2F;sub çš„ Datapath"></a>add&#x2F;sub çš„ Datapath</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153144170.png" alt="image-20240908153144170"></p><h2 id="Implementing-Other-R-Format-Instructions"><a href="#Implementing-Other-R-Format-Instructions" class="headerlink" title="Implementing Other R-Format Instructions"></a>Implementing Other R-Format Instructions</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153213678.png" alt="image-20240908153213678"></p><h1 id="Datapath-with-Immediates"><a href="#Datapath-with-Immediates" class="headerlink" title="Datapath with Immediates"></a>Datapath with Immediates</h1><h2 id="Implementing-I-Format-addi-instruction"><a href="#Implementing-I-Format-addi-instruction" class="headerlink" title="Implementing I-Format - addi instruction"></a>Implementing I-Format - addi instruction</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153253497.png" alt="image-20240908153253497"></p><h2 id="Adding-addi-to-Datapath"><a href="#Adding-addi-to-Datapath" class="headerlink" title="Adding addi to Datapath"></a>Adding addi to Datapath</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153312865.png" alt="image-20240908153312865"></p><blockquote><p>I-Format çš„æ„é€ åŸºæœ¬ä¸Šå’Œ R-Type çš„ç›¸åŒï¼Œåªéœ€è¦æŠŠ Re[rs2]çš„å€¼æ”¹æˆä¼ é€’çš„ Imm å€¼å°±å¥½äº†</p></blockquote><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153321466.png" alt="image-20240908153321466"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153344363.png" alt="image-20240908153344363"></p><blockquote><p>Imm. Gen å°† Inst å½“ä¸­[31:20]çš„å€¼æ‰©å±•ä¸º Imm[31:0]ï¼Œå¦‚ä¸‹å›¾</p></blockquote><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153506405.png" alt="image-20240908153506405"></p><blockquote><p>å¯¹äºå…¶ä»–æ‰€æœ‰ I æ ¼å¼ç®—æœ¯æŒ‡ä»¤( slti , sltiu , andi , ori , xori , slli , srli , srai)ï¼Œåªéœ€æ›´æ”¹ ALUSel å³å¯</p></blockquote><h1 id="Datapath-for-Loads"><a href="#Datapath-for-Loads" class="headerlink" title="Datapath for Loads"></a>Datapath for Loads</h1><h2 id="Add-lw"><a href="#Add-lw" class="headerlink" title="Add lw"></a>Add lw</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908153829272.png" alt="image-20240908153829272"></p><h2 id="R-I-Arithmetic-Logic-Datapath"><a href="#R-I-Arithmetic-Logic-Datapath" class="headerlink" title="R+I Arithmetic&#x2F;Logic Datapath"></a>R+I Arithmetic&#x2F;Logic Datapath</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154043423.png" alt="image-20240908154043423"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154026017.png" alt="image-20240908154026017"></p><h2 id="All-RV32-Load-Instructions"><a href="#All-RV32-Load-Instructions" class="headerlink" title="All RV32 Load Instructions"></a>All RV32 Load Instructions</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154140968.png" alt="image-20240908154140968"></p><blockquote><p>Funct3 å­—æ®µç¼–ç è´Ÿè½½æ•°æ®çš„å¤§å°å’Œâ€ç¬¦å·æ€§â€</p></blockquote><h1 id="Datapath-for-Stores"><a href="#Datapath-for-Stores" class="headerlink" title="Datapath for Stores"></a>Datapath for Stores</h1><h2 id="æ·»åŠ -sw-æŒ‡ä»¤"><a href="#æ·»åŠ -sw-æŒ‡ä»¤" class="headerlink" title="æ·»åŠ  sw æŒ‡ä»¤"></a>æ·»åŠ  sw æŒ‡ä»¤</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154304703.png" alt="image-20240908154304703"></p><blockquote><p>è¯»å–ä¸¤ä¸ªå¯„å­˜å™¨ï¼Œrs1 ä¸ºåŸºå†…å­˜åœ°å€ï¼Œrs2 ä¸ºå¾…å­˜å‚¨çš„æ•°æ®ï¼Œä»¥åŠç«‹å³åè½¬å€¼</p></blockquote><h2 id="Adding-sw-to-Datapath"><a href="#Adding-sw-to-Datapath" class="headerlink" title="Adding sw to Datapath"></a>Adding sw to Datapath</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154426614.png" alt="image-20240908154426614"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154440506.png" alt="image-20240908154440506"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154453442.png" alt="image-20240908154453442"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154648351.png" alt="image-20240908154648351"></p><h2 id="I-S-Immediate-Generation"><a href="#I-S-Immediate-Generation" class="headerlink" title="I+S Immediate Generation"></a>I+S Immediate Generation</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154657023.png" alt="image-20240908154657023"></p><ul><li><p>åªéœ€è¦ä¸€ä¸ª 5 ä½çš„å¤šè·¯å¤ç”¨å™¨æ¥é€‰æ‹©ç«‹å³æ•°çš„ä½ 5 ä½åœ¨æŒ‡ä»¤ä¸­çš„ä¸¤ä¸ªä½ç½®ä¹‹é—´ã€‚</p></li><li><p>ç«‹å³æ•°çš„å…¶ä»–ä½è¢«è¿æ¥åˆ°æŒ‡ä»¤ä¸­çš„å›ºå®šä½ç½®ã€‚</p></li></ul><blockquote><p><strong>I å‹å’Œ S å‹æŒ‡ä»¤æ ¼å¼</strong>ï¼š</p><ul><li>I å‹æŒ‡ä»¤ï¼šç«‹å³æ•°ä½äºæŒ‡ä»¤çš„[31:20]ä½ã€‚</li><li>S å‹æŒ‡ä»¤ï¼šç«‹å³æ•°è¢«æ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä½äºæŒ‡ä»¤çš„[31:25]ä½ï¼Œå¦ä¸€éƒ¨åˆ†ä½äº[11:7]ä½ã€‚</li></ul><p><strong>å¤šè·¯é€‰æ‹©å™¨çš„ä½œç”¨</strong>ï¼š</p><ul><li>å›¾ä¸­çš„ 5 ä½å¤šè·¯å¤ç”¨å™¨ï¼ˆ5-bit muxï¼‰ç”¨äºåœ¨ç«‹å³æ•°çš„ä½ 5 ä½çš„ä½ç½®ä¹‹é—´è¿›è¡Œé€‰æ‹©ã€‚å…·ä½“æ¥è¯´ï¼š<ul><li>å¯¹äº I å‹æŒ‡ä»¤ï¼Œç«‹å³æ•°çš„ä½ 5 ä½ä½äº[24:20]ä½ã€‚</li><li>å¯¹äº S å‹æŒ‡ä»¤ï¼Œç«‹å³æ•°çš„ä½ 5 ä½ä½äº[11:7]ä½ã€‚</li></ul></li><li>è¯¥å¤šè·¯é€‰æ‹©å™¨æ ¹æ®æŒ‡ä»¤ç±»å‹é€‰æ‹©æ­£ç¡®çš„ä½ç½®ï¼Œå°†ç«‹å³æ•°çš„è¿™ 5 ä½æå–å‡ºæ¥ã€‚</li></ul><p><strong>å…¶ä»–ä½çš„å¤„ç†</strong>ï¼š</p><ul><li>ç«‹å³æ•°çš„å…¶ä½™éƒ¨åˆ†ï¼Œä¾‹å¦‚ç¬¦å·æ‰©å±•ï¼ˆsign extensionï¼‰ç­‰ï¼ŒæŒ‰ç…§å›ºå®šçš„ä½ç½®åˆ†é…åˆ°æŒ‡ä»¤çš„ä¸åŒä½ä¸­ã€‚å¯¹äºç¬¦å·æ‰©å±•ï¼Œç«‹å³æ•°çš„æœ€é«˜æœ‰æ•ˆä½ï¼ˆç¬¬ 31 ä½ï¼‰é€šè¿‡ç¬¦å·æ‰©å±•å¡«å……åˆ°æœ€ç»ˆçš„ç«‹å³æ•°ä¸­ã€‚</li></ul></blockquote><h2 id="All-RV32-Store-Instructions"><a href="#All-RV32-Store-Instructions" class="headerlink" title="All RV32 Store Instructions"></a>All RV32 Store Instructions</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154816320.png" alt="image-20240908154816320"></p><h1 id="å®ç°-Branches"><a href="#å®ç°-Branches" class="headerlink" title="å®ç° Branches"></a>å®ç° Branches</h1><h2 id="RISC-V-B-Format-for-Branches"><a href="#RISC-V-B-Format-for-Branches" class="headerlink" title="RISC-V B-Format for Branches"></a>RISC-V B-Format for Branches</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154834693.png" alt="image-20240908154834693"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154925884.png" alt="image-20240908154925884"></p><h2 id="Addding-Branches-to-Datapath"><a href="#Addding-Branches-to-Datapath" class="headerlink" title="Addding Branches to Datapath"></a>Addding Branches to Datapath</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154939949.png" alt="image-20240908154939949"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908154956106.png" alt="image-20240908154956106"></p><h2 id="Branch-Comparator"><a href="#Branch-Comparator" class="headerlink" title="Branch Comparator"></a>Branch Comparator</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908155716874.png" alt="image-20240908155716874"></p><h2 id="Branch-Immediates"><a href="#Branch-Immediates" class="headerlink" title="Branch Immediates"></a>Branch Immediates</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160041505.png" alt="image-20240908160041505"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160049387.png" alt="image-20240908160049387"></p><h2 id="done"><a href="#done" class="headerlink" title="done"></a>done</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160057989.png" alt="image-20240908160057989"></p><h1 id="JALR-Datapath"><a href="#JALR-Datapath" class="headerlink" title="JALR Datapath"></a>JALR Datapath</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160738419.png" alt="image-20240908160738419"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160747255.png" alt="image-20240908160747255"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160752958.png" alt="image-20240908160752958"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160759411.png" alt="image-20240908160759411"></p><h1 id="JAL-Datapath"><a href="#JAL-Datapath" class="headerlink" title="JAL Datapath"></a>JAL Datapath</h1><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160838183.png" alt="image-20240908160838183"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160845289.png" alt="image-20240908160845289"></p><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908160850328.png" alt="image-20240908160850328"></p><h1 id="U-Types"><a href="#U-Types" class="headerlink" title="U-Types"></a>U-Types</h1><h2 id="U-Format-for-â€œUpper-Immediateâ€-Instructions"><a href="#U-Format-for-â€œUpper-Immediateâ€-Instructions" class="headerlink" title="U-Format for â€œUpper Immediateâ€ Instructions"></a>U-Format for â€œUpper Immediateâ€ Instructions</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908161200550.png" alt="image-20240908161200550"></p><h2 id="Datapath-With-LUI-AUIPC"><a href="#Datapath-With-LUI-AUIPC" class="headerlink" title="Datapath With LUI, AUIPC"></a>Datapath With LUI, AUIPC</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908161213831.png" alt="image-20240908161213831"></p><h2 id="Lighting-Up-LUI"><a href="#Lighting-Up-LUI" class="headerlink" title="Lighting Up LUI"></a>Lighting Up LUI</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908161227448.png" alt="image-20240908161227448"></p><h2 id="Lighting-Up-AUIPC"><a href="#Lighting-Up-AUIPC" class="headerlink" title="Lighting Up AUIPC"></a>Lighting Up AUIPC</h2><p><img src="/2024/09/08/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-SingleCycleCPU-Datapath/image-20240908161236681.png" alt="image-20240908161236681"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ç¬”è®°(ä¸€)-Kotlinè¯­æ³•</title>
      <link href="/2024/08/24/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-1-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-%E7%AC%94%E8%AE%B0-Kotlin%E8%AF%AD%E6%B3%95/"/>
      <url>/2024/08/24/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-1-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-%E7%AC%94%E8%AE%B0-Kotlin%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h1><p>åœ¨Kotlinä¸­ï¼Œå˜é‡åˆ†æœ‰<code>val</code>(value)å’Œ<code>var</code>(variable)ä¿®é¥°çš„å˜é‡ç±»å‹ï¼Œç”±äºKotlinæœ‰ç±»å‹æ¨å¯¼æœºåˆ¶ï¼Œå› æ­¤å¯ä»¥ä¸å£°æ˜å˜é‡æ•°æ®ç±»å‹ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> a = <span class="number">10</span></span><br><span class="line"><span class="comment">// valå˜é‡ä¸å¯å˜</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="number">10</span></span><br><span class="line"><span class="comment">// varå˜é‡å¯å˜</span></span><br><span class="line">b = <span class="number">20</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾æ€§åœ°å£°æ˜å˜é‡ç±»å‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> a: <span class="built_in">Int</span> = <span class="number">10</span></span><br></pre></td></tr></table></figure><p>å’ŒJavaä¸åŒçš„æ˜¯ï¼Œåœ¨Kotlinä¸­æ¯ä¸ªå˜é‡ç±»å‹éƒ½æ˜¯ç±»ï¼Œå› æ­¤å˜é‡ç±»å‹éƒ½æ˜¯<strong>å¼€å¤´å¤§å†™çš„</strong></p><p><img src="/2024/08/24/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-1-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-%E7%AC%94%E8%AE%B0-Kotlin%E8%AF%AD%E6%B3%95/image-20240824140619262.png" alt="image-20240824140619262"></p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><p>å‡½æ•°ä½“å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">methodName</span><span class="params">(param1: <span class="type">Int</span>, param2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆfunï¼ˆfunctionçš„ç®€å†™ï¼‰æ˜¯å®šä¹‰å‡½æ•°çš„å…³é”®å­—ï¼Œæ— è®ºä½  å®šä¹‰ä»€ä¹ˆå‡½æ•°ï¼Œéƒ½ä¸€å®šè¦ä½¿ç”¨funæ¥å£°æ˜ã€‚ </p><p>ç´§è·Ÿåœ¨funåé¢çš„æ˜¯å‡½æ•°åï¼Œè¿™ä¸ªå°±æ²¡æœ‰ä»€ä¹ˆè¦æ±‚äº†ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½èµ·ä»»ä½•åå­—ï¼Œä½†æ˜¯ è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯æ˜¯å‡½æ•°åæœ€å¥½è¦æœ‰ä¸€å®šçš„æ„ä¹‰ï¼Œèƒ½è¡¨è¾¾è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆã€‚ </p><p>å‡½æ•°ååé¢ç´§è·Ÿç€ä¸€å¯¹æ‹¬å·ï¼Œé‡Œé¢å¯ä»¥å£°æ˜è¯¥å‡½æ•°æ¥æ”¶ä»€ä¹ˆå‚æ•°ï¼Œå‚æ•°çš„æ•°é‡å¯ä»¥æ˜¯ä»»æ„å¤š ä¸ªï¼Œä¾‹å¦‚ä¸Šè¿°ç¤ºä¾‹å°±è¡¨ç¤ºè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªIntç±»å‹çš„å‚æ•°ã€‚å‚æ•°çš„å£°æ˜æ ¼å¼æ˜¯â€œå‚æ•°å: å‚æ•°ç±» å‹â€ï¼Œå…¶ä¸­å‚æ•°åä¹Ÿæ˜¯å¯ä»¥éšä¾¿å®šä¹‰çš„ï¼Œè¿™ä¸€ç‚¹å’Œå‡½æ•°åç±»ä¼¼ã€‚å¦‚æœä¸æƒ³æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œé‚£ä¹ˆå†™ ä¸€å¯¹ç©ºæ‹¬å·å°±å¯ä»¥äº†ã€‚</p><p> å‚æ•°æ‹¬å·åé¢çš„é‚£éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œç”¨äºå£°æ˜è¯¥å‡½æ•°ä¼šè¿”å›ä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œä¸Šè¿°ç¤ºä¾‹å°±è¡¨ç¤ºè¯¥ å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªIntç±»å‹çš„æ•°æ®ã€‚å¦‚æœä½ çš„å‡½æ•°ä¸éœ€è¦è¿”å›ä»»ä½•æ•°æ®ï¼Œè¿™éƒ¨åˆ†å¯ä»¥ç›´æ¥ä¸å†™ã€‚ </p><p>æœ€åä¸¤ä¸ªå¤§æ‹¬å·ä¹‹é—´çš„å†…å®¹å°±æ˜¯å‡½æ•°ä½“äº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œç¼–å†™ä¸€ä¸ªå‡½æ•°çš„å…·ä½“é€»è¾‘ã€‚ç”±äºä¸Š è¿°ç¤ºä¾‹ä¸­å£°æ˜äº†è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªIntç±»å‹çš„æ•°æ®ï¼Œå› æ­¤åœ¨å‡½æ•°ä½“ä¸­æˆ‘ä»¬ç®€å•åœ°è¿”å›äº†ä¸€ä¸ª0ã€‚ è¿™å°±æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°æœ€æ ‡å‡†çš„æ–¹å¼äº†</p><h2 id="å‡½æ•°è¯­æ³•ç³–"><a href="#å‡½æ•°è¯­æ³•ç³–" class="headerlink" title="å‡½æ•°è¯­æ³•ç³–"></a>å‡½æ•°è¯­æ³•ç³–</h2><p>å¦‚æœå‡½æ•°åªæœ‰ä¸€è¡Œä»£ç æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¿…å†™å‡½æ•°ä½“ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> = max(num1, num2)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©Kotlinçš„ç±»å‹æ¨å¯¼æœºåˆ¶å†ç®€åŒ–</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span> = max(num1, num2)</span><br></pre></td></tr></table></figure><h1 id="é€»è¾‘æ§åˆ¶"><a href="#é€»è¾‘æ§åˆ¶" class="headerlink" title="é€»è¾‘æ§åˆ¶"></a>é€»è¾‘æ§åˆ¶</h1><h2 id="ifæ¡ä»¶è¯­å¥"><a href="#ifæ¡ä»¶è¯­å¥" class="headerlink" title="ifæ¡ä»¶è¯­å¥"></a>ifæ¡ä»¶è¯­å¥</h2><h3 id="æ ‡å‡†å‹"><a href="#æ ‡å‡†å‹" class="headerlink" title="æ ‡å‡†å‹"></a>æ ‡å‡†å‹</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123; </span><br><span class="line">    <span class="keyword">var</span> value = <span class="number">0</span> </span><br><span class="line">    <span class="keyword">if</span> (num1 &gt; num2) &#123; </span><br><span class="line">        value = num1 </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">        value = num2 </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> value </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯­æ³•ç³–"><a href="#è¯­æ³•ç³–" class="headerlink" title="è¯­æ³•ç³–"></a>è¯­æ³•ç³–</h3><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨<code>if</code>è¯­å¥ç»™<code>value</code>èµ‹å€¼</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> value = <span class="keyword">if</span>(num1 &gt; num2) &#123;</span><br><span class="line">        num1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        num2</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥<code>return</code>å‡ºå»</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">if</span>(num1 &gt; num2) &#123;</span><br><span class="line">        num1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        num2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å‘ç°åªæœ‰ä¸€ä¸ª<code>return</code>è¯­å¥ï¼Œå› æ­¤å¯ä»¥ç»§ç»­åŒ–ç®€ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> = <span class="keyword">if</span>(num1 &gt; num2) &#123;</span><br><span class="line">    num1</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    num2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">largerNumber</span><span class="params">(num1: <span class="type">Int</span>, num2: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span> (num1 &gt; num2) num1 <span class="keyword">else</span> num2</span><br></pre></td></tr></table></figure><h2 id="whenæ¡ä»¶è¯­å¥"><a href="#whenæ¡ä»¶è¯­å¥" class="headerlink" title="whenæ¡ä»¶è¯­å¥"></a>whenæ¡ä»¶è¯­å¥</h2><h3 id="æ ‡å‡†å¼"><a href="#æ ‡å‡†å¼" class="headerlink" title="æ ‡å‡†å¼"></a>æ ‡å‡†å¼</h3><p><code>åŒ¹é…å€¼ -&gt; &#123; æ‰§è¡Œé€»è¾‘ &#125;</code></p><p>å½“ä½ çš„æ‰§è¡Œé€»è¾‘åªæœ‰ä¸€è¡Œä»£ç æ—¶ï¼Œ{ }å¯ä»¥çœç•¥ã€‚</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getScore</span><span class="params">(name: <span class="type">String</span>)</span></span> = <span class="keyword">when</span>(name) &#123;</span><br><span class="line">    <span class="string">&quot;Tom&quot;</span> -&gt; <span class="number">10</span></span><br><span class="line">    <span class="string">&quot;Lip&quot;</span> -&gt; <span class="number">20</span></span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç±»å‹åŒ¹é…"><a href="#ç±»å‹åŒ¹é…" class="headerlink" title="ç±»å‹åŒ¹é…"></a>ç±»å‹åŒ¹é…</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">checkNumber</span><span class="params">(num: <span class="type">Number</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">when</span> (num) &#123;</span><br><span class="line">        <span class="keyword">is</span> <span class="built_in">Int</span> -&gt; println(<span class="string">&quot;number is Int&quot;</span>)</span><br><span class="line">        <span class="keyword">is</span> <span class="built_in">Double</span> -&gt; println(<span class="string">&quot;number is Double&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span> -&gt; println(<span class="string">&quot;number not support&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ®Šåœºæ™¯"><a href="#ç‰¹æ®Šåœºæ™¯" class="headerlink" title="ç‰¹æ®Šåœºæ™¯"></a>ç‰¹æ®Šåœºæ™¯</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">getScore</span><span class="params">(name: <span class="type">String</span>)</span></span> = <span class="keyword">when</span> &#123; </span><br><span class="line">    name.startsWith(<span class="string">&quot;Tom&quot;</span>) -&gt; <span class="number">86</span> </span><br><span class="line">    name == <span class="string">&quot;Jim&quot;</span> -&gt; <span class="number">77</span> </span><br><span class="line">    name == <span class="string">&quot;Jack&quot;</span> -&gt; <span class="number">95</span> </span><br><span class="line">    name == <span class="string">&quot;Lily&quot;</span> -&gt; <span class="number">100</span> </span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¾ªç¯è¯­å¥"><a href="#å¾ªç¯è¯­å¥" class="headerlink" title="å¾ªç¯è¯­å¥"></a>å¾ªç¯è¯­å¥</h2><p><code>while</code>å¾ªç¯æ²¡åŒºåˆ«ä¸è¯´äº†</p><h3 id="åŒºé—´"><a href="#åŒºé—´" class="headerlink" title="åŒºé—´"></a>åŒºé—´</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> range = <span class="number">0.</span><span class="number">.10</span></span><br><span class="line"><span class="comment">// è¡¨ç¤º[0, 10]å·¦é—­å³é—­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> range2 = <span class="number">0</span> until <span class="number">10</span></span><br><span class="line"><span class="comment">// è¡¨ç¤º[0, 10)å·¦é—­å³å¼€</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> range) &#123; </span><br><span class="line">        println(i) </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ç»“æœæ˜¯0,...,10</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">0</span> until <span class="number">10</span> step <span class="number">2</span>) &#123; </span><br><span class="line">        println(i) </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ç»“æœæ˜¯0, 2, 4, 6, 8</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">10</span> downTo <span class="number">1</span>) &#123; </span><br><span class="line">        println(i) </span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// ç»“æœæ˜¯10, 9, 8,...,1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é¢å¯¹å¯¹è±¡ç¼–ç¨‹"><a href="#é¢å¯¹å¯¹è±¡ç¼–ç¨‹" class="headerlink" title="é¢å¯¹å¯¹è±¡ç¼–ç¨‹"></a>é¢å¯¹å¯¹è±¡ç¼–ç¨‹</h1><h2 id="ç±»ä¸å¯¹è±¡"><a href="#ç±»ä¸å¯¹è±¡" class="headerlink" title="ç±»ä¸å¯¹è±¡"></a>ç±»ä¸å¯¹è±¡</h2><p>å’Œjavaæ²¡ä»€ä¹ˆåŒºåˆ«</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123; </span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;&quot;</span> </span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">0</span> </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">eat</span><span class="params">()</span></span> &#123; </span><br><span class="line">        println(name + <span class="string">&quot; is eating. He is &quot;</span> + age + <span class="string">&quot; years old.&quot;</span>) </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">val</span> p = Person() </span><br><span class="line">    p.name = <span class="string">&quot;Jack&quot;</span> </span><br><span class="line">    p.age = <span class="number">19</span> </span><br><span class="line">    p.eat()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»§æ‰¿ä¸æ„é€ å‡½æ•°"><a href="#ç»§æ‰¿ä¸æ„é€ å‡½æ•°" class="headerlink" title="ç»§æ‰¿ä¸æ„é€ å‡½æ•°"></a>ç»§æ‰¿ä¸æ„é€ å‡½æ•°</h2><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> &#123; </span><br><span class="line">    <span class="keyword">var</span> sno = <span class="string">&quot;&quot;</span> </span><br><span class="line">    <span class="keyword">var</span> grade = <span class="number">0</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒKotlinä¸­é»˜è®¤ç±»æ˜¯<strong>ä¸å…è®¸ç»§æ‰¿çš„ï¼</strong></p><p>æˆ‘ä»¬éœ€è¦åŠ ä¸Š<code>open</code>å…³é”®å­—:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å­<code>Person</code>ç±»æ‰å¯ä»¥è¢«ç»§æ‰¿</p><p>ç¬¬äºŒä»¶äº‹ï¼Œè¦è®©Studentç±»ç»§æ‰¿Personç±»ã€‚åœ¨Javaä¸­ç»§æ‰¿çš„å…³é”®å­—æ˜¯extendsï¼Œè€Œåœ¨Kotlin ä¸­å˜æˆäº†ä¸€ä¸ªå†’å·ï¼Œå†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> : <span class="type">Person</span>() &#123; </span><br><span class="line">    <span class="keyword">var</span> sno = <span class="string">&quot;&quot;</span> </span><br><span class="line">    <span class="keyword">var</span> grade = <span class="number">0</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¯è§æ€§ä¿®é¥°"><a href="#å¯è§æ€§ä¿®é¥°" class="headerlink" title="å¯è§æ€§ä¿®é¥°"></a>å¯è§æ€§ä¿®é¥°</h3><p><img src="/2024/08/24/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-1-%E7%AC%AC%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81-%E7%AC%94%E8%AE%B0-Kotlin%E8%AF%AD%E6%B3%95/image-20240824144213427.png" alt="image-20240824144213427"></p><h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="keyword">val</span> sno: String, <span class="keyword">val</span> grade: <span class="built_in">Int</span>, name: String, age: <span class="built_in">Int</span>) : Person(name, age) &#123;</span><br><span class="line">    <span class="keyword">init</span>&#123;</span><br><span class="line">        println(<span class="string">&quot;ä¸»æ„é€ é€»è¾‘&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">constructor</span>(name: String, age: <span class="built_in">Int</span>) : <span class="keyword">this</span>(<span class="string">&quot;&quot;</span>, <span class="number">0</span>, name, age) &#123;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">constructor</span>() : <span class="keyword">this</span>(<span class="string">&quot;&quot;</span>, <span class="number">0</span>) &#123; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>Student(val sno: String, val grade: Int, name: String, age: Int) : Person(name, age)</code>æ˜¯ä¸»æ„é€ å‡½æ•°ï¼Œinitä¸ºå¯é€‰çš„ä¸»æ„é€ å‡½æ•°ï¼Œå¯ä»¥åœ¨é‡Œé¢æ·»åŠ é€»è¾‘</p><p>å…¶ä¸­çš„<code>constructor</code>å‡ä¸ºæ¬¡æ„é€ å‡½æ•°</p></blockquote><p>ä»»ä½•ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªä¸»æ„é€ å‡½æ•°ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªæ¬¡æ„é€ å‡½æ•°ã€‚æ¬¡æ„é€ å‡½æ•°ä¹Ÿå¯ ä»¥ç”¨äºå®ä¾‹åŒ–ä¸€ä¸ªç±»ï¼Œè¿™ä¸€ç‚¹å’Œä¸»æ„é€ å‡½æ•°æ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œåªä¸è¿‡å®ƒæ˜¯æœ‰å‡½æ•°ä½“çš„ã€‚</p><p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨å‚æ•°é»˜è®¤å€¼ç®€åŒ–:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="keyword">val</span> sno: String = <span class="string">&quot;&quot;</span>, <span class="keyword">val</span> grade: <span class="built_in">Int</span> = <span class="number">0</span>, name: String = <span class="string">&quot;&quot;</span>, age: <span class="built_in">Int</span> = <span class="number">0</span>) : Person(name, age) &#123; &#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å­å°±ä¸éœ€è¦æ¬¡æ„é€ å‡½æ•°äº†</p><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>æ¥å£å¯ä»¥ä¸éœ€è¦å‡½æ•°ä½“ï¼Œè‹¥æ²¡æœ‰å‡½æ•°ä½“ï¼Œç»§æ‰¿çš„ç±»éœ€è¦è¦†ç›–ï¼›è‹¥æœ‰ï¼Œç»§æ‰¿çš„ç±»å¯ä»¥ä¸è¦†ç›–</p><p><strong>æ¥å£çš„ç»§æ‰¿ä¸éœ€è¦æ‹¬å·</strong></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Study</span> &#123; </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">readBooks</span><span class="params">()</span></span> </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">doHomework</span><span class="params">()</span></span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(name: String, age: <span class="built_in">Int</span>) : Person(name, age), Study &#123; </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">readBooks</span><span class="params">()</span></span> &#123; </span><br><span class="line">        println(name + <span class="string">&quot; is reading.&quot;</span>) </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">doHomework</span><span class="params">()</span></span> &#123; </span><br><span class="line">        println(name + <span class="string">&quot; is doing homework.&quot;</span>) </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®ç±»ä¸å•ä¾‹ç±»"><a href="#æ•°æ®ç±»ä¸å•ä¾‹ç±»" class="headerlink" title="æ•°æ®ç±»ä¸å•ä¾‹ç±»"></a>æ•°æ®ç±»ä¸å•ä¾‹ç±»</h2><h3 id="æ•°æ®ç±»"><a href="#æ•°æ®ç±»" class="headerlink" title="æ•°æ®ç±»"></a>æ•°æ®ç±»</h3><p>æ•°æ®ç±»é€šå¸¸éœ€è¦é‡å†™equals()ã€hashCode()ã€toString()è¿™å‡ ä¸ªæ–¹æ³•ã€‚å…¶ä¸­ï¼Œequals() æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸¤ä¸ªæ•°æ®ç±»æ˜¯å¦ç›¸ç­‰ã€‚hashCode()æ–¹æ³•ä½œä¸ºequals()çš„é…å¥—æ–¹æ³•ï¼Œä¹Ÿéœ€è¦ä¸€èµ· é‡å†™ï¼Œå¦åˆ™ä¼šå¯¼è‡´HashMapã€HashSetç­‰hashç›¸å…³çš„ç³»ç»Ÿç±»æ— æ³•æ­£å¸¸å·¥ä½œã€‚toString()æ–¹æ³• ç”¨äºæä¾›æ›´æ¸…æ™°çš„è¾“å…¥æ—¥å¿—ï¼Œå¦åˆ™ä¸€ä¸ªæ•°æ®ç±»é»˜è®¤æ‰“å°å‡ºæ¥çš„å°±æ˜¯ä¸€è¡Œå†…å­˜åœ°å€ã€‚</p><p>Newâ†’Kotlin File&#x2F;Classï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“ å…¥â€œCellphoneâ€ï¼Œåˆ›å»ºç±»å‹é€‰æ‹©â€œClassâ€ã€‚ç„¶ååœ¨åˆ›å»ºçš„ç±»ä¸­ç¼–å†™å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="keyword">class</span> <span class="title class_">Cellphone</span>(<span class="keyword">val</span> brand: String, <span class="keyword">val</span> price: <span class="built_in">Double</span>)</span><br></pre></td></tr></table></figure><p>å½“åœ¨ä¸€ä¸ªç±»å‰ é¢å£°æ˜äº†dataå…³é”®å­—æ—¶ï¼Œå°±è¡¨æ˜ä½ å¸Œæœ›è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªæ•°æ®ç±»ï¼ŒKotlinä¼šæ ¹æ®ä¸»æ„é€ å‡½æ•°ä¸­çš„å‚ æ•°å¸®ä½ å°†equals()ã€hashCode()ã€toString()ç­‰å›ºå®šä¸”æ— å®é™…é€»è¾‘æ„ä¹‰çš„æ–¹æ³•è‡ªåŠ¨ç”Ÿæˆï¼Œ ä»è€Œå¤§å¤§å‡å°‘äº†å¼€å‘çš„å·¥ä½œé‡ã€‚</p><h3 id="å•ä¾‹ç±»"><a href="#å•ä¾‹ç±»" class="headerlink" title="å•ä¾‹ç±»"></a>å•ä¾‹ç±»</h3><p>javaä¸­çš„å•ä¾‹æ¨¡å¼ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123; </span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123; </span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>(); </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">return</span> instance; &#125; </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">singletonTest</span><span class="params">()</span> &#123; </span><br><span class="line">        System.out.println(<span class="string">&quot;singletonTest is called.&quot;</span>); </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è€Œå¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨å•ä¾‹ç±»ä¸­çš„æ–¹æ³•ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œæ¯”å¦‚æƒ³è°ƒç”¨ä¸Šè¿°çš„singletonTest()æ–¹æ³•ï¼Œ å°±å¯ä»¥è¿™æ ·å†™ï¼š </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Singleton</span> <span class="variable">singleton</span> <span class="operator">=</span> Singleton.getInstance(); </span><br><span class="line">singleton.singletonTest();</span><br></pre></td></tr></table></figure><p>åœ¨Kotlinä¸­åˆ›å»ºä¸€ä¸ªå•ä¾‹ç±»çš„æ–¹å¼æå…¶ç®€å•ï¼Œåªéœ€è¦å°†classå…³é”®å­—æ”¹æˆobjectå…³é”®å­—å³å¯ã€‚ ç°åœ¨æˆ‘ä»¬å°è¯•åˆ›å»ºä¸€ä¸ªKotlinç‰ˆçš„Singletonå•ä¾‹ç±»ï¼Œå³å‡»com.example.xxxåŒ… â†’Newâ†’Kotlin File&#x2F;Classï¼Œåœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥â€œSingletonâ€ï¼Œåˆ›å»ºç±»å‹é€‰æ‹©â€œObjectâ€ï¼Œç‚¹ å‡»â€œOKâ€å®Œæˆåˆ›å»ºï¼Œåˆå§‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Singleton &#123; &#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨Singletonå°±å·²ç»æ˜¯ä¸€ä¸ªå•ä¾‹ç±»äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿™ä¸ªç±»ä¸­ç¼–å†™éœ€è¦çš„å‡½æ•°ï¼Œæ¯”å¦‚åŠ å…¥ ä¸€ä¸ªsingletonTest()å‡½æ•°ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Singleton &#123; </span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">singletonTest</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">&quot;singletonTest is called.&quot;</span>) </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨ç›´æ¥ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Singleton.singletonTest()</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•è™½ç„¶çœ‹ä¸Šå»åƒæ˜¯é™æ€æ–¹æ³•çš„è°ƒç”¨ï¼Œä½†å…¶å®Kotlinåœ¨èƒŒåè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª Singletonç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”ä¿è¯å…¨å±€åªä¼šå­˜åœ¨ä¸€ä¸ªSingletonå®ä¾‹ã€‚</p><h1 id="Lambdaç¼–ç¨‹"><a href="#Lambdaç¼–ç¨‹" class="headerlink" title="Lambdaç¼–ç¨‹"></a>Lambdaç¼–ç¨‹</h1><h2 id="é›†åˆAPI"><a href="#é›†åˆAPI" class="headerlink" title="é›†åˆAPI"></a>é›†åˆAPI</h2><h3 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = ArrayList&lt;String&gt;() </span><br><span class="line">list.add(<span class="string">&quot;Apple&quot;</span>) </span><br><span class="line">list.add(<span class="string">&quot;Banana&quot;</span>) </span><br><span class="line">list.add(<span class="string">&quot;Orange&quot;</span>) </span><br><span class="line">list.add(<span class="string">&quot;Pear&quot;</span>) </span><br><span class="line">list.add(<span class="string">&quot;Grape&quot;</span>)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> list2 = mutableListOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>)</span><br><span class="line">list2.add(<span class="string">&quot;Watermelon&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="Mapé›†åˆ"><a href="#Mapé›†åˆ" class="headerlink" title="Mapé›†åˆ"></a>Mapé›†åˆ</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> map = HashMap&lt;String, <span class="built_in">Int</span>&gt;()</span><br><span class="line">map.put(<span class="string">&quot;Apple&quot;</span>, <span class="number">1</span>) </span><br><span class="line">map.put(<span class="string">&quot;Banana&quot;</span>, <span class="number">2</span>) </span><br><span class="line">map.put(<span class="string">&quot;Orange&quot;</span>, <span class="number">3</span>) </span><br><span class="line">map.put(<span class="string">&quot;Pear&quot;</span>, <span class="number">4</span>) </span><br><span class="line">map.put(<span class="string">&quot;Grape&quot;</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> map2 = HashMap&lt;String, <span class="built_in">Int</span>&gt;() </span><br><span class="line">map2[<span class="string">&quot;Apple&quot;</span>] = <span class="number">1</span> </span><br><span class="line">map2[<span class="string">&quot;Banana&quot;</span>] = <span class="number">2</span> </span><br><span class="line">map2[<span class="string">&quot;Orange&quot;</span>] = <span class="number">3</span> </span><br><span class="line">map2[<span class="string">&quot;Pear&quot;</span>] = <span class="number">4</span> </span><br><span class="line">map2[<span class="string">&quot;Grape&quot;</span>] = <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> map3 = mapOf(<span class="string">&quot;Apple&quot;</span> to <span class="number">1</span>, <span class="string">&quot;Banana&quot;</span> to <span class="number">2</span>, <span class="string">&quot;Orange&quot;</span> to <span class="number">3</span>, <span class="string">&quot;Pear&quot;</span> to <span class="number">4</span>, <span class="string">&quot;Grape&quot;</span> to <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((fruit, number) <span class="keyword">in</span> map3) &#123; </span><br><span class="line">    println(<span class="string">&quot;fruit is &quot;</span> + fruit + <span class="string">&quot;, number is &quot;</span> + number) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é›†åˆçš„å‡½æ•°å¼API"><a href="#é›†åˆçš„å‡½æ•°å¼API" class="headerlink" title="é›†åˆçš„å‡½æ•°å¼API"></a>é›†åˆçš„å‡½æ•°å¼API</h2><h3 id="maxby"><a href="#maxby" class="headerlink" title="maxby"></a>maxby</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line"><span class="keyword">var</span> maxLengthFruit = <span class="string">&quot;&quot;</span> </span><br><span class="line"><span class="keyword">for</span> (fruit <span class="keyword">in</span> list) &#123; </span><br><span class="line">    <span class="keyword">if</span> (fruit.length &gt; maxLengthFruit.length) &#123; </span><br><span class="line">        maxLengthFruit = fruit </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line">println(<span class="string">&quot;max length fruit is &quot;</span> + maxLengthFruit)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ¥æ”¹å†™ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy &#123; it.length &#125; </span><br><span class="line">println(<span class="string">&quot;max length fruit is &quot;</span> + maxLengthFruit)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Lambdaè¡¨è¾¾å¼çš„è¯­æ³•ç»“æ„ï¼š </p><p><code>&#123;å‚æ•°å1: å‚æ•°ç±»å‹, å‚æ•°å2: å‚æ•°ç±»å‹ -&gt; å‡½æ•°ä½“&#125;</code></p><p>å› æ­¤ä¸Šé¢ä»£ç çš„lambdaè¡¨ç¤ºå…¶å®æ˜¯:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line"><span class="comment">//val lambda = &#123; fruit: String -&gt; fruit.length &#125; </span></span><br><span class="line"><span class="comment">//val maxLengthFruit = list.maxBy(lambda)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy(&#123; fruit: String -&gt; fruit.length &#125;)</span><br></pre></td></tr></table></figure><p>ç„¶åKotlinè§„å®šï¼Œå½“Lambdaå‚æ•°æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†Lambdaè¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬ å·çš„å¤–é¢ï¼Œä¸”å¦‚æœLambdaå‚æ•°æ˜¯å‡½æ•°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥å°†å‡½æ•°çš„æ‹¬å·çœç•¥ï¼ŒåŒæ—¶Lambdaè¡¨è¾¾å¼ä¸­çš„å‚æ•°åˆ—è¡¨å…¶å®åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¿…å£°æ˜å‚æ•°ç±»å‹ï¼Œæœ€åï¼Œå½“Lambdaè¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œä¹Ÿä¸å¿…å£°æ˜å‚æ•°åï¼Œè€Œæ˜¯å¯ä»¥ä½¿ç”¨it å…³é”®å­—æ¥ä»£æ›¿ã€‚å› æ­¤ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å½“Lambdaå‚æ•°æ˜¯å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°æ—¶ï¼Œå¯ä»¥å°†Lambdaè¡¨è¾¾å¼ç§»åˆ°å‡½æ•°æ‹¬ å·çš„å¤–é¢</span></span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy() &#123; fruit: String -&gt; fruit.length &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœLambdaå‚æ•°æ˜¯å‡½æ•°çš„å”¯ä¸€ä¸€ä¸ªå‚æ•°çš„è¯ï¼Œè¿˜å¯ä»¥å°†å‡½æ•°çš„æ‹¬å·çœç•¥</span></span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy &#123; fruit: String -&gt; fruit.length &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Lambdaè¡¨è¾¾å¼ä¸­çš„å‚æ•°åˆ—è¡¨å…¶å®åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸å¿…å£°æ˜å‚æ•°ç±»å‹</span></span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy &#123; fruit -&gt; fruit.length &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å½“Lambdaè¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨ä¸­åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶ï¼Œä¹Ÿä¸å¿…å£°æ˜å‚æ•°å</span></span><br><span class="line"><span class="keyword">val</span> maxLengthFruit = list.maxBy &#123; it.length &#125;</span><br></pre></td></tr></table></figure><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line">    <span class="keyword">val</span> newList = list.map &#123; it.toUpperCase() &#125; </span><br><span class="line">    <span class="keyword">for</span> (fruit <span class="keyword">in</span> newList) &#123; </span><br><span class="line">        println(fruit) </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line">    <span class="keyword">val</span> newList = list.filter &#123; it.length &lt;= <span class="number">5</span> &#125; .map &#123; it.toUpperCase() &#125; </span><br><span class="line">    <span class="keyword">for</span> (fruit <span class="keyword">in</span> newList) &#123; </span><br><span class="line">        println(fruit) </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…ˆfilterå†map</span></span><br></pre></td></tr></table></figure><h3 id="anyå’Œall"><a href="#anyå’Œall" class="headerlink" title="anyå’Œall"></a>anyå’Œall</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="keyword">val</span> list = listOf(<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Pear&quot;</span>, <span class="string">&quot;Grape&quot;</span>, <span class="string">&quot;Watermelon&quot;</span>) </span><br><span class="line">    <span class="keyword">val</span> anyResult = list.any &#123; it.length &lt;= <span class="number">5</span> &#125; </span><br><span class="line">    <span class="keyword">val</span> allResult = list.all &#123; it.length &lt;= <span class="number">5</span> &#125; </span><br><span class="line">    println(<span class="string">&quot;anyResult is &quot;</span> + anyResult + <span class="string">&quot;, allResult is &quot;</span> + allResult) &#125;</span><br><span class="line"><span class="comment">//true, false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¸€æœ¬å¥½ä¹¦ </category>
          
          <category> ç¬¬ä¸€è¡Œä»£ç  </category>
          
          <category> Kotlin </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¸€æœ¬å¥½ä¹¦ </tag>
            
            <tag> Kotlin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(ä¹)-ç»„åˆé€»è¾‘æ¨¡å—</title>
      <link href="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/"/>
      <url>/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/</url>
      
        <content type="html"><![CDATA[<p>ç»„åˆé€»è¾‘æ¨¡å—-Combinational_Logic_Blocks</p><h1 id="æ•°æ®å¤šè·¯å¤ç”¨å™¨-Data-Multiplexor"><a href="#æ•°æ®å¤šè·¯å¤ç”¨å™¨-Data-Multiplexor" class="headerlink" title="æ•°æ®å¤šè·¯å¤ç”¨å™¨(Data Multiplexor)"></a>æ•°æ®å¤šè·¯å¤ç”¨å™¨(Data Multiplexor)</h1><h2 id="Data-Multiplexor-here-2-to-1-n-bit-wide"><a href="#Data-Multiplexor-here-2-to-1-n-bit-wide" class="headerlink" title="Data Multiplexor (here 2-to-1, n-bit-wide)"></a>Data Multiplexor (here 2-to-1, n-bit-wide)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215149640.png" alt="image-20240730215149640"></p><ul><li>å½“S &#x3D; 0ï¼ŒCçš„å€¼ä¸ºAçš„å€¼</li><li>å½“S &#x3D; 1ï¼ŒCçš„å€¼ä¸ºBçš„å€¼</li></ul><h1 id="N-instances-of-1-bit-wide-mux"><a href="#N-instances-of-1-bit-wide-mux" class="headerlink" title="N instances of 1-bit-wide mux"></a>N instances of 1-bit-wide mux</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215219759.png" alt="image-20240730215219759"></p><h2 id="å¦‚ä½•æ„å»º1ä½å®½çš„mux"><a href="#å¦‚ä½•æ„å»º1ä½å®½çš„mux" class="headerlink" title="å¦‚ä½•æ„å»º1ä½å®½çš„mux?"></a>å¦‚ä½•æ„å»º1ä½å®½çš„mux?</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215234361.png" alt="image-20240730215234361"></p><h2 id="4-to-1-Multiplexor"><a href="#4-to-1-Multiplexor" class="headerlink" title="4-to-1 Multiplexor"></a>4-to-1 Multiplexor</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215317634.png" alt="image-20240730215317634"></p><h2 id="Muxï¼šæ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹"><a href="#Muxï¼šæ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹" class="headerlink" title="Muxï¼šæ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹?"></a>Muxï¼šæ˜¯å¦æœ‰å…¶ä»–æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹?</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215331054.png" alt="image-20240730215331054"></p><h1 id="è¿ç®—å’Œé€»è¾‘å•å…ƒ-Arithmetic-and-Logic-Unit-ALU"><a href="#è¿ç®—å’Œé€»è¾‘å•å…ƒ-Arithmetic-and-Logic-Unit-ALU" class="headerlink" title="è¿ç®—å’Œé€»è¾‘å•å…ƒ(Arithmetic and Logic Unit\ALU)"></a>è¿ç®—å’Œé€»è¾‘å•å…ƒ(Arithmetic and Logic Unit\ALU)</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215403358.png" alt="image-20240730215403358"></p><h2 id="Our-simple-ALU"><a href="#Our-simple-ALU" class="headerlink" title="Our simple ALU"></a>Our simple ALU</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215420329.png" alt="image-20240730215420329"></p><h1 id="åŠ æ³•å™¨-å‡æ³•å™¨-Adder-subtracter"><a href="#åŠ æ³•å™¨-å‡æ³•å™¨-Adder-subtracter" class="headerlink" title="åŠ æ³•å™¨&#x2F;å‡æ³•å™¨(Adder&#x2F;subtracter)"></a>åŠ æ³•å™¨&#x2F;å‡æ³•å™¨(Adder&#x2F;subtracter)</h1><h2 id="å¦‚ä½•æ„å»º"><a href="#å¦‚ä½•æ„å»º" class="headerlink" title="å¦‚ä½•æ„å»º"></a>å¦‚ä½•æ„å»º</h2><ul><li>çœŸå€¼è¡¨ï¼Œç„¶åç¡®å®šæ ‡å‡†å¼ï¼Œç„¶åæœ€å°åŒ–å¹¶å®ç°å¦‚æˆ‘ä»¬æ‰€è§</li><li>çœ‹çœ‹æŠŠé—®é¢˜åˆ†è§£æˆæ›´å°çš„ç‰‡æ–­ï¼Œæˆ‘ä»¬å¯ä»¥çº§è”æˆ–åˆ†å±‚</li></ul><h2 id="Adder-Subtractor-â€“-One-bit-adder-LSBâ€¦"><a href="#Adder-Subtractor-â€“-One-bit-adder-LSBâ€¦" class="headerlink" title="Adder &#x2F; Subtractor â€“ One-bit adder LSBâ€¦"></a>Adder &#x2F; Subtractor â€“ One-bit adder LSBâ€¦</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215621377.png" alt="image-20240730215621377"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215641647.png" alt="image-20240730215641647"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215648535.png" alt="image-20240730215648535"></p><h2 id="N-1-bit-adders-1-N-bit-adder"><a href="#N-1-bit-adders-1-N-bit-adder" class="headerlink" title="N 1-bit adders -&gt; 1 N-bit adder"></a>N 1-bit adders -&gt; 1 N-bit adder</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215705289.png" alt="image-20240730215705289"></p><p>å°†Nä¸ª1-bit addersä¸²è”èµ·æ¥åå°±å˜æˆäº†1ä¸ªN-bitçš„åŠ æ³•å™¨äº†ï¼</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è€ƒè™‘æº¢å‡ºé—®é¢˜</p><h2 id="ä¸¤ä¸ª2-bitæ•°ä¹‹å’Œ"><a href="#ä¸¤ä¸ª2-bitæ•°ä¹‹å’Œ" class="headerlink" title="ä¸¤ä¸ª2 - bitæ•°ä¹‹å’Œ.. .."></a>ä¸¤ä¸ª2 - bitæ•°ä¹‹å’Œ.. ..</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215723811.png" alt="image-20240730215723811"></p><h1 id="å‡æ³•å™¨è®¾è®¡"><a href="#å‡æ³•å™¨è®¾è®¡" class="headerlink" title="å‡æ³•å™¨è®¾è®¡"></a>å‡æ³•å™¨è®¾è®¡</h1><h2 id="æå·§å‡æ³•ï¼šA-B-A-B"><a href="#æå·§å‡æ³•ï¼šA-B-A-B" class="headerlink" title="æå·§å‡æ³•ï¼šA-B &#x3D; A + ( - B )"></a>æå·§å‡æ³•ï¼šA-B &#x3D; A + ( - B )</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic-Blocks/image-20240730215754602.png" alt="image-20240730215754602"></p><ul><li><p>A-B &#x3D; A + ( - B )ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å°†Bçš„åªåœ¨è¾“å…¥åŠ æ³•å™¨å‰å˜ä¸º-Bå³å¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘è¡¥ç ï¼š</p><ul><li>Bå–åååŠ ä¸€</li></ul></li><li><p>åœ¨å–åè¿™ä¸ªæ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°æˆ‘ä»¬çš„XORé€»è¾‘é—¨æ¥å®ç°ï¼Œç„¶åå°†C<del>0</del>è®¾ä¸º1ï¼Œå³å¯å®ç°å‡æ³•å™¨ï¼</p></li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li><p>ä½¿ç”¨muxesåœ¨è¾“å…¥ä¸­è¿›è¡Œé€‰æ‹©</p><ul><li>Sä¸ªè¾“å…¥ä½é€‰æ‹©2^S^ä¸ªè¾“å…¥</li><li>æ¯ä¸ªè¾“å…¥å¯ä»¥æ˜¯nä½å®½ï¼Œindepä¸ºS</li></ul></li><li><p>å¯ä»¥åˆ†å±‚å®æ–½muxes</p></li><li><p>ALUå¯ä»¥ä½¿ç”¨muxå®ç°</p><ul><li>ä¸åŸºæœ¬å—ä½“å•å…ƒè€¦åˆ</li></ul></li><li><p>Nä½åŠ å‡å™¨æ˜¯ä½¿ç”¨Nä¸ª1ä½åŠ æ³•å™¨åœ¨è¾“å…¥ç«¯ä½¿ç”¨å¼‚æˆ–é—¨å®Œæˆçš„</p><ul><li>XORä½œä¸ºæ¡ä»¶åç›¸å™¨</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(å…«)-ç»„åˆé€»è¾‘</title>
      <link href="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/"/>
      <url>/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/</url>
      
        <content type="html"><![CDATA[<p>ç»„åˆé€»è¾‘(Combinational_Logic)ç”µè·¯æ²¡æœ‰çŠ¶æ€å’Œè®°å¿†ï¼ŒæŸäº›è¾“å…¥é›†çš„è¾“å‡ºæ€»æ˜¯ç›¸åŒã€‚</p><h1 id="çœŸå€¼è¡¨-Truth-Tables-TT"><a href="#çœŸå€¼è¡¨-Truth-Tables-TT" class="headerlink" title="çœŸå€¼è¡¨(Truth Tables&#x2F;TT)"></a>çœŸå€¼è¡¨(Truth Tables&#x2F;TT)</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730212102555.png" alt="image-20240730212102555"></p><h2 id="TT-Example-1-1-iff-one-not-both-a-b-1"><a href="#TT-Example-1-1-iff-one-not-both-a-b-1" class="headerlink" title="TT Example #1: 1 iff one (not both) a,b&#x3D;1"></a>TT Example #1: 1 iff one (not both) a,b&#x3D;1</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730212141287.png" alt="image-20240730212141287"></p><p>è¿™ä¸ªä¹Ÿæ˜¯åé¢ä¼šè¯´åˆ°çš„<strong>XOR</strong>ï¼Œtrick xor treat!</p><p>ä½¿ç”¨aå’Œbçš„å…³ç³»ç®€åŒ–çœŸå€¼è¡¨ï¼š</p><ul><li>å½“aä¸º0æ—¶ï¼Œè¾“å‡ºyç­‰äºbã€‚</li><li>å½“aä¸º1æ—¶ï¼Œè¾“å‡ºyç­‰äºnot bã€‚</li></ul><h2 id="TT-Example-2-2-bit-adder"><a href="#TT-Example-2-2-bit-adder" class="headerlink" title="TT Example #2: 2-bit adder"></a>TT Example #2: 2-bit adder</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730212241135.png" alt="image-20240730212241135"></p><p>è¾“å…¥Aå’ŒBåˆ†åˆ«æœ‰ä¸¤ä½ï¼Œè¾“å‡ºCæœ‰ä¸‰ä½ï¼ˆåŒ…æ‹¬è¿›ä½ï¼‰ã€‚</p><p>æ€»å…±éœ€è¦16è¡Œï¼ˆ4ä½è¾“å…¥ï¼‰ã€‚</p><h2 id="TT-Example-3-32-bit-unsigned-adder"><a href="#TT-Example-3-32-bit-unsigned-adder" class="headerlink" title="TT Example #3: 32-bit unsigned adder"></a>TT Example #3: 32-bit unsigned adder</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730212250551.png" alt="image-20240730212250551"></p><p>è¾“å…¥Aå’ŒBåˆ†åˆ«æœ‰32ä½ï¼Œè¾“å‡ºCéœ€è¦33ä½ï¼ˆåŒ…æ‹¬è¿›ä½ï¼‰ã€‚</p><p>çœŸå€¼è¡¨çš„æ–¹æ³•åœ¨è¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¸é€‚ç”¨ï¼Œéœ€è€ƒè™‘å…¶ä»–æ„å»ºæ–¹æ³•ã€‚</p><h2 id="TT-Example-4-3-input-majority-circuit"><a href="#TT-Example-4-3-input-majority-circuit" class="headerlink" title="TT Example #4: 3-input majority circuit"></a>TT Example #4: 3-input majority circuit</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730212302805.png" alt="image-20240730212302805"></p><h1 id="é€»è¾‘é—¨"><a href="#é€»è¾‘é—¨" class="headerlink" title="é€»è¾‘é—¨"></a>é€»è¾‘é—¨</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213128404.png" alt="image-20240730213128404"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213117887.png" alt="image-20240730213117887"></p><blockquote><p>å¦‚ä½•è®°å¿†ï¼š<img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213100760.png" alt="image-20240730213100760"></p></blockquote><h2 id="2-input-gates-extend-to-n-inputs"><a href="#2-input-gates-extend-to-n-inputs" class="headerlink" title="2-input gates extend to n-inputs"></a>2-input gates extend to n-inputs</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213307305.png" alt="image-20240730213307305"></p><p>å¯¹äºXORçš„N-inputæ•°abcä¸­æœ‰å¤šå°‘ä¸ª1ï¼Œå¥‡æ•°ä¸ª1æœ€ç»ˆç»“æœå°±æ˜¯1</p><h2 id="Truth-Table-Gates-e-g-majority-circ"><a href="#Truth-Table-Gates-e-g-majority-circ" class="headerlink" title="Truth Table -&gt; Gates (e.g., majority circ.)"></a>Truth Table -&gt; Gates (e.g., majority circ.)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213406554.png" alt="image-20240730213406554"></p><h2 id="Truth-Table-Gates-e-g-FSM-circuit"><a href="#Truth-Table-Gates-e-g-FSM-circuit" class="headerlink" title="Truth Table -&gt; Gates (e.g., FSM circuit)"></a>Truth Table -&gt; Gates (e.g., FSM circuit)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213449047.png" alt="image-20240730213449047"></p><h1 id="å¸ƒå°”ä»£æ•°"><a href="#å¸ƒå°”ä»£æ•°" class="headerlink" title="å¸ƒå°”ä»£æ•°"></a>å¸ƒå°”ä»£æ•°</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213504382.png" alt="image-20240730213504382"></p><ul><li><code>+</code> &#x3D; <code>OR</code></li><li><code>Â·</code> &#x3D; <code>AND</code></li><li>$\bar{x}$ &#x3D; <code>NOT</code></li></ul><h2 id="Boolean-Algebra-e-g-for-majority-fun"><a href="#Boolean-Algebra-e-g-for-majority-fun" class="headerlink" title="Boolean Algebra (e.g., for majority fun.)"></a>Boolean Algebra (e.g., for majority fun.)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213934732.png" alt="image-20240730213934732"></p><h2 id="Boolean-Algebra-e-g-for-FSM"><a href="#Boolean-Algebra-e-g-for-FSM" class="headerlink" title="Boolean Algebra (e.g., for FSM)"></a>Boolean Algebra (e.g., for FSM)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730213951120.png" alt="image-20240730213951120"></p><h2 id="ç”µè·¯-ä»£æ•°ç®€åŒ–"><a href="#ç”µè·¯-ä»£æ•°ç®€åŒ–" class="headerlink" title="ç”µè·¯&amp;ä»£æ•°ç®€åŒ–"></a>ç”µè·¯&amp;ä»£æ•°ç®€åŒ–</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730214021676.png" alt="image-20240730214021676"></p><h1 id="å¸ƒå°”ä»£æ•°çš„è§„åˆ™"><a href="#å¸ƒå°”ä»£æ•°çš„è§„åˆ™" class="headerlink" title="å¸ƒå°”ä»£æ•°çš„è§„åˆ™"></a>å¸ƒå°”ä»£æ•°çš„è§„åˆ™</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730214032704.png" alt="image-20240730214032704"></p><h1 id="æ ‡å‡†å‹-Canonical-forms"><a href="#æ ‡å‡†å‹-Canonical-forms" class="headerlink" title="æ ‡å‡†å‹(Canonical forms)"></a>æ ‡å‡†å‹(Canonical forms)</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730214050410.png" alt="image-20240730214050410"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730214056207.png" alt="image-20240730214056207"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Combinational-Logic/image-20240730214125385.png" alt="image-20240730214125385"></p><p>æˆ‘ä»¬å¯ä»¥äº’ç›¸è½¬åŒ–ï¼Œé™¤äº†TTè½¬æˆGD</p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(ä¸ƒ)-åŒæ­¥æ•°å­—ç³»ç»Ÿä¹‹çŠ¶æ€</title>
      <link href="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/"/>
      <url>/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/</url>
      
        <content type="html"><![CDATA[<h1 id="å…³äºçŠ¶æ€"><a href="#å…³äºçŠ¶æ€" class="headerlink" title="å…³äºçŠ¶æ€"></a>å…³äºçŠ¶æ€</h1><p><strong>çŠ¶æ€ç”µè·¯ä¸ç»„åˆé€»è¾‘ç”µè·¯</strong>ï¼š   </p><ul><li>çŠ¶æ€ç”µè·¯ç”¨äºè®°ä½å€¼ï¼Œå¦‚å¯„å­˜å™¨ï¼ˆå°è€Œå¿«ï¼‰æˆ–å†…å­˜ï¼ˆå¤§è€Œæ…¢ï¼‰ã€‚ </li><li>ç»„åˆé€»è¾‘ç”µè·¯ç”¨äºå¤„ç†æ•°æ®æµã€‚</li></ul><h2 id="çŠ¶æ€çš„ä½¿ç”¨"><a href="#çŠ¶æ€çš„ä½¿ç”¨" class="headerlink" title="çŠ¶æ€çš„ä½¿ç”¨"></a>çŠ¶æ€çš„ä½¿ç”¨</h2><ul><li>ä½œä¸ºå­˜å‚¨æŸäº›ä¸ç¡®å®šæ—¶é—´ä»·å€¼çš„åœºæ‰€ï¼š<ul><li>å¯„å­˜å™¨æ–‡ä»¶(å¦‚RISC - Vä¸Šçš„x0 - x31)</li><li>è®°å¿†(ç¼“å­˜å’Œä¸»å­˜)</li></ul></li><li>å¸®åŠ©æ§åˆ¶ç»„åˆé€»è¾‘å—ä¹‹é—´çš„ä¿¡æ¯æµåŠ¨ã€‚<ul><li>çŠ¶æ€å˜é‡ç”¨äºåœ¨ç»„åˆé€»è¾‘å—çš„è¾“å…¥ç«¯ä¿æŒä¿¡æ¯çš„è¿åŠ¨ï¼Œå¹¶å…è®¸æœ‰åºçš„ä¼ é€’ã€‚</li></ul></li></ul><h2 id="æ„å»ºç´¯åŠ å™¨"><a href="#æ„å»ºç´¯åŠ å™¨" class="headerlink" title="æ„å»ºç´¯åŠ å™¨"></a>æ„å»ºç´¯åŠ å™¨</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730191736211.png" alt="image-20240730191736211"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730191830276.png" alt="image-20240730191830276"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730191841007.png" alt="image-20240730191841007"></p><blockquote><p>åœ¨registerè¿™å—ä¸­ï¼Œæ•°æ®ä»ä¸Šåˆ°ä¸‹ï¼Œä»å³åˆ°å·¦</p></blockquote><p>åˆšå¼€å§‹æ—¶ï¼Œ<code>reset</code>åˆå§‹åŒ–<code>sum</code>ä¸º0ï¼Œéšå<code>sum</code>å’Œ<code>xi</code>è¿›è¡ŒåŠ æ³•è¿ç®—ï¼Œ<code>sum</code>å†æ¬¡è¿›å…¥<code>register</code>åä¼ ç»™<code>xi</code></p><ol><li><p><strong>ç´¯åŠ å™¨çš„æ„å»º</strong>ï¼š</p><ul><li>ç´¯åŠ å™¨çš„ç›®æ ‡æ˜¯å°†ä¸€ç³»åˆ—è¾“å…¥å€¼ç´¯åŠ ã€‚</li><li>åŸºæœ¬æ€è·¯æ˜¯é€šè¿‡å¾ªç¯ç´¯åŠ è¾“å…¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæœ€ç»ˆå¾—åˆ°æ€»å’Œã€‚</li></ul></li><li><p><strong>ç´¯åŠ å™¨çš„åˆæ­¥è®¾è®¡</strong>ï¼š</p><ul><li>è®¾è®¡ä¸€ä¸ªç®€å•çš„ç´¯åŠ ç”µè·¯ï¼Œå°è¯•åœ¨æ²¡æœ‰çŠ¶æ€ç”µè·¯çš„æƒ…å†µä¸‹è¿›è¡Œç´¯åŠ ã€‚</li><li>å‘ç°ä»…ä½¿ç”¨ç»„åˆé€»è¾‘ç”µè·¯æ— æ³•å®Œæˆç´¯åŠ æ“ä½œï¼Œå› ä¸ºæ— æ³•æ§åˆ¶å¾ªç¯çš„è¿­ä»£ï¼Œä¹Ÿæ— æ³•åˆå§‹åŒ–ç´¯åŠ å™¨ã€‚</li></ul></li><li><p><strong>å¼•å…¥çŠ¶æ€ç”µè·¯</strong>ï¼š</p><ul><li>ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¼•å…¥å¯„å­˜å™¨å’Œå¤ä½çº¿ã€‚</li><li>å¯„å­˜å™¨ç”¨äºä¿å­˜å½“å‰ç´¯åŠ å€¼ï¼Œå¹¶åœ¨å¤ä½æ—¶å°†å…¶è®¾ä¸ºé›¶ã€‚</li><li>åŠ è½½å™¨ï¼ˆæ—¶é’Ÿï¼‰æ§åˆ¶æ¯ä¸ªå‘¨æœŸçš„ç´¯åŠ æ“ä½œã€‚</li></ul></li><li><p><strong>åé¦ˆæœºåˆ¶çš„ä½¿ç”¨</strong>ï¼š</p><ul><li>åé¦ˆæœºåˆ¶å…è®¸è¾“å‡ºå€¼å›é€åˆ°è¾“å…¥ï¼Œç”¨äºè¿ç»­ç´¯åŠ ã€‚</li><li>é€šè¿‡åœ¨æ—¶é’Ÿçš„ä¸Šå‡æ²¿è¿›è¡Œæ“ä½œï¼Œç¡®ä¿ç´¯åŠ è¿‡ç¨‹æœ‰åºè¿›è¡Œã€‚</li></ul></li><li><p><strong>å…·ä½“å®ç°</strong>ï¼š</p><ul><li>ç´¯åŠ å™¨ç”µè·¯å›¾ç¤ºï¼Œæ˜¾ç¤ºè¾“å…¥å€¼ï¼ˆxï¼‰éšç€æ—¶é—´å˜åŒ–ã€‚</li><li>é€šè¿‡æ—¶é’Ÿæ§åˆ¶å¯„å­˜å™¨ï¼Œä½¿ç´¯åŠ å€¼é€æ­¥å¢åŠ ã€‚</li></ul></li><li><p><strong>æ€»ç»“ä¸é¢„å‘Š</strong>ï¼š</p><ul><li>è®²åº§ç»“æŸæ—¶å±•ç¤ºäº†ç´¯åŠ å™¨çš„å·¥ä½œåŸç†ã€‚</li><li>é¢„å‘Šä¸‹ä¸€è®²å°†è¿›ä¸€æ­¥æ·±å…¥æ¢è®¨ç´¯åŠ å™¨çš„å…·ä½“å®ç°ã€‚</li></ul></li></ol><h3 id="å…³é”®æ¦‚å¿µ"><a href="#å…³é”®æ¦‚å¿µ" class="headerlink" title="å…³é”®æ¦‚å¿µ"></a>å…³é”®æ¦‚å¿µ</h3><ul><li><strong>çŠ¶æ€ç”µè·¯ï¼ˆState Circuitï¼‰</strong>ï¼šç”¨äºè®°å¿†å’Œå­˜å‚¨æ•°æ®çš„ç”µè·¯ã€‚</li><li><strong>ç»„åˆé€»è¾‘ç”µè·¯ï¼ˆCombinational Logic Circuitï¼‰</strong>ï¼šç”¨äºå¤„ç†å’Œä¼ é€’æ•°æ®çš„ç”µè·¯ã€‚</li><li><strong>ç´¯åŠ å™¨ï¼ˆAccumulatorï¼‰</strong>ï¼šä¸€ä¸ªç”¨äºç´¯åŠ è¾“å…¥å€¼çš„ç”µè·¯ã€‚</li><li><strong>åé¦ˆï¼ˆFeedbackï¼‰</strong>ï¼šè¾“å‡ºå€¼è¿”å›åˆ°è¾“å…¥çš„æœºåˆ¶ï¼Œç”¨äºè¿ç»­å¤„ç†ã€‚</li><li><strong>å¯„å­˜å™¨ï¼ˆRegisterï¼‰</strong>ï¼šç”¨äºå­˜å‚¨æ•°æ®çš„åŸºæœ¬å•å…ƒã€‚</li><li><strong>æ—¶é’Ÿï¼ˆClockï¼‰</strong>ï¼šæ§åˆ¶ç”µè·¯æ“ä½œæ—¶åºçš„ä¿¡å·ã€‚</li></ul><h1 id="å¯„å­˜å™¨ç»†èŠ‚-è§¦å‘å™¨-Flip-flops"><a href="#å¯„å­˜å™¨ç»†èŠ‚-è§¦å‘å™¨-Flip-flops" class="headerlink" title="å¯„å­˜å™¨ç»†èŠ‚-è§¦å‘å™¨(Flip-flops)"></a>å¯„å­˜å™¨ç»†èŠ‚-è§¦å‘å™¨(Flip-flops)</h1><p> flip and flop between 0 and 1.</p><h2 id="è§¦å‘å™¨çš„åŸºæœ¬æ¦‚å¿µ"><a href="#è§¦å‘å™¨çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="è§¦å‘å™¨çš„åŸºæœ¬æ¦‚å¿µ"></a>è§¦å‘å™¨çš„åŸºæœ¬æ¦‚å¿µ</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730200747865.png" alt="image-20240730200747865"></p><ul><li><strong>å¯„å­˜å™¨çš„å†…éƒ¨æ˜¯è§¦å‘å™¨ï¼ˆFlip-Flopsï¼‰</strong>ï¼š<ul><li>ä¸€ä¸ªnä½å¯„å­˜å™¨å®é™…ä¸Šæ˜¯nä¸ª1ä½è§¦å‘å™¨çš„å¹¶è¡Œç»„åˆã€‚</li><li>è¾“å…¥ç§°ä¸ºæ•°æ®ï¼ˆData, Dï¼‰ï¼Œè¾“å‡ºç§°ä¸ºQï¼ˆä»£è¡¨é™æ­¢Quiescentï¼‰ã€‚</li></ul></li></ul><h2 id="è§¦å‘å™¨-FF-çš„æ—¶åº"><a href="#è§¦å‘å™¨-FF-çš„æ—¶åº" class="headerlink" title="è§¦å‘å™¨(FF)çš„æ—¶åº"></a>è§¦å‘å™¨(FF)çš„æ—¶åº</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730200903106.png" alt="image-20240730200903106"></p><blockquote><p>è¿™ä¸ªæ˜¯ä¸Šå‡æ²¿è§¦å‘è§¦å‘å™¨(rising edge-triggered)ï¼Œè¿˜æœ‰ä¸‹é™æ²¿è§¦å‘è§¦å‘å™¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªè€ƒè™‘ä¸Šå‡æ²¿è§¦å‘çš„è§¦å‘å™¨ã€ä¹Ÿç§°ä¸ºæ­£è¾¹æ²¿(positive edge)ã€‚</p><p> è¿™æ„å‘³ç€å½“å®ƒ ä» 0 å˜ä¸º 1 æ—¶ï¼Œå°±ä¼šè§¦å‘ï¼Œå³è´Ÿè½½çš„æ„æ€ã€‚</p></blockquote><h3 id="è§¦å‘å™¨çš„å·¥ä½œåŸç†"><a href="#è§¦å‘å™¨çš„å·¥ä½œåŸç†" class="headerlink" title="è§¦å‘å™¨çš„å·¥ä½œåŸç†"></a>è§¦å‘å™¨çš„å·¥ä½œåŸç†</h3><ul><li><p><strong>è§¦å‘å™¨çš„è¾“å…¥è¾“å‡º</strong>ï¼š</p><ul><li>è¾“å…¥æ•°æ®é€šè¿‡è§¦å‘å™¨çš„æ—¶é’Ÿä¿¡å·åœ¨ä¸Šå‡æ²¿è¢«é‡‡æ ·ã€‚</li><li>è¾“å‡ºæ•°æ®åœ¨è§¦å‘å™¨é‡‡æ ·åçš„æŸä¸ªå»¶è¿Ÿæ—¶é—´å†…ä¼ è¾“åˆ°è¾“å‡ºç«¯ã€‚</li><li>ä¸Šå‡æ²¿è§¦å‘ï¼ˆRising Edge Triggeredï¼‰ï¼šåœ¨æ—¶é’Ÿä¿¡å·ä»0åˆ°1çš„ä¸Šå‡æ²¿æ—¶é‡‡æ ·è¾“å…¥æ•°æ®ã€‚</li></ul></li><li><p><strong>æ—¶åºå›¾è§£é‡Š</strong>ï¼š</p><ul><li>æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿æ˜¯è§¦å‘å™¨å·¥ä½œçš„å…³é”®æ—¶åˆ»ã€‚</li><li>åœ¨ä¸Šå‡æ²¿æ—¶ï¼Œè§¦å‘å™¨é‡‡æ ·è¾“å…¥æ•°æ®å¹¶å°†å…¶ä¼ è¾“åˆ°è¾“å‡ºç«¯ã€‚</li><li>è¾“å…¥æ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ—¶é’Ÿä¿¡å·ä¹‹é—´å˜åŒ–ï¼Œä½†è§¦å‘å™¨åªåœ¨ä¸Šå‡æ²¿æ—¶é‡‡æ ·ã€‚</li></ul></li></ul><h3 id="è§¦å‘å™¨çš„æ—¶é—´å‚æ•°"><a href="#è§¦å‘å™¨çš„æ—¶é—´å‚æ•°" class="headerlink" title="è§¦å‘å™¨çš„æ—¶é—´å‚æ•°"></a>è§¦å‘å™¨çš„æ—¶é—´å‚æ•°</h3><ul><li><strong>è®¾ç½®æ—¶é—´ï¼ˆSetup Timeï¼‰</strong>ï¼š<ul><li>è¾“å…¥æ•°æ®åœ¨æ—¶é’Ÿä¸Šå‡æ²¿ä¹‹å‰å¿…é¡»ä¿æŒç¨³å®šçš„æ—¶é—´ã€‚</li></ul></li><li><strong>ä¿æŒæ—¶é—´ï¼ˆHold Timeï¼‰</strong>ï¼š<ul><li>è¾“å…¥æ•°æ®åœ¨æ—¶é’Ÿä¸Šå‡æ²¿ä¹‹åå¿…é¡»ä¿æŒç¨³å®šçš„æ—¶é—´ã€‚</li></ul></li><li><strong>æ—¶é’Ÿåˆ°è¾“å‡ºå»¶è¿Ÿï¼ˆClock to Q Delayï¼‰</strong>ï¼š<ul><li>ä»æ—¶é’Ÿä¸Šå‡æ²¿åˆ°è¾“å‡ºæ•°æ®ç¨³å®šæ‰€éœ€çš„æ—¶é—´ã€‚</li></ul></li></ul><h3 id="ç†æƒ³æƒ…å†µä¸‹è§¦å‘å™¨çš„å‚æ•°è¦æ±‚"><a href="#ç†æƒ³æƒ…å†µä¸‹è§¦å‘å™¨çš„å‚æ•°è¦æ±‚" class="headerlink" title="ç†æƒ³æƒ…å†µä¸‹è§¦å‘å™¨çš„å‚æ•°è¦æ±‚"></a>ç†æƒ³æƒ…å†µä¸‹è§¦å‘å™¨çš„å‚æ•°è¦æ±‚</h3><ul><li><strong>è¾ƒå°çš„æ—¶é’Ÿåˆ°è¾“å‡ºå»¶è¿Ÿ</strong>ï¼š<ul><li>å»¶è¿Ÿè¶Šå°ï¼Œç”µè·¯è¿è¡Œé€Ÿåº¦è¶Šå¿«ã€‚</li></ul></li><li><strong>è¾ƒå°çš„è®¾ç½®å’Œä¿æŒæ—¶é—´</strong>ï¼š<ul><li>ç¨³å®šè¾“å…¥æ•°æ®çš„æ—¶é—´çª—å£è¶Šå°è¶Šå¥½ã€‚</li><li>è¾“å…¥æ•°æ®èƒ½è¢«å¿«é€Ÿé‡‡æ ·å¹¶ä¼ è¾“åˆ°è¾“å‡ºç«¯ã€‚</li></ul></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul><li>è§¦å‘å™¨æ˜¯å¯„å­˜å™¨çš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œé€šè¿‡æ—¶é’Ÿä¿¡å·çš„ä¸Šå‡æ²¿é‡‡æ ·è¾“å…¥æ•°æ®ï¼Œå¹¶åœ¨ä¸€å®šå»¶è¿Ÿåè¾“å‡ºã€‚</li><li>ç†æƒ³çš„è§¦å‘å™¨éœ€è¦è¾ƒå°çš„è®¾ç½®æ—¶é—´ã€ä¿æŒæ—¶é—´å’Œæ—¶é’Ÿåˆ°è¾“å‡ºå»¶è¿Ÿï¼Œä»¥å®ç°æ›´å¿«ã€æ›´ç¨³å®šçš„ç”µè·¯æ€§èƒ½ã€‚</li></ul><h2 id="ä»¥è§¦å‘å™¨æ—¶åºå›¾è§’åº¦å†çœ‹ç´¯åŠ å™¨"><a href="#ä»¥è§¦å‘å™¨æ—¶åºå›¾è§’åº¦å†çœ‹ç´¯åŠ å™¨" class="headerlink" title="ä»¥è§¦å‘å™¨æ—¶åºå›¾è§’åº¦å†çœ‹ç´¯åŠ å™¨"></a>ä»¥è§¦å‘å™¨æ—¶åºå›¾è§’åº¦å†çœ‹ç´¯åŠ å™¨</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730203142094.png" alt="image-20240730203142094"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730203151964.png" alt="image-20240730203151964"></p><ul><li>å¯„å­˜å™¨çš„é‡ç½®è¾“å…¥ç”¨äºå¼ºè¿«å¯„å­˜å™¨åˆ°æ‰€æœ‰çš„é›¶ç‚¹(ä¼˜å…ˆäºDè¾“å…¥)ã€‚</li><li>Â§ Si - 1ä¿å­˜äº†ç¬¬i - 1æ¬¡è¿­ä»£çš„ç»“æœã€‚</li><li>Â§ä»å¯„å­˜å™¨çš„è¾“å‡ºå¼€å§‹åˆ†æç”µè·¯æ—¶åºã€‚</li><li>Siæš‚æ—¶æ˜¯é”™è¯¯çš„ï¼Œä½†å¯„å­˜å™¨æ€»æ˜¯æ•è·æ­£ç¡®çš„å€¼ã€‚</li><li>åœ¨å¥½çš„ç”µè·¯ä¸­ï¼Œclkä¸Šå‡æ²¿é™„è¿‘ä¸ä¼šå‡ºç°ä¸ç¨³å®šç°è±¡ã€‚</li></ul><blockquote><p>è¿™ä¸ªå›¾éœ€è¦æ³¨æ„çš„æ˜¯Si-1æ˜¯è¾“å…¥ï¼ŒSiæ‰æ˜¯è¾“å‡º</p></blockquote><p>ç®€è¿°ä¸‹å…¨è¿‡ç¨‹ï¼š</p><ul><li>resetå¼€å…³å¯åŠ¨ï¼ŒSi-1è®¾ç½®ä¸º0ï¼ŒåŒXiä¸€èµ·è¿›å…¥åŠ æ³•å™¨ä¸­ï¼ŒSiå†ç»è¿‡å¯„å­˜å™¨å˜æˆSi-1åŒXiè¿›è¡Œè®¡ç®—</li></ul><h1 id="ä½¿ç”¨æµæ°´çº¿-ç®¡çº¿è®¾è®¡æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½-Pipelining-for-Performance"><a href="#ä½¿ç”¨æµæ°´çº¿-ç®¡çº¿è®¾è®¡æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½-Pipelining-for-Performance" class="headerlink" title="ä½¿ç”¨æµæ°´çº¿&#x2F;ç®¡çº¿è®¾è®¡æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½(Pipelining for Performance)"></a>ä½¿ç”¨æµæ°´çº¿&#x2F;ç®¡çº¿è®¾è®¡æ¥æé«˜ç³»ç»Ÿçš„æ€§èƒ½(Pipelining for Performance)</h1><h2 id="æœ€å¤§æ—¶é’Ÿé¢‘ç‡"><a href="#æœ€å¤§æ—¶é’Ÿé¢‘ç‡" class="headerlink" title="æœ€å¤§æ—¶é’Ÿé¢‘ç‡"></a>æœ€å¤§æ—¶é’Ÿé¢‘ç‡</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730204106508.png" alt="image-20240730204106508"></p><ul><li>è®¨è®ºäº†å¦‚ä½•å‡å°‘å‘¨æœŸä»¥æé«˜é¢‘ç‡ã€‚</li><li>é€šè¿‡ç”µè·¯çš„å»¶è¿Ÿåˆ†ææ ‡å‡†ç”µè·¯ï¼Œå¾—å‡ºç¬¬ä¸€ä¸ªå»¶è¿Ÿæ˜¯æ—¶é’Ÿåˆ°Qçš„æ—¶é—´ï¼ˆt_clk_to_Qï¼‰ï¼Œç¬¬äºŒä¸ªå»¶è¿Ÿæ˜¯CL Delayç»„åˆé€»è¾‘å»¶è¿Ÿï¼Œç¬¬ä¸‰æ˜¯å› ä¸ºåœ¨t_setupä¹‹å‰å³åœ¨ä¸‹ä¸€ä¸Šå‡æ—¶cléœ€è¦ä¿æŒç¨³å®š</li><li>é‡ç‚¹åœ¨äºç¡®ä¿ä¸‹ä¸€ä¸ªä¸Šå‡æ²¿ä¹‹å‰çš„æ‰€æœ‰å»¶è¿Ÿéƒ½ç¨³å®šã€‚</li></ul><blockquote><p>å›¾ä¸­è·¯çº¿é¢œè‰²å¯¹åº”æ—¶é—´é¢œè‰²</p></blockquote><h2 id="æµæ°´çº¿çš„æ¦‚å¿µ"><a href="#æµæ°´çº¿çš„æ¦‚å¿µ" class="headerlink" title="æµæ°´çº¿çš„æ¦‚å¿µ"></a>æµæ°´çº¿çš„æ¦‚å¿µ</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730204141836.png" alt="image-20240730204141836"></p><ul><li>å°†å¤æ‚çš„ä»»åŠ¡åˆ†å‰²æˆæ›´å°çš„æ­¥éª¤ï¼Œä»¥æé«˜å¤„ç†é¢‘ç‡ã€‚</li><li>é€šè¿‡ä¸€ä¸ªä¾‹å­è§£é‡Šï¼šæƒ³è±¡ä¸€ä¸ªç”Ÿäº§çº¿ä¸ŠåŒ…è£¹å·§å…‹åŠ›å’Œå†™ä¿³å¥çš„ä»»åŠ¡ï¼Œè‹¥åˆ†ç»™ä¸¤ä¸ªäººå®Œæˆï¼Œæ¯ä¸€æ­¥éƒ½ä¼šæ›´å¿«ã€‚</li><li>æ’å…¥æ›´å¤šå¯„å­˜å™¨æ¥åˆ†å‰²ä»»åŠ¡ï¼Œä»è€Œå‡å°‘æ¯ä¸ªæ­¥éª¤çš„å»¶è¿Ÿã€‚</li></ul><h2 id="å®ç°æµæ°´çº¿"><a href="#å®ç°æµæ°´çº¿" class="headerlink" title="å®ç°æµæ°´çº¿"></a>å®ç°æµæ°´çº¿</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730204149590.png" alt="image-20240730204149590"></p><ul><li>åœ¨ç»„åˆé€»è¾‘ç”µè·¯ä¸­æ’å…¥é¢å¤–çš„å¯„å­˜å™¨ã€‚</li><li>æ—¶é’Ÿä¸Šå‡æ²¿åˆ°è¾“å‡ºç¨³å®šä¹‹é—´çš„å»¶è¿Ÿç§°ä¸ºt_clk_to_Qã€‚</li><li>åˆ†å‰²åçš„æ¯ä¸ªæ­¥éª¤çš„å»¶è¿Ÿæ›´å°ï¼Œæ•´ä½“å¤„ç†é¢‘ç‡æ›´é«˜ã€‚</li></ul><blockquote><p>æ˜¯åœ¨+å’Œshifterä¸­é—´åŠ äº†ä¸ªregåç›¸å½“äºæŠŠCL delayæ‹†å¼€æˆä¸¤ä¸ªç‹¬ç«‹çš„è¿™ä¸ªæ•°æ®å›è·¯ï¼Œæ‰€ä»¥æœ€å¤§å»¶è¿Ÿå‡å°äº†æ—¶é’Ÿå‘¨æœŸå°äº†ï¼Œæ—¶é’Ÿé¢‘ç‡å°±å¤§äº†ï¼Œoutputå°±å¤šäº†ã€‚</p></blockquote><h2 id="ä»£ä»·ä¸æ”¶ç›Š"><a href="#ä»£ä»·ä¸æ”¶ç›Š" class="headerlink" title="ä»£ä»·ä¸æ”¶ç›Š"></a>ä»£ä»·ä¸æ”¶ç›Š</h2><ul><li>æµæ°´çº¿ä½¿æ¯ç§’çš„è¾“å‡ºæ›´å¤šï¼Œä½†æ¯ä¸ªæ•°æ®é€šè¿‡æµæ°´çº¿æ‰€éœ€çš„æ—¶é—´ç•¥é•¿ã€‚</li><li>è¿™ç§æ–¹æ³•çš„æ•´ä½“æ”¶ç›Šæ˜¯æ¯ç§’å¤„ç†æ›´å¤šçš„æ•°æ®ã€‚</li></ul><h2 id="å…³é”®æœ¯è¯­å›é¡¾"><a href="#å…³é”®æœ¯è¯­å›é¡¾" class="headerlink" title="å…³é”®æœ¯è¯­å›é¡¾"></a>å…³é”®æœ¯è¯­å›é¡¾</h2><ul><li><strong>æ—¶é’Ÿ</strong>ï¼šç³»ç»Ÿçš„å¿ƒè·³ã€‚</li><li><strong>è®¾ç½®æ—¶é—´ï¼ˆSetup Timeï¼‰</strong>ï¼šä¸Šå‡æ²¿ä¹‹å‰æ•°æ®å¿…é¡»ç¨³å®šçš„æ—¶é—´ã€‚</li><li><strong>ä¿æŒæ—¶é—´ï¼ˆHold Timeï¼‰</strong>ï¼šä¸Šå‡æ²¿ä¹‹åæ•°æ®å¿…é¡»ä¿æŒç¨³å®šçš„æ—¶é—´ã€‚</li><li><strong>æ—¶é’Ÿåˆ°Qçš„æ—¶é—´ï¼ˆt_clk_to_Qï¼‰</strong>ï¼šä¸Šå‡æ²¿å‘ç”Ÿåˆ°æ•°æ®åœ¨è¾“å‡ºç«¯å£ç¨³å®šä¹‹é—´çš„å»¶è¿Ÿã€‚</li><li><strong>è§¦å‘å™¨</strong>ï¼šæ„å»ºå¯„å­˜å™¨çš„åŸºç¡€ï¼Œç”¨äºRISC Væœºå™¨çš„æ•°æ®è·¯å¾„ã€‚</li></ul><h1 id="æœ‰é™çŠ¶æ€æœº-Finite-State-Machines"><a href="#æœ‰é™çŠ¶æ€æœº-Finite-State-Machines" class="headerlink" title="æœ‰é™çŠ¶æ€æœº(Finite State Machines)"></a>æœ‰é™çŠ¶æ€æœº(Finite State Machines)</h1><h2 id="æœ‰é™çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µ"><a href="#æœ‰é™çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æœ‰é™çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µ"></a>æœ‰é™çŠ¶æ€æœºçš„åŸºæœ¬æ¦‚å¿µ</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730205503583.png" alt="image-20240730205503583"></p><ol><li><strong>çŠ¶æ€ä¸è½¬æ¢</strong>ï¼šFSMç”±ä¸€ç³»åˆ—çŠ¶æ€å’Œè½¬æ¢ç»„æˆï¼Œç®­å¤´è¡¨ç¤ºè½¬æ¢ã€‚</li><li><strong>è¾“å‡ºçš„æ¥æº</strong>ï¼šè¾“å‡ºå¯ä»¥æ˜¯è½¬æ¢çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é™„åŠ åœ¨çŠ¶æ€ä¸Šã€‚</li><li><strong>è½¬æ¢æ¡ä»¶</strong>ï¼šæ¯ä¸ªçŠ¶æ€éƒ½å¿…é¡»æœ‰æ‰€æœ‰å¯èƒ½è¾“å…¥çš„å‡ºå£ç®­å¤´ã€‚</li><li><strong>åˆå§‹çŠ¶æ€</strong>ï¼šæ¯ä¸ªFSM<strong>éœ€è¦</strong>æœ‰ä¸€ä¸ªç®­å¤´æŒ‡ç¤ºåˆå§‹çŠ¶æ€æˆ–ç”¨åŒåœˆæ ‡ç¤ºåˆå§‹çŠ¶æ€ã€‚</li></ol><h2 id="å®ä¾‹ï¼šæ£€æµ‹ä¸‰ä¸ªè¿ç»­çš„1"><a href="#å®ä¾‹ï¼šæ£€æµ‹ä¸‰ä¸ªè¿ç»­çš„1" class="headerlink" title="å®ä¾‹ï¼šæ£€æµ‹ä¸‰ä¸ªè¿ç»­çš„1"></a>å®ä¾‹ï¼šæ£€æµ‹ä¸‰ä¸ªè¿ç»­çš„1</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730205516285.png" alt="image-20240730205516285"></p><p>FSMå¯ä»¥ç”¨æ¥æ£€æµ‹è¾“å…¥åºåˆ—ä¸­çš„ç‰¹å®šæ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç”¨äºæ£€æµ‹ä¸‰ä¸ªè¿ç»­çš„1ã€‚</p><h3 id="çŠ¶æ€æœºè®¾è®¡"><a href="#çŠ¶æ€æœºè®¾è®¡" class="headerlink" title="çŠ¶æ€æœºè®¾è®¡"></a>çŠ¶æ€æœºè®¾è®¡</h3><ul><li><strong>çŠ¶æ€è¡¨ç¤º</strong>ï¼š<ul><li><code>çŠ¶æ€0</code>ï¼šåˆå§‹åŒ–çŠ¶æ€ï¼Œè¡¨ç¤ºæ²¡æœ‰æ£€æµ‹åˆ°1ã€‚</li><li><code>çŠ¶æ€1</code>ï¼šæ£€æµ‹åˆ°ä¸€ä¸ª1ã€‚</li><li><code>çŠ¶æ€2</code>ï¼šæ£€æµ‹åˆ°ä¸¤ä¸ªè¿ç»­çš„1ã€‚</li><li><code>çŠ¶æ€0</code>ï¼šé‡æ–°å›åˆ°åˆå§‹çŠ¶æ€ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°ä¸‰ä¸ªè¿ç»­çš„1ã€‚</li></ul></li></ul><h3 id="çŠ¶æ€è½¬æ¢è§„åˆ™"><a href="#çŠ¶æ€è½¬æ¢è§„åˆ™" class="headerlink" title="çŠ¶æ€è½¬æ¢è§„åˆ™"></a>çŠ¶æ€è½¬æ¢è§„åˆ™</h3><ul><li><strong>çŠ¶æ€0</strong>ï¼š<ul><li>è¾“å…¥0ï¼šä¿æŒåœ¨çŠ¶æ€0ã€‚</li><li>è¾“å…¥1ï¼šè½¬æ¢åˆ°çŠ¶æ€1ã€‚</li></ul></li><li><strong>çŠ¶æ€1</strong>ï¼š<ul><li>è¾“å…¥0ï¼šå›åˆ°çŠ¶æ€0ã€‚</li><li>è¾“å…¥1ï¼šè½¬æ¢åˆ°çŠ¶æ€2ã€‚</li></ul></li><li><strong>çŠ¶æ€2</strong>ï¼š<ul><li>è¾“å…¥0ï¼šå›åˆ°çŠ¶æ€0ã€‚</li><li>è¾“å…¥1ï¼šè¾“å‡º1ï¼Œè¡¨ç¤ºæ£€æµ‹åˆ°ä¸‰ä¸ªè¿ç»­çš„1ï¼Œç„¶åå›åˆ°çŠ¶æ€0ã€‚</li></ul></li></ul><h2 id="FSMçš„ç¡¬ä»¶å®ç°"><a href="#FSMçš„ç¡¬ä»¶å®ç°" class="headerlink" title="FSMçš„ç¡¬ä»¶å®ç°"></a>FSMçš„ç¡¬ä»¶å®ç°</h2><ul><li>..å› æ­¤éœ€è¦ä¸€ä¸ªå¯„å­˜å™¨æ¥ä¿å­˜æœºå™¨å¤„äºå“ªä¸ªçŠ¶æ€çš„è¡¨ç¤ºã€‚<ul><li>Ãºä¸ºæ¯ä¸ªçŠ¶æ€ä½¿ç”¨å”¯ä¸€çš„ä½æ¨¡å¼ã€‚</li></ul></li><li>ä½¿ç”¨ç»„åˆé€»è¾‘ç”µè·¯å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†è¾“å…¥å’Œå½“å‰çŠ¶æ€( PS )çš„è¾“å…¥æ˜ å°„åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€( NS )å’Œè¾“å‡ºã€‚</li></ul><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730210028794.png" alt="image-20240730210028794"></p><h2 id="FSMçš„ç¡¬ä»¶ï¼šç»„åˆé€»è¾‘"><a href="#FSMçš„ç¡¬ä»¶ï¼šç»„åˆé€»è¾‘" class="headerlink" title="FSMçš„ç¡¬ä»¶ï¼šç»„åˆé€»è¾‘"></a>FSMçš„ç¡¬ä»¶ï¼šç»„åˆé€»è¾‘</h2><p>ä¸‹ç¯‡è¯¦è®²</p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730210048734.png" alt="image-20240730210048734"></p><h2 id="åŒæ­¥ç³»ç»Ÿçš„ä¸€èˆ¬æ¨¡å‹"><a href="#åŒæ­¥ç³»ç»Ÿçš„ä¸€èˆ¬æ¨¡å‹" class="headerlink" title="åŒæ­¥ç³»ç»Ÿçš„ä¸€èˆ¬æ¨¡å‹"></a>åŒæ­¥ç³»ç»Ÿçš„ä¸€èˆ¬æ¨¡å‹</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F%E4%B9%8B%E7%8A%B6%E6%80%81/image-20240730210107065.png" alt="image-20240730210107065"></p><ul><li>ç”±å¯„å­˜å™¨åˆ†éš”çš„CLå—é›†åˆã€‚</li><li>å¯„å­˜å™¨å¯ä»¥èƒŒé èƒŒï¼ŒCLå—å¯ä»¥èƒŒé èƒŒã€‚</li><li>åé¦ˆæ˜¯å¯é€‰çš„ã€‚</li><li>æ—¶é’Ÿä¿¡å·åªä¸å¯„å­˜å™¨çš„æ—¶é’Ÿè¾“å…¥è¿æ¥ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(å…­)-åŒæ­¥æ•°å­—ç³»ç»Ÿ</title>
      <link href="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/"/>
      <url>/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/</url>
      
        <content type="html"><![CDATA[<p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729043433239.png" alt="image-20240729043433239"></p><p>æˆ‘ä»¬å·²ç»ä»‹ç»äº†é«˜çº§è¯­è¨€ã€æ±‡ç¼–è¯­è¨€å’Œæœºå™¨è¯­è¨€ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä»ç¡¬ä»¶æ¶æ„å’Œé€»è¾‘ç”µè·¯æ¥è®¨è®ºä»£ç è¿è¡Œå‘ç”Ÿäº†ä»€ä¹ˆ</p><p>åŒæ­¥æ•°å­—ç³»ç»Ÿå³Synchronous Digital Systems (SDS)ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è®¨è®ºåŒæ­¥æ•°å­—ç³»ç»Ÿä¸­çš„å¼€å…³(Switches)ã€æ™¶ä½“ç®¡(Transistors)ã€ä¿¡å·(Signals)ã€æ³¢å½¢(Waveforms)å’ŒçŠ¶æ€(Status)</p><h1 id="è®¾è®¡å±‚æ¬¡"><a href="#è®¾è®¡å±‚æ¬¡" class="headerlink" title="è®¾è®¡å±‚æ¬¡"></a>è®¾è®¡å±‚æ¬¡</h1><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730205732162.png" alt="image-20240730205732162"></p><h1 id="åŒæ­¥æ•°å­—ç³»ç»Ÿ"><a href="#åŒæ­¥æ•°å­—ç³»ç»Ÿ" class="headerlink" title="åŒæ­¥æ•°å­—ç³»ç»Ÿ"></a>åŒæ­¥æ•°å­—ç³»ç»Ÿ</h1><ul><li><strong>åŒæ­¥</strong>(Synchronous)ï¼šç³»ç»Ÿæœ‰ä¸€ä¸ªæ—¶é’Ÿä¿¡å·ï¼ˆå¿ƒè·³ï¼‰ï¼Œç°ä»£æ—¶é’Ÿé¢‘ç‡é€šå¸¸åœ¨3åˆ°4 GHzèŒƒå›´å†…ã€‚</li><li><strong>æ•°å­—</strong>(Digital)ï¼š<ul><li>æ‰€æœ‰å€¼éƒ½ç”¨ç¦»æ•£å€¼è¡¨ç¤º</li><li>å°†æ¨¡æ‹Ÿç”µå‹å’Œç”µæµè½¬æ¢ä¸ºæ•°å­—ä¿¡å·ï¼ˆ0å’Œ1ï¼‰ã€‚</li></ul></li></ul><h1 id="å¼€å…³-Switches"><a href="#å¼€å…³-Switches" class="headerlink" title="å¼€å…³(Switches)"></a>å¼€å…³(Switches)</h1><p>ç‰©ç†ç”µè·¯çš„åŸºæœ¬è¦ç´ </p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729044213625.png" alt="image-20240729044213625"></p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729044225864.png" alt="image-20240729044225864"></p><blockquote><p>æˆ‘ä»¬é€šå¸¸æŠŠé—­åˆç§°ä¸ºâ€æ–­è¨€(asserrte)â€</p></blockquote><h1 id="æ™¶ä½“ç®¡-Transistor"><a href="#æ™¶ä½“ç®¡-Transistor" class="headerlink" title="æ™¶ä½“ç®¡(Transistor)"></a>æ™¶ä½“ç®¡(Transistor)</h1><h2 id="æ™¶ä½“ç®¡çš„åŸºæœ¬æ¦‚å¿µ"><a href="#æ™¶ä½“ç®¡çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="æ™¶ä½“ç®¡çš„åŸºæœ¬æ¦‚å¿µ"></a>æ™¶ä½“ç®¡çš„åŸºæœ¬æ¦‚å¿µ</h2><ul><li><strong>åŠå¯¼ä½“</strong>ï¼šæ™¶ä½“ç®¡æ˜¯åŠå¯¼ä½“å™¨ä»¶ï¼Œæœ‰æ—¶å¯¼ç”µï¼Œæœ‰æ—¶ä¸å¯¼ç”µã€‚é€šè¿‡å¦ä¸€ç”µæºå¯ä»¥æ§åˆ¶å…¶å¯¼ç”µæ€§ã€‚</li><li><strong>æ”¾å¤§å™¨ä¸å¼€å…³</strong>ï¼šæ™¶ä½“ç®¡æ—¢å¯ç”¨ä½œæ”¾å¤§å™¨ï¼Œä¹Ÿå¯ç”¨ä½œå¼€å…³ã€‚</li><li><strong>CMOSæŠ€æœ¯</strong>ï¼šç°ä»£æ•°å­—ç³»ç»Ÿä½¿ç”¨äº’è¡¥é‡‘å±æ°§åŒ–ç‰©åŠå¯¼ä½“ï¼ˆCMOSï¼‰æŠ€æœ¯ï¼Œè¯¥æŠ€æœ¯ä½¿ç”¨ç”µå‹æ§åˆ¶å¼€å…³ã€‚</li></ul><blockquote><ul><li>MOS: Metal-Oxide on Semiconductor å³ åŠå¯¼ä½“ä¸Šçš„é‡‘å±-æ°§åŒ–ç‰©</li><li>Cä¸ºäº’è¡¥ï¼šå¸¸å¼€å’Œå¸¸é—­çš„å¼€å…³</li></ul></blockquote><h2 id="æ™¶ä½“ç®¡çš„ç»“æ„ä¸å·¥ä½œåŸç†"><a href="#æ™¶ä½“ç®¡çš„ç»“æ„ä¸å·¥ä½œåŸç†" class="headerlink" title="æ™¶ä½“ç®¡çš„ç»“æ„ä¸å·¥ä½œåŸç†"></a>æ™¶ä½“ç®¡çš„ç»“æ„ä¸å·¥ä½œåŸç†</h2><ul><li><p>MOSç®¡èµ·ç”µå‹æ§åˆ¶å¼€å…³çš„ä½œç”¨</p></li><li><p><strong>ä¸‰å¼•è„šå™¨ä»¶</strong>ï¼šæ™¶ä½“ç®¡é€šå¸¸æœ‰ä¸‰ä¸ªå¼•è„šâ€”â€”æ¼æï¼ˆDrainï¼‰ã€æ …æï¼ˆGateï¼‰å’Œæºæï¼ˆSourceï¼‰ã€‚è®°ä½è¿™ä¸‰ä¸ªåå­—çš„ç¼©å†™DGSï¼ˆDrain, Gate, Sourceï¼‰ã€‚</p><ul><li>å¦‚ä½•è®°å¿†ï¼Ÿï¼šDan Garcia Says!</li></ul></li><li><p><strong>ç”µå‹æ§åˆ¶é—¨</strong>ï¼š</p><ul><li>æ …æç”µå‹é«˜äºæºæç”µå‹æ—¶ï¼Œå¼€å…³é—­åˆï¼Œç”µæµæµåŠ¨ï¼›</li><li>æ …æç”µå‹ä½äºæºæç”µå‹æ—¶ï¼Œå¼€å…³æ–­å¼€ï¼Œæ— ç”µæµæµåŠ¨ã€‚</li></ul></li></ul><p>ä¸‹å›¾ä¸º<strong>Næ²Ÿé“ä¸Pæ²Ÿé“æ™¶ä½“ç®¡</strong>ï¼š</p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729044904525.png" alt="image-20240729044904525"></p><blockquote><ul><li><p>Næ²Ÿé“æ™¶ä½“ç®¡ï¼šæ …æç”µå‹é«˜äºæºæç”µå‹æ—¶å¼€å…³é—­åˆã€‚</p></li><li><p>Pæ²Ÿé“æ™¶ä½“ç®¡ï¼šæ …æç”µå‹ä½äºæºæç”µå‹æ—¶å¼€å…³é—­åˆã€‚</p><p>nâ€™s the normal.</p><p>pâ€™s the opposite.</p></li></ul></blockquote><h2 id="N-Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜"><a href="#N-Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜" class="headerlink" title="N&#x2F;Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜"></a>N&#x2F;Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729045744338.png" alt="image-20240729045744338"></p><p>å¯¹äºè¿™ä¸ªç”µè·¯å›¾ï¼Œæœ‰ä¸¤ä¸ªéœ€è¦æ»¡è¶³çš„è¦æ±‚ï¼š</p><ol><li>æˆ‘ä»¬æ€»æ˜¯å¿…é¡»è®© y æœ‰ä¸€ä¸ªè¿æ¥ï¼Œè¦ä¹ˆåˆ° 0ï¼Œè¦ä¹ˆåˆ° 3ã€‚</li><li>æ°¸è¿œä¸èƒ½å°† é«˜ç”µå¹³å¯¹åœ°ã€ç”µæºå¯¹åœ°çŸ­è·¯ã€‚ å³ç”µè·¯ä¸­ä¹Ÿä¸å¾—å­˜åœ¨ 3 ä¼å’Œ 0 ä¼ä¹‹é—´æˆ– 1åˆ° 0 ä¹‹é—´çš„è¿æ¥ã€‚</li></ol><h2 id="N-Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜2"><a href="#N-Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜2" class="headerlink" title="N&#x2F;Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜2"></a>N&#x2F;Pæ²Ÿé“æ™¶ä½“ç®¡ä¾‹å­è¯´æ˜2</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240729050129333.png" alt="image-20240729050129333"></p><h1 id="æ³¢å½¢-Waveforms-å’ŒçŠ¶æ€-Status"><a href="#æ³¢å½¢-Waveforms-å’ŒçŠ¶æ€-Status" class="headerlink" title="æ³¢å½¢(Waveforms)å’ŒçŠ¶æ€(Status)"></a>æ³¢å½¢(Waveforms)å’ŒçŠ¶æ€(Status)</h1><h2 id="Clocks"><a href="#Clocks" class="headerlink" title="Clocks"></a>Clocks</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730182400160.png" alt="image-20240730182400160"></p><ul><li><strong>ä¿¡å·</strong><ul><li>å½“ä»…å°†æ•°å­—å¤„ç†ä¸º1æˆ–0æ—¶</li><li>é€šè¿‡å¯¼çº¿è¿ç»­ä¼ è¾“</li><li>ä¼ è¾“æ˜¯æœ‰æ•ˆå³æ—¶çš„</li><li>æš—ç¤ºä¸€æ¡å¯¼çº¿åœ¨æŸä¸€æ—¶åˆ»å«æœ‰1ä¸ªå€¼</li></ul></li></ul><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730182556584.png" alt="image-20240730182556584"></p><h2 id="é›†ç¾¤-Grouping"><a href="#é›†ç¾¤-Grouping" class="headerlink" title="é›†ç¾¤(Grouping)"></a>é›†ç¾¤(Grouping)</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730182621219.png" alt="image-20240730182621219"></p><blockquote><p>å°†å¤´å¾€å·¦åï¼ŒXçš„ç»“æœä»å·¦åˆ°å³åˆ†åˆ«æ˜¯1010ã€0110ã€0001ã€1000ã€1110</p></blockquote><h2 id="ç”µè·¯å»¶è¿Ÿ"><a href="#ç”µè·¯å»¶è¿Ÿ" class="headerlink" title="ç”µè·¯å»¶è¿Ÿ"></a>ç”µè·¯å»¶è¿Ÿ</h2><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730182900811.png" alt="image-20240730182900811"></p><h2 id="ç”µè·¯ç±»å‹"><a href="#ç”µè·¯ç±»å‹" class="headerlink" title="ç”µè·¯ç±»å‹"></a>ç”µè·¯ç±»å‹</h2><ul><li>åŒæ­¥æ•°å­—ç³»ç»Ÿç”±ä¸¤ç§åŸºæœ¬ç±»å‹çš„ç”µè·¯ç»„æˆï¼š</li><li>ç»„åˆé€»è¾‘( CL )ç”µè·¯<ul><li>æˆ‘ä»¬å‰é¢çš„åŠ æ³•å™¨ç”µè·¯å°±æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œ</li><li>è¾“å‡ºä»…æ˜¯è¾“å…¥çš„å‡½æ•°ï¼Œ</li><li>ç±»ä¼¼äºæ•°å­¦ä¸­çš„çº¯å‡½æ•°ï¼Œy &#x3D; f ( x )ã€‚(æ²¡æœ‰åŠæ³•å­˜å‚¨ä»ä¸€æ¬¡è°ƒç”¨åˆ°ä¸‹ä¸€æ¬¡çš„ä¿¡æ¯ã€‚æ— å‰¯ä½œç”¨) </li><li>ç»„åˆé€»è¾‘å¯èƒ½æœ‰å»¶è¿Ÿï¼Œä½†æ˜¯æ²¡æœ‰åé¦ˆï¼Œæ²¡æœ‰çŠ¶æ€ã€‚è¾“å‡ºåªæ˜¯ è¾“å…¥çš„å‡½æ•°ã€‚</li></ul></li><li>çŠ¶æ€å…ƒä»¶<ul><li>å­˜å‚¨ä¿¡æ¯çš„ç”µè·¯</li></ul></li></ul><blockquote><p>çŠ¶æ€å…ƒç´ æ¥ å­˜å‚¨æˆ‘ä»¬çš„æ•°æ®ã€å¯„å­˜å™¨ã€ç¼“å­˜ã€å†…å­˜ã€ç£ç›˜ã€‚æ‰€æœ‰è¿™äº›ä¸œè¥¿éƒ½æœ‰çŠ¶æ€ã€‚ä»–ä»¬è®°å¾— ä½ æ”¾åœ¨é‚£é‡Œçš„ä¸œè¥¿ã€‚</p></blockquote><h2 id="æœ‰çŠ¶æ€çš„ç”µè·¯"><a href="#æœ‰çŠ¶æ€çš„ç”µè·¯" class="headerlink" title="æœ‰çŠ¶æ€çš„ç”µè·¯"></a>æœ‰çŠ¶æ€çš„ç”µè·¯</h2><p><a href="https://youtu.be/EQYtPrBWvrU?list=PLnvUoC1Ghb7wJLSxkK0XWdHYjav1Tl3Z9&t=548">https://youtu.be/EQYtPrBWvrU?list=PLnvUoC1Ghb7wJLSxkK0XWdHYjav1Tl3Z9&amp;t=548</a></p><p>è¿™ç§°ä¸ºå¯„å­˜å™¨(</p><p><img src="/2024/07/29/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%90%8C%E6%AD%A5%E6%95%B0%E5%AD%97%E7%B3%BB%E7%BB%9F/image-20240730183533301.png" alt="image-20240730183533301"></p><ul><li>å®ƒæœ‰ n ä½è¾“å…¥ï¼Œn ä½ è¾“å‡ºï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªåŠ è½½å™¨ã€‚è¿™ä¸ªå°ç”µè·¯è¡¨æ˜ï¼Œ å½“è¯¥ç”µè·¯å˜é«˜æ—¶ï¼Œä¼šå‘ç”Ÿä¸€äº›ç¥å¥‡çš„äº‹æƒ…ã€‚å› æ­¤ï¼Œå½“è¯¥å€¼å˜é«˜æ—¶ï¼Œ å¯„å­˜å™¨å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œ:<ul><li>å‡å¦‚æˆ‘æ˜¯ä¸€ä¸ªç™»è®°å‘˜ï¼Œæˆ‘æœå‘Outputä¸€ç«¯</li><li>å½“è´Ÿè½½å‡é«˜æ—¶ï¼Œæˆ‘è½¬èº«ï¼Œè·å–è¾“å…¥çš„å€¼å¹¶ä¿ç•™å®ƒç„¶åè½¬å‘outputè¾“å‡º</li><li>å½“è´Ÿè½½å˜å°ï¼Œæ— è®ºæˆ‘èƒŒå(input)æœ‰ä»€ä¹ˆå€¼ï¼Œæˆ‘éƒ½ä¸åœ¨ä¹</li></ul></li></ul><h2 id="å°æ€»ç»“"><a href="#å°æ€»ç»“" class="headerlink" title="å°æ€»ç»“"></a>å°æ€»ç»“</h2><blockquote><ul><li><p>æ—¶é’Ÿæ§åˆ¶æˆ‘ä»¬ç”µè·¯çš„è„‰å†²</p></li><li><p>Â§ç”µå‹ä¸ºæ¨¡æ‹Ÿé‡ï¼Œé‡åŒ–ä¸º0 &#x2F; 1</p></li><li><p>Â§ç”µè·¯å»¶è¿Ÿæ˜¯ç”Ÿæ´»çš„äº‹å®</p></li><li><p>ä¸¤ç±»ç”µè·¯ï¼š</p><ul><li>æ— çŠ¶æ€ç»„åˆé€»è¾‘( &amp; , | , ~) </li><li>æœ‰çŠ¶æ€ç”µè·¯(ä¾‹å¦‚,å¯„å­˜å™¨)</li></ul></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rustä¹‹æ—…-åˆè¯†å˜é‡ã€æ•°æ®ç±»å‹å’Œæ§åˆ¶æµ</title>
      <link href="/2024/07/22/Rust-Rust%E4%B9%8B%E6%97%85-%E5%88%9D%E8%AF%86%E5%8F%98%E9%87%8F%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%8E%A7%E5%88%B6%E6%B5%81/"/>
      <url>/2024/07/22/Rust-Rust%E4%B9%8B%E6%97%85-%E5%88%9D%E8%AF%86%E5%8F%98%E9%87%8F%E3%80%81%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E6%8E%A7%E5%88%B6%E6%B5%81/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Rust </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>3-CS61Cé¡¹ç›®ç¬”è®°-Lab4-ç”¨æŒ‡é’ˆç¼–å†™RISCVå‡½æ•°</title>
      <link href="/2024/07/12/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab4-%E7%94%A8%E6%8C%87%E9%92%88%E7%BC%96%E5%86%99RISCV%E5%87%BD%E6%95%B0/"/>
      <url>/2024/07/12/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab4-%E7%94%A8%E6%8C%87%E9%92%88%E7%BC%96%E5%86%99RISCV%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise 1"></a>Exercise 1</h1><p>åŸä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">map:</span><br><span class="line">    addi sp, sp, -12</span><br><span class="line">    sw ra, 0(sp)</span><br><span class="line">    sw s1, 4(sp)</span><br><span class="line">    sw s0, 8(sp)</span><br><span class="line"></span><br><span class="line">    beq a0, x0, done    # if we were given a null pointer, we&#x27;re done.</span><br><span class="line"></span><br><span class="line">    add s0, a0, x0      # save address of this node in s0</span><br><span class="line">    add s1, a1, x0      # save address of function in s1</span><br><span class="line">    add t0, x0, x0      # t0 is a counter</span><br><span class="line"></span><br><span class="line">    # remember that each node is 12 bytes long:</span><br><span class="line">    # - 4 for the array pointer</span><br><span class="line">    # - 4 for the size of the array</span><br><span class="line">    # - 4 more for the pointer to the next node</span><br><span class="line"></span><br><span class="line">    # also keep in mind that we should not make ANY assumption on which registers</span><br><span class="line">    # are modified by the callees, even when we know the content inside the functions </span><br><span class="line">    # we call. this is to enforce the abstraction barrier of calling convention.</span><br><span class="line">mapLoop:</span><br><span class="line">    add t1, s0, x0      # load the address of the array of current node into t1</span><br><span class="line">    lw t2, 4(s0)        # load the size of the node&#x27;s array into t2</span><br><span class="line"></span><br><span class="line">    add t1, t1, t0      # offset the array address by the count</span><br><span class="line">    lw a0, 0(t1)        # load the value at that address into a0</span><br><span class="line"></span><br><span class="line">    jalr s1             # call the function on that value.</span><br><span class="line"></span><br><span class="line">    sw a0, 0(t1)        # store the returned value back into the array</span><br><span class="line">    addi t0, t0, 1      # increment the count</span><br><span class="line">    bne t0, t2, mapLoop # repeat if we haven&#x27;t reached the array size yet</span><br><span class="line"></span><br><span class="line">    la a0, 8(s0)        # load the address of the next node into a0</span><br><span class="line">    lw a1, 0(s1)        # put the address of the function back into a1 to prepare for the recursion</span><br><span class="line"></span><br><span class="line">    jal  map            # recurse</span><br><span class="line">done:</span><br><span class="line">    lw s0, 8(sp)</span><br><span class="line">    lw s1, 4(sp)</span><br><span class="line">    lw ra, 0(sp)</span><br><span class="line">    addi sp, sp, 12</span><br><span class="line">    jr ra</span><br></pre></td></tr></table></figure><p>çº é”™</p><ul><li><p>æ•°ç»„åç§»é‡ä¸å¯¹</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">before:</span><br><span class="line">    add t1, t1, t0      # offset the array address by the count</span><br><span class="line">    lw a0, 0(t1)        # load the value at that address into a0</span><br><span class="line"></span><br><span class="line">after:</span><br><span class="line">    li t3, 4</span><br><span class="line">    mul t4, t0, t3</span><br><span class="line">    add t1, t1, t4     # offset the array address by the count</span><br><span class="line">    lw a0, 0(t1)        # load the value at that address into a0</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨å‡½æ•°æ—¶æ²¡æœ‰åŠæ—¶å­˜å‚¨</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">before:</span><br><span class="line">    jalr s1             # call the function on that value.</span><br><span class="line"></span><br><span class="line">after:</span><br><span class="line">    addi sp, sp, -24</span><br><span class="line">    sw ra, 0(sp)</span><br><span class="line">    sw s1, 4(sp)</span><br><span class="line">    sw s0, 8(sp)</span><br><span class="line">    sw t1, 12(sp)</span><br><span class="line">    sw t2, 16(sp)</span><br><span class="line">    sw t0, 20(sp)</span><br><span class="line"></span><br><span class="line">    jalr s1             # call the function on that value.</span><br><span class="line"></span><br><span class="line">    lw t0, 20(sp)</span><br><span class="line">    lw t2, 16(sp)</span><br><span class="line">    lw t1, 12(sp)</span><br><span class="line">    lw s0, 8(sp)</span><br><span class="line">    lw s1, 4(sp)</span><br><span class="line">    lw ra, 0(sp)</span><br><span class="line">    addi sp, sp, 24</span><br></pre></td></tr></table></figure></li><li><p>åŠ è½½ä¸‹ä¸€nodeåœ°å€è¿›å…¥a0é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">before:</span><br><span class="line">la a0, 8(s0)        # load the address of the next node into a0</span><br><span class="line">after:</span><br><span class="line">lw a0, 8(s0)</span><br></pre></td></tr></table></figure><blockquote><p>ä¿®æ”¹å‰<code>8(s0)</code> çš„å†™æ³•å¹¶ä¸é€‚ç”¨äº <code>la</code> æŒ‡ä»¤ï¼Œå› ä¸º <code>la</code> æŒ‡ä»¤çš„å‚æ•°æ˜¯ä¸€ä¸ªç¬¦å·ï¼ˆä¾‹å¦‚æ ‡ç­¾æˆ–å˜é‡åï¼‰ï¼Œè€Œä¸æ˜¯åç§»åœ°å€ã€‚æ­£ç¡®çš„ç”¨æ³•åº”è¯¥æ˜¯åƒ <code>la a0, symbol</code> è¿™æ ·çš„å½¢å¼ã€‚</p></blockquote></li><li><p>åŠ è½½è¿”å›å‡½æ•°åœ°å€é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">before:</span><br><span class="line">lw a1, 0(s1)        # put the address of the function back into a1 to prepare for the recursion</span><br><span class="line"></span><br><span class="line">after:</span><br><span class="line">add a1, s1, x0</span><br></pre></td></tr></table></figure><blockquote><p><code>add t0, s0, x0</code> çš„ç»“æœæ˜¯ <code>t0 = s0 + x0</code>ï¼Œå®é™…ä¸Šç­‰ä»·äº <code>t0 = s0</code>ï¼Œå› ä¸º <code>x0</code> æ°¸è¿œæ˜¯0ã€‚</p><p><code>lw t0, 0(s0)</code> çš„ç»“æœæ˜¯å°†å†…å­˜åœ°å€ <code>s0</code> ä¸­çš„æ•°æ®åŠ è½½åˆ° <code>t0</code>ã€‚</p></blockquote></li><li><p>åŠ è½½å½“å‰nodeåœ°å€é”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">before:</span><br><span class="line">add t1, s0, x0      # load the address of the array of current node into t1</span><br><span class="line"></span><br><span class="line">after:</span><br><span class="line">lw t1, s0, 0(x0)</span><br></pre></td></tr></table></figure><blockquote><p><code>add t0, s0, x0</code> çš„ç»“æœæ˜¯ <code>t0 = s0 + x0</code>ï¼Œå®é™…ä¸Šç­‰ä»·äº <code>t0 = s0</code>ï¼Œå› ä¸º <code>x0</code> æ°¸è¿œæ˜¯0ã€‚</p><p><code>lw t0, 0(s0)</code> çš„ç»“æœæ˜¯å°†å†…å­˜åœ°å€ <code>s0</code> ä¸­çš„æ•°æ®åŠ è½½åˆ° <code>t0</code>ã€‚</p></blockquote></li></ul><h1 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise 2"></a>Exercise 2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">f:</span><br><span class="line">    # YOUR CODE GOES HERE!</span><br><span class="line">    add t0, a0, 3       # The index of array</span><br><span class="line">    add t1, a1, x0      # The address of array</span><br><span class="line"></span><br><span class="line">    li t2, 4</span><br><span class="line">    mul t3, t2, t0      # The offset of array</span><br><span class="line"></span><br><span class="line">    add t4, t1, t3</span><br><span class="line"></span><br><span class="line">    lw a0, 0(t4)        # The result of the index of array</span><br><span class="line">    jr ra               # Always remember to jr ra after your function!</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(äº”)-RISCV-CALL</title>
      <link href="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/"/>
      <url>/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/</url>
      
        <content type="html"><![CDATA[<h1 id="CALL"><a href="#CALL" class="headerlink" title="CALL"></a>CALL</h1><p>Compilingï¼ŒAssembling, Linking, and Loading</p><h1 id="ä¼ªä»£ç "><a href="#ä¼ªä»£ç " class="headerlink" title="ä¼ªä»£ç "></a>ä¼ªä»£ç </h1><p>ç»™æ±‡ç¼–ç†è§£çš„ï¼Œè€Œä¸æ˜¯ç»™æœºå™¨äº†è§£çš„</p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606224755365.png" alt="image-20240606224755365"></p><blockquote><p>ç­”æ¡ˆï¼š</p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606224829394.png" alt="image-20240606224829394"></p></blockquote><h1 id="ç¿»è¯‘å’Œè¿è¡Œé¡¹ç›®ï¼šCALL"><a href="#ç¿»è¯‘å’Œè¿è¡Œé¡¹ç›®ï¼šCALL" class="headerlink" title="ç¿»è¯‘å’Œè¿è¡Œé¡¹ç›®ï¼šCALL"></a>ç¿»è¯‘å’Œè¿è¡Œé¡¹ç›®ï¼šCALL</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606225135064.png" alt="image-20240606225135064"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†è®¨è®ºæ€ä¹ˆå°†é«˜çº§è¯­è¨€ç¿»è¯‘æˆæœºå™¨ç </p><h2 id="æˆ‘ä»¬æ€ä¹ˆè¿è¡ŒCç¨‹åºï¼Ÿ"><a href="#æˆ‘ä»¬æ€ä¹ˆè¿è¡ŒCç¨‹åºï¼Ÿ" class="headerlink" title="æˆ‘ä»¬æ€ä¹ˆè¿è¡ŒCç¨‹åºï¼Ÿ"></a>æˆ‘ä»¬æ€ä¹ˆè¿è¡ŒCç¨‹åºï¼Ÿ</h2><ul><li><p>**ç¿»è¯‘å™¨(Translator)**ï¼šå°†ç¨‹åºä»æºè¯­è¨€è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€ä¸­çš„ç­‰æ•ˆç¨‹åº </p><ul><li>ç¿»è¯‘&#x2F;ç¼–è¯‘æˆä½çº§è¯­è¨€å‡ ä¹æ€»æ˜¯æ„å‘³ç€æ›´é«˜çš„æ•ˆç‡å’Œæ›´é«˜çš„æ€§èƒ½ã€‚</li></ul></li><li><p>ä¸**è§£é‡Šå™¨(Interpreter)**å¯¹æ¯”ï¼šç›´æ¥åœ¨æºè¯­è¨€ä¸­æ‰§è¡Œç¨‹åº </p><ul><li>â–«æ³¨æ„ï¼šC ç¨‹åº&#x2F;RISC-V ä¹Ÿå¯ä»¥è¢«è§£é‡Šæ‰§è¡Œï¼ â–« </li><li>ä¾‹å¦‚ï¼šVenus RISC-V æ¨¡æ‹Ÿå™¨ å¯¹äºå­¦ä¹ &#x2F;è°ƒè¯•éå¸¸æœ‰ç”¨</li></ul></li></ul><h2 id="ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ªCé¡¹ç›®çš„æ­¥éª¤"><a href="#ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ªCé¡¹ç›®çš„æ­¥éª¤" class="headerlink" title="ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ªCé¡¹ç›®çš„æ­¥éª¤"></a>ç¼–è¯‘å’Œè¿è¡Œä¸€ä¸ªCé¡¹ç›®çš„æ­¥éª¤</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606225653877.png" alt="image-20240606225653877"></p><h1 id="CALL-Compiler"><a href="#CALL-Compiler" class="headerlink" title="CALL: Compiler"></a>CALL: Compiler</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606225907637.png" alt="image-20240606225907637"></p><h1 id="CALL-Assembler"><a href="#CALL-Assembler" class="headerlink" title="CALL: Assembler"></a>CALL: Assembler</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606225925322.png" alt="image-20240606225925322"></p><blockquote><p>directives: æŒ‡ä»¤</p></blockquote><h2 id="æŒ‡ä»¤-directives"><a href="#æŒ‡ä»¤-directives" class="headerlink" title="æŒ‡ä»¤(directives)"></a>æŒ‡ä»¤(directives)</h2><ul><li><p><strong>æŒ‡ä»¤</strong> å‘æ±‡ç¼–å™¨æä¾›æŒ‡ç¤ºï¼š</p><ul><li><p>é€šå¸¸ç”±ç¼–è¯‘å™¨ç”Ÿæˆï¼ˆä¸Šä¸€ä¸ªé˜¶æ®µï¼‰</p></li><li><p>æŒ‡ä»¤ä¸ä¼šç”Ÿæˆæœºå™¨æŒ‡ä»¤ï¼ç›¸åï¼Œå®ƒä»¬æŒ‡ç¤ºå¦‚ä½•æ„å»ºç›®æ ‡æ–‡ä»¶çš„ä¸åŒéƒ¨åˆ†ã€‚</p></li></ul></li><li><p><strong>.text</strong><br>  éšåçš„é¡¹æ”¾å…¥ç”¨æˆ·æ–‡æœ¬æ®µï¼ˆæœºå™¨ä»£ç ï¼‰</p></li><li><p><strong>.data</strong><br>  éšåçš„é¡¹æ”¾å…¥ç”¨æˆ·æ•°æ®æ®µï¼ˆæºæ–‡ä»¶æ•°æ®çš„äºŒè¿›åˆ¶å½¢å¼ï¼‰</p></li><li><p><strong>.globl sym</strong><br>  å£°æ˜ç¬¦å·ä¸ºå…¨å±€ç¬¦å·ï¼Œå¯ä»¥ä»å…¶ä»–æ–‡ä»¶ä¸­å¼•ç”¨</p></li><li><p><strong>.string str</strong><br>  å°†å­—ç¬¦ä¸²å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä»¥ç©ºå­—ç¬¦ç»“å°¾</p></li><li><p><strong>.word w1 â€¦ wn</strong><br>  å­˜å‚¨ n ä¸ª 32 ä½æ•°é‡åœ¨è¿ç»­çš„å†…å­˜å­—ä¸­</p></li></ul><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606232836195.png" alt="image-20240606232836195"></p><h2 id="Object-File-Format"><a href="#Object-File-Format" class="headerlink" title="Object File Format"></a>Object File Format</h2><ul><li><code>Object File Heade</code>r : size and position of other pieces of the object file</li><li><code>Text Segment</code> : machine code</li><li><code>Data Segment</code> : binary representation of static data in the source file</li><li><code>Symbol Table</code>: LIst of fileâ€™s labels, static data that can be referenced by other programs</li><li><code>Relocation Information</code>: Lines of code to fix later(by Linker)</li><li><code>Debugging Information</code></li></ul><h2 id="ç”Ÿæˆæœºå™¨ç "><a href="#ç”Ÿæˆæœºå™¨ç " class="headerlink" title="ç”Ÿæˆæœºå™¨ç "></a>ç”Ÿæˆæœºå™¨ç </h2><h3 id="ç®€å•æƒ…å†µ"><a href="#ç®€å•æƒ…å†µ" class="headerlink" title="ç®€å•æƒ…å†µ"></a>ç®€å•æƒ…å†µ</h3><ul><li>ç®—æœ¯ã€é€»è¾‘ã€ç§»ä½ç­‰</li><li>æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯å·²ç»åŒ…å«åœ¨æŒ‡ä»¤ä¸­</li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li><pre><code class="assembly">add x18, x18, x10addi x19, x19, -1</code></pre></li></ul><h3 id="PCç›¸å¯¹åˆ†æ”¯å’Œè·³è½¬ï¼š"><a href="#PCç›¸å¯¹åˆ†æ”¯å’Œè·³è½¬ï¼š" class="headerlink" title="PCç›¸å¯¹åˆ†æ”¯å’Œè·³è½¬ï¼š"></a>PCç›¸å¯¹åˆ†æ”¯å’Œè·³è½¬ï¼š</h3><ul><li>ä¾‹å¦‚ï¼Œ&#96;&#96;beq<code>ï¼Œ</code>bne<code>ç­‰ï¼Œä»¥åŠ</code>jal&#96;</li><li>ä½ç½®æ— å…³ä»£ç ï¼ˆPICï¼‰ï¼š<ul><li>ä¸€æ—¦ä¼ªæŒ‡ä»¤è¢«å®é™…æŒ‡ä»¤æ›¿æ¢ï¼Œæ‰€æœ‰PCç›¸å¯¹å¯»å€éƒ½å¯ä»¥è®¡ç®—å‡ºæ¥</li></ul></li></ul><p>ä¾‹å¦‚ï¼š</p><ul><li><code>j Label</code></li><li><code>jal x0, Label</code></li><li>é€šè¿‡è®¡ç®—å½“å‰æŒ‡ä»¤å’Œç›®æ ‡æŒ‡ä»¤ä¹‹é—´çš„<strong>åŠå­—æŒ‡ä»¤</strong>æ•°é‡æ¥ç¡®å®šç¼–ç çš„åç§»é‡</li></ul><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607002511692.png" alt="image-20240607002511692"></p><h2 id="è®¡ç®—PCç›¸å¯¹åœ°å€ï¼ˆProgram-Counter-relative-addresses-ï¼šä¸¤æ¬¡å¾ªç¯"><a href="#è®¡ç®—PCç›¸å¯¹åœ°å€ï¼ˆProgram-Counter-relative-addresses-ï¼šä¸¤æ¬¡å¾ªç¯" class="headerlink" title="è®¡ç®—PCç›¸å¯¹åœ°å€ï¼ˆProgram Counter-relative addresses)ï¼šä¸¤æ¬¡å¾ªç¯"></a>è®¡ç®—PCç›¸å¯¹åœ°å€ï¼ˆProgram Counter-relative addresses)ï¼šä¸¤æ¬¡å¾ªç¯</h2><h3 id="1-å‰å‘å¼•ç”¨ï¼ˆForward-Referenceï¼‰é—®é¢˜"><a href="#1-å‰å‘å¼•ç”¨ï¼ˆForward-Referenceï¼‰é—®é¢˜" class="headerlink" title="1. å‰å‘å¼•ç”¨ï¼ˆForward Referenceï¼‰é—®é¢˜"></a>1. å‰å‘å¼•ç”¨ï¼ˆForward Referenceï¼‰é—®é¢˜</h3><p>åœ¨ç¨‹åºä¸­ï¼Œåˆ†æ”¯æŒ‡ä»¤å’ŒPCç›¸å¯¹è·³è½¬æŒ‡ä»¤å¯èƒ½å¼•ç”¨åœ¨ç¨‹åºä¸­åé¢ï¼ˆâ€œå‰å‘â€ï¼‰çš„æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œè·³è½¬æŒ‡ä»¤<code>j Loop</code>åœ¨ç¨‹åºä¸­ä¼šè·³åˆ°<code>Loop</code>æ ‡ç­¾å¤„ã€‚ä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡æ‰«ææ—¶ï¼Œ<code>Loop</code>æ ‡ç­¾çš„ä½ç½®è¿˜ä¸ç¡®å®šï¼Œå› æ­¤æ— æ³•å‡†ç¡®è®¡ç®—è·³è½¬æ‰€éœ€çš„åç§»é‡ã€‚</p><h3 id="2-åç§»é‡çš„ç²¾ç¡®è®¡ç®—"><a href="#2-åç§»é‡çš„ç²¾ç¡®è®¡ç®—" class="headerlink" title="2. åç§»é‡çš„ç²¾ç¡®è®¡ç®—"></a>2. åç§»é‡çš„ç²¾ç¡®è®¡ç®—</h3><p>å› ä¸ºåœ¨ç¬¬ä¸€æ¬¡æ‰«ææ—¶ï¼Œç¨‹åºä¸­çš„æŸäº›æ ‡ç­¾çš„ä½ç½®è¿˜ä¸çŸ¥é“ï¼Œæ‰€ä»¥æ— æ³•è®¡ç®—å‡ºç²¾ç¡®çš„æ­£åç§»é‡ã€‚åœ¨ç¬¬äºŒæ¬¡æ‰«ææ—¶ï¼Œæ‰€æœ‰æ ‡ç­¾çš„ä½ç½®éƒ½å·²çŸ¥ï¼Œå¯ä»¥æ ¹æ®è¿™äº›å·²çŸ¥ä½ç½®è®¡ç®—å‡ºç²¾ç¡®çš„åç§»é‡ã€‚</p><h3 id="å…·ä½“çš„ä¸¤æ¬¡æ‰«æè¿‡ç¨‹"><a href="#å…·ä½“çš„ä¸¤æ¬¡æ‰«æè¿‡ç¨‹" class="headerlink" title="å…·ä½“çš„ä¸¤æ¬¡æ‰«æè¿‡ç¨‹"></a>å…·ä½“çš„ä¸¤æ¬¡æ‰«æè¿‡ç¨‹</h3><ol><li><strong>ç¬¬ä¸€æ¬¡æ‰«æ</strong>ï¼šè®°å½•æ ‡ç­¾çš„ä½ç½®ï¼ˆå­˜å‚¨åœ¨ç¬¦å·è¡¨ä¸­ï¼‰ã€‚<ul><li>åœ¨ç¬¬ä¸€æ¬¡æ‰«æè¿‡ç¨‹ä¸­ï¼Œç¨‹åºéå†æ‰€æœ‰æŒ‡ä»¤ï¼Œå¹¶è®°å½•æ¯ä¸ªæ ‡ç­¾çš„ä½ç½®ï¼ˆå³åœ°å€ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹æ— éœ€è®¡ç®—å…·ä½“çš„åç§»é‡ï¼Œåªéœ€ç¡®ä¿æ‰€æœ‰æ ‡ç­¾çš„ä½ç½®éƒ½è®°å½•ä¸‹æ¥ã€‚</li></ul></li><li><strong>ç¬¬äºŒæ¬¡æ‰«æ</strong>ï¼šä½¿ç”¨æ ‡ç­¾ä½ç½®ç”Ÿæˆæœºå™¨ä»£ç ã€‚<ul><li>åœ¨ç¬¬äºŒæ¬¡æ‰«æè¿‡ç¨‹ä¸­ï¼Œç¨‹åºä½¿ç”¨ç¬¬ä¸€æ¬¡æ‰«æä¸­è®°å½•çš„æ ‡ç­¾ä½ç½®æ¥è®¡ç®—æ¯ä¸ªåˆ†æ”¯æŒ‡ä»¤å’Œè·³è½¬æŒ‡ä»¤æ‰€éœ€çš„ç²¾ç¡®åç§»é‡ã€‚ç„¶åï¼Œç”Ÿæˆæœ€ç»ˆçš„æœºå™¨ä»£ç ã€‚</li></ul></li></ol><p>é€šè¿‡è¿™æ ·çš„ä¸¤æ¬¡æ‰«æï¼Œå¯ä»¥è§£å†³å‰å‘å¼•ç”¨é—®é¢˜ï¼Œå¹¶ç¡®ä¿æ‰€æœ‰åç§»é‡éƒ½å‡†ç¡®æ— è¯¯ã€‚æ­£å¦‚å›¾ä¸­æ‰€ç¤ºï¼š</p><ul><li>è·³è½¬åˆ°<code>Loop</code>æ ‡ç­¾éœ€è¦å¾€å‰è·³3ä¸ªå­—ï¼ˆoffset -6ï¼‰ã€‚</li><li>è·³è½¬åˆ°<code>Exit</code>æ ‡ç­¾éœ€è¦å¾€åè·³3ä¸ªå­—ï¼ˆoffset +6ï¼‰ã€‚</li></ul><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªå¾ªç¯æ‰èƒ½æ­£ç¡®ç¿»è¯‘è®¡ç®—æœºç¨‹åºä¸­çš„PCç›¸å¯¹åœ°å€ã€‚</p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607175354375.png" alt="image-20240607175354375"></p><h2 id="é‚£å…¶ä»–å¼•ç”¨å‘¢ï¼Ÿ"><a href="#é‚£å…¶ä»–å¼•ç”¨å‘¢ï¼Ÿ" class="headerlink" title="é‚£å…¶ä»–å¼•ç”¨å‘¢ï¼Ÿ"></a>é‚£å…¶ä»–å¼•ç”¨å‘¢ï¼Ÿ</h2><ul><li><strong>å¼•ç”¨å…¶ä»–æ–‡ä»¶ï¼Ÿ</strong><ul><li>ä¾‹å¦‚ï¼Œä» C å­—ç¬¦ä¸²åº“è°ƒç”¨ <code>strlen</code></li></ul></li><li><strong>å¼•ç”¨é™æ€æ•°æ®ï¼Ÿ</strong><ul><li>ä¾‹å¦‚ï¼Œ<code>la</code> è¢«åˆ†è§£ä¸º <code>lui</code> å’Œ <code>addi</code></li><li>è¿™äº›éœ€è¦çŸ¥é“æ•°æ®çš„å®Œæ•´32ä½åœ°å€</li></ul></li><li><strong>è¿™äº›è¿˜æ— æ³•ç¡®å®šï¼Œå› æ­¤æ±‡ç¼–å™¨ä¼šå°†å®ƒä»¬è®°å½•åœ¨ä¸¤ä¸ªè¡¨ä¸­ï¼šé‡å®šä½ä¿¡æ¯è¡¨å’Œç¬¦å·è¡¨ã€‚</strong></li></ul><h2 id="Symbol-Table"><a href="#Symbol-Table" class="headerlink" title="Symbol Table"></a>Symbol Table</h2><ul><li><strong>List of â€œitemsâ€ in this file</strong><ul><li>fileâ€™s labels, static data</li></ul></li><li><strong>æŒ‡ä»¤åŒº-Instruction Labels</strong><ul><li>ç”¨æ¥è®¡ç®—<code>branches, function calling, etc</code>PCç›¸å¯¹åœ°å€çš„æœºå™¨ç </li><li><code>.global</code>å‘½ä»¤ï¼šå¯ä»¥è¢«å…¶ä»–æ–‡ä»¶å¼•ç”¨çš„æ ‡ç­¾</li></ul></li><li><strong><code>Data</code>: åœ¨<code>.data</code>ç‰‡æ®µä¸­çš„æ‰€æœ‰</strong><ul><li>å…¨å±€å˜é‡å¯èƒ½è¢«å…¶ä»–æ–‡ä»¶è®¿é—®&#x2F;ä½¿ç”¨</li></ul></li></ul><h2 id="é‡å®šå‘ä¿¡æ¯-Relocation-Information"><a href="#é‡å®šå‘ä¿¡æ¯-Relocation-Information" class="headerlink" title="é‡å®šå‘ä¿¡æ¯(Relocation Information)"></a>é‡å®šå‘ä¿¡æ¯(Relocation Information)</h2><ul><li><strong>List of â€œitemsâ€ whose address this file needs</strong></li><li><strong>Any external label jumped to</strong><ul><li>External lable(including lib files): <code>jal ext_label</code></li></ul></li><li><strong>Any piece of data in static section</strong><ul><li>e.g., <code>la</code> instruction)for <code>lw/sw</code> base register)</li></ul></li></ul><h1 id="CALL-Linker"><a href="#CALL-Linker" class="headerlink" title="CALL: Linker"></a>CALL: Linker</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606234631886.png" alt="image-20240606234631886"></p><h2 id="é“¾æ¥å™¨å°†å¤šä¸ªå¯¹è±¡æ¨¡å—ä¿®è¡¥åœ¨ä¸€èµ·"><a href="#é“¾æ¥å™¨å°†å¤šä¸ªå¯¹è±¡æ¨¡å—ä¿®è¡¥åœ¨ä¸€èµ·" class="headerlink" title="é“¾æ¥å™¨å°†å¤šä¸ªå¯¹è±¡æ¨¡å—ä¿®è¡¥åœ¨ä¸€èµ·"></a>é“¾æ¥å™¨å°†å¤šä¸ªå¯¹è±¡æ¨¡å—ä¿®è¡¥åœ¨ä¸€èµ·</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607181938505.png" alt="image-20240607181938505"></p><h2 id="å“ªä¸€äº›åœ°å€éœ€è¦é‡å®šå‘ï¼Ÿ"><a href="#å“ªä¸€äº›åœ°å€éœ€è¦é‡å®šå‘ï¼Ÿ" class="headerlink" title="å“ªä¸€äº›åœ°å€éœ€è¦é‡å®šå‘ï¼Ÿ"></a>å“ªä¸€äº›åœ°å€éœ€è¦é‡å®šå‘ï¼Ÿ</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183427874.png" alt="image-20240607183427874"></p><h2 id="å“ªä¸€äº›æŒ‡ä»¤éœ€è¦é‡å®šå‘ç¼–è¾‘ï¼Ÿ"><a href="#å“ªä¸€äº›æŒ‡ä»¤éœ€è¦é‡å®šå‘ç¼–è¾‘ï¼Ÿ" class="headerlink" title="å“ªä¸€äº›æŒ‡ä»¤éœ€è¦é‡å®šå‘ç¼–è¾‘ï¼Ÿ"></a>å“ªä¸€äº›æŒ‡ä»¤éœ€è¦é‡å®šå‘ç¼–è¾‘ï¼Ÿ</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183443724.png" alt="image-20240607183443724"></p><h2 id="è§£æå¼•ç”¨"><a href="#è§£æå¼•ç”¨" class="headerlink" title="è§£æå¼•ç”¨"></a>è§£æå¼•ç”¨</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183653126.png" alt="image-20240607183653126"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183701004.png" alt="image-20240607183701004"></p><h2 id="Static-vs-Dynamic-Linking"><a href="#Static-vs-Dynamic-Linking" class="headerlink" title="Static vs. Dynamic Linking"></a>Static vs. Dynamic Linking</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183723584.png" alt="image-20240607183723584"></p><h2 id="Dynamically-Linked-Libraries-DLLs"><a href="#Dynamically-Linked-Libraries-DLLs" class="headerlink" title="Dynamically-Linked Libraries(DLLs)"></a>Dynamically-Linked Libraries(DLLs)</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607183746577.png" alt="image-20240607183746577"></p><h1 id="CALL-Loader"><a href="#CALL-Loader" class="headerlink" title="CALL: Loader"></a>CALL: Loader</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606234925439.png" alt="image-20240606234925439"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607193732007.png" alt="image-20240607193732007"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240607193750317.png" alt="image-20240607193750317"></p><h1 id="ä¾‹å­ï¼šHello-World"><a href="#ä¾‹å­ï¼šHello-World" class="headerlink" title="ä¾‹å­ï¼šHello, World!"></a>ä¾‹å­ï¼šHello, World!</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235020474.png" alt="image-20240606235020474"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235028361.png" alt="image-20240606235028361"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235037716.png" alt="image-20240606235037716"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235048081.png" alt="image-20240606235048081"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235059216.png" alt="image-20240606235059216"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235129941.png" alt="image-20240606235129941"></p><ul><li><p><strong>ç¼–è¯‘å™¨</strong> å°†å•ä¸ªé«˜çº§è¯­è¨€æ–‡ä»¶è½¬æ¢ä¸ºå•ä¸ªæ±‡ç¼–è¯­è¨€æ–‡ä»¶ã€‚</p></li><li><p><strong>æ±‡ç¼–å™¨</strong> åˆ é™¤ä¼ªæŒ‡ä»¤ï¼Œå°†å…¶èƒ½è½¬æ¢çš„å†…å®¹è½¬æ¢ä¸ºæœºå™¨è¯­è¨€ï¼Œå¹¶ä¸ºé“¾æ¥å™¨åˆ›å»ºæ£€æŸ¥è¡¨ï¼ˆé‡å®šä½è¡¨ï¼‰ã€‚</p><ul><li>è¿›è¡Œä¸¤æ¬¡éå†ä»¥è§£æåœ°å€ï¼Œå¤„ç†å†…éƒ¨å‰å‘å¼•ç”¨ã€‚</li></ul></li><li><p><strong>é“¾æ¥å™¨</strong> ç»„åˆå¤šä¸ª .o æ–‡ä»¶å¹¶è§£æç»å¯¹åœ°å€ã€‚</p><ul><li>å…è®¸å•ç‹¬ç¼–è¯‘ï¼Œä¸éœ€è¦ç¼–è¯‘åº“ï¼Œå¹¶è§£æå‰©ä½™çš„åœ°å€ã€‚</li></ul></li><li><p><strong>åŠ è½½å™¨</strong> å°†å¯æ‰§è¡Œæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­å¹¶å¼€å§‹æ‰§è¡Œã€‚</p></li></ul><h1 id="ç¿»è¯‘-Translation-å’Œè§£é‡Š-Interpretation-çš„æ¯”è¾ƒ"><a href="#ç¿»è¯‘-Translation-å’Œè§£é‡Š-Interpretation-çš„æ¯”è¾ƒ" class="headerlink" title="ç¿»è¯‘(Translation)å’Œè§£é‡Š(Interpretation)çš„æ¯”è¾ƒ"></a>ç¿»è¯‘(Translation)å’Œè§£é‡Š(Interpretation)çš„æ¯”è¾ƒ</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235317698.png" alt="image-20240606235317698"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235335502.png" alt="image-20240606235335502"></p><h2 id="Interpretation"><a href="#Interpretation" class="headerlink" title="Interpretation"></a>Interpretation</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235355009.png" alt="image-20240606235355009"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235404823.png" alt="image-20240606235404823"></p><h2 id="Interpretation-vs-Translation"><a href="#Interpretation-vs-Translation" class="headerlink" title="Interpretation vs. Translation?"></a>Interpretation vs. Translation?</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235433798.png" alt="image-20240606235433798"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-CALL/image-20240606235439346.png" alt="image-20240606235439346"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(å››)-RISCV-Formats</title>
      <link href="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/"/>
      <url>/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602160356045.png" alt="image-20240602160356045"></p><p>ç°åœ¨æˆ‘ä»¬æ¥åˆ°äº†ç¬¬ä¸‰å±‚â€”â€”Machine Language Program</p><p>æ¥ä¸‹æ¥å°†ä»‹ç»æ±‡ç¼–è¯­è¨€æ˜¯æ€ä¹ˆè½¬åŒ–æˆæœºå™¨ç çš„</p><h1 id="Consequence-1-Everything-Has-a-Memory-Address"><a href="#Consequence-1-Everything-Has-a-Memory-Address" class="headerlink" title="Consequence #1: Everything Has a Memory Address"></a>Consequence #1: Everything Has a Memory Address</h1><ul><li>ç”±äºæ‰€æœ‰çš„æŒ‡ä»¤å’Œæ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥ä¸€åˆ‡éƒ½æœ‰ä¸€ä¸ªå†…å­˜åœ°å€ï¼šæŒ‡ä»¤ã€æ•°æ®å­—<ul><li>è¿™æ„å‘³ç€åˆ†æ”¯å’Œè·³è½¬éƒ½ä½¿ç”¨è¿™äº›åœ°å€</li></ul></li><li>C æŒ‡é’ˆåªæ˜¯å†…å­˜åœ°å€ï¼šå®ƒä»¬å¯ä»¥æŒ‡å‘å†…å­˜ä¸­çš„ä»»ä½•ä¸œè¥¿<ul><li>ä¸å—çº¦æŸçš„åœ°å€ä½¿ç”¨å¯èƒ½å¯¼è‡´ä¸¥é‡çš„é”™è¯¯ï¼›åœ¨ C è¯­è¨€ä¸­é¿å…é”™è¯¯æ˜¯ä½ çš„è´£ä»»ï¼›è€Œåœ¨ Java è¯­è¨€è®¾è®¡ä¸­ï¼Œè¿™ç§ä½¿ç”¨å—é™</li></ul></li><li>ä¸€ä¸ªå¯„å­˜å™¨ä¿å­˜ç€å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ï¼šâ€œç¨‹åºè®¡æ•°å™¨â€ï¼ˆProgram Counterï¼Œç®€ç§° PCï¼‰<ul><li>åŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡å‘å†…å­˜çš„æŒ‡é’ˆ</li><li>è‹±ç‰¹å°”ç§°ä¹‹ä¸ºæŒ‡ä»¤æŒ‡é’ˆï¼ˆInstruction Pointerï¼Œç®€ç§° IPï¼‰</li></ul></li></ul><h1 id="Consequence-2-äºŒè¿›åˆ¶çš„å…¼å®¹"><a href="#Consequence-2-äºŒè¿›åˆ¶çš„å…¼å®¹" class="headerlink" title="Consequence #2: äºŒè¿›åˆ¶çš„å…¼å®¹"></a>Consequence #2: äºŒè¿›åˆ¶çš„å…¼å®¹</h1><ul><li>ç¨‹åºä»¥äºŒè¿›åˆ¶å½¢å¼åˆ†å‘<ul><li>ç¨‹åºç»‘å®šåˆ°ç‰¹å®šçš„æŒ‡ä»¤é›†</li><li>æ‰‹æœºå’Œä¸ªäººç”µè„‘çš„ç‰ˆæœ¬ä¸åŒ</li></ul></li><li>æ–°æœºå™¨å¸Œæœ›è¿è¡Œæ—§ç¨‹åºï¼ˆâ€œäºŒè¿›åˆ¶â€æ–‡ä»¶ï¼‰ä»¥åŠç¼–è¯‘åˆ°æ–°æŒ‡ä»¤çš„ç¨‹åº</li><li>è¿™å¯¼è‡´äº†â€œå‘åå…¼å®¹â€çš„æŒ‡ä»¤é›†éšç€æ—¶é—´çš„æ¨ç§»è€Œæ¼”å˜</li><li>é€‰æ‹©è‹±ç‰¹å°”8088å¤„ç†å™¨ä½œä¸º1981å¹´é¦–æ¬¾IBM PCçš„å¤„ç†å™¨æ˜¯å½“ä»Šæœ€æ–°PCä»ä½¿ç”¨80x86æŒ‡ä»¤é›†çš„ä¸»è¦åŸå› ï¼›1981å¹´çš„PCç¨‹åºä»Šå¤©ä»ç„¶å¯ä»¥è¿è¡Œ</li></ul><h1 id="æŒ‡ä»¤ä½œä¸ºæ•°å­—"><a href="#æŒ‡ä»¤ä½œä¸ºæ•°å­—" class="headerlink" title="æŒ‡ä»¤ä½œä¸ºæ•°å­—"></a>æŒ‡ä»¤ä½œä¸ºæ•°å­—</h1><p>å¤§å¤šæ•°æˆ‘ä»¬å¤„ç†çš„æ•°æ®éƒ½æ˜¯ä»¥å­—ï¼ˆ32ä½å—ï¼‰ä¸ºå•ä½ï¼š</p><ul><li><p>æ¯ä¸ªå¯„å­˜å™¨æ˜¯ä¸€ä¸ªå­—</p></li><li><p><code>lw</code>å’Œ<code>sw</code>æ¯æ¬¡éƒ½è®¿é—®ä¸€ä¸ªå­—çš„å†…å­˜</p></li><li><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºæŒ‡ä»¤å‘¢ï¼Ÿ</p><ul><li>è®°ä½ï¼šè®¡ç®—æœºåªèƒ½ç†è§£1å’Œ0ï¼Œæ‰€ä»¥æ±‡ç¼–å™¨å­—ç¬¦ä¸²â€œadd x10,x11,x0â€å¯¹ç¡¬ä»¶æ¥è¯´æ˜¯æ— æ„ä¹‰çš„</li><li>RISC-Vè¿½æ±‚ç®€æ´ï¼šæ—¢ç„¶æ•°æ®æ˜¯ä»¥å­—ä¸ºå•ä½ï¼Œé‚£ä¹ˆæŒ‡ä»¤ä¹Ÿå›ºå®šä¸º32ä½çš„å­—</li><li>åŒæ ·çš„32ä½æŒ‡ä»¤ç”¨äºRV32ã€RV64ã€RV128</li></ul></li><li><p>ä¸€å­—ä¸º32ä½ï¼Œå› æ­¤å°†æŒ‡ä»¤å­—åˆ†ä¸ºâ€œå­—æ®µâ€</p></li><li><p>æ¯ä¸ªå­—æ®µå‘å¤„ç†å™¨ä¼ è¾¾ä¸€äº›å…³äºæŒ‡ä»¤çš„ä¿¡æ¯</p></li><li><p>æˆ‘ä»¬å¯ä»¥ä¸ºæ¯æ¡æŒ‡ä»¤å®šä¹‰ä¸åŒçš„å­—æ®µï¼Œä½†RISC-Vè¿½æ±‚ç®€æ´ï¼Œæ‰€ä»¥å®šä¹‰äº†å…­ç§åŸºæœ¬ç±»å‹çš„æŒ‡ä»¤æ ¼å¼ï¼š</p><ul><li>Ræ ¼å¼ç”¨äºå¯„å­˜å™¨-å¯„å­˜å™¨ç®—æœ¯è¿ç®—</li><li>Iæ ¼å¼ç”¨äºå¯„å­˜å™¨-ç«‹å³æ•°ç®—æœ¯è¿ç®—å’ŒåŠ è½½</li><li>Sæ ¼å¼ç”¨äºå­˜å‚¨</li><li>Bæ ¼å¼ç”¨äºåˆ†æ”¯ï¼ˆSæ ¼å¼çš„ä¸€ä¸ªå°å˜ç§ï¼‰</li><li>Uæ ¼å¼ç”¨äº20ä½ä¸Šä½ç«‹å³æ•°æŒ‡ä»¤</li><li>Jæ ¼å¼ç”¨äºè·³è½¬ï¼ˆUæ ¼å¼çš„ä¸€ä¸ªå°å˜ç§ï¼‰</li></ul><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602162715185.png" alt="image-20240602162715185"></p></li></ul><h1 id="R-Formatå¸ƒå±€"><a href="#R-Formatå¸ƒå±€" class="headerlink" title="R-Formatå¸ƒå±€"></a>R-Formatå¸ƒå±€</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602163250876.png" alt="image-20240602163250876"></p><ul><li><p>32-bit instruction word divided into six fields of  varying numbers of bits each: 7+5+5+3+5+7 &#x3D; 32</p></li><li><p>opcode: éƒ¨åˆ†æŒ‡å®šäº†æ˜¯ä»€ä¹ˆæŒ‡ä»¤</p><ul><li>æ³¨æ„ï¼šå¯¹äºæ‰€æœ‰Rå‹æ ¼å¼çš„å¯„å­˜å™¨-å¯„å­˜å™¨ç®—æœ¯æŒ‡ä»¤ï¼Œè¯¥å­—æ®µç­‰äº<code>0110011</code>ã€‚</li></ul></li><li><p><code>funct7</code>å’Œ<code>funct3</code>ï¼šç»“åˆopcodeï¼Œè¿™ä¸¤ä¸ªå­—æ®µæè¿°äº†è¦æ‰§è¡Œçš„æ“ä½œã€‚</p></li><li><p><code>rs1</code>ï¼ˆ<strong>S</strong>ource <strong>R</strong>egister #1ï¼‰ï¼šæŒ‡å®šåŒ…å«ç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å¯„å­˜å™¨ã€‚</p></li><li><p><code>rs2</code>ï¼šæŒ‡å®šç¬¬äºŒä¸ªæ“ä½œæ•°çš„å¯„å­˜å™¨ã€‚</p></li><li><p><code>rd</code>ï¼ˆ<strong>D</strong>estination Registerï¼‰ï¼šæŒ‡å®šå°†æ¥æ”¶è®¡ç®—ç»“æœçš„å¯„å­˜å™¨ã€‚</p></li><li><p>æ¯ä¸ªå¯„å­˜å™¨å­—æ®µåŒ…å«ä¸€ä¸ª5ä½æ— ç¬¦å·æ•´æ•°ï¼ˆ0-31ï¼‰ï¼Œå¯¹åº”ä¸€ä¸ªå¯„å­˜å™¨ç¼–å·ï¼ˆx0-x31ï¼‰ã€‚</p></li></ul><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602162249134.png" alt="image-20240602162249134"></p><h2 id="æ‰€æœ‰-RV32-R-format-æŒ‡ä»¤"><a href="#æ‰€æœ‰-RV32-R-format-æŒ‡ä»¤" class="headerlink" title="æ‰€æœ‰ RV32 R-format æŒ‡ä»¤"></a>æ‰€æœ‰ RV32 R-format æŒ‡ä»¤</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602162801591.png" alt="image-20240602162801591"></p><blockquote><ul><li><p>å›¾ç‰‡ä¸­çš„â€œ2â€™s comp of rs2â€æ„æ€æ˜¯â€œrs2çš„äºŒè¿›åˆ¶è¡¥ç â€</p></li><li><p>åœ¨è¡¨æ ¼ä¸­ï¼Œâ€œ2â€™s comp of rs2â€æ ‡æ³¨åœ¨funct7å­—æ®µä¸­çš„<code>0100000</code>è¿™ä¸€è¡Œï¼Œè¡¨ç¤ºï¼š</p><ul><li><p>å¯¹åº”æŒ‡ä»¤æ˜¯<code>sub</code>ï¼ˆå‡æ³•ï¼‰ã€‚</p></li><li><p>è¿™ä¸ªfunct7å­—æ®µçš„å…·ä½“å«ä¹‰æ˜¯å‘Šè¯‰å¤„ç†å™¨ï¼Œè¿™æ¡æŒ‡ä»¤è¦å¯¹å¯„å­˜å™¨<code>rs2</code>ä¸­çš„å€¼å–äºŒè¿›åˆ¶è¡¥ç ï¼Œç„¶åä¸<code>rs1</code>ä¸­çš„å€¼ç›¸åŠ ï¼Œä»è€Œå®ç°å‡æ³•æ“ä½œã€‚</p></li></ul></li><li><p>å…·ä½“è§£é‡Š</p><ul><li><p><code>add</code>æŒ‡ä»¤çš„funct7å­—æ®µæ˜¯<code>0000000</code>ï¼Œè¡¨ç¤ºæ­£å¸¸åŠ æ³•æ“ä½œï¼š<code>rd = rs1 + rs2</code>ã€‚</p></li><li><p><code>sub</code>æŒ‡ä»¤çš„funct7å­—æ®µæ˜¯<code>0100000</code>ï¼Œè¡¨ç¤ºå‡æ³•æ“ä½œï¼š<code>rd = rs1 - rs2</code>ã€‚åœ¨è®¡ç®—æœºå†…éƒ¨ï¼Œå‡æ³•æ“ä½œå¯ä»¥é€šè¿‡åŠ ä¸Šä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¥ç æ¥å®ç°ã€‚å› æ­¤ï¼Œè¿™é‡Œâ€œ2â€™s comp of rs2â€è¡¨ç¤ºå¯¹<code>rs2</code>å–äºŒè¿›åˆ¶è¡¥ç ç„¶åå†ç›¸åŠ ã€‚</p></li></ul></li><li><p>å¯¹äº<code>sra</code>å’Œ<code>srl</code>æ¥è¯´ï¼Œfunct7å­—æ®µä¸­çš„ç¬¬ä¸€ä¸ª<code>1</code>ï¼ˆå³<code>0100000</code>ä¸­çš„ç¬¬2ä½ï¼‰åœ¨è¿™é‡Œä½œä¸ºä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œç”¨äºåŒºåˆ†è¿™ä¸¤ç§ä¸åŒçš„å³ç§»æ“ä½œã€‚</p></li></ul></blockquote><h1 id="I-Format-å¸ƒå±€"><a href="#I-Format-å¸ƒå±€" class="headerlink" title="I-Format å¸ƒå±€"></a>I-Format å¸ƒå±€</h1><h2 id="Register-Immediate-Arithmetic-Instructions"><a href="#Register-Immediate-Arithmetic-Instructions" class="headerlink" title="Register-Immediate Arithmetic Instructions"></a>Register-Immediate Arithmetic Instructions</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602163224051.png" alt="image-20240602163224051"></p><h3 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602163318632.png" alt="image-20240602163318632"></p><h3 id="æ‰€æœ‰RV32-I-Format-ç®—æœ¯æŒ‡ä»¤"><a href="#æ‰€æœ‰RV32-I-Format-ç®—æœ¯æŒ‡ä»¤" class="headerlink" title="æ‰€æœ‰RV32 I-Format ç®—æœ¯æŒ‡ä»¤"></a>æ‰€æœ‰RV32 I-Format ç®—æœ¯æŒ‡ä»¤</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602163423611.png" alt="image-20240602163423611"></p><h2 id="Load-æŒ‡ä»¤"><a href="#Load-æŒ‡ä»¤" class="headerlink" title="Load æŒ‡ä»¤"></a>Load æŒ‡ä»¤</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602163947603.png" alt="image-20240602163947603"></p><h3 id="ä¾‹å­-2"><a href="#ä¾‹å­-2" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164004444.png" alt="image-20240602164004444"></p><h3 id="æ‰€æœ‰Load-Instructions"><a href="#æ‰€æœ‰Load-Instructions" class="headerlink" title="æ‰€æœ‰Load Instructions"></a>æ‰€æœ‰Load Instructions</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164056614.png" alt="image-20240602164056614"></p><h1 id="S-Format-å¸ƒå±€"><a href="#S-Format-å¸ƒå±€" class="headerlink" title="S-Format å¸ƒå±€"></a>S-Format å¸ƒå±€</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164209926.png" alt="image-20240602164209926"></p><h2 id="ä¸ºä»€ä¹ˆè¦åˆ†ç¦»immediateå­—æ®µ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†ç¦»immediateå­—æ®µ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†ç¦»immediateå­—æ®µ"></a>ä¸ºä»€ä¹ˆè¦åˆ†ç¦»<code>immediate</code>å­—æ®µ</h2><ul><li>storeæ“ä½œåæ²¡æœ‰å¯„å­˜å™¨å¯ä»¥å­˜å…¥<ul><li>å…¶ä¸¤ä¸ªæºå¯„å­˜å™¨<ul><li>ä¸€ä¸ªæ˜¯å­˜æ•°æ®çš„</li><li>ä¸€ä¸ªæ˜¯å­˜åœ°å€çš„ï¼ŒåŠ ä¸Šåç§»é‡åæŠŠæ•°æ®ç§»åŠ¨è¿›å»</li></ul></li></ul></li></ul><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164718733.png" alt="image-20240602164718733"></p><p>åŒæ—¶ï¼Œä¹Ÿæ˜¯å› ä¸ºä¸ºäº†å’Œå…¶ä»–æŒ‡ä»¤æœ‰ç›¸åŒçš„å¯„å­˜å™¨å­—æ®µä½ç½®ï¼Œæ–¹ä¾¿ç¡¬ä»¶æ“ä½œ</p><h2 id="ä¾‹å­-3"><a href="#ä¾‹å­-3" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164818342.png" alt="image-20240602164818342"></p><h2 id="æ‰€æœ‰StoreæŒ‡ä»¤"><a href="#æ‰€æœ‰StoreæŒ‡ä»¤" class="headerlink" title="æ‰€æœ‰StoreæŒ‡ä»¤"></a>æ‰€æœ‰StoreæŒ‡ä»¤</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164835016.png" alt="image-20240602164835016"></p><h1 id="å‰ä¸‰æ€»ç»“"><a href="#å‰ä¸‰æ€»ç»“" class="headerlink" title="å‰ä¸‰æ€»ç»“"></a>å‰ä¸‰æ€»ç»“</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602164912608.png" alt="image-20240602164912608"></p><h1 id="Program-Counter-PC-çš„æ›´æ–°"><a href="#Program-Counter-PC-çš„æ›´æ–°" class="headerlink" title="Program Counter(PC) çš„æ›´æ–°"></a>Program Counter(PC) çš„æ›´æ–°</h1><h2 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602165451798.png" alt="image-20240602165451798"></p><h2 id="å¯¹å¤šæ•°æŒ‡ä»¤æ¥è¯´ï¼ŒPC-PC-4"><a href="#å¯¹å¤šæ•°æŒ‡ä»¤æ¥è¯´ï¼ŒPC-PC-4" class="headerlink" title="å¯¹å¤šæ•°æŒ‡ä»¤æ¥è¯´ï¼ŒPC &#x3D; PC + 4"></a>å¯¹å¤šæ•°æŒ‡ä»¤æ¥è¯´ï¼ŒPC &#x3D; PC + 4</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602165531632.png" alt="image-20240602165531632"></p><h2 id="Branchæ›´æ–°PCåˆ°Jump"><a href="#Branchæ›´æ–°PCåˆ°Jump" class="headerlink" title="Branchæ›´æ–°PCåˆ°Jump"></a>Branchæ›´æ–°PCåˆ°<code>Jump</code></h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602165646693.png" alt="image-20240602165646693"></p><h2 id="PCç›¸å¯¹å¯»å€æ³•"><a href="#PCç›¸å¯¹å¯»å€æ³•" class="headerlink" title="PCç›¸å¯¹å¯»å€æ³•"></a>PCç›¸å¯¹å¯»å€æ³•</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602165720574.png" alt="image-20240602165720574"></p><h1 id="B-Formatå¸ƒå±€"><a href="#B-Formatå¸ƒå±€" class="headerlink" title="B-Formatå¸ƒå±€"></a>B-Formatå¸ƒå±€</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602165909533.png" alt="image-20240602165909533"></p><h2 id="åç§»çš„ç¼©æ”¾"><a href="#åç§»çš„ç¼©æ”¾" class="headerlink" title="åç§»çš„ç¼©æ”¾"></a>åç§»çš„ç¼©æ”¾</h2><p>å¯¹äºæ¡ä»¶åˆ†æ”¯çš„ 12-bit çš„ <code>immediate</code>å­—æ®µæ¥è¯´ï¼š</p><p>å•ä½æ˜¯ <strong>2 bytes</strong>(16-bit â€œ<strong>half-words</strong>â€œ)</p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602170200033.png" alt="image-20240602170200033"></p><h2 id="å¸ƒå±€"><a href="#å¸ƒå±€" class="headerlink" title="å¸ƒå±€"></a>å¸ƒå±€</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602170301535.png" alt="image-20240602170301535"></p><h3 id="ä¸ºä»€ä¹ˆè¦æŠŠ11ç§»åˆ°æœ€ä½ä½ï¼Ÿï¼Ÿï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦æŠŠ11ç§»åˆ°æœ€ä½ä½ï¼Ÿï¼Ÿï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦æŠŠ11ç§»åˆ°æœ€ä½ä½ï¼Ÿï¼Ÿï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦æŠŠ11ç§»åˆ°æœ€ä½ä½ï¼Ÿï¼Ÿï¼Ÿ</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602170501835.png" alt="image-20240602170501835"></p><ul><li>å¯¹äºæœ€é«˜çš„7ä½<ul><li>æœ€é«˜ä½ä¸ºç¬¦å·ä½</li><li>B-typeè¿™æ ·å­åšå¯ä»¥å’ŒI-typeå’ŒS-typeä¿æŒå¯¹é½</li></ul></li><li>å¯¹äºæœ€ä½çš„é‚£å‡ ä½<ul><li>å› ä¸ºå¯¹äºB-typeæˆ‘ä»¬æ€»æ˜¯ä¹˜2ï¼Œæ‰€ä»¥æœ€ä½ä½çš„0æˆ‘ä»¬ä¸å­˜ï¼Œå› æ­¤ç©ºäº†ä¸€ä½å‡ºæ¥ï¼Œå› æ­¤æŠŠ11ç§»åˆ°æœ€ä½ä½æ¥ä¿æŒå¯¹é½</li></ul></li></ul><h2 id="ä¾‹å­-4"><a href="#ä¾‹å­-4" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602170743683.png" alt="image-20240602170743683"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602170753743.png" alt="image-20240602170753743"></p><blockquote><p>16 &#x2F; 2 &#x3D; 8ï¼Œå› æ­¤æ˜¯0x100ï¼Œç¼–ç è¿›Immçš„æ—¶å€™å› ä¸ºimmçš„å•ä½æ˜¯2ï¼Œæ‰€ä»¥å·¦ç§»ä¸€ä½ï¼Œå³0x1000ï¼ŒæŠµæ¶ˆäº†é™¤çš„æ•ˆæœ</p></blockquote><h2 id="æ‰€æœ‰B-FormatæŒ‡ä»¤"><a href="#æ‰€æœ‰B-FormatæŒ‡ä»¤" class="headerlink" title="æ‰€æœ‰B-FormatæŒ‡ä»¤"></a>æ‰€æœ‰B-FormatæŒ‡ä»¤</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602172430027.png" alt="image-20240602172430027"></p><h1 id="J-FormatæŒ‡ä»¤"><a href="#J-FormatæŒ‡ä»¤" class="headerlink" title="J-FormatæŒ‡ä»¤"></a>J-FormatæŒ‡ä»¤</h1><h2 id="jalæŒ‡ä»¤å’Œjä¼ªä»£ç "><a href="#jalæŒ‡ä»¤å’Œjä¼ªä»£ç " class="headerlink" title="jalæŒ‡ä»¤å’Œjä¼ªä»£ç "></a>jalæŒ‡ä»¤å’Œjä¼ªä»£ç </h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602200508673.png" alt="image-20240602200508673"></p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602200518180.png" alt="image-20240602200518180"></p><h2 id="J-Formatå¸ƒå±€"><a href="#J-Formatå¸ƒå±€" class="headerlink" title="J-Formatå¸ƒå±€"></a>J-Formatå¸ƒå±€</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602200629331.png" alt="image-20240602200629331"></p><h1 id="U-Formatå¸ƒå±€"><a href="#U-Formatå¸ƒå±€" class="headerlink" title="U-Formatå¸ƒå±€"></a>U-Formatå¸ƒå±€</h1><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602200751759.png" alt="image-20240602200751759"></p><h2 id="lui-and-addi-å®ç°äº†Long-Immediates"><a href="#lui-and-addi-å®ç°äº†Long-Immediates" class="headerlink" title="lui and addi å®ç°äº†Long Immediates"></a><code>lui</code> and <code>addi</code> å®ç°äº†Long Immediates</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602200934322.png" alt="image-20240602200934322"></p><h3 id="luiçš„æç«¯æƒ…å†µï¼šaddiç¬¦å·æ‰©å±•"><a href="#luiçš„æç«¯æƒ…å†µï¼šaddiç¬¦å·æ‰©å±•" class="headerlink" title="luiçš„æç«¯æƒ…å†µï¼šaddiç¬¦å·æ‰©å±•"></a><code>lui</code>çš„æç«¯æƒ…å†µï¼š<code>addi</code>ç¬¦å·æ‰©å±•</h3><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602201126883.png" alt="image-20240602201126883"></p><p><code>addi</code>å¯èƒ½ä¼šç¬¦å·ä½æ‰©å±•ï¼Œå¯¼è‡´å’Œå®é™…ä¸ç¬¦</p><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602201112713.png" alt="image-20240602201112713"></p><p>è§£å†³æ–¹æ³•ï¼š<code>lui</code>å…ˆåŠ ä¸Šä¸€å†<code>addi</code></p><h2 id="auipc"><a href="#auipc" class="headerlink" title="auipc"></a><code>auipc</code></h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602201335833.png" alt="image-20240602201335833"></p><h1 id="jalrï¼šI-Format"><a href="#jalrï¼šI-Format" class="headerlink" title="jalrï¼šI-Format"></a>jalrï¼šI-Format</h1><h2 id="jalræŒ‡ä»¤å’Œjrä¼ªä»£ç "><a href="#jalræŒ‡ä»¤å’Œjrä¼ªä»£ç " class="headerlink" title="jalræŒ‡ä»¤å’Œjrä¼ªä»£ç "></a><code>jalr</code>æŒ‡ä»¤å’Œ<code>jr</code>ä¼ªä»£ç </h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602201547425.png" alt="image-20240602201547425"></p><h2 id="jalrå¸ƒå±€"><a href="#jalrå¸ƒå±€" class="headerlink" title="jalrå¸ƒå±€"></a><code>jalr</code>å¸ƒå±€</h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602201605401.png" alt="image-20240602201605401"></p><h2 id="jalræŒ‡ä»¤å’Œjrä¼ªä»£ç -1"><a href="#jalræŒ‡ä»¤å’Œjrä¼ªä»£ç -1" class="headerlink" title="jalræŒ‡ä»¤å’Œjrä¼ªä»£ç "></a><code>jalr</code>æŒ‡ä»¤å’Œ<code>jr</code>ä¼ªä»£ç </h2><p><img src="/2024/06/02/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Formats-CALL/image-20240602202001459.png" alt="image-20240602202001459"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£æ•°å­¦å¤ä¹ -è°“è¯é€»è¾‘</title>
      <link href="/2024/05/11/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E8%B0%93%E8%AF%8D%E9%80%BB%E8%BE%91/"/>
      <url>/2024/05/11/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E8%B0%93%E8%AF%8D%E9%80%BB%E8%BE%91/</url>
      
        <content type="html"><![CDATA[<h1 id="è°“è¯é€»è¾‘åŸºæœ¬æ¦‚å¿µ"><a href="#è°“è¯é€»è¾‘åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="è°“è¯é€»è¾‘åŸºæœ¬æ¦‚å¿µ"></a>è°“è¯é€»è¾‘åŸºæœ¬æ¦‚å¿µ</h1><ul><li>åŸå­å‘½é¢˜<ul><li>å®¢ä½“<ul><li>ä¸ä¾äººä»¬ä¸»è§‚è€Œå­˜åœ¨çš„å®¢è§‚å®ä½“.å…·ä½“äº‹ç‰©æˆ–æŠ½è±¡æ¦‚å¿µ.</li></ul></li><li>è°“è¯<ul><li>æè¿°å®¢ä½“çš„æ€§è´¨æˆ–ç‰¹å¾,æˆ–å®¢ä½“é—´çš„å…³ç³»çš„è¯.</li></ul></li></ul></li></ul><p><strong>åŸºäºè°“è¯åˆ†æçš„é€»è¾‘,ç§°ä¸ºè°“è¯é€»è¾‘</strong>,å®ƒæ˜¯å‘½é¢˜é€»è¾‘çš„æ‰©å……å’Œå‘å±•ã€‚</p><h2 id="è°“è¯"><a href="#è°“è¯" class="headerlink" title="è°“è¯"></a>è°“è¯</h2><ul><li>å‘½é¢˜ä¸€èˆ¬æ˜¯ç”±ä¸»è¯­å’Œè°“è¯ä¸¤éƒ¨åˆ†ç»„æˆå¦‚ï¼š<ul><li>å°ç‹æ˜¯è€å¸ˆ       </li><li>å°ææ˜¯è€å¸ˆ</li></ul></li></ul><p>å…¶ä¸­<strong>å°ç‹</strong>å’Œ<strong>å°æ</strong>æ˜¯ä¸»è¯­ï¼Œå¯ç‹¬ç«‹å­˜åœ¨</p><p>è°“è¯­ç›¸åŒï¼š<strong>â€œæ˜¯è€å¸ˆâ€</strong>ï¼Œæè¿°äº†å°ç‹å’Œå°æçš„å…±åŒç‰¹å¾ã€‚è¦è¡¨ç¤ºå¤šä¸ªå®¢ä½“ä¹‹é—´çš„å…³ç³»ï¼Œå¯å¼•å…¥å¤šä¸ªå®¢ä½“çš„è°“è¯æ¥è¡¨ç¤º</p><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><h4 id="ä¸€å…ƒè°“è¯"><a href="#ä¸€å…ƒè°“è¯" class="headerlink" title="ä¸€å…ƒè°“è¯"></a>ä¸€å…ƒè°“è¯</h4><p> Pï¼šç”·ç”·æ˜¯å¤§å­¦ç”Ÿ           Qï¼šæ¯›æ¯›æ˜¯å¤§å­¦ç”Ÿ              S(x): xæ˜¯å¤§å­¦ç”Ÿç”·ç”·æ˜¯å¤§å­¦ç”Ÿ  S(a)   a:ç”·ç”·æ¯›æ¯›æ˜¯å¤§å­¦ç”Ÿ  S(c)   c:æ¯›æ¯›</p><h1 id="è°“è¯å…¬å¼ç¿»è¯‘"><a href="#è°“è¯å…¬å¼ç¿»è¯‘" class="headerlink" title="è°“è¯å…¬å¼ç¿»è¯‘"></a>è°“è¯å…¬å¼ç¿»è¯‘</h1><h1 id="çº¦æŸå˜å…ƒä¸è‡ªç”±å˜å…ƒ"><a href="#çº¦æŸå˜å…ƒä¸è‡ªç”±å˜å…ƒ" class="headerlink" title="çº¦æŸå˜å…ƒä¸è‡ªç”±å˜å…ƒ"></a>çº¦æŸå˜å…ƒä¸è‡ªç”±å˜å…ƒ</h1><h1 id="è°“è¯å…¬å¼çš„ç­‰ä»·å˜æ¢å’Œè•´å«å¼"><a href="#è°“è¯å…¬å¼çš„ç­‰ä»·å˜æ¢å’Œè•´å«å¼" class="headerlink" title="è°“è¯å…¬å¼çš„ç­‰ä»·å˜æ¢å’Œè•´å«å¼"></a>è°“è¯å…¬å¼çš„ç­‰ä»·å˜æ¢å’Œè•´å«å¼</h1><h1 id="è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º"><a href="#è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º" class="headerlink" title="è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º"></a>è°“è¯é€»è¾‘çš„æ¨ç†ç†è®º</h1>]]></content>
      
      
      <categories>
          
          <category> å¤ä¹ ç¬”è®° </category>
          
          <category> ç¦»æ•£æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ä¹ ç¬”è®° </tag>
            
            <tag> ç¦»æ•£æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦»æ•£æ•°å­¦å¤ä¹ -å…³ç³»</title>
      <link href="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/"/>
      <url>/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/</url>
      
        <content type="html"><![CDATA[<h1 id="åºå¶å’Œç¬›å¡å°”ç§¯"><a href="#åºå¶å’Œç¬›å¡å°”ç§¯" class="headerlink" title="åºå¶å’Œç¬›å¡å°”ç§¯"></a>åºå¶å’Œç¬›å¡å°”ç§¯</h1><h2 id="åºå¶"><a href="#åºå¶" class="headerlink" title="åºå¶"></a>åºå¶</h2><p>å¯¹äºæœ‰åºnå…ƒç»„ï¼Œå½“n&#x3D;2æ—¶ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä½œæœ‰åºäºŒå…ƒç»„ï¼Œä¹Ÿç§°ä½œæœ‰åºå¯¹,æˆ–åºå¶ã€‚</p><p>åºå¶çš„ç‰¹ç‚¹ï¼š</p><ul><li><p>è‹¥aâ‰ b,åˆ™(a,b)â‰ (b,a)</p></li><li><p>ä¸¤ä¸ªæœ‰åºå¯¹(a,b)å’Œ(c,d)ç›¸ç­‰å½“ä¸”ä»…å½“a&#x3D;cï¼Œb&#x3D;dã€‚</p></li></ul><p><strong>ç‰¹å¾ï¼šæˆå¯¹å‡ºç°ã€å…·æœ‰ä¸€å®šçš„é¡ºåºã€‚</strong></p><p>ç”¨åºå¶è¡¨ç¤ºä¸‹åˆ—è¯­å¥ä¸­çš„æ¬¡åºå…³ç³»</p><p>(1)å¹³é¢ä¸Šç‚¹Açš„æ¨ªåæ ‡æ˜¯xï¼Œçºµåæ ‡æ˜¯yï¼Œx,yâˆˆRï¼›</p><p>(2)æˆéƒ½æ˜¯å››å·çš„çœä¼šï¼›</p><p>(3)è‹±è¯­è¯¾æœ¬åœ¨ä¹¦æ¡Œä¸Šï¼›</p><p>(4)å·¦ï¼Œå³å…³ç³»ã€‚</p><blockquote><p>(1)(x,y)</p><p>(2)(æˆéƒ½,å››å·)</p><p>(3)(è‹±è¯­è¯¾æœ¬,ä¹¦æ¡Œ)</p><p>(4)(å·¦,å³)</p></blockquote><h2 id="ç¬›å¡å°”ç§¯"><a href="#ç¬›å¡å°”ç§¯" class="headerlink" title="ç¬›å¡å°”ç§¯"></a>ç¬›å¡å°”ç§¯</h2><p>è®¾Aï¼ŒBæ˜¯ä¸¤ä¸ªé›†åˆï¼Œæ‰€æœ‰æœ‰åºå¯¹(x, y)åšæˆçš„é›†åˆ(å…¶ä¸­xâˆˆAï¼ŒyâˆˆB)ï¼Œç§°ä¸ºAï¼ŒBçš„ç¬›å¡å„¿ç§¯ï¼Œè®°ä¸ºAÃ—Bã€‚A x B &#x3D; {(xï¼Œy)|xâˆˆAä¸”yâˆˆB}</p><h3 id="æ€§è´¨"><a href="#æ€§è´¨" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h3><ul><li>|AÃ—B|&#x3D;|A|Ã— |B|ï¼›</li><li>å¯¹ä»»æ„é›†åˆAï¼Œæœ‰AÃ—Ã˜&#x3D;Ã˜ï¼ŒÃ˜Ã—A&#x3D;Ã˜ï¼›</li><li>ç¬›å¡å„¿ç§¯è¿ç®—ä¸æ»¡è¶³äº¤æ¢å¾‹ï¼Œå³AÃ—Bâ‰ BÃ—Aï¼›  </li><li>ç¬›å¡å„¿ç§¯è¿ç®—ä¸æ»¡è¶³ç»“åˆå¾‹ï¼Œå³(AÃ—B)Ã—Câ‰ AÃ—(BÃ—C) </li><li><strong>ç¬›å¡å„¿ç§¯è¿ç®—å¯¹å¹¶å’Œäº¤è¿ç®—æ»¡è¶³åˆ†é…å¾‹</strong>ï¼Œ å³:<ul><li>AÃ—(BâˆªC)&#x3D;(AÃ—B)âˆª(AÃ—C)ï¼Œ</li><li>(BâˆªC)Ã—A&#x3D;(BÃ—A)âˆª(CÃ—A)ï¼Œ</li><li>AÃ—(Bâˆ©C)&#x3D;(AÃ—B)âˆ©(AÃ—C)ï¼Œ </li><li>(Bâˆ©C)Ã—A&#x3D;(BÃ—A)âˆ©(CÃ—A)ï¼›</li></ul></li><li><strong>è®¾Aï¼ŒBï¼ŒCï¼ŒDæ˜¯é›†åˆï¼Œè‹¥AâŠ†Cä¸”BâŠ†Dï¼Œåˆ™ AÃ—B âŠ† CÃ—Dã€‚</strong></li></ul><h1 id="äºŒå…ƒå…³ç³»"><a href="#äºŒå…ƒå…³ç³»" class="headerlink" title="äºŒå…ƒå…³ç³»"></a>äºŒå…ƒå…³ç³»</h1><p><strong>â˜…å…³ç³»æ˜¯ä¸€ä¸ªé›†åˆï¼Œæ˜¯åºå¶çš„é›†åˆã€‚</strong></p><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ç»™å®šä»»æ„é›†åˆAå’ŒBï¼Œè‹¥RâŠ†AÃ—Bï¼Œåˆ™ç§°Rä¸ºä»Aåˆ°Bçš„<strong>äºŒå…ƒå…³ç³»</strong>ï¼Œç‰¹åˆ«åœ¨A&#x3D;Bæ—¶ï¼Œç§°<strong>Rä¸ºAä¸Šçš„äºŒå…ƒå…³ç³»</strong>ã€‚</p><p><strong>ä»é›†åˆAåˆ°é›†åˆBçš„ä¸€ä¸ªå…³ç³»Ræ˜¯AÃ—Bçš„ä¸€ä¸ªå­é›†</strong></p><ul><li>Ræ˜¯æœ‰åºå¯¹çš„é›†åˆã€‚è‹¥(x,y)âˆˆRï¼Œåˆ™ä¹Ÿè¡¨ç¤ºä¸ºx R yï¼Œå³**(x,y)âˆˆ R â‡” x R yã€‚**<ul><li>è‹¥R &#x3D;Ã˜ï¼Œåˆ™ç§° R ä¸ºA åˆ° Bä¸Š<strong>ç©ºå…³ç³»</strong>ï¼›</li><li>è‹¥R &#x3D;AÃ—Bï¼Œç§°Rä¸ºA åˆ° Bä¸Š<strong>å…¨åŸŸå…³ç³»</strong></li><li>å½“A &#x3D;B æ—¶ï¼Œ<ul><li>ç§°Ã˜ä¸ºAä¸Š<strong>ç©ºå…³ç³»</strong></li><li>ç§°R &#x3D;AÃ—Aä¸ºAä¸Šçš„<strong>å…¨åŸŸå…³ç³»</strong></li><li>ç§°R&#x3D;{ï¼ˆx,xï¼‰|xâˆˆA}ä¸ºAä¸Šçš„<strong>æ’ç­‰å…³ç³»</strong>ï¼Œè®°ä¸º**I<del>A</del>**ã€‚</li></ul></li></ul></li></ul><p>å½“é›†åˆA,Béƒ½æ˜¯æœ‰é™é›†æ—¶ï¼ŒAÃ—Bå…±æœ‰2^|A|â€¢|B|^ä¸ªä¸åŒçš„å­é›†ï¼Œå³ä»Aåˆ°Bçš„ä¸åŒå…³ç³»å…±æœ‰2|^A|â€¢|B|^ä¸ªã€‚</p><h2 id="å®šä¹‰åŸŸã€å€¼åŸŸã€åŸŸ"><a href="#å®šä¹‰åŸŸã€å€¼åŸŸã€åŸŸ" class="headerlink" title="å®šä¹‰åŸŸã€å€¼åŸŸã€åŸŸ"></a>å®šä¹‰åŸŸã€å€¼åŸŸã€åŸŸ</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194125919.png" alt="image-20240507194125919"></p><h3 id="ä¾‹"><a href="#ä¾‹" class="headerlink" title="ä¾‹"></a>ä¾‹</h3><ul><li><p>è®¾A&#x3D;{ a , b ,ç”²ï¼Œä¹™}ï¼ŒB&#x3D;{0ï¼Œ1ï¼Œä¸™}, å…³ç³»S&#x3D;{(a,0) ,(b,0), (ç”²,1) ,(ç”²,ä¸™) } </p><ul><li><p>åˆ™å¯çŸ¥D(S)&#x3D;{a, b, ç”²},           </p></li><li><p>R(S)&#x3D;{0, 1, ä¸™}</p></li></ul></li><li><p>å®æ•°é›†Rä¸Šçš„â€&lt;â€å…³ç³»å¯å®šä¹‰ä¸ºï¼š&lt;&#x3D;{(x,y)|xâˆˆR,yâˆˆRä¸”Xå°äºy}</p><ul><li>D(&lt;)&#x3D;R           R(&lt;)&#x3D;R</li></ul></li></ul><h2 id="å…³ç³»çŸ©é˜µ"><a href="#å…³ç³»çŸ©é˜µ" class="headerlink" title="å…³ç³»çŸ©é˜µ"></a>å…³ç³»çŸ©é˜µ</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194248600.png" alt="image-20240507194248600"></p><h3 id="ä¾‹-1"><a href="#ä¾‹-1" class="headerlink" title="ä¾‹"></a>ä¾‹</h3><p>ä¾‹ï¼š A&#x3D;{1,2,3,4} ï¼ŒR&#x3D;{( x , y)| x, yâˆˆAä¸” x &gt; y}ï¼Œè¯•æ±‚M<del>R</del>ï¼ŒR&#x3D;{( 4 ,1),(4,2),(4,3), (3,1),(3,2),(2,1)}</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194310411.png" alt="image-20240507194310411"></p><h2 id="å…³ç³»å›¾"><a href="#å…³ç³»å›¾" class="headerlink" title="å…³ç³»å›¾"></a>å…³ç³»å›¾</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194403787.png" alt="image-20240507194403787"></p><h3 id="ä¾‹-2"><a href="#ä¾‹-2" class="headerlink" title="ä¾‹"></a>ä¾‹</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194442002.png" alt="image-20240507194442002"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194456644.png" alt="image-20240507194456644"></p><h2 id><a href="#" class="headerlink" title></a></h2><h1 id="å…³ç³»è¿ç®—"><a href="#å…³ç³»è¿ç®—" class="headerlink" title="å…³ç³»è¿ç®—"></a>å…³ç³»è¿ç®—</h1><h2 id="1-å…³ç³»çš„äº¤ã€å¹¶ã€è¡¥ã€å·®"><a href="#1-å…³ç³»çš„äº¤ã€å¹¶ã€è¡¥ã€å·®" class="headerlink" title="1. å…³ç³»çš„äº¤ã€å¹¶ã€è¡¥ã€å·®"></a>1. å…³ç³»çš„äº¤ã€å¹¶ã€è¡¥ã€å·®</h2><p>å‰å·²è¿°åŠï¼Œå…³ç³»æ˜¯<strong>åºå¶</strong>(æœ‰åºå¯¹)çš„é›†åˆï¼Œå› æ­¤å¯ä»¥å¯¹å…³ç³»è¿›è¡Œè¿ç®—ã€‚</p><p>è‹¥R, SâŠ†AÃ—Bï¼Œåˆ™RâˆªSï¼ŒR âˆ©Sï¼Œ~Rï¼ŒR-SâŠ†AÃ—B.</p><h2 id="2-å¤åˆå…³ç³»"><a href="#2-å¤åˆå…³ç³»" class="headerlink" title="2.å¤åˆå…³ç³»"></a>2.å¤åˆå…³ç³»</h2><p>è®¾Ræ˜¯ä»é›†åˆXåˆ°Yçš„å…³ç³»ï¼ŒSæ˜¯ä»Yåˆ°Zçš„å…³ç³»ï¼ŒæŠŠXåˆ°Zçš„å…³ç³»å®šä¹‰ä¸º<strong>RoS</strong>ã€‚ç§°<strong>RoS</strong>æ˜¯å…³ç³»Rå’ŒSçš„åˆæˆå…³ç³»æˆ–å¤åˆå…³ç³».</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194818051.png" alt="image-20240507194818051"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194839433.png" alt="image-20240507194839433"></p><h3 id="åˆ†é…å¾‹"><a href="#åˆ†é…å¾‹" class="headerlink" title="åˆ†é…å¾‹"></a>åˆ†é…å¾‹</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195230904.png" alt="image-20240507195230904"></p><h3 id="ç»“åˆå¾‹"><a href="#ç»“åˆå¾‹" class="headerlink" title="ç»“åˆå¾‹"></a>ç»“åˆå¾‹</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507194935674.png" alt="image-20240507194935674"></p><h3 id="å¤åˆçš„å¹‚è¿ç®—"><a href="#å¤åˆçš„å¹‚è¿ç®—" class="headerlink" title="å¤åˆçš„å¹‚è¿ç®—"></a>å¤åˆçš„å¹‚è¿ç®—</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195001008.png" alt="image-20240507195001008"></p><h2 id="3-é€†å…³ç³»"><a href="#3-é€†å…³ç³»" class="headerlink" title="3.é€†å…³ç³»"></a>3.é€†å…³ç³»</h2><h3 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195329344.png" alt="image-20240507195329344"></p><h3 id="å®šç†ä¸€"><a href="#å®šç†ä¸€" class="headerlink" title="å®šç†ä¸€"></a>å®šç†ä¸€</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195418936.png" alt="image-20240507195418936"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195117515.png" alt="image-20240507195117515"></p><h3 id="å®šç†äºŒ"><a href="#å®šç†äºŒ" class="headerlink" title="å®šç†äºŒ"></a>å®šç†äºŒ</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195445152.png" alt="image-20240507195445152"></p><h3 id="å®šç†ä¸‰"><a href="#å®šç†ä¸‰" class="headerlink" title="å®šç†ä¸‰"></a>å®šç†ä¸‰</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195528582.png" alt="image-20240507195528582"></p><h3 id="æ³¨æ„ç‚¹"><a href="#æ³¨æ„ç‚¹" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h3><ul><li>ä»»æ„ä¸¤ä¸ªå…³ç³»Rå’ŒSèƒ½è¿›è¡Œå¤åˆè¿ç®—<strong>å½“ä¸”ä»…å½“</strong>Rçš„ååŸŸæ˜¯Sçš„å‰åŸŸã€‚<ul><li>æ³¨æ„RoSçš„å‰åŸŸæ˜¯Rçš„å‰åŸŸï¼ŒååŸŸæ˜¯Sçš„ååŸŸï¼›å¦‚æœå¯¹ä»»æ„çš„xâˆˆAå’ŒzâˆˆCï¼Œä¸å­˜åœ¨yâˆˆBä½¿å¾—xRyå’ŒySzåŒæ—¶æˆç«‹ï¼Œåˆ™RoSä¸ºç©ºï¼Œä»è€Œæœ‰Î¦oR &#x3D; RoÎ¦ &#x3D; Î¦ã€‚</li></ul></li><li>å¤åˆè¿ç®—æœ‰ä¸‰ç§è®¡ç®—æ–¹å¼(é›†åˆè¡¨è¾¾å¼ã€å…³ç³»çŸ©é˜µå’Œå…³ç³»å›¾), å…¶ä¸­åˆ©ç”¨å…³ç³»çŸ©é˜µçš„è®¡ç®—æ–¹å¼æ˜¯éš¾ç‚¹ï¼ŒRoSçš„å…³ç³»çŸ©é˜µ<strong>ç­‰äº</strong>Rçš„å…³ç³»çŸ©é˜µå’ŒSçš„å…³ç³»çŸ©é˜µçš„å¸ƒå°”ç§¯ã€‚</li></ul><h2 id="å…³ç³»è¿ç®—çš„åº”ç”¨"><a href="#å…³ç³»è¿ç®—çš„åº”ç”¨" class="headerlink" title="å…³ç³»è¿ç®—çš„åº”ç”¨"></a>å…³ç³»è¿ç®—çš„åº”ç”¨</h2><ul><li>ä¾‹è®¾æœ‰å…³ç³»Rå’ŒSåˆ†åˆ«å¦‚è¡¨1å’Œè¡¨2æ‰€ç¤ºï¼Œåœ¨Rä¸­å¢åŠ å…³ç³»Sä¸­çš„æ‰€æœ‰å…ƒç»„ï¼Œè¯•æ±‚å¢åŠ åçš„å…³ç³»ã€‚</li></ul><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195806488.png" alt="image-20240507195806488"></p><blockquote><p>åœ¨å…³ç³»Rä¸­å¢åŠ Sä¸­çš„æ‰€æœ‰å…ƒç»„ï¼Œåœ¨å…³ç³»æ•°æ®åº“ä¸­ç§°ä¸ºå¯¹å…³ç³»è¡¨çš„<strong>æ’å…¥æ“ä½œ</strong>(InsertOperation)ï¼Œè¯¥æ“ä½œå¯ä»¥é€šè¿‡å…³ç³»çš„<strong>å¹¶è¿ç®—</strong>å®Œæˆï¼Œå³æ±‚åœ¨Rä¸­å¢åŠ å…³ç³»Sçš„æ‰€æœ‰å…ƒç»„ç­‰ä»·äºæ±‚RâˆªSã€‚</p><table><thead><tr><th><strong>A</strong></th><th><strong>B</strong></th><th><strong>C</strong></th></tr></thead><tbody><tr><td><strong>1</strong></td><td><strong>2</strong></td><td><strong>5</strong></td></tr><tr><td><strong>2</strong></td><td><strong>1</strong></td><td><strong>3</strong></td></tr><tr><td><strong>5</strong></td><td><strong>6</strong></td><td><strong>2</strong></td></tr><tr><td><strong>4</strong></td><td><strong>6</strong></td><td><strong>2</strong></td></tr><tr><td><strong>6</strong></td><td><strong>1</strong></td><td><strong>5</strong></td></tr></tbody></table></blockquote><ul><li>è®¾æœ‰å…³ç³»Rå’ŒSå¦‚è¡¨4å’Œè¡¨5æ‰€ç¤ºï¼Œç°åœ¨åœ¨Rä¸­å»æ‰å…³ç³»Sä¸­æ‰€å‡ºç°çš„å…ƒç»„ï¼Œè¯•æ±‚å»æ‰Såçš„å…³ç³»ã€‚</li></ul><blockquote><p>ç›¸å½“äº R - S</p></blockquote><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507195923164.png" alt="image-20240507195923164"></p><h1 id="å…³ç³»æ€§è´¨"><a href="#å…³ç³»æ€§è´¨" class="headerlink" title="å…³ç³»æ€§è´¨"></a>å…³ç³»æ€§è´¨</h1><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507200526843.png" alt="image-20240507200526843"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507200543946.png" alt="image-20240507200543946"></p><h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><ul><li>è‹¥Aä¸Šå…³ç³»Ræ˜¯<em>è‡ªå</em>çš„ï¼Œåˆ™M<del>R</del>ä¸­ä¸»<strong>å¯¹è§’çº¿ä¸Šå…ƒç´ å…¨ä¸º1</strong>ï¼Œè€ŒG<del>R</del>ä¸­æ¯ä¸ªç»“ç‚¹<strong>æœ‰</strong>æœ‰å‘ç¯ï¼›åä¹‹äº¦ç„¶ã€‚</li><li>è‹¥Aä¸Šå…³ç³»Ræ˜¯<em>åè‡ªå</em>çš„ï¼Œåˆ™M<del>R</del>ä¸­<strong>ä¸»å¯¹è§’çº¿ä¸Šå…ƒç´ å…¨ä¸º0</strong>ï¼Œè€ŒG<del>R</del>ä¸­æ¯ä¸ªç»“ç‚¹<strong>æ— </strong>æœ‰å‘ç¯ï¼›åä¹‹äº¦ç„¶ã€‚</li><li>è‹¥Aä¸Šå…³ç³»Ræ˜¯<em>å¯¹ç§°</em>çš„ï¼Œåˆ™M<del>R</del>æ˜¯<strong>å¯¹ç§°çŸ©é˜µ</strong>ï¼Œè€ŒG<del>R</del>ä¸­ä»»ä½•ä¸¤ç»“ç‚¹è‹¥æœ‰<strong>å¼§å¿…æˆå¯¹</strong>å‡ºç°ï¼›åä¹‹äº¦ç„¶ã€‚</li><li>è‹¥Aä¸Šå…³ç³»Ræ˜¯<em>åå¯¹ç§°</em>çš„ï¼Œåˆ™M<del>R</del>ä¸­ä»¥ä¸»å¯¹è§’çº¿ä¸ºå¯¹ç§°å…ƒç´ <strong>ä¸èƒ½åŒæ—¶ä¸º1</strong>ï¼Œè€ŒG<del>R</del>ä¸­è‹¥ä¸¤ç»“ç‚¹é—´æœ‰å¼§<strong>ä¸èƒ½æˆå¯¹</strong>å‡ºç°ï¼›åä¹‹äº¦ç„¶ã€‚</li><li>è‹¥Aä¸Šå…³ç³»Ræ˜¯<em>ä¼ é€’</em>çš„ï¼Œåˆ™MRä¸­è‹¥r<del>ij</del>&#x3D;r<del>jk</del>&#x3D;1ï¼Œåˆ™r<del>ik</del>&#x3D;1ï¼Œè€ŒGRä¸­è‹¥æœ‰å¼§ï¼ˆx, yï¼‰å’Œï¼ˆy, zï¼‰åˆ™å¿…æœ‰å¼§ï¼ˆx, zï¼‰ï¼›åä¹‹äº¦ç„¶ã€‚ä½†ä¸æ˜“ä»M<del>R</del>å’ŒG<del>R</del>ä¸­åˆ¤å®šå…³ç³»Rä¼ é€’æ€§ã€‚</li></ul><h2 id="æ³¨æ„ç‚¹-1"><a href="#æ³¨æ„ç‚¹-1" class="headerlink" title="æ³¨æ„ç‚¹"></a>æ³¨æ„ç‚¹</h2><ul><li>ä»»ä½•é›†åˆä¸Šçš„<strong>ç›¸ç­‰å…³ç³»</strong>æ˜¯<em>è‡ªåçš„ã€å¯¹ç§°çš„ï¼Œåå¯¹ç§°çš„å’Œä¼ é€’</em>çš„ï¼Œä½†<strong>ä¸æ˜¯åè‡ªå</strong>çš„ã€‚</li><li>æ•´æ•°é›†åˆZä¸­ï¼Œå…³ç³»<strong>â‰¤</strong>æ˜¯<em>è‡ªåçš„ã€åå¯¹ç§°çš„å’Œä¼ é€’</em>çš„ï¼Œ<strong>ä½†ä¸æ˜¯åè‡ªåçš„å’Œå¯¹ç§°çš„</strong>ã€‚å…³ç³»**&lt;<strong>æ˜¯<em>åè‡ªåçš„ï¼Œåå¯¹ç§°çš„å’Œä¼ é€’</em>çš„ï¼Œ</strong>ä½†ä¸æ˜¯è‡ªåçš„å’Œå¯¹ç§°çš„**ã€‚</li><li><em>éç©º</em>é›†åˆä¸Šçš„<strong>ç©ºå…³ç³»</strong>æ˜¯<em>åè‡ªåçš„ï¼Œå¯¹ç§°çš„ï¼Œåå¯¹ç§°çš„å’Œä¼ é€’</em>çš„ï¼Œ<strong>ä½†ä¸æ˜¯è‡ªå</strong>çš„ã€‚</li><li><em>ç©º</em>é›†åˆä¸Šçš„<strong>ç©ºå…³ç³»</strong>åˆ™æ˜¯<em>è‡ªåçš„ï¼Œåè‡ªåçš„ï¼Œå¯¹ç§°çš„ï¼Œåå¯¹ç§°çš„å’Œä¼ é€’</em>çš„ã€‚</li><li>éç©ºé›†åˆä¸Šçš„<strong>å…¨åŸŸå…³ç³»</strong>æ˜¯è‡ªåçš„ï¼Œå¯¹ç§°çš„å’Œä¼ é€’çš„ï¼Œ<strong>ä½†ä¸æ˜¯åè‡ªåçš„å’Œåå¯¹ç§°</strong>çš„ã€‚</li></ul><p><strong>å®šç†</strong>  è®¾RâŠ†AÃ—Aï¼Œè‹¥Ræ˜¯åè‡ªåçš„å’Œä¼ é€’çš„ï¼Œåˆ™Ræ˜¯åå¯¹ç§°çš„ã€‚</p><h1 id="é—­åŒ…è¿ç®—"><a href="#é—­åŒ…è¿ç®—" class="headerlink" title="é—­åŒ…è¿ç®—"></a>é—­åŒ…è¿ç®—</h1><p>å…³ç³»çš„é—­åŒ…è¿ç®—æ˜¯å…³ç³»ä¸Šçš„ä¸€å…ƒè¿ç®—ï¼Œæ˜¯åŒ…å«è¯¥å…³ç³»ä¸”å…·æœ‰æŸç§æ€§è´¨çš„æœ€å°å…³ç³»ã€‚</p><h2 id="è‡ªåé—­åŒ…"><a href="#è‡ªåé—­åŒ…" class="headerlink" title="è‡ªåé—­åŒ…"></a>è‡ªåé—­åŒ…</h2><p>è®¾R æ˜¯ Aä¸Šçš„äºŒå…ƒå…³ç³»ï¼Œè‹¥æœ‰å¦ä¸€ä¸ªå…³ç³»Râ€™æ»¡è¶³:</p><ul><li>Râ€™æ˜¯è‡ªåçš„</li><li>RâŠ†Râ€™</li><li>å¯¹ä»»æ„çš„è‡ªåå…³ç³»Râ€™â€™ï¼Œ RâŠ†Râ€™â€™ ï¼Œ</li></ul><p>åˆ™å¿…æœ‰Râ€™âŠ†Râ€™â€™Râ€™æ˜¯Rçš„è‡ªåé—­åŒ…,è®°ä½œ**r(R)**ã€‚</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507202150155.png" alt="image-20240507202150155"></p><h2 id="å¯¹ç§°é—­åŒ…"><a href="#å¯¹ç§°é—­åŒ…" class="headerlink" title="å¯¹ç§°é—­åŒ…"></a>å¯¹ç§°é—­åŒ…</h2><p>è®¾R æ˜¯ Aä¸Šçš„äºŒå…ƒå…³ç³»ï¼Œè‹¥æœ‰å¦ä¸€ä¸ªå…³ç³»Râ€™æ»¡è¶³:</p><ul><li>Râ€™æ˜¯å¯¹ç§°çš„</li><li>RâŠ†Râ€™</li><li>å¯¹ä»»æ„çš„è‡ªåå…³ç³»Râ€™â€™ï¼Œ RâŠ†Râ€™â€™ ï¼Œ</li></ul><p>åˆ™å¿…æœ‰Râ€™âŠ†Râ€™â€™Râ€™æ˜¯Rçš„è‡ªåé—­åŒ…,è®°ä½œ**s(R)**ã€‚</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507202311540.png" alt="image-20240507202311540"></p><h2 id="ä¼ é€’é—­åŒ…"><a href="#ä¼ é€’é—­åŒ…" class="headerlink" title="ä¼ é€’é—­åŒ…"></a>ä¼ é€’é—­åŒ…</h2><p>è®¾R æ˜¯ Aä¸Šçš„äºŒå…ƒå…³ç³»ï¼Œè‹¥æœ‰å¦ä¸€ä¸ªå…³ç³»Râ€™æ»¡è¶³:</p><ul><li>Râ€™æ˜¯ä¼ é€’çš„</li><li>RâŠ†Râ€™</li><li>å¯¹ä»»æ„çš„è‡ªåå…³ç³»Râ€™â€™ï¼Œ RâŠ†Râ€™â€™ ï¼Œ</li></ul><p>åˆ™å¿…æœ‰Râ€™âŠ†Râ€™â€™Râ€™æ˜¯Rçš„è‡ªåé—­åŒ…,è®°ä½œ**t(R)**ã€‚</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507202340153.png" alt="image-20240507202340153"></p><h2 id="å®šç†"><a href="#å®šç†" class="headerlink" title="å®šç†"></a>å®šç†</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507202422180.png" alt="image-20240507202422180"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507202431088.png" alt="image-20240507202431088"></p><h1 id="ç­‰ä»·å…³ç³»"><a href="#ç­‰ä»·å…³ç³»" class="headerlink" title="ç­‰ä»·å…³ç³»"></a>ç­‰ä»·å…³ç³»</h1><p><strong>åˆ’åˆ† &#x3D; ç­‰ä»· &#x3D; å•†é›†</strong></p><p><strong>åˆ’åˆ†å— &#x3D; ç­‰ä»·ç±»</strong></p><h2 id="ç­‰ä»·å…³ç³»çš„å®šä¹‰"><a href="#ç­‰ä»·å…³ç³»çš„å®šä¹‰" class="headerlink" title="ç­‰ä»·å…³ç³»çš„å®šä¹‰"></a>ç­‰ä»·å…³ç³»çš„å®šä¹‰</h2><p>è®¾Ræ˜¯é›†åˆXä¸Šçš„äºŒå…ƒå…³ç³»ï¼Œå¦‚æœ Ræ˜¯<strong>è‡ªåçš„ã€å¯¹ç§°çš„ã€ä¼ é€’</strong>çš„ï¼Œé‚£ä¹ˆç§°Ræ˜¯ç­‰ä»·å…³ç³»ã€‚</p><h2 id="ç­‰ä»·çš„è¯æ˜"><a href="#ç­‰ä»·çš„è¯æ˜" class="headerlink" title="ç­‰ä»·çš„è¯æ˜"></a>ç­‰ä»·çš„è¯æ˜</h2><p>ä¾‹1ï¼šX&#x3D;{1,2,3,4,5,6}ï¼ŒZæ˜¯æ•´æ•°é›†åˆ</p><p>R&#x3D;{(x,y)|x,yâˆˆX ä¸”(x-y)&#x2F;2âˆˆZ}</p><ul><li>è¯æ˜ä¸€ï¼šRä¸ºç­‰ä»·å…³ç³»è¯­è¨€æè¿°</li><li>è¯æ³•äºŒï¼šåœ¨å…¶å…³ç³»çŸ©é˜µä¸Šè¯æ˜</li><li>è¯æ³•ä¸‰ï¼šåœ¨å…¶å…³ç³»å›¾ä¸Šè¯æ˜</li></ul><h2 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507203031273.png" alt="image-20240507203031273"></p><h2 id="ç­‰ä»·ç±»"><a href="#ç­‰ä»·ç±»" class="headerlink" title="ç­‰ä»·ç±»"></a>ç­‰ä»·ç±»</h2><p>Ræ˜¯é›†åˆSä¸Šçš„ç­‰ä»·å…³ç³», å¯¹ä»»ä¸€xâˆˆSï¼Œå‡å¯æ„é€ ä¸€ä¸ªSçš„éç©ºå­é›†[x]<del>R</del> ï¼Œå«åšxå…³äºRçš„ç­‰ä»·ç±»:</p><p><strong>[x]<del>R</del> &#x3D; { y | yâˆˆS ä¸” xRy }ï¼Œä¹Ÿå¯è®°ä¸º [x]</strong></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507203402388.png" alt="image-20240507203402388"></p><h2 id="æ€§è´¨-1"><a href="#æ€§è´¨-1" class="headerlink" title="æ€§è´¨"></a>æ€§è´¨</h2><ul><li>xâˆˆ[x]</li><li>è‹¥yâˆˆ[x],  åˆ™ [y]&#x3D;[x]</li><li>è‹¥yâˆ‰[x],  åˆ™ [y]âˆ©[x]&#x3D;Î¦</li></ul><h2 id="å•†é›†"><a href="#å•†é›†" class="headerlink" title="å•†é›†"></a>å•†é›†</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507221540981.png" alt="image-20240507221540981"></p><h2 id="åˆ’åˆ†"><a href="#åˆ’åˆ†" class="headerlink" title="åˆ’åˆ†"></a>åˆ’åˆ†</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507221611008.png" alt="image-20240507221611008"></p><h1 id="ååºå…³ç³»"><a href="#ååºå…³ç³»" class="headerlink" title="ååºå…³ç³»"></a>ååºå…³ç³»</h1><h2 id="å®šä¹‰-2"><a href="#å®šä¹‰-2" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>è®¾Ræ˜¯é›†åˆAä¸­çš„äºŒå…ƒå…³ç³»ï¼Œå¦‚æœRæ˜¯<strong>è‡ªåçš„ã€åå¯¹ç§°çš„å’Œå¯ä¼ é€’</strong>çš„ï¼Œåˆ™ç§°Ræ˜¯Aä¸­çš„ååºå…³ç³»</p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507203910096.png" alt="image-20240507203910096"></p><blockquote><p>ç»­R&#x3D;{(2,2),(2,6),(2,12),(2,24),(2,36), (3,3),(3,6),(3,12),(3,24),(3,36),   (6,6),(6,12),(6,24),(6,36),(12,12), (12,24),(12,36),(24,24),(36,36)}</p></blockquote><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507203923815.png" alt="image-20240507203923815"></p><h2 id="å“ˆæ–¯å›¾"><a href="#å“ˆæ–¯å›¾" class="headerlink" title="å“ˆæ–¯å›¾"></a>å“ˆæ–¯å›¾</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204420694.png" alt="image-20240507204420694"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204430686.png" alt="image-20240507204430686"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204444251.png" alt="image-20240507204444251"></p><h3 id="æœ€å¤§ã€æœ€å°å…ƒç´ "><a href="#æœ€å¤§ã€æœ€å°å…ƒç´ " class="headerlink" title="æœ€å¤§ã€æœ€å°å…ƒç´ "></a>æœ€å¤§ã€æœ€å°å…ƒç´ </h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204525060.png" alt="image-20240507204525060"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204533274.png" alt="image-20240507204533274"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204537722.png" alt="image-20240507204537722"></p><h3 id="æå¤§ã€æå°å…ƒç´ "><a href="#æå¤§ã€æå°å…ƒç´ " class="headerlink" title="æå¤§ã€æå°å…ƒç´ "></a>æå¤§ã€æå°å…ƒç´ </h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204550057.png" alt="image-20240507204550057"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204603997.png" alt="image-20240507204603997"></p><h3 id="ä¸Šç•Œä¸ä¸‹ç•Œ"><a href="#ä¸Šç•Œä¸ä¸‹ç•Œ" class="headerlink" title="ä¸Šç•Œä¸ä¸‹ç•Œ"></a>ä¸Šç•Œä¸ä¸‹ç•Œ</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204612835.png" alt="image-20240507204612835"><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204622540.png" alt="image-20240507204622540"></p><h3 id="ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ"><a href="#ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ" class="headerlink" title="ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ"></a>ä¸Šç¡®ç•Œä¸ä¸‹ç¡®ç•Œ</h3><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204628809.png" alt="image-20240507204628809"></p><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204635114.png" alt="image-20240507204635114"></p><h2 id="æ€»ç»“é¢˜"><a href="#æ€»ç»“é¢˜" class="headerlink" title="æ€»ç»“é¢˜"></a>æ€»ç»“é¢˜</h2><p><img src="/2024/05/07/%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0-%E7%A6%BB%E6%95%A3-%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E5%A4%8D%E4%B9%A0-%E5%85%B3%E7%B3%BB/image-20240507204714411.png" alt="image-20240507204714411"></p>]]></content>
      
      
      <categories>
          
          <category> å¤ä¹ ç¬”è®° </category>
          
          <category> ç¦»æ•£æ•°å­¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¤ä¹ ç¬”è®° </tag>
            
            <tag> ç¦»æ•£æ•°å­¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(ä¸‰)-RISCV-Assembly</title>
      <link href="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/"/>
      <url>/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>RISC-Væ˜¯åŸºäºRISCç²¾ç®€æŒ‡ä»¤é›†æ¶æ„å¼€å‘çš„ä¸€ä¸ªå¼€æ”¾å¼æŒ‡ä»¤é›†æ¶æ„ï¼Œå®ƒæ˜¯ç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡çš„è®¡ç®—æœºç§‘å­¦æ•™æˆKrste Asanovicï¼ˆå…‹é‡Œæ–¯è’‚å®‰Â·é˜¿è¨è¯ºç»´å¥‡ï¼‰é¢†å¯¼çš„å›¢é˜Ÿå¼€å‘ï¼ŒRISC-Væ˜¯å¼€æ”¾çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒæ¥å¼€å‘å¤„ç†å™¨èŠ¯ç‰‡å’Œå…¶ä»–ç¡¬ä»¶ï¼Œè€Œæ— éœ€æ”¯ä»˜ä»»ä½•è®¸å¯æˆ–ä½¿ç”¨è´¹ç”¨ã€‚RISC-Vçš„è®¾è®¡ç®€å•ï¼Œæ˜“äºæ‰©å±•å’Œè‡ªå®šä¹‰ï¼Œå¯ä»¥åœ¨å„ç§åº”ç”¨åœºæ™¯å’Œå¸‚åœºä¸­ä½¿ç”¨ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯æŒ‡ä»¤é›†æ¶æ„ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æŒ‡ä»¤é›†æ¶æ„ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æŒ‡ä»¤é›†æ¶æ„ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æŒ‡ä»¤é›†æ¶æ„ï¼Ÿ</h1><p>æŒ‡ä»¤é›†æ¶æ„ï¼ˆInstruction Set Architectureï¼Œç®€ç§°ISAï¼‰æ˜¯è®¡ç®—æœºç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯è®¡ç®—æœºä¸­å¤„ç†å™¨çš„æŒ‡ä»¤é›†å’Œå¤„ç†å™¨çš„å†…éƒ¨ç»“æ„ï¼Œå³å¤„ç†å™¨æ˜¯å¦‚ä½•æ‰§è¡ŒæŒ‡ä»¤çš„ã€‚</p><p>ISAè§„å®šäº†ä¸€å¥—<strong>æŒ‡ä»¤é›†</strong>ï¼ŒåŒ…æ‹¬æŒ‡ä»¤çš„<strong>ç§ç±»</strong>ã€æŒ‡ä»¤çš„<strong>æ ¼å¼</strong>ã€æŒ‡ä»¤çš„æ“ä½œæ•°ã€æŒ‡ä»¤çš„<strong>æ‰§è¡Œæ–¹å¼</strong>ç­‰ã€‚ISAä¹Ÿè§„å®šäº†å¤„ç†å™¨çš„å†…éƒ¨ç»“æ„ï¼ŒåŒ…æ‹¬å¤„ç†å™¨çš„<strong>å¯„å­˜å™¨</strong>ã€æŒ‡ä»¤æµæ°´çº¿ã€å†…å­˜ç®¡ç†å•å…ƒç­‰ã€‚</p><p>ä¸åŒçš„ISAæœ‰ä¸åŒçš„æŒ‡ä»¤é›†å’Œå†…éƒ¨ç»“æ„è®¾è®¡ï¼Œå› æ­¤å¤„ç†å™¨çš„è®¡ç®—èƒ½åŠ›å’Œæ€§èƒ½ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚å¸¸è§çš„ISAåŒ…æ‹¬<code>ARMã€x86ã€MIPSã€PowerPCã€RISC-V</code>ç­‰ã€‚ISAçš„é€‰æ‹©å¯¹è®¡ç®—æœºç³»ç»Ÿçš„æ€§èƒ½ã€åŠŸè€—ã€è½¯ä»¶å…¼å®¹æ€§ã€åº”ç”¨åœºæ™¯ç­‰éƒ½æœ‰å¾ˆå¤§çš„å½±å“ã€‚</p><p>ç®€å•ç‚¹æ¯”å–»å¯ä»¥æŠŠæŒ‡ä»¤é›†æ¶æ„ç†è§£ä¸º<strong>å›¾çº¸</strong>ï¼Œå¤„ç†å™¨å°±æ˜¯<strong>æˆ¿å­</strong>ã€‚</p><p>RISCå’ŒRISC-Vçš„åŒºåˆ«<br>RISCå…¨ç§°<code>Reduced Instruction Set Computer</code>ï¼Œå³ç²¾ç®€æŒ‡ä»¤è®¡ç®—æœºï¼Œå®ƒæ˜¯æŒ‡ä»¤é›†æ¶æ„ï¼Œå®ƒçš„ç†å¿µåœ¨äºæ—¨åœ¨é€šè¿‡å‡å°‘æŒ‡ä»¤é›†çš„æ•°é‡å’Œå¤æ‚åº¦ï¼Œæé«˜è®¡ç®—æœºçš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</p><p>RISCæœ€åˆç”±åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡<code>David Patterson</code>å’Œ<code>John Hennessy</code>åœ¨1980å¹´ä»£æå‡ºï¼Œå¹¶äº1984å¹´åˆè‘—äº†ä¸€æœ¬åä¸ºâ€œComputer Architecture: A Quantitative Approachâ€ï¼ˆä¸­æ–‡è¯‘åä¸ºã€Šè®¡ç®—æœºä½“ç³»ç»“æ„ï¼šé‡åŒ–ç ”ç©¶æ–¹æ³•ã€‹ï¼‰çš„ç»å…¸æ•™æï¼Œè¯¥ä¹¦è¯¦ç»†ä»‹ç»äº†RISCæ¶æ„å’Œé‡åŒ–åˆ†ææ–¹æ³•ï¼Œæˆä¸ºå½“æ—¶è®¡ç®—æœºä½“ç³»ç»“æ„é¢†åŸŸçš„é‡è¦å‚è€ƒä¹¦ã€‚</p><p>RISC-Væ˜¯ç”±Krste Asanovicæ•™æˆé¢†å¯¼å…¶å›¢é˜ŸåŸºäºRISCç²¾ç®€æŒ‡ä»¤é›†æ¶æ„å¼€å‘çš„ä¸€æ¬¾<strong>å¼€æºæŒ‡ä»¤é›†æ¶æ„</strong>ï¼ŒRISC-Vå…·æœ‰æ›´å¥½çš„çµæ´»æ€§ä»¥åŠæ‰©å±•æ€§ï¼ŒåŒæ—¶å®ƒæ¯”RISCæ›´åŠ ç®€å•ä¾¿äºå®ƒäººäºŒæ¬¡å¼€å‘å’Œæ‰©å±•ï¼Œå¹¶ä¸”å®ƒä¸éœ€è¦ä»»ä½•æˆæƒè´¹ï¼Œå¯ä»¥åº”ç”¨äºå•†ä¸šåœºæ™¯å› ä¸ºå®ƒéµå¾ªBSDå¼€æºåè®®ï¼Œå¯ä»¥æŠŠRISC-Vç†è§£ä¸ºRISCçš„æ‰©å±•ç‰ˆã€‚</p><h1 id="ä¼Ÿå¤§çš„æƒ³æ³•"><a href="#ä¼Ÿå¤§çš„æƒ³æ³•" class="headerlink" title="ä¼Ÿå¤§çš„æƒ³æ³•"></a>ä¼Ÿå¤§çš„æƒ³æ³•</h1><h2 id="æŠ½è±¡"><a href="#æŠ½è±¡" class="headerlink" title="æŠ½è±¡"></a>æŠ½è±¡</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423164306259.png" alt="image-20240423164306259"></p><h2 id="å¯„å­˜å™¨åœ¨å¤„ç†å™¨å†…éƒ¨"><a href="#å¯„å­˜å™¨åœ¨å¤„ç†å™¨å†…éƒ¨" class="headerlink" title="å¯„å­˜å™¨åœ¨å¤„ç†å™¨å†…éƒ¨"></a>å¯„å­˜å™¨åœ¨å¤„ç†å™¨å†…éƒ¨</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423165043829.png" alt="image-20240423165043829"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423165208494.png" alt="image-20240423165208494"></p><p>##<img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504174707526.png" alt="image-20240504174707526"></p><p>Principle of Locality &#x2F; Memory Hierarchy</p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423165235223.png" alt="image-20240423165235223"></p><h1 id="å¯„å­˜å™¨å’Œå­˜å‚¨å™¨çš„é€Ÿåº¦å¯¹æ¯”"><a href="#å¯„å­˜å™¨å’Œå­˜å‚¨å™¨çš„é€Ÿåº¦å¯¹æ¯”" class="headerlink" title="å¯„å­˜å™¨å’Œå­˜å‚¨å™¨çš„é€Ÿåº¦å¯¹æ¯”"></a>å¯„å­˜å™¨å’Œå­˜å‚¨å™¨çš„é€Ÿåº¦å¯¹æ¯”</h1><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423165330636.png" alt="image-20240423165330636"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423165339134.png" alt="image-20240423165339134"></p><h1 id="32ä¸ªå¯„å­˜å™¨çš„ä»‹ç»"><a href="#32ä¸ªå¯„å­˜å™¨çš„ä»‹ç»" class="headerlink" title="32ä¸ªå¯„å­˜å™¨çš„ä»‹ç»"></a>32ä¸ªå¯„å­˜å™¨çš„ä»‹ç»</h1><ol><li><strong>x0 - x31ï¼ˆé€šç”¨å¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>è¿™äº›å¯„å­˜å™¨æ˜¯é€šç”¨çš„ï¼Œå¯ç”¨äºå„ç§ç›®çš„ã€‚</li><li>x0 é€šå¸¸ç”¨ä½œé›¶å¯„å­˜å™¨ï¼Œä»»ä½•å†™å…¥å®ƒçš„å€¼éƒ½ä¼šè¢«å¿½ç•¥ã€‚</li><li>å…¶ä½™çš„é€šç”¨å¯„å­˜å™¨å¯ä»¥ç”¨äºå­˜å‚¨æ•°æ®ã€åœ°å€ã€ä¸´æ—¶å€¼ç­‰ã€‚</li></ul></li><li><strong>pcï¼ˆç¨‹åºè®¡æ•°å™¨ï¼‰</strong>ï¼š<ul><li>ç”¨äºå­˜å‚¨å½“å‰æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚</li><li>åœ¨æ¯æ¬¡æŒ‡ä»¤æ‰§è¡Œåï¼ŒPCä¼šè‡ªåŠ¨å¢åŠ ï¼Œä»¥æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚</li></ul></li><li><strong>raï¼ˆè¿”å›åœ°å€å¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>ç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨è¿”å›æ—¶çš„åœ°å€ã€‚</li><li>åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…å°†è¿”å›åœ°å€å­˜å‚¨åœ¨æ­¤å¯„å­˜å™¨ä¸­ã€‚</li></ul></li><li><strong>spï¼ˆæ ˆæŒ‡é’ˆå¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>æŒ‡å‘å½“å‰æ ˆé¡¶çš„åœ°å€ã€‚</li><li>ç”¨äºç®¡ç†å‡½æ•°è°ƒç”¨å’Œå±€éƒ¨å˜é‡çš„å†…å­˜åˆ†é…ã€‚</li></ul></li><li><strong>gpï¼ˆå…¨å±€æŒ‡é’ˆå¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>æŒ‡å‘å…¨å±€æ•°æ®åŒºåŸŸçš„èµ·å§‹åœ°å€ã€‚</li><li>ç”¨äºè®¿é—®å…¨å±€å˜é‡å’Œé™æ€æ•°æ®ã€‚</li></ul></li><li><strong>tpï¼ˆçº¿ç¨‹æŒ‡é’ˆå¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>æŒ‡å‘çº¿ç¨‹æ§åˆ¶å—ï¼ˆTCBï¼‰çš„åœ°å€ã€‚</li><li>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ç”¨äºç®¡ç†çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li></ul></li><li><strong>t0 - t6ï¼ˆä¸´æ—¶å¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>ç”¨äºå­˜å‚¨ä¸´æ—¶æ•°æ®ã€‚</li><li>å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨å’Œæ•°æ®æ“ä½œä¸­ä½¿ç”¨ã€‚</li></ul></li><li><strong>s0 - s11ï¼ˆä¿å­˜å¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>ç”¨äºä¿å­˜å‡½æ•°è°ƒç”¨æ—¶éœ€è¦ä¿æŒçš„å€¼ã€‚</li><li>åœ¨å‡½æ•°è°ƒç”¨æœŸé—´ï¼Œè¿™äº›å¯„å­˜å™¨çš„å€¼ä¼šè¢«ä¿ç•™ï¼Œå¹¶åœ¨å‡½æ•°è¿”å›æ—¶æ¢å¤ã€‚</li></ul></li><li><strong>a0 - a7ï¼ˆå‚æ•°å¯„å­˜å™¨ï¼‰</strong>ï¼š<ul><li>ç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨çš„å‚æ•°ã€‚</li><li>è°ƒç”¨è€…å°†å‚æ•°ä¼ é€’ç»™è¢«è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°†å®ƒä»¬å­˜å‚¨åœ¨è¿™äº›å¯„å­˜å™¨ä¸­ã€‚</li></ul></li></ol><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504182001538.png" alt="image-20240504182001538"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504184301237.png" alt="image-20240504184301237"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504182827385.png" alt="image-20240504182827385"></p><h1 id="æŒ‡ä»¤é›†"><a href="#æŒ‡ä»¤é›†" class="headerlink" title="æŒ‡ä»¤é›†"></a>æŒ‡ä»¤é›†</h1><h2 id="Addition-subtraction"><a href="#Addition-subtraction" class="headerlink" title="Addition&#x2F;subtraction"></a>Addition&#x2F;subtraction</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">add rd, rs1, rs2</span><br><span class="line">R[rd] = R[rs1] + R[rs2]</span><br><span class="line">sub rd, rs1, rs2</span><br><span class="line">R[rd] = R[rs1] - R[rs2]</span><br></pre></td></tr></table></figure><h2 id="Add-immediate"><a href="#Add-immediate" class="headerlink" title="Add immediate"></a>Add immediate</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">addi rd, rs1, imm</span><br><span class="line">R[rd] = R[rs1] + imm</span><br></pre></td></tr></table></figure><h2 id="Load-from-Memory-to-Register"><a href="#Load-from-Memory-to-Register" class="headerlink" title="Load from Memory to Register"></a><u>Load from</u> Memory to Register</h2><p><strong>Load Word(lw)</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> A[<span class="number">100</span>];</span><br><span class="line">g = h + A[<span class="number">3</span>];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lw x10, 12(x15) # Reg x10 gets A[3]</span><br><span class="line">add x11,x12,x10 # g = h + A[3</span><br></pre></td></tr></table></figure><p><strong>Note:</strong> </p><ul><li><p>x15 â€“ base register (<strong>pointer</strong> to A[0]) </p></li><li><p>12 â€“ <strong>offset in bytes</strong> </p></li><li><p><strong>Offset</strong> must be a constant known at assembly time</p></li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423170306183.png" alt="image-20240423170306183"></p><h2 id="Store-from-Register-to-Memory"><a href="#Store-from-Register-to-Memory" class="headerlink" title="Store from Register to Memory"></a><u>Store</u> from Register <u>to</u> Memory</h2><p><strong>Store Word(sw)</strong></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> A[<span class="number">100</span>];</span><br><span class="line">A[<span class="number">10</span>] = h + A[<span class="number">3</span>];</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lw x10,12(x15) # Temp reg x10 gets A[3]</span><br><span class="line">add x10,x12,x10 # Temp reg x10 gets h + A[3]</span><br><span class="line">sw x10,40(x15) # A[10] = h + A[3]</span><br></pre></td></tr></table></figure><p><strong>Note:</strong> </p><ul><li><p>x15 â€“ base register (<strong>pointer</strong>) </p></li><li><p>12,40 â€“ offsets in <strong>bytes</strong></p></li><li><p><code>x15+12</code> and<code> x15+40</code> must be <strong>multiples</strong> of 4</p></li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423170519415.png" alt="image-20240423170519415"></p><h2 id="Loading-and-Storing-Bytes"><a href="#Loading-and-Storing-Bytes" class="headerlink" title="Loading and Storing Bytes"></a>Loading and Storing Bytes</h2><ul><li><p>load byte: <code>lb</code></p></li><li><p>store byte: <code>sb</code></p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lb x10, 3(x11)</span><br></pre></td></tr></table></figure><blockquote><p>contents of memory location with address &#x3D; sum of â€œ3â€  + contents of register x11 is copied to the low byte  position of register x10</p></blockquote><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423170835108.png" alt="image-20240423170835108"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423170848646.png" alt="image-20240423170848646"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423171000144.png" alt="image-20240423171000144"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504180601873.png" alt="image-20240504180601873"></p><blockquote><ol><li><strong>lw</strong>ï¼šè¿™æ˜¯â€Load Wordâ€çš„ç¼©å†™ã€‚å®ƒä»å†…å­˜ä¸­åŠ è½½ä¸€ä¸ª32ä½çš„å­—ï¼ˆwordï¼‰åˆ°å¯„å­˜å™¨ä¸­ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒå°†å†…å­˜ä¸­æŒ‡å®šåœ°å€çš„32ä½æ•°æ®åŠ è½½åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚</li><li><strong>lb</strong>ï¼šè¿™æ˜¯â€Load Byteâ€çš„ç¼©å†™ã€‚å®ƒä»å†…å­˜ä¸­åŠ è½½ä¸€ä¸ª8ä½çš„å­—èŠ‚ï¼ˆbyteï¼‰åˆ°å¯„å­˜å™¨ä¸­ã€‚ä¸lwä¸åŒï¼Œlbå°†ä¼šæŠŠåŠ è½½çš„å­—èŠ‚è¿›è¡Œç¬¦å·æ‰©å±•ï¼Œå³æœ€é«˜ä½çš„å€¼ä¼šè¢«å¤åˆ¶åˆ°ç›®æ ‡å¯„å­˜å™¨çš„æ‰€æœ‰é«˜ä½ä¸Šï¼Œä»¥ä¿æŒå­—èŠ‚çš„ç¬¦å·æ€§ã€‚</li></ol><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœåœ¨åœ°å€0x100å¤„çš„å†…å­˜ä¸­å­˜å‚¨ç€0xFF123456ï¼Œå½“ä½ ç”¨lwæŒ‡ä»¤åŠ è½½0x100åœ°å€çš„æ•°æ®æ—¶ï¼Œä½ ä¼šå¾—åˆ°0xFF123456ï¼›ä½†æ˜¯å½“ä½ ç”¨lbæŒ‡ä»¤åŠ è½½åŒæ ·çš„åœ°å€æ—¶ï¼Œä½ ä¼šå¾—åˆ°0xFFFFFF56ï¼Œå› ä¸ºæœ€é«˜ä½æ˜¯1ï¼Œè¿™ä¸ªå­—èŠ‚æ˜¯è´Ÿæ•°ã€‚</p></blockquote><h2 id="Branchesç±»å‹"><a href="#Branchesç±»å‹" class="headerlink" title="Branchesç±»å‹"></a>Branchesç±»å‹</h2><p><u>Branch â€“ change of control flow</u></p><h3 id="Conditional-Branch-â€“-change-control-flow-depending-on-outcome-of-comparison"><a href="#Conditional-Branch-â€“-change-control-flow-depending-on-outcome-of-comparison" class="headerlink" title="Conditional Branch â€“ change control flow  depending on outcome of comparison"></a>Conditional Branch â€“ change control flow  depending on outcome of comparison</h3><ul><li><p><strong>beq: branch if equal</strong></p></li><li><p><strong>bne: branch if not equal</strong></p></li><li><p><strong>blt: branch if less than</strong></p></li><li><p><strong>bge:  branch if greater  than or equal</strong></p></li><li><p><strong>bltu: unsigned versions of blt</strong></p></li><li><p><strong>bgeu: unsigned versions of bge</strong></p></li></ul><h3 id="Unconditional-Branch-â€“-always-branch"><a href="#Unconditional-Branch-â€“-always-branch" class="headerlink" title="Unconditional Branch â€“ always branch"></a>Unconditional Branch â€“ always branch</h3><ul><li><strong>j: jump</strong><ul><li>j label</li></ul></li></ul><p>No <code>bgt</code> or <code>ble</code>!</p><h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">beq reg1, reg2, L1</span><br><span class="line"></span><br><span class="line"># go to statement labeled L1 </span><br><span class="line"># if (value in reg1) == (value in reg2)</span><br><span class="line"># â€¦.otherwise, go to next statement</span><br></pre></td></tr></table></figure><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423171733270.png" alt="image-20240423171733270"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423171742425.png" alt="image-20240423171742425"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423171750240.png" alt="image-20240423171750240"></p><h2 id="Loops"><a href="#Loops" class="headerlink" title="Loops"></a>Loops</h2><ul><li>C<ul><li>while</li><li>doâ€¦while</li><li>for</li></ul></li><li>æ¯ä¸€ä¸ªéƒ½å¯ä»¥è¢«é‡å†™æˆå¦å¤–ä¸¤ä¸ªä¹‹ä¸€ï¼Œå› æ­¤ç›¸åŒçš„åˆ†æ”¯æ–¹æ³•ä¹Ÿå¯ä»¥åº”ç”¨åˆ°è¿™äº›å¾ªç¯ä¸­ã€‚</li><li>å…³é”®æ¦‚å¿µï¼šè™½ç„¶åœ¨ RISC-V ä¸­æœ‰å¤šç§ç¼–å†™å¾ªç¯çš„æ–¹å¼ï¼Œä½†å†³ç­–çš„å…³é”®åœ¨äºæ¡ä»¶åˆ†æ”¯ã€‚</li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423230114369.png" alt="image-20240423230114369"></p><h2 id="Logical-Instructions"><a href="#Logical-Instructions" class="headerlink" title="Logical Instructions"></a>Logical Instructions</h2><ul><li><p>æœ‰åŠ©äºåœ¨ä¸€ä¸ªå­—å†…æ“ä½œä½å­—æ®µ</p><ul><li>ä¾‹å¦‚ï¼Œä¸€ä¸ªå­—å†…çš„å­—ç¬¦ï¼ˆ8ä½ï¼‰</li></ul></li><li><p>å°†ä½æ‰“åŒ…&#x2F;è§£åŒ…æˆå­—çš„æ“ä½œ</p></li></ul><blockquote><p>å¯¹äºä¸€ä¸ªå­—ï¼ˆ8ä¸ªä½ï¼Œä¾‹å¦‚äºŒè¿›åˆ¶æ•°å­—æˆ–å­—ç¬¦ï¼‰ï¼Œåœ¨å…¶ä¸­æ“ä½œä½å­—æ®µï¼ˆä¾‹å¦‚å•ç‹¬çš„å­—ç¬¦ï¼‰æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚è¿™å°±åƒåœ¨ä¸€ä¸ªå­—æ¯é‡Œé¢å¯»æ‰¾ã€æ·»åŠ æˆ–è€…ç§»é™¤ç‰¹å®šçš„ä½ä¸€æ ·ã€‚è¿™äº›æ“ä½œå¯èƒ½åŒ…æ‹¬å°†å¤šä¸ªä½æ‰“åŒ…ï¼ˆåˆå¹¶ï¼‰æˆä¸€ä¸ªå­—ï¼Œæˆ–è€…å°†ä¸€ä¸ªå­—è§£åŒ…ï¼ˆæ‹†åˆ†ï¼‰æˆå¤šä¸ªä½ã€‚è¿™äº›æ“ä½œé€šå¸¸è¢«ç§°ä¸ºé€»è¾‘æ“ä½œã€‚</p></blockquote><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423230525052.png" alt="image-20240423230525052"></p><h3 id="and-andi"><a href="#and-andi" class="headerlink" title="and&#x2F;andi"></a>and&#x2F;andi</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">and x5, x6, x7 # x5 = x6 &amp; x7</span><br><span class="line">andi x5, x6, 3 # x5 = x6 &amp; 3</span><br></pre></td></tr></table></figure><ul><li><code>andi</code> with <code>0000 00FF</code><del>hex</del> isolates the <strong>least</strong> significant  byte</li><li><code>andi </code>with <code>FF00 0000</code><del>hex</del> isolates the <strong>most</strong> significant  byte</li></ul><h3 id="No-Not-in-RISC-V"><a href="#No-Not-in-RISC-V" class="headerlink" title="No Not in RISC-V"></a>No Not in RISC-V</h3><p>æ²¡æœ‰é€»è¾‘éè¿ç®—åœ¨RISC-Vä¸­</p><ul><li>ä½¿ç”¨xor 1111 1111<del>two</del></li></ul><h3 id="Logical-Shifting"><a href="#Logical-Shifting" class="headerlink" title="Logical Shifting"></a>Logical Shifting</h3><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423231142563.png" alt="image-20240423231142563"></p><h3 id="Arithmetic-Shifting"><a href="#Arithmetic-Shifting" class="headerlink" title="Arithmetic Shifting"></a>Arithmetic Shifting</h3><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240423231149137.png" alt="image-20240423231149137"></p><h1 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h1><h2 id="å‡½æ•°è°ƒç”¨çš„å…­ä¸ªæ­¥éª¤"><a href="#å‡½æ•°è°ƒç”¨çš„å…­ä¸ªæ­¥éª¤" class="headerlink" title="å‡½æ•°è°ƒç”¨çš„å…­ä¸ªæ­¥éª¤"></a>å‡½æ•°è°ƒç”¨çš„å…­ä¸ªæ­¥éª¤</h2><ol><li>å°†<strong>å‚æ•°</strong>æ”¾åœ¨å‡½æ•°èƒ½å¤Ÿè®¿é—®çš„ä½ç½®</li><li>è½¬äº¤æƒåˆ©ç»™å‡½æ•°</li><li>è¯·æ±‚å‡½æ•°æ‰€éœ€è¦çš„å†…å­˜èµ„æº</li><li>æ‰§è¡Œå‡½æ•°é¢„æœŸçš„ä»»åŠ¡</li><li>å°†<strong>è¿”å›å€¼</strong>æ”¾åœ¨è°ƒç”¨è€…å¯ä»¥è®¿é—®çš„ä½ç½®å¹¶æ¢å¤ä½ ç”¨è¿‡çš„å¯„å­˜å™¨ï¼›é‡Šæ”¾å†…å­˜ç©ºé—´</li><li>å°†æ§åˆ¶è¿”å›è°ƒç”¨è€…ï¼Œå› ä¸ºä¸€ä¸ªå‡½æ•°å¯ä»¥è¢«è®¸å¤šé¡¹ç›®ä¸­çš„ç¨‹åºç‚¹è°ƒç”¨</li></ol><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504182714948.png" alt="image-20240504182714948"></p><h2 id="å‡½æ•°çš„æŒ‡ä»¤æ”¯æŒ"><a href="#å‡½æ•°çš„æŒ‡ä»¤æ”¯æŒ" class="headerlink" title="å‡½æ•°çš„æŒ‡ä»¤æ”¯æŒ"></a>å‡½æ•°çš„æŒ‡ä»¤æ”¯æŒ</h2><p>åœ¨RISC-Vä¸­ï¼Œæ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯4bytesï¼Œå¹¶ä¸”ä»–ä»¬åƒæ•°æ®ä¸€æ ·å­˜å‚¨åœ¨å†…å­˜ä¸­</p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504183024465.png" alt="image-20240504183024465"></p><ul><li>é—®é¢˜: ä¸ºä»€ä¹ˆè¿™é‡Œç”¨<code>jr</code>è€Œä¸æ˜¯<code>j</code>?</li><li>ç­”æ¡ˆ: sumå¯èƒ½åœ¨è®¸å¤šåœ°æ–¹è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¯èƒ½æ€»æ˜¯å›åˆ°å›ºå®šçš„ä½ç½®ã€‚sumçš„è°ƒç”¨è¿‡ç¨‹å¿…é¡»èƒ½å¤Ÿè¯´â€å›åˆ°è¿™é‡Œâ€ã€‚</li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504183415048.png" alt="image-20240504183415048"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504183500943.png" alt="image-20240504183500943"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504183558222.png" alt="image-20240504183558222"></p><h3 id="jal-Jump-and-Link"><a href="#jal-Jump-and-Link" class="headerlink" title="jal (Jump and Link)"></a>jal (Jump and Link)</h3><ul><li><p><strong>æŒ‡ä»¤æ ¼å¼</strong>ï¼š<code>jal rd, offset</code></p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šè·³è½¬åˆ°æŒ‡å®šåœ°å€ï¼Œå¹¶å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å­˜å‚¨åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ï¼ˆé€šå¸¸ç”¨äºå­˜å‚¨è¿”å›åœ°å€ï¼‰ã€‚</p></li><li><p>æ“ä½œ</p><p>ï¼š</p><ul><li>å°†å½“å‰æŒ‡ä»¤çš„åœ°å€ï¼ˆPCå¯„å­˜å™¨çš„å€¼ï¼‰åŠ ä¸Šåç§»é‡ä½œä¸ºç›®æ ‡åœ°å€ã€‚</li><li>å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆPC+4ï¼‰å­˜å‚¨åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š<code>jal x1, 100</code> è¡¨ç¤ºè·³è½¬åˆ°åœ°å€ä¸º PC+100 å¤„ï¼Œå¹¶å°† PC+4 å­˜å‚¨åˆ°å¯„å­˜å™¨ x1 ä¸­ã€‚</p></li></ul><h3 id="jalr-Jump-and-Link-Register"><a href="#jalr-Jump-and-Link-Register" class="headerlink" title="jalr (Jump and Link Register)"></a>jalr (Jump and Link Register)</h3><ul><li><p><strong>æŒ‡ä»¤æ ¼å¼</strong>ï¼š<code>jalr rd, rs1, offset</code></p></li><li><p><strong>åŠŸèƒ½</strong>ï¼šè·³è½¬åˆ°æŒ‡å®šåœ°å€ï¼ˆé€šè¿‡å¯„å­˜å™¨è®¡ç®—å¾—å‡ºï¼‰ï¼Œå¹¶å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€å­˜å‚¨åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ï¼ˆé€šå¸¸ç”¨äºå­˜å‚¨è¿”å›åœ°å€ï¼‰ã€‚</p></li><li><p>æ“ä½œ</p><p>ï¼š</p><ul><li>å°†å½“å‰æŒ‡ä»¤çš„åœ°å€ï¼ˆPCå¯„å­˜å™¨çš„å€¼ï¼‰åŠ ä¸Šåç§»é‡ï¼Œå¹¶å°†ç»“æœä¸ rs1 å¯„å­˜å™¨çš„å€¼ç›¸åŠ ä½œä¸ºç›®æ ‡åœ°å€ã€‚</li><li>å°†ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€ï¼ˆPC+4ï¼‰å­˜å‚¨åˆ°ç›®æ ‡å¯„å­˜å™¨ä¸­ã€‚</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š<code>jalr x1, x2, 0</code> è¡¨ç¤ºè·³è½¬åˆ°åœ°å€ä¸º x2 çš„å€¼åŠ ä¸Šåç§»é‡ 0 æ‰€æŒ‡ç¤ºçš„åœ°å€ï¼Œå¹¶å°† PC+4 å­˜å‚¨åˆ°å¯„å­˜å™¨ x1 ä¸­ã€‚</p></li></ul><h3 id="ç”¨æ³•æ¯”è¾ƒ"><a href="#ç”¨æ³•æ¯”è¾ƒ" class="headerlink" title="ç”¨æ³•æ¯”è¾ƒ"></a>ç”¨æ³•æ¯”è¾ƒ</h3><ul><li><code>jal</code> ç›´æ¥è·³è½¬åˆ°æŒ‡å®šåœ°å€ï¼Œé€‚ç”¨äºè·³è½¬åˆ°ç›¸å¯¹åœ°å€å·²çŸ¥çš„æƒ…å†µã€‚</li><li><code>jalr</code> å¯ä»¥é€šè¿‡å¯„å­˜å™¨è®¡ç®—è·³è½¬åœ°å€ï¼Œé€‚ç”¨äºè·³è½¬åˆ°ç›¸å¯¹åœ°å€ä¸ç¡®å®šä½†é€šè¿‡å¯„å­˜å™¨å­˜å‚¨çš„æƒ…å†µã€‚</li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å‡†ç¡®æ¥è¯´ï¼Œåªæœ‰ä¸¤ä¸ªæŒ‡ä»¤</p><ul><li><code>jal rd, Label</code> - jump-and-link</li><li><code>jalr rd, rs, imm </code>- jump -and-link register</li></ul><p><code>j</code>, <code>jr</code> å’Œ <code>ret</code> æ˜¯ä¼ªæŒ‡ä»¤!</p><ul><li><code>j: jal x0, Label</code></li></ul><h2 id="ä¾‹å­-1"><a href="#ä¾‹å­-1" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504184434837.png" alt="image-20240504184434837"></p><h2 id="ä¹‹å‰çš„å¯„å­˜å™¨å€¼åœ¨å‡½æ•°è°ƒç”¨ä¹‹åä¿å­˜åœ¨å“ªé‡Œä»¥ä¾¿æ¢å¤å®ƒä»¬ï¼Ÿ"><a href="#ä¹‹å‰çš„å¯„å­˜å™¨å€¼åœ¨å‡½æ•°è°ƒç”¨ä¹‹åä¿å­˜åœ¨å“ªé‡Œä»¥ä¾¿æ¢å¤å®ƒä»¬ï¼Ÿ" class="headerlink" title="ä¹‹å‰çš„å¯„å­˜å™¨å€¼åœ¨å‡½æ•°è°ƒç”¨ä¹‹åä¿å­˜åœ¨å“ªé‡Œä»¥ä¾¿æ¢å¤å®ƒä»¬ï¼Ÿ"></a>ä¹‹å‰çš„å¯„å­˜å™¨å€¼åœ¨å‡½æ•°è°ƒç”¨ä¹‹åä¿å­˜åœ¨å“ªé‡Œä»¥ä¾¿æ¢å¤å®ƒä»¬ï¼Ÿ</h2><ul><li>åœ¨å‡½æ•°è°ƒç”¨å‰éœ€è¦ä¸€ä¸ªåœ°æ–¹å»ä¿å­˜æ—§çš„å€¼ï¼Œä»¥ä¾¿åœ¨è¿”å›æ—¶æ¢å¤å®ƒä»¬ï¼Œç„¶ååˆ é™¤ã€‚</li><li>è§£å†³æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨<strong>æ ˆ</strong>-last-in-first-out (LIFO) queue<ul><li>Push: placing data onto stack</li><li>Pop: removing data from stack</li></ul></li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185029541.png" alt="image-20240504185029541"></p><h1 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h1><ul><li><p>æ ˆå¸§åŒ…æ‹¬ï¼š</p><ul><li><p>è¿”å›â€œæŒ‡ä»¤â€åœ°å€</p></li><li><p>å‚æ•°ï¼ˆå‚æ•°ï¼‰</p></li><li><p>å…¶ä»–å±€éƒ¨å˜é‡çš„ç©ºé—´</p></li></ul></li><li><p>æ ˆå¸§æ˜¯å†…å­˜ä¸­è¿ç»­çš„å—ï¼›æ ˆæŒ‡é’ˆå‘Šè¯‰æˆ‘ä»¬æ ˆå¸§çš„<strong>åº•éƒ¨</strong>åœ¨å“ªé‡Œã€‚ </p></li><li><p>å½“è¿‡ç¨‹ç»“æŸæ—¶ï¼Œæ ˆå¸§è¢«ä»æ ˆä¸­ç§»é™¤ï¼›ä¸ºæœªæ¥çš„æ ˆå¸§é‡Šæ”¾å†…å­˜ã€‚</p><blockquote><p>spä»å†…å­˜é«˜åˆ°ä½å¢é•¿</p></blockquote></li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185222086.png" alt="image-20240504185222086"></p><h2 id="ä¾‹å­-2"><a href="#ä¾‹å­-2" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185336899.png" alt="image-20240504185336899"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185346548.png" alt="image-20240504185346548"></p><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185436994.png" alt="image-20240504185436994"></p><h1 id="åµŒå¥—è°ƒç”¨å’Œå¯„å­˜å™¨çº¦å®š"><a href="#åµŒå¥—è°ƒç”¨å’Œå¯„å­˜å™¨çº¦å®š" class="headerlink" title="åµŒå¥—è°ƒç”¨å’Œå¯„å­˜å™¨çº¦å®š"></a>åµŒå¥—è°ƒç”¨å’Œå¯„å­˜å™¨çº¦å®š</h1><h2 id="åµŒå¥—è°ƒç”¨"><a href="#åµŒå¥—è°ƒç”¨" class="headerlink" title="åµŒå¥—è°ƒç”¨"></a>åµŒå¥—è°ƒç”¨</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504185906529.png" alt="image-20240504185906529"></p><ul><li>æœ‰ä¸€ä¸ªå«åš<code>sumSquare</code>çš„å‡½æ•°ï¼Œç°åœ¨<code>sumSquare</code>æ­£åœ¨è°ƒç”¨<code>mult</code>ã€‚</li><li>æ‰€ä»¥åœ¨<code>sumSquare</code>æƒ³è¦è·³å›çš„<code>ra</code>å¯„å­˜å™¨ä¸­æœ‰ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯è¿™ä¸ªå€¼å°†ä¼šè¢«å¯¹<code>mult</code>çš„è°ƒç”¨<strong>è¦†ç›–</strong>ã€‚</li><li><strong>åµŒå¥—è¿‡ç¨‹éœ€è¦åœ¨è°ƒç”¨<code>mult</code>ä¹‹å‰ä¿å­˜<code>sumSquare</code>çš„è¿”å›åœ°å€ - å†æ¬¡ä½¿ç”¨æ ˆã€‚</strong></li></ul><h2 id="å¯„å­˜å™¨çº¦å®š"><a href="#å¯„å­˜å™¨çº¦å®š" class="headerlink" title="å¯„å­˜å™¨çº¦å®š"></a>å¯„å­˜å™¨çº¦å®š</h2><ul><li>Caller: è°ƒç”¨å‡½æ•°</li><li>Callee: è¢«è°ƒç”¨çš„å‡½æ•°</li><li>å½“è¢«è°ƒç”¨å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œè°ƒç”¨è€…éœ€è¦çŸ¥é“å“ªäº›å¯„å­˜å™¨å¯èƒ½å·²ç»æ”¹å˜ï¼Œå“ªäº›æ˜¯ä¿è¯ä¸å˜çš„ã€‚</li><li><strong>å¯„å­˜å™¨çº¦å®š</strong>ï¼šä¸€ç»„è¢«å¹¿æ³›æ¥å—çš„è§„åˆ™ï¼Œè§„å®šäº†åœ¨è¿‡ç¨‹è°ƒç”¨ï¼ˆ<code>jal</code>ï¼‰åå“ªäº›å¯„å­˜å™¨ä¸ä¼šæ”¹å˜ï¼Œå“ªäº›å¯èƒ½ä¼šæ”¹å˜ã€‚</li></ul><p>ä¸ºäº†å‡å°‘å› æº¢å‡ºå’Œæ¢å¤å¯„å­˜å™¨è€Œäº§ç”Ÿçš„æ˜‚è´µçš„åŠ è½½å’Œå­˜å‚¨æ“ä½œï¼ŒRISC-Vå‡½æ•°è°ƒç”¨çº¦å®šå°†å¯„å­˜å™¨åˆ†ä¸ºä¸¤ç±»ï¼š</p><ol><li><p>åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¿ç•™çš„å¯„å­˜å™¨ï¼š</p><ul><li>è°ƒç”¨è€…å¯ä»¥ä¾èµ–äºå…¶å€¼ä¸å˜</li><li>spã€gpã€tpã€â€ä¿å­˜çš„å¯„å­˜å™¨â€ s0-s11ï¼ˆs0ä¹Ÿæ˜¯fpï¼‰</li></ul></li><li><p>åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¸ä¿ç•™çš„å¯„å­˜å™¨ï¼š</p><ul><li><p>è°ƒç”¨è€…ä¸èƒ½ä¾èµ–äºå…¶å€¼ä¸å˜</p></li><li><p>å‚æ•°&#x2F;è¿”å›å¯„å­˜å™¨ a0-a7ã€raã€â€ä¸´æ—¶å¯„å­˜å™¨â€ t0-t6</p></li></ul></li></ol><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504190209798.png" alt="image-20240504190209798"></p><h1 id="Memory-Allocation"><a href="#Memory-Allocation" class="headerlink" title="Memory Allocation"></a>Memory Allocation</h1><h2 id="åœ¨æ ˆä¸­åˆ†é…ç©ºé—´"><a href="#åœ¨æ ˆä¸­åˆ†é…ç©ºé—´" class="headerlink" title="åœ¨æ ˆä¸­åˆ†é…ç©ºé—´"></a>åœ¨æ ˆä¸­åˆ†é…ç©ºé—´</h2><ul><li><p>Cè¯­è¨€æœ‰ä¸¤ç§å­˜å‚¨ç±»åˆ«ï¼šè‡ªåŠ¨çš„å’Œé™æ€çš„ã€‚</p><ul><li><p><strong>è‡ªåŠ¨</strong>å˜é‡æ˜¯å‡½æ•°å±€éƒ¨çš„ï¼Œå¹¶åœ¨å‡½æ•°é€€å‡ºæ—¶è¢«ä¸¢å¼ƒã€‚</p></li><li><p><strong>é™æ€</strong>å˜é‡å­˜åœ¨äºç¨‹åºä»ä¸€ä¸ªè¿‡ç¨‹é€€å‡ºåˆ°å¦ä¸€ä¸ªè¿‡ç¨‹è¿›å…¥çš„è¿‡ç¨‹ä¸­ã€‚</p></li></ul></li><li><p>ä½¿ç”¨æ ˆæ¥å­˜å‚¨ä¸é€‚åˆå¯„å­˜å™¨çš„è‡ªåŠ¨ï¼ˆå±€éƒ¨ï¼‰å˜é‡ã€‚ </p></li><li><p><strong>è¿‡ç¨‹å¸§</strong>æˆ–<strong>æ¿€æ´»è®°å½•</strong>ï¼šæ ˆä¸­çš„ä¸€ä¸ªæ®µï¼ŒåŒ…å«ä¿å­˜çš„å¯„å­˜å™¨å’Œå±€éƒ¨å˜é‡ã€‚</p></li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504191040378.png" alt="image-20240504191040378"></p><h2 id="ä½¿ç”¨æ ˆ"><a href="#ä½¿ç”¨æ ˆ" class="headerlink" title="ä½¿ç”¨æ ˆ"></a>ä½¿ç”¨æ ˆ</h2><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504191206346.png" alt="image-20240504191206346"></p><h2 id="å†…å­˜åˆ†é…Memory-Allocation"><a href="#å†…å­˜åˆ†é…Memory-Allocation" class="headerlink" title="å†…å­˜åˆ†é…Memory Allocation"></a>å†…å­˜åˆ†é…Memory Allocation</h2><p>å½“è¿è¡ŒCç¨‹åºæ—¶ï¼Œæœ‰ä¸‰ä¸ªé‡è¦çš„å†…å­˜åŒºåŸŸè¢«åˆ†é…ï¼š</p><ul><li><strong>é™æ€åŒº</strong>ï¼šä¸€æ¬¡æ€§å£°æ˜çš„å˜é‡ï¼Œç¨‹åºæ‰§è¡Œå®Œæ¯•åæ‰æ¶ˆå¤± - ä¾‹å¦‚ï¼ŒCå…¨å±€å˜é‡</li><li><strong>å †</strong>ï¼šé€šè¿‡mallocåŠ¨æ€å£°æ˜çš„å˜é‡</li><li><strong>æ ˆ</strong>ï¼šåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«è¿‡ç¨‹ä½¿ç”¨çš„ç©ºé—´ï¼›è¿™æ˜¯æˆ‘ä»¬å¯ä»¥ä¿å­˜å¯„å­˜å™¨å€¼çš„åœ°æ–¹</li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504191550643.png" alt="image-20240504191550643"></p><h2 id="Where-is-the-Stack-in-Memory"><a href="#Where-is-the-Stack-in-Memory" class="headerlink" title="Where is the Stack in Memory?"></a>Where is the Stack in Memory?</h2><p>RV32çº¦å®šï¼ˆRV64&#x2F;RV128å…·æœ‰ä¸åŒçš„å†…å­˜å¸ƒå±€ï¼‰</p><ul><li><strong>æ ˆ</strong>ä»é«˜åœ°å€å¼€å§‹å¹¶å‘ä¸‹å¢é•¿<ul><li>åå…­è¿›åˆ¶ï¼šbfff_fff0<del>hex</del></li><li>æ ˆå¿…é¡»å¯¹é½åˆ°16å­—èŠ‚è¾¹ç•Œï¼ˆåœ¨ä¹‹å‰çš„ç¤ºä¾‹ä¸­ä¸æ˜¯è¿™æ ·ï¼‰</li></ul></li><li>RV32ç¨‹åºï¼ˆ<strong>æ–‡æœ¬æ®µ</strong>ï¼‰åœ¨ä½ç«¯<ul><li>0001_0000<del>hex</del></li></ul></li><li><strong>é™æ€æ•°æ®æ®µ</strong>ï¼ˆå¸¸é‡å’Œå…¶ä»–é™æ€å˜é‡ï¼‰åœ¨æ–‡æœ¬æ®µä¸Šæ–¹ï¼Œç”¨äºå­˜æ”¾é™æ€å˜é‡<ul><li>RISC-Vçº¦å®š<strong>å…¨å±€æŒ‡é’ˆï¼ˆgpï¼‰</strong>æŒ‡å‘é™æ€å˜é‡</li><li>RV32 gp &#x3D; 1000_0000<del>hex</del></li></ul></li><li><strong>å †</strong>ä½äºé™æ€æ•°æ®æ®µä¸Šæ–¹ï¼Œç”¨äºå­˜æ”¾å¢é•¿å’Œæ”¶ç¼©çš„æ•°æ®ç»“æ„ï¼›å †å‘é«˜åœ°å€å¢é•¿</li></ul><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504191730738.png" alt="image-20240504191730738"></p><h1 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="/2024/04/23/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RISCV-Assembly/image-20240504191745535.png" alt="image-20240504191745535"></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cé¡¹ç›®ç¬”è®°(äºŒ)-Lab3-RISCV-Assembly</title>
      <link href="/2024/04/23/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3-RISCV-Assembly/"/>
      <url>/2024/04/23/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3-RISCV-Assembly/</url>
      
        <content type="html"><![CDATA[<h1 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise 1"></a>Exercise 1</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">.word 2, 4, 6, 8</span><br><span class="line">n: .word 9</span><br><span class="line"></span><br><span class="line">.text</span><br><span class="line">main:</span><br><span class="line">    add t0, x0, x0</span><br><span class="line">    addi t1, x0, 1</span><br><span class="line">    la t3, n</span><br><span class="line">    lw t3, 0(t3)</span><br><span class="line">fib:</span><br><span class="line">    beq t3, x0, finish</span><br><span class="line">    add t2, t1, t0</span><br><span class="line">    mv t0, t1</span><br><span class="line">    mv t1, t2</span><br><span class="line">    addi t3, t3, -1</span><br><span class="line">    j fib</span><br><span class="line">finish:</span><br><span class="line">    addi a0, x0, 1</span><br><span class="line">    addi a1, t0, 0</span><br><span class="line">    ecall # print integer ecall</span><br><span class="line">    addi a0, x0, 10</span><br><span class="line">    ecall # terminate ecall</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Q</strong>: <code>.data</code>ã€ <code>.word</code>,<code> .text</code>æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»€ä¹ˆ?</p><p><strong>A</strong>: æ±‡ç¼–è¯­è¨€ç¼–ç¨‹ä¸­ï¼Œåƒ<code>.data</code>ã€<code>.word</code>å’Œ<code>.text</code>è¿™æ ·çš„æŒ‡ä»¤ç”¨äºæŒ‡å®šä»£ç çš„ä¸åŒéƒ¨åˆ†ï¼Œå¹¶å®šä¹‰æ•°æ®å’ŒæŒ‡ä»¤ã€‚</p><ul><li><code>.data</code>ï¼šè¯¥æŒ‡ä»¤æ ‡å¿—ç€æ•°æ®å£°æ˜çš„å¼€å§‹éƒ¨åˆ†ã€‚é€šå¸¸åé¢ä¼šè·Ÿç€å˜é‡æˆ–å¸¸é‡çš„å£°æ˜ã€‚åœ¨ä½ çš„ç¤ºä¾‹ä¸­ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">.word 2, 4, 6, 8</span><br><span class="line">n: .word 9</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªéƒ¨åˆ†å£°æ˜äº†ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ŒåŒ…å«å€¼2ã€4ã€6å’Œ8ï¼Œå¹¶ä¸”ä¸€ä¸ªå˜é‡<code>n</code>è¢«åˆå§‹åŒ–ä¸ºå€¼9ã€‚</p><ul><li><p><code>.word</code>ï¼šè¯¥æŒ‡ä»¤ç”¨äºåœ¨å†…å­˜ä¸­åˆ†é…å­˜å‚¨å•è¯å¤§å°çš„æ•°æ®ç©ºé—´ï¼ˆé€šå¸¸æ˜¯32ä½æˆ–4å­—èŠ‚ï¼‰ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼Œå®ƒç”¨äºåˆå§‹åŒ–æ•°ç»„å’Œå˜é‡<code>n</code>ã€‚</p></li><li><p><code>.text</code>ï¼šè¯¥æŒ‡ä»¤æ ‡å¿—ç€ä»£ç æ®µçš„å¼€å§‹éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«äº†æŒ‡ä»¤ã€‚åœ¨ç¤ºä¾‹ä¸­ï¼š</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.text</span><br><span class="line">main:</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">fib:</span><br><span class="line">    Â·Â·Â·</span><br><span class="line">finish:</span><br><span class="line">    Â·Â·Â·</span><br></pre></td></tr></table></figure><h1 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise 2"></a>Exercise 2</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">int source[] = &#123;3, 1, 4, 1, 5, 9, 0&#125;;</span><br><span class="line">int dest[10];</span><br><span class="line"></span><br><span class="line">int fun(int x) &#123;</span><br><span class="line">return -x * (x + 1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">    int k;</span><br><span class="line">    int sum = 0;</span><br><span class="line">    for (k = 0; source[k] != 0; k++) &#123;</span><br><span class="line">        dest[k] = fun(source[k]);</span><br><span class="line">        sum += dest[k];</span><br><span class="line">    &#125;</span><br><span class="line">    return sum;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">.globl main</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line"># åˆå§‹åŒ–æ•°ç»„</span><br><span class="line">source:</span><br><span class="line">    .word   3</span><br><span class="line">    .word   1</span><br><span class="line">    .word   4</span><br><span class="line">    .word   1</span><br><span class="line">    .word   5</span><br><span class="line">    .word   9</span><br><span class="line">    .word   0</span><br><span class="line">dest:</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line">    .word   0</span><br><span class="line"></span><br><span class="line">.text</span><br><span class="line">fun:</span><br><span class="line">    addi t0, a0, 1</span><br><span class="line">    sub t1, x0, a0</span><br><span class="line">    mul a0, t0, t1</span><br><span class="line">    jr ra</span><br><span class="line"></span><br><span class="line">main:</span><br><span class="line">    # BEGIN PROLOGUE</span><br><span class="line">    addi sp, sp, -20</span><br><span class="line">    sw s0, 0(sp)    # SUM</span><br><span class="line">    sw s1, 4(sp)    # SOURCEæŒ‡é’ˆ</span><br><span class="line">    sw s2, 8(sp)    # DESTæŒ‡é’ˆ</span><br><span class="line">    sw s3, 12(sp)</span><br><span class="line">    sw ra, 16(sp)</span><br><span class="line">    # END PROLOGUE</span><br><span class="line">addi t0, x0, 0# K</span><br><span class="line">    addi s0, x0, 0</span><br><span class="line">    la s1, source</span><br><span class="line">    la s2, dest</span><br><span class="line">loop:</span><br><span class="line">    slli s3, t0, 2   # åç§»é‡</span><br><span class="line">    add t1, s1, s3   # sourceåç§»åçš„åœ°å€</span><br><span class="line">    lw t2, 0(t1)     # source[k]çš„å€¼</span><br><span class="line">    # CONDITION</span><br><span class="line">    beq t2, x0, exit</span><br><span class="line">    add a0, x0, t2   # a0å­˜å‚¨source[k]çš„å€¼ï¼Œä»¥ä¾¿åé¢ä¼ å‚</span><br><span class="line">    # JUMP FUN</span><br><span class="line">    addi sp, sp, -8</span><br><span class="line">    sw t0, 0(sp)</span><br><span class="line">    sw t2, 4(sp)</span><br><span class="line">    jal fun          # a0å­˜å‚¨ç€funè¿”å›çš„å€¼</span><br><span class="line">    lw t0, 0(sp)</span><br><span class="line">    lw t2, 4(sp)</span><br><span class="line">    addi sp, sp, 8</span><br><span class="line">    # BACK</span><br><span class="line">    add t2, x0, a0   # t2ä»£a0</span><br><span class="line">    add t3, s2, s3   # deståç§»åçš„åœ°å€</span><br><span class="line">    sw t2, 0(t3)     # å°†ç»“æœå­˜å…¥dest</span><br><span class="line">    add s0, s0, t2   # sum += t2</span><br><span class="line"></span><br><span class="line">    addi t0, t0, 1   # k++</span><br><span class="line">    jal x0, loop</span><br><span class="line">exit:</span><br><span class="line">    add a0, x0, s0   # return sum</span><br><span class="line">    # BEGIN EPILOGUE</span><br><span class="line">    lw s0, 0(sp)</span><br><span class="line">    lw s1, 4(sp)</span><br><span class="line">    lw s2, 8(sp)</span><br><span class="line">    lw s3, 12(sp)</span><br><span class="line">    lw ra, 16(sp)</span><br><span class="line">    addi sp, sp, 20</span><br><span class="line">    # END EPILOGUE</span><br><span class="line">    jr ra</span><br></pre></td></tr></table></figure><h1 id="Exercise-3"><a href="#Exercise-3" class="headerlink" title="Exercise 3"></a>Exercise 3</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">.globl factorial</span><br><span class="line"></span><br><span class="line">.data</span><br><span class="line">n: .word 8</span><br><span class="line"></span><br><span class="line">.text</span><br><span class="line">main:</span><br><span class="line">    la t0, n</span><br><span class="line">    lw a0, 0(t0)</span><br><span class="line">    jal ra, factorial</span><br><span class="line"></span><br><span class="line">    addi a1, a0, 0</span><br><span class="line">    addi a0, x0, 1</span><br><span class="line">    ecall # Print Result</span><br><span class="line"></span><br><span class="line">    addi a1, x0, &#x27;\n&#x27;</span><br><span class="line">    addi a0, x0, 11</span><br><span class="line">    ecall # Print newline</span><br><span class="line"></span><br><span class="line">    addi a0, x0, 10</span><br><span class="line">    ecall # Exit</span><br><span class="line"></span><br><span class="line">factorial:</span><br><span class="line">    # YOUR CODE HERE</span><br><span class="line">    addi sp, sp, -8</span><br><span class="line">    sw t1, 0(sp)</span><br><span class="line">    sw t2, 4(sp)</span><br><span class="line">    addi t1, x0, 1</span><br><span class="line">    add t2, a0, x0</span><br><span class="line">Loop:</span><br><span class="line">    beq t2, t1, Done</span><br><span class="line">    sub t2, t2, t1</span><br><span class="line">    mul a0, a0, t2</span><br><span class="line">    j Loop</span><br><span class="line">Done:</span><br><span class="line">    lw t2, 4(sp)</span><br><span class="line">    lw t1, 0(sp)</span><br><span class="line">    addi sp, sp, 8</span><br><span class="line">    jr ra</span><br></pre></td></tr></table></figure><h1 id="Exercise-4"><a href="#Exercise-4" class="headerlink" title="Exercise 4"></a>Exercise 4</h1><ol><li>åœ¨ <code>simple_fn</code>ã€<code>naive_pow</code> å’Œ <code>inc_arr</code> å‡½æ•°ä¸­ï¼Œè°ƒç”¨çº¦å®šé”™è¯¯æ˜¯ç”±äºæœªæ­£ç¡®ä¿å­˜å’Œæ¢å¤è¢«è°ƒç”¨çš„å¯„å­˜å™¨æ‰€è‡´ã€‚åœ¨ <code>simple_fn</code> ä¸­ï¼Œæ²¡æœ‰ä¿å­˜å’Œæ¢å¤ <code>ra</code> å¯„å­˜å™¨ï¼›åœ¨ <code>naive_pow</code> ä¸­ï¼Œæ²¡æœ‰ä¿å­˜å’Œæ¢å¤ <code>s0</code> å¯„å­˜å™¨ï¼›åœ¨ <code>inc_arr</code> ä¸­ï¼Œæ²¡æœ‰ä¿å­˜å’Œæ¢å¤ <code>ra</code> å¯„å­˜å™¨ã€‚</li><li>åœ¨ RISC-V ä¸­ï¼Œè°ƒç”¨å‡½æ•°æ˜¯é€šè¿‡è·³è½¬å®ç°çš„ï¼Œå¹¶å°†è¿”å›åœ°å€å­˜å‚¨åœ¨ <code>ra</code> å¯„å­˜å™¨ä¸­ã€‚ç„¶è€Œï¼Œè°ƒç”¨çº¦å®šä»…é€‚ç”¨äºå®é™…çš„å‡½æ•°è°ƒç”¨ï¼Œè€Œä¸é€‚ç”¨äºè·³è½¬åˆ°æ ‡ç­¾ï¼ˆå¦‚ <code>naive_pow_loop</code> æˆ– <code>naive_pow_end</code>ï¼‰ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè°ƒç”¨çº¦å®šä¸é€‚ç”¨äºè¿™äº›æ ‡ç­¾ã€‚</li><li>æˆ‘ä»¬éœ€è¦åœ¨ <code>inc_arr</code> å‡½æ•°ä¸­ä¿å­˜å’Œæ¢å¤ <code>ra</code> å¯„å­˜å™¨ï¼Œå› ä¸ºåœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨äº†å¦ä¸€ä¸ªå‡½æ•° <code>helper_fn</code>ã€‚æ ¹æ®è°ƒç”¨çº¦å®šï¼Œè¢«è°ƒç”¨çš„å‡½æ•°å¿…é¡»ä¿å­˜å¹¶æ¢å¤ <code>ra</code> å¯„å­˜å™¨ã€‚è€Œå…¶ä»–å‡½æ•°æ²¡æœ‰è°ƒç”¨å…¶ä»–å‡½æ•°ï¼Œå› æ­¤ä¸éœ€è¦åœ¨å…¶ä¸­ä¿å­˜å’Œæ¢å¤ <code>ra</code> å¯„å­˜å™¨ã€‚</li><li>è™½ç„¶ <code>helper_fn</code> å‡½æ•°ä¹Ÿè¿åäº†è°ƒç”¨çº¦å®šï¼ˆæœªä¿å­˜å’Œæ¢å¤è¢«è°ƒç”¨çš„å¯„å­˜å™¨ï¼‰ï¼Œä½† Venus CC æ£€æŸ¥å™¨å¯èƒ½æ²¡æœ‰æŠ¥å‘Šè¿™ä¸ªé”™è¯¯ã€‚è¿™æ˜¯å› ä¸ºæ£€æŸ¥å™¨ä¸»è¦å…³æ³¨å¯„å­˜å™¨çš„ç›´æ¥ä½¿ç”¨æƒ…å†µï¼Œè€Œä¸ä¼šåˆ†æé€šè¿‡æŒ‡é’ˆé—´æ¥è®¿é—®çš„å†…å­˜ä½ç½®çš„ä¿®æ”¹ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cé¡¹ç›®ç¬”è®°(ä¸€)-Lab1-ç¼–è¯‘è°ƒè¯•åˆä½“éªŒ</title>
      <link href="/2024/04/13/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab1-%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
      <url>/2024/04/13/C-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61C%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab1-%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
      
        <content type="html"><![CDATA[<h1 id="Cçš„ç¼–è¯‘å’Œè¿è¡Œ"><a href="#Cçš„ç¼–è¯‘å’Œè¿è¡Œ" class="headerlink" title="Cçš„ç¼–è¯‘å’Œè¿è¡Œ"></a>Cçš„ç¼–è¯‘å’Œè¿è¡Œ</h1><p>åœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å‘½ä»¤è¡Œç¨‹åº gcc åœ¨ C è¯­è¨€ä¸­ç¼–è¯‘ç¨‹åºã€‚è¿è¡Œ gcc çš„æœ€ç®€å•æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc program.c</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå°† program.c ç¼–è¯‘ä¸ºåä¸º a.out çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚å¦‚æœä½ å­¦è¿‡ CS61B æˆ–æœ‰ Java ç»éªŒï¼Œä½ å¯ä»¥æŠŠ gcc çœ‹ä½œæ˜¯ Java çš„ C ç­‰ä»·ç‰©ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ­¤æ–‡ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./a.out</span><br></pre></td></tr></table></figure><p>å¯æ‰§è¡Œæ–‡ä»¶æ˜¯ <code>a.out</code> ï¼Œé‚£ä¹ˆåˆ°åº• <code>./</code> æ˜¯å¹²ä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿç­”ï¼šå½“æ‚¨è¦æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œæ‚¨éœ€è¦åœ¨æ–‡ä»¶è·¯å¾„å‰é¢åŠ ä¸Šä¸€ä¸ªæ–‡ä»¶è·¯å¾„ï¼Œä»¥ä¾¿å°†æ‚¨çš„å‘½ä»¤ä¸ python3 ç­‰å‘½ä»¤åŒºåˆ†å¼€æ¥ã€‚è¯¥ç‚¹è¡¨ç¤ºâ€œå½“å‰ç›®å½•â€ã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼ŒåŒç‚¹ ï¼ˆ <code>..</code> ï¼‰ è¡¨ç¤ºæ›´é«˜ä¸€çº§çš„ç›®å½•ã€‚</p><p><code>gcc</code> æœ‰å„ç§å‘½ä»¤è¡Œé€‰é¡¹ï¼Œé¼“åŠ±æ‚¨æ¢ç´¢ã€‚ä½†æ˜¯ï¼Œåœ¨æœ¬å®éªŒä¸­ï¼Œæˆ‘ä»¬å°†ä»…ä½¿ç”¨ <code>-o</code> ï¼Œå®ƒç”¨äºæŒ‡å®š <code>gcc</code> åˆ›å»ºçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ <code>program.c</code> ä¸ºåä¸º program çš„ç¨‹åºï¼Œç„¶åè¿è¡Œå®ƒã€‚å¦‚æœæ‚¨ä¸å¸Œæœ›æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶éƒ½å‘½å <code>a.out</code> ï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -o program program.c</span><br><span class="line">$ ./program</span><br></pre></td></tr></table></figure><blockquote><p>è‹¥ç¼–è¯‘çš„ç¨‹åºéœ€è¦è°ƒè¯•ï¼ŒåŠ ä¸Š-gæŒ‡ä»¤</p></blockquote><h1 id="Cçš„è°ƒè¯•å™¨â€”â€”gdb"><a href="#Cçš„è°ƒè¯•å™¨â€”â€”gdb" class="headerlink" title="Cçš„è°ƒè¯•å™¨â€”â€”gdb"></a>Cçš„è°ƒè¯•å™¨â€”â€”gdb</h1><p>åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæ‚¨ä¼šå‘ç° GDB å‚è€ƒå¡å¾ˆæœ‰ç”¨ã€‚GDB ä»£è¡¨â€œGNU De-Buggerâ€ã€‚ <code>hello.c</code> ä½¿ç”¨ <code>-g</code> æ ‡å¿—ç¼–è¯‘ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -g -o hello hello.c</span><br></pre></td></tr></table></figure><p>è¿™ä¼šå¯¼è‡´ gcc å°†ä¿¡æ¯å­˜å‚¨åœ¨å¯æ‰§è¡Œç¨‹åºä¸­ï¼Œä»¥ä¾¿ <code>gdb</code> ç†è§£å®ƒã€‚ç°åœ¨å¯åŠ¨è°ƒè¯•å™¨ ï¼ˆcï¼‰gdbï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cgdb hello</span><br></pre></td></tr></table></figure><p>å­¦ä¹ è¿™äº›å‘½ä»¤å°†å¯¹æœ¬å®éªŒçš„å…¶ä½™éƒ¨åˆ†ä»¥åŠæ‚¨çš„ C ç¼–ç¨‹ç”Ÿæ¶¯å¾ˆæœ‰ç”¨ã€‚åœ¨åä¸º <code>gdb.txt</code> çš„æ–‡æœ¬æ–‡ä»¶ä¸­ï¼Œå›ç­”ä»¥ä¸‹é—®é¢˜ã€‚</p><ol><li>å½“æ‚¨å¤„äº gdb ä¼šè¯ä¸­æ—¶ï¼Œå¦‚ä½•<strong>è®¾ç½®åœ¨ç¨‹åºè¿è¡Œæ—¶å°†ä¼ é€’ç»™ç¨‹åºçš„å‚æ•°</strong>ï¼Ÿ<ol><li><em>set args arg1 arg2</em></li></ol></li><li>å¦‚ä½•<strong>åˆ›å»ºæ–­ç‚¹</strong>ï¼Ÿ<ol><li><em>break <name></name></em></li></ol></li><li>åœ¨æ–­ç‚¹å¤„åœæ­¢åï¼Œå¦‚ä½•åœ¨ç¨‹åºä¸­<strong>æ‰§è¡Œä¸‹ä¸€è¡Œ C ä»£ç </strong>ï¼Ÿ<ol><li><em>next or n</em></li></ol></li><li>å¦‚æœä¸‹ä¸€è¡Œä»£ç æ˜¯å‡½æ•°è°ƒç”¨ï¼Œåˆ™ä½¿ç”¨å¯¹ #3 çš„ç­”æ¡ˆï¼Œåˆ™å°†ç«‹å³æ‰§è¡Œæ•´ä¸ªå‡½æ•°è°ƒç”¨ã€‚ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œè¯·è€ƒè™‘å¯¹ #3 ä½¿ç”¨ä¸åŒçš„å‘½ä»¤ï¼ä½ å¦‚ä½•å‘Šè¯‰GDB<strong>ä½ æƒ³è°ƒè¯•å‡½æ•°å†…éƒ¨çš„ä»£ç </strong>ï¼ˆå³å•æ­¥æ‰§è¡Œå‡½æ•°ï¼‰ï¼Ÿï¼ˆå¦‚æœæ‚¨å°†ç­”æ¡ˆæ›´æ”¹ä¸º #3ï¼Œé‚£ä¹ˆè¯¥ç­”æ¡ˆç°åœ¨å¾ˆå¯èƒ½é€‚ç”¨äºæ­¤å¤„ã€‚<ol><li><em>step or s</em></li></ol></li><li><strong>åœ¨æ–­ç‚¹åœæ­¢åå¦‚ä½•ç»§ç»­ç¨‹åº</strong>ï¼Ÿ<ol><li><em>continue or c</em></li></ol></li><li>å¦‚ä½•åœ¨ gdb ä¸­<strong>æ‰“å°å˜é‡</strong>ï¼ˆç”šè‡³æ˜¯åƒ 1+2 è¿™æ ·çš„è¡¨è¾¾å¼ï¼‰çš„å€¼ï¼Ÿ<ol><li><em>ptint <variable_name></variable_name></em></li><li><em>print 1+2</em></li></ol></li><li>å¦‚ä½•é…ç½® gdb ä»¥ä¾¿å®ƒ<strong>åœ¨æ¯ä¸ªæ­¥éª¤åæ˜¾ç¤ºå˜é‡çš„å€¼</strong>ï¼Ÿ<ol><li><em>display variable_name</em></li></ol></li><li>å¦‚ä½•åœ¨å½“å‰å‡½æ•°ä¸­<strong>æ˜¾ç¤ºæ‰€æœ‰å˜é‡åŠå…¶å€¼çš„åˆ—è¡¨</strong>ï¼Ÿ<ol><li><em>info locals</em></li></ol></li><li>ä½ å¦‚ä½•<strong>é€€å‡º</strong> gdbï¼Ÿ<ol><li><em>quit or q</em></li></ol></li></ol><h1 id="é‡å®šå‘â€”â€”ä½¿ç”¨åŒ…å«ä½ è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶æ¥è¿è¡Œ"><a href="#é‡å®šå‘â€”â€”ä½¿ç”¨åŒ…å«ä½ è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶æ¥è¿è¡Œ" class="headerlink" title="é‡å®šå‘â€”â€”ä½¿ç”¨åŒ…å«ä½ è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶æ¥è¿è¡Œ"></a>é‡å®šå‘â€”â€”ä½¿ç”¨åŒ…å«ä½ è¾“å…¥çš„æ–‡æœ¬æ–‡ä»¶æ¥è¿è¡Œ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./a.out &lt; fileName.txt</span><br></pre></td></tr></table></figure><h1 id="Valgrindâ€™ingå·¥å…·"><a href="#Valgrindâ€™ingå·¥å…·" class="headerlink" title="Valgrindâ€™ingå·¥å…·"></a>Valgrindâ€™ingå·¥å…·</h1><p>Valgrind æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿæ‚¨çš„ CPU å¹¶è·Ÿè¸ªæ‚¨çš„å†…å­˜è®¿é—®çš„ç¨‹åºã€‚è¿™ä¼šå‡æ…¢æ‚¨æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¹¶ä¸æ€»æ˜¯åœ¨ Valgrind ä¸­è¿è¡Œæ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶çš„åŸå› ï¼‰ï¼Œä½†ä¹Ÿå¯èƒ½ä¼šæš´éœ²å¯èƒ½ä»…åœ¨ä¸€ç»„ç‰¹æ®Šæƒ…å†µä¸‹æ˜¾ç¤ºå¯è§çš„é”™è¯¯è¡Œä¸ºçš„é”™è¯¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ valgrind ./segfault_ex</span><br></pre></td></tr></table></figure><p>è¿™åº”è¯¥ä¼šå¯¼è‡´ Valgrind è¾“å‡ºå‘ç”Ÿéæ³•è®¿é—®çš„ä½ç½®ã€‚å°†è¿™äº›ç»“æœä¸æ‚¨é€šè¿‡æ‰“å¼€æ–‡ä»¶ç¡®å®šçš„ç»“æœè¿›è¡Œæ¯”è¾ƒã€‚Valgrind å¦‚ä½•å¸®åŠ©æ‚¨è§£å†³æœªæ¥çš„æ®µé”™è¯¯ï¼Ÿç°åœ¨å°è¯•åœ¨ <code>no_segfault_ex</code> ä¸Šè¿è¡Œ Valgrindã€‚ç¨‹åºä¸åº”è¯¥å´©æºƒï¼Œä½†æ–‡ä»¶ä»ç„¶å­˜åœ¨é—®é¢˜ã€‚Valgrindå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¾åˆ°ï¼ˆçœ‹ä¼¼çœ‹ä¸è§çš„ï¼‰é—®é¢˜ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¿™é‡Œæ‚¨ä¼šçœ‹åˆ° Valgrind ä¼¼ä¹æ— æ³•å‘Šè¯‰æ‚¨é—®é¢˜çš„ç¡®åˆ‡ä½ç½®ã€‚<strong>ä½¿ç”¨ Valgrind æä¾›çš„æ¶ˆæ¯æ¥ç¡®å®šå“ªä¸ªå˜é‡å…·æœ‰æœªå®šä¹‰çš„è¡Œä¸ºï¼Œç„¶åå°è¯•æ¨æ–­ä¸€å®šå‘ç”Ÿäº†ä»€ä¹ˆ</strong>ï¼ˆæç¤ºï¼šä»€ä¹ˆæ˜¯æœªåˆå§‹åŒ–çš„å€¼ï¼Ÿ</p><p>At this point we do not expect you to be familiar with <code>sizeof</code> (that comes next week!) so all we want åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ‚¨ç†Ÿæ‚‰ <code>sizeof</code> ï¼ˆä¸‹å‘¨ï¼ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›æ‚¨ä»æœ¬èŠ‚ä¸­å¾—åˆ°çš„åªæ˜¯å…³äºé—®é¢˜å¯èƒ½å‘ç”Ÿä½ç½®çš„ä¸€äº›ç›´è§‰ã€‚</p><p>å¸Œæœ›åœ¨å®Œæˆæ­¤ç¤ºä¾‹åï¼Œæ‚¨å°†èƒ½å¤Ÿç†è§£å¹¶å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>ä¸ºä»€ä¹ˆ Valgrind å¾ˆé‡è¦ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li><li>ä½ å¦‚ä½•åœ¨ Valgrind ä¸­è¿è¡Œç¨‹åºï¼Ÿ</li><li>æ‚¨å¦‚ä½•è§£é‡Šé”™è¯¯æ¶ˆæ¯ï¼Ÿä¸è¦å®³æ€•ä»–ä»¬ã€‚å°½åŠ›è€Œä¸ºï¼Œå‘æˆ‘ä»¬å¯»æ±‚å¸®åŠ©ã€‚</li><li>ä¸ºä»€ä¹ˆæœªåˆå§‹åŒ–çš„å˜é‡ä¼šå¯¼è‡´â€œheisenbugsâ€ï¼Ÿ</li></ul><p>æˆ‘ä»¬ç°åœ¨å‘æ‚¨ä»‹ç» Valgrindï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·ï¼Œä¸€æ—¦æ‚¨å¼€å§‹ç¼–å†™ Cï¼Œæ‚¨å°±ä¼šæƒ³è¦å®ƒã€‚<strong>ç„¶è€Œï¼Œè¦çœŸæ­£ç†è§£å®ƒï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ C çš„å†…å­˜æ¨¡å‹ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹å‘¨å®Œæˆã€‚</strong>åœ¨è®²åº§ä¸­ä»‹ç»å®Œè®°å¿†åï¼Œå›åˆ°è¿™ä¸ªå®éªŒå¹¶å°è¯•å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š</p><ul><li>ä¸ºä»€ä¹ˆ <code>no_segfault_ex</code> ç¨‹åº<strong>æ²¡æœ‰</strong>æ®µé”™è¯¯ï¼Ÿ</li><li>ä¸ºä»€ä¹ˆ <code>no_segfault_ex</code> ä¼šäº§ç”Ÿä¸ä¸€è‡´çš„è¾“å‡ºï¼Ÿ</li><li>ä¸ºä»€ä¹ˆä¸æ­£ç¡® <code>sizeof</code> ï¼Ÿä½ æ€ä¹ˆèƒ½ä»ç„¶ä½¿ç”¨ <code>sizeof</code> ï¼Œä½†è¦ä½¿ä»£ç æ­£ç¡®ï¼Ÿ</li></ul>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2-CS61Cå­¦ä¹ ç¬”è®°-Cè¯­è¨€ä»‹ç»</title>
      <link href="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-C%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D/"/>
      <url>/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-C%E8%AF%AD%E8%A8%80%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Cå­¦ä¹ ç¬”è®°(ä¸€)-æ•°å­—è¡¨ç¤ºæ³•</title>
      <link href="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/"/>
      <url>/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½-Bits-èƒ½è¡¨ç¤ºä¸€åˆ‡ï¼"><a href="#ä½-Bits-èƒ½è¡¨ç¤ºä¸€åˆ‡ï¼" class="headerlink" title="ä½(Bits)èƒ½è¡¨ç¤ºä¸€åˆ‡ï¼"></a>ä½(Bits)èƒ½è¡¨ç¤ºä¸€åˆ‡ï¼</h1><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224529490.png" alt="image-20240407224529490"></p><h2 id="Binaryã€Decimalã€Hex"><a href="#Binaryã€Decimalã€Hex" class="headerlink" title="Binaryã€Decimalã€Hex"></a>Binaryã€Decimalã€Hex</h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224633741.png" alt="image-20240407224633741"></p><h2 id="åè¿›åˆ¶"><a href="#åè¿›åˆ¶" class="headerlink" title="åè¿›åˆ¶"></a>åè¿›åˆ¶</h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224702160.png" alt="image-20240407224702160"></p><h2 id="äºŒè½¬åè¿›åˆ¶"><a href="#äºŒè½¬åè¿›åˆ¶" class="headerlink" title="äºŒè½¬åè¿›åˆ¶"></a>äºŒè½¬åè¿›åˆ¶</h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224721049.png" alt="image-20240407224721049"></p><h2 id="åå…­è¿›åˆ¶"><a href="#åå…­è¿›åˆ¶" class="headerlink" title="åå…­è¿›åˆ¶"></a>åå…­è¿›åˆ¶</h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224736051.png" alt="image-20240407224736051"></p><h2 id="åè¿›åˆ¶åˆ°äºŒ-åå…­è¿›åˆ¶"><a href="#åè¿›åˆ¶åˆ°äºŒ-åå…­è¿›åˆ¶" class="headerlink" title="åè¿›åˆ¶åˆ°äºŒ&#x2F;åå…­è¿›åˆ¶"></a>åè¿›åˆ¶åˆ°äºŒ&#x2F;åå…­è¿›åˆ¶</h2><p>ä»å·¦åˆ°å³èµ‹æ»¡</p><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407224836619.png" alt="image-20240407224836619"></p><h2 id="äºŒè¿›åˆ¶åˆ°åå…­è¿›åˆ¶"><a href="#äºŒè¿›åˆ¶åˆ°åå…­è¿›åˆ¶" class="headerlink" title="äºŒè¿›åˆ¶åˆ°åå…­è¿›åˆ¶"></a>äºŒè¿›åˆ¶åˆ°åå…­è¿›åˆ¶</h2><p>å› ä¸ºåå…­è¿›åˆ¶æ˜¯é€¢16è¿›1ï¼Œæ‰€ä»¥å–å››ä½ä½œä¸ºä¸€ä½åå…­è¿›åˆ¶</p><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407225025480.png" alt="image-20240407225025480"></p><h1 id="æ•°å­—è¡¨è¾¾æ³•"><a href="#æ•°å­—è¡¨è¾¾æ³•" class="headerlink" title="æ•°å­—è¡¨è¾¾æ³•"></a>æ•°å­—è¡¨è¾¾æ³•</h1><h2 id="æ— ä¿®é¥°"><a href="#æ— ä¿®é¥°" class="headerlink" title="æ— ä¿®é¥°"></a>æ— ä¿®é¥°</h2><ul><li>äº”ä½bitsæ¥è¡¨è¾¾<ul><li>èŒƒå›´æ˜¯0 ~ 2^4^-1</li></ul></li></ul><h2 id="ä¿®é¥°"><a href="#ä¿®é¥°" class="headerlink" title="ä¿®é¥°"></a>ä¿®é¥°</h2><ul><li><p>äº”ä½bitsä¸­çš„æœ€é«˜ä½è¡¨ç¤ºæ­£è´Ÿ</p><ul><li>èŒƒå›´ -15 ~ 15</li><li>é—®é¢˜: <ul><li>å­˜åœ¨ä¸¤ä¸ª0 (<code>00000</code>å’Œ<code>10000</code>)</li><li>ä¸­é—´å¾€ä¸¤è¾¹å˜å¤§</li></ul></li></ul><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407230249723.png" alt="image-20240407230249723"></p></li></ul><h2 id><a href="#" class="headerlink" title></a></h2><h2 id="åç "><a href="#åç " class="headerlink" title="åç "></a>åç </h2><p>å°†ä¿®é¥°å…¨éƒ¨å–å</p><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407230621595.png" alt="image-20240407230621595"></p><p>ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œè¿˜æ˜¯æœ‰ä¸¤ä¸ªé‡å çš„0</p><p>æ‰€ä»¥æˆ‘ä»¬æŠŠè´Ÿå¾€å·¦ç§»åŠ¨ä¸€ä½ åŠ åŠ ä¸€ä½ï¼Œäºæ˜¯è·å¾—äº†è¡¥ç </p><h2 id="è¡¥ç "><a href="#è¡¥ç " class="headerlink" title="è¡¥ç "></a>è¡¥ç </h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407230830977.png" alt="image-20240407230830977"></p><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407230952371.png" alt="image-20240407230952371"></p><h2 id="åç½®"><a href="#åç½®" class="headerlink" title="åç½®"></a>åç½®</h2><p><img src="/2024/04/07/C-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61C%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E5%AD%97%E8%A1%A8%E7%A4%BA%E6%B3%95/image-20240407230903149.png" alt="image-20240407230903149"></p><p>æ³¨æ„: æ˜¯ <strong>æœªä¿®é¥° åŠ ä¸Š biasåç½®</strong></p>]]></content>
      
      
      <categories>
          
          <category> ä½“ç³»ç»“æ„ </category>
          
          <category> CS61C </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä½“ç³»ç»“æ„ </tag>
            
            <tag> CS61C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>22-CS61Bå­¦ä¹ ç¬”è®°-Rd21-æ‹“æ‰‘æ’åºä¸DAGå’Œè¿˜åŸä¸åˆ†è§£</title>
      <link href="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/"/>
      <url>/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›®å‰å…³äºå›¾çš„é—®é¢˜"><a href="#ç›®å‰å…³äºå›¾çš„é—®é¢˜" class="headerlink" title="ç›®å‰å…³äºå›¾çš„é—®é¢˜"></a>ç›®å‰å…³äºå›¾çš„é—®é¢˜</h1><table><thead><tr><th>Problem</th><th>Problem Description</th><th>Solution</th><th>Efficiency</th></tr></thead><tbody><tr><td>paths</td><td>Find a path from s to every reachable vertex.</td><td>DepthFirstPaths.java<a href="https://docs.google.com/presentation/d/1lTo8LZUGi3XQ1VlOmBUF9KkJTW_JWsw_DOPq8VBiI3A/edit?usp=sharing">Demo</a></td><td>O(V+E) timeÎ˜(V) space</td></tr><tr><td>shortest paths</td><td>Find the shortest path from s to every reachable vertex.</td><td>BreadthFirstPaths.java<a href="https://docs.google.com/presentation/d/1JoYCelH4YE6IkSMq_LfTJMzJ00WxDj7rEa49gYmAtc4/edit?usp=sharing">Demo</a></td><td>O(V+E) timeÎ˜(V) space</td></tr><tr><td>shortest weighted paths</td><td>Find the shortest path, considering weights, from s to every reachable vertex.</td><td>DijkstrasSP.java<a href="https://docs.google.com/presentation/d/1_bw2z1ggUkquPdhl7gwdVBoTaoJmaZdpkV6MoAgxlJc/pub?start=false&loop=false&delayms=3000">Demo</a></td><td>O(E log V) timeÎ˜(V) space</td></tr><tr><td>shortest weighted path</td><td>Find the shortest path, consider weights, from s to some target vertex</td><td>A*: Same as Dijkstraâ€™s but with h(v, goal) added to priority of each vertex.<a href="https://docs.google.com/presentation/d/177bRUTdCa60fjExdr9eO04NHm0MRfPtCzvEup1iMccM/edit#slide=id.g369665031c_0_350">Demo</a></td><td>Time depends on heuristic.Î˜(V) space</td></tr><tr><td>minimum spanning tree</td><td>Find a minimum spanning tree.</td><td>LazyPrimMST.java<a href="https://docs.google.com/presentation/d/18leOHESniaJqqehiTR-YAL4WeEEcHJyRB9aw_S1FLG0/edit#slide=id.g772f8a8e2_0_28">Demo</a></td><td>O(???) timeÎ˜(???) space</td></tr><tr><td>minimum spanning tree</td><td>Find a minimum spanning tree.</td><td>PrimMST.java<a href="https://docs.google.com/presentation/d/1GPizbySYMsUhnXSXKvbqV4UhPCvrt750MiqPPgU-eCY/edit#slide=id.g9a60b2f52_0_0">Demo</a></td><td>O(E log V) timeÎ˜(V) space</td></tr><tr><td>minimum spanning tree</td><td>Find a minimum spanning tree.</td><td>KruskalMST.java<a href="https://docs.google.com/presentation/d/18leOHESniaJqqehiTR-YAL4WeEEcHJyRB9aw_S1FLG0/edit#slide=id.g5347e2c8f_2213">Demo</a></td><td>O(E log E) timeÎ˜(E) sp</td></tr></tbody></table><h1 id="æ‹“æ‰‘æ’åºä¸DAG"><a href="#æ‹“æ‰‘æ’åºä¸DAG" class="headerlink" title="æ‹“æ‰‘æ’åºä¸DAG"></a>æ‹“æ‰‘æ’åºä¸DAG</h1><h2 id="æ‹“æ‰‘æ’åº"><a href="#æ‹“æ‰‘æ’åº" class="headerlink" title="æ‹“æ‰‘æ’åº"></a>æ‹“æ‰‘æ’åº</h2><p>å‡è®¾æˆ‘ä»¬æ”¶é›†äº†ä¸åŒçš„ä»»åŠ¡æˆ–æ´»åŠ¨ï¼Œå…¶ä¸­ä¸€äº›ä»»åŠ¡æˆ–æ´»åŠ¨å¿…é¡»åœ¨å¦ä¸€ä¸ªä»»åŠ¡æˆ–æ´»åŠ¨ä¹‹å‰å‘ç”Ÿã€‚æˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°å¯¹ä»»åŠ¡çš„æ’åºï¼Œä»¥ä¾¿å¯¹äºæ¯ä¸ªä»»åŠ¡ <em>v</em> ï¼Œä¹‹å‰ <em>v</em> å‘ç”Ÿçš„ä»»åŠ¡åœ¨æˆ‘ä»¬çš„æ’åºä¸­æ›´æ—©å‡ºç°ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥é¦–å…ˆå°†ä»»åŠ¡é›†åˆè§†ä¸ºä¸€ä¸ªå›¾ï¼Œå…¶ä¸­æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªä»»åŠ¡ã€‚è¾¹<em>v</em>â†’<em>w</em> è¡¨ç¤º <em>v</em> å¿…é¡»åœ¨ <em>w</em> ä¹‹å‰å‘ç”Ÿã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åŸæ¥çš„é—®é¢˜è¢«ç®€åŒ–ä¸ºæ‰¾åˆ°ä¸€ä¸ªæ‹“æ‰‘æ’åºã€‚</p><blockquote><p>æ‹“æ‰‘æ’åºï¼šå¯¹å›¾çš„é¡¶ç‚¹è¿›è¡Œæ’åºï¼Œä½¿å¾—å¯¹äºæ¯ä¸ªæœ‰å‘è¾¹ <em>u</em>â†’<em>v</em> ï¼Œ <em>u</em> åœ¨æ’åºä¸­éƒ½æ’åœ¨å‰é¢ <em>v</em> ã€‚</p></blockquote><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.1.1.jpg" alt="img"></p><blockquote><p><strong>é—®é¢˜ 1.1</strong>ï¼šä¸Šå›¾æœ‰å“ªäº›æœ‰æ•ˆçš„æ‹“æ‰‘é¡ºåºï¼Ÿ<br><strong>ç­”</strong>ï¼š[<em>D</em>,<em>B</em>,<em>A</em>,<em>E</em>,<em>C</em>,<em>F</em>], [<em>E</em>,<em>D</em>,<em>C</em>,<em>B</em>,<em>A</em>,<em>F</em>].</p></blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å¯¹æŸäº›ç±»å‹çš„å›¾è¿›è¡Œæ‹“æ‰‘æ’åºæ‰æœ‰æ„ä¹‰ã€‚è‹¥è¦æŸ¥çœ‹æ­¤å†…å®¹ï¼Œè¯·è€ƒè™‘ä¸‹å›¾ï¼š</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.1.3.png" alt="img"></p><p>ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„æ‹“æ‰‘æ’åºï¼Ÿ</p><p>æ²¡æœ‰ä¸€ä¸ªï¼D åœ¨ B ä¹‹å‰ï¼Œä½† B åœ¨ Cã€Eã€D ä¹‹å‰ã€‚ç”±äºæˆ‘ä»¬æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œå› æ­¤æ²¡æœ‰å®šä¹‰æ‹“æ‰‘æ’åºã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½å¯¹æ— å‘å›¾è¿›è¡Œæ‹“æ‰‘æ’åºï¼Œå› ä¸ºæ— å‘å›¾ä¸­çš„æ¯æ¡è¾¹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå¾ªç¯ã€‚</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.1.4.png" alt="img"><br>å› æ­¤ï¼Œæ‹“æ‰‘æ’åºä»…é€‚ç”¨äº<strong>æœ‰å‘ã€æ— ç¯ï¼ˆæ— å‘¨æœŸï¼‰å›¾æˆ– DAGã€‚</strong></p><blockquote><p>*<em>Topological Sort:*<em>ï¼šå¯¹ <strong>DAG</strong> é¡¶ç‚¹çš„æ’åºï¼Œä½¿å¾—å¯¹äºæ¯ä¸ªæœ‰å‘è¾¹ u</em>â†’*v</em> ï¼Œ <em>u</em> åœ¨æ’åºä¸­æ’åœ¨å‰é¢ <em>v</em> ã€‚</p></blockquote><p>å¯¹äºä»»ä½•æ‹“æ‰‘æ’åºï¼Œéƒ½å¯ä»¥é‡æ–°ç»˜åˆ¶å›¾å½¢ï¼Œä½¿é¡¶ç‚¹å…¨éƒ¨ä½äºä¸€è¡Œä¸­ã€‚å› æ­¤ï¼Œæ‹“æ‰‘æ’åºæœ‰æ—¶ç§°ä¸ºå›¾çš„<strong>çº¿æ€§åŒ–</strong>ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯é’ˆå¯¹å…¶ä¸­ä¸€ä¸ªæ‹“æ‰‘æ’åºçº¿æ€§åŒ–çš„å‰é¢ç¤ºä¾‹ã€‚</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.1.2.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œä¸Šè¿° DAG çš„æ‹“æ‰‘æ’åºå¿…é¡»ä»¥ D æˆ– E å¼€å¤´ï¼Œå¹¶ä¸”å¿…é¡»ä»¥ F æˆ– C ç»“å°¾ã€‚å› æ­¤ï¼ŒD å’Œ E ç§°ä¸ºæºï¼ŒF å’Œ C ç§°ä¸ºæ¥æ”¶å™¨ã€‚</p><h2 id="æ‹“æ‰‘æ’åºç®—æ³•"><a href="#æ‹“æ‰‘æ’åºç®—æ³•" class="headerlink" title="æ‹“æ‰‘æ’åºç®—æ³•"></a>æ‹“æ‰‘æ’åºç®—æ³•</h2><p>æˆ‘ä»¬æ€æ ·æ‰èƒ½æ‰¾åˆ°æ‹“æ‰‘æ’åºï¼ŸèŠ±ç‚¹æ—¶é—´æƒ³æƒ³ä½ å·²ç»çŸ¥é“çš„ç°æœ‰å›¾ç®—æ³•å¯èƒ½æœ‰åŠ©äºè§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ‹“æ‰‘æ’åºç®—æ³•ï¼š</p><ul><li>ä»å›¾å½¢ä¸­çš„æ¯ä¸ªé¡¶ç‚¹æ‰§è¡Œ DFS éå†ï¼Œè€Œä¸æ˜¯æ¸…é™¤éå†ä¹‹é—´çš„æ ‡è®°ã€‚</li><li>åœ¨æ­¤è¿‡ç¨‹ä¸­è®°å½• DFS çš„ååºã€‚</li><li>æ‹“æ‰‘é¡ºåºä¸åé¡ºåºç›¸åã€‚</li></ul><p><strong>å·¥ä½œåŸç†</strong>ï¼šåªæœ‰åœ¨è€ƒè™‘äº†ç»™å®šæºç‚¹çš„æ‰€æœ‰åä»£ä¹‹åï¼Œæ¯ä¸ªé¡¶ç‚¹ <em>v</em> æ‰ä¼šè¢«æ·»åŠ åˆ°åæ’åºåˆ—è¡¨çš„æœ«å°¾ <em>v</em> ã€‚å› æ­¤ï¼Œå½“ä»»ä½•ä¸€ä¸ª <em>v</em> è¢«æ·»åŠ åˆ°åæ’åºåˆ—è¡¨ä¸­æ—¶ï¼Œå®ƒçš„æ‰€æœ‰åä»£éƒ½å·²ç»åœ¨åˆ—è¡¨ä¸­ã€‚å› æ­¤ï¼Œé¢ å€’æ­¤åˆ—è¡¨ä¼šç»™å‡ºæ‹“æ‰‘æ’åºã€‚</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/image-20240406221218217.png" alt="image-20240406221218217"></p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/image-20240406221227292.png" alt="image-20240406221227292"></p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/image-20240406221247104.png" alt="image-20240406221247104"></p><p>ç”±äºæˆ‘ä»¬åªæ˜¯ä½¿ç”¨ DFSï¼Œå› æ­¤å®ƒçš„è¿è¡Œæ—¶åˆ†åˆ«æ˜¯ <em>O</em>(<em>V</em>+<em>E</em>) ï¼Œ<em>V</em> <em>E</em> æ˜¯å›¾ä¸­çš„èŠ‚ç‚¹æ•°å’Œè¾¹æ•°ã€‚</p><h3 id="Pseudocode-ä¼ªä»£ç "><a href="#Pseudocode-ä¼ªä»£ç " class="headerlink" title="Pseudocode ä¼ªä»£ç "></a>Pseudocode ä¼ªä»£ç </h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">topological(DAG):</span><br><span class="line">    initialize marked array</span><br><span class="line">    initialize postOrder list</span><br><span class="line">    for all vertices in DAG:</span><br><span class="line">        if vertex is not marked:</span><br><span class="line">            dfs(vertex, marked, postOrder)</span><br><span class="line">    return postOrder reversed</span><br><span class="line"></span><br><span class="line">dfs(vertex, marked, postOrder):</span><br><span class="line">    marked[vertex] = true</span><br><span class="line">    for neighbor of vertex:</span><br><span class="line">        dfs(neighbor, marked, postOrder)</span><br><span class="line">    postOrder.add(vertex)</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆè¶…å‡ºèŒƒå›´ï¼‰é¢å¤–çš„é—®é¢˜</strong>ï¼šæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ BFS å®ç°æ‹“æ‰‘æ’åºï¼Ÿæç¤º 1ï¼šæˆ‘ä»¬è‚¯å®šéœ€è¦å­˜å‚¨ä¸€äº›é¢å¤–çš„ä¿¡æ¯ã€‚æç¤º 2ï¼šè€ƒè™‘è·Ÿè¸ªæ¯ä¸ªé¡¶ç‚¹çš„åº¦æ•°ã€‚</p><p><strong>Solution: ï¼š</strong></p><ol><li>è®¡ç®—æ‰€æœ‰é¡¶ç‚¹çš„åº¦æ•°ã€‚</li><li>é€‰å–ä»»ä½• in-degree ä¸º 0 çš„é¡¶ç‚¹ <em>v</em> ã€‚</li><li>æ·»åŠ åˆ° <em>v</em> æˆ‘ä»¬çš„æ‹“æ‰‘æ’åºåˆ—è¡¨ã€‚ç§»é™¤é¡¶ç‚¹ <em>v</em> å’Œä»é¡¶ç‚¹å‡ºæ¥çš„æ‰€æœ‰è¾¹ã€‚å°†é¡¶ç‚¹ <em>v</em> çš„æ‰€æœ‰ç›¸é‚»é¡¹çš„åº¦æ•°é€’å‡ 1ã€‚</li><li>é‡å¤æ­¥éª¤ 2 å’Œ 3ï¼Œç›´åˆ°åˆ é™¤æ‰€æœ‰é¡¶ç‚¹ã€‚</li></ol><p>æˆ‘ä»¬å¦‚ä½•æ‰èƒ½æœ‰æ•ˆåœ°å®Œæˆç¬¬ 2 æ­¥ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼˜å…ˆçº§ç­‰äºåº¦æ•°çš„é¡¶ç‚¹çš„æœ€å°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</p><h2 id="Review-å›é¡¾"><a href="#Review-å›é¡¾" class="headerlink" title="Review å›é¡¾"></a>Review å›é¡¾</h2><ul><li><p>æ‹“æ‰‘æ’åºæ˜¯ä¸€ç§çº¿æ€§åŒ–<strong>æœ‰å‘æ— ç¯å›¾(DAG)</strong> çš„æ–¹æ³•ã€‚</p></li><li><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ DFSï¼ˆæˆ– BFSï¼‰åœ¨ O*(<em>V</em>+*E) æ—¶é—´å†…æ‰¾åˆ°ä»»ä½• DAG çš„æ‹“æ‰‘ç±»å‹ã€‚</p></li><li></li><li><table><thead><tr><th>Problem</th><th>Problem Description</th><th>Solution</th><th>Efficiency</th></tr></thead><tbody><tr><td>topological sort</td><td>Find an ordering of vertices that respects edges of our DAG.</td><td><a href="https://docs.google.com/presentation/d/1Bvf4PooGooUCr-K9cA1kbhsNc0hXW5Jwn-QD0in-1pc/edit#slide=id.g99668982c_1_693">Demo</a>Topological.java</td><td>O(V+E) timeÎ˜(V) space</td></tr></tbody></table></li></ul><h1 id="DAGä¸Šçš„æœ€çŸ­è·¯å¾„"><a href="#DAGä¸Šçš„æœ€çŸ­è·¯å¾„" class="headerlink" title="DAGä¸Šçš„æœ€çŸ­è·¯å¾„"></a>DAGä¸Šçš„æœ€çŸ­è·¯å¾„</h1><p>å›æƒ³ä¸€ä¸‹ä¸Šä¸€èŠ‚ï¼ŒDAG æ˜¯æœ‰å‘çš„æ— ç¯å›¾ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨ DAG ä¸Šæ‰¾åˆ°æœ€çŸ­çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Dijkstra çš„è·¯å¾„ã€‚ä½†æ˜¯ï¼Œå¯¹äº DAGï¼Œæœ‰ä¸€ä¸ªç®€å•çš„æœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œå®ƒä¹Ÿå¯ä»¥å¤„ç†è´Ÿè¾¹æƒé‡ï¼</p><h2 id="Dijkstra-çš„è´Ÿè¾¹æƒé‡å¤±æ•ˆ"><a href="#Dijkstra-çš„è´Ÿè¾¹æƒé‡å¤±æ•ˆ" class="headerlink" title="Dijkstra çš„è´Ÿè¾¹æƒé‡å¤±æ•ˆ"></a>Dijkstra çš„è´Ÿè¾¹æƒé‡å¤±æ•ˆ</h2><p>å›æƒ³ä¸€ä¸‹ï¼Œå¦‚æœå­˜åœ¨è´Ÿè¾¹ï¼ŒDijkstra å¯èƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºå®ƒä¾èµ–äºè¿™æ ·çš„å‡è®¾ï¼Œå³ä¸€æ—¦æˆ‘ä»¬è®¿é—®ä¸€æ¡è¾¹ï¼Œæˆ‘ä»¬å°±æ‰¾åˆ°äº†é€šå¾€è¯¥è¾¹çš„æœ€çŸ­è·¯å¾„ã€‚ä½†æ˜¯ï¼Œå¦‚æœè´Ÿè¾¹æƒé‡å¯ä»¥å­˜åœ¨äºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„åœ°æ–¹ä¹‹å‰ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡è®¾å°±å¤±è´¥äº†ã€‚è¯·çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.2.1.png" alt="img"></p><p>ä» A å¼€å§‹ï¼ŒDijkstra å°†é¦–å…ˆè®¿é—® Cï¼Œç„¶åæ˜¯ Bï¼ˆç”šè‡³ä»ä¸è€ƒè™‘è¾¹ç¼˜ B<em>â†’</em>C* ï¼‰</p><p>å½“ç„¶ï¼Œè´Ÿè¾¹ç¼˜æƒé‡å¹¶ä¸æ„å‘³ç€ Dijkstra ä¸€å®šä¼šå¤±è´¥ã€‚Dijkstraâ€™s é€šè¿‡ä»¥ä¸‹ç¤ºä¾‹æˆåŠŸï¼š</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.2.2.png" alt="img"></p><blockquote><p>ä»æŠ€æœ¯ä¸Šè®²ï¼Œè¿™å–å†³äºæ‚¨å¯¹ Dijkstra çš„å®ç°ã€‚å¦‚æœæˆ‘ä»¬ç¡®ä¿æ”¾å®½æ­¥éª¤åªè€ƒè™‘ä»åœ¨é˜Ÿåˆ—ä¸­ï¼ˆå°šæœªè®¿é—®ï¼‰çš„é‚»å±…ï¼Œé‚£ä¹ˆç¡®å® B<em>â†’</em>C* æ°¸è¿œä¸ä¼šè€ƒè™‘ã€‚å¦‚æœä½ æ²¡æœ‰è¿™ä¸ªæ£€æŸ¥ï¼Œé‚£ä¹ˆä»æŠ€æœ¯ä¸Šè®²ï¼Œå½“æˆ‘ä»¬ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºæœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆBï¼‰æ—¶ï¼Œæˆ‘ä»¬ä¼šè€ƒè™‘Bçš„é‚»å±…å¹¶æ›´æ–°Cï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªç‰¹å®šç¤ºä¾‹çš„æ­£ç¡®ç­”æ¡ˆã€‚ç„¶è€Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäººä»¬å¯èƒ½ä¼šäº‰è¾©è¯´è¯¥å›¾æ‰“ç ´äº† Dijkstra ä¸å˜é‡ï¼Œå› æ­¤ Dijkstra å·²ç»â€œå¤±è´¥â€ã€‚è¯·æ³¨æ„ï¼ŒDijkstra ä¸å˜æ€§ï¼šä¸€æ—¦ä»é˜Ÿåˆ—ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆè®¿é—®ï¼‰ï¼Œæ‚¨å°±æ‰¾åˆ°äº†è¯¥èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</p></blockquote><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/image-20240406221358930.png" alt="image-20240406221358930"></p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/image-20240406221418601.png" alt="image-20240406221418601"></p><h2 id="DAG-çš„æœ€çŸ­è·¯å¾„ç®—æ³•"><a href="#DAG-çš„æœ€çŸ­è·¯å¾„ç®—æ³•" class="headerlink" title="DAG çš„æœ€çŸ­è·¯å¾„ç®—æ³•"></a>DAG çš„æœ€çŸ­è·¯å¾„ç®—æ³•</h2><div class="row">    <embed src="CS61BDAGSPTDemoWithNegativeEdge.pdf" width="100%" height="550" type="application/pdf"></div><p>æŒ‰æ‹“æ‰‘é¡ºåºè®¿é—®é¡¶ç‚¹ï¼š</p><ul><li>æ¯æ¬¡è®¿é—®æ—¶ï¼Œé‡Šæ”¾æ‰€æœ‰å¤–å‘çš„è¾¹ç¼˜</li></ul><p>å›æƒ³ä¸€ä¸‹ç”¨é‡é‡ <em>w</em> é‡Šæ”¾è¾¹ç¼˜<em>u</em>â†’<em>v</em> çš„å®šä¹‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if distTo[u] + w &lt; distTo[v]:</span><br><span class="line">    distTo[v] = distTo[u] + w</span><br><span class="line">    edgeTo[v] = u</span><br></pre></td></tr></table></figure><p>ç”±äºæˆ‘ä»¬æŒ‰æ‹“æ‰‘é¡ºåºè®¿é—®é¡¶ç‚¹ï¼Œå› æ­¤åªæœ‰åœ¨è€ƒè™‘äº†æœ‰å…³é¡¶ç‚¹çš„æ‰€æœ‰å¯èƒ½ä¿¡æ¯åï¼Œæ‰ä¼šè®¿é—®é¡¶ç‚¹ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœè´Ÿè¾¹æƒé‡å­˜åœ¨äºé€šå¾€ <em>v</em> çš„è·¯å¾„ä¸Šï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬åˆ°è¾¾ <em>v</em> ï¼</p><p>æ‰¾åˆ°æ‹“æ‰‘æ’åºéœ€è¦ <em>O</em>(<em>V</em>+<em>E</em>) æ—¶é—´ï¼Œè€Œæ¯ä¸ªé¡¶ç‚¹çš„æ¾å¼›ä¹Ÿéœ€è¦æ€»å…±æ—¶é—´ <em>O</em>(<em>V</em>+<em>E</em>) ã€‚å› æ­¤ï¼Œæ•´ä¸ªè¿è¡Œæ—¶ä¸º <em>O</em>(<em>V</em>+<em>E</em>) ã€‚å›æƒ³ä¸€ä¸‹ï¼ŒDijkstra éœ€è¦ <em>O</em>((<em>V</em>+<em>E</em>)log<em>V</em>) æ—¶é—´ï¼Œå› ä¸ºæˆ‘ä»¬çš„æœ€å°å †æ“ä½œã€‚</p><p>å¦‚æœæˆ‘ä»¬æƒ³è§£å†³ä¸æ˜¯ DAG å¹¶ä¸”å¯èƒ½å…·æœ‰è´Ÿè¾¹çš„å›¾ä¸Šçš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œè¯¥æ€ä¹ˆåŠï¼ŸDijkstra çš„æ‰©å±•ç§°ä¸º Bellman Ford å¯ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ï¼Œå°½ç®¡å®ƒè¶…å‡ºäº†æœ¬è¯¾ç¨‹çš„èŒƒå›´ã€‚</p><table><thead><tr><th>Problem</th><th>Problem Description</th><th>Solution</th><th>Efficiency</th></tr></thead><tbody><tr><td>topological sort</td><td>Find an ordering of vertices that respects edges of our DAG.</td><td><a href="https://docs.google.com/presentation/d/1Bvf4PooGooUCr-K9cA1kbhsNc0hXW5Jwn-QD0in-1pc/edit#slide=id.g99668982c_1_693">Demo</a>Code: Topological.java</td><td>O(V+E) timeÎ˜(V) space</td></tr><tr><td>DAG shortest paths</td><td>Find a shortest paths tree on a DAG.</td><td><a href="https://docs.google.com/presentation/d/1CfnLS3FSXV8X2sXPTravZGXeBUUkcFQv7Uf2iGWGUfs/edit#slide=id.g76e0dad85_2_380">Demo</a>Code: <a href="https://algs4.cs.princeton.edu/44sp/AcyclicSP.java">AcyclicSP.java</a></td><td>O(V+E) timeÎ˜(V) space</td></tr></tbody></table><h1 id="æœ€é•¿è·¯å¾„"><a href="#æœ€é•¿è·¯å¾„" class="headerlink" title="æœ€é•¿è·¯å¾„"></a>æœ€é•¿è·¯å¾„</h1><h2 id="é€šå¸¸"><a href="#é€šå¸¸" class="headerlink" title="é€šå¸¸"></a>é€šå¸¸</h2><p>è€ƒè™‘æŸ¥æ‰¾ä»èµ·å§‹é¡¶ç‚¹åˆ°å…¶ä»–æ¯ä¸ªé¡¶ç‚¹çš„æœ€é•¿è·¯å¾„çš„é—®é¢˜ã€‚è·¯å¾„å¿…é¡»ç®€å•ï¼ˆä¸åŒ…å«å¾ªç¯ï¼‰ã€‚</p><p>äº‹å®è¯æ˜ï¼Œæœ€è‘—åçš„ç®—æ³•æ˜¯æŒ‡æ•°çº§çš„ï¼ˆä¸åˆ‡å®é™…çš„ä½æ•ˆï¼‰ã€‚</p><p>å–è´Ÿæ‰€æœ‰çš„è¾¹ç¼˜æƒé‡å¹¶æ‰¾åˆ°æœ€çŸ­è·¯å¾„ä¼šè®©æˆ‘ä»¬å¤„äºä¸€ä¸ªæ£˜æ‰‹çš„å¢ƒåœ°ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬å¯èƒ½ä¼šæœ‰è´Ÿå¾ªç¯ï¼Œæˆ‘ä»¬å¯èƒ½æ— é™æœŸåœ°ç»•è¿‡å®ƒä»¬ã€‚</p><h3 id="DAG-ä¸Šçš„æœ€é•¿è·¯å¾„"><a href="#DAG-ä¸Šçš„æœ€é•¿è·¯å¾„" class="headerlink" title="DAG ä¸Šçš„æœ€é•¿è·¯å¾„"></a>DAG ä¸Šçš„æœ€é•¿è·¯å¾„</h3><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¤„ç†çš„æ˜¯ DAGï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ²¡æœ‰å¾ªç¯ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä¸Šé¢çš„å»ºè®®è¿›è¡Œæ“ä½œï¼š</p><ol><li>å½¢æˆå›¾å½¢çš„æ–°å‰¯æœ¬ï¼Œç§°ä¸º Gâ€™ï¼Œæ‰€æœ‰è¾¹æƒé‡å‡è¢«å¦å®šï¼ˆç¬¦å·ç¿»è½¬ï¼‰ã€‚</li><li>åœ¨ Gâ€™ ä¸Šè¿è¡Œ DAG æœ€çŸ­è·¯å¾„ï¼Œå¾—åˆ°ç»“æœ X</li><li>ç¿»è½¬ X.distTo ä¸­æ‰€æœ‰å€¼çš„ç¬¦å·ã€‚X.edgeTo å·²ç»æ­£ç¡®ã€‚</li></ol><p>æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸Šä¸€èŠ‚ä¸­çš„ DAG æœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œä»¥åœ¨æ¾å¼›è¾¹æ—¶é€‰æ‹©è¾ƒå¤§çš„ distToã€‚è™½ç„¶è¿™åœ¨å®è·µä¸­æ›´æœ‰æ„ä¹‰ï¼Œä½†è€ƒè™‘ç¬¬ä¸€ç§æ–¹æ³•çš„å¥½å¤„æ˜¯èƒ½å¤Ÿå°†ç°æœ‰ç®—æ³•ç”¨ä½œâ€<a href="https://en.wikipedia.org/wiki/Black_box">black box</a>â€œæ¥è§£å†³æ–°é—®é¢˜ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è¯¦ç»†äº†è§£æ­¤ç±»é—®é¢˜è§£å†³ï¼š <a href="https://joshhug.gitbooks.io/hug61b/content/chap214.md">Reductions</a>.</p><h1 id="è¿˜åŸå’Œåˆ†è§£"><a href="#è¿˜åŸå’Œåˆ†è§£" class="headerlink" title="è¿˜åŸå’Œåˆ†è§£"></a>è¿˜åŸå’Œåˆ†è§£</h1><p>å›æƒ³ä¸€ä¸‹åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œä¸ºäº†è§£å†³ä¸€ä¸ªé—®é¢˜ï¼ˆæœ€é•¿è·¯å¾„ï¼‰ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å›¾å½¢ Gâ€™ å¹¶å°†å…¶è¾“å…¥åˆ°ä¸åŒçš„ç®—æ³•ä¸­ï¼Œç„¶åè§£é‡Šç»“æœã€‚</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.4.2.png" alt="img"></p><p>è¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>reductionè¿˜åŸ</strong>ã€‚ç”±äº DAG-SPT å¯ç”¨äºæ±‚è§£ DAG-LPTï¼Œå› æ­¤æˆ‘ä»¬è¯´â€œDAG-LPT ç®€åŒ–ä¸º DAG-SPTâ€ã€‚</p><p>æ¢å¥è¯è¯´ï¼ŒDAG-LPTçš„é—®é¢˜å¯ä»¥ç®€åŒ–ä¸ºDAG-SPTçš„é—®é¢˜ã€‚</p><p>åƒ DAG-LPT è¿™æ ·çš„é—®é¢˜å¯èƒ½ä¼šç®€åŒ–ä¸ºå¤šä¸ªå…¶ä»–é—®é¢˜ã€‚ä½œä¸ºç°å®ä¸–ç•Œçš„ç±»æ¯”ï¼Œè€ƒè™‘çˆ¬å±±ã€‚æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥è§£å†³â€œçˆ¬å±±â€çš„é—®é¢˜ã€‚</p><ul><li>â€œçˆ¬å±±â€ç®€åŒ–ä¸ºâ€œä¹˜åæ»‘é›ªç¼†è½¦â€</li><li>â€œçˆ¬å±±â€æ²¦ä¸ºâ€œè¢«å¤§ç‚®å°„å‡ºâ€</li><li>çˆ¬å±±â€ç®€åŒ–ä¸ºâ€œéª‘è‡ªè¡Œè½¦ä¸Šå±±â€</li></ul><p>ä»å½¢å¼ä¸Šè®²ï¼Œ<strong>å¦‚æœä»»åŠ¡ Q çš„ä»»ä½•å­ç¨‹åºéƒ½å¯ä»¥ç”¨æ¥æ±‚è§£ Pï¼Œæˆ‘ä»¬è¯´ P ç®€åŒ–ä¸º Qã€‚</strong></p><p>æ­¤å®šä¹‰å¯è§†åŒ–å¦‚ä¸‹ï¼š</p><p><img src="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-22-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd21-%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%E4%B8%8EDAG%E5%92%8C%E8%BF%98%E5%8E%9F%E4%B8%8E%E5%88%86%E8%A7%A3/21.4.1.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œè¿™åªæ˜¯æœ¬é¡µç¬¬ä¸€ä¸ªå›¾å½¢çš„æ¦‚æ‹¬ã€‚P ç®€åŒ–ä¸º Qï¼Œå› ä¸º Q ç”¨äºæ±‚è§£ Pã€‚å…¶å·¥ä½œåŸç†æ˜¯å°†è¾“å…¥ <em>x</em> é¢„å¤„ç†æˆ <em>y</em> ï¼Œè¿è¡Œç®—æ³• Q åˆ° <em>y</em> ï¼Œå¹¶å°†è¾“å‡ºåå¤„ç†æˆ P çš„è§£ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å°† DAG-LPT ç®€åŒ–ä¸º DAG-SPT çš„æ–¹æ³•ã€‚</p><h2 id="Reflection-åå°„"><a href="#Reflection-åå°„" class="headerlink" title="Reflection åå°„"></a>Reflection åå°„</h2><p>å¯ä»¥è¯´ï¼Œæˆ‘ä»¬åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¸€ç›´åœ¨reductionã€‚</p><ul><li>Abstract Lists reduce to arrays or linked lists<br>æ‘˜è¦åˆ—è¡¨ç®€åŒ–ä¸ºæ•°ç»„æˆ–é“¾è¡¨</li><li>Percolation reduces to Disjoint Sets<br>æ¸—æµå‡å°‘åˆ°ä¸ç›¸äº¤é›†</li><li>Maze generation reduces to [your solution here ;)]<br>è¿·å®«ç”Ÿæˆå‡å°‘åˆ° [æ‚¨çš„è§£å†³æ–¹æ¡ˆåœ¨è¿™é‡Œ;)]</li></ul><p>ä½†æ˜¯ï¼Œè¿™äº›å¹¶ä¸å®Œå…¨æ˜¯å‡å°‘ï¼Œå› ä¸ºæ‚¨æ²¡æœ‰ä½¿ç”¨å…¶ä»–å•ä¸€ç®—æ³•æ¥è§£å†³æ‚¨çš„é—®é¢˜ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‰é¢çš„çº¦ç®€ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç‹¬ç«‹é›†ç®—æ³•ä½œä¸ºâ€™<a href="https://en.wikipedia.org/wiki/Black_box">black box</a>â€˜æ¥è§£å†³ 3SATã€‚</p><p>å¯¹äºæˆ‘ä»¬åœ¨è¯¾ç¨‹å‰é¢æ‰€å®Œæˆçš„å·¥ä½œæ¥è¯´ï¼Œä¹Ÿè®¸ä¸€ä¸ªæ›´å¥½çš„æœ¯è¯­æ˜¯<em>decompositionåˆ†è§£</em> - å°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£æˆæ›´å°çš„éƒ¨åˆ†ã€‚ä½¿ç”¨æŠ½è±¡ä½¿è§£å†³é—®é¢˜æ›´å®¹æ˜“ã€‚è¿™æ˜¯è®¡ç®—æœºç§‘å­¦çš„æ ¸å¿ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°-æ•°æ®ç»“æ„ä»£ç å®ç°</title>
      <link href="/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/"/>
      <url>/2024/04/06/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç¬”è®°(å››)-Lab6-æ–‡ä»¶åºåˆ—åŒ–</title>
      <link href="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/"/>
      <url>/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/</url>
      
        <content type="html"><![CDATA[<h1 id="LabçŸ¥è¯†ç‚¹"><a href="#LabçŸ¥è¯†ç‚¹" class="headerlink" title="LabçŸ¥è¯†ç‚¹"></a>LabçŸ¥è¯†ç‚¹</h1><ul><li>å¦‚ä½•ä»å‘½ä»¤è¡Œè¿è¡Œ Java å¹¶è¿è¡Œ Capers çš„æµ‹è¯•ï¼ˆGitlet çš„æµ‹è¯•éå¸¸éå¸¸ç›¸ä¼¼ï¼‰ã€‚</li><li>å¦‚ä½•åœ¨ Java ä¸­ä½¿ç”¨æ–‡ä»¶å’Œç›®å½•ã€‚</li><li>å¦‚ä½•å°† Java å¯¹è±¡åºåˆ—åŒ–ä¸ºæ–‡ä»¶å¹¶åœ¨ä»¥åè¯»å›å®ƒä»¬ï¼ˆä¹Ÿç§°ä¸ºæŒä¹…æ€§ï¼‰ã€‚</li></ul><p><strong>é‡è¦è¯´æ˜</strong>ï¼šé™æ€å˜é‡åœ¨ä¸¤æ¬¡æ‰§è¡Œä¹‹é—´ä¸ä¼šåœ¨ Java ä¸­ä¿ç•™ã€‚å½“ç¨‹åºå®Œæˆæ‰§è¡Œæ—¶ï¼Œæ‰€æœ‰å®ä¾‹å’Œé™æ€å˜é‡éƒ½å°†å®Œå…¨ä¸¢å¤±ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œä¹‹é—´ä¿æŒæŒä¹…æ€§çš„å”¯ä¸€æ–¹æ³•æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</p><h1 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h1><p>ä¸ç”¨shellå’Œcmdï¼Œæˆ‘ä»¬ç”¨git bashæ¥æ‰“å¼€æ–‡ä»¶å¤¹</p><p>é¦–å…ˆï¼Œç¡®ä¿æ‚¨å½“å‰çš„å·¥ä½œç›®å½•æ˜¯ <code>sp21-s***/lab6/capers</code> ã€‚è¿™äº›å‘½ä»¤å°†å¸¦æ‚¨åˆ°è¾¾é‚£é‡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd $REPO_DIR</span><br><span class="line">$ cd lab6/capers</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘JAVAæ–‡ä»¶"><a href="#ç¼–è¯‘JAVAæ–‡ä»¶" class="headerlink" title="ç¼–è¯‘JAVAæ–‡ä»¶"></a>ç¼–è¯‘JAVAæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ javac *.java</span><br></pre></td></tr></table></figure><p><code>*.java</code> é€šé…ç¬¦ä»…è¿”å›å½“å‰ç›®å½•ä¸­çš„æ‰€æœ‰ <code>.java</code> æ–‡ä»¶ã€‚å†æ¬¡è¿è¡Œ <code>ls</code> ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€å †æ–° <code>.class</code> æ–‡ä»¶ï¼ŒåŒ…æ‹¬ <code>Main.class</code> .è¿™äº›æ–‡ä»¶æ„æˆç¼–è¯‘çš„ä»£ç ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚</p><h2 id="æŸ¥çœ‹JAVAæ–‡ä»¶"><a href="#æŸ¥çœ‹JAVAæ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹JAVAæ–‡ä»¶"></a>æŸ¥çœ‹JAVAæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat Main.class</span><br></pre></td></tr></table></figure><p>è¯¥å‘½ä»¤å°†æ‰“å°å‡ºæ–‡ä»¶çš„å†…å®¹ã€‚ä½ ä¼šçœ‹åˆ°å¤§éƒ¨åˆ†å¸¦æœ‰è®¸å¤šç‰¹æ®Šå­—ç¬¦çš„åƒåœ¾ã€‚è¿™è¢«ç§°ä¸ºå­—èŠ‚ç ï¼Œå°½ç®¡å®ƒå¯¹æˆ‘ä»¬æ¥è¯´çœ‹èµ·æ¥å¾ˆé™Œç”Ÿï¼Œä½† <code>java</code> ç¨‹åºå¯ä»¥è·å–è¿™äº›ç¼–è¯‘çš„ä»£ç å¹¶å®é™…è§£é‡Šå®ƒä»¥è¿è¡Œç¨‹åºã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒå‘ç”Ÿï¼š</p><h2 id="è¿è¡ŒJAVAæ–‡ä»¶"><a href="#è¿è¡ŒJAVAæ–‡ä»¶" class="headerlink" title="è¿è¡ŒJAVAæ–‡ä»¶"></a>è¿è¡ŒJAVAæ–‡ä»¶</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java Main</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé”™è¯¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Error: Could not find or load main class Main</span><br><span class="line">Caused by: java.lang.NoClassDefFoundError: capers/Main (wrong name: Main)</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªé”™è¯¯ç¿»è¯‘æˆè‹±è¯­ï¼Œé‚£å°±æ˜¯è¯´â€œæˆ‘ä¸çŸ¥é“ <code>Main</code> ä½ åœ¨è¯´ä»€ä¹ˆâ€ã€‚é‚£æ˜¯å› ä¸º <code>Main.java</code> åœ¨åŒ…ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å®ƒçš„å®Œå…¨è§„èŒƒåç§°ï¼Œå³ <code>capers.Main</code> .ä¸ºæ­¤ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd ..                 # takes us up a directory to sp21-s***/lab6</span><br><span class="line">$ java capers.Main</span><br></pre></td></tr></table></figure><p>ç°åœ¨ç¨‹åºç»ˆäºè¿è¡Œå¹¶æ‰“å°å‡ºæ¥äº†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Must have at least one argument</span><br></pre></td></tr></table></figure><p><strong>æ•™è®­ï¼š</strong>è¦è¿è¡ŒåŒ…ä¸­çš„ Java æ–‡ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»è¾“å…¥çˆ¶ç›®å½•ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ <code>lab6</code> ï¼‰å¹¶ä½¿ç”¨å®Œå…¨è§„èŒƒçš„åç§°ã€‚</p><p>å…³äºå‘½ä»¤è¡Œæ‰§è¡Œçš„æœ€åä¸€ä»¶äº‹ï¼šæˆ‘ä»¬å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™ <code>main</code> æ–¹æ³•ï¼Ÿå›æƒ³ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬è¿è¡Œä¸€ä¸ªç±»ï¼ˆå³ <code>java Main</code> ï¼‰ï¼ŒçœŸæ­£å‘ç”Ÿçš„æ˜¯è°ƒç”¨è¯¥ç±» <code>main(String[] args)</code> çš„æ–¹æ³•ã€‚è¦ä¼ é€’å‚æ•°ï¼Œåªéœ€åœ¨è°ƒç”¨ä¸­å°†å®ƒä»¬æ·»åŠ åˆ°ï¼š <code>java</code></p><h2 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java capers.Main story &quot;this is a single argument&quot;</span><br></pre></td></tr></table></figure><p>å¦‚ä¸Šæ‰€è¿°ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†è¯¥å‚æ•°ç”¨å¼•å·æ‹¬èµ·æ¥ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ª <code>String[] args</code> å…ƒç´ ä¸­æœ‰ä¸€ä¸ªç©ºæ ¼ã€‚</p><p>åœ¨ä¸Šé¢çš„æ‰§è¡Œä¸­ï¼Œå˜é‡ <code>String[] args</code> å…·æœ‰ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;story&quot;, &quot;this is a single argument&quot;&#125;</span><br></pre></td></tr></table></figure><p>æ‚¨å°†åœ¨æœ¬å®éªŒå’Œ Gitlet ä¸­ä½¿ç”¨è¯¥ <code>String[] args</code> å˜é‡ã€‚å·²ç»æä¾›äº†ä¸€äº›éª¨æ¶æ¥å‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨ <code>Main</code> ç±» <code>main</code> çš„æ–¹æ³•ä¸­å®Œæˆå®ƒã€‚</p><h1 id="makeçš„gitå¥—ä»¶"><a href="#makeçš„gitå¥—ä»¶" class="headerlink" title="makeçš„gitå¥—ä»¶"></a>makeçš„gitå¥—ä»¶</h1><p>ç”± Paul Hilfinger å’Œ 61B åŠ©æ•™æ„å»ºçš„è‡ªå®šä¹‰å‘½ä»¤è¡Œæµ‹è¯•å¥—ä»¶ï¼Œè¯¥å¥—ä»¶ä½¿ç”¨ python ä½œä¸ºåŸºæœ¬å¼•æ“æ¥éªŒè¯æœ¬å®éªŒå’Œé¡¹ç›® 2 çš„ç¨‹åºæ­£ç¡®æ€§ã€‚</p><p>æµ‹è¯•å¥—ä»¶ä½¿ç”¨åä¸º <code>make</code> çš„æ ‡å‡† unix å·¥å…·æ‰§è¡Œã€‚æˆ‘ä»¬ä¸ä¼š <code>make</code> è¯¦ç»†è®¨è®ºå¦‚ä½•ä½¿ç”¨ã€‚åªè¦çŸ¥é“æœ‰ä¸¤ä»¶äº‹ä½ å¯ä»¥ç”¨ <code>make</code> ï¼š</p><ol><li>ä½¿ç”¨å‘½ä»¤ <code>make</code> ç¼–è¯‘ä»£ç ã€‚</li><li>ä½¿ç”¨ <code>make check</code> å‘½ä»¤è¿è¡Œæµ‹è¯•å¥—ä»¶ã€‚</li></ol><p>è¿˜æœ‰ä¸€ç§çº¿ç¨‹æ–¹å¼å¯ä»¥ä½¿ç”¨ <code>make</code> ã€‚å…·ä½“ <code>make clean</code> æ¥è¯´ï¼Œ <code>.class</code> å¦‚æœé¡¹ç›®æ–‡ä»¶å¤¹ä¸­æœ‰å¤ªå¤šæ–‡ä»¶ä¼šæ‰“æ‰°æ‚¨ï¼Œå°†åˆ é™¤æ‰€æœ‰æ–‡ä»¶å’Œå…¶ä»–æ··ä¹±ã€‚æˆ‘ä»¬å»ºè®®æ‚¨åœ¨å®Œæˆæµ‹è¯•å¹¶å¸Œæœ›è¿”å› IntelliJ ä¸­ç¼–è¾‘ <code>.java</code> æ–‡ä»¶åè¿è¡Œæ­¤æ–‡ä»¶ã€‚</p><h1 id="Java-ä¸­çš„æ–‡ä»¶å’Œç›®å½•"><a href="#Java-ä¸­çš„æ–‡ä»¶å’Œç›®å½•" class="headerlink" title="Java ä¸­çš„æ–‡ä»¶å’Œç›®å½•"></a>Java ä¸­çš„æ–‡ä»¶å’Œç›®å½•</h1><h2 id="å½“å‰å·¥ä½œç›®å½•"><a href="#å½“å‰å·¥ä½œç›®å½•" class="headerlink" title="å½“å‰å·¥ä½œç›®å½•"></a>å½“å‰å·¥ä½œç›®å½•</h2><p>Java ç¨‹åºçš„å½“å‰å·¥ä½œç›®å½• ï¼ˆCWD&#x2F;<a href="https://en.wikipedia.org/wiki/Working_directory">current working directory</a> ï¼‰ æ˜¯æ‰§è¡Œè¯¥ Java ç¨‹åºçš„ç›®å½•ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ ä» Java ç¨‹åºä¸­è®¿é—® <code>System.getProperty(&quot;user.dir&quot;)</code> CWDã€‚ä»¥ä¸‹æ˜¯ Windows å’Œ Mac&#x2F;Linux ç”¨æˆ·çš„ç¤ºä¾‹ - å®ƒä»¬éå¸¸ç›¸ä¼¼ï¼Œåªæ˜¯åœ¨é£æ ¼ä¸Šæœ‰æ‰€ä¸åŒã€‚</p><p>Windows ä¾‹å¦‚ï¼Œå¯¹äº Windows ç”¨æˆ·ï¼Œå‡è®¾æˆ‘ä»¬æœ‰è¿™ä¸ªå° Java ç¨‹åºä½äºåä¸º <code>C:/Users/Michelle/example</code> <code>Example.java</code> çš„æ–‡ä»¶å¤¹ï¼ˆæˆ– <code>~/example</code> ï¼‰ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// file C:/Users/Michelle/example/Example.java</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     System.out.println(System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ‰“å°å‡ºè¯¥ Java ç¨‹åºçš„ CWD çš„ç¨‹åºã€‚</p><p>å¦‚æœæˆ‘è·‘äº†ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cd C:/Users/Michelle/example/</span><br><span class="line">$ javac Example.java</span><br><span class="line">$ java Example</span><br></pre></td></tr></table></figure><p>è¾“å‡ºåº”ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Michelle\example</span><br></pre></td></tr></table></figure><h3 id="IntelliJ"><a href="#IntelliJ" class="headerlink" title="IntelliJ"></a>IntelliJ</h3><p>åœ¨ IntelliJ ä¸­ï¼ŒCWD ç”±â€œè¿è¡Œâ€&gt;â€œ&gt;å·¥ä½œç›®å½•ç¼–è¾‘é…ç½®â€ä¸‹çš„æŒ‡å®šç›®å½•ç»™å‡ºï¼š</p><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/intellij_cwd.png" alt="IntelliJ Working Directory"></p><p>è¯·æ³¨æ„ï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œ <code>Main.java</code> ä¸€æ¬¡æ‰èƒ½æ˜¾ç¤ºæ­¤é€‰é¡¹ã€‚</p><h3 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h3><p>åœ¨ç»ˆç«¯ &#x2F; Git Bash ä¸­ï¼Œè¯¥å‘½ä»¤ <code>pwd</code> å°†ä¸ºæ‚¨æä¾› CWDã€‚</p><h2 id="ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"><a href="#ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„" class="headerlink" title="ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"></a>ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</h2><p>è·¯å¾„æ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„ä½ç½®ã€‚æœ‰ä¸¤ç§è·¯å¾„ï¼šç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„ã€‚</p><ul><li><strong>ç»å¯¹è·¯å¾„</strong>æ˜¯æ–‡ä»¶æˆ–ç›®å½•ç›¸å¯¹äºæ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•çš„ä½ç½®ã€‚<ul><li>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ <code>Example.java</code> ç»å¯¹è·¯å¾„æ˜¯ <code>C:/Users/Michelle/example/Example.java</code> ï¼ˆWindowsï¼‰ æˆ– <code>/home/Michelle/example/Example.java</code> ï¼ˆMac&#x2F;Linuxï¼‰ã€‚è¯·æ³¨æ„ï¼Œè¿™äº›è·¯å¾„ Windows ä»¥<code>C:/</code> å’ŒMac&#x2F;Linux ä»¥ <code>/</code> çš„æ ¹ç›®å½•å¼€å¤´ã€‚</li></ul></li><li><strong>ç›¸å¯¹è·¯å¾„</strong>æ˜¯æ–‡ä»¶æˆ–ç›®å½•ç›¸å¯¹äºç¨‹åºçš„ CWD çš„ä½ç½®ã€‚<ul><li>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæˆ‘åœ¨ <code>C:/Users/Michelle/example/</code> ï¼ˆWindowsï¼‰ æˆ– <code>/home/Michelle/example/ï¼ˆMac/Linuxï¼‰</code> æ–‡ä»¶å¤¹ä¸­ ï¼Œé‚£ä¹ˆ  <code>Example.java</code> çš„ç›¸å¯¹è·¯å¾„å°†æ˜¯ <code>Example.java</code> ã€‚ </li><li>å¦‚æœæˆ‘åœ¨ <code>C:/Users/Michelle/</code> æˆ– <code>/home/Michelle/</code> ä¸­ï¼Œåˆ™ çš„ <code>Example.java</code> ç›¸å¯¹è·¯å¾„ä¸º <code>example/Example.java</code> ã€‚</li></ul></li></ul><p>æ³¨æ„ï¼šæ–‡ä»¶ç³»ç»Ÿçš„æ ¹ç›®å½•ä¸ä¸»ç›®å½•ä¸åŒã€‚æ‚¨çš„ä¸»ç›®å½•é€šå¸¸ä½äº <code>C:/Users/&lt;your username&gt;</code> ï¼ˆWindowsï¼‰ æˆ– <code>/home/&lt;your username&gt;</code> ï¼ˆMac&#x2F;Linuxï¼‰ã€‚æˆ‘ä»¬ç”¨ä½œ <code>~</code> æŒ‡ä»£æ‚¨çš„ä¸»ç›®å½•çš„ç®€å†™ï¼Œå› æ­¤å½“æ‚¨åœ¨ <code>~/sp21-s***</code> æ—¶ï¼Œæ‚¨å®é™…ä¸Šæ˜¯åœ¨ <code>C:/Users/&lt;your username&gt;/sp21-s***</code> ï¼ˆWindowsï¼‰ æˆ– <code>/home/&lt;your username&gt;/sp21-s***</code> ï¼ˆMac&#x2F;Linuxï¼‰ã€‚*</p><p>ä½¿ç”¨è·¯å¾„æ—¶ï¼Œ <code>.</code> æŒ‡ CWDã€‚å› æ­¤ï¼Œç›¸å¯¹è·¯å¾„ <code>./example/Example.java</code> ä¸ <code>example/Example.java</code> ç›¸åŒã€‚</p><p>åŒæ ·ï¼Œ <code>..</code> å¼•ç”¨çˆ¶ï¼ˆæˆ–å°é—­ï¼‰ç›®å½•ã€‚æ‰€ä»¥å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br></pre></td></tr></table></figure><p>æ˜¯å¯¼èˆªåˆ°çˆ¶ç›®å½•çš„ä¸€ç§å¿«é€Ÿè€Œç®€å•çš„æ–¹æ³•ã€‚å¦‚æœè¦è½¬åˆ°çˆ¶ç›®å½•ï¼Œå¯ä»¥å°†å®ƒä»¬ä¸²åœ¨ä¸€èµ·ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ../..</span><br></pre></td></tr></table></figure><p>ä¸çˆ¶çº§çš„çˆ¶çº§ç›®å½•ç±»ä¼¼ã€‚åœ¨æ­¤å®éªŒå®¤&#x2F;é¡¹ç›®ä¸­ï¼Œæ‚¨ä¸éœ€è¦æ‰§è¡Œæ­¤æ“ä½œï¼Œå°½ç®¡å¿«é€Ÿæµè§ˆç»ˆç«¯å¾ˆæœ‰ç”¨ã€‚</p><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/image-20240323174651000.png" alt="image-20240323174651000"></p><h2 id="Java-ä¸­çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œ"><a href="#Java-ä¸­çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œ" class="headerlink" title="Java ä¸­çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œ"></a>Java ä¸­çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œ</h2><p>Java File ç±»è¡¨ç¤ºæ“ä½œç³»ç»Ÿä¸­çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¹¶å…è®¸æ‚¨å¯¹è¿™äº›æ–‡ä»¶å’Œç›®å½•æ‰§è¡Œæ“ä½œã€‚åœ¨æœ¬ç±»ä¸­ï¼Œæ‚¨é€šå¸¸å¸Œæœ›é€šè¿‡å¼•ç”¨æ–‡ä»¶å’Œç›®å½•çš„ç›¸å¯¹è·¯å¾„æ¥å¯¹æ–‡ä»¶å’Œç›®å½•æ‰§è¡Œæ“ä½œã€‚æ‚¨å¸Œæœ›æ‚¨åˆ›å»ºçš„ä»»ä½•æ–°æ–‡ä»¶æˆ–ç›®å½•éƒ½ä¸è¿è¡Œç¨‹åºçš„ä½ç½®ï¼ˆåœ¨æœ¬å®éªŒä¸­ä¸º <code>sp21-s***/lab6</code> æ–‡ä»¶å¤¹ï¼‰ä½äºåŒä¸€ç›®å½•ä¸­ï¼Œè€Œä¸æ˜¯è®¡ç®—æœºä¸Šçš„æŸä¸ªéšæœºä½ç½®ã€‚</p><h3 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h3><p>åœ¨Javaä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨Fileæ„é€ å‡½æ•°å¹¶ä¼ å…¥æ–‡ä»¶è·¯å¾„æ¥åˆ›å»ºä¸€ä¸ªFileå¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;dummy.txt&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è·¯å¾„æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¼•ç”¨äº†Javaç¨‹åºå½“å‰å·¥ä½œç›®å½•ä¸­çš„dummy.txtæ–‡ä»¶ã€‚ä½ å¯ä»¥å°†è¿™ä¸ªFileå¯¹è±¡è§†ä¸ºå¯¹å®é™…æ–‡ä»¶dummy.txtçš„å¼•ç”¨ - å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„Fileå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Š<strong>å¹¶æ²¡æœ‰åˆ›å»º</strong>dummy.txtæ–‡ä»¶æœ¬èº«ï¼Œæˆ‘ä»¬åªæ˜¯åœ¨è¯´ï¼Œâ€œå°†æ¥ï¼Œå½“æˆ‘å¯¹fè¿›è¡Œæ“ä½œæ—¶ï¼Œæˆ‘æƒ³åœ¨dummy.txtä¸Šæ‰§è¡Œè¿™äº›æ“ä½œâ€ã€‚è¦å®é™…åˆ›å»ºè¿™ä¸ªdummy.txtæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ï¼š</p><blockquote><p>ç±»ä¼¼æŒ‡ä»£æˆ‘éœ€è¦æ“ä½œçš„æ–‡ä»¶</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.createNewFile();</span><br></pre></td></tr></table></figure><p>ç„¶ådummy.txtæ–‡ä»¶ç°åœ¨å®é™…ä¸Šå°±å­˜åœ¨äº†ï¼ˆä½ å¯ä»¥åœ¨æ–‡ä»¶æµè§ˆå™¨&#x2F;æŸ¥æ‰¾å™¨ä¸­çœ‹åˆ°å®ƒï¼‰ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨Fileç±»çš„existsæ–¹æ³•æ£€æŸ¥æ–‡ä»¶â€œdummy.txtâ€æ˜¯å¦å·²ç»å­˜åœ¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f.exists()</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šï¼Œåœ¨Javaä¸­å†™æ–‡ä»¶ç›¸å½“ä¸‘é™‹ã€‚ä¸ºäº†ä¿æŒç®€å•ï¼Œæˆ‘ä»¬ä¸ºä½ æä¾›äº†ä¸€ä¸ªUtils.javaã€‚è¿™ä¸ªç±»åœ¨è¿™ä¸ªå®éªŒå®¤å’ŒGitletä¸­éƒ½éå¸¸æ–¹ä¾¿ã€‚ä½ åº”è¯¥æŸ¥çœ‹Utils.javaä¸­æä¾›çš„å¯ç”¨æ–¹æ³•åˆ—è¡¨ï¼Œä»¥äº†è§£å®ƒå¯ä»¥ä¸ºä½ åšäº›ä»€ä¹ˆã€‚æŸ¥çœ‹æœ¬å®éªŒå®¤åº•éƒ¨çš„FAQä»¥è·å–å…³æ³¨ç‚¹æç¤ºã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³å°†ä¸€ä¸ªå­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Utils.writeContents(f, <span class="string">&quot;Hello World&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç°åœ¨dummy.txtæ–‡ä»¶ä¸­å°†åŒ…å«æ–‡æœ¬â€œHello Worldâ€ã€‚</p><h3 id="Directories"><a href="#Directories" class="headerlink" title="Directories"></a>Directories</h3><p>åœ¨Javaä¸­ï¼Œç›®å½•ä¹Ÿç”¨Fileå¯¹è±¡è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºç›®å½•çš„Fileå¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">File</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;dummy&quot;</span>);</span><br></pre></td></tr></table></figure><p>ä¸æ–‡ä»¶ç±»ä¼¼ï¼Œè¿™ä¸ªç›®å½•åœ¨ä½ çš„æ–‡ä»¶ç³»ç»Ÿä¸­å¯èƒ½å®é™…ä¸Šå¹¶ä¸å­˜åœ¨ã€‚è¦åœ¨ä½ çš„æ–‡ä»¶ç³»ç»Ÿä¸­å®é™…åˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d.mkdir();</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ çš„å½“å‰å·¥ä½œç›®å½•ä¸­åº”è¯¥æœ‰ä¸€ä¸ªåä¸ºdummyçš„æ–‡ä»¶å¤¹ã€‚ä½ è¿˜åº”è¯¥æŸ¥çœ‹mkdirs()æ–¹æ³•ï¼Œå…¶æ–‡æ¡£å¯ä»¥åœ¨æ­¤å¤„æ‰¾åˆ°ã€‚</p><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>åœ¨Javaä¸­æœ‰è®¸å¤šæ“ä½œæ–‡ä»¶çš„æ–¹æ³•ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥çœ‹Fileçš„Javadocå’Œæœç´¢æ¥æ¢ç´¢æ›´å¤šã€‚åœ¨çº¿èµ„æºæœ‰å¾ˆå¤šï¼Œå¦‚æœä½ æœç´¢ä¸€ä¸‹ï¼Œä½¿ç”¨Javaè¿›è¡Œæ›´å¤šçš„å¤æ‚æ–‡ä»¶æ“ä½œå¯èƒ½ä¼šå˜å¾—æœ‰ç‚¹å¤æ‚ã€‚æˆ‘ä»¬å»ºè®®é€šè¿‡å®Œæˆè¿™ä¸ªå®éªŒå®¤æ¥ç†è§£åŸºç¡€çŸ¥è¯†ï¼Œåœ¨å°†æ¥ï¼Œå¦‚æœä½ é‡åˆ°ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„ç”¨ä¾‹ï¼Œå†å¼€å§‹æœç´¢æˆ–åœ¨Edä¸Šæé—®ã€‚å¯¹äºè¿™ä¸ªå®éªŒå®¤å’ŒGitletï¼Œä½ åº”è¯¥ä½¿ç”¨æˆ‘ä»¬çš„Utils.javaç±»ï¼Œå®ƒå…·æœ‰è®¸å¤šæœ‰ç”¨çš„æ–‡ä»¶æ“ä½œè¾…åŠ©å‡½æ•°ã€‚</p><h1 id="åºåˆ—åŒ–-Serializable"><a href="#åºåˆ—åŒ–-Serializable" class="headerlink" title="åºåˆ—åŒ–(Serializable)"></a>åºåˆ—åŒ–(Serializable)</h1><p>å°†æ–‡æœ¬å†™å…¥æ–‡ä»¶å¾ˆæ£’ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ç¨‹åºä¸­ä¿å­˜ä¸€äº›æ›´å¤æ‚çš„çŠ¶æ€æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦èƒ½å¤Ÿä¿å­˜2048æ¸¸æˆä¸­çš„Modelå¯¹è±¡ï¼Œä»¥ä¾¿ä»¥åå†æ¬¡ä½¿ç”¨å®ƒå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªtoStringæ–¹æ³•å°†Modelè½¬æ¢ä¸ºStringï¼Œç„¶åå°†è¯¥Stringå†™å…¥æ–‡ä»¶ã€‚ç„¶åï¼Œæˆ‘ä»¬è¿˜å¿…é¡»ç¼–å†™èƒ½å¤Ÿè¯»å–è¯¥Stringå¹¶å°†å…¶è§£æå›Modelçš„ä»£ç ã€‚è™½ç„¶è¿™æ ·åšè‚¯å®šæ˜¯å¯èƒ½çš„ï¼Œä½†ç¼–å†™è¿™æ ·çš„ä»£ç æ˜¯å¾ˆçƒ¦ççš„ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç§°ä¸ºåºåˆ—åŒ–çš„æ›¿ä»£æ–¹æ³•ï¼ŒJavaå·²ç»ä¸ºæˆ‘ä»¬å®ç°äº†å®ƒã€‚åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºä¸€ç³»åˆ—å­—èŠ‚çš„è¿‡ç¨‹ï¼Œç„¶åå¯ä»¥å°†è¿™äº›å­—èŠ‚å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ååºåˆ—åŒ–è¿™äº›å­—èŠ‚ï¼Œå¹¶åœ¨ç¨‹åºçš„å°†æ¥è°ƒç”¨ä¸­è·å¾—åŸå§‹å¯¹è±¡ã€‚</p><p>è¦ä¸ºJavaä¸­çš„ç»™å®šç±»å¯ç”¨æ­¤åŠŸèƒ½ï¼Œåªéœ€å®ç°java.io.Serializableæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Model</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ¥å£æ²¡æœ‰æ–¹æ³•ï¼›å®ƒåªæ˜¯ä¸ºäº†ä¸€äº›ç‰¹æ®Šçš„Javaç±»æ¥æ‰§è¡Œå¯¹è±¡çš„I&#x2F;Oè€Œæ ‡è®°å…¶å­ç±»å‹ã€‚ä¾‹å¦‚ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Model</span> <span class="variable">m</span> <span class="operator">=</span> ....;</span><br><span class="line"><span class="type">File</span> <span class="variable">outFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(outFile));</span><br><span class="line">    out.writeObject(m);</span><br><span class="line">    out.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException excp) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°†mè½¬æ¢ä¸ºä¸€ç³»åˆ—å­—èŠ‚ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨åä¸ºsaveFileNameçš„æ–‡ä»¶ä¸­ã€‚ç„¶åå¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç åºåˆ—åŒ–å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Model m;</span><br><span class="line"><span class="type">File</span> <span class="variable">inFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">ObjectInputStream</span> <span class="variable">inp</span> <span class="operator">=</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(inFile));</span><br><span class="line">    m = (Model) inp.readObject();</span><br><span class="line">    inp.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException | ClassNotFoundException excp) &#123;</span><br><span class="line">    ...</span><br><span class="line">    m = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Javaè¿è¡Œæ—¶ä¼šè‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰çš„å·¥ä½œï¼Œæ‰¾å‡ºå“ªäº›å­—æ®µéœ€è¦è½¬æ¢ä¸ºå­—èŠ‚ä»¥åŠå¦‚ä½•æ‰§è¡Œè½¬æ¢ã€‚ä½ å°†ä¼šå·¦å³åºåˆ—åŒ–å¯¹è±¡ï¼Œä¸ºäº†å‡å°‘ä½ éœ€è¦ç¼–å†™çš„ä»£ç é‡ï¼Œæˆ‘ä»¬åœ¨Utils.javaä¸­æä¾›äº†å¤„ç†è¯»å†™å¯¹è±¡çš„è¾…åŠ©å‡½æ•°ã€‚</p><p>è¯·æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç éå¸¸çƒ¦äººï¼Œæœ‰å¾ˆå¤šç¥ç§˜çš„ç±»å’Œtry&#x2F;catchè¯­å¥ã€‚å¦‚æœä½ ä½¿ç”¨Utilsç±»ä¸­æä¾›çš„è¾…åŠ©å‡½æ•°ï¼Œé‚£ä¹ˆåºåˆ—åŒ–å°±ä¼šå˜å¾—éå¸¸ç®€å•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Model m;</span><br><span class="line"><span class="type">File</span> <span class="variable">outFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åºåˆ—åŒ–Modelå¯¹è±¡</span></span><br><span class="line">writeObject(outFile, m);</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼åœ°ï¼Œååºåˆ—åŒ–åªéœ€ç®€å•åœ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Model m;</span><br><span class="line"><span class="type">File</span> <span class="variable">inFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(saveFileName);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ååºåˆ—åŒ–Modelå¯¹è±¡</span></span><br><span class="line">m = readObject(inFile, Model.class);</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šåœ¨Project 2è§„èŒƒä¸­æœ‰ä¸€äº›Serializableçš„é™åˆ¶ï¼Œä½ åœ¨è¿™ä¸ªå®éªŒå®¤ä¸­ä¸ä¼šé‡åˆ°å®ƒä»¬ã€‚</p><h2 id="æœ‰ç”¨çš„Utilsç±»æ–¹æ³•"><a href="#æœ‰ç”¨çš„Utilsç±»æ–¹æ³•" class="headerlink" title="æœ‰ç”¨çš„Utilsç±»æ–¹æ³•"></a>æœ‰ç”¨çš„Utilsç±»æ–¹æ³•</h2><ul><li><p>è¿™äº›å®ç”¨çš„å·¥å…·å‡½æ•°ï¼ˆä½œä¸ºèµ·ç‚¹ï¼Œå¯èƒ½éœ€è¦æ›´å¤šï¼Œè€Œä¸”æ‚¨å¯èƒ½å¹¶ä¸éœ€è¦å…¨éƒ¨ï¼‰ï¼š</p><ul><li><code>static void writeContents(File file, Object... contents)</code> - å°†å­—ç¬¦ä¸²&#x2F;å­—èŠ‚æ•°ç»„å†™å…¥æ–‡ä»¶ã€‚<code>...</code> å…è®¸æˆ‘ä»¬ä½¿ç”¨ <em>å¯å˜å‚æ•°</em>ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„æ•°é‡çš„å‚æ•°è°ƒç”¨ <code>writeContents</code>ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ <code>writeContents(outFile, &quot;dog&quot;, &quot;cat&quot;, &quot;mouse&quot;)</code>ï¼Œå‡½æ•° <code>writeContents</code> å°†é€šè¿‡æ•°ç»„è®¿é—®æˆ‘ä»¬ä¼ å…¥çš„æ‰€æœ‰ä¸‰ä¸ªå¯¹è±¡ã€‚</li><li><code>static String readContentsAsString(File file)</code> - å°†æ–‡ä»¶è¯»å–ä¸ºå­—ç¬¦ä¸²ã€‚</li><li><code>static byte[] readContents(File file)</code> - å°†æ–‡ä»¶è¯»å–ä¸ºå­—èŠ‚æ•°ç»„ã€‚</li><li><code>static void writeObject(File file, Serializable obj)</code> - å°†å¯åºåˆ—åŒ–å¯¹è±¡å†™å…¥æ–‡ä»¶ã€‚</li><li><code>static &lt;T extends Serializable&gt; T readObject(File file, Class&lt;T&gt; expectedClass)</code> - ä»æ–‡ä»¶ä¸­è¯»å–å¯åºåˆ—åŒ–å¯¹è±¡ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>&lt;ç±»å&gt;.class</code> è·å–ä¸€ä¸ª <code>Class</code> å¯¹è±¡ï¼Œä¾‹å¦‚ <code>Dog d = readObject(inFile, Dog.class)</code>ã€‚</li><li><code>static File join(String first, String... others)</code> - å°†å­—ç¬¦ä¸²æˆ–æ–‡ä»¶ç»„åˆæˆè·¯å¾„ã€‚ä¾‹å¦‚ï¼Œ<code>Utils.join(&quot;.capers&quot;, &quot;dogs&quot;)</code> å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªè·¯å¾„ä¸º â€œ.capers&#x2F;dogsâ€çš„ <code>File</code> å¯¹è±¡ï¼Œ<code>Utils.join(&quot;.capers&quot;, &quot;dogs&quot;, &quot;shitzus&quot;)</code> å°†ä¸ºæ‚¨æä¾›ä¸€ä¸ªè·¯å¾„ä¸º â€œ.capers&#x2F;dogs&#x2F;shitzusâ€çš„ <code>File</code> å¯¹è±¡ã€‚æ‚¨ <strong>ä¸åº”è¯¥</strong> ä½¿ç”¨å­—ç¬¦ä¸²è¿æ¥æ¥åˆ›å»ºæ–‡ä»¶ï¼è¿™å¯èƒ½ä¼šæ ¹æ®æ‚¨æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿäº§ç”Ÿå¥‡æ€ªçš„é”™è¯¯ã€‚</li></ul></li></ul><h1 id="è¿œç¨‹JVMè°ƒè¯•"><a href="#è¿œç¨‹JVMè°ƒè¯•" class="headerlink" title="è¿œç¨‹JVMè°ƒè¯•"></a>è¿œç¨‹JVMè°ƒè¯•</h1><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨IntelliJè°ƒè¯•lab 6ã€‚ä¹ä¸€çœ‹ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä»å‘½ä»¤è¡Œè¿è¡Œæ‰€æœ‰ä¸œè¥¿çš„ã€‚ç„¶è€Œï¼ŒIntelliJæä¾›äº†ä¸€ä¸ªç§°ä¸ºâ€œè¿œç¨‹JVMè°ƒè¯•â€çš„åŠŸèƒ½ï¼Œå®ƒå…è®¸æ‚¨æ·»åŠ æ–­ç‚¹ï¼Œåœ¨é›†æˆæµ‹è¯•æœŸé—´è§¦å‘ã€‚</p><p>é¦–å…ˆä½¿ç”¨gitæ¥æ£€å‡ºéª¨æ¶ä»£ç çš„åŸå§‹ç‰ˆæœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ£€å‡ºåï¼Œä½ åº”è¯¥å›åˆ°å®éªŒå®¤çš„ä¸€å¼€å§‹ã€‚å¦‚æœä½ ä¸çŸ¥é“æ€ä¹ˆåšï¼Œè¯·é˜…è¯»Lab 4ä¸­çš„è¿™ä¸€éƒ¨åˆ†ã€‚</p><p>æ­¤éƒ¨åˆ†å‰©ä½™éƒ¨åˆ†çš„æ“ä½œæ­¥éª¤å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ã€‚è§†é¢‘ç®€å•åœ°ä»‹ç»äº†è§„èŒƒä¸­åˆ—å‡ºçš„æ­¥éª¤ï¼Œæ‰€ä»¥å¦‚æœä½ åœ¨æ–¹å‘ä¸Šæ„Ÿåˆ°å›°æƒ‘ï¼Œå¯ä»¥çœ‹çœ‹å®ƒã€‚</p><p>ç”±äºæ²¡æœ‰JUnitæµ‹è¯•ï¼Œä½ å¯èƒ½æƒ³çŸ¥é“å¦‚ä½•è°ƒè¯•ä½ çš„ä»£ç ã€‚æˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨Caperså’ŒGitletä¸­å®Œæˆã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¨è®ºå¦‚ä½•çŸ¥é“ä½ æœ‰ä¸€ä¸ªbugã€‚å¦‚æœä½ è¿è¡Œ<code>make check</code>æµ‹è¯•ï¼Œä½ ä¼šå‘ç°ä½ æœªé€šè¿‡æµ‹è¯•<code>test02-two-part-story.in</code>ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šå“ªæ¬¡æ‰§è¡Œä½ çš„ç¨‹åºæœ‰bugã€‚è®°ä½ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ä¼šå¤šæ¬¡è¿è¡Œä½ çš„ç¨‹åºï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>.in</code>æ–‡ä»¶æœ‰ä¸¤è¡Œè°ƒç”¨capers.Mainï¼Œæ‰€ä»¥è¿™ä¸ªæµ‹è¯•è¿è¡Œäº†ä¸¤æ¬¡ï¼ˆåœ¨Gitletä¸­é€šå¸¸ä¼šæ›´å¤šï¼‰ã€‚</p><p>è¦è°ƒè¯•è¿™ä¸ªé›†æˆæµ‹è¯•ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦è®©IntelliJçŸ¥é“æˆ‘ä»¬æƒ³è¦è¿œç¨‹è°ƒè¯•ã€‚åœ¨ä½ çš„IntelliJä¸­å¯¼èˆªåˆ°ä½ çš„lab6é¡¹ç›®ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰æ‰“å¼€çš„è¯ã€‚åœ¨é¡¶éƒ¨ï¼Œè½¬åˆ°â€œRunâ€ -&gt; â€œRunâ€ï¼š</p><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/run.png" alt="Run to Run"></p><p>ä½ ä¼šå¾—åˆ°ä¸€ä¸ªè¦æ±‚ä½ ç¼–è¾‘é…ç½®çš„æ¡†ï¼Œçœ‹èµ·æ¥åƒä¸‹é¢è¿™æ ·ï¼š</p><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/edit-box.png" alt="Edit Box"></p><p>ä½ çš„ç•Œé¢å¯èƒ½ä¼šæœ‰æ›´å¤šæˆ–æ›´å°‘çš„æ¡†ï¼Œå…¶ä»–åç§°ï¼Œå¦‚æœä½ å·²ç»åœ¨IntelliJä¸­å°è¯•è¿è¡Œäº†ä¸€ä¸ªç±»ã€‚å¦‚æœæ˜¯è¿™ç§æƒ…å†µï¼Œåªéœ€ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªåç§°ä¸ºâ€œEdit Configurationsâ€çš„æ¡†ã€‚</p><p>åœ¨è¿™ä¸ªæ¡†ä¸­ï¼Œä½ éœ€è¦ç‚¹å‡»å·¦ä¸Šè§’çš„â€œ+â€æŒ‰é’®ï¼Œå¹¶é€‰æ‹©â€œRemote JVM Debugâ€ã€‚ç°åœ¨å®ƒåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/remote-debug.png" alt="Remote Debug"></p><p>æˆ‘ä»¬åªéœ€è¦é»˜è®¤è®¾ç½®ã€‚ä½ åº”è¯¥åœ¨é¡¶éƒ¨çš„æ¡†ä¸­æ·»åŠ ä¸€ä¸ªæè¿°æ€§åç§°ï¼Œä¹Ÿè®¸æ˜¯â€œCapers Remote Debugâ€ã€‚æ·»åŠ åç§°åï¼Œç‚¹å‡»â€œApplyâ€ï¼Œç„¶åé€€å‡ºæ­¤å±å¹•ã€‚åœ¨æˆ‘ä»¬ç¦»å¼€IntelliJä¹‹å‰ï¼Œ<strong>åœ¨Mainç±»çš„mainæ–¹æ³•ä¸­è®¾ç½®ä¸€ä¸ªæ–­ç‚¹</strong>ï¼Œä»¥ä¾¿æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥è¿›è¡Œè°ƒè¯•ã€‚ç¡®ä¿è¿™ä¸ªæ–­ç‚¹å®é™…ä¸Šä¼šè¢«è§¦å‘ï¼Œæ‰€ä»¥æŠŠå®ƒæ”¾åœ¨mainæ–¹æ³•çš„ç¬¬ä¸€è¡Œã€‚</p><p>ç°åœ¨ä½ å°†å¯¼èˆªåˆ°ç»ˆç«¯ä¸­çš„æµ‹è¯•ç›®å½•ã€‚è¿æ¥åˆ°IntelliJ JVMçš„è„šæœ¬æ˜¯runner.pyï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æµ‹è¯•è„šæœ¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 runner.py --debug our/test02-two-part-story.in</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¿è¡Œä¸åŒçš„æµ‹è¯•ï¼Œåªéœ€æ”¾ç½®ä¸åŒçš„<code>.in</code>æ–‡ä»¶ã€‚å¦‚æœä½ æƒ³åœ¨æµ‹è¯•å®Œæˆåä¿ç•™<code>.capers</code>æ–‡ä»¶å¤¹ï¼Œä»¥ä¾¿è°ƒæŸ¥å…¶å†…å®¹ï¼Œè¯·ä½¿ç”¨<code>--keep</code>æ ‡å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 runner.py --keep --debug our/test02-two-part-story.in</span><br></pre></td></tr></table></figure><p>å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œä½ å¯ä»¥åšä»»ä½•äº‹æƒ…ï¼›æˆ‘ä»¬åªæ˜¯åŒ…å«å®ƒï¼Œä»¥é˜²ä½ æƒ³å››å¤„çœ‹çœ‹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿæˆçš„<code>.capers</code>å°†è¢«åˆ é™¤ã€‚</p><p>å¦‚æœä½ çœ‹åˆ°é”™è¯¯æ¶ˆæ¯ï¼Œåˆ™æ„å‘³ç€ä½ è¦ä¹ˆä¸åœ¨æµ‹è¯•ç›®å½•ä¸­ï¼Œè¦ä¹ˆä½ çš„REPO_DIRç¯å¢ƒå˜é‡è®¾ç½®ä¸æ­£ç¡®ã€‚æ£€æŸ¥è¿™ä¸¤ä»¶äº‹æƒ…ï¼Œå¦‚æœä½ è¿˜æ˜¯å›°æƒ‘ï¼Œé‚£å°±é—®TAã€‚</p><blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$env:REPO_DIR = &quot;D:\hj\CS61B-Tutorial\&quot; </span><br></pre></td></tr></table></figure></blockquote><p>å¦åˆ™ï¼Œä½ åº”è¯¥å‡†å¤‡å¥½è°ƒè¯•äº†ï¼ä½ ä¼šçœ‹åˆ°ç±»ä¼¼äºè¿™æ ·çš„ä¸œè¥¿ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">   ============================================================================</span><br><span class="line">  |                   ~~~~~  You are in debug mode  ~~~~~                      |</span><br><span class="line">  |   In this mode, you will be shown each command from the test case.         |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   There are three commands:                                                |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   1. &#x27;n&#x27; - type in &#x27;n&#x27; to go to the next command without debugging the     |</span><br><span class="line">  |            current one (analogous to &quot;Step Over&quot; in IntelliJ).             |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   2. &#x27;s&#x27; - type in &#x27;s&#x27; to debug the current command (analogous to          |</span><br><span class="line">  |            &quot;Step Into&quot; in IntelliJ). Make sure to set breakpoints!         |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   3. &#x27;q&#x27; - type in &#x27;q&#x27; to quit and stop debugging. If you had the `--keep` |</span><br><span class="line">  |            flag, then your directory state will be saved and you can       |</span><br><span class="line">  |            investigate it.                                                 |</span><br><span class="line">   ============================================================================</span><br><span class="line"></span><br><span class="line">test02-two-part-story: </span><br><span class="line">&gt;&gt;&gt; capers story &quot;Hello&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure><p>é¡¶éƒ¨æ¡†ä¸­åŒ…å«æœ‰ç”¨çš„æç¤ºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹åˆ°çš„æ˜¯æˆ‘ä»¬æ­£åœ¨è°ƒè¯•çš„<code>.in</code>æ–‡ä»¶çš„åç§°ï¼Œç„¶åæ˜¯ä¸€ç³»åˆ—ä»¥<code>&gt;&gt;&gt;</code>å’Œ<code>&gt;</code>å¼€å¤´çš„è¡Œã€‚</p><ul><li><p>ä»¥<code>&gt;&gt;&gt;</code>å¼€å¤´çš„è¡Œæ˜¯å°†åœ¨ä½ çš„Mainç±»ä¸Šè¿è¡Œçš„caperså‘½ä»¤ï¼Œå³ä½ ç¨‹åºçš„ç‰¹å®šæ‰§è¡Œã€‚è¿™äº›å¯¹åº”äºæˆ‘ä»¬åœ¨<code>.in</code>æ–‡ä»¶ä¸­çœ‹åˆ°çš„å‘½ä»¤ï¼Œåœ¨<code>&gt;</code>å³ä¾§ã€‚</p></li><li><p>ä»¥<code>&gt;</code>å¼€å¤´çš„è¡Œæ˜¯è®©ä½ è¾“å…¥è°ƒè¯•å‘½ä»¤çš„ã€‚æœ‰ä¸€ä¸ªæç¤ºæ¡†åˆ—å‡ºäº†3ä¸ªå‘½ä»¤ã€‚</p></li></ul><p>è®°ä½ï¼Œæ¯ä¸ªè¾“å…¥æ–‡ä»¶éƒ½ä¼šåˆ—å‡ºå¤šä¸ªå‘½ä»¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é¦–å…ˆå¼„æ¸…æ¥šå“ªä¸ªå‘½ä»¤æ˜¯é—®é¢˜æ‰€åœ¨çš„ã€‚</p><p>é”®å…¥å•ä¸ªå­—ç¬¦â€œnâ€ï¼ˆè¡¨ç¤ºâ€œnextâ€ï¼‰ä»¥åœ¨ä¸è°ƒè¯•çš„æƒ…å†µä¸‹æ‰§è¡Œæ­¤å‘½ä»¤ã€‚ä½ å¯ä»¥å°†å…¶è§†ä¸ºå¸¦æ‚¨åˆ°ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚</p><p>å…¶ä¸­ä¸€ä¸ªå°†ä¼šå‡ºé”™ï¼šè¦ä¹ˆä½ çš„ä»£ç ä¼šäº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ï¼Œè¦ä¹ˆä½ çš„è¾“å‡ºä¸é¢„æœŸä¸åŒã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">   ============================================================================</span><br><span class="line">  |                   ~~~~~  You are in debug mode  ~~~~~                      |</span><br><span class="line">  |   In this mode, you will be shown each command from the test case.         |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   There are three commands:                                                |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   1. &#x27;n&#x27; - type in &#x27;n&#x27; to go to the next command without debugging the     |</span><br><span class="line">  |            current one (analogous to &quot;Step Over&quot; in IntelliJ).             |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   2. &#x27;s&#x27; - type in &#x27;s&#x27; to debug the current command (analogous to          |</span><br><span class="line">  |            &quot;Step Into&quot; in IntelliJ). Make sure to set breakpoints!         |</span><br><span class="line">  |                                                                            |</span><br><span class="line">  |   3. &#x27;q&#x27; - type in &#x27;q&#x27; to quit and stop debugging. If you had the `--keep` |</span><br><span class="line">  |            flag, then your directory state will be saved and you can       |</span><br><span class="line">  |            investigate it.                                                 |</span><br><span class="line">   ============================================================================</span><br><span class="line"></span><br><span class="line">test02-two-part-story: </span><br><span class="line">&gt;&gt;&gt; capers story &quot;Hello&quot;</span><br><span class="line">&gt; n</span><br><span class="line">ERROR (incorrect output)</span><br><span class="line"></span><br><span class="line">Directory state saved in test02-two-part-story_0</span><br><span class="line"></span><br><span class="line">Ran 1 tests. 0 passed.</span><br></pre></td></tr></table></figure><h1 id="å®éªŒå®¤é¡¹ç›®"><a href="#å®éªŒå®¤é¡¹ç›®" class="headerlink" title="å®éªŒå®¤é¡¹ç›®"></a>å®éªŒå®¤é¡¹ç›®</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>å“å‘€ï¼æˆ‘ä»¬ç»ˆäºå‡†å¤‡å¥½å¼€å§‹è¿™ä¸ªå®éªŒçš„å®é™…å·¥ä½œäº†ã€‚åœ¨è¿™ä¸ªå®éªŒä¸­ï¼Œæ‚¨å°†ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œè¯¥ç¨‹åºå°†åˆ©ç”¨æ–‡ä»¶æ“ä½œå’Œåºåˆ—åŒ–ã€‚æˆ‘ä»¬ä¸ºæ‚¨æä¾›äº†ä¸‰ä¸ªæ–‡ä»¶ï¼š</p><ul><li>Main.javaï¼šç¨‹åºçš„ä¸»æ–¹æ³•ã€‚ä½¿ç”¨ <code>java capers.Main [args]</code> è¿è¡Œå®ƒä»¥æ‰§è¡Œä¸‹é¢æŒ‡å®šçš„æ“ä½œã€‚è¿™ä¸ªç±»æœ¬èº«å¹¶æ²¡æœ‰å¤ªå¤šçš„é€»è¾‘ï¼šç›¸åï¼Œå®ƒå……å½“äº†ä¸€ä¸ªâ€œå…¥å£ç‚¹â€ï¼Œåªæ˜¯çŸ¥é“ä½•æ—¶è°ƒç”¨ CapersRepository.java ä¸­çš„æ­£ç¡®æ–¹æ³•ã€‚</li><li>CapersRepository.javaï¼šè´Ÿè´£æ‰€æœ‰å…¶ä»–ç±»ä¹‹é—´çš„åè°ƒã€‚æ­¤ç¨‹åºä¸­å¤§å¤šæ•°çš„ FIXME éƒ½åœ¨è¿™é‡Œã€‚</li><li>Dog.javaï¼šä»£è¡¨å…·æœ‰åç§°ã€å“ç§å’Œå¹´é¾„çš„ç‹—ã€‚åŒ…å«ä¸€äº› FIXMEã€‚</li><li>Utils.javaï¼šç”¨äºæ–‡ä»¶æ“ä½œå’Œåºåˆ—åŒ–çš„å®ç”¨å‡½æ•°ã€‚è¿™äº›æ˜¯ Gitlet æä¾›çš„ä¸€éƒ¨åˆ†ã€‚</li></ul><p>æ‚¨ä¸éœ€è¦æ‹…å¿ƒé”™è¯¯æƒ…å†µæˆ–æ— æ•ˆè¾“å…¥ï¼Œåœ¨è¿™ä¸ªå®éªŒä¸­æˆ‘ä»¬ä¸ä¼šå¯¹æ­¤è¿›è¡Œæµ‹è¯•ï¼ˆå°½ç®¡è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦åœ¨ Gitlet ä¸­å¤„ç†è¿™äº›ï¼‰ã€‚æ‚¨å¯ä»¥ä»…ä½¿ç”¨ Utils.java ä¸­æä¾›çš„æ–¹æ³•ä»¥åŠæœ¬è§„èŒƒä¸­æåˆ°çš„å…¶ä»– File ç±»æ–¹æ³•å®Œæˆè¿™ä¸ªå®éªŒï¼Œä½†å¦‚æœæ‚¨æ„Ÿè§‰å†’é™©ï¼Œå¯ä»¥éšæ„å°è¯•å…¶ä»–æ–¹æ³•ã€‚</p><h3 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h3><p>æ‚¨çš„ä»£ç å°†æ”¯æŒä»¥ä¸‹ä¸‰ä¸ªå‘½ä»¤ï¼š</p><ul><li><code>story [text]</code>ï¼šå°† â€œtextâ€ + æ¢è¡Œç¬¦ï¼ˆå³ â€œ\nâ€ï¼‰é™„åŠ åˆ° .capers ç›®å½•ä¸­çš„ä¸€ä¸ªæ•…äº‹æ–‡ä»¶ä¸­ã€‚æ­¤å¤–ï¼Œæ‰“å°å‡ºå½“å‰æ•…äº‹ï¼ˆå½“å‰æ•…äº‹åº”åŒ…å«æœ€è¿‘æ·»åŠ çš„ â€œtextâ€ï¼‰ã€‚</li><li><code>dog [name] [breed] [age]</code>ï¼šä½¿ç”¨æŒ‡å®šçš„å‚æ•°æŒä¹…åˆ›å»ºä¸€åªç‹—ï¼›è¿˜åº”è¯¥æ‰“å°ç‹—çš„ toString()ã€‚å‡è®¾ç‹—åæ˜¯å”¯ä¸€çš„ã€‚</li><li><code>birthday [name]</code>ï¼šæŒä¹…åœ°æå‡ç‹—çš„å¹´é¾„å¹¶æ‰“å°å‡ºåº†ç¥æ¶ˆæ¯ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ç³»åˆ— capers.Main çš„æ‰§è¡Œï¼Œåè·Ÿæ¯ä¸ªå‘½ä»¤çš„è¾“å‡ºã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ java capers.Main story <span class="string">&quot;Once upon a time, there was a beautiful dog.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line"></span><br><span class="line">$ java capers.Main story <span class="string">&quot;That dog was named Fjerf.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line">That dog was named Fjerf.</span><br><span class="line"></span><br><span class="line">$ java capers.Main story <span class="string">&quot;Fjerf loved to run and jump.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line">That dog was named Fjerf.</span><br><span class="line">Fjerf loved to run and jump.</span><br><span class="line"></span><br><span class="line">$ java capers.Main dog Mammoth <span class="string">&quot;German Spitz&quot;</span> 10</span><br><span class="line">Woof! My name is Mammoth and I am a German Spitz! I am 10 years old! Woof!</span><br><span class="line">$ java capers.Main dog Qitmir Saluki 3 </span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am 3 years old! Woof!</span><br><span class="line">$ java capers.Main birthday Qitmir</span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am 4 years old! Woof!</span><br><span class="line">Happy birthday! Woof! Woof!</span><br><span class="line">$ java capers.Main birthday Qitmir</span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am 5 years old! Woof!</span><br><span class="line">Happy birthday! Woof! Woof!</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œdog å’Œ birthday å‘½ä»¤å…·æœ‰ç›¸å…³çš„åŠŸèƒ½ã€‚è¿˜è¦æ³¨æ„ï¼Œstory å‘½ä»¤çš„åŠŸèƒ½å®Œå…¨ç‹¬ç«‹äº dog æˆ– birthdayã€‚</p><p>è¿˜è¦æ³¨æ„ï¼Œæ‚¨çš„ä»£ç ä¸åº”åœ¨æ¯ä¸€æ­¥æ‰“å°å‡ºå‘½ä»¤è¡Œå‚æ•°ã€‚æ¢å¥è¯è¯´ï¼Œæ‚¨åº”è¯¥åˆ é™¤åœ¨æ­¤å®éªŒæ—©æœŸæ·»åŠ çš„è°ƒç”¨ <code>System.out.println(&quot;args: &quot; + Arrays.toString(args));</code>ã€‚</p><p>æ‰€æœ‰æŒä¹…æ•°æ®åº”å­˜å‚¨åœ¨å½“å‰å·¥ä½œç›®å½•ä¸­çš„ .capers ç›®å½•ä¸­ã€‚æˆ‘ä»¬åœ¨å‰é¢åŠ ä¸Š . æ˜¯å› ä¸ºä»¥ . å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•é»˜è®¤åœ¨æ–‡ä»¶æŸ¥çœ‹å™¨ä¸­æ˜¯éšè—çš„ã€‚æ¯•ç«Ÿï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æˆ‘ä»¬çš„ Java ç¨‹åºçš„ç”¨æˆ·å…³å¿ƒæˆ‘ä»¬å¦‚ä½•ã€åœ¨å“ªé‡Œæˆ–è€…æ˜¯å¦å­˜å‚¨æŒä¹…æ•°æ®ã€‚ä»–ä»¬åªå…³å¿ƒç¨‹åºæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚IntelliJ å’Œ Git éƒ½åˆ©ç”¨äº†è¿™ä¸ªæƒ³æ³•ï¼šæ¯å½“æ‚¨åˆ›å»ºä¸€ä¸ª IntelliJ é¡¹ç›®æ—¶ï¼Œå®ƒéƒ½ä¼šåœ¨å½“å‰å·¥ä½œç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªéšè—çš„ .idea æ–‡ä»¶å¤¹æ¥å­˜å‚¨æ‰€æœ‰çš„å…ƒæ•°æ®ã€‚ç±»ä¼¼åœ°ï¼Œæ¯å½“æ‚¨åˆå§‹åŒ–ä¸€ä¸ª Git ä»“åº“æ—¶ï¼Œå®ƒéƒ½ä¼šå°†æ‰€æœ‰çš„æŒä¹…æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ª .git æ–‡ä»¶å¤¹ä¸­ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨ç»ˆç«¯ä¸­é”®å…¥ ls -a è€Œä¸æ˜¯åªé”®å…¥ ls æ¥æŸ¥çœ‹éšè—æ–‡ä»¶ã€‚</p><p>æ¨èçš„æ–‡ä»¶ç»“æ„ï¼ˆæ‚¨ä¸å¿…éµå¾ªæ­¤ç»“æ„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.capers/ -- æ‰€æœ‰æŒä¹…æ•°æ®çš„é¡¶çº§æ–‡ä»¶å¤¹</span><br><span class="line">    - dogs/ -- åŒ…å«æ‰€æœ‰ç‹—çš„æŒä¹…æ•°æ®çš„æ–‡ä»¶å¤¹</span><br><span class="line">    - story --</span><br></pre></td></tr></table></figure><h2 id="å®Œæˆé¡ºåº"><a href="#å®Œæˆé¡ºåº" class="headerlink" title="å®Œæˆé¡ºåº"></a>å®Œæˆé¡ºåº</h2><p>å»ºè®®å®Œæˆé¡ºåºï¼š</p><ol><li>åœ¨ CapersRepository.java ä¸­å¡«å†™ CAPERS_FOLDERï¼Œç„¶ååœ¨ Dog.java ä¸­å¡«å†™ DOG_FOLDERï¼Œç„¶ååœ¨ CapersRepository.java ä¸­å¡«å†™ setUpPersistenceã€‚</li><li>åœ¨ Main.java ä¸­å¡«å†™ main æ–¹æ³•ã€‚è¿™ä¸»è¦åº”è¯¥æ˜¯è°ƒç”¨ CapersRepository ä¸­çš„å…¶ä»–æ–¹æ³•ã€‚</li><li>åœ¨ CapersRepository.java ä¸­å¡«å†™ writeStory æ–¹æ³•ã€‚ç°åœ¨ story å‘½ä»¤åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</li><li>å°è¯•æ‰‹åŠ¨ä½¿ç”¨ story å‘½ä»¤ï¼Œå¹¶éªŒè¯å®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li><li>åœ¨ Dog.java ä¸­å¡«å†™ saveDogï¼Œç„¶åå¡«å†™ fromFileã€‚æ‚¨è¿˜éœ€è¦å¤„ç† Dog.java é¡¶éƒ¨çš„ TODOã€‚è¯·è®°ä½ï¼Œç‹—åæ˜¯å”¯ä¸€çš„ï¼</li><li>ä½¿ç”¨ Dog.java ä¸­çš„æ–¹æ³•ï¼Œåœ¨ CapersRepository.java ä¸­å¡«å†™ makeDog å’Œ celebrateBirthdayã€‚æ‚¨ä¼šå‘ç° Dog ç±»ä¸­çš„ haveBirthday æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ç°åœ¨ dog å’Œ birthday å‘½ä»¤åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</li><li>å°è¯•æ‰‹åŠ¨ä½¿ç”¨ dog å’Œ birthday å‘½ä»¤ï¼Œå¹¶éªŒè¯å®ƒä»¬æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li><li>è¿è¡Œ make check å¹¶éªŒè¯æ‚¨çš„ä»£ç æ˜¯å¦é€šè¿‡äº†æ‰€æœ‰æµ‹è¯•ã€‚å¦‚æœæ‚¨çš„æµ‹è¯•æœªé€šè¿‡ä¸”ä¸çŸ¥é“åŸå› ï¼Œè¯·å‚é˜…æœ¬å®éªŒåé¢çš„è°ƒè¯•éƒ¨åˆ†ã€‚</li><li>æ¯ä¸ª TODO åº”è¯¥æœ€å¤šéœ€è¦å¤§çº¦ 8 è¡Œï¼Œä½†è®¸å¤šéƒ½æ›´å°‘ã€‚</li></ol><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><h3 id="1-CapersRepository-java"><a href="#1-CapersRepository-java" class="headerlink" title="1.CapersRepository.java"></a>1.<strong>CapersRepository.java</strong></h3><blockquote><p>åœ¨ CapersRepository.java ä¸­å¡«å†™ CAPERS_FOLDERï¼Œç„¶ååœ¨ Dog.java ä¸­å¡«å†™ DOG_FOLDERï¼Œç„¶ååœ¨ CapersRepository.java ä¸­å¡«å†™ setUpPersistenceã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/** Current Working Directory. */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">File</span> <span class="variable">CWD</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(System.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Main metadata folder. */</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">File</span> <span class="variable">CAPERS_FOLDER</span> <span class="operator">=</span> Utils.join(CWD,<span class="string">&quot;.capers&quot;</span>); <span class="comment">// TODO Hint: look at the `join`</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setupPersistence</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">c</span> <span class="operator">=</span> CAPERS_FOLDER;</span><br><span class="line">    <span class="type">File</span> <span class="variable">dog</span> <span class="operator">=</span> Dog.DOG_FOLDER;</span><br><span class="line">    <span class="keyword">if</span> (!c.exists()) &#123;</span><br><span class="line">        c.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!dog.exists()) &#123;</span><br><span class="line">        dog.mkdir();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">File</span> <span class="variable">DOG_FOLDER</span> <span class="operator">=</span> Utils.join(CapersRepository.CAPERS_FOLDER, <span class="string">&quot;dogs&quot;</span>);</span><br></pre></td></tr></table></figure><h3 id="2-Main-java"><a href="#2-Main-java" class="headerlink" title="2.Main.java"></a>2.<strong>Main.java</strong></h3><blockquote><p>åœ¨ Main.java ä¸­å¡«å†™ main æ–¹æ³•ã€‚è¿™ä¸»è¦åº”è¯¥æ˜¯è°ƒç”¨ CapersRepository ä¸­çš„å…¶ä»–æ–¹æ³•ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (args.length == <span class="number">0</span>) &#123;</span><br><span class="line">        Utils.exitWithError(<span class="string">&quot;Must have at least one argument&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CapersRepository.setupPersistence();</span><br><span class="line">    String text;</span><br><span class="line">    <span class="keyword">switch</span> (args[<span class="number">0</span>]) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;story&quot;</span>:</span><br><span class="line">        <span class="comment">/* This call has been handled for you. The rest will be similar. */</span></span><br><span class="line">        validateNumArgs(<span class="string">&quot;story&quot;</span>, args, <span class="number">2</span>);</span><br><span class="line">        text = args[<span class="number">1</span>];</span><br><span class="line">        CapersRepository.writeStory(text);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;dog&quot;</span>:</span><br><span class="line">        validateNumArgs(<span class="string">&quot;dog&quot;</span>, args, <span class="number">4</span>);</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> make a dog</span></span><br><span class="line">        CapersRepository.makeDog(args[<span class="number">1</span>], args[<span class="number">2</span>], Integer.parseInt(args[<span class="number">3</span>]));</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;birthday&quot;</span>:</span><br><span class="line">        validateNumArgs(<span class="string">&quot;birthday&quot;</span>, args, <span class="number">2</span>);</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> celebrate this dog&#x27;s birthday</span></span><br><span class="line">        CapersRepository.celebrateBirthday(args[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        exitWithError(String.format(<span class="string">&quot;Unknown command: %s&quot;</span>, args[<span class="number">0</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-CapersRepository-java"><a href="#3-CapersRepository-java" class="headerlink" title="3.CapersRepository.java"></a>3.<strong>CapersRepository.java</strong></h3><blockquote><p>åœ¨ CapersRepository.java ä¸­å¡«å†™ writeStory æ–¹æ³•ã€‚ç°åœ¨ story å‘½ä»¤åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeStory</span><span class="params">(String text)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="type">File</span> <span class="variable">story</span> <span class="operator">=</span> Utils.join(CAPERS_FOLDER, <span class="string">&quot;story&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!story.exists())&#123;</span><br><span class="line">            story.createNewFile();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> Utils.readContentsAsString(story);</span><br><span class="line">        <span class="keyword">if</span> (content.isEmpty())&#123;</span><br><span class="line">            Utils.writeContents(story, text);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Utils.writeContents(story, content, <span class="string">&quot;\n&quot;</span>, text);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Utils.readContentsAsString(story));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>: æˆ‘ä»¬æ˜¯å¸Œæœ›å†™å…¥çš„æ—¶å€™æ˜¯ç»­å†™æ•…äº‹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡å†™å…¥ä¸èƒ½è¦†ç›–æ‰åŸæœ‰çš„å†…å®¹ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆè¯»å–åŸæœ¬çš„å†…å®¹ï¼Œç„¶ååœ¨åŸæœ¬å†…å®¹åé¢æ·»åŠ æ–°å†™å…¥çš„å†…å®¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ java capers.Main story <span class="string">&quot;Once upon a time, there was a beautiful dog.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line"></span><br><span class="line">$ java capers.Main story <span class="string">&quot;That dog was named Fjerf.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line">That dog was named Fjerf.</span><br><span class="line"></span><br><span class="line">$ java capers.Main story <span class="string">&quot;Fjerf loved to run and jump.&quot;</span></span><br><span class="line">Once upon a time, there was a beautiful dog.</span><br><span class="line">That dog was named Fjerf.</span><br><span class="line">Fjerf loved to run and jump.</span><br></pre></td></tr></table></figure><h3 id="4-Dog-java"><a href="#4-Dog-java" class="headerlink" title="4.Dog.java"></a>4.<strong>Dog.java</strong></h3><blockquote><ol><li>åœ¨ Dog.java ä¸­å¡«å†™ saveDogï¼Œç„¶åå¡«å†™ fromFileã€‚æ‚¨è¿˜éœ€è¦å¤„ç† Dog.java é¡¶éƒ¨çš„ TODOã€‚è¯·è®°ä½ï¼Œç‹—åæ˜¯å”¯ä¸€çš„ï¼</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span>&#123; <span class="comment">// TODO</span></span><br><span class="line">...</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Reads in and deserializes a dog from a file with name NAME in DOG_FOLDER.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name Name of dog to load</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Dog read from file</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Dog <span class="title function_">fromFile</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="comment">// TODO (hint: look at the Utils file)</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dog</span> <span class="operator">=</span> Utils.join(DOG_FOLDER, name);</span><br><span class="line">        <span class="keyword">return</span> Utils.readObject(dog, Dog.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Increases a dog&#x27;s age and celebrates!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">haveBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        age += <span class="number">1</span>;</span><br><span class="line">        System.out.println(toString());</span><br><span class="line">        System.out.println(<span class="string">&quot;Happy birthday! Woof! Woof!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Saves a dog to a file for future use.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// TODO (hint: don&#x27;t forget dog names are unique)</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">dog</span> <span class="operator">=</span> Utils.join(Dog.DOG_FOLDER, name);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!dog.exists()) &#123;</span><br><span class="line">                dog.createNewFile();</span><br><span class="line">            &#125;</span><br><span class="line">            Utils.writeObject(dog, <span class="built_in">this</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-CapersRepository-java"><a href="#5-CapersRepository-java" class="headerlink" title="5**.CapersRepository.java**"></a>5**.CapersRepository.java**</h3><blockquote><p>ä½¿ç”¨ Dog.java ä¸­çš„æ–¹æ³•ï¼Œåœ¨ CapersRepository.java ä¸­å¡«å†™ makeDog å’Œ celebrateBirthdayã€‚æ‚¨ä¼šå‘ç° Dog ç±»ä¸­çš„ haveBirthday æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ç°åœ¨ dog å’Œ birthday å‘½ä»¤åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates and persistently saves a dog using the first</span></span><br><span class="line"><span class="comment"> * three non-command arguments of args (name, breed, age).</span></span><br><span class="line"><span class="comment"> * Also prints out the dog&#x27;s information using toString().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeDog</span><span class="params">(String name, String breed, <span class="type">int</span> age)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="type">Dog</span> <span class="variable">dog1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(name, breed, age);</span><br><span class="line">    System.out.println(dog1.toString());</span><br><span class="line">    dog1.saveDog();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Advances a dog&#x27;s age persistently and prints out a celebratory message.</span></span><br><span class="line"><span class="comment"> * Also prints out the dog&#x27;s information using toString().</span></span><br><span class="line"><span class="comment"> * Chooses dog to advance based on the first non-command argument of args.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> name String name of the Dog whose birthday we&#x27;re celebrating.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">celebrateBirthday</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="comment">// TODO</span></span><br><span class="line">    <span class="type">Dog</span> <span class="variable">dog</span> <span class="operator">=</span> Dog.fromFile(name);</span><br><span class="line">    dog.haveBirthday();</span><br><span class="line">    dog.saveDog();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/image-20240323182756762.png" alt="image-20240323182756762"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ java capers.Main dog Mammoth <span class="string">&quot;German Spitz&quot;</span> <span class="number">10</span></span><br><span class="line">Woof! My name is Mammoth and I am a German Spitz! I am <span class="number">10</span> years old! Woof!</span><br><span class="line">$ java capers.Main dog Qitmir Saluki <span class="number">3</span> </span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am <span class="number">3</span> years old! Woof!</span><br><span class="line">$ java capers.Main birthday Qitmir</span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am <span class="number">4</span> years old! Woof!</span><br><span class="line">Happy birthday! Woof! Woof!</span><br><span class="line">$ java capers.Main birthday Qitmir</span><br><span class="line">Woof! My name is Qitmir and I am a Saluki! I am <span class="number">5</span> years old! Woof!</span><br><span class="line">Happy birthday! Woof! Woof!</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘ä»¬ä½“ä¼šä¸‹è¿™ä¸ªLabçš„ä»£ç </p><ul><li>é¦–å…ˆä»–æ˜¯å…ˆé€šè¿‡Mainå‡½æ•°è¯»å–å‘½ä»¤ç¬¦æ¥åˆ†åˆ«è°ƒç”¨<code>CapersRepository</code>ç±»ä¸­çš„æ–¹æ³•</li><li>è€Œ<code>CapersRepository</code>ç±»ä¸­æ–¹æ³•ä½¿ç”¨äº†<code>Dog</code>ç±»ä¸­çš„æ–¹æ³•</li><li>é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼ŒDogç±»ä¸­çš„æ–¹æ³•åŸºæœ¬ä¸Šåªè¢«Cç±»è°ƒç”¨ï¼Œå› æ­¤Cç±»æ˜¯Dogç±»çš„å®¢æˆ·ç«¯ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç¬”è®°(å…«)-ProJ2-complish</title>
      <link href="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/"/>
      <url>/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.1point3acres.com/bbs/thread-908806-1-1.html">ã€è¶…å¹²è´§ã€‘CS61B 2021spå…¨æ”»ç•¥ï¼ˆä¸Šï¼‰|ä¸€äº©ä¸‰åˆ†åœ°å…¬å¼€è¯¾ç‰ˆ (1point3acres.com)</a>çš„å»ºè®®:</p><blockquote><p>æˆ‘åšproj2èŠ±äº†å¤§æ¦‚10å¤©ä»£ç å¤§æ¦‚ä¸€å…±800è¡Œæ¨èåˆ°springbreakçš„æ—¶å€™åšè¿™ä¸ªé¡¹ç›®å†™ä¹‹å‰è¦æŠŠlab6å¤ä¹ ä¸€éå†æŠŠLecture12çœ‹å®Œç„¶åæ¨èå…ˆæŠŠspecè¯»ä¸€éå†çœ‹introè§†é¢‘ç£¨åˆ€ä¸è¯¯ç æŸ´è¿™ä¸ªæ—¶å€™ç»ˆäºå¯¹è¦å†™å‡ ä¸ªå¯¹è±¡ã€åˆ†åˆ«å®ç°ä»€ä¹ˆåŠŸèƒ½æœ‰ç‚¹æ¦‚å¿µäº†ç„¶åå†è¯»ä¸€éspecå¯¹ç€æŒ‡ä»¤ä¸€æ¡ä¸€æ¡å®ç°ç¼ºå°‘ä¸€ä¸ªæ•´ä½“è®¾è®¡æ¦‚å¿µçš„è¯ä¸å»ºè®®ç€æ€¥å†™ä»£ç å¦åˆ™ä½ debug40å¤šæ¡æŒ‡ä»¤çš„æ—¶é—´ä¼šè¿œè¿œé«˜äºè¿™äº›æ€è€ƒçš„æ—¶é—´æˆ‘æ„Ÿè§‰mergeæ˜¯æœ€å¤æ‚çš„å¯ä»¥å…ˆçœ‹åŠ©æ•™çš„è§†é¢‘ä»–ç»™ä½ æ€»ç»“å¥½äº†7ç§æƒ…å†µåˆ†ç±»è®¨è®ºä¸‹æ¥æœ‰ç‚¹å¿ƒç´¯ä½†æäº¤autogradeçœ‹åˆ°1600æ»¡åˆ†çš„æ—¶å€™çˆ½çˆ†äº†</p></blockquote><p>Lec12ï¼š</p><ul><li><a href="https://docs.google.com/presentation/d/1I2s5plripe4_uaOmwBWOOAzB04Cd-V0dHoDsT6Z85Ms/edit#slide=id.gbcfc5ec854_0_102">cs61b 2021 lec12 command line programming, data structures preview - Google å¹»ç¯ç‰‡</a></li><li><a href="https://www.youtube.com/watch?v=fvhqn5PeU_Q">Spring 2021: Live Lecture 12 (youtube.com)</a></li></ul><h1 id="Lec12"><a href="#Lec12" class="headerlink" title="Lec12"></a>Lec12</h1><h2 id="å‘½ä»¤è¡Œçš„ä»‹ç»"><a href="#å‘½ä»¤è¡Œçš„ä»‹ç»" class="headerlink" title="å‘½ä»¤è¡Œçš„ä»‹ç»"></a>å‘½ä»¤è¡Œçš„ä»‹ç»</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323170733016.png" alt="image-20240323170733016"></p><h2 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h2><table><thead><tr><th>Approach Number</th><th>Information to use as file version number</th><th>Downside</th></tr></thead><tbody><tr><td>1, 2, and 3</td><td>Commit ID (that goes up by 1) that includes the file.</td><td>No central server to decide which commit is â€œnextâ€ if people are working offline.</td></tr><tr><td>4</td><td>Date and time of file.</td><td>Awkward to deal with simultaneous file changes. Not as elegant as SHA1-hash.</td></tr><tr><td>5</td><td>git-SHA1 hash of file.</td><td>???</td></tr></tbody></table><h3 id="Approach-1-3"><a href="#Approach-1-3" class="headerlink" title="Approach 1-3"></a>Approach 1-3</h3><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323170924189.png" alt="image-20240323170924189"></p><h3 id="Approach-4"><a href="#Approach-4" class="headerlink" title="Approach 4"></a>Approach 4</h3><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323170844113.png" alt="image-20240323170844113"></p><h3 id="Approach-5"><a href="#Approach-5" class="headerlink" title="Approach 5"></a>Approach 5</h3><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323170954784.png" alt="image-20240323170954784"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171539681.png" alt="image-20240323171539681"></p><p>commitåä¼šå‡ºç°3ä¸ªæ–‡ä»¶å¤¹ï¼š</p><ul><li>å…¶ä¸­ä¸€ä¸ªæ˜¯ä»¥hashç å‰ä¸¤ä½ä¸ºåç§°ï¼Œhashç æ–‡ä»¶çš„<ul><li><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171721402.png" alt="image-20240323171721402"></li></ul></li><li>å…¶ä¸­ä¸€ä¸ªæ˜¯å­˜å‚¨äº†commitæ¶ˆæ¯çš„<ul><li><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171749576.png" alt="image-20240323171749576"></li></ul></li><li>å¦ä¸€ä¸ªæ˜¯è¯»å–æ–‡ä»¶çš„<ul><li><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171712871.png" alt="image-20240323171712871"></li></ul></li></ul><h2 id="åºåˆ—åŒ–å’Œå‚¨å­˜"><a href="#åºåˆ—åŒ–å’Œå‚¨å­˜" class="headerlink" title="åºåˆ—åŒ–å’Œå‚¨å­˜"></a>åºåˆ—åŒ–å’Œå‚¨å­˜</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171447179.png" alt="image-20240323171447179"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171431511.png" alt="image-20240323171431511"></p><h2 id="åˆ†æ”¯åˆå¹¶"><a href="#åˆ†æ”¯åˆå¹¶" class="headerlink" title="åˆ†æ”¯åˆå¹¶"></a>åˆ†æ”¯åˆå¹¶</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171235620.png" alt="image-20240323171235620"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171136900.png" alt="image-20240323171136900"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240323171215906.png" alt="image-20240323171215906"></p><p>è¿™é‡Œæ²¡çœ‹æ‡‚â€¦</p><h1 id="Lab6"><a href="#Lab6" class="headerlink" title="Lab6"></a>Lab6</h1><p><a href="https://www.bailog.top/2024/03/23/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab6-%E6%96%87%E4%BB%B6%E5%BA%8F%E5%88%97%E5%8C%96/">CS61Bé¡¹ç›®ç¬”è®°(å››)-Lab6-æ–‡ä»¶åºåˆ—åŒ– | baiçš„å°çª (bailog.top)</a></p><p><a href="https://sp21.datastructur.es/materials/proj/proj2/capers-example">Capers è®¾è®¡æ–‡æ¡£ç¤ºä¾‹ |CS 61B 2021 å¹´æ˜¥å­£ â€” Capers Design Document Example | CS 61B Spring 2021 (datastructur.es)</a></p><h1 id="Git-Intro"><a href="#Git-Intro" class="headerlink" title="Git Intro"></a>Git Intro</h1><p>è§†é¢‘ä¸»è¦ä»‹ç»äº†<code>git init</code>ã€<code>git add x</code>ã€<code>git commit</code>ã€<code>git checkout</code>è¿™å››ä¸ªå‘½ä»¤</p><h2 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005322743.png" alt="image-20240324005322743"></p><p>åˆ›é€ ä¸¤ä¸ªåŒºåŸŸï¼Œä¸€ä¸ªå­˜å‚¨åŒºåŸŸå’Œç¡®è®¤åŒºåŸŸ</p><h2 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005415911.png" alt="image-20240324005415911"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005427015.png" alt="image-20240324005427015"></p><h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005506920.png" alt="image-20240324005506920"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005518632.png" alt="image-20240324005518632"></p><p>æ¸…ç©ºå‚¨å­˜åŒºï¼Œæäº¤ç¡®è®¤</p><h2 id="git-checkout"><a href="#git-checkout" class="headerlink" title="git checkout"></a>git checkout</h2><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005603569.png" alt="image-20240324005603569"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005613533.png" alt="image-20240324005613533"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005630537.png" alt="image-20240324005630537"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324005637210.png" alt="image-20240324005637210"></p><blockquote><p>checkoutçš„æ—¶å€™è¦ä¿è¯statusæ ‘æ˜¯å¹²å‡€çš„</p></blockquote><h1 id="Gitlet-Intro"><a href="#Gitlet-Intro" class="headerlink" title="Gitlet Intro"></a>Gitlet Intro</h1><div class="row">    <embed src="Gitlet_Slides.pdf" width="100%" height="550" type="application/pdf"></div><h1 id="Gitletè®¾è®¡æ–‡æ¡£"><a href="#Gitletè®¾è®¡æ–‡æ¡£" class="headerlink" title="Gitletè®¾è®¡æ–‡æ¡£"></a>Gitletè®¾è®¡æ–‡æ¡£</h1><h2 id="ç±»ä»¥åŠæ•°æ®ç»“æ„"><a href="#ç±»ä»¥åŠæ•°æ®ç»“æ„" class="headerlink" title="ç±»ä»¥åŠæ•°æ®ç»“æ„"></a>ç±»ä»¥åŠæ•°æ®ç»“æ„</h2><h3 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String message;</span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; parentID = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); </span><br><span class="line"><span class="comment">//mergeåå¯èƒ½æœ‰ä¸¤ä¸ªçˆ¶æäº¤</span></span><br><span class="line"><span class="keyword">private</span> String timestamp;</span><br><span class="line"><span class="keyword">private</span> String shaName;</span><br><span class="line"><span class="keyword">public</span> HashMap&lt;String, String&gt; version; </span><br><span class="line"><span class="comment">//å­˜å‚¨æ–‡ä»¶åä»¥åŠå¯¹åº”çš„Blobçš„Sha1</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateVersion</span><span class="params">()</span></span><br><span class="line"><span class="comment">//æ›´æ–°æ–‡ä»¶ç‰ˆæœ¬</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span></span><br><span class="line"><span class="comment">//è¾“å‡ºlogæ ¼å¼</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getFlieVersion</span><span class="params">(String name)</span></span><br><span class="line"><span class="comment">//è·å¾—å½“å‰ç‰ˆæœ¬æ–‡ä»¶çš„Sha1</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">copyMapTo</span><span class="params">(Commit c)</span></span><br><span class="line"><span class="comment">//å°†å…¶ç‰ˆæœ¬å¤åˆ¶ç»™c</span></span><br></pre></td></tr></table></figure><h3 id="CommitTree"><a href="#CommitTree" class="headerlink" title="CommitTree"></a>CommitTree</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Commit HEAD;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Commit Master;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String curBranchName;</span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">indexFold</span> <span class="operator">=</span> StagingArea.indexFold;<span class="comment">//objectçš„ç›®å½•</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">refs</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR,<span class="string">&quot;refs&quot;</span>); <span class="comment">//folder</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">heads</span> <span class="operator">=</span> Utils.join(refs, <span class="string">&quot;heads&quot;</span>); <span class="comment">//folder</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">master</span> <span class="operator">=</span> Utils.join(heads, <span class="string">&quot;master&quot;</span>); <span class="comment">// file</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">head</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR, <span class="string">&quot;HEAD&quot;</span>); <span class="comment">//file</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">CURBranch</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR, <span class="string">&quot;curBranch&quot;</span>);<span class="comment">//file</span></span><br><span class="line"><span class="keyword">static</span> <span class="type">File</span> <span class="variable">commitList</span> <span class="operator">=</span> Utils.join(refs, <span class="string">&quot;cList&quot;</span>);</span><br><span class="line"><span class="keyword">static</span> List&lt;String&gt; cList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">static</span> <span class="type">StringBuilder</span> <span class="variable">logSB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br></pre></td></tr></table></figure><h3 id="Blob"><a href="#Blob" class="headerlink" title="Blob"></a>Blob</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String fileName;</span><br><span class="line">String sha1ID;</span><br><span class="line">File file;<span class="comment">//ä»£è¡¨çš„æ–‡ä»¶</span></span><br><span class="line"><span class="type">byte</span>[] aByte; <span class="comment">//å­˜å‚¨æ–‡ä»¶å†…å®¹</span></span><br></pre></td></tr></table></figure><h3 id="StagingArea"><a href="#StagingArea" class="headerlink" title="StagingArea"></a>StagingArea</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">File</span> <span class="variable">CWD</span> <span class="operator">=</span> Repository.CWD;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">File</span> <span class="variable">indexFold</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR, <span class="string">&quot;object&quot;</span>);<span class="comment">//folder</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String, String&gt; additionStage = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> HashMap&lt;String, String&gt; removalStage = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">File</span> <span class="variable">additionStageFile</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR, <span class="string">&quot;additionStage&quot;</span>);<span class="comment">//file</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">File</span> <span class="variable">removalStageFile</span> <span class="operator">=</span> Utils.join(Repository.GITLET_DIR, <span class="string">&quot;removalStage&quot;</span>); <span class="comment">//file</span></span><br></pre></td></tr></table></figure><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><blockquote><p>å¯¹äºå¤æ‚çš„ä»»åŠ¡ï¼Œæ¯”å¦‚ç¡®å®šåˆå¹¶å†²çªï¼Œæˆ‘ä»¬å»ºè®®æ‚¨å°†ä»»åŠ¡åˆ†è§£æˆå‡ ä¸ªéƒ¨åˆ†ã€‚åœ¨å•ç‹¬çš„éƒ¨åˆ†ä¸­æè¿°æ¯ä¸ªéƒ¨åˆ†çš„ç®—æ³•ã€‚ä»æœ€ç®€å•çš„ç»„ä»¶å¼€å§‹ï¼Œä¸€æ¬¡æ„å»ºè®¾è®¡çš„æ¯ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„åˆå¹¶å†²çªçš„ç®—æ³•éƒ¨åˆ†å¯ä»¥æœ‰ä»¥ä¸‹éƒ¨åˆ†ï¼š</p><ol><li>æ£€æŸ¥æ˜¯å¦éœ€è¦åˆå¹¶ã€‚</li><li>ç¡®å®šå“ªäº›æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰å­˜åœ¨å†²çªã€‚</li><li>åœ¨æ–‡ä»¶ä¸­è¡¨ç¤ºå†²çªã€‚ å°½é‡æ¸…æ™°åœ°ä½¿ç”¨ç©ºæ ¼æˆ–å…¶ä»–ç¬¦å·æ ‡è®°ç±»çš„æ ‡é¢˜æˆ–åç§°ã€‚</li></ol></blockquote><h1 id="Gitletç¼–å†™æ€è·¯"><a href="#Gitletç¼–å†™æ€è·¯" class="headerlink" title="Gitletç¼–å†™æ€è·¯"></a>Gitletç¼–å†™æ€è·¯</h1><h2 id="å‰åºå·¥ä½œ"><a href="#å‰åºå·¥ä½œ" class="headerlink" title="å‰åºå·¥ä½œ"></a>å‰åºå·¥ä½œ</h2><p>å¯ä»¥æŠŠæ–‡ä»¶ç±»æ¯”æˆLab6é‡Œçš„Dog</p><h3 id="æ•´ä½“é€»è¾‘æ¡†æ¶"><a href="#æ•´ä½“é€»è¾‘æ¡†æ¶" class="headerlink" title="æ•´ä½“é€»è¾‘æ¡†æ¶"></a>æ•´ä½“é€»è¾‘æ¡†æ¶</h3><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324234728616.png" alt="image-20240324234728616"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324233547054.png" alt="image-20240324233547054"></p><h3 id="initåšäº†ä»€ä¹ˆï¼Ÿ"><a href="#initåšäº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="initåšäº†ä»€ä¹ˆï¼Ÿ"></a>initåšäº†ä»€ä¹ˆï¼Ÿ</h3><p>initåˆ›å»ºäº†.gitletæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒä¸‹gitçš„ï¼š</p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324233814127.png" alt="image-20240324233814127"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324234219622.png" alt="image-20240324234219622"></p><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240324234329272.png" alt="image-20240324234329272"></p><p>å¦‚å›¾æ‰€ç¤º:</p><ul><li>HEADæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶é‡Œå­˜å‚¨äº†å½“å‰æŒ‡å‘çš„æ–‡ä»¶ç </li><li>objectsæ–‡ä»¶å¤¹å­˜å‚¨çš„åº”è¯¥æ˜¯<strong>blobs</strong>é‡Œçš„æ–‡ä»¶ï¼Œè€Œä»–ä½¿ç”¨çš„æ˜¯Hashè¡¨</li></ul><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240325171441116.png" alt="image-20240325171441116"></p><h2 id="æ•´ç†ä¸‹å…¨éƒ¨è¿‡ç¨‹"><a href="#æ•´ç†ä¸‹å…¨éƒ¨è¿‡ç¨‹" class="headerlink" title="æ•´ç†ä¸‹å…¨éƒ¨è¿‡ç¨‹"></a>æ•´ç†ä¸‹å…¨éƒ¨è¿‡ç¨‹</h2><p>é¦–å…ˆaddçš„æ—¶å€™æ–‡ä»¶åºåˆ—åŒ–åå­˜å‚¨åœ¨äº†æˆ‘çš„indexæ–‡ä»¶å¤¹ï¼Œç„¶åcommitçš„æ—¶å€™ï¼ŒcommitèŠ‚ç‚¹æ˜¯åŒ…å«ç€BlobsèŠ‚ç‚¹çš„ã€‚è¿™é‡Œå°±æœ‰ä¸ªéœ€è¦è§£å†³çš„åœ°æ–¹:</p><ul><li>commitå¦‚ä½•æŒ‡å‘?<ul><li>åˆæ­¥æƒ³æ³•æ˜¯commitçš„æ—¶å€™ï¼Œåœ¨commitTreeæ·»åŠ èŠ‚ç‚¹ï¼Œç„¶åæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨é‡ŒåŒ…å«äº†æ–‡ä»¶çš„sha1å€¼</li></ul></li><li>å¦‚ä½•é€šè¿‡sha1å€¼æ‰¾åˆ°æŒ‡å‘çš„å€¼?<ul><li>æˆ‘çš„StagingAreaåº”è¯¥ä¼šæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œé€šè¿‡æŒ‡å®šçš„sha1å€¼æ‰¾åˆ°å…¶æ–‡ä»¶ã€‚</li></ul></li></ul><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/image-20240327215936968.png" alt="image-20240327215936968"></p><h3 id="Blob-1"><a href="#Blob-1" class="headerlink" title="Blob"></a>Blob</h3><p>Blob æ˜¯ Git ä¸­ç”¨æ¥å­˜å‚¨æ–‡ä»¶å†…å®¹çš„åŸºæœ¬å•ä½ã€‚å®ƒå¯ä»¥æ˜¯æ–‡æœ¬æ–‡ä»¶ã€å›¾åƒã€éŸ³é¢‘æˆ–ä»»ä½•å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼ŒGit å¯¹å®ƒä»¬éƒ½ä¸€è§†åŒä»ã€‚æ¯ä¸ª Blob å¯¹è±¡éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ SHA-1 å“ˆå¸Œå€¼ï¼Œè¯¥å“ˆå¸Œå€¼æ˜¯æ ¹æ® Blob å¯¹è±¡çš„å†…å®¹è®¡ç®—å¾—å‡ºçš„ã€‚</p><p>å½“ä½ å‘ Git æ·»åŠ æ–‡ä»¶æ—¶ï¼ŒGit ä¼šå°†æ–‡ä»¶å†…å®¹å­˜å‚¨ä¸º Blob å¯¹è±¡ã€‚åœ¨ Git å†…éƒ¨ï¼ŒBlob å¯¹è±¡è¢«ä¿å­˜åœ¨ <code>.git/objects</code> ç›®å½•ä¸‹ï¼Œå¹¶ä»¥å…¶å“ˆå¸Œå€¼å‘½åçš„æ–‡ä»¶ä¸­ã€‚è¿™æ ·ï¼ŒGit å°±èƒ½å¤Ÿéå¸¸é«˜æ•ˆåœ°å­˜å‚¨å’Œæ£€ç´¢æ–‡ä»¶å†…å®¹ã€‚</p><blockquote><p>SHA1å€¼å‰ä¸¤ä½ä¸ºæ–‡ä»¶åï¼Œå38ä½ä¸ºæ–‡ä»¶å</p></blockquote><h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><ul><li>é¦–å…ˆæ‰¾åˆ°CWDä¸­çš„æ–‡ä»¶</li><li>å°†æ–‡ä»¶å­˜ä¸ºBlob</li><li>å°†Blobå­˜å…¥Hashè¡¨[SHA1-Blob]</li><li>å°†Blobåºåˆ—åŒ–å­˜å…¥.indexæ–‡ä»¶ä¸­</li><li>å°†æ–‡ä»¶å¯¹åº”çš„Blobå­˜å…¥additonä¸­</li></ul><h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><ul><li>æ ¹æ®ä¼ å…¥çš„message new ä¸€ä¸ª commit</li><li>commitçš„parentæ¥è‡ªHEAD</li><li>å¤åˆ¶æ–‡ä»¶è¡¨ä¸­çš„Blob</li><li>åºåˆ—åŒ–?</li></ul><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><ul><li>å¦‚æœæ–‡ä»¶å·²ç»è¢«add, é‚£ä¹ˆä»addåŒºåˆ é™¤</li><li>å¦‚æœæ–‡ä»¶å·²ç»è¢«commit, åˆ™æ ‡è®°ä¸ºåˆ é™¤</li><li>ä»å·¥ä½œåˆ—è¡¨ä¸­åˆ é™¤æ–‡ä»¶</li></ul><h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><ul><li>statuså¾—å¹²å‡€</li></ul><h2 id="åšé¢˜æ€è·¯"><a href="#åšé¢˜æ€è·¯" class="headerlink" title="åšé¢˜æ€è·¯"></a>åšé¢˜æ€è·¯</h2><h3 id="é‡è¦çš„ä¸€ç‚¹"><a href="#é‡è¦çš„ä¸€ç‚¹" class="headerlink" title="é‡è¦çš„ä¸€ç‚¹"></a>é‡è¦çš„ä¸€ç‚¹</h3><p>ä¸ºäº†ä¿è¯ç¨‹åºçš„æŒç»­æ€§ï¼Œæˆ‘ä»¬æ‰§è¡Œå‘½ä»¤å‰éœ€è¦è¯»å–è¢«å­˜å‚¨çš„æ–‡ä»¶ï¼Œå¦‚<code>HEAD</code>ã€<code>AdditonStage</code>ç­‰</p><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><ul><li><strong>æè¿°</strong>ï¼šåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Gitlet ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå°†è‡ªåŠ¨å¼€å§‹ä¸€ä¸ªæäº¤ï¼šä¸€ä¸ªä¸åŒ…å«æ–‡ä»¶ä¸”å…·æœ‰æäº¤æ¶ˆæ¯ <code>initial commit</code>ï¼ˆå°±æ˜¯è¿™æ ·ï¼Œæ²¡æœ‰æ ‡ç‚¹ç¬¦å·ï¼‰ã€‚å®ƒå°†æœ‰ä¸€ä¸ªå•ä¸€åˆ†æ”¯ï¼š<code>master</code>ï¼Œæœ€åˆæŒ‡å‘æ­¤åˆå§‹æäº¤ï¼Œå¹¶ä¸”<code>master</code>å°†æ˜¯å½“å‰åˆ†æ”¯ã€‚æ­¤åˆå§‹æäº¤çš„æ—¶é—´æˆ³å°†ä¸º 00:00:00 UTCï¼ŒThursday, 1 January 1970ï¼Œä»¥æ‚¨é€‰æ‹©çš„æ—¥æœŸæ ¼å¼ï¼ˆè¿™è¢«ç§°ä¸ºâ€œUnix çºªå…ƒâ€ï¼Œå†…éƒ¨ç”±æ—¶é—´ 0 è¡¨ç¤ºï¼‰ã€‚ç”±äºç”± Gitlet åˆ›å»ºçš„æ‰€æœ‰å­˜å‚¨åº“ä¸­çš„åˆå§‹æäº¤éƒ½å…·æœ‰å®Œå…¨ç›¸åŒçš„å†…å®¹ï¼Œå› æ­¤æ‰€æœ‰å­˜å‚¨åº“å°†è‡ªåŠ¨å…±äº«æ­¤æäº¤ï¼ˆå®ƒä»¬å°†å…·æœ‰ç›¸åŒçš„ UIDï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰å­˜å‚¨åº“ä¸­çš„æ‰€æœ‰æäº¤éƒ½å°†è¿½æº¯åˆ°å®ƒã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœå½“å‰ç›®å½•ä¸­å·²ç»å­˜åœ¨ Gitlet ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåˆ™åº”ä¸­æ­¢ã€‚ä¸åº”ä½¿ç”¨æ–°ç³»ç»Ÿè¦†ç›–ç°æœ‰ç³»ç»Ÿã€‚åº”æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A Gitlet version-control system already exists in the current directory.</code>ã€‚</li></ul><p>æ˜ç¡®ä¸€ä¸‹æˆ‘ä»¬è¦åšä»€ä¹ˆï¼š</p><ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>.gitlit</code>çš„æ–‡ä»¶å¤¹</li><li>ç„¶åè‡ªåŠ¨æäº¤ä¸€ä¸ªåˆå§‹<code>commit</code></li><li>è®¾ç½®<code>master</code>å’Œ<code>HEAD</code>æŒ‡é’ˆ</li><li>åˆå§‹åŒ–<code>StagingArea</code>ç›®å½•</li><li>åˆå§‹åŒ–<code>CommitTree</code></li></ul><p>åˆå§‹åŒ–åç›®å½•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.gitlet</span><br><span class="line">|--object //Folder</span><br><span class="line">||---å­˜å‚¨commitå’Œblob</span><br><span class="line">|</span><br><span class="line">|--refs //Folder</span><br><span class="line">||---heads //Folder</span><br><span class="line">|||--å­˜å‚¨branchæŒ‡é’ˆ</span><br><span class="line">||--cList //Listç±», å­˜å‚¨commitçš„åˆ—è¡¨</span><br><span class="line">|</span><br><span class="line">|---additionStage //HashMap&lt;String, String&gt;, å­˜å‚¨æ·»åŠ çš„blob</span><br><span class="line">|---removalStage //HashMap&lt;String, String&gt;, å­˜å‚¨åˆ é™¤çš„blob</span><br><span class="line">|---HEAD //Commitç±»ï¼Œå­˜å‚¨å½“å‰åˆ†æ”¯çš„å¤´æŒ‡é’ˆ</span><br><span class="line">|---curBranch //Stringç±»ï¼Œå­˜å‚¨å½“å‰åˆ†æ”¯çš„åå­—</span><br></pre></td></tr></table></figure><h3 id="add-1"><a href="#add-1" class="headerlink" title="add"></a>add</h3><ul><li><p><strong>æè¿°</strong>ï¼šå°†æ–‡ä»¶çš„å½“å‰å‰¯æœ¬æ·»åŠ åˆ°<em>æš‚å­˜åŒº</em>ï¼ˆå‚è§ <code>commit</code> å‘½ä»¤çš„æè¿°ï¼‰ã€‚å› æ­¤ï¼Œæ·»åŠ æ–‡ä»¶ä¹Ÿç§°ä¸º<em>ä¸ºæ·»åŠ è€Œæš‚å­˜</em>æ–‡ä»¶ã€‚å°†å·²ç»æš‚å­˜çš„æ–‡ä»¶æš‚å­˜ä¼šä½¿ç”¨æ–°å†…å®¹è¦†ç›–æš‚å­˜åŒºä¸­çš„å…ˆå‰æ¡ç›®ã€‚æš‚å­˜åŒºåº”è¯¥ä½äº<code>.gitlet</code>çš„æŸä¸ªåœ°æ–¹ã€‚å¦‚æœæ–‡ä»¶çš„å½“å‰å·¥ä½œç‰ˆæœ¬ä¸å½“å‰æäº¤ä¸­çš„ç‰ˆæœ¬ç›¸åŒï¼Œåˆ™ä¸è¦å°†å…¶æš‚å­˜ä»¥æ·»åŠ ï¼Œå¹¶ä¸”å¦‚æœå·²ç»å­˜åœ¨ï¼ˆå½“æ–‡ä»¶æ›´æ”¹ã€æ·»åŠ ï¼Œç„¶åæ›´æ”¹å›å…¶åŸå§‹ç‰ˆæœ¬æ—¶å¯èƒ½ä¼šå‘ç”Ÿï¼‰çš„æƒ…å†µä¸‹ï¼Œä»æš‚å­˜åŒºåˆ é™¤å®ƒã€‚æ–‡ä»¶å°†ä¸å†è¢«æš‚å­˜ä»¥åˆ é™¤ï¼ˆè¯·å‚è§ <code>gitlet rm</code>ï¼‰ï¼Œå¦‚æœåœ¨å‘½ä»¤æ—¶å¤„äºè¯¥çŠ¶æ€ã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>File does not exist.</code> å¹¶ä¸”é€€å‡ºè€Œä¸æ›´æ”¹ä»»ä½•å†…å®¹ã€‚</p></li><li><p>æ€è·¯</p><ul><li><p>é¦–å…ˆè¯»å–<code>addtionStage</code>ã€<code>removalStage</code>å’Œ<code>HEAD</code></p></li><li><p>æ‰¾åˆ°éœ€è¦addçš„æ–‡ä»¶</p></li><li><p>ä¸ºè¯¥æ–‡ä»¶åˆ›å»ºblobå¿«ç…§</p></li><li><p>å°†blobå­˜å‚¨åˆ°objectæ–‡ä»¶å¤¹ </p></li><li><blockquote><p>ä¸Šçº§æ–‡ä»¶å¤¹åä¸ºSha1çš„å‰ä¸¤ä½ï¼Œæ–‡ä»¶åä¸ºSha1çš„å38ä½</p></blockquote></li><li><p>ç‰¹æ®Šæƒ…å†µåˆ¤æ–­</p></li><li><p>å°†è¯¥blobæ·»åŠ åˆ°<code>addtionStage</code></p></li></ul></li></ul><blockquote><p>ç‰¹æ®Šæƒ…å†µåˆ¤æ–­:</p><ul><li>å¦‚æœremovalStageä¸­æœ‰è¯¥ç‰ˆæœ¬ï¼Œæ¸…ç©ºrSï¼Œä¸æ·»åŠ åˆ°aS</li><li>å¦‚æœHeadæŒ‡å‘çš„commitå·²ç»åŒ…å«äº†è¯¥ç‰ˆæœ¬ï¼Œå¿½ç•¥è¿™æ¬¡æäº¤</li></ul></blockquote><h3 id="commit-1"><a href="#commit-1" class="headerlink" title="commit"></a>commit</h3><ul><li><p><strong>æè¿°</strong>: åœ¨å½“å‰æäº¤å’Œæš‚å­˜åŒºä¿å­˜å·²è·Ÿè¸ªæ–‡ä»¶çš„å¿«ç…§ï¼Œä»¥ä¾¿ç¨åå¯ä»¥æ¢å¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ã€‚è¯¥æäº¤è¢«ç§°ä¸º<em>è·Ÿè¸ª</em>ä¿å­˜çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæäº¤çš„æ–‡ä»¶å¿«ç…§å°†ä¸å…¶çˆ¶æäº¤çš„æ–‡ä»¶å¿«ç…§å®Œå…¨ç›¸åŒï¼›å®ƒå°†ä¿ç•™æ–‡ä»¶çš„ç‰ˆæœ¬å®Œå…¨ä¸å˜ï¼Œä¸ä¼šæ›´æ–°å®ƒä»¬ã€‚æäº¤ä»…ä¼šæ›´æ–°åœ¨æäº¤æ—¶å·²æ ‡è®°ä¸ºè¦æ·»åŠ çš„æ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæäº¤ç°åœ¨å°†åŒ…å«å·²æ ‡è®°ä¸ºè¦æ·»åŠ çš„æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä»å…¶çˆ¶æäº¤ä¸­è·å–çš„ç‰ˆæœ¬ã€‚æäº¤å°†ä¿å­˜å¹¶å¼€å§‹è·Ÿè¸ªä»»ä½•å·²æ ‡è®°ä¸ºè¦æ·»åŠ ä½†çˆ¶æäº¤æœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚æœ€åï¼Œç”±äºè¢«<code>rm</code>å‘½ä»¤ï¼ˆä¸‹é¢ï¼‰æ ‡è®°ä¸º<em>è¦åˆ é™¤</em>ï¼Œå½“å‰æäº¤ä¸­è·Ÿè¸ªçš„æ–‡ä»¶å¯èƒ½ä¼šåœ¨æ–°æäº¤ä¸­è¢«å–æ¶ˆè·Ÿè¸ªã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœæ²¡æœ‰æ–‡ä»¶è¢«æš‚å­˜ï¼Œåˆ™ä¸­æ­¢ã€‚æ‰“å°æ¶ˆæ¯<code>No changes added to the commit.</code>ã€‚æ¯ä¸ªæäº¤å¿…é¡»æœ‰ä¸€ä¸ªéç©ºæ¶ˆæ¯ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>Please enter a commit message.</code>ã€‚å¯¹äºå·²è·Ÿè¸ªæ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸­ç¼ºå¤±æˆ–æ›´æ”¹çš„æƒ…å†µ<em>ä¸</em>ç®—æ˜¯å¤±è´¥ã€‚å®Œå…¨å¿½ç•¥<code>.gitlet</code>ç›®å½•å¤–çš„æ‰€æœ‰å†…å®¹ã€‚</p></li><li><p>æ€è·¯:åˆ†ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯initæ—¶æäº¤çš„åˆå§‹commitï¼Œå¦ä¸€ç§å°±æ˜¯æ­£å¸¸commitçš„</p></li><li><p>è¯»å–<code>HEAD</code>ã€<code>curBranch</code>ã€<code>rS</code>ã€<code>aS</code>ã€<code>CList</code></p><ul><li>é¦–å…ˆæ–°å»ºcommit</li><li>å°†è¯¥commitæäº¤åˆ°commitTree:<ul><li><p>æ£€æŸ¥æ˜¯å¦ä¸ºåˆå§‹æäº¤ï¼Œè‹¥æ˜¯ï¼š</p><ul><li>å°†è¯¥commitç›´æ¥å†™å…¥HEADï¼ŒcurBranch(master)æŒ‡é’ˆä¸­å»</li><li>å­˜å‚¨åˆ°objectæ–‡ä»¶å¤¹ä¸­ï¼Œå­˜å‚¨æ–¹å¼åŒblobs</li><li>å°†è¯¥commitçš„ShaNameæ·»åŠ åˆ°CListåˆ—è¡¨ä¸­ä¿å­˜æ–‡ä»¶CList</li></ul></li><li><p>è‹¥éï¼š</p><ul><li>å°†è¯¥commitçš„Parentè®¾ç½®ä¸ºHEADæŒ‡å‘çš„commitçš„ShaName</li><li>æ‹·è´çˆ¶æäº¤çš„versionå“ˆå¸Œè¡¨</li><li>æ›´æ–°versionå“ˆå¸Œè¡¨</li><li>æ¸…ç©ºæ‰€æœ‰Stage</li><li>å°†è¯¥commitå†™å…¥HEADï¼ŒcurBranchæŒ‡é’ˆä¸­å»</li><li>å­˜å‚¨åˆ°objectæ–‡ä»¶å¤¹ä¸­ï¼Œå­˜å‚¨æ–¹å¼åŒblobs</li><li>å°†è¯¥commitçš„ShaNameæ·»åŠ åˆ°CListåˆ—è¡¨ä¸­å¹¶ä¿å­˜æ–‡ä»¶Clist</li></ul></li></ul></li></ul></li></ul><blockquote><p>è®°ä½ï¼Œæ¸…ç©ºStageçš„æ—¶å€™éœ€è¦ä¿å­˜ä¸¤ä¸ªStage</p></blockquote><h3 id="rm-1"><a href="#rm-1" class="headerlink" title="rm"></a>rm</h3><ul><li><p><strong>æè¿°</strong>: å¦‚æœæ–‡ä»¶å½“å‰å·²æš‚å­˜ä»¥æ·»åŠ ï¼Œåˆ™å–æ¶ˆæš‚å­˜è¯¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶åœ¨å½“å‰æäº¤ä¸­è¢«è·Ÿè¸ªï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºåˆ é™¤ï¼Œå¹¶ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤è¯¥æ–‡ä»¶ï¼ˆé™¤éç”¨æˆ·å·²ç»è¿™æ ·åšï¼Œå¦åˆ™<em>ä¸è¦</em>åˆ é™¤å®ƒï¼‰ã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœæ–‡ä»¶æ—¢æ²¡æœ‰è¢«æš‚å­˜ä¹Ÿæ²¡æœ‰è¢«å½“å‰æäº¤è·Ÿè¸ªï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>No reason to remove the file.</code>ã€‚</p></li><li><p>æ€è·¯</p><ul><li><p>é¦–å…ˆè¯»å–éœ€è¦ç”¨åˆ°çš„</p></li><li><p>å¦‚æœaddäº†ï¼Œé‚£å°±å–æ¶ˆadd</p></li><li><p>å¦‚æœå½“å‰æäº¤æœ‰è¿½è¸ªå½“å‰æ–‡ä»¶ï¼Œå°†è¯¥æ–‡ä»¶æ·»åŠ åˆ°rAå¹¶åˆ é™¤CWDä¸­è¯¥æ–‡ä»¶ã€‚</p></li></ul></li></ul><h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><ul><li><p><strong>æè¿°</strong>: ä»å½“å‰å¤´æäº¤å¼€å§‹ï¼Œæ²¿ç€æäº¤æ ‘å‘åæ˜¾ç¤ºæ¯ä¸ªæäº¤çš„ä¿¡æ¯ï¼Œç›´åˆ°åˆå§‹æäº¤ï¼Œè·Ÿéšç¬¬ä¸€ä¸ªçˆ¶æäº¤é“¾æ¥ï¼Œå¿½ç•¥åˆå¹¶æäº¤ä¸­æ‰¾åˆ°çš„ä»»ä½•ç¬¬äºŒçˆ¶æäº¤ï¼ˆåœ¨å¸¸è§„Gitä¸­ï¼Œè¿™å°±æ˜¯ä½¿ç”¨<code>git log --first-parent</code>å¾—åˆ°çš„ï¼‰ã€‚è¿™ç»„æäº¤èŠ‚ç‚¹ç§°ä¸ºæäº¤çš„<em>å†å²è®°å½•</em>ã€‚å¯¹äºå†å²è®°å½•ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œåº”æ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯æäº¤IDã€æäº¤æ—¶é—´å’Œæäº¤æ¶ˆæ¯ã€‚ä»¥ä¸‹æ˜¯åº”éµå¾ªçš„<em>ç¡®åˆ‡</em>æ ¼å¼ç¤ºä¾‹ï¼š</p></li><li><p>æ€è·¯</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">===</span><br><span class="line">commit a0da1ea5a15ab613bf9961fd86f010cf74c7ee48</span><br><span class="line">Date: Thu Nov <span class="number">9</span> <span class="number">20</span>:<span class="number">00</span>:<span class="number">05</span> <span class="number">2017</span> -0800</span><br><span class="line">A commit message.</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ff</span><br><span class="line">Date: Thu Nov <span class="number">9</span> <span class="number">17</span>:<span class="number">01</span>:<span class="number">33</span> <span class="number">2017</span> -0800</span><br><span class="line">Another commit message.</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">commit e881c9575d180a215d1a636545b8fd9abfb1d2bb</span><br><span class="line">Date: Wed Dec <span class="number">31</span> <span class="number">16</span>:<span class="number">00</span>:<span class="number">00</span> <span class="number">1969</span> -0800</span><br><span class="line">initial commit</span><br></pre></td></tr></table></figure><ul><li>è¯»å–éœ€è¦çš„ä¸œè¥¿</li><li>æ ¹æ®å®ä¾‹ï¼Œä¸ºcommitè¦†å†™toStringæ–¹æ³•</li><li>åˆ©ç”¨StringBulideræ¥å­˜å‚¨ä¿¡æ¯</li><li>åˆ©ç”¨é€’å½’æ¥æ·»åŠ commitçš„ä¿¡æ¯</li></ul><h3 id="global-log"><a href="#global-log" class="headerlink" title="global-log"></a>global-log</h3><ul><li><p><strong>æè¿°</strong>: ç±»ä¼¼äºæ—¥å¿—ï¼Œä½†æ˜¾ç¤ºæœ‰å…³å·²ç»è¿›è¡Œçš„æ‰€æœ‰æäº¤çš„ä¿¡æ¯ã€‚æäº¤çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚æç¤ºï¼šåœ¨<code>gitlet.Utils</code>ä¸­æœ‰ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æ‚¨éå†ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</p></li><li><p>æ€è·¯</p><ul><li><p>è¯»å–éœ€è¦çš„ä¸œè¥¿</p></li><li><p>ä¹Ÿæ˜¯ç”¨StringBuilderæ¥å­˜å‚¨ä¿¡æ¯</p></li><li><p>é‡è¦çš„ä¸€ç‚¹æ˜¯è·å¾—æ‰€æœ‰Commitçš„åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¯»å–æˆ‘ä»¬çš„CListæ–‡ä»¶æ¥è·å–</p></li></ul></li></ul><blockquote><p>å¦ä¸€ä¸ªæƒ³æ³•: å¯ä»¥åˆ›å»ºä¸€ä¸ªlogæ–‡ä»¶ï¼Œæ¯æ¬¡addCommitçš„æ—¶å€™å°±append</p></blockquote><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><ul><li><strong>æè¿°</strong>: æ‰“å°å‡ºå…·æœ‰ç»™å®šæäº¤æ¶ˆæ¯çš„æ‰€æœ‰æäº¤çš„IDï¼Œæ¯è¡Œä¸€ä¸ªã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„æäº¤ï¼Œå®ƒä¼šå°†IDåˆ†åˆ«æ‰“å°åœ¨ä¸åŒçš„è¡Œä¸Šã€‚æäº¤æ¶ˆæ¯æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ“ä½œæ•°ï¼›è¦æŒ‡ç¤ºå¤šä¸ªå•è¯çš„æ¶ˆæ¯ï¼Œè¯·å°†æ“ä½œæ•°æ”¾åœ¨å¼•å·ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„<code>commit</code>å‘½ä»¤ã€‚æç¤ºï¼šæ­¤å‘½ä»¤çš„æç¤ºä¸<code>global-log</code>çš„æç¤ºç›¸åŒã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„æäº¤ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>Found no commit with that message.</code>ã€‚</li></ul><p>ç±»ä¼¼golbal-logï¼Œå¤ç”¨å…¶ä»£ç å³å¯</p><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><ul><li><p><strong>æè¿°</strong>: æ˜¾ç¤ºå½“å‰å­˜åœ¨çš„åˆ†æ”¯ï¼Œå¹¶ç”¨<code>*</code>æ ‡è®°å½“å‰åˆ†æ”¯ã€‚è¿˜æ˜¾ç¤ºå“ªäº›æ–‡ä»¶å·²ç»è¢«æ ‡è®°ä¸ºæ·»åŠ æˆ–åˆ é™¤ã€‚å®ƒåº”è¯¥éµå¾ªçš„<em>ç¡®åˆ‡</em>æ ¼å¼ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line"></span><br><span class="line">=== åˆ†æ”¯ ===</span><br><span class="line">*master</span><br><span class="line">other-branch</span><br><span class="line">  </span><br><span class="line">=== æš‚å­˜çš„æ–‡ä»¶ ===</span><br><span class="line">wug.txt</span><br><span class="line">wug2.txt</span><br><span class="line">  </span><br><span class="line">=== å·²åˆ é™¤çš„æ–‡ä»¶ ===</span><br><span class="line">goodbye.txt</span><br><span class="line">  </span><br><span class="line">=== æœªæš‚å­˜çš„ä¿®æ”¹ ===</span><br><span class="line">junk.txt (deleted)</span><br><span class="line">wug3.txt (modified)</span><br><span class="line">  </span><br><span class="line">=== æœªè·Ÿè¸ªçš„æ–‡ä»¶ ===</span><br><span class="line">random.stuff</span><br><span class="line">  </span><br></pre></td></tr></table></figure></li><li><p>æ€è·¯</p></li></ul><p>æœ€åä¸¤ä¸ªæˆ‘æ²¡æœ‰å®ç°</p><ul><li>è¿™ä¸ªé‡ç‚¹è€ƒå¯Ÿäº†æŒç»­æ€§çš„ä½¿ç”¨ï¼Œåªè¦æ­£ç¡®è¯»å–å°±ä¸éš¾</li></ul><h3 id="checkout-1"><a href="#checkout-1" class="headerlink" title="checkout"></a>checkout</h3><p>æ£€å‡ºæ˜¯ä¸€ç§é€šç”¨å‘½ä»¤ï¼Œå¯ä»¥æ ¹æ®å…¶å‚æ•°æ‰§è¡Œå‡ ç§ä¸åŒçš„æ“ä½œã€‚ä¸‹é¢æœ‰3ç§å¯èƒ½çš„ç”¨æ³•ã€‚åœ¨æ¯ä¸ªéƒ¨åˆ†ä¸‹é¢ï¼Œæ‚¨ä¼šçœ‹åˆ°3ä¸ªç¼–å·çš„ç‚¹ã€‚æ¯ä¸ªå¯¹åº”äºç›¸åº”çš„æ£€å‡ºç”¨æ³•ã€‚</p><ul><li>ç”¨æ³•<ol><li><code>java gitlet.Main checkout -- [æ–‡ä»¶å]</code></li><li><code>java gitlet.Main checkout [æäº¤ID] -- [æ–‡ä»¶å]</code></li><li><code>java gitlet.Main checkout [åˆ†æ”¯å]</code></li></ol></li><li>æè¿°<ol><li>è·å–æ–‡ä»¶åœ¨å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ä¸­çš„ç‰ˆæœ¬ï¼Œå¹¶å°†å…¶æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒã€‚æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ä¸ä¼šè¢«æš‚å­˜ã€‚</li><li>è·å–æ–‡ä»¶åœ¨å…·æœ‰ç»™å®šIDçš„æäº¤ä¸­çš„ç‰ˆæœ¬ï¼Œå¹¶å°†å…¶æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒã€‚æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ä¸ä¼šè¢«æš‚å­˜ã€‚</li><li>è·å–ç»™å®šåˆ†æ”¯å¤´éƒ¨çš„æäº¤ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒä»¬ã€‚æ­¤å¤–ï¼Œåœ¨æ‰§è¡Œæ­¤å‘½ä»¤ç»“æŸæ—¶ï¼Œç»™å®šåˆ†æ”¯å°†è¢«è§†ä¸ºå½“å‰åˆ†æ”¯ï¼ˆHEADï¼‰ã€‚ä»»ä½•åœ¨å½“å‰åˆ†æ”¯ä¸­è¢«è·Ÿè¸ªä½†åœ¨æ£€å‡ºåˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶å°†è¢«åˆ é™¤ã€‚æš‚å­˜åŒºå°†è¢«æ¸…ç©ºï¼Œé™¤éæ£€å‡ºçš„åˆ†æ”¯æ˜¯å½“å‰åˆ†æ”¯ï¼ˆå‚è§<strong>å¤±è´¥æƒ…å†µ</strong>ä¸‹é¢ï¼‰ã€‚</li></ol></li><li>å¤±è´¥æƒ…å†µ<ol><li>å¦‚æœæ–‡ä»¶åœ¨ä¸Šä¸€ä¸ªæäº¤ä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¸­æ­¢æ“ä½œï¼Œå¹¶æ‰“å°é”™è¯¯æ¶ˆæ¯<code>File does not exist in that commit.</code> ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li><li>å¦‚æœä¸å­˜åœ¨å…·æœ‰ç»™å®šIDçš„æäº¤ï¼Œåˆ™æ‰“å°<code>No commit with that id exists.</code>ã€‚å¦åˆ™ï¼Œå¦‚æœæ–‡ä»¶åœ¨ç»™å®šæäº¤ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°ä¸å¤±è´¥æƒ…å†µ1ç›¸åŒçš„æ¶ˆæ¯ã€‚ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li><li>å¦‚æœä¸å­˜åœ¨å…·æœ‰è¯¥åç§°çš„åˆ†æ”¯ï¼Œåˆ™æ‰“å°<code>No such branch exists.</code> å¦‚æœè¯¥åˆ†æ”¯æ˜¯å½“å‰åˆ†æ”¯ï¼Œåˆ™æ‰“å°<code>No need to checkout the current branch.</code> å¦‚æœå½“å‰åˆ†æ”¯ä¸­æœ‰ä¸€ä¸ªå·¥ä½œæ–‡ä»¶åœ¨æ£€å‡ºæ—¶å°†è¢«è¦†ç›–ï¼Œåˆ™æ‰“å°<code>There is an untracked file in the way; delete it, or add and commit it first.</code> å¹¶é€€å‡ºï¼›åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li></ol></li></ul><h4 id="checkout-String-branch"><a href="#checkout-String-branch" class="headerlink" title="checkout(String branch)"></a>checkout(String branch)</h4><p>å‰ä¸¤ä¸ªæ¯”è¾ƒå®¹æ˜“å°±ä¸è®¨è®ºäº†</p><p>è¿™ä¸ªåˆ‡æ¢åˆ†æ”¯åˆ†ä¸ºä¸‰ä¸ªæƒ…å†µ</p><ul><li><p>æ–‡ä»¶åæ—¢è¢«<code>branch</code>è¿½è¸ªçš„æ–‡ä»¶ï¼Œä¹Ÿè¢«<code>head</code>è¿½è¸ªï¼Œé‚£ä¹ˆå¯¹äºç›¸åŒæ–‡ä»¶åä½†<code>blobID</code>ä¸åŒï¼ˆä¹Ÿå°±æ˜¯å†…å®¹ä¸åŒï¼‰ï¼Œåˆ™ç”¨<code>branch</code>ä¸­çš„æ–‡ä»¶æ¥æ›¿ä»£åŸæ¥çš„æ–‡ä»¶ï¼›ç›¸åŒæ–‡ä»¶åå¹¶ä¸”<code>blobID</code>ç›¸åŒï¼Œä¸è¿›è¡Œä»»ä½•æ“ä½œã€‚</p></li><li><p>æ–‡ä»¶åä¸è¢«<code>branch</code>è¿½è¸ªçš„æ–‡ä»¶ï¼Œè€Œä»…è¢«<code>head</code>è¿½è¸ªï¼Œé‚£ä¹ˆç›´æ¥åˆ é™¤è¿™äº›æ–‡ä»¶ã€‚</p></li><li><p>æ–‡ä»¶åä»…è¢«<code>branch</code>è¿½è¸ªçš„æ–‡ä»¶ï¼Œè€Œä¸è¢«<code>head</code>è¿½è¸ªï¼Œé‚£ä¹ˆç›´æ¥å°†è¿™äº›æ–‡ä»¶å†™å…¥åˆ°å·¥ä½œç›®å½•ã€‚</p></li><li><blockquote><p>è¿™é‡Œæœ‰ä¸ªä¾‹å¤–ï¼Œå³å¯¹äºç¬¬ä¸‰ç§æƒ…å†µï¼Œå°†è¦ç›´æ¥å†™å…¥çš„æ—¶å€™å¦‚æœæœ‰åŒåæ–‡ä»¶ï¼ˆä¾‹å¦‚<code>1.txt</code>ï¼‰å·²ç»åœ¨å·¥ä½œç›®å½•ä¸­äº†ï¼Œè¯´æ˜å·¥ä½œç›®å½•ä¸­åœ¨æ‰§è¡Œ<code>checkout</code>å‰å¢åŠ äº†æ–°çš„<code>1.txt</code>æ–‡ä»¶è€Œæ²¡æœ‰<code>commit</code>ï¼Œè¿™æ—¶å€™gitletä¸çŸ¥é“æ˜¯åº”è¯¥ä¿å­˜ç”¨æˆ·æ–°æ·»åŠ è¿›æ¥çš„<code>1.txt</code>è¿˜æ˜¯æŠŠbranchä¸­çš„<code>1.txt</code>æ‹¿è¿‡æ¥overwriteæ‰ï¼Œä¸ºäº†é¿å…å‡ºç°ä¿¡æ¯ä¸¢å¤±ï¼Œgitletå°±ä¼šæŠ¥é”™ï¼Œè¾“å‡º<code>There is an untracked file in the way; delete it, or add and commit it first.</code></p></blockquote></li></ul><p>æˆ‘çš„åšæ³•:</p><ul><li><p>å¯¹äºç¬¬ä¸€ç§æƒ…å†µ</p><ul><li>é¦–å…ˆå¾—åˆ°ä¸€ä¸ª<strong>åŒ…å«</strong>åœ¨branchVersionå’ŒheadVersionæ–‡ä»¶åçš„åˆ—è¡¨(éå†headVersionçš„keySet)</li><li>éå†è¯¥åˆ—è¡¨<ul><li>åˆ é™¤CWDä¸­åŒ…å«åœ¨è¯¥åˆ—è¡¨çš„æ–‡ä»¶</li><li>å†™å…¥branchVersionç‰ˆæœ¬çš„è¯¥æ–‡ä»¶åˆ°CWDä¸­</li></ul></li></ul></li><li><p>å¯¹äºç¬¬äºŒç§æƒ…å†µ</p><ul><li>é¦–å…ˆå¾—åˆ°ä¸€ä¸ª<strong>ä¸åŒ…å«</strong>åœ¨branchVersionä½†<strong>åŒ…å«</strong>åœ¨headVersionæ–‡ä»¶åçš„åˆ—è¡¨(éå†headVersionçš„keySet)</li><li>éå†è¯¥åˆ—è¡¨<ul><li>åˆ é™¤CWDä¸­åŒ…å«åœ¨è¯¥åˆ—è¡¨çš„æ–‡ä»¶</li></ul></li></ul></li><li><p>å¯¹äºç¬¬ä¸‰ç§æƒ…å†µ</p><ul><li>é¦–å…ˆå¾—åˆ°ä¸€ä¸ª<strong>åŒ…å«</strong>åœ¨branchVersionä½†<strong>ä¸åŒ…å«</strong>åœ¨headVersionæ–‡ä»¶åçš„åˆ—è¡¨(éå†headVersionçš„keySet)</li><li>éå†è¯¥åˆ—è¡¨<ul><li>æ£€æŸ¥ç‰¹æ®Šæƒ…å†µ</li><li>ç›´æ¥å†™å…¥branchVersionç‰ˆæœ¬çš„è¯¥æ–‡ä»¶åˆ°CWDä¸­</li></ul></li></ul><p>ä¸è¦å¿˜è®°ä¿å­˜curBranch</p></li></ul><h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><ul><li><strong>æè¿°</strong>: åˆ›å»ºä¸€ä¸ªå…·æœ‰ç»™å®šåç§°çš„æ–°åˆ†æ”¯ï¼Œå¹¶å°†å…¶æŒ‡å‘å½“å‰çš„å¤´éƒ¨æäº¤ã€‚åˆ†æ”¯åªæ˜¯å¯¹æäº¤èŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆä¸€ä¸ªSHA-1æ ‡è¯†ç¬¦ï¼‰çš„åç§°ã€‚è¯¥å‘½ä»¤ä¸ä¼šç«‹å³åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„åˆ†æ”¯ï¼ˆå°±åƒçœŸå®çš„Gitä¸€æ ·ï¼‰ã€‚åœ¨è°ƒç”¨åˆ†æ”¯ä¹‹å‰ï¼Œæ‚¨çš„ä»£ç åº”è¯¥ä½¿ç”¨ä¸€ä¸ªåä¸ºâ€œmasterâ€çš„é»˜è®¤åˆ†æ”¯è¿è¡Œã€‚</li></ul><p>å¢åŠ ä¸€ä¸ªBranchï¼Œå³åœ¨<code>heads</code>æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„åä¸ºbranchnameçš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºå½“å‰çš„commitIDã€‚æ­¤æ“ä½œä¸æ”¹å˜<code>HEAD</code>æŒ‡å‘ï¼Œåªæ˜¯å•çº¯å¢åŠ ä¸€ä¸ªBranchã€‚æ”¹å˜åˆ†æ”¯ä¾ç„¶æ˜¯é€šè¿‡<code>checkout</code>å‘½ä»¤æ¥æ”¹å˜ã€‚</p><p><strong>å¤±è´¥çš„æƒ…å†µ</strong>ï¼šæ— </p><h3 id="rm-branch"><a href="#rm-branch" class="headerlink" title="rm-branch"></a>rm-branch</h3><ul><li><strong>æè¿°</strong>: åˆ é™¤å…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ã€‚è¿™åªæ˜¯åˆ é™¤ä¸åˆ†æ”¯å…³è”çš„æŒ‡é’ˆï¼›ä¸æ„å‘³ç€åˆ é™¤åœ¨è¯¥åˆ†æ”¯ä¸‹åˆ›å»ºçš„æ‰€æœ‰æäº¤ï¼Œæˆ–è€…ç±»ä¼¼çš„æ“ä½œã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœå…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¸­æ­¢ã€‚æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A branch with that name does not exist.</code> å¦‚æœå°è¯•åˆ é™¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„åˆ†æ”¯ï¼Œåˆ™ä¸­æ­¢ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯ <code>Cannot remove the current branch.</code>ã€‚</li></ul><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main merge [åˆ†æ”¯åç§°]</code></li><li><strong>æè¿°</strong>: å°†ç»™å®šåˆ†æ”¯çš„æ–‡ä»¶åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªæ›´è¯¦ç»†çš„æè¿°ï¼š<ul><li>é¦–å…ˆè€ƒè™‘å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯çš„ <strong>åˆ†å‰²ç‚¹</strong>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>master</code> æ˜¯å½“å‰åˆ†æ”¯ï¼Œ<code>branch</code> æ˜¯ç»™å®šåˆ†æ”¯ï¼š<img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/split_point.png" alt="åˆ†å‰²ç‚¹"> åˆ†å‰²ç‚¹æ˜¯å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯å¤´éƒ¨çš„<em>æœ€æ–°å…±åŒç¥–å…ˆ</em>ï¼š- <em>å…±åŒç¥–å…ˆ</em> æ˜¯ä¸€ä¸ªæäº¤ï¼Œä»ä¸¤ä¸ªåˆ†æ”¯å¤´éƒ¨éƒ½æœ‰ä¸€æ¡è·¯å¾„ï¼ˆ0ä¸ªæˆ–å¤šä¸ªçˆ¶æŒ‡é’ˆ)ã€‚- <em>æœ€æ–°</em> çš„å…±åŒç¥–å…ˆæ˜¯ä¸€ä¸ªä¸æ˜¯å…¶ä»–ä»»ä½•å…±åŒç¥–å…ˆçš„å…±åŒç¥–å…ˆã€‚ä¾‹å¦‚ï¼Œå°½ç®¡ä¸Šå›¾ä¸­æœ€å·¦è¾¹çš„æäº¤æ˜¯ <code>master</code> å’Œ <code>branch</code> çš„å…±åŒç¥–å…ˆï¼Œä½†å®ƒä¹Ÿæ˜¯å…¶å³è¾¹ç´§é‚»çš„æäº¤çš„ç¥–å…ˆï¼Œå› æ­¤å®ƒä¸æ˜¯æœ€æ–°çš„å…±åŒç¥–å…ˆã€‚å¦‚æœåˆ†å‰²ç‚¹ <em>æ˜¯</em> ä¸ç»™å®šåˆ†æ”¯ç›¸åŒçš„æäº¤ï¼Œåˆ™æˆ‘ä»¬ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼›åˆå¹¶å·²å®Œæˆï¼Œå¹¶ä»¥æ¶ˆæ¯ <code>Given branch is an ancestor of the current branch.ã€‚</code> ç»“æŸæ“ä½œã€‚å¦‚æœåˆ†å‰²ç‚¹æ˜¯å½“å‰åˆ†æ”¯ï¼Œåˆ™æ•ˆæœæ˜¯æ£€å‡ºç»™å®šåˆ†æ”¯ï¼Œå¹¶åœ¨æ‰“å°æ¶ˆæ¯ <code>Current branch fast-forwarded.</code> åç»“æŸã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ç»§ç»­ä»¥ä¸‹æ­¥éª¤:</li></ul></li></ul><p><img src="/2024/03/21/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-7-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-ProJ2-complish/f41d1cfa707f80bbc90f4969c3c60b0.png" alt="f41d1cfa707f80bbc90f4969c3c60b0"></p><ul><li><p><strong>å¤±è´¥æ¡ˆä¾‹</strong>: </p><ul><li>å¦‚æœå­˜åœ¨å·²æš‚å­˜çš„æ·»åŠ æˆ–åˆ é™¤ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>You have uncommitted changes.</code> å¹¶é€€å‡ºã€‚</li><li>å¦‚æœç»™å®šåç§°çš„åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A branch with that name does not exist.</code> </li><li>å¦‚æœå°è¯•å°†åˆ†æ”¯ä¸è‡ªèº«åˆå¹¶ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>Cannot merge a branch with itself.</code> </li><li>å¦‚æœåˆå¹¶ä¼šç”Ÿæˆé”™è¯¯ï¼Œå› ä¸ºæ‰€åšçš„æäº¤ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œè¯·è®©æ­¤é”™è¯¯çš„å¸¸è§„æäº¤æ¶ˆæ¯ç»§ç»­è¿›è¡Œã€‚</li><li>å¦‚æœå½“å‰æäº¤ä¸­çš„ä¸€ä¸ªæœªè·Ÿè¸ªæ–‡ä»¶å°†è¢«åˆå¹¶è¦†ç›–æˆ–åˆ é™¤ï¼Œè¯·æ‰“å° <code>There is an untracked file in the way; delete it, or add and commit it first.</code> å¹¶é€€å‡ºï¼›åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚</li></ul></li><li><p>æ€è·¯</p><ul><li><p>é”™è¯¯æ£€æµ‹</p><ul><li>æ£€æŸ¥Stageæ˜¯å¦ä¸ºç©º</li><li>æ£€æŸ¥ç»™å®šåˆ†æ”¯æ˜¯å¦å­˜åœ¨</li><li>æ£€æŸ¥åˆå¹¶çš„æ˜¯å¦ä¸ºå¤´æŒ‡é’ˆ</li><li>ç¬¬å››æ²¡çœ‹æ‡‚</li><li>åŒcheckoutä¸­çš„æ€è·¯</li></ul></li><li><p>ç‰¹æ®Šæƒ…å†µåˆ†æ</p><ul><li>å¦‚æœåˆ†å‰²ç‚¹æ˜¯ç»™å®šåˆ†æ”¯ï¼Œä¸æ“ä½œ</li><li>å¦‚æœåˆ†æ”¯å®Œæˆï¼Œè¾“å‡ºÂ·Â·Â·Â·Â·Â·</li><li>å¦‚æœåˆ†å‰²ç‚¹æ˜¯å¤´æŒ‡é’ˆï¼Œcheckoutç»™å®šåˆ†æ”¯å¹¶è¾“å‡ºÂ·Â·Â·Â·Â·Â·</li></ul></li><li><p>æ­£å¸¸æƒ…å†µåˆ†æ</p><ul><li><em>(<code>x</code>ï¼Œ<code>y</code>ä¸ºåˆ†æ”¯ï¼Œ<code>s</code>ä¸ºåˆ†è£‚ç‚¹)</em></li><li>å¦‚æœæ–‡ä»¶åœ¨<code>x</code>è¢«ä¿®æ”¹ï¼Œä½†åœ¨<code>y</code>æ²¡æœ‰ä¿®æ”¹-&gt;ç‰ˆæœ¬ä¸º<code>x</code>çš„<ul><li>è‹¥<code>x</code>ä¸º <strong>ç»™å®šåˆ†æ”¯æŒ‡é’ˆ</strong>ï¼Œ CWDæ”¹å˜</li></ul></li><li>å¦‚æœæ–‡ä»¶åœ¨<code>x</code>,<code>s</code>ä¸å­˜åœ¨ï¼Œåœ¨<code>y</code>ä¸­ -&gt; ç‰ˆæœ¬ä¸º<code>y</code>çš„<ul><li>è‹¥<code>y</code>ä¸º <strong>ç»™å®šåˆ†æ”¯æŒ‡é’ˆ</strong>ï¼Œ CWDæ”¹å˜</li></ul></li><li>å¦‚æœæ–‡ä»¶åœ¨<code>x</code>ä¸­ä¸å­˜åœ¨ï¼Œä½†æ²¡è¢«<code>y</code>ä¿®æ”¹-&gt;åˆ æ‰<ul><li>è‹¥<code>x</code>ä¸º <strong>ç»™å®šåˆ†æ”¯æŒ‡é’ˆ</strong>ï¼Œ CWDæ”¹å˜</li><li>åœ¨åˆ†å‰²ç‚¹å¤„å­˜åœ¨ä½†åœ¨å½“å‰åˆ†æ”¯ä¸­æœªè¢«ä¿®æ”¹å¹¶ä¸”åœ¨ç»™å®šåˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„ä»»ä½•æ–‡ä»¶éƒ½åº”è¯¥è¢«ç§»é™¤ï¼ˆå¹¶ä¸”æœªè¢«è·Ÿè¸ªï¼‰ã€‚</li></ul></li><li>å¦‚æœæ–‡ä»¶åŒæ—¶åœ¨<code>x, y</code>ä¸­è¢«ä¿®æ”¹ä¸”ç‰ˆæœ¬ç›¸ç­‰ï¼Œéšä¾¿äº†</li><li>å¦‚æœæ–‡ä»¶åŒæ—¶åœ¨<code>x, y</code>ä¸­è¢«ä¿®æ”¹ä½†ç‰ˆæœ¬ä¸ä¸€æ ·-&gt;å¼•å‘å†²çª<ul><li>åœ¨å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯ä¸­ä»¥ä¸åŒæ–¹å¼è¢«ä¿®æ”¹çš„ä»»ä½•æ–‡ä»¶éƒ½ä¼š<em>å†²çª</em>ã€‚â€œä»¥ä¸åŒæ–¹å¼è¢«ä¿®æ”¹â€å¯ä»¥æ„å‘³ç€ä¸¤è€…çš„å†…å®¹éƒ½å‘ç”Ÿäº†å˜åŒ–ä¸”ä¸åŒï¼Œæˆ–è€…ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–è€Œå¦ä¸€ä¸ªæ–‡ä»¶è¢«åˆ é™¤ï¼Œæˆ–è€…æ–‡ä»¶åœ¨åˆ†å‰²ç‚¹å¤„ä¸å­˜åœ¨ï¼Œå¹¶ä¸”åœ¨ç»™å®šåˆ†æ”¯å’Œå½“å‰åˆ†æ”¯ä¸­å…·æœ‰ä¸åŒçš„å†…å®¹ã€‚</li></ul></li></ul></li><li><p>æ–¹æ³•ç¼–å†™</p><ul><li>æ‰¾å‡ºåˆ†è£‚ç‚¹</li><li>æ‰¾å‡ºæ”¹å˜çš„æ–‡ä»¶é›† å’Œ æœªæ”¹å˜çš„æ–‡ä»¶é›†<br>1. å¯ä»¥ç”¨HashMapæ¥æ„å»º<br>- æ ¹æ® <code>ä¿®æ”¹</code> ã€<code>æœªä¿®æ”¹</code>ã€<code>å­˜åœ¨</code>å’Œ <code>ä¸å­˜åœ¨</code> å››ä¸ªæ ‡ç­¾æ¥æ ‡è®°æ–‡ä»¶<br>2. å¯ä»¥ç”¨Setï¼Œåˆ©ç”¨Setçš„ç›¸åŠ å‡</li><li>åˆ†ä¸ºäº”ä¸ªæ–¹æ³•<ol><li>ä¸€æ”¹ä¸€ä¸å˜æƒ…å†µçš„æ–¹æ³•</li><li>ä¸€å­˜åœ¨ä¸¤ä¸å­˜åœ¨çš„æ–¹æ³•</li><li>ä¸€ä¸å­˜åœ¨ä¸€æœªä¿®æ”¹çš„æ–¹æ³•</li><li>ä¸¤æ”¹ä¸€åŒçš„æ–¹æ³•</li><li>ä¸¤æ”¹ä¸åŒçš„æ–¹æ³•</li></ol></li></ul></li><li><p>ç»†èŠ‚åˆ†æ</p><ul><li><p>é¦–å…ˆè¯»å–éœ€è¦çš„æ–‡ä»¶</p></li><li><p>å…ˆé”™è¯¯æ£€æµ‹</p></li><li><p>ç‰¹æ®Šæƒ…å†µä¸¤ä¸ªifè¯­å¥</p></li><li><p>å¼€å§‹æ­£å¸¸æƒ…å†µç¼–å†™</p></li><li><p>è®¾è®¡ä¸€ä¸ªç®—æ³•æ‰¾åˆ°åˆ†è£‚ç‚¹</p></li><li><p>æ‰¾å‡ºç”¨äºäº”ä¸ªæ–¹æ³•çš„æ–‡ä»¶é›†</p><ol><li>éå†åˆ†å‰²ç‚¹çš„æ–‡ä»¶åŒä¸¤ä¸ªåˆ†æ”¯æ–‡ä»¶æ¯”è¾ƒ<ul><li>æŒ‰ <code>ä¿®æ”¹</code> ã€<code>æœªä¿®æ”¹</code>ã€<code>å­˜åœ¨</code>å’Œ <code>ä¸å­˜åœ¨</code> å››ä¸ªæ ‡ç­¾æ¥æ ‡è®°æ–‡ä»¶</li></ul></li><li>æœ‰Setçš„åŠ å‡<ol><li>æ€è€ƒä¸­</li><li>ç”¨é›†åˆå‡åˆ†è£‚ç‚¹</li><li>é›†åˆå‡åˆ†æ”¯ + ç›´æ¥æŸ¥</li><li>æ€è€ƒä¸­</li></ol></li><li>Setå’Œéå†ç»“åˆ<ul><li>å¯¹äºå­˜åœ¨å’Œä¸å­˜åœ¨ï¼Œç”¨Set</li><li>å¯¹äºæœ‰æ— ä¿®æ”¹ï¼Œç”¨éå†åŠ æ ‡ç­¾</li></ul></li></ol></li><li><p>å¯¹åº”æ–¹æ³•è¿›è¡Œæ“ä½œ:</p><ol><li>å¯¹äºæ–‡ä»¶é›†ï¼Œè‹¥ç»™å®šåˆ†æ”¯çš„æäº¤æ–‡ä»¶ä¿®æ”¹äº†ï¼Œå½“å‰åˆ†æ”¯çš„æœªä¿®æ”¹ï¼Œåˆ é™¤CWDæ–‡ä»¶ï¼Œå†™å…¥ç»™å®šåˆ†æ”¯çš„ç‰ˆæœ¬</li><li>å¯¹äºæ–‡ä»¶é›†ï¼Œè‹¥å½“å‰åˆ†æ”¯çš„æäº¤æ–‡ä»¶ä¸å­˜åœ¨ï¼Œç»™å®šåˆ†æ”¯çš„æ–‡ä»¶å­˜åœ¨ï¼Œå†™å…¥ç»™å®šåˆ†æ”¯çš„ç‰ˆæœ¬</li><li>å¯¹äºæ–‡ä»¶é›†ï¼Œå¦‚æœåœ¨åˆ†å‰²ç‚¹å¤„å­˜åœ¨çš„æ–‡ä»¶åœ¨å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸å­˜åœ¨ï¼Œå¦ä¸€ä¸ªåˆ†æ”¯æœªä¿®æ”¹ï¼Œç›´æ¥åˆ æ‰</li><li>å¯¹äºæ–‡ä»¶é›†ï¼Œå¦‚æœæ–‡ä»¶å‡è¢«ä¿®æ”¹ä¸”ç‰ˆæœ¬ç›¸ç­‰ï¼Œéšä¾¿æ</li><li>å¯¹äºæ–‡ä»¶é›†ï¼Œå¦‚æœæ–‡ä»¶å‡è¢«ä¿®æ”¹ä½†ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå¼•å‘å†²çª<ol><li>ä¸¤è€…çš„å†…å®¹éƒ½å‘ç”Ÿäº†å˜åŒ–ä¸”ä¸åŒï¼Œæˆ–è€…ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–è€Œå¦ä¸€ä¸ªæ–‡ä»¶è¢«åˆ é™¤ï¼Œæˆ–è€…æ–‡ä»¶åœ¨åˆ†å‰²ç‚¹å¤„ä¸å­˜åœ¨ï¼Œå¹¶ä¸”åœ¨ç»™å®šåˆ†æ”¯å’Œå½“å‰åˆ†æ”¯ä¸­å…·æœ‰ä¸åŒçš„å†…å®¹</li></ol></li></ol></li><li><p>æœ€ååˆ›å»ºåˆå¹¶æäº¤ï¼Œæ³¨æ„ï¼šå…¶ç¬¬ä¸€ä¸ªçˆ¶æäº¤ä¸ºå½“å‰å¤´æŒ‡é’ˆ</p><h3 id="éª¨æ¶ä»£ç "><a href="#éª¨æ¶ä»£ç " class="headerlink" title="éª¨æ¶ä»£ç "></a>éª¨æ¶ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// error check</span></span><br><span class="line">    mergeErrCheck(branch);</span><br><span class="line">    <span class="type">Commit</span> <span class="variable">branchCommit</span> <span class="operator">=</span> readBranch(branch);</span><br><span class="line">    HashMap&lt;String, Integer&gt; branchAncestors = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    HashMap&lt;String, Integer&gt; masterAncestors = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    CommitTree.readHEAD();</span><br><span class="line">    findAncestors(branchCommit, branchAncestors, <span class="number">0</span>);</span><br><span class="line">    findAncestors(HEAD, masterAncestors, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">// get splitPoint</span></span><br><span class="line">    <span class="type">Commit</span> <span class="variable">splitPoint</span> <span class="operator">=</span> findSplitPoint(masterAncestors, branchAncestors);</span><br><span class="line">    Set&lt;String&gt; splitSet = splitPoint.getVersion().keySet();</span><br><span class="line">    HashMap&lt;String, String&gt; curVersion = HEAD.getVersion();</span><br><span class="line">    <span class="comment">// specialSituation check</span></span><br><span class="line">    specialSituation(splitPoint, branchCommit, branch);</span><br><span class="line">    <span class="comment">// get changSet</span></span><br><span class="line">    Set&lt;String&gt; changeFileSetOfBranch = getChangeSet(branchCommit, splitPoint);</span><br><span class="line">    Set&lt;String&gt; noChangeFileSetOfBranch = opposeSet(changeFileSetOfBranch, branchCommit);</span><br><span class="line">    Set&lt;String&gt; changeFileSetOfCurBranch = getChangeSet(HEAD, splitPoint);</span><br><span class="line">    Set&lt;String&gt; noChangeFileSetOfCurBranch = opposeSet(changeFileSetOfCurBranch, HEAD);</span><br><span class="line">    <span class="comment">// get existSet</span></span><br><span class="line">    Set&lt;String&gt; existFileSetOfBranch = getCompareFile(branchCommit, splitPoint, DELETE);</span><br><span class="line">    Set&lt;String&gt; noExistFileSetOfBranch = noExistSet(splitSet, HEAD.getVersion().keySet(), branchCommit.getVersion().keySet());</span><br><span class="line">    Set&lt;String&gt; existFileSetOfCurBranch = getCompareFile(HEAD, splitPoint, DELETE);</span><br><span class="line">    Set&lt;String&gt; noExistFileSetOfCurBranch = noExistSet(splitSet, branchCommit.getVersion().keySet(), HEAD.getVersion().keySet());</span><br><span class="line">    <span class="comment">// normal situation</span></span><br><span class="line">    branchChangeHeadKeep(branchCommit, noChangeFileSetOfCurBranch, changeFileSetOfBranch, curVersion);</span><br><span class="line">    branchExistOthersNot(branchCommit, existFileSetOfBranch, existFileSetOfCurBranch, curVersion);</span><br><span class="line">    OneNotExistOneKeep(splitSet, noExistFileSetOfBranch, noChangeFileSetOfCurBranch, curVersion);</span><br><span class="line">    checkTwoChangeIfSame(branchCommit, splitSet, changeFileSetOfBranch, noExistFileSetOfBranch, changeFileSetOfCurBranch, noExistFileSetOfCurBranch,curVersion);</span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;Merged &quot;</span> + branch + <span class="string">&quot; into &quot;</span> + curBranchName + <span class="string">&quot;.&quot;</span>;</span><br><span class="line">    creatMergeCommmit(message, curVersion, HEAD.getShaName(), branchCommit.getShaName());</span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h1 id="æ”¶è·"><a href="#æ”¶è·" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h1><ul><li><p>å¯¹æ–‡ä»¶çš„æŒç»­æ€§æ“ä½œæœ‰äº†æ›´æ·±çš„ç†è§£</p></li><li><p>å¯¹æ–‡ä»¶çš„å†™å…¥å’Œè¯»å–æœ‰äº†å®é™…æ“ä½œä½“éªŒ</p><ul><li><pre><code class="java">String readContent = new String(byte[] fileByte);<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- å¯¹å‡½æ•°å¼ç¼–ç¨‹æ“ä½œæœ‰äº†ä½“ä¼šï¼Œé¢å¯¹å·¥ç¨‹é‡å¤§çš„é¡¹ç›®åº”è¯¥ç»†åŒ–åˆ†å¼€</span><br><span class="line"></span><br><span class="line">githubä»“åº“: [xxbaizero0/CS61B-Tutorial (github.com)](https://github.com/xxbaizero0/CS61B-Tutorial)</span><br><span class="line"></span><br><span class="line"># æœ‰ç”¨çš„mergeæµ‹è¯•</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">package gitlet;</span><br><span class="line"></span><br><span class="line">import static org.junit.Assert.*;</span><br><span class="line">import org.junit.Test;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.util.HashMap;</span><br><span class="line">import java.util.Set;</span><br><span class="line"></span><br><span class="line">public class Text &#123;</span><br><span class="line">    static String[] init = new String[]&#123;&quot;init&quot;&#125;;</span><br><span class="line">    static String[] add = new String[]&#123;&quot;add&quot;, &quot;hello.txt&quot;&#125;;</span><br><span class="line">    static String[] commit = new String[]&#123;&quot;commit&quot;, &quot;hello&quot;&#125;;</span><br><span class="line">    static String[] log = new String[]&#123;&quot;log&quot;&#125;;</span><br><span class="line">    static String[] rm = new String[]&#123;&quot;rm&quot;, &quot;hello.txt&quot;&#125;;</span><br><span class="line">    static String[] check = new String[]&#123;&quot;checkout&quot;, &quot;--&quot;, &quot;hello.txt&quot;&#125;;</span><br><span class="line">    String[] global_log = new String[]&#123;&quot;global-log&quot;&#125;;</span><br><span class="line">    static String[] status = new String[]&#123;&quot;status&quot;&#125;;</span><br><span class="line"></span><br><span class="line">    private static void creatNewFile(String name) &#123;</span><br><span class="line">        File file = Repository.CWD;</span><br><span class="line">        File newFile = Utils.join(file, name);</span><br><span class="line">        if (!newFile.exists()) &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                newFile.createNewFile();</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static void branch(String name) &#123;</span><br><span class="line">        String[] branch = new String[]&#123;&quot;branch&quot;, name&#125;;</span><br><span class="line">        Main.main(branch);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    private static void add(String name) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;add&quot;, name&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    private static void log() &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;log&quot;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    private static void glog() &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;global-log&quot;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void rm(String name) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;rm&quot;, name&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void commit(String name) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;commit&quot;, name&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void find(String name) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;find&quot;, name&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    private static void check(String checkBranch) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;checkout&quot;, checkBranch&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void merge(String checkBranch) &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;merge&quot;, checkBranch&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void status() &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;status&quot;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void global_log() &#123;</span><br><span class="line">        Main.main(new String[]&#123;&quot;global-log&quot;&#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    static String g = &quot;g.txt&quot;;</span><br><span class="line">    static String f = &quot;f.txt&quot;;</span><br><span class="line">    static String h = &quot;h.txt&quot;;</span><br><span class="line">    static String k = &quot;k.txt&quot;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void setup() &#123;</span><br><span class="line">        File rep = Repository.GITLET_DIR;</span><br><span class="line">        if (rep.exists()) &#123;</span><br><span class="line">            deleteFolder(rep);</span><br><span class="line">        &#125;</span><br><span class="line">        creatNewFile(g);</span><br><span class="line">        creatNewFile(f);</span><br><span class="line">        creatNewFile(h);</span><br><span class="line">        creatNewFile(k);</span><br><span class="line">        Main.main(init);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test2() &#123;</span><br><span class="line">        setup();</span><br><span class="line">        HashMap&lt;String, Integer&gt; masterAncestors = new HashMap&lt;&gt;();</span><br><span class="line">        masterAncestors.put(&quot;1&quot;, 4);</span><br><span class="line">        masterAncestors.put(&quot;2&quot;, 3);</span><br><span class="line">        masterAncestors.put(&quot;3&quot;, 2);</span><br><span class="line">        masterAncestors.put(&quot;4&quot;, 1);</span><br><span class="line">        masterAncestors.put(&quot;5&quot;, 0);</span><br><span class="line">        HashMap&lt;String, Integer&gt; branchAncestors = new HashMap&lt;&gt;();</span><br><span class="line">        branchAncestors.put(&quot;1&quot;, 5);</span><br><span class="line">        branchAncestors.put(&quot;22&quot;, 4);</span><br><span class="line">        branchAncestors.put(&quot;33&quot;, 3);</span><br><span class="line">        branchAncestors.put(&quot;44&quot;, 2);</span><br><span class="line">        branchAncestors.put(&quot;55&quot;, 1);</span><br><span class="line">        branchAncestors.put(&quot;66&quot;, 0);</span><br><span class="line">        String split = findSplitPoint(masterAncestors, branchAncestors);</span><br><span class="line">        assertEquals(split, &quot;1&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test() &#123;</span><br><span class="line">        setup();</span><br><span class="line">        add(g);</span><br><span class="line">        add(f);</span><br><span class="line">        commit(&quot;1&quot;);</span><br><span class="line">        branch(&quot;other&quot;);</span><br><span class="line">        add(h);</span><br><span class="line">        rm(g);</span><br><span class="line">        commit(&quot;add h, rm g&quot;);</span><br><span class="line">        check(&quot;other&quot;);</span><br><span class="line">        rm(f);</span><br><span class="line">        add(k);</span><br><span class="line">        commit(&quot;rm f, add k&quot;);</span><br><span class="line">        check(&quot;master&quot;);</span><br><span class="line">        global_log();</span><br><span class="line">        merge(&quot;other&quot;);</span><br><span class="line">        log();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void test4() &#123;</span><br><span class="line">        add(g);</span><br><span class="line">        add(f);</span><br><span class="line">        commit(&quot;2&quot;);</span><br><span class="line">        branch(&quot;other&quot;);</span><br><span class="line">        add(h);</span><br><span class="line">        rm(g);</span><br><span class="line">        commit(&quot;a h r g&quot;);</span><br><span class="line">        check(&quot;other&quot;);</span><br><span class="line">        merge(&quot;other&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void reset2() &#123;</span><br><span class="line">        add(g);</span><br><span class="line">        add(f);</span><br><span class="line">        commit(&quot;2&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Test</span><br><span class="line">    public void test5() &#123;</span><br><span class="line">        setup();</span><br><span class="line">        reset2();</span><br><span class="line">        branch(&quot;b1&quot;);</span><br><span class="line">        add(h);</span><br><span class="line">        commit(&quot;add h&quot;);</span><br><span class="line">        branch(&quot;b2&quot;);</span><br><span class="line">        rm(f);</span><br><span class="line">        commit(&quot;rm f&quot;);</span><br><span class="line">        //merge(&quot;b1&quot;);</span><br><span class="line">        check(&quot;b2&quot;);</span><br><span class="line">        merge(&quot;master&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    private static void test3() &#123;</span><br><span class="line">        String branch = &quot;new&quot;;</span><br><span class="line">        branch(branch);</span><br><span class="line">        add(&quot;hello.txt&quot;);</span><br><span class="line">        add(&quot;hello2.txt&quot;);</span><br><span class="line">        commit(&quot;2&quot;);</span><br><span class="line">        check(branch);</span><br><span class="line">        creatNewFile(&quot;hello2.txt&quot;);</span><br><span class="line">        add(&quot;hello2.txt&quot;);</span><br><span class="line">        commit(&quot;3&quot;);</span><br><span class="line">        check(&quot;master&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void deleteFolder(File folder) &#123;</span><br><span class="line">        if (folder.isDirectory()) &#123;</span><br><span class="line">            File[] files = folder.listFiles();</span><br><span class="line">            if (files != null) &#123;</span><br><span class="line">                for (File file : files) &#123;</span><br><span class="line">                    deleteFolder(file);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        folder.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(äºŒåä¸€)-Tries</title>
      <link href="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/"/>
      <url>/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä»¬ç°åœ¨å°†å­¦ä¹ ä¸€ä¸ªåä¸º Tries çš„æ–°æ•°æ®ç»“æ„ã€‚è¿™äº›å°†ä½œä¸º Set å’Œ Map çš„æ–°å®ç°ï¼ˆæ ¹æ®æˆ‘ä»¬ä¹‹å‰æ‰€å­¦åˆ°çš„ï¼‰ï¼Œè¯¥ Map å¯¹æŸäº›ç±»å‹çš„æ•°æ®å’Œä¿¡æ¯å…·æœ‰ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ã€‚</p><h1 id="Trieçš„ä»‹ç»"><a href="#Trieçš„ä»‹ç»" class="headerlink" title="Trieçš„ä»‹ç»"></a>Trieçš„ä»‹ç»</h1><h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><p>ç”±äºæˆ‘ä»¬æ­£åœ¨è€ƒè™‘ ADT <em>Set</em>å’Œ<em>Map</em>ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹åˆ°ç›®å‰ä¸ºæ­¢æ‰€å­¦åˆ°çš„å®ç°ã€‚è¿‡å»ï¼Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ å¦‚ä½•ä½¿ç”¨äºŒå‰æœç´¢æ ‘æˆ–å“ˆå¸Œè¡¨æ¥å®ç°è¿™äº› ADTã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹è¿™ä¸¤è€…çš„è¿è¡Œæ—¶ï¼š</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321221008103.png" alt="image-20240321221008103"></p><ul><li>å¹³è¡¡æœç´¢æ ‘ï¼š<ul><li><code>contains(x)</code>: $Î˜(logN)$</li><li><code>add(x)</code>: $Î˜(logN)$</li></ul></li><li>è°ƒæ•´å•ç‹¬çš„é“¾æ¥å“ˆå¸Œè¡¨çš„å¤§å°ï¼š<ul><li><code>contains(x)</code> ï¼š $Î˜(1) $ï¼ˆå‡è®¾ç‚¹å·®å‡åŒ€ï¼‰</li><li><code>add(x)</code> ï¼š $Î˜(1)$ ï¼ˆå‡è®¾å‡åŒ€ç‚¹å·®å’Œæ‘Šé”€ï¼‰</li></ul></li></ul><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸ Sets å’Œ Maps ç›¸å…³çš„æ“ä½œçš„å®ç°é€Ÿåº¦éå¸¸å¿«ã€‚</p><p><strong>é—®é¢˜</strong>ï¼šæˆ‘ä»¬èƒ½åšå¾—æ¯”è¿™æ›´å¥½å—ï¼Ÿè¿™å¯èƒ½å–å†³äºæˆ‘ä»¬é—®é¢˜çš„æ€§è´¨ã€‚å¦‚æœæˆ‘ä»¬<strong>çŸ¥é“é’¥åŒ™çš„ç‰¹æ®Šç‰¹æ€§</strong>ä¼šæ€æ ·ï¼Ÿ</p><p><strong>ç­”ï¼š</strong>æ˜¯çš„ï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ€»æ˜¯çŸ¥é“æˆ‘ä»¬çš„é”®æ˜¯ ASCII å­—ç¬¦ï¼Œé‚£ä¹ˆä¸è¦ä½¿ç”¨é€šç”¨çš„ HashMapï¼Œåªéœ€ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦éƒ½æ˜¯æˆ‘ä»¬æ•°ç»„ä¸­çš„ä¸åŒç´¢å¼•ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">DataIndexedCharMap</span>&lt;<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    private V[] items;</span><br><span class="line">    public DataIndexedCharMap(<span class="built_in">int</span> R) &#123;</span><br><span class="line">        items = (V[]) <span class="keyword">new</span> <span class="built_in">Object</span>[R];</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">void</span> put(char c, V val) &#123;</span><br><span class="line">        items[c] = val;</span><br><span class="line">    &#125;</span><br><span class="line">    public V <span class="keyword">get</span>(char c) &#123;</span><br><span class="line">        <span class="keyword">return</span> items[c];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸ºä¸€ä¸ªé‡‡ç”¨å­—ç¬¦é”®çš„æ˜ å°„åˆ›å»ºäº†ä¸€ä¸ªå®ç°ã€‚å€¼ R è¡¨ç¤ºå¯èƒ½çš„å­—ç¬¦æ•°ï¼ˆä¾‹å¦‚ï¼ŒASCII ä¸º 128ï¼‰ã€‚å¥½ï¼é€šè¿‡äº†è§£Keysçš„èŒƒå›´ä»¥åŠå®ƒä»¬å°†æ˜¯ä»€ä¹ˆç±»å‹çš„å€¼ï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªç®€å•è€Œé«˜æ•ˆçš„æ•°æ®ç»“æ„ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»ä¸ºå­—ç¬¦åˆ›å»ºäº†ä¸€äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸²å‘¢ï¼Ÿ</p><h2 id="å‘æ˜-Trie"><a href="#å‘æ˜-Trie" class="headerlink" title="å‘æ˜ Trie"></a>å‘æ˜ Trie</h2><p>Trieæ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æ„ï¼Œç”¨äºå¯ä»¥å°†é”®åˆ†è§£ä¸ºâ€œå­—ç¬¦â€å¹¶ä¸å…¶ä»–é”®ï¼ˆä¾‹å¦‚å­—ç¬¦ä¸²ï¼‰å…±äº«å‰ç¼€çš„æƒ…å†µã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«â€œsamâ€ã€â€œsadâ€ã€â€œsapâ€ã€â€œsameâ€ã€â€œaâ€å’Œâ€œawlsâ€çš„é›†åˆã€‚å¯¹äºç°æœ‰çš„ Set å®ç°ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹å¯è§†åŒ–ç»“æ„ã€‚æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨æˆ‘ä»¬å·²çŸ¥çš„å…¶ä»–å¯èƒ½çš„æ•°æ®ç»“æ„æ¥æ”¹è¿›è¿™ä¸€ç‚¹ï¼Ÿæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨ç»“æ„å­—ç¬¦ä¸²ï¼Ÿ</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321221008103.png" alt="image-20240321221008103"></p><p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°†ä½¿ç”¨çš„ä¸€äº›å…³é”®æƒ³æ³•ï¼š</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä¸ªå­—æ¯</li><li>èŠ‚ç‚¹å¯ä»¥ç”±å¤šä¸ªKeyså…±äº«</li></ul><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°† â€œsamâ€ã€â€œsadâ€ã€â€œsapâ€ã€â€œsameâ€ã€â€œaâ€ å’Œ â€œawlsâ€ æ’å…¥åˆ°åŒ…å«å•å­—ç¬¦èŠ‚ç‚¹çš„æ ‘ç»“æ„ä¸­ã€‚ä¸€ä¸ªé‡è¦çš„è§‚å¯Ÿç»“æœæ˜¯ï¼Œè¿™äº›å•è¯ä¸­çš„å¤§å¤šæ•°éƒ½å…·æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›ç»“æ„ç›¸ä¼¼çš„å­—ç¬¦ä¸²æ¥æ„å»ºæˆ‘ä»¬çš„ç»“æ„ã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ä¸ä¼šå¤šæ¬¡å­˜å‚¨ç›¸åŒçš„å‰ç¼€ï¼ˆä¾‹å¦‚â€œsa-â€ï¼‰ã€‚</p><p>çœ‹çœ‹ä¸‹é¢çš„å›¾è¡¨ï¼Œçœ‹çœ‹ trie ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼š</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321221027882.png"></p><p>å°è¯•é€šè¿‡å°†Keysçš„æ¯ä¸ªâ€œå­—ç¬¦â€å­˜å‚¨ä¸ºèŠ‚ç‚¹æ¥å·¥ä½œã€‚å…±äº«å…¬å…±å‰ç¼€çš„Keyså…±äº«ç›¸åŒçš„èŠ‚ç‚¹ã€‚è¦æ£€æŸ¥ trie æ˜¯å¦åŒ…å«é”®ï¼Œè¯·æ²¿ç€æ­£ç¡®çš„èŠ‚ç‚¹ä»æ ¹éƒ¨å‘ä¸‹èµ°ã€‚</p><p>ç”±äºæˆ‘ä»¬è¦å…±äº«èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»æƒ³å‡ºæŸç§æ–¹æ³•æ¥è¡¨ç¤ºå“ªäº›å­—ç¬¦ä¸²å±äºæˆ‘ä»¬çš„é›†åˆï¼Œå“ªäº›ä¸å±äºæˆ‘ä»¬çš„é›†åˆã€‚æˆ‘ä»¬å°†é€šè¿‡å°†æ¯ä¸ªå­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦çš„é¢œè‰²æ ‡è®°ä¸ºè“è‰²æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¯·åœ¨ä¸‹é¢è§‚å¯Ÿæˆ‘ä»¬çš„æœ€ç»ˆç­–ç•¥ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321221541527.png" alt="image-20240321221541527"></p><p>å‡è®¾æˆ‘ä»¬å·²ç»å°†å­—ç¬¦ä¸²æ’å…¥åˆ°æˆ‘ä»¬çš„é›†åˆä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†ä¸Šé¢çš„ trieï¼Œæˆ‘ä»¬å¿…é¡»å¼„æ¸…æ¥šæœç´¢åœ¨æˆ‘ä»¬å½“å‰çš„æ–¹æ¡ˆä¸­å°†å¦‚ä½•å·¥ä½œã€‚ä¸ºäº†æœç´¢ï¼Œæˆ‘ä»¬å°†éå†æˆ‘ä»¬çš„å°è¯•ï¼Œå¹¶åœ¨å‘ä¸‹æ—¶ä¸å­—ç¬¦ä¸²çš„æ¯ä¸ªå­—ç¬¦è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œåªæœ‰ä¸¤ç§æƒ…å†µæˆ‘ä»¬æ— æ³•æ‰¾åˆ°å­—ç¬¦ä¸²;è¦ä¹ˆæœ€åä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç™½è‰²çš„ï¼Œè¦ä¹ˆæˆ‘ä»¬ä»æ ‘ä¸Šæ‰ä¸‹æ¥ã€‚</p><ul><li><code>contains(&quot;sam&quot;)</code> ï¼štrueï¼Œè“è‰²èŠ‚ç‚¹</li><li><code>contains(&quot;sa&quot;)</code> ï¼šfalseï¼Œç™½è‰²èŠ‚ç‚¹</li><li><code>contains(&quot;a&quot;)</code> ï¼štrueï¼Œè“è‰²èŠ‚ç‚¹</li><li><code>contains(&quot;saq&quot;)</code> ï¼š å‡çš„ï¼Œä»æ ‘ä¸Šæ‰ä¸‹æ¥çš„</li></ul><p>ç»ƒä¹  15.1.2.å°†å­—ç¬¦ä¸²â€œantsâ€ã€â€œzebraâ€ã€â€œpotatoâ€å’Œâ€œsadnessâ€æ·»åŠ åˆ°ä¸Šé¢çš„ trie ä¸­ã€‚ç»˜åˆ¶å‡ºç”Ÿæˆçš„ trie ç»“æ„ã€‚</p><p>ç»ƒä¹  15.1.3.æƒ³ä¸€æƒ³å°† trie ç”¨ä½œåœ°å›¾ä¸å°† trie ç”¨ä½œé›†åˆä¹‹é—´çš„åŒºåˆ«ã€‚ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å®ç°ä¼šæœ‰æ‰€ä¸åŒå—ï¼Ÿ</p><p>åœ¨<a href="http://www.cs.princeton.edu/courses/archive/spring15/cos226/demo/52DemoTrie.mov">è¿™é‡Œ</a>æŸ¥çœ‹åˆ›å»º trie åœ°å›¾çš„åŠ¨ç”»æ¼”ç¤ºã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¸€ä¸ªå…³é”®çš„è¦ç‚¹æ˜¯ï¼Œå½“æˆ‘ä»¬ä¸ºé—®é¢˜æ·»åŠ ç‰¹å¼‚æ€§æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥é€šè¿‡æ·»åŠ é¢å¤–çš„çº¦æŸæ¥æ”¹è¿›é€šç”¨æ•°æ®ç»“æ„ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æ”¹è¿›äº† HashMap çš„å®ç°ï¼Œå°†é”®é™åˆ¶ä¸ºåªèƒ½æ˜¯ ASCII å­—ç¬¦ï¼Œä»è€Œåˆ›å»ºäº†éå¸¸é«˜æ•ˆçš„æ•°æ®ç»“æ„ã€‚</p><ul><li>ADT å’Œç‰¹å®šå®ç°ä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä¾‹å¦‚ï¼ŒDisjoint Sets æ˜¯ä¸€ä¸ª ADTï¼šä»»ä½• Disjoint Sets éƒ½å…·æœ‰ å’Œ <code>connect(x, y)</code> <code>isConnected(x, y)</code> çš„æ–¹æ³•ã€‚æœ‰å››ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥å®ç°è¿™äº›æ–¹æ³•ï¼šå¿«é€ŸæŸ¥æ‰¾ã€å¿«é€Ÿå¹¶é›†ã€åŠ æƒ QU å’Œ WQUPCã€‚</li><li>Trie æ˜¯ä¸“é—¨ç”¨äºå­—ç¬¦ä¸²çš„ Sets å’Œ Maps çš„ç‰¹å®šå®ç°ã€‚<ul><li>æˆ‘ä»¬ç»™æ¯ä¸ªèŠ‚ç‚¹ä¸€ä¸ªå­—ç¬¦ï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ˜¯ trie ä¸­å¤šä¸ªé”®çš„ä¸€éƒ¨åˆ†ã€‚</li><li>åªæœ‰å½“æˆ‘ä»¬ç¢°åˆ°ä¸€ä¸ªæœªæ ‡è®°çš„èŠ‚ç‚¹æˆ–è€…ä»æ ‘ä¸Šæ‰ä¸‹æ¥æ—¶ï¼Œæœç´¢æ‰ä¼šå¤±è´¥</li><li>Re<strong>trie</strong>val treeçš„ç¼©å†™ï¼Œå‡ ä¹æ¯ä¸ªäººéƒ½å°†å…¶å‘éŸ³ä¸ºâ€œtryâ€ï¼Œä½†çˆ±å¾·åÂ·å¼—é›·å¾·é‡‘å»ºè®®å°†å…¶å‘éŸ³ä¸ºâ€œæ ‘â€</li></ul></li></ul><h1 id="Trieçš„å®ç°"><a href="#Trieçš„å®ç°" class="headerlink" title="Trieçš„å®ç°"></a>Trieçš„å®ç°</h1><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>è®©æˆ‘ä»¬å®é™…å°è¯•æ„å»ºä¸€ä¸ªTrieã€‚æˆ‘ä»¬å°†é‡‡ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå³æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸€ä¸ªå­—æ¯ã€å…¶å­èŠ‚ç‚¹å’Œä¸€ä¸ªé¢œè‰²çš„æƒ³æ³•ã€‚ç”±äºæˆ‘ä»¬çŸ¥é“æ¯ä¸ªèŠ‚ç‚¹é”®æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„DataIndexedCharMapç±»æ¥æ˜ å°„æ‰€æœ‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚è¯·è®°ä½ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå¯ä»¥æœ‰å¯èƒ½å­—ç¬¦æ•°ç­‰äºå…¶å­èŠ‚ç‚¹æ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrieSet</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> <span class="number">128</span>; <span class="comment">// ASCII</span></span><br><span class="line">   <span class="keyword">private</span> Node root;    <span class="comment">// trieçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">char</span> ch;  </span><br><span class="line">      <span class="keyword">private</span> <span class="type">boolean</span> isKey;   </span><br><span class="line">      <span class="keyword">private</span> DataIndexedCharMap next;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> <span class="title function_">Node</span><span class="params">(<span class="type">char</span> c, <span class="type">boolean</span> blue, <span class="type">int</span> R)</span> &#123;</span><br><span class="line">         ch = c; </span><br><span class="line">         isKey = blue;</span><br><span class="line">         next = <span class="keyword">new</span> <span class="title class_">DataIndexedCharMap</span>&lt;Node&gt;(R);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èšç„¦äºå…·æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹çš„å•ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°å®ƒçš„nextå˜é‡ï¼Œå³DataIndexedCharMapå¯¹è±¡ï¼Œå¦‚æœæˆ‘ä»¬æ ‘ä¸­çš„èŠ‚ç‚¹å…·æœ‰ç›¸å¯¹è¾ƒå°‘çš„å­èŠ‚ç‚¹ï¼Œåˆ™å°†å…·æœ‰å¤§å¤šæ•°ç©ºé“¾æ¥ã€‚æˆ‘ä»¬å°†æœ‰128ä¸ªé“¾æ¥ï¼Œå…¶ä¸­127ä¸ªç­‰äºnullï¼Œ1ä¸ªè¢«ä½¿ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æµªè´¹äº†å¤§é‡çš„å¤šä½™ç©ºé—´ï¼æˆ‘ä»¬å°†è¿›ä¸€æ­¥æ¢è®¨æ›¿ä»£è¡¨ç¤ºæ–¹æ³•ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321223837867.png" alt="image-20240321223837867"></p><p>ä½†æˆ‘ä»¬å¯ä»¥åšå‡ºé‡è¦è§‚å¯Ÿï¼šåªæœ‰å½“è¯¥å­—ç¬¦å­˜åœ¨æ—¶ï¼Œæ¯ä¸ªé“¾æ¥æ‰å¯¹åº”ä¸€ä¸ªå­—ç¬¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤èŠ‚ç‚¹çš„å­—ç¬¦å˜é‡ï¼Œè€Œæ˜¯æ ¹æ®å…¶åœ¨çˆ¶DataIndexedCharMapä¸­çš„ä½ç½®ç¡®å®šå­—ç¬¦çš„å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TrieSet</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> <span class="number">128</span>; <span class="comment">// ASCII</span></span><br><span class="line">   <span class="keyword">private</span> Node root;    <span class="comment">// trieçš„æ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">      <span class="keyword">private</span> <span class="type">boolean</span> isKey;   </span><br><span class="line">      <span class="keyword">private</span> DataIndexedCharMap next;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">private</span> <span class="title function_">Node</span><span class="params">(<span class="type">boolean</span> blue, <span class="type">int</span> R)</span> &#123;</span><br><span class="line">         isKey = blue;</span><br><span class="line">         next = <span class="keyword">new</span> <span class="title class_">DataIndexedCharMap</span>&lt;Node&gt;(R);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321224738151.png" alt="image-20240321224738151"></p><p><strong>Exercise 15.2.1.</strong> æå‡ºä¸€ç§è§£å†³ç©ºé—´è¿‡åº¦ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚æç¤ºï¼šå°è¯•ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„ä¸€äº›å®ç°ã€‚</p><h2 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h2><p>å¯¹äºå…·æœ‰Nä¸ªé”®çš„Trieï¼Œæˆ‘ä»¬çš„Map&#x2F;Setæ“ä½œçš„è¿è¡Œæ—¶å¦‚ä¸‹ï¼š</p><ul><li>æ·»åŠ ï¼š<ul><li>$Î˜(1)$</li></ul></li><li>åŒ…å«ï¼š<ul><li>$Î˜(1)$</li></ul></li></ul><p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿæˆ‘ä»¬çš„trieä¸­æœ‰å¤šå°‘é¡¹å¹¶ä¸é‡è¦ï¼Œè¿è¡Œæ—¶å§‹ç»ˆä¸é”®çš„æ•°é‡æ— å…³ã€‚è¿™æ˜¯å› ä¸ºåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéå†ä¸€ä¸ªé”®çš„é•¿åº¦ï¼Œè¿™ä¸trieä¸­çš„é”®çš„æ•°é‡æ— å…³ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬é€šè¿‡å¯ä»¥æµ‹é‡çš„æµ‹é‡æ¥æŸ¥çœ‹è¿è¡Œæ—¶ï¼›ç”¨é”®çš„é•¿åº¦Lè¡¨ç¤ºï¼š</p><ul><li>æ·»åŠ ï¼š<ul><li>$ Î˜(L) $</li></ul></li><li>åŒ…å«ï¼š<ul><li>$O(L)$</li></ul></li></ul><p>æˆ‘ä»¬å®ç°äº†æ’å®šçš„è¿è¡Œæ—¶ï¼Œè€Œæ— éœ€æ‹…å¿ƒæ‘Šé”€è°ƒæ•´æ—¶é—´æˆ–é”®çš„å‡åŒ€åˆ†å¸ƒï¼Œä½†æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æåˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬å½“å‰çš„è®¾è®¡éå¸¸æµªè´¹ï¼Œå› ä¸ºå³ä½¿è¯¥å­—ç¬¦ä¸å­˜åœ¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªæ•°ç»„ã€‚</p><h3 id="å­èŠ‚ç‚¹è·Ÿè¸ª"><a href="#å­èŠ‚ç‚¹è·Ÿè¸ª" class="headerlink" title="å­èŠ‚ç‚¹è·Ÿè¸ª"></a>å­èŠ‚ç‚¹è·Ÿè¸ª</h3><p>æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜æ˜¯æ¥è‡ªæˆ‘ä»¬å®ç°çš„DataIndexedCharMapå¯¹è±¡çš„ç©ºé—´æµªè´¹ï¼Œç”¨äºè·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºæˆ‘ä»¬å°†åˆå§‹åŒ–è®¸å¤šä¸åŒ…å«ä»»ä½•å­èŠ‚ç‚¹çš„ç©ºä½ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321224839958.png" alt="image-20240321224839958"></p><p><strong>å¤‡é€‰æ–¹æ¡ˆ1ï¼š</strong> åŸºäºå“ˆå¸Œè¡¨çš„Trieã€‚è¿™ä¸ä¼šåˆ›å»º128ä¸ªä½ç½®çš„æ•°ç»„ï¼Œè€Œæ˜¯ä»…åœ¨å¿…è¦æ—¶åˆå§‹åŒ–é»˜è®¤å€¼ï¼Œå¹¶æ ¹æ®è´Ÿè½½å› å­è°ƒæ•´æ•°ç»„çš„å¤§å°ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321224852484.png" alt="image-20240321224852484"></p><p><strong>å¤‡é€‰æ–¹æ¡ˆ2ï¼š</strong> åŸºäºBSTçš„Trieã€‚åŒæ ·ï¼Œä»…åœ¨å¿…è¦æ—¶æ‰ä¼šåˆ›å»ºå­èŠ‚ç‚¹æŒ‡é’ˆï¼Œå¹¶ä¸”æˆ‘ä»¬å°†åœ¨BSTä¸­å­˜å‚¨å­èŠ‚ç‚¹ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦æ‹…å¿ƒåœ¨è¿™ä¸ªBSTä¸­æœç´¢çš„è¿è¡Œæ—¶ï¼Œä½†è¿™ä¸æ˜¯ä¸€ä¸ªåçš„æ–¹æ³•ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321224901524.png" alt="image-20240321224901524"></p><p>å½“æˆ‘ä»¬å®ç°Trieæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»é€‰æ‹©ä¸€ä¸ªæ˜ å°„åˆ°æˆ‘ä»¬çš„å­èŠ‚ç‚¹çš„æ˜ å°„ã€‚Mapæ˜¯ä¸€ä¸ªADTï¼Œå› æ­¤æˆ‘ä»¬è¿˜å¿…é¡»é€‰æ‹©æ˜ å°„çš„åº•å±‚å®ç°ã€‚è¿™ç»™æˆ‘ä»¬é‡ç”³äº†ä»€ä¹ˆï¼Ÿåœ¨æˆ‘ä»¬å°è¯•åˆ›å»ºADTæ—¶ï¼Œå®ç°å’ŒADTä¹‹é—´å­˜åœ¨ä¸€ä¸ªæŠ½è±¡å±éšœã€‚è¿™ç§æŠ½è±¡å±éšœä½¿æˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨æ¯ç§å®ç°åœ¨å°è¯•æ»¡è¶³ADTè¡Œä¸ºæ—¶æ‰€æä¾›çš„ä¼˜åŠ¿ã€‚è®©æˆ‘ä»¬è€ƒè™‘æ¯ç§ä¼˜åŠ¿ï¼š</p><p><strong>DataIndexedCharMap</strong></p><ul><li>ç©ºé—´ï¼šæ¯ä¸ªèŠ‚ç‚¹128ä¸ªé“¾æ¥</li><li>è¿è¡Œæ—¶ï¼š$ \Theta(1) $</li></ul><p><strong>BST</strong></p><ul><li>ç©ºé—´ï¼šæ¯ä¸ªèŠ‚ç‚¹Cä¸ªé“¾æ¥ï¼Œå…¶ä¸­Cæ˜¯å­èŠ‚ç‚¹çš„æ•°é‡</li><li>è¿è¡Œæ—¶ï¼š$ O(\log R) $ï¼Œå…¶ä¸­Ræ˜¯å­—æ¯è¡¨çš„å¤§å°</li></ul><p><strong>å“ˆå¸Œè¡¨</strong></p><ul><li>ç©ºé—´ï¼šæ¯ä¸ªèŠ‚ç‚¹Cä¸ªé“¾æ¥ï¼Œå…¶ä¸­Cæ˜¯å­èŠ‚ç‚¹çš„æ•°é‡</li><li>è¿è¡Œæ—¶ï¼š$ O(R) $ï¼Œå…¶ä¸­Ræ˜¯å­—æ¯è¡¨çš„å¤§å°</li></ul><p>æ³¨ï¼šBSTå’Œå“ˆå¸Œè¡¨ä¸­æ¯ä¸ªé“¾æ¥çš„æˆæœ¬è¾ƒé«˜ï¼›Ræ˜¯ä¸€ä¸ªå›ºå®šæ•°ï¼ˆè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†è¿è¡Œæ—¶è§†ä¸ºå¸¸é‡ï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€äº›ç»“è®ºã€‚å­˜åœ¨è½»å¾®çš„å†…å­˜å’Œæ•ˆç‡æŠ˜è¡·ï¼ˆä¸BST&#x2F;å“ˆå¸Œè¡¨ç›¸æ¯”DataIndexedCharMapï¼‰ã€‚Trieæ“ä½œçš„è¿è¡Œæ—¶ä»ç„¶æ˜¯å¸¸æ•°ï¼Œæ²¡æœ‰ä»»ä½•æ³¨æ„äº‹é¡¹ã€‚Trieå°†ç‰¹åˆ«é€‚ç”¨äºä¸€äº›ç‰¹æ®Šæ“ä½œã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225043141.png" alt="image-20240321225043141"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225054570.png" alt="image-20240321225054570"></p><h1 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h1><p>å›é¡¾æˆ‘ä»¬å¯¹Trieå’Œå…¶ä»–æ•°æ®ç»“æ„ä¹‹é—´çš„æ¯”è¾ƒã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒTrieæä¾›äº†å¸¸æ•°æ—¶é—´çš„æŸ¥æ‰¾å’Œæ’å…¥ï¼Œä½†å®ƒä»¬å®é™…ä¸Šæ˜¯å¦æ¯”BSTæˆ–å“ˆå¸Œè¡¨è¡¨ç°å¾—æ›´å¥½å‘¢ï¼Ÿå¯èƒ½ä¸æ˜¯ã€‚å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¿…é¡»éå†æ¯ä¸ªå­—ç¬¦ï¼Œè€Œåœ¨BSTä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³è®¿é—®æ•´ä¸ªå­—ç¬¦ä¸²ã€‚é‚£ä¹ˆï¼ŒTrieæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225202653.png" alt="image-20240321225202653"></p><h2 id="å‰ç¼€åŒ¹é…"><a href="#å‰ç¼€åŒ¹é…" class="headerlink" title="å‰ç¼€åŒ¹é…"></a>å‰ç¼€åŒ¹é…</h2><p>Trieçš„ä¸»è¦å¸å¼•åŠ›åœ¨äºèƒ½å¤Ÿé«˜æ•ˆæ”¯æŒç‰¹å®šçš„å­—ç¬¦ä¸²æ“ä½œï¼Œæ¯”å¦‚å‰ç¼€åŒ¹é…ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸ºä»€ä¹ˆTrieä½¿è¿™ä¸ªæ“ä½œå˜å¾—éå¸¸é«˜æ•ˆï¼å‡è®¾æˆ‘ä»¬è¦æ‰¾åˆ°æœ€é•¿çš„å‰ç¼€ã€‚åªéœ€å–å‡ºä½ è¦æŸ¥æ‰¾çš„å•è¯ï¼Œå°†æ¯ä¸ªå­—ç¬¦ä¸trieä¸­çš„å­—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ— æ³•å†ç»§ç»­ã€‚åŒæ ·åœ°ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦keyWithPrefixï¼Œæˆ‘ä»¬å¯ä»¥éå†åˆ°å‰ç¼€çš„æœ«å°¾ï¼Œå¹¶è¿”å›trieä¸­æ‰€æœ‰å‰©ä½™çš„é”®ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225234086.png" alt="image-20240321225234086"></p><p>è®©æˆ‘ä»¬å°è¯•å®šä¹‰ä¸€ä¸ªæ–¹æ³•<code>collect</code>ï¼Œå®ƒè¿”å›Trieä¸­çš„æ‰€æœ‰é”®ã€‚ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">collect():</span><br><span class="line">    åˆ›å»ºä¸€ä¸ªç©ºç»“æœåˆ—è¡¨x</span><br><span class="line">    å¯¹äºæ ¹èŠ‚ç‚¹ä¸‹çš„æ¯ä¸ªå­—ç¬¦cï¼š</span><br><span class="line">        è°ƒç”¨colHelp(c, x, root.next.get(c))</span><br><span class="line">    è¿”å›x</span><br><span class="line"></span><br><span class="line">colHelp(String s, List&lt;String&gt; x, Node n):</span><br><span class="line">    å¦‚æœnæ˜¯é”®ï¼š</span><br><span class="line">        x.add(s)</span><br><span class="line">    å¯¹äºnä¸‹çš„æ¯ä¸ªå­—ç¬¦cï¼š</span><br><span class="line">        è°ƒç”¨colHelp(s + c, x, n.next.get(c))</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬é¦–å…ˆåœ¨çˆ¶å‡½æ•°å†…åˆå§‹åŒ–æˆ‘ä»¬çš„å€¼ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªé€’å½’è¾…åŠ©å‡½æ•°ï¼Œä»¥ä¾¿åœ¨é€’å½’è°ƒç”¨è¿‡ç¨‹ä¸­ä¼ é€’æ›´å¤šçš„å‚æ•°ã€‚å¦‚æœå½“å‰å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªé”®ï¼Œæˆ‘ä»¬åªæ·»åŠ å½“å‰å­—ç¬¦ä¸²ï¼Œå¦åˆ™æˆ‘ä»¬å°†å­—ç¬¦è¿æ¥åˆ°å½“å‰éå†çš„å­—ç¬¦ä¸²&#x2F;è·¯å¾„ï¼Œå¹¶è°ƒç”¨ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹çš„è¾…åŠ©å‡½æ•°ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225326972.png" alt="image-20240321225326972"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225353364.png" alt="image-20240321225353364"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225406314.png" alt="image-20240321225406314"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225416604.png" alt="image-20240321225416604"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225427425.png" alt="image-20240321225427425"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç¼–å†™<code>keysWithPrefix</code>æ–¹æ³•ï¼Œå®ƒè¿”å›åŒ…å«ä½œä¸ºå‚æ•°ä¼ å…¥çš„å‰ç¼€çš„æ‰€æœ‰é”®ã€‚æˆ‘ä»¬å°†å¤§é‡å€Ÿé‰´ä¸Šé¢çš„<code>collect</code>æ–¹æ³•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">keysWithPrefix(String s):</span><br><span class="line">    æ‰¾åˆ°å‰ç¼€çš„æœ«å°¾ï¼Œå‘½åä¸ºalpha</span><br><span class="line">    åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨x</span><br><span class="line">    å¯¹äºalpha.nextä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼š</span><br><span class="line">        è°ƒç”¨colHelp(&quot;sa&quot; + c, x, alpha.next.get(c))</span><br><span class="line">    è¿”å›x</span><br></pre></td></tr></table></figure><p><strong>Exercise 15.3.1.</strong> ç¼–å†™<code>longestPrefixOf</code>çš„ä¼ªä»£ç ã€‚è¿™å°†æ˜¯ä¸€ä¸ªä½ å¯ä»¥åœ¨å®éªŒå®¤ä¸­å®Œæˆçš„ç»ƒä¹ ã€‚ç¡®ä¿è§‚çœ‹å…³äºå¦‚ä½•å®ç°å…¶ä»–æ–¹æ³•çš„è§†é¢‘ã€‚</p><h2 id="è‡ªåŠ¨è¡¥å…¨"><a href="#è‡ªåŠ¨è¡¥å…¨" class="headerlink" title="è‡ªåŠ¨è¡¥å…¨"></a>è‡ªåŠ¨è¡¥å…¨</h2><p>å½“ä½ åœ¨ä»»ä½•æœç´¢æµè§ˆå™¨ä¸­è¾“å…¥æ–‡æœ¬æ—¶ï¼Œä¾‹å¦‚Googleï¼Œæ€»ä¼šæœ‰å…³äºä½ å³å°†è¾“å…¥å†…å®¹çš„å»ºè®®ã€‚è¿™éå¸¸æœ‰å¸®åŠ©å’Œæ–¹ä¾¿ã€‚æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬æœç´¢â€How are you doingâ€æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªè¾“å…¥â€how areâ€åˆ°googleï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å®ƒå»ºè®®è¿™ä¸ªç¡®åˆ‡çš„æŸ¥è¯¢ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/F2kkT_BaBlTRCJFijRxrxVQ4rgn5Rph2YPB0pbN8F9WEhm2q5qeAiHqmwX6qJkSGXeEzvPQ5bdK41JDVkd8nmcW3yYlSmy_qLHe4WpQi65SzFePPEimxjqf7pRnOZ2WTbJpZPAh5f7Digianih0oOjgF=nw.png" alt="img"></p><p>å®ç°è¿™ä¸€åŠŸèƒ½çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨Trieï¼æˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªä»å­—ç¬¦ä¸²åˆ°å€¼çš„æ˜ å°„ã€‚</p><ul><li>å€¼å°†è¡¨ç¤ºGoogleè®¤ä¸ºè¯¥å­—ç¬¦ä¸²æœ‰å¤šé‡è¦ï¼ˆå¯èƒ½æ˜¯é¢‘ç‡ï¼‰</li><li>æœ‰æ•ˆåœ°å­˜å‚¨æ•°åäº¿ä¸ªå­—ç¬¦ä¸²ï¼Œå› ä¸ºå®ƒä»¬å…±äº«èŠ‚ç‚¹ï¼Œå‡å°‘äº†å†—ä½™</li><li>å½“ç”¨æˆ·è¾“å…¥æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>keysWithPrefix(x)</code>æ–¹æ³•ï¼Œå¹¶è¿”å›å…·æœ‰æœ€é«˜å€¼çš„10ä¸ªå­—ç¬¦ä¸²</li></ul><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225641545.png" alt="image-20240321225641545"></p><p>è¿™ä¸ªç³»ç»Ÿçš„ä¸€ä¸ªä¸»è¦ç¼ºé™·æ˜¯å¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯é•¿åº¦è¾ƒçŸ­çš„å­—ç¬¦ä¸²ã€‚ä½ å¯ä»¥æƒ³è±¡å½“å®é™…ä¸Šæˆ‘ä»¬åªæƒ³è¦10ä¸ªé”®æ—¶ï¼Œä»¥è¾“å…¥ä½œä¸ºå‰ç¼€çš„é”®çš„æ•°é‡å¯èƒ½è¾¾åˆ°äº†ç™¾ä¸‡çº§åˆ«ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªå¯èƒ½çš„æ–¹æ³•æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­å­˜å‚¨å­å­—ç¬¦ä¸²çš„æœ€ä½³å€¼ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§æœ€ä½³å€¼çš„é¡ºåºè€ƒè™‘å­èŠ‚ç‚¹ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225552929.png" alt="image-20240321225552929"></p><p>å¦ä¸€ä¸ªä¼˜åŒ–æ˜¯åˆå¹¶å¤šä½™çš„èŠ‚ç‚¹ã€‚è¿™å°†ç»™æˆ‘ä»¬ä¸€ä¸ªâ€åŸºæ•°Trieâ€ï¼Œå®ƒåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­ä¿å­˜å­—ç¬¦ä»¥åŠå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ä¸ä¼šæ·±å…¥è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-21-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Tries/image-20240321225602817.png" alt="image-20240321225602817"></p><p><strong>Exercise 15.3.2.</strong> è€ƒè™‘å°†å­å­—ç¬¦ä¸²çš„æœ€ä½³å€¼æ·»åŠ åˆ°èŠ‚ç‚¹ä¸­å°†æ·»åŠ ä»€ä¹ˆã€‚ä½ å¦‚ä½•ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—åˆ›å»ºç®—æ³•ï¼Ÿ</p><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>äº†è§£å­˜å‚¨çš„æ•°æ®ç±»å‹å¯ä»¥è®©ä½ åœ¨åˆ›å»ºé«˜æ•ˆçš„æ•°æ®ç»“æ„æ—¶æ‹¥æœ‰å·¨å¤§çš„ä¼˜åŠ¿ã€‚ç‰¹åˆ«æ˜¯å¯¹äºå®ç°Mapå’ŒSetï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“æ‰€æœ‰é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Trieï¼š</p><ul><li>ä»ç†è®ºä¸Šè®²ï¼ŒTrieåœ¨æœç´¢å’Œæ’å…¥æ–¹é¢çš„æ€§èƒ½ä¼˜äºå“ˆå¸Œè¡¨æˆ–å¹³è¡¡æœç´¢æ ‘</li><li>æœ‰å…³å¦‚ä½•å­˜å‚¨trieçš„æ¯ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹çš„æ›´å¤šå®ç°ï¼Œç‰¹åˆ«æ˜¯ä¸‰ç§ã€‚è¿™ä¸‰ç§æ–¹æ³•éƒ½ä¸é”™ï¼Œä½†å“ˆå¸Œè¡¨æ˜¯æœ€è‡ªç„¶çš„æ–¹æ³•<ul><li>DataIndexedCharMapï¼ˆç¼ºç‚¹ï¼šç©ºé—´è¿‡åº¦ä½¿ç”¨ï¼Œä¼˜ç‚¹ï¼šé€Ÿåº¦é«˜æ•ˆï¼‰</li><li>Bushy BSTï¼ˆç¼ºç‚¹ï¼šå­èŠ‚ç‚¹æœç´¢è¾ƒæ…¢ï¼Œä¼˜ç‚¹ï¼šç©ºé—´é«˜æ•ˆï¼‰</li><li>å“ˆå¸Œè¡¨ï¼ˆç¼ºç‚¹ï¼šæ¯ä¸ªé“¾æ¥çš„æˆæœ¬æ›´é«˜ï¼Œä¼˜ç‚¹ï¼šç©ºé—´é«˜æ•ˆï¼‰</li></ul></li><li>åœ¨å®è·µä¸­ï¼ŒTrieå®é™…ä¸Šå¯èƒ½ä¸ä¼šæ›´å¿«ï¼Œä½†å®ƒä»¬æ”¯æŒå…¶ä»–å®ç°ä¸æ”¯æŒçš„ç‰¹æ®Šå­—ç¬¦ä¸²æ“ä½œ</li><li>ç”±äºTrieæ˜¯æŒ‰å­—ç¬¦å­˜å‚¨çš„ï¼Œå› æ­¤å¾ˆå®¹æ˜“å®ç°<code>longestPrefixOf</code>å’Œ<code>keysWithPrefix</code></li><li><code>keysWithPrefix</code>å…è®¸å­˜åœ¨è¯¸å¦‚è‡ªåŠ¨å®Œæˆä¹‹ç±»çš„ç®—æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œä¼˜åŒ–ã€‚</li></ul><table><thead><tr><th>key type</th><th><code>get(x)</code></th><th><code>add(x)</code></th><th></th></tr></thead><tbody><tr><td>Balanced BST</td><td>comparable</td><td>Î˜(log<em>N</em>)</td><td>Î˜(log<em>N</em>)</td></tr><tr><td>RSC Hash Table</td><td>hashable</td><td>Î˜(1)â€ </td><td>Î˜(1)âˆ—â€ </td></tr><tr><td>Data Indexed Array</td><td>chars</td><td>Î˜(1)</td><td>Î˜(1)</td></tr><tr><td>Tries (BST, HT, DICM)</td><td>Strings</td><td>Î˜(1)Î˜(1)</td><td>Î˜(1)</td></tr></tbody></table><p>*: Indicates â€œon averageâ€.</p><p>â€ : Assuming items are evenly spread.</p><p>More generally, we can sometimes take special advantage of our key type to improve our sets and maps.</p><ul><li><p>Example: Tries handle String keys. Allow for fast string specific operations.</p></li><li><p>Note: There are many other types of string sets&#x2F;maps out there. </p></li><li><ul><li><p>Suffix Trees (<a href="https://en.wikipedia.org/wiki/Suffix_tree">Link</a>).</p></li><li><p>DAWG (<a href="https://en.wikipedia.org/wiki/Deterministic_acyclic_finite_state_automaton">Link</a>).</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(äºŒå)-æ•°æ®ç»“æ„æ€»ç»“</title>
      <link href="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/"/>
      <url>/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="The-Search-Problem"><a href="#The-Search-Problem" class="headerlink" title="The Search Problem"></a>The Search Problem</h1><p>æˆ‘ä»¬é¢ä¸´çš„é—®é¢˜æ˜¯ï¼šç»™å®šä¸€ä¸ªæ•°æ®æµï¼Œæ£€ç´¢æ„Ÿå…´è¶£çš„ä¿¡æ¯ã€‚</p><p>æœ‰å“ªäº›è¿™æ ·çš„ä¾‹å­ï¼Ÿ</p><ul><li>ç½‘ç«™ç”¨æˆ·åœ¨ä¸ªäººé¡µé¢ä¸Šå‘å¸–ã€‚ä»…å‘å¥½å‹æä¾›å†…å®¹ã€‚</li><li>ç»™å®šæ•°åƒä¸ªæ°”è±¡ç«™çš„æ—¥å¿—ï¼Œæ˜¾ç¤ºæŒ‡å®šæ—¥æœŸå’Œæ—¶é—´çš„å¤©æ°”å›¾ã€‚</li><li>ç‹—ä¸»äººè¦æ±‚æœ€å¥½çš„å® ç‰©åº—ï¼Œé€‰æ‹©åœ¨ä»·æ ¼ã€è´¨é‡æˆ–æ°›å›´æ–¹é¢å®šä¹‰ä»–ä»¬æœ€å¥½çš„å•†åº—ã€‚</li></ul><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„æ‰€æœ‰æ•°æ®ç»“æ„éƒ½æ˜¯ä¸ºäº†è§£å†³æœç´¢é—®é¢˜ã€‚ä½ å¯èƒ½ä¼šæ€ä¹ˆé—®ï¼Ÿæˆ‘ä»¬å­¦åˆ°çš„æ¯ä¸ªæ•°æ®ç»“æ„éƒ½ç”¨äºå°†ä¿¡æ¯å­˜å‚¨åœ¨æ–¹æ¡ˆä¸­ï¼Œä»è€Œåœ¨ç‰¹å®šåœºæ™¯ä¸­æé«˜æœç´¢æ•ˆç‡ã€‚</p><h2 id="Search-Data-Structures-æœç´¢æ•°æ®ç»“æ„"><a href="#Search-Data-Structures-æœç´¢æ•°æ®ç»“æ„" class="headerlink" title="Search Data Structures æœç´¢æ•°æ®ç»“æ„"></a>Search Data Structures æœç´¢æ•°æ®ç»“æ„</h2><table><thead><tr><th>Name</th><th>Store Operation(s)</th><th>Primary Retrieval Operation</th><th>Retrieve By</th></tr></thead><tbody><tr><td>List åˆ—è¡¨</td><td><code>add(key)</code>, <code>insert(key, index)</code></td><td><code>get(index)</code></td><td>index</td></tr><tr><td>Map</td><td><code>put(key, value)</code></td><td><code>get(key)</code></td><td>key identity</td></tr><tr><td>Set</td><td><code>add(key)</code></td><td><code>containsKey(key)</code></td><td>key identity</td></tr><tr><td>PQ</td><td><code>add(key)</code></td><td><code>getSmallest()</code></td><td>key order (aka key size)</td></tr><tr><td>Disjoint Sets</td><td><code>connect(int1, int2)</code></td><td><code>isConnected(int1, int2)</code></td><td>two integer values</td></tr></tbody></table><p>è¯·è®°ä½ï¼Œè¿™äº›æ˜¯<strong>æŠ½è±¡æ•°æ®</strong>ç±»å‹ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å®šä¹‰è¡Œä¸ºï¼Œè€Œä¸æ˜¯å®ç°ã€‚æˆ‘ä»¬åœ¨å‰é¢çš„ç« èŠ‚ä¸­å®šä¹‰äº†è®¸å¤šå¯èƒ½çš„å®ç°ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹è¿™äº›å®ç°å’Œ ADT æ˜¯å¦‚ä½•äº¤äº’çš„ï¼š</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/image-20240321220101385.png" alt="image-20240321220101385"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/image-20240321215753979.png" alt="image-20240321215753979"></p><p>è¿™å¼ å›¾å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆï¼Ÿæ‚¨ä¼šæ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ï¼Œæˆ‘ä»¬åœ¨å‰é¢çš„ç« èŠ‚ä¸­è®¾è®¡çš„è®¸å¤šå®ç°å¯ç”¨äºå®ç°è®¸å¤šä¸åŒçš„ ADTã€‚æ‚¨è¿˜ä¼šæ³¨æ„åˆ°çº¢è‰²çš„å®ç°ï¼ˆè¡¨ç¤ºæ€§èƒ½ä¸ä½³ï¼‰ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬å¹¶éæ‰€æœ‰å®ç°éƒ½æœ€é€‚åˆæˆ‘ä»¬è¯•å›¾å®ç°çš„è¡Œä¸ºã€‚</p><h1 id="Abstraction-æŠ½è±¡åŒ–"><a href="#Abstraction-æŠ½è±¡åŒ–" class="headerlink" title="Abstraction æŠ½è±¡åŒ–"></a>Abstraction æŠ½è±¡åŒ–</h1><p>æŠ½è±¡é€šå¸¸å‘ç”Ÿåœ¨å±‚ä¸­ã€‚æŠ½è±¡æ•°æ®ç±»å‹é€šå¸¸å¯ä»¥åŒ…å«ä¸¤ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå½’ç»“ä¸ºä¸€ä¸ªå®ç°ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›ä¾‹å­ï¼š</p><ul><li>å¦‚æœæˆ‘ä»¬è¿˜è®°å¾—ä¼˜å…ˆçº§é˜Ÿåˆ— ADTï¼Œæˆ‘ä»¬å°±ä¼šè¯•å›¾æ‰¾åˆ°ä¸€ç§å¯¹ PQ æ“ä½œæœ‰æ•ˆçš„å®ç°ã€‚æˆ‘ä»¬å†³å®šä½¿ç”¨å †æœ‰åºæ ‘æ¥å®ç°æˆ‘ä»¬çš„ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä½†æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æœ‰å‡ ç§æ–¹æ³•ï¼ˆ1Aã€1Bã€1Cã€2ã€3ï¼‰æ¥è¡¨ç¤ºå †çš„æ ‘ã€‚</li><li>ä¸€ä¸ªç±»ä¼¼çš„æƒ³æ³•æ˜¯å¤–éƒ¨é“¾æ¥å“ˆå¸Œè¡¨ã€‚æ­¤æ•°æ®ç»“æ„æ˜¯ä½¿ç”¨å­˜å‚¨æ¡¶æ•°ç»„å®ç°çš„ï¼Œä½†è¿™äº›å­˜å‚¨æ¡¶å¯ä»¥ä½¿ç”¨ ArrayListã€Resizing Arrayã€Linked List æˆ– BST æ¥å®Œæˆã€‚</li></ul><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/image-20240321215943057.png" alt="image-20240321215943057"></p><p>è¿™ä¸¤ä¸ªä¾‹å­å‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥é€šè¿‡ä½¿ç”¨å¦ä¸€ä¸ª ADT æ¥è€ƒè™‘ ADTã€‚æŠ½è±¡æ•°æ®ç±»å‹å…·æœ‰æŠ½è±¡å±‚ï¼Œæ¯ä¸ªæŠ½è±¡å±‚éƒ½å®šä¹‰äº†ä¸€ä¸ªæ¯”ä¹‹å‰çš„æƒ³æ³•æ›´å…·ä½“çš„è¡Œä¸ºã€‚</p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/image-20240321220021821.png" alt="image-20240321220021821"></p><p><img src="/2024/03/21/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-20-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E6%80%BB%E7%BB%93/image-20240321220037489.png" alt="image-20240321220037489"></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åä¹)-Rd16-QuadTreesã€K-DTrees</title>
      <link href="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/"/>
      <url>/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/</url>
      
        <content type="html"><![CDATA[<h1 id="Uniform-Partitioning-ç»Ÿä¸€åˆ†åŒº"><a href="#Uniform-Partitioning-ç»Ÿä¸€åˆ†åŒº" class="headerlink" title="Uniform Partitioning ç»Ÿä¸€åˆ†åŒº"></a>Uniform Partitioning ç»Ÿä¸€åˆ†åŒº</h1><h2 id="Motivation-èµ‹äºˆåŠ¨æœº"><a href="#Motivation-èµ‹äºˆåŠ¨æœº" class="headerlink" title="Motivation èµ‹äºˆåŠ¨æœº"></a>Motivation èµ‹äºˆåŠ¨æœº</h2><iframe frameborder="0" allowfullscreen src="https://www.youtube.com/embed/BV9Yi7eAEyY" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-size: inherit; border: none; top: 0px; left: 0px; width: 770px; height: 458.125px;"></iframe><p>å‡è®¾æˆ‘ä»¬æƒ³å¯¹ç©ºé—´ä¸­çš„ä¸€ç»„ Body å¯¹è±¡æ‰§è¡Œæ“ä½œã€‚ä¾‹å¦‚ï¼Œä¹Ÿè®¸æˆ‘ä»¬æƒ³é—®ä¸€äº›å…³äºäºŒç»´å›¾åƒç©ºé—´ä¸­çš„å¤ªé˜³ä½“ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰çš„é—®é¢˜ã€‚</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320223311544.png" alt="image-20240320223311544"></p><h3 id="First-Question-2D-Range-Finding-ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š2D-æµ‹è·"><a href="#First-Question-2D-Range-Finding-ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š2D-æµ‹è·" class="headerlink" title="First Question: 2D Range Finding ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š2D æµ‹è·"></a>First Question: 2D Range Finding ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š2D æµ‹è·</h3><p>æˆ‘ä»¬å¯èƒ½ä¼šé—®çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šä¸€ä¸ªåŒºåŸŸä¸­æœ‰å¤šå°‘ä¸ªå¯¹è±¡ï¼Œä¾‹å¦‚åœ¨ä¸Šé¢çªå‡ºæ˜¾ç¤ºçš„ç»¿è‰²çŸ©å½¢ä¸­ï¼Ÿ</p><h3 id="Second-Question-Nearest-Neighbors-ç¬¬äºŒä¸ªé—®é¢˜ï¼šæœ€è¿‘é‚»"><a href="#Second-Question-Nearest-Neighbors-ç¬¬äºŒä¸ªé—®é¢˜ï¼šæœ€è¿‘é‚»" class="headerlink" title="Second Question: Nearest Neighbors ç¬¬äºŒä¸ªé—®é¢˜ï¼šæœ€è¿‘é‚»"></a>Second Question: Nearest Neighbors ç¬¬äºŒä¸ªé—®é¢˜ï¼šæœ€è¿‘é‚»</h3><p>æˆ‘ä»¬å¯èƒ½ä¼šé—®çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šç¦»å¦ä¸€ä¸ªç‰©ä½“æœ€è¿‘çš„ç‰©ä½“æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚å“ªä¸ªå¤ªé˜³ç¦»æˆ‘ä»¬çš„å¤ªç©ºé©¬æœ€è¿‘ï¼Ÿï¼ˆé€šè¿‡ç›®è§†æ£€æŸ¥å‘ç°çš„æ‰€éœ€ç­”æ¡ˆæ˜¯å¤ªé˜³æœ€æ¥è¿‘å…¶åè¹„ã€‚</p><h2 id="Initial-Attempt-HashTable-åˆå§‹å°è¯•ï¼šHashTable"><a href="#Initial-Attempt-HashTable-åˆå§‹å°è¯•ï¼šHashTable" class="headerlink" title="Initial Attempt: HashTable åˆå§‹å°è¯•ï¼šHashTable"></a>Initial Attempt: HashTable åˆå§‹å°è¯•ï¼šHashTable</h2><p><strong>é—®é¢˜ï¼š</strong>å¦‚æœæˆ‘ä»¬çš„å¤ªé˜³é›†å­˜å‚¨åœ¨ HashTable ä¸­ï¼Œé‚£ä¹ˆæ‰¾åˆ°æœ€è¿‘é‚»é—®é¢˜çš„ç­”æ¡ˆçš„è¿è¡Œæ—¶æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ¯ä¸ªç‰©ä½“æ‰€åœ¨çš„æ¡¶å®é™…ä¸Šæ˜¯éšæœºçš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»éå†æ‰€æœ‰ $N$ ç‰©å“ï¼Œä»¥æ£€æŸ¥æ¯ä¸ªå¤ªé˜³æ˜¯å¦å¯èƒ½æœ€æ¥è¿‘é©¬ã€‚ Î˜(<em>N</em>) ã€‚</p><p>è®©æˆ‘ä»¬è¯•ç€æ”¹è¿›ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸å¿…çœ‹æˆ‘ä»¬å¸ƒæ™¯ä¸­çš„æ¯ä¸€ä¸ªå¤ªé˜³æ¥æ‰¾åˆ°æˆ‘ä»¬çš„ç­”æ¡ˆã€‚</p><h2 id="Second-Attempt-Uniform-Partitioning-ç¬¬äºŒæ¬¡å°è¯•ï¼šç»Ÿä¸€åˆ†åŒº"><a href="#Second-Attempt-Uniform-Partitioning-ç¬¬äºŒæ¬¡å°è¯•ï¼šç»Ÿä¸€åˆ†åŒº" class="headerlink" title="Second Attempt: Uniform Partitioning ç¬¬äºŒæ¬¡å°è¯•ï¼šç»Ÿä¸€åˆ†åŒº"></a>Second Attempt: Uniform Partitioning ç¬¬äºŒæ¬¡å°è¯•ï¼šç»Ÿä¸€åˆ†åŒº</h2><iframe frameborder="0" allowfullscreen src="https://www.youtube.com/embed/Ua7vmGcY3Qg" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-size: inherit; border: none; top: 0px; left: 0px; width: 770px; height: 458.125px;"></iframe><p>å“ˆå¸Œè¡¨çš„é—®é¢˜åœ¨äºï¼Œé¡¹ç›®çš„æ¡¶å·å®é™…ä¸Šæ˜¯éšæœºçš„ã€‚å“ˆå¸Œè¡¨ç»å¯¹æ˜¯æ— åºé›†åˆã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯ç¡®ä¿é“²æ–—ç¼–å·ä»…å–å†³äºä½ç½®ï¼</p><p>å¦‚æœæˆ‘ä»¬é€šè¿‡åœ¨å›¾åƒç©ºé—´ä¸ŠæŠ›å‡ºä¸€ä¸ª 4x4 ç½‘æ ¼æ¥å‡åŒ€åœ°åˆ’åˆ†å›¾åƒç©ºé—´ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°äº•äº•æœ‰æ¡çš„æ¡¶ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·ï¼ˆè¿™æœ‰æ—¶ä¹Ÿç§°ä¸ºâ€œç©ºé—´æ•£åˆ—â€ï¼‰ï¼š</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320223318286.png" alt="image-20240320223318286"></p><p>è¿™å¯ä»¥é€šè¿‡ä¸ä½¿ç”¨å¯¹è±¡çš„ <code>hashCode()</code> å‡½æ•°æ¥å®ç°ï¼Œè€Œæ˜¯è®©æ¯ä¸ªå¯¹è±¡æä¾› <code>getX()</code> å’Œ <code>getY()</code> å‡½æ•°ï¼Œä»¥ä¾¿å®ƒå¯ä»¥è®¡ç®—è‡ªå·±çš„å­˜å‚¨æ¡¶ç¼–å·ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬çŸ¥é“æˆ‘ä»¬çš„æœç´¢å¯ä»¥é™åˆ¶åœ¨å“ªäº›ç½‘æ ¼å•å…ƒä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥çœ‹è¿™äº›ç‰¹å®šå•å…ƒä¸­çš„å¤ªé˜³ï¼Œè€Œä¸æ˜¯åƒä»¥å‰é‚£æ ·æŸ¥çœ‹æ•´ä¸ªå›¾åƒç©ºé—´ä¸­çš„æ‰€æœ‰å¤ªé˜³ã€‚</p><p><strong>ä¸€ä¸ªåŒºåŸŸä¸­æœ‰å¤šå°‘ä¸ªå¯¹è±¡ï¼Ÿ</strong>ï¼šæˆ‘ä»¬åªéœ€è¦æŸ¥çœ‹å­˜å‚¨æ¡¶ 5ã€6ã€9 å’Œ 10ã€‚</p><p><strong>å“ªä¸ªå¤ªé˜³ç¦»é©¬æœ€è¿‘ï¼Ÿ</strong>ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬ä»é©¬æ‰€åœ¨çš„å•å…ƒæ ¼å¼€å§‹ï¼š1 .ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å‘å¤–ç§»åŠ¨åˆ°0ã€4ã€5ã€6å’Œ2ã€‚ ç­‰ç­‰ã€‚</p><p><strong>é—®é¢˜</strong>ï¼šä½¿ç”¨ç»Ÿä¸€åˆ†åŒºï¼Œå‡è®¾å¤ªé˜³å‡åŒ€åˆ†å¸ƒï¼Œæ‰¾åˆ°æœ€è¿‘é‚»é—®é¢˜çš„ç­”æ¡ˆçš„è¿è¡Œæ—¶æ˜¯ä»€ä¹ˆï¼Ÿ</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šå¹³å‡è€Œè¨€ï¼Œè¿è¡Œæ—¶å°†æ¯”æ²¡æœ‰ç©ºé—´åˆ†åŒºå¿« 16 å‡ å€ï¼Œä½†ä¸å¹¸çš„æ˜¯ $16&#x2F;N$ ä»ç„¶ $Î˜(N)$ å¦‚æ­¤ã€‚ä½†æ˜¯ï¼Œè¿™åœ¨å®è·µä¸­ç¡®å®æ•ˆæœæ›´å¥½ã€‚</p><p>ä¸è¿‡ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ˜¯å¦æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚</p><h1 id="QuadTrees"><a href="#QuadTrees" class="headerlink" title="QuadTrees"></a>QuadTrees</h1><h2 id="ç¬¬ä¸‰æ¬¡å°è¯•ï¼šQuadTrees"><a href="#ç¬¬ä¸‰æ¬¡å°è¯•ï¼šQuadTrees" class="headerlink" title="ç¬¬ä¸‰æ¬¡å°è¯•ï¼šQuadTrees"></a>ç¬¬ä¸‰æ¬¡å°è¯•ï¼šQuadTrees</h2><h3 id="åŸºäºXæˆ–åŸºäºYçš„æ ‘"><a href="#åŸºäºXæˆ–åŸºäºYçš„æ ‘" class="headerlink" title="åŸºäºXæˆ–åŸºäºYçš„æ ‘"></a>åŸºäºXæˆ–åŸºäºYçš„æ ‘</h3><p>æœç´¢æ ‘ç›¸å¯¹äºå“ˆå¸Œè¡¨çš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿åœ¨äºæ ‘æ˜ç¡®åœ°è·Ÿè¸ªé¡¹ç›®çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œåœ¨BSTä¸­æŸ¥æ‰¾æœ€å°é¡¹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ Î˜(logN)ï¼Œä½†åœ¨å“ˆå¸Œè¡¨ä¸­æ˜¯ Î˜(N)ã€‚è®©æˆ‘ä»¬å°è¯•åˆ©ç”¨è¿™ä¸€ç‚¹æ¥ä¸ºæˆ‘ä»¬çš„ç›®æ ‡æä¾›æ›´å¥½çš„æ€§èƒ½ã€‚</p><p>ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯å¾®ä¸è¶³é“çš„â€¦ä¸ºäº†æ„å»ºä¸€ä¸ªäºŒå‰æœç´¢æ ‘ï¼Œæˆ‘ä»¬éœ€è¦èƒ½å¤Ÿæ¯”è¾ƒå¯¹è±¡ã€‚ç„¶è€Œï¼Œåœ¨äºŒç»´ï¼ˆæˆ–æ›´å¤šï¼‰ç©ºé—´ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨ä¸€ä¸ªç»´åº¦ä¸Šå¯èƒ½æ˜¯â€œå°äºâ€å¦ä¸€ä¸ªå¯¹è±¡ï¼Œä½†åœ¨å¦ä¸€ä¸ªç»´åº¦ä¸Šå¯èƒ½æ˜¯â€œå¤§äºâ€å¦ä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆï¼Œå¯¹äºæˆ‘ä»¬æœç´¢æ ‘çš„ç›®çš„ï¼Œå“ªä¸ªç»´åº¦åº”è¯¥æ˜¯â€œè¾ƒå°â€çš„å’Œâ€œè¾ƒå¤§â€çš„å‘¢ï¼Ÿ</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œç«æ˜Ÿåœ¨xç»´åº¦ä¸Šâ€œå°äºâ€åœ°çƒï¼Œä½†åœ¨yç»´åº¦ä¸Šâ€œå¤§äºâ€åœ°çƒã€‚</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320221951093.png" alt="image-20240320221951093"></p><p>æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨ä¸‹é¢æ˜¾ç¤ºçš„è¿™ä¸¤ç§è¡¨ç¤ºä¸­çš„å“ªä¸€ç§å‘¢ï¼Ÿè¯·è®°ä½ï¼Œæˆ‘ä»¬ä¸æƒ³ä»»æ„åœ°è¿›è¡Œå†³å®šï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ç¡®åˆ‡åœ°çŸ¥é“ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦å°†ä½äºæ ‘ä¸­çš„ç‰¹å®šè·¯å¾„ä¸‹ï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¤±å»æˆ‘ä»¬çš„ Î˜(logN) æ—¶é—´å¤æ‚åº¦ã€‚</p><p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨åŸºäºXçš„æ ‘â€”â€”ä¹Ÿå°±æ˜¯è¯´â€”â€”æˆ‘ä»¬æ„å»ºä¸€ä¸ªä»…æŸ¥çœ‹xåæ ‡çš„BSTã€‚ï¼ˆåœ¨ç»„ç»‡æ—¶å¿½ç•¥yåæ ‡ã€‚ï¼‰å¯¹äºä¸€ä¸ªæ›´å¤§çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320221928361.png" alt="image-20240320221928361"></p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320221902842.png" alt="image-20240320221902842"></p><p>è¯·æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨è¿™æ£µæ ‘ä¸Šæ‰§è¡Œæœç´¢ï¼Œå¹¶ä¸”æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªxåæ ‡å°äºâˆ’1çš„ç‚¹ï¼Œå½“æˆ‘ä»¬é€‰æ‹©å·¦ä¾§è·¯å¾„æ—¶ï¼Œæˆ‘ä»¬ç«‹å³å°±èƒ½ä¸¢å¼ƒå³å­æ ‘ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚è¿™ç›¸å½“äºè¯´ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†æˆ‘ä»¬çš„æœç´¢ç©ºé—´ä»æ•´ä¸ªå›¾åƒç©ºé—´ç¼©å°åˆ°åªæœ‰ç»¿è‰²çŸ©å½¢ã€‚è·³è¿‡æœç´¢æ ‘éƒ¨åˆ†çš„èƒ½åŠ›ç§°ä¸ºâ€œä¿®å‰ªâ€ã€‚</p><p>ç„¶è€Œï¼Œç›¸ååœ°ï¼Œå¦‚æœæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾å…·æœ‰ç‰¹å®šyåæ ‡çš„ç‚¹ï¼Œæˆ‘ä»¬çš„åŸºäºXçš„æ ‘ä¸é€‚ç”¨äºè¿™ç§ç±»å‹çš„æœç´¢ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸åœ¨çº¿æ€§æœç´¢æ‰€æœ‰èŠ‚ç‚¹ã€‚</p><p>æ— è®ºæˆ‘ä»¬é€‰æ‹©åŸºäºXçš„æ ‘è¡¨ç¤ºè¿˜æ˜¯åŸºäºYçš„æ ‘è¡¨ç¤ºï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šæœ‰æ¬¡ä¼˜çš„ä¿®å‰ªï¼›åœ¨ä¼˜åŒ–çš„ç»´åº¦ä¸­æœç´¢å°†æ˜¯ Î˜(logN)ï¼Œä½†åœ¨éä¼˜åŒ–çš„ç»´åº¦ä¸­æœç´¢å°†æ˜¯ Î˜(N) çš„è¿è¡Œæ—¶é—´ã€‚</p><h3 id="QuadTree"><a href="#QuadTree" class="headerlink" title="QuadTree"></a>QuadTree</h3><div class="row">    <embed src="cs61b-quadtree-insertion-demo.pdf" width="100%" height="550" type="application/pdf"></div><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šè¿›è¡Œæ‹†åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™å°±æ˜¯QuadTreeã€‚</p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°èŠ‚ç‚¹Aå°†å…¶å‘¨å›´çš„åŒºåŸŸåˆ†ä¸ºè¥¿åŒ—ã€ä¸œåŒ—ã€ä¸œå—å’Œè¥¿å—å››ä¸ªåŒºåŸŸã€‚ç”±äºBä½äºAçš„ä¸œåŒ—è±¡é™ï¼Œå½“æˆ‘ä»¬æ’å…¥Bæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºAçš„NEå­èŠ‚ç‚¹ã€‚</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320221815789.png" alt="image-20240320221815789"></p><p>è¯·æ³¨æ„ï¼Œå°±åƒåœ¨BSTä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬æ’å…¥èŠ‚ç‚¹çš„é¡ºåºå†³å®šäº†QuadTreeçš„æ‹“æ‰‘ç»“æ„ã€‚</p><p>è¿˜è¯·æ³¨æ„ï¼ŒQuadTreesæ˜¯ä¸€ç§ä¼ªè£…çš„ç©ºé—´åˆ’åˆ†å½¢å¼ã€‚ç±»ä¼¼äºå¦‚ä½•ç»Ÿä¸€åˆ’åˆ†åˆ›å»ºäº†ä¸€ä¸ªå®Œç¾çš„ç½‘æ ¼ï¼ŒQuadTreesé€šè¿‡æ¯ä¸ªèŠ‚ç‚¹â€œæ‹¥æœ‰â€4ä¸ªå­ç©ºé—´æ¥åˆ†å±‚åˆ’åˆ†ã€‚</p><p>æœ‰æ•ˆåœ°ï¼Œæœ‰è®¸å¤šç‚¹çš„ç©ºé—´è¢«åˆ’åˆ†ä¸ºæ›´ç»†åˆ†çš„åŒºåŸŸï¼Œè€Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™ä¼šæä¾›æ›´å¥½çš„æ€§èƒ½ã€‚</p><h3 id="ä½¿ç”¨QuadTreeè¿›è¡ŒèŒƒå›´æœç´¢"><a href="#ä½¿ç”¨QuadTreeè¿›è¡ŒèŒƒå›´æœç´¢" class="headerlink" title="ä½¿ç”¨QuadTreeè¿›è¡ŒèŒƒå›´æœç´¢"></a>ä½¿ç”¨QuadTreeè¿›è¡ŒèŒƒå›´æœç´¢</h3><div class="row">    <embed src="cs61b-quadtree-range-search-demo.pdf" width="100%" height="550" type="application/pdf"></div><p>è¯·æ³¨æ„ï¼Œç”±QuadTreeçš„æ¯ä¸ªèŠ‚ç‚¹æ–½åŠ çš„4å‘åˆ’åˆ†ï¼Œæˆ‘ä»¬ä»ç„¶æœ‰ä¹‹å‰åœ¨åŸºäºXå’ŒåŸºäºYçš„æ ‘ä¸­å¦‚æ­¤æœ‰åˆ©çš„ä¿®å‰ªæ•ˆæœï¼å¦‚æœæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ç»¿è‰²çŸ©å½¢å†…çš„ç‚¹ï¼Œä»ä»»ä½•èŠ‚ç‚¹å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥å†³å®šç»¿è‰²çŸ©å½¢æ˜¯å¦ä½äºä¸€ä¸ªæˆ–å¤šä¸ªè±¡é™å†…ï¼Œå¹¶ä¸”åªæ¢ç´¢ä¸é‚£äº›è±¡é™ç›¸å¯¹åº”çš„åˆ†æ”¯&#x2F;å­æ ‘ã€‚æ‰€æœ‰å…¶ä»–è±¡é™éƒ½å¯ä»¥å®‰å…¨åœ°è¢«å¿½ç•¥å’Œä¿®å‰ªæ‰ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬çœ‹åˆ°ç»¿è‰²çŸ©å½¢ä»…ä½äºä¸œåŒ—è±¡é™ï¼Œå› æ­¤è¥¿åŒ—ã€ä¸œå—å’Œè¥¿å—è±¡é™éƒ½å¯ä»¥è¢«ä¿®å‰ªæ‰å¹¶ç•™å¾…åç»­æ¢ç´¢ã€‚æˆ‘ä»¬å¯ä»¥é€’å½’è¿›è¡Œã€‚</p><p>Quad-Treeséå¸¸é€‚åˆäºäºŒç»´ç©ºé—´ï¼Œå› ä¸ºåªæœ‰4ä¸ªè±¡é™ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦è¿›å…¥æ›´é«˜ç»´åº¦çš„ç©ºé—´ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ç« ä¸­æ¢è®¨å¦ä¸€ä¸ªèƒ½å¤Ÿè§£å†³è¿™ä¸ªé—®é¢˜çš„æ•°æ®ç»“æ„ã€‚</p><h1 id="K-D-Trees"><a href="#K-D-Trees" class="headerlink" title="K-D Trees"></a>K-D Trees</h1><div class="row">    <embed src="-cs61b-kdtree-insertion-demo.pdf" width="100%" height="550" type="application/pdf"></div><p>ä¸€ç§å°†åˆ†å±‚åˆ†åŒºæ€æƒ³æ‰©å±•åˆ°é«˜äºä¸¤ä¸ªç»´åº¦çš„æ–¹æ³•æ˜¯ä½¿ç”¨K-Dæ ‘ã€‚å®ƒé€šè¿‡é€çº§åœ°åœ¨æ‰€æœ‰ç»´åº¦ä¹‹é—´æ—‹è½¬æ¥å·¥ä½œã€‚</p><p>å› æ­¤ï¼Œå¯¹äºäºŒç»´æƒ…å†µï¼Œå®ƒåœ¨ç¬¬ä¸€çº§ä¸ŠåƒåŸºäºXçš„æ ‘ä¸€æ ·åˆ†åŒºï¼Œç„¶ååœ¨ä¸‹ä¸€çº§åƒåŸºäºYçš„æ ‘ä¸€æ ·ï¼Œç„¶ååœ¨ç¬¬ä¸‰çº§åƒåŸºäºXçš„æ ‘ï¼Œç¬¬å››çº§åƒåŸºäºYçš„æ ‘ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p>åœ¨ç¬¬ä¸€ä¸ªå›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ¯ä¸ªçº§åˆ«å¦‚ä½•åˆ†åŒºã€‚åœ¨ä¸‹é¢çš„å›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æ ‘èŠ‚ç‚¹ä¸äºŒç»´ç©ºé—´ä¸­å…¶ä»–èŠ‚ç‚¹çš„å…³ç³»ã€‚<strong>è¯·æ³¨æ„</strong>å½“æ‚¨å¯¹K-Dæ ‘æˆ–å››å‰æ ‘è¿è¡Œæ“ä½œæ—¶ï¼Œåº”è¯¥è€ƒè™‘æ ‘ç»“æ„ï¼ˆç¬¬ä¸€å¼ å›¾ç‰‡ï¼‰è€Œä¸æ˜¯äºŒç»´ç©ºé—´ï¼ˆç¬¬äºŒå¼ å›¾ç‰‡ï¼‰ï¼Œå› ä¸ºåªæœ‰æ ‘åŒ…å«å…³äºçº§åˆ«çš„ä¿¡æ¯ã€‚</p><p><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320222213829.png" alt="image-20240320222213829"></p><p>å¯¹äºä¸‰ç»´æƒ…å†µï¼Œå®ƒåœ¨æ¯ä¸‰ä¸ªçº§åˆ«ä¹‹é—´è½®æ¢ä¸‰ä¸ªç»´åº¦ï¼Œå¯¹äºæ›´é«˜ç»´åº¦ï¼Œä¾æ­¤ç±»æ¨ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°K-Dæ ‘çš„ä¼˜ç‚¹åœ¨äºå®ƒæ›´å®¹æ˜“æ¨å¹¿åˆ°æ›´é«˜ç»´åº¦ã€‚ä½†æ˜¯ï¼Œæ— è®ºç»´åº¦å¤šé«˜ï¼ŒK-Dæ ‘å§‹ç»ˆéƒ½å°†æ˜¯ä¸€ä¸ª<strong>äºŒå‰</strong>æ ‘ï¼Œå› ä¸ºæ¯ä¸ªçº§åˆ«éƒ½è¢«åˆ†æˆâ€œå¤§äºâ€å’Œâ€œå°äºâ€ã€‚</p><p>è¦æ‰¾åˆ°æœ€æ¥è¿‘æŸ¥è¯¢ç‚¹çš„ç‚¹ï¼Œæˆ‘ä»¬åœ¨K-Dæ ‘ä¸­éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š</p><div class="row">    <embed src="cs61b-kdtree-nearest-demo.pdf" width="100%" height="550" type="application/pdf"></div><ul><li>ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå°†è¯¥ç‚¹å­˜å‚¨ä¸ºâ€œåˆ°ç›®å‰ä¸ºæ­¢æœ€ä½³â€ã€‚è®¡ç®—å…¶ä¸æŸ¥è¯¢ç‚¹çš„è·ç¦»ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºâ€œè¦æ‰“è´¥çš„åˆ†æ•°â€ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬ä»è·ç¦»æ ‡è®°ç‚¹æœ€è¿‘çš„Aå¼€å§‹ï¼Œå…¶è·ç¦»ä¸º4.5ã€‚</li><li>æ­¤èŠ‚ç‚¹å°†å…¶å‘¨å›´çš„ç©ºé—´åˆ†æˆä¸¤ä¸ªå­ç©ºé—´ã€‚å¯¹äºæ¯ä¸ªå­ç©ºé—´ï¼Œé—®ï¼šâ€œåœ¨è¿™ä¸ªç©ºé—´å†…å¯èƒ½æ‰¾åˆ°æ›´å¥½çš„ç‚¹å—ï¼Ÿâ€è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡è®¡ç®—æŸ¥è¯¢ç‚¹ä¸æˆ‘ä»¬å­ç©ºé—´è¾¹ç¼˜ä¹‹é—´çš„æœ€çŸ­è·ç¦»æ¥å›ç­”ï¼ˆè§ä¸‹å›¾ä¸­çš„è™šçº¿ç´«çº¿ï¼‰ã€‚</li><li><img src="/2024/03/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-19-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd16-QuadTrees%E3%80%81K-DTrees/image-20240320222311449.png" alt="image-20240320222311449"></li><li>å¯¹äºè¢«ç¡®å®šä¸ºåŒ…å«å¯èƒ½æ›´å¥½ç‚¹çš„æ¯ä¸ªå­ç©ºé—´ï¼Œç»§ç»­é€’å½’ã€‚</li><li>æœ€åï¼Œæˆ‘ä»¬çš„â€œåˆ°ç›®å‰ä¸ºæ­¢æœ€ä½³â€æ˜¯æœ€ä½³ç‚¹ï¼›æœ€æ¥è¿‘æŸ¥è¯¢ç‚¹çš„ç‚¹ã€‚</li></ul><p>è¯·å‚é˜…è¿™äº›<a href="https://docs.google.com/presentation/d/1DNunK22t-4OU_9c-OBgKkMAdly9aZQkWuv_tBkDg1G4/edit">å¹»ç¯ç‰‡</a>ä»¥é€æ­¥äº†è§£ã€‚</p><h2 id="æ‘˜è¦å’Œåº”ç”¨"><a href="#æ‘˜è¦å’Œåº”ç”¨" class="headerlink" title="æ‘˜è¦å’Œåº”ç”¨"></a>æ‘˜è¦å’Œåº”ç”¨</h2><p>è¯·å‚è§ä¸Šé¢çš„è§†é¢‘ï¼Œäº†è§£æœ¬ç« çš„æ‘˜è¦ä»¥åŠæ‰€æä¾›çš„æ•°æ®ç»“æ„çš„ä¸€äº›æœ‰è¶£åº”ç”¨ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Båº“è®¾ç½®</title>
      <link href="/2024/03/20/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-0-CS61B%E5%BA%93%E8%AE%BE%E7%BD%AE/"/>
      <url>/2024/03/20/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-0-CS61B%E5%BA%93%E8%AE%BE%E7%BD%AE/</url>
      
        <content type="html"><![CDATA[<p>è®¾ç½®æ•™ç¨‹:<a href="https://sp21.datastructur.es/materials/lab/lab2setup/lab2setup">Lab 2 Setup: Library Setup | CS 61B Spring 2021 (datastructur.es)</a></p><p><img src="/2024/03/20/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-0-CS61B%E5%BA%93%E8%AE%BE%E7%BD%AE/image-20240320180224899.png" alt="image-20240320180224899"></p><p><img src="/2024/03/20/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-0-CS61B%E5%BA%93%E8%AE%BE%E7%BD%AE/image-20240320180236855.png" alt="image-20240320180236855"></p><p><img src="/2024/03/20/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-0-CS61B%E5%BA%93%E8%AE%BE%E7%BD%AE/image-20240320180248345.png" alt="image-20240320180248345"></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åå…«)-RD19-20-æœ€çŸ­è·¯å¾„ã€æœ€å°ç”Ÿæˆæ ‘</title>
      <link href="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/"/>
      <url>/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ€çŸ­è·¯å¾„-SPT"><a href="#æœ€çŸ­è·¯å¾„-SPT" class="headerlink" title="æœ€çŸ­è·¯å¾„(SPT)"></a>æœ€çŸ­è·¯å¾„(SPT)</h1><h2 id="å›é¡¾"><a href="#å›é¡¾" class="headerlink" title="å›é¡¾"></a>å›é¡¾</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š</p><ul><li>æ‰¾åˆ°ä»ç»™å®šé¡¶ç‚¹ <em>s</em> åˆ°å›¾ä¸­æ¯ä¸ªå¯åˆ°è¾¾é¡¶ç‚¹çš„è·¯å¾„ã€‚</li><li>æ‰¾åˆ°ä»ç»™å®šé¡¶ç‚¹ <em>s</em> åˆ°å›¾ä¸­æ¯ä¸ªå¯åˆ°è¾¾é¡¶ç‚¹çš„<strong>æœ€çŸ­</strong>è·¯å¾„ã€‚ï¼ˆâ€¦æˆ–è€…æˆ‘ä»¬æ‰¾åˆ°äº†å—ï¼Ÿï¼‰</li></ul><p>åœ¨æˆ‘ä»¬å›ç­”ä¸Šè¿°ç¥ç§˜é—®é¢˜ä¹‹å‰ï¼Œè®©æˆ‘ä»¬è¿›ä¸€æ­¥å›é¡¾ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çš„ä¸¤ç§æœç´¢ç±»å‹ï¼šBFS æˆ– DFSã€‚</p><p>ä¸¤è€…éƒ½å§‹ç»ˆæ­£ç¡®å—ï¼Ÿæ˜¯çš„ã€‚å“ªä¸€ä¸ªç»“æœæ›´å¥½ï¼ŸBFSæ‰¾åˆ°äº†<strong>æœ€çŸ­</strong>è·¯å¾„ï¼Œè€ŒDFSåˆ™æ²¡æœ‰ã€‚åœ¨è¿è¡Œæ—¶é—´ä¸Šï¼Œå“ªä¸€ä¸ªæ›´æœ‰æ•ˆç‡ï¼Ÿéƒ½ä¸æ˜¯ã€‚åœ¨ç©ºé—´ä¸Šï¼Œå“ªä¸€ä¸ªæ›´æœ‰æ•ˆç‡ï¼Ÿ</p><ul><li>å¯¹äºç¨€ç–å›¾ï¼ŒDFSæ›´ç³Ÿç³•ã€‚æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªæœ‰10000ä¸ªèŠ‚ç‚¹ä¸”éƒ½å¾ˆç¨€ç–çš„å›¾ã€‚æˆ‘ä»¬æœ€ç»ˆä¼šè¿›è¡Œ10000æ¬¡é€’å½’è°ƒç”¨ï¼Œè¿™å¯¹ç©ºé—´æ¥è¯´æ˜¯ä¸å¥½çš„ã€‚</li><li>å¯¹äºâ€œæ ‘çŠ¶â€å›¾ï¼ŒBFSæ›´ç³Ÿç³•ï¼Œå› ä¸ºæˆ‘ä»¬çš„é˜Ÿåˆ—ä¼šç»å¸¸è¢«ä½¿ç”¨ã€‚</li></ul><h2 id="å›ç­”ç¥ç§˜é—®é¢˜"><a href="#å›ç­”ç¥ç§˜é—®é¢˜" class="headerlink" title="å›ç­”ç¥ç§˜é—®é¢˜"></a>å›ç­”ç¥ç§˜é—®é¢˜</h2><p>æˆ‘ä»¬æ˜¯å¦å¼€å‘äº†ä¸€ç§ç®—æ³•æ¥æ‰¾åˆ°ä»ç»™å®šé¡¶ç‚¹åˆ°æ¯ä¸ªå…¶ä»–å¯åˆ°è¾¾é¡¶ç‚¹çš„<strong>æœ€çŸ­</strong>è·¯å¾„ï¼Ÿå—¯ï¼Œæœ‰ç‚¹åƒæ˜¯ã€‚æˆ‘ä»¬å¼€å‘äº†ä¸€ç§åœ¨æ²¡æœ‰è¾¹æ ‡ç­¾çš„å›¾ä¸Šè¿è¡Œè‰¯å¥½çš„ç®—æ³•ã€‚è¿™æ˜¯æˆ‘ä»¬åšçš„ï¼šæˆ‘ä»¬å¼€å‘äº†ä¸€ç§ç®—æ³•ï¼Œå®ƒä»ç»™å®šçš„æºé¡¶ç‚¹æ‰¾åˆ°äº†æˆ‘ä»¬æœ€çŸ­ï¼ˆ<strong>å…¶ä¸­æœ€çŸ­çš„æ„æ€æ˜¯æœ€å°‘çš„è¾¹æ•°</strong>ï¼‰çš„è·¯å¾„ã€‚</p><p>ä½†è¿™å¹¶ä¸æ€»æ˜¯æœ€çŸ­çš„æ­£ç¡®å®šä¹‰ã€‚æœ‰æ—¶ï¼Œæˆ‘ä»¬çš„å›¾è¾¹å¯èƒ½æœ‰â€˜æƒé‡â€™ï¼Œå¦‚æœ A-B è¾¹çš„æƒé‡ä¸º5ï¼Œè€Œ A-C è¾¹çš„æƒé‡åªæœ‰3ï¼Œé‚£ä¹ˆA-B è¢«è®¤ä¸ºæ¯” A-C æ›´è¿œã€‚</p><p>è€ƒè™‘ä»¥ä¸‹å›¾åƒä»¥äº†è§£é—®é¢˜æ‰€åœ¨ã€‚</p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240319234957049.png" alt="image-20240319234957049"></p><blockquote><p>å³è¾¹è¾¹æœ€å°‘ä½†æ˜¯ä»–å¹¶ä¸æ˜¯æœ€çŸ­çš„</p></blockquote><h2 id="Dijkstraç®—æ³•"><a href="#Dijkstraç®—æ³•" class="headerlink" title="Dijkstraç®—æ³•"></a>Dijkstraç®—æ³•</h2><div class="row">    <embed src="CS61B-Dijkstra&#39;s-Algorithm-Demo.pdf" width="100%" height="550" type="application/pdf"></div><p>æ‰§è¡Œä»¥ä¸‹ä¸¤é¡¹æ“ä½œã€‚</p><ol><li>æŸ¥æ‰¾ä»æ ‡è®° 0 çš„é¡¶ç‚¹åˆ°æ ‡è®°çš„ 5 é¡¶ç‚¹çš„è·¯å¾„ã€‚</li><li>ä»æ ‡è®°ä¸º 0 çš„é¡¶ç‚¹ä¸­æŸ¥æ‰¾æœ€çŸ­è·¯å¾„æ ‘ã€‚ï¼ˆå³ï¼Œæ‰¾åˆ°ä»å›¾ä¸­ 0 åˆ°æ¯ä¸ªé¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„ã€‚</li><li>å°è¯•æƒ³å‡ºä¸€ç§ç®—æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</li></ol><h3 id="è§‚å¯Ÿ"><a href="#è§‚å¯Ÿ" class="headerlink" title="è§‚å¯Ÿ"></a>è§‚å¯Ÿ</h3><p>æ³¨æ„æœ€çŸ­è·¯å¾„ï¼ˆå¯¹äºå¸¦æœ‰æƒé‡çš„å›¾ï¼‰å¯èƒ½æœ‰è®¸å¤šè®¸å¤šè¾¹ã€‚æˆ‘ä»¬å…³å¿ƒçš„æ˜¯é€‰æ‹©è·¯å¾„ä¸Šè¾¹çš„æƒé‡ä¹‹å’Œçš„æœ€å°åŒ–ã€‚</p><p>å…¶æ¬¡ï¼Œè¯·æ³¨æ„ä»æº<strong>s</strong>åˆ°è¾¾çš„æœ€çŸ­è·¯å¾„æ ‘å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºï¼š</p><ul><li>å¯¹äºå›¾ä¸­çš„æ¯ä¸ªé¡¶ç‚¹<strong>v</strong>ï¼ˆä¸æ˜¯<strong>s</strong>ï¼‰ï¼Œæ‰¾åˆ°ä»<strong>s</strong>åˆ°<strong>v</strong>çš„æœ€çŸ­è·¯å¾„ã€‚</li><li>â€œåˆå¹¶â€æ‰€æœ‰ä¸Šè¿°æ‰¾åˆ°çš„è¾¹ã€‚å®Œæˆï¼</li></ul><p>ç¬¬ä¸‰ï¼Œè¯·æ³¨æ„â€œæœ€çŸ­è·¯å¾„æ ‘â€å°†<strong>å§‹ç»ˆæ˜¯ä¸€æ£µæ ‘</strong>ã€‚ä¸ºä»€ä¹ˆï¼Ÿå—¯ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬çš„åŸå§‹è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­æˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ª<code>edgeTo</code>æ•°ç»„ã€‚å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œåœ¨<code>edgeTo</code>æ•°ç»„ä¸­æ°å¥½æœ‰ä¸€ä¸ªâ€œçˆ¶èŠ‚ç‚¹â€ã€‚ï¼ˆè¿™ä¸ºä»€ä¹ˆæ„å‘³ç€â€œæœ€çŸ­è·¯å¾„æ ‘â€å°†æ˜¯ä¸€æ£µæ ‘ï¼Ÿæç¤ºï¼šä¸€æ£µæ ‘æœ‰<strong>V-1</strong>æ¡è¾¹ï¼Œå…¶ä¸­<strong>V</strong>æ˜¯æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ã€‚ï¼‰</p><p>Dijkstraç®—æ³•æ¥å—è¾“å…¥é¡¶ç‚¹<strong>s</strong>ï¼Œå¹¶è¾“å‡ºä»<strong>s</strong>å‡ºå‘çš„æœ€çŸ­è·¯å¾„æ ‘ã€‚å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ</p><ol><li>åˆ›å»ºä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ã€‚</li><li>å°†<strong>s</strong>æ·»åŠ åˆ°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¹¶å°†ä¼˜å…ˆçº§è®¾ç½®ä¸º0ã€‚å°†æ‰€æœ‰å…¶ä»–é¡¶ç‚¹æ·»åŠ åˆ°ä¼˜å…ˆé˜Ÿåˆ—ï¼Œå¹¶å°†ä¼˜å…ˆçº§è®¾ç½®ä¸ºâˆã€‚</li><li>å½“ä¼˜å…ˆé˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼šå¼¹å‡ºä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œå¹¶<strong>é‡Šæ”¾</strong>è¯¥é¡¶ç‚¹å‡ºå‘çš„æ‰€æœ‰è¾¹ã€‚</li></ol><h3 id="ä»€ä¹ˆæ˜¯é‡Šæ”¾ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯é‡Šæ”¾ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯é‡Šæ”¾ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯<strong>é‡Šæ”¾</strong>ï¼Ÿ</h3><p>å‡è®¾æˆ‘ä»¬åˆšåˆšä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å¼¹å‡ºçš„é¡¶ç‚¹æ˜¯<strong>v</strong>ã€‚æˆ‘ä»¬å°†æŸ¥çœ‹<strong>v</strong>çš„æ‰€æœ‰è¾¹ã€‚å‡è®¾æˆ‘ä»¬æ­£åœ¨æŸ¥çœ‹è¾¹(<strong>v</strong>,<strong>w</strong>)ï¼ˆä»<strong>v</strong>åˆ°<strong>w</strong>çš„è¾¹ï¼‰ã€‚æˆ‘ä»¬å°†å°è¯•å¯¹è¿™æ¡è¾¹è¿›è¡Œé‡Šæ”¾ã€‚</p><p>è¿™æ„å‘³ç€ï¼šæŸ¥çœ‹æ‚¨ä»æºåˆ°<strong>w</strong>çš„å½“å‰æœ€ä½³è·ç¦»ï¼Œç§°ä¸º<code>curBestDistToW</code>ã€‚ç°åœ¨ï¼ŒæŸ¥çœ‹<code>curBestDistToV+weight(v, w)</code>ï¼ˆç§°ä¸º<code>potentialDistToWUsingV</code>ï¼‰ã€‚</p><p><code>potentialDistToWUsingV</code>æ˜¯å¦<strong>æ›´å¥½ï¼Œå³æ›´å°</strong>ï¼Œæ¯”<code>curBestDistToW</code>ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†<code>curBestDistToW=potentialDistToWUsingV</code>ï¼Œæ›´æ–°<code>edgeTo[w]</code>ä¸º<strong>v</strong>ã€‚</p><p><strong>é‡è¦è¯´æ˜ï¼šæˆ‘ä»¬ä¸ä¼šé‡Šæ”¾æŒ‡å‘å·²è®¿é—®é¡¶ç‚¹çš„è¾¹ã€‚</strong></p><p>è®¡ç®—æ½œåœ¨è·ç¦»ã€æ£€æŸ¥æ˜¯å¦æ›´å¥½ä»¥åŠå¯èƒ½æ›´æ–°çš„æ•´ä¸ªè¿‡ç¨‹ç§°ä¸ºé‡Šæ”¾ã€‚</p><p>é€šè¿‡ä»¥ä¸‹å›¾åƒæ•è·äº†å¦ä¸€ç§å®šä¹‰ã€‚<img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/pz1muo.jpg" alt="img"></p><h3 id="ä¼ªä»£ç "><a href="#ä¼ªä»£ç " class="headerlink" title="ä¼ªä»£ç "></a>ä¼ªä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def <span class="title function_">dijkstras</span><span class="params">(source)</span>:</span><br><span class="line">    PQ.add(source, <span class="number">0</span>)</span><br><span class="line">    For all other vertices, v, PQ.add(v, infinity)</span><br><span class="line">    <span class="keyword">while</span> PQ is not empty:</span><br><span class="line">        p = PQ.removeSmallest()</span><br><span class="line">        relax(all edges from p)</span><br><span class="line">def <span class="title function_">relax</span><span class="params">(edge p,q)</span>:</span><br><span class="line">   <span class="keyword">if</span> q is <span class="title function_">visited</span> <span class="params">(i.e., q is not in PQ)</span>:</span><br><span class="line">       <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> distTo[p] + weight(edge) &lt; distTo[q]:</span><br><span class="line">       distTo[q] = distTo[p] + w</span><br><span class="line">       edgeTo[q] = p</span><br><span class="line">       PQ.changePriority(q, distTo[q])</span><br></pre></td></tr></table></figure><h3 id="ä¿è¯"><a href="#ä¿è¯" class="headerlink" title="ä¿è¯"></a>ä¿è¯</h3><p>åªè¦è¾¹éƒ½æ˜¯éè´Ÿçš„ï¼Œè¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•å°±ä¿è¯æ˜¯æœ€ä¼˜çš„ã€‚</p><h3 id="è¯æ˜å’Œç›´è§‰"><a href="#è¯æ˜å’Œç›´è§‰" class="headerlink" title="è¯æ˜å’Œç›´è§‰"></a>è¯æ˜å’Œç›´è§‰</h3><p>å‡è®¾æ‰€æœ‰è¾¹éƒ½æ˜¯éè´Ÿçš„ã€‚</p><ul><li><p>åœ¨å¼€å§‹æ—¶ï¼Œ<code>distTo[source]</code> &#x3D; 0ã€‚è¿™æ˜¯æœ€ä¼˜çš„ã€‚</p></li><li><p>åœ¨ä»æºå¼€å§‹é‡Šæ”¾æ‰€æœ‰è¾¹ä¹‹åï¼Œè®©é¡¶ç‚¹<strong>v1</strong>æ˜¯æƒé‡æœ€å°çš„é¡¶ç‚¹ï¼ˆå³è·ç¦»æºæœ€è¿‘çš„é¡¶ç‚¹ï¼‰ã€‚</p><p>å£°æ˜ï¼š<code>distTo[v1]</code>æ˜¯æœ€ä¼˜çš„ï¼Œå³åœ¨æ­¤æ—¶åˆ»ï¼Œ<code>distTo[v1]</code>çš„å€¼æ˜¯ä»<strong>s</strong>åˆ°<strong>v1</strong>çš„æœ€çŸ­è·ç¦»ã€‚ä¸ºä»€ä¹ˆï¼Ÿ</p><ul><li>è®©æˆ‘ä»¬å°è¯•ç†è§£ä¸ºä»€ä¹ˆ<strong>å¿…é¡»</strong>å¦‚æ­¤ã€‚</li><li>å‡è®¾ä¸æ˜¯è¿™ç§æƒ…å†µã€‚é‚£æ„å‘³ç€ä»<strong>s</strong>åˆ°<strong>v1</strong>å­˜åœ¨ä¸€æ¡æ¯”ç›´æ¥è·¯å¾„(<strong>s</strong>,<strong>v1</strong>)æ›´çŸ­çš„è·¯å¾„ã€‚å¥½çš„ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬è€ƒè™‘è¿™æ¡å‡è®¾ä¸­æ›´çŸ­çš„è·¯å¾„â€¦å®ƒå°†ä¼šæ˜¯(<strong>s</strong>,<strong>va</strong>,<strong>vb</strong>,â€¦,<strong>v1</strong>)è¿™æ ·çš„è·¯å¾„ã€‚ä½†æ˜¯â€¦(<strong>s</strong>,<strong>va</strong>)å·²ç»æ¯”(<strong>s</strong>,<strong>v1</strong>)å¤§äº†ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œè¿™æ˜¯å› ä¸º<strong>v1</strong>æ˜¯ä¸Šé¢æœ€æ¥è¿‘<strong>s</strong>çš„é¡¶ç‚¹ã€‚ï¼‰é‚£ä¹ˆå¦‚ä½•å¯èƒ½å­˜åœ¨ä¸€æ¡å®é™…ä¸Šæ›´çŸ­çš„è·¯å¾„å‘¢ï¼Ÿä¸å¯èƒ½ï¼</li></ul></li><li><p>ç°åœ¨ï¼Œä¸‹ä¸€ä¸ªå¼¹å‡ºçš„é¡¶ç‚¹å°†æ˜¯<strong>v1</strong>ã€‚ï¼ˆä¸ºä»€ä¹ˆï¼Ÿè¯·æ³¨æ„ï¼Œå®ƒç›®å‰åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„ä¼˜å…ˆçº§æœ€ä½ï¼ï¼‰</p></li><li><p>æ‰€ä»¥ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º<strong>v1</strong>åŠå…¶è¿›è¡Œçš„æ‰€æœ‰é‡Šæ”¾åšå‡ºåŒæ ·çš„è®ºè¯ã€‚ï¼ˆè¿™ç§°ä¸ºâ€œå½’çº³è¯æ˜â€ã€‚è¿™æœ‰ç‚¹åƒè¯æ˜çš„é€’å½’ã€‚ï¼‰å°±æ˜¯è¿™æ ·ï¼›æˆ‘ä»¬å®Œæˆäº†ã€‚</p></li></ul><h3 id="è´Ÿè¾¹ï¼Ÿ"><a href="#è´Ÿè¾¹ï¼Ÿ" class="headerlink" title="è´Ÿè¾¹ï¼Ÿ"></a>è´Ÿè¾¹ï¼Ÿ</h3><p>å½“è´Ÿè¾¹å‡ºç°æ—¶ï¼Œæƒ…å†µå¯èƒ½ä¼šå˜å¾—éå¸¸ç³Ÿç³•ã€‚è€ƒè™‘ä»¥ä¸‹å›¾åƒã€‚</p><p>å‡è®¾æ‚¨åœ¨æ ‡è®°ä¸º34çš„é¡¶ç‚¹ã€‚ç°åœ¨ï¼Œæ‚¨å°†å°è¯•é‡Šæ”¾æ‰€æœ‰æ‚¨çš„è¾¹ã€‚æ‚¨åªæœ‰ä¸€æ¡ä»è‡ªå·±åˆ°æ ‡è®°ä¸º33çš„é¡¶ç‚¹çš„å‡ºè¾¹ï¼Œæƒé‡ä¸ºâˆ’67ã€‚å•Šï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼šé¡¶ç‚¹33å·²ç»è¢«è®¿é—®ï¼ˆç”¨ç™½è‰²æ ‡è®°ï¼‰ã€‚æ‰€ä»¥â€¦æˆ‘ä»¬ä¸ä¼šå¯¹å…¶è¿›è¡Œé‡Šæ”¾ã€‚ï¼ˆå›é¡¾ä¸€ä¸‹relaxæ–¹æ³•çš„ä¼ªä»£ç ã€‚ï¼‰</p><p>ç°åœ¨æˆ‘ä»¬å›å®¶ï¼Œè®¤ä¸ºåˆ°33çš„æœ€çŸ­è·ç¦»æ˜¯82ï¼ˆç”¨ç²‰è‰²æ ‡è®°ï¼‰ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬åº”è¯¥èµ°<strong>é€šè¿‡</strong>34çš„è·¯å¾„ï¼Œå› ä¸ºè¿™ä¼šç»™æˆ‘ä»¬34âˆ’67&#x3D;34çš„è·ç¦»ã€‚ç³Ÿç³•ã€‚</p><p><strong>å¯¹äºè´Ÿè¾¹ï¼ŒDijkstraç®—æ³•ä¸èƒ½ä¿è¯æ­£ç¡®ã€‚å®ƒå¯èƒ½æœ‰æ•ˆâ€¦ä½†ä¸èƒ½ä¿è¯æœ‰æ•ˆã€‚</strong></p><p>è¯•ä¸€è¯•ï¼šå‡è®¾æ‚¨çš„å›¾å…·æœ‰è´Ÿè¾¹ï¼Œä½†æ‰€æœ‰è´Ÿè¾¹éƒ½åªä»æ‚¨ä¼ å…¥çš„æºé¡¶ç‚¹<strong>s</strong>å‡ºå‘ã€‚è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•æœ‰æ•ˆå—ï¼Ÿä¸ºä»€ä¹ˆ&#x2F;ä¸ºä»€ä¹ˆä¸ï¼Ÿ</p><h3 id="ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¸å˜æ€§"><a href="#ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¸å˜æ€§" class="headerlink" title="ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¸å˜æ€§"></a>ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ä¸å˜æ€§</h3><p>è¯·æ³¨æ„ï¼Œä¸€æ—¦é¡¶ç‚¹ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å¼¹å‡ºï¼Œå®ƒå°±æ°¸è¿œä¸ä¼šè¢«é‡æ–°æ·»åŠ ã€‚å®ƒçš„è·ç¦»æ°¸è¿œä¸ä¼šè¢«æ›´æ–°ã€‚å› æ­¤ï¼Œæ¢å¥è¯è¯´ï¼Œä¸€æ—¦é¡¶ç‚¹ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å¼¹å‡ºï¼Œæˆ‘ä»¬<strong>çŸ¥é“</strong>åˆ°è¯¥é¡¶ç‚¹çš„çœŸæ­£æœ€çŸ­è·ç¦»ã€‚</p><p>è¿™ä¸ªäº‹å®çš„ä¸€ä¸ªå¥½å¤„æ˜¯â€œçŸ­è·¯â€ã€‚å‡è®¾â€¦æˆ‘ä¸å…³å¿ƒæœ€çŸ­è·¯å¾„æ ‘ï¼Œè€Œåªæƒ³æ‰¾åˆ°ä»æŸä¸ªæºåˆ°æŸä¸ªå…¶ä»–ç›®æ ‡çš„æœ€çŸ­è·¯å¾„ã€‚å‡è®¾æ‚¨æƒ³è¦åœ¨ä¸–ç•Œå„åŸå¸‚ä¸Šæ„å»ºä¸€ä¸ªå›¾ï¼Œå¹¶æ‰¾åˆ°ä»ä¼¯å…‹åˆ©åˆ°å¥¥å…‹å…°çš„æœ€çŸ­è·¯å¾„ã€‚è¿è¡Œ<code>dijkstra(Berkeley)</code>å°†æ„å‘³ç€æ‚¨æ— æ³•åœæ­¢è¿™ä¸ªå¼ºå¤§çš„ç®—æ³•â€¦æ‚¨å¿…é¡»è®©å®ƒè¿è¡Œâ€¦ç›´åˆ°å®ƒæ‰¾åˆ°åˆ°æ´›æ‰çŸ¶ã€ä¼‘æ–¯é¡¿ã€çº½çº¦å¸‚å’Œæ‰€æœ‰å¯èƒ½çš„åœ°æ–¹çš„æœ€çŸ­è·¯å¾„ï¼</p><p>å¥½å§ã€‚ä¸€æ—¦ç®—æ³•ä¸­çš„<code>Oakland</code>ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å¼¹å‡ºï¼Œæˆ‘ä»¬å°±å¯ä»¥åœæ­¢ã€‚æˆ‘ä»¬åªéœ€è¿”å›æ­¤æ—¶çš„è·ç¦»å’Œè·¯å¾„ï¼Œå®ƒå°†æ˜¯æ­£ç¡®çš„ã€‚å› æ­¤ï¼Œ<strong>æœ‰æ—¶</strong><code>dijkstra</code>ä¸ä»…æ¥å—æºï¼Œè¿˜æ¥å—ç›®æ ‡ã€‚è¿™æ˜¯ä¸ºäº†çŸ­è·¯çš„ç›®çš„ã€‚</p><h2 id="A-ç®—æ³•"><a href="#A-ç®—æ³•" class="headerlink" title="A*ç®—æ³•"></a>A*ç®—æ³•</h2><div class="row">    <embed src="A_Algorithm-Demo.pdf" width="100%" height="550" type="application/pdf"></div><p>æˆ‘ä»¬é€šè¿‡è®¨è®ºä¸€ç§å¯èƒ½çš„æ–¹æ³•æ¥ç»“æŸDijkstraç®—æ³•éƒ¨åˆ†ï¼Œå³ä½¿å…¶åœ¨ç¢°åˆ°ç»™å®šç›®æ ‡åå°±åœæ­¢ã€‚è¿™æ ·åšè¶³å¤Ÿå¥½å—ï¼Ÿ</p><p>è¦å›ç­”ä¸Šé¢çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åä¸‹æ¥æ€è€ƒDijkstraç®—æ³•çš„å®é™…å·¥ä½œåŸç†ã€‚ä»¥å›¾å½¢æ–¹å¼è¡¨ç¤ºï¼ŒDijkstraä»æºèŠ‚ç‚¹å¼€å§‹ï¼ˆæƒ³è±¡æºèŠ‚ç‚¹æ˜¯åœ†å¿ƒï¼‰ã€‚ç„¶åï¼ŒDijkstraç®—æ³•å›´ç»•è¿™ä¸€ç‚¹ä»¥é€’å¢çš„åŠå¾„ç»˜åˆ¶åŒå¿ƒåœ†ï¼Œå¹¶â€œæ‰«æâ€è¿™äº›åœ†ï¼Œæ•æ‰ç‚¹ã€‚</p><p>å› æ­¤â€¦Dijkstraé¦–å…ˆè®¿é—®çš„èŠ‚ç‚¹æ˜¯è·ç¦»æºç‚¹æœ€è¿‘çš„åŸå¸‚ï¼Œç„¶åæ˜¯æ¬¡æœ€è¿‘çš„åŸå¸‚ï¼Œä¾æ­¤ç±»æ¨ã€‚è¿™å¬èµ·æ¥æ˜¯ä¸ªå¥½ä¸»æ„ã€‚Dijkstraé¦–å…ˆè®¿é—®è·ç¦»1ä¸ªå•ä½çš„æ‰€æœ‰åŸå¸‚ï¼Œç„¶åæ˜¯è·ç¦»2ä¸ªå•ä½çš„åŸå¸‚ï¼Œä¾æ­¤ç±»æ¨ï¼Œå½¢æˆåŒå¿ƒåœ†ã€‚</p><p>ç°åœ¨æƒ³è±¡ä¸€ä¸‹ä»¥ä¸‹æƒ…å†µï¼šåœ¨ç¾å›½åœ°å›¾ä¸Šï¼Œä»ä¸­å¿ƒæŸå¤„å¼€å§‹ï¼Œæ¯”å¦‚ä¸¹ä½›ã€‚ç°åœ¨æˆ‘æƒ³è®©ä½ ç”¨Dijkstraæ‰¾åˆ°ä¸€æ¡åˆ°çº½çº¦çš„è·¯å¾„ã€‚ä½ å°†æŒ‰ç…§â€œæœ€æ¥è¿‘çš„åŒå¿ƒåœ†â€çš„é¡ºåºéå†èŠ‚ç‚¹ã€‚</p><p>ä½ å°†é¦–å…ˆç»˜åˆ¶ä¸€ä¸ªå°åœ†ï¼Œå°±åœ¨ä¸¹ä½›é™„è¿‘ï¼Œè®¿é—®è¯¥åœ†å†…çš„æ‰€æœ‰åŸå¸‚ã€‚æœ€ç»ˆï¼Œä½ çš„åœ†å°†å˜å¤§ï¼Œä½ å°†ç»˜åˆ¶ä¸€ä¸ªé€šè¿‡æ‹‰æ–¯ç»´åŠ æ–¯çš„åœ†ï¼ˆåˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥åœ†å°†è®¿é—®æ‰€æœ‰å…¶ä»–ä½äºåœ†å†…çš„åŸå¸‚ï¼‰ã€‚ç„¶åï¼Œä½ çš„åœ†å°†è¶³å¤Ÿå¤§ï¼Œèƒ½å¤Ÿè¦†ç›–æ´›æ‰çŸ¶å’Œè¾¾æ‹‰æ–¯â€¦ä½†ä½ ç¦»çº½çº¦è¿˜å·®å¾—è¿œã€‚æ‰€æœ‰è¿™äº›åŠªåŠ›ï¼Œæ‰€æœ‰è¿™äº›åœ†ï¼Œä½†æ˜¯â€¦ç¦»ç›®æ ‡è¿˜å¾ˆè¿œã€‚çŸ­è·¯å¸®åŠ©äº†ï¼Œä½†åªæœ‰åœ¨ä½ å¿«é€Ÿåˆ°è¾¾ç›®æ ‡èŠ‚ç‚¹æ—¶æ‰æœ‰æ•ˆã€‚</p><p>å¦‚æœæˆ‘ä»¬èƒ½æœ‰ä¸€ç§æ–¹æ³•åˆ©ç”¨ä½ çš„å…ˆéªŒçŸ¥è¯†ï¼šçº½çº¦åœ¨ä¸œè¾¹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥â€œæç¤ºâ€ä½ çš„ç®—æ³•æ›´å–œæ¬¢ä¸œè¾¹çš„èŠ‚ç‚¹ï¼Œè€Œä¸æ˜¯è¥¿è¾¹çš„èŠ‚ç‚¹ã€‚</p><h3 id="å¼•å…¥ï¼šA"><a href="#å¼•å…¥ï¼šA" class="headerlink" title="å¼•å…¥ï¼šA*"></a>å¼•å…¥ï¼šA*</h3><p>ä¸ï¼Œä¸æ˜¯å¤ªé˜³ã€‚è¿™æ˜¯ä¸€ç§å«åšA*çš„ç®—æ³•ã€‚</p><p>è§‚å¯Ÿä»¥ä¸‹äº‹å®ï¼šDijkstraæ˜¯ä»æºåˆ°èŠ‚ç‚¹çš„è·ç¦»çš„â€œçœŸå®â€ï¼ˆå³ä¸æ˜¯ä¼°è®¡ï¼‰åº¦é‡ã€‚å› æ­¤ï¼Œå‡è®¾ä½ è®¿é—®äº†ä¼Šåˆ©è¯ºä¼Šå·çš„ä¸€ä¸ªåŸå¸‚ï¼Œä½ çš„æºæ˜¯ä¸¹ä½›ï¼Œé‚£ä¹ˆåœ¨é‚£æ—¶ï¼Œä½ å·²ç»å¾—åˆ°äº†åˆ°ä¸¹ä½›çš„è·ç¦»çš„çœŸå®åº¦é‡ã€‚æˆ‘ä»¬ç¼ºå°‘çš„æ˜¯ï¼šä»èŠ‚ç‚¹åˆ°ç›®æ ‡èŠ‚ç‚¹çº½çº¦çš„è·ç¦»çš„ä¸€äº›ç²—ç•¥ä¼°è®¡ã€‚è¿™å°†å®Œæ•´åœ°å‘ˆç°å‡ºæ•´ä¸ªå›¾æ™¯ã€‚å› ä¸ºå¦‚æœä½ æŠŠè¿™ä¸¤ä¸ªå› ç´ ç›¸åŠ ï¼ˆä»æºåˆ°èŠ‚ç‚¹çš„åº¦é‡+ä»èŠ‚ç‚¹åˆ°ç›®æ ‡çš„ä¼°è®¡ï¼‰ï¼Œä½ å¾—åˆ°ï¼ˆä»æºåˆ°ç›®æ ‡çš„ä¼°è®¡ï¼‰ã€‚å½“ç„¶ï¼Œä½ åŸå§‹çš„ä»èŠ‚ç‚¹åˆ°ç›®æ ‡çš„ä¼°è®¡è¶Šå¥½ï¼Œä½ ä»æºåˆ°ç›®æ ‡çš„ä¼°è®¡å°±è¶Šå¥½ï¼Œä½ çš„A*ç®—æ³•å°±è¶Šå¥½ã€‚</p><p>å› æ­¤ï¼Œè®©æˆ‘ä»¬ç¨å¾®ä¿®æ”¹æˆ‘ä»¬çš„Dijkstraç®—æ³•ã€‚åœ¨Dijkstraä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>bestKnownDistToV</code>ä½œä¸ºæˆ‘ä»¬ç®—æ³•ä¸­çš„ä¼˜å…ˆçº§ã€‚è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>bestKnownDistToV+estimateFromVToGoal</code>ä½œä¸ºæˆ‘ä»¬çš„å¯å‘å¼ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ª<a href="https://docs.google.com/presentation/d/177bRUTdCa60fjExdr9eO04NHm0MRfPtCzvEup1iMccM/edit#slide=id.g771336078_0_180">æ¼”ç¤º</a>ï¼</p><h3 id="é¸¡å’Œè›‹"><a href="#é¸¡å’Œè›‹" class="headerlink" title="é¸¡å’Œè›‹"></a>é¸¡å’Œè›‹</h3><p>æˆ‘ä»¬æœ‰ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æ€ä¹ˆçŸ¥é“ä¼°è®¡å€¼æ˜¯å¤šå°‘ï¼Ÿæˆ‘çš„æ„æ€æ˜¯ï¼Œä¼°è®¡å€¼æœ¬èº«æ˜¯ä¸€ç§<strong>è·ç¦»</strong>ï¼Œè€Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨A*æ¥<strong>æ‰¾åˆ°</strong>ä»æŸä¸ªèŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„è·ç¦»ã€‚</p><p>è¿™ä¼¼ä¹åƒæ˜¯ä¸€ä¸ªç»å…¸çš„é¸¡å’Œè›‹é—®é¢˜å®ä¾‹ã€‚â€œå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ï¼Ÿâ€é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæœ‰ä¸ªRedditç”¨æˆ·å¯¹æ­¤æœ‰äº†ä¸€ä¸ª<a href="https://www.reddit.com/r/dadjokes/comments/97768x/i_ordered_a_chicken_and_an_egg_from_amazon_ill/">æƒ³æ³•</a>ã€‚</p><p>å—¯ï¼Œå®ƒè¢«ç§°ä¸ºä¼°è®¡ï¼Œå› ä¸ºå®ƒç¡®å®æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬ä½¿ç”¨A*æ¥å¾—åˆ°ä»æºåˆ°ç›®æ ‡çš„<strong>çœŸå®</strong>æœ€çŸ­è·¯å¾„ï¼Œä½†ä¼°è®¡å€¼æ˜¯æˆ‘ä»¬è¿‘ä¼¼çš„ã€‚æœ‰æ—¶å€™å¾—åˆ°å¥½çš„ä¼°è®¡æ˜¯å›°éš¾çš„ã€‚</p><p>ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬ä»¥ä¸¹ä½› - çº½çº¦çš„ä¾‹å­æ¥ä¸¾ä¾‹è¯´æ˜ã€‚æˆ‘ä»¬å¯ä»¥åšçš„æ˜¯æŸ¥æ‰¾è¿™äº›åŸå¸‚çš„GPSåæ ‡ï¼Œå¹¶è®¡ç®—å…¶ä¸­çš„ç›´çº¿è·ç¦»ã€‚å½“ç„¶ï¼Œè¿™å¯èƒ½ä¸æ­£ç¡®ï¼Œå› ä¸ºä»ä¸¹ä½›åˆ°çº½çº¦å¯èƒ½æ²¡æœ‰ç›´çº¿å¯èµ°ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªç›¸å½“å¥½çš„ä¼°è®¡ï¼</p><h3 id="ä¸å¥½çš„å¯å‘å¼"><a href="#ä¸å¥½çš„å¯å‘å¼" class="headerlink" title="ä¸å¥½çš„å¯å‘å¼"></a>ä¸å¥½çš„å¯å‘å¼</h3><p>å‡è®¾ä»ä¸¹ä½›åˆ°çº½çº¦çš„æœ€çŸ­è·¯å¾„ç»è¿‡æŸä¸ªåŸå¸‚<em>C</em>ã€‚å‡è®¾æˆ‘çš„GPSåäº†ï¼Œå› æ­¤æˆ‘è®¤ä¸ºè¿™ä¸ªåŸå¸‚<em>C</em>ç¦»ä¸€åˆ‡éƒ½æ˜¯æ— é™è¿œçš„ï¼Œæ‰€ä»¥æˆ‘å°†ä»å›¾ä¸­çš„æ¯ä¸ªå…¶ä»–èŠ‚ç‚¹åˆ°åŸå¸‚<em>C</em>çš„ä¼°è®¡è·ç¦»è®¾ç½®ä¸ºâˆã€‚</p><p>ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿå—¯ï¼ŒA*åŸºæœ¬ä¸Šæ°¸è¿œä¸æƒ³è®¿é—®è¿™ä¸ªåŸå¸‚ã€‚ ï¼ˆè®°ä½æˆ‘ä»¬åœ¨ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„ä¼˜å…ˆçº§æ˜¯ä»€ä¹ˆï¼›å¯¹äºè¿™ä¸ªåŸå¸‚ï¼Œä¼˜å…ˆçº§å°†å§‹ç»ˆä¸ºâˆï¼Œå³ä½¿</p><h1 id="æœ€å°ç”Ÿæˆæ ‘-MST"><a href="#æœ€å°ç”Ÿæˆæ ‘-MST" class="headerlink" title="æœ€å°ç”Ÿæˆæ ‘(MST)"></a>æœ€å°ç”Ÿæˆæ ‘(MST)</h1><p>æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰æ˜¯å›¾ä¸­å¯èƒ½çš„æœ€è½»çš„è¾¹é›†ï¼Œä½¿å¾—æ‰€æœ‰é¡¶ç‚¹éƒ½è¿æ¥åœ¨ä¸€èµ·ã€‚ç”±äºå®ƒæ˜¯ä¸€æ£µæ ‘ï¼Œå®ƒå¿…é¡»æ˜¯è¿é€šçš„ä¸”æ— ç¯çš„ã€‚è€Œä¸”å®ƒè¢«ç§°ä¸ºâ€œç”Ÿæˆâ€ï¼Œå› ä¸ºæ‰€æœ‰é¡¶ç‚¹éƒ½åŒ…æ‹¬åœ¨å†…ã€‚</p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320172133841.png" alt="image-20240320172133841"></p><blockquote><ul><li><p>æ¡ä»¶</p><ul><li><p>è¿æ¥çš„</p></li><li><p>éé—­ç¯çš„</p></li><li><p>åŒ…æ‹¬äº†æ‰€æœ‰é¡¶ç‚¹</p></li></ul></li></ul></blockquote><p>åœ¨è¿™ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹ä¸¤ä¸ªç®—æ³•ï¼Œå®ƒä»¬å°†å¸®åŠ©æˆ‘ä»¬ä»ä¸€ä¸ªå›¾ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ã€‚</p><p>åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹å‰²å±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰åŠ©äºæ‰¾åˆ°æœ€å°ç”Ÿæˆæ ‘çš„å·¥å…·ã€‚</p><h2 id="å‰²å±æ€§"><a href="#å‰²å±æ€§" class="headerlink" title="å‰²å±æ€§"></a>å‰²å±æ€§</h2><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå‰²å®šä¹‰ä¸ºå¯¹å›¾çš„èŠ‚ç‚¹åˆ†é…ç»™ä¸¤ä¸ªéç©ºé›†åˆï¼ˆå³æˆ‘ä»¬å°†æ¯ä¸ªèŠ‚ç‚¹åˆ†é…ç»™ç¬¬ä¸€ä¸ªé›†åˆæˆ–ç¬¬äºŒä¸ªé›†åˆï¼‰ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªæ¨ªè·¨çš„è¾¹å®šä¹‰ä¸ºè¿æ¥ä¸€ä¸ªé›†åˆä¸­çš„èŠ‚ç‚¹åˆ°å¦ä¸€ä¸ªé›†åˆä¸­çš„èŠ‚ç‚¹çš„è¾¹ã€‚</p><p>æœ‰äº†è¿™ä¸¤ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç†è§£å‰²å±æ€§äº†ï¼šç»™å®šä»»ä½•ä¸€ä¸ªå‰²ï¼Œæœ€å°æƒé‡çš„æ¨ªè·¨è¾¹éƒ½åœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚</p><p>å‰²å±æ€§çš„è¯æ˜å¦‚ä¸‹ï¼šå‡è®¾ï¼ˆä¸ºäº†æ¨å¯¼çŸ›ç›¾ï¼‰æœ€å°æ¨ªè·¨è¾¹ e ä¸åœ¨æœ€å°ç”Ÿæˆæ ‘ä¸­ã€‚ç”±äºå®ƒä¸æ˜¯æœ€å°ç”Ÿæˆæ ‘çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ è¯¥è¾¹ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå¾ªç¯ã€‚å› ä¸ºæœ‰ä¸€ä¸ªå¾ªç¯ï¼Œè¿™æ„å‘³ç€å¦ä¸€ä¸ªè¾¹ f ä¹Ÿå¿…é¡»æ˜¯ä¸€ä¸ªæ¨ªè·¨è¾¹ï¼ˆå¯¹äºä¸€ä¸ªå¾ªç¯ï¼Œå¦‚æœ e ä»ä¸€ä¸ªé›†åˆç©¿è¿‡åˆ°å¦ä¸€ä¸ªé›†åˆï¼Œå°±å¿…é¡»æœ‰å¦ä¸€æ¡è¾¹ç©¿è¿‡å›åˆ°ç¬¬ä¸€ä¸ªé›†åˆï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç§»é™¤ f å¹¶ä¿ç•™ eï¼Œè¿™å°†ç»™æˆ‘ä»¬ä¸€ä¸ªæ›´ä½æƒé‡çš„ç”Ÿæˆæ ‘ã€‚ä½†è¿™æ˜¯ä¸€ä¸ªçŸ›ç›¾ï¼Œå› ä¸ºæˆ‘ä»¬å‡è®¾å¼€å§‹æ—¶æœ‰ä¸€ä¸ªæœ€å°ç”Ÿæˆæ ‘ï¼Œä½†ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæƒé‡æ›´å°çš„ç”Ÿæˆæ ‘ï¼Œå› æ­¤åŸå§‹çš„æœ€å°ç”Ÿæˆæ ‘å®é™…ä¸Šå¹¶ä¸æ˜¯æœ€å°çš„ã€‚å› æ­¤ï¼Œå‰²å±æ€§å¿…é¡»æˆç«‹ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€å¼ å›¾ç¤ºï¼Œè¯´æ˜äº†ä¸Šè¿°è¯æ˜çš„ä¸€äº›è®ºç‚¹ï¼š</p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320172407081.png" alt="image-20240320172407081"></p><h2 id="Primç®—æ³•"><a href="#Primç®—æ³•" class="headerlink" title="Primç®—æ³•"></a>Primç®—æ³•</h2><div class="row">    <embed src="CS61B-Prim&#39;s-Demo.pdf" width="100%" height="550" type="application/pdf"></div><p>è¿™æ˜¯ä¸€ç§ä»å›¾ä¸­æ‰¾åˆ°æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰çš„ç®—æ³•ã€‚å®ƒçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ä»ä»»æ„èµ·å§‹èŠ‚ç‚¹å¼€å§‹ã€‚</li><li>åå¤æ·»åŠ å…·æœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨æ­£åœ¨æ„å»ºçš„MSTå†…çš„æœ€çŸ­è¾¹ã€‚</li><li>é‡å¤ç›´åˆ°æœ‰$V-1$æ¡è¾¹ã€‚</li></ol><p>Primç®—æ³•ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºåœ¨ç®—æ³•çš„æ‰€æœ‰é˜¶æ®µï¼Œå¦‚æœæˆ‘ä»¬å°†æ‰€æœ‰èŠ‚ç‚¹éƒ½ä½œä¸ºæˆ‘ä»¬æ­£åœ¨æ„å»ºçš„MSTçš„ä¸€éƒ¨åˆ†ï¼Œè€Œå°†æ‰€æœ‰å…¶ä»–èŠ‚ç‚¹è§†ä¸ºç¬¬äºŒä¸ªé›†åˆï¼Œé‚£ä¹ˆè¿™ä¸ªç®—æ³•æ€»æ˜¯æ·»åŠ æ¨ªè·¨æ­¤å‰²çš„æœ€è½»çš„è¾¹ï¼Œæ ¹æ®å‰²å±æ€§ï¼Œè¿™ä¸ªè¾¹å¿…ç„¶æ˜¯æœ€ç»ˆMSTçš„ä¸€éƒ¨åˆ†ã€‚</p><p>ä»æœ¬è´¨ä¸Šè®²ï¼Œè¯¥ç®—æ³•é€šè¿‡ä¸Dijkstraç®—æ³•ç›¸åŒçš„æœºåˆ¶è¿è¡Œï¼Œä½†æ˜¯Dijkstraç®—æ³•è€ƒè™‘çš„æ˜¯å€™é€‰èŠ‚ç‚¹è·ç¦»æºèŠ‚ç‚¹çš„è·ç¦»ï¼Œè€ŒPrimç®—æ³•åˆ™æŸ¥çœ‹æ¯ä¸ªå€™é€‰èŠ‚ç‚¹è·ç¦»æ­£åœ¨æ„å»ºçš„MSTçš„è·ç¦»ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœä½¿ç”¨ä¸Dijkstraç®—æ³•ç›¸åŒçš„æœºåˆ¶è¿›è¡ŒPrimç®—æ³•ï¼Œå…¶è¿è¡Œæ—¶é—´å°†ä¸Dijkstraç®—æ³•ç›¸åŒï¼Œå³ </p><p>$O((|V| + |E|) \log |V|)$ã€‚è¯·è®°ä½ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦ä¸ºæ¯æ¡è¾¹æ·»åŠ åˆ°ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­çš„å¤–å›´ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªé¡¶ç‚¹ä»ä¸­å‡ºé˜Ÿä¸€æ¬¡ã€‚</p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/2024-03-20-17-19-38.gif" alt="2024-03-20-17-19-38"></p><blockquote><ul><li><p>åŒºåˆ«: </p><ul><li><p>SPT: ä»æºé¡¶ç‚¹å‡ºå‘ï¼Œæ‰€ä»¥åœ¨å“ªé‡Œå¼€å§‹å¾ˆé‡è¦</p></li><li><p>MSP: å…¨å±€å±æ€§ï¼Œä¸æºé¡¶ç‚¹æ— å…³</p></li></ul></li></ul></blockquote><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320172951394.png" alt="image-20240320172951394"></p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320173004710.png" alt="image-20240320173004710"></p><h2 id="Kruskalç®—æ³•"><a href="#Kruskalç®—æ³•" class="headerlink" title="Kruskalç®—æ³•"></a>Kruskalç®—æ³•</h2><div class="row">    <embed src="kruskals-realistic-implementation-demo.pdf" width="100%" height="550" type="application/pdf"></div><p>è¿™æ˜¯å¦ä¸€ç§ä»å›¾ä¸­æ‰¾åˆ°æœ€å°ç”Ÿæˆæ ‘ï¼ˆMSTï¼‰çš„ç®—æ³•ã€‚Kruskalè¿”å›çš„æœ€å°ç”Ÿæˆæ ‘å¯èƒ½ä¸Primè¿”å›çš„ä¸åŒï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç®—æ³•éƒ½å°†å§‹ç»ˆè¿”å›ä¸€ä¸ªMSTï¼›å› ä¸ºä¸¤è€…éƒ½æ˜¯æœ€å°çš„ï¼ˆæœ€ä¼˜çš„ï¼‰ï¼Œå®ƒä»¬éƒ½å°†ç»™å‡ºæœ‰æ•ˆçš„æœ€ä¼˜è§£ï¼ˆå®ƒä»¬åœ¨æœ€å°&#x2F;æ€»æƒé‡ç›¸åŒçš„æƒ…å†µä¸‹ä¸€æ ·ä¼˜ï¼Œè€Œä¸”è¿™æ˜¯å°½å¯èƒ½ä½çš„ï¼‰ã€‚</p><p>è¯¥ç®—æ³•æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>å°†æ‰€æœ‰è¾¹ä»æœ€è½»åˆ°æœ€é‡æ’åºã€‚</li><li>é€ä¸ªè€ƒè™‘è¾¹ï¼ˆæŒ‰æ’åºé¡ºåºï¼‰ï¼Œå¦‚æœæ·»åŠ è¯¥è¾¹ä¸ä¼šå½¢æˆå¾ªç¯ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„MSTä¸­ã€‚</li><li>é‡å¤ç›´åˆ°æœ‰ $V-1$ æ¡è¾¹ã€‚</li></ol><p>Kruskalç®—æ³•æœ‰æ•ˆçš„åŸå› æ˜¯æˆ‘ä»¬æ·»åŠ çš„ä»»ä½•è¾¹éƒ½å°†è¿æ¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¿™ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªé›†åˆçš„ä¸€éƒ¨åˆ†ï¼Œä»¥åŠç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è¯´æ˜¯ç¬¬äºŒä¸ªé›†åˆçš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬æ·»åŠ çš„è¿™æ¡è¾¹ä¸æ˜¯å¾ªç¯çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºæˆ‘ä»¬åªæœ‰åœ¨ä¸ä¼šå½¢æˆå¾ªç¯çš„æƒ…å†µä¸‹æ‰ä¼šæ·»åŠ ä¸€æ¡è¾¹ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æŒ‰ç…§ä»æœ€è½»åˆ°æœ€é‡çš„é¡ºåºæŸ¥çœ‹å€™é€‰è¾¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è¦æ·»åŠ çš„è¿™æ¡è¾¹å¿…é¡»æ˜¯æ¨ªè·¨æ­¤å‰²çš„æœ€è½»çš„è¾¹ï¼ˆå¦‚æœå­˜åœ¨ä¸€æ¡æ›´è½»çš„è¾¹ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨æ­¤ä¹‹å‰è¢«æ·»åŠ ï¼Œæ·»åŠ è¿™æ¡è¾¹å°†å¯¼è‡´å‡ºç°å¾ªç¯ï¼‰ã€‚å› æ­¤ï¼Œè¯¥ç®—æ³•ä¹Ÿæ˜¯é€šè¿‡å‰²å±æ€§å·¥ä½œçš„ã€‚</p><p>Kruskalç®—æ³•è¿è¡Œæ—¶é—´ä¸º$O(|E| \log |E|)$ï¼Œå› ä¸ºç®—æ³•çš„ç“¶é¢ˆæ˜¯å¼€å§‹æ—¶å¯¹æ‰€æœ‰è¾¹è¿›è¡Œæ’åºï¼ˆä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å †æ’åºï¼Œå…¶ä¸­æˆ‘ä»¬å°†æ‰€æœ‰è¾¹æ’å…¥å †ä¸­ï¼Œå¹¶é€ä¸ªåˆ é™¤æœ€å°è¾¹ï¼‰ã€‚å¦‚æœæˆ‘ä»¬å·²ç»ç»™å‡ºäº†é¢„å…ˆæ’åºçš„è¾¹å¹¶ä¸”ä¸éœ€è¦ä¸ºæ­¤ä»˜å‡ºä»£ä»·ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶é—´æ˜¯ $O(âˆ£Eâˆ£log ^âˆ—  âˆ£Vâˆ£)$ã€‚è¿™æ˜¯å› ä¸ºæ¯å½“æˆ‘ä»¬æå‡ºè¦æ·»åŠ çš„è¾¹æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ£€æŸ¥å®ƒæ˜¯å¦ä¼šå¼•å…¥å¾ªç¯ã€‚æˆ‘ä»¬çŸ¥é“å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¸¦è·¯å¾„å‹ç¼©çš„åŠ æƒå¿«é€Ÿå¹¶æŸ¥é›†ï¼›è¿™å°†æœ‰æ•ˆåœ°å‘Šè¯‰æˆ‘ä»¬ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦å·²ç»è¿æ¥åœ¨ä¸€èµ·ã€‚è¿™å°†èŠ±è´¹$âˆ£Eâˆ£$ æ¬¡è°ƒç”¨ <code>isConnected</code>ï¼Œæ¯æ¬¡è°ƒç”¨çš„æˆæœ¬ä¸º$ O(log ^âˆ—  âˆ£Vâˆ£)$ï¼Œå…¶ä¸­$log^*$æ˜¯é˜¿å…‹æ›¼å‡½æ•°ã€‚</p><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/2024-03-20-17-17-07.gif" alt="2024-03-20-17-17-07"></p><h3 id="ä»£ç å®ç°-1"><a href="#ä»£ç å®ç°-1" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320173029921.png" alt="image-20240320173029921"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="/2024/03/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-18-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD19-20-%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E3%80%81%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/image-20240320173106199.png" alt="image-20240320173106199"></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Puzzle</title>
      <link href="/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/"/>
      <url>/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/</url>
      
        <content type="html"><![CDATA[<p>githubä»“åº“:<a href="https://github.com/xxbaizero0/PuzzleFlutterGame">xxbaizero0&#x2F;PuzzleFlutterGame: A flutter game (github.com)</a></p><p>AspectRatioå‚è€ƒæ–‡ç« </p><p>- <a href="https://juejin.cn/post/6844903856988487693#heading-1">Flutter çº¦æŸå®½é«˜æ¯”çš„æ§ä»¶ AspectRatio - æ˜é‡‘ (juejin.cn)</a></p><p>- <a href="https://juejin.cn/post/7112017871949004807#heading-1">flutterç³»åˆ—ä¹‹:æŒ‰æ¯”ä¾‹ç¼©æ”¾çš„AspectRatioå’ŒFractionallySizedBox - æ˜é‡‘ (juejin.cn)</a></p><p>GridViewå‚è€ƒæ–‡ç« <a href="https://juejin.cn/post/6844903889502732295#heading-1">Flutterç½‘æ ¼å‹å¸ƒå±€ - GridViewç¯‡ - æ˜é‡‘ (juejin.cn)</a></p><p>å¯¹è¯æ¡†å‚è€ƒæ–‡ç« : <a href="https://juejin.cn/post/6844903773198893070?searchId=20240317172222E33C0EED28126222B1ED">Flutterä¹‹Dialogä½¿ç”¨å’Œè¸©å‘ - æ˜é‡‘ (juejin.cn)</a></p><p>privideå‚è€ƒæ–‡ç« </p><p>- <a href="https://juejin.cn/post/7015887922117214238#heading-9">Flutter ProviderçŠ¶æ€ç®¡ç†â€”å…«ç§æä¾›è€…ä½¿ç”¨åˆ†æ - æ˜é‡‘ (juejin.cn)</a></p><p>- <a href="https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink">https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink</a></p><p>é¢„è§ˆ</p><p><img src="/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/2024-03-17-15-11-36.gif" alt="2024-03-17-15-11-36"></p><ul><li>UIç•Œé¢<ul><li>Headeréƒ¨åˆ†</li><li>Paneléƒ¨åˆ†</li></ul></li><li>æ¸¸æˆé€»è¾‘<ul><li>æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–</li><li>å›¾ç‰‡åˆ‡å‰²</li><li>æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«</li><li>å›¾ç‰‡çš„ç§»åŠ¨ä¸åˆå¹¶</li><li>åˆ¤æ–­æ¸¸æˆç»“æŸ</li><li>é‡æ–°å¼€å§‹æ¸¸æˆ</li><li>è®¾ç½®éš¾åº¦</li></ul></li></ul><h1 id="åˆå§‹è®¾ç½®"><a href="#åˆå§‹è®¾ç½®" class="headerlink" title="åˆå§‹è®¾ç½®"></a>åˆå§‹è®¾ç½®</h1><p>æ–‡ä»¶ç»“æ„</p><p><img src="/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/image-20240317173710807.png" alt="image-20240317173710807"></p><p><code>pubspec.yaml</code>æ–‡ä»¶</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dependencies:</span><br><span class="line">  flutter:</span><br><span class="line">    sdk: flutter</span><br><span class="line"></span><br><span class="line">  image: ^<span class="number">4.1</span><span class="number">.7</span></span><br><span class="line">  provider: ^<span class="number">6.1</span><span class="number">.2</span></span><br><span class="line">      </span><br><span class="line">flutter:</span><br><span class="line">  assets:</span><br><span class="line">    - assets/imgs/</span><br></pre></td></tr></table></figure><p><img src="/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/image-20240317173621834.png" alt="image-20240317173621834"></p><p><img src="/2024/03/17/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-Puzzle/image-20240317173649101.png" alt="image-20240317173649101"></p><h1 id="UIç•Œé¢"><a href="#UIç•Œé¢" class="headerlink" title="UIç•Œé¢"></a>UIç•Œé¢</h1><h2 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h2><p>Headerç•Œé¢æ¯”è¾ƒå®¹æ˜“ï¼Œåˆ†æä¸€ä¸‹å°±æ˜¯ä¸€ä¸ªRowæ¥ä¸¤ä¸ªColumnå°±å¥½äº†ï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Row(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">      children: [</span><br><span class="line">        Container(</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">20</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">          child: Column(</span><br><span class="line">            children: [</span><br><span class="line">              <span class="keyword">const</span> Text(<span class="string">&quot;æ‹¼å›¾&quot;</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                    fontSize: <span class="number">75</span>,</span><br><span class="line">                    color: Color.fromARGB(<span class="number">255</span>, <span class="number">119</span>, <span class="number">110</span>, <span class="number">101</span>),</span><br><span class="line">                    fontWeight: FontWeight.bold</span><br><span class="line">                ),),</span><br><span class="line">              SizedBox(height: <span class="number">12</span>,),</span><br><span class="line">              newGame()</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">40</span>, <span class="number">25</span>, <span class="number">0</span>),</span><br><span class="line">          child: Image.asset(</span><br><span class="line">            Assets.img1,</span><br><span class="line">            fit: BoxFit.fill,</span><br><span class="line">            width: <span class="number">170</span>,</span><br><span class="line">            height: <span class="number">170</span>,</span><br><span class="line">          )</span><br><span class="line">        ),</span><br><span class="line">      ]</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Container newGame() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: <span class="number">60</span>,</span><br><span class="line">    width: <span class="number">160</span>,</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">5</span>),</span><br><span class="line">        color: Color.fromARGB(<span class="number">255</span>, <span class="number">147</span>, <span class="number">131</span>, <span class="number">117</span>)</span><br><span class="line">    ),</span><br><span class="line">    child: InkWell(</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).init();</span><br><span class="line">      &#125;,</span><br><span class="line">      child: <span class="keyword">const</span> Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        children: [</span><br><span class="line">          Text(<span class="string">&#x27;NEW GAME&#x27;</span>, style: TextStyle(</span><br><span class="line">              color: Color.fromARGB(<span class="number">255</span>, <span class="number">246</span>, <span class="number">240</span>, <span class="number">229</span>), fontSize: <span class="number">18</span>, fontWeight: FontWeight.bold)),</span><br><span class="line">          SizedBox(height: <span class="number">1</span>,)</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Panel"><a href="#Panel" class="headerlink" title="Panel"></a>Panel</h2><p>åˆ†æä¸€ä¸‹ï¼Œè¿™ä¸ªPanelæœ‰ä¸€ä¸ªæ­£æ–¹å½¢çš„ç»„ä»¶ï¼Œæ­£æ–¹å½¢ç»„ä»¶ä¸‹é¢æœ‰ä¸ªæŒ‰é’®</p><h3 id="æ­£æ–¹å½¢ç»„ä»¶"><a href="#æ­£æ–¹å½¢ç»„ä»¶" class="headerlink" title="æ­£æ–¹å½¢ç»„ä»¶"></a>æ­£æ–¹å½¢ç»„ä»¶</h3><p>AspectRatioå‚è€ƒæ–‡ç« </p><p>- <a href="https://juejin.cn/post/6844903856988487693#heading-1">Flutter çº¦æŸå®½é«˜æ¯”çš„æ§ä»¶ AspectRatio - æ˜é‡‘ (juejin.cn)</a></p><p>- <a href="https://juejin.cn/post/7112017871949004807#heading-1">flutterç³»åˆ—ä¹‹:æŒ‰æ¯”ä¾‹ç¼©æ”¾çš„AspectRatioå’ŒFractionallySizedBox - æ˜é‡‘ (juejin.cn)</a></p><p>é¦–å…ˆå¤§æ¡†æ¶æ˜¯AspectRatioï¼Œè®¾ç½®æ­£æ–¹å½¢å®½é«˜æ¯”æ˜¯1:1</p><p>ç„¶åä½¿ç”¨GridViewè¿™ä¸ªç»„ä»¶ï¼Œå°†æˆ‘ä»¬çš„æ‹¼å›¾å—ä¸€ä¸€ç½‘çŠ¶æ’å¸ƒã€‚</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">AspectRatio Frame(BuildContext context, Widget child) &#123;</span><br><span class="line">  <span class="built_in">double</span> minSize = min(</span><br><span class="line">      MediaQuery.of(context).size.width, MediaQuery.of(context).size.height);</span><br><span class="line">  <span class="keyword">return</span> AspectRatio(</span><br><span class="line">    aspectRatio: <span class="number">1.0</span>,</span><br><span class="line">    child: Container(</span><br><span class="line">      key: _redKey,</span><br><span class="line">      color: Color.fromRGBO(<span class="number">182</span>,<span class="number">173</span>,<span class="number">156</span>,<span class="number">1</span>),</span><br><span class="line">      width: minSize,</span><br><span class="line">      height: minSize,</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      child: Container(</span><br><span class="line">          child: MediaQuery.removePadding(</span><br><span class="line">              removeTop: <span class="keyword">true</span>,</span><br><span class="line">              context: context,</span><br><span class="line">              child: GridView.builder(</span><br><span class="line">                  physics: <span class="keyword">const</span> NeverScrollableScrollPhysics(),</span><br><span class="line">                  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">                      crossAxisCount: Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).SIZE,</span><br><span class="line">                      childAspectRatio: <span class="number">1</span>,</span><br><span class="line">                      mainAxisSpacing: <span class="number">3</span>,</span><br><span class="line">                      crossAxisSpacing: <span class="number">3</span></span><br><span class="line">                  ),</span><br><span class="line">                  itemCount: SIZE * SIZE,</span><br><span class="line">                  itemBuilder: (context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                    <span class="keyword">return</span> PuzzlePart(Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">true</span>).<span class="keyword">get</span>(index), index);</span><br><span class="line">                  &#125;)</span><br><span class="line">          ),</span><br><span class="line">        )</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æŒ‰é’®"><a href="#æŒ‰é’®" class="headerlink" title="æŒ‰é’®"></a>æŒ‰é’®</h3><p>æŒ‰é’®ä¸»è¦ç”¨æ¥æ§åˆ¶æ¸¸æˆéš¾åº¦çš„</p><p>å‚è€ƒæ–‡ç« :<a href="https://juejin.cn/post/6844903773198893070?searchId=20240317172222E33C0EED28126222B1ED">Flutterä¹‹Dialogä½¿ç”¨å’Œè¸©å‘ - æ˜é‡‘ (juejin.cn)</a></p><p>ä¸»è¦é€šè¿‡æŒ‰é’®å”¤èµ·å¯¹è¯æ¡†ã€‚</p><ul><li><strong>å¯¹è¯æ¡†æ˜¯è·¯ç”±çš„é¡µé¢ï¼ˆRouteï¼‰</strong>ï¼š<ul><li>åœ¨ Flutter ä¸­ï¼Œé¡µé¢è¢«ç§°ä¸ºè·¯ç”±ï¼ˆRouteï¼‰ã€‚å¯¹è¯æ¡†æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªé¡µé¢ï¼Œä½†å®ƒé€šå¸¸æ˜¯åœ¨å½“å‰é¡µé¢çš„ä¸Šå±‚ä»¥æµ®åŠ¨çš„å½¢å¼æ˜¾ç¤ºçš„ã€‚</li><li>è·¯ç”±æ˜¯åº”ç”¨ç¨‹åºä¸­é¡µé¢çš„æŠ½è±¡ï¼Œå®ƒä»¬è´Ÿè´£ç®¡ç†é¡µé¢ä¹‹é—´çš„å¯¼èˆªã€å †æ ˆå’ŒçŠ¶æ€ã€‚</li></ul></li><li><strong>ç”± Navigator è¿›è¡Œç®¡ç†</strong>ï¼š<ul><li>Navigator æ˜¯ç”¨äºç®¡ç†è·¯ç”±çš„ç±»ï¼Œå®ƒè´Ÿè´£è·¯ç”±çš„æ·»åŠ ã€ç§»é™¤å’Œåˆ‡æ¢ã€‚</li><li>å¯¹è¯æ¡†æ˜¯ç”± Navigator æ¥ç®¡ç†çš„ï¼Œå®ƒè´Ÿè´£åœ¨å±å¹•ä¸Šæ­£ç¡®åœ°æ˜¾ç¤ºå’Œéšè—å¯¹è¯æ¡†ã€‚</li></ul></li><li><strong>æ§åˆ¶å¯¹è¯æ¡†çš„æ˜¾ç¤ºå’Œéšè—</strong>ï¼š<ul><li>æ§åˆ¶å¯¹è¯æ¡†çš„æ˜¾ç¤ºå’Œéšè—æ˜¯é€šè¿‡è°ƒç”¨ Navigator çš„ <code>push</code> å’Œ <code>pop</code> æ–¹æ³•æ¥å®ç°çš„ã€‚</li><li>å½“æ‚¨æƒ³è¦æ˜¾ç¤ºå¯¹è¯æ¡†æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>Navigator.of(context).push()</code> æ–¹æ³•å°†å¯¹è¯æ¡†è·¯ç”±æ¨å…¥è·¯ç”±å †æ ˆã€‚è¿™å°†å¯¼è‡´å¯¹è¯æ¡†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</li><li>å½“æ‚¨æƒ³è¦éšè—å¯¹è¯æ¡†æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ <code>Navigator.of(context).pop()</code> æ–¹æ³•å°†å¯¹è¯æ¡†è·¯ç”±ä»å †æ ˆä¸­å¼¹å‡ºã€‚è¿™å°†å¯¼è‡´å¯¹è¯æ¡†è¢«ç§»é™¤å¹¶éšè—ã€‚</li></ul></li><li>åœ¨Flutterä¸­ï¼Œå¯¹è¯æ¡†ä¼šæœ‰ä¸¤ç§é£æ ¼ï¼Œè°ƒç”¨showDialog()æ–¹æ³•å±•ç¤ºçš„æ˜¯materialé£æ ¼çš„å¯¹è¯æ¡†ï¼Œè°ƒç”¨showCupertinoDialog()æ–¹æ³•å±•ç¤ºçš„æ˜¯iosé£æ ¼çš„å¯¹è¯æ¡†ã€‚ è€Œè¿™ä¸¤ä¸ªæ–¹æ³•å…¶å®éƒ½ä¼šå»è°ƒç”¨showGeneralDialog()æ–¹æ³•ï¼Œå¯ä»¥ä»æºç ä¸­çœ‹åˆ°æœ€åæ˜¯åˆ©ç”¨Navigator.of(context, rootNavigator: true).push()ä¸€ä¸ªé¡µé¢ã€‚</li></ul><p>åŸºæœ¬è¦ä¼ çš„å‚æ•°:contextä¸Šä¸‹æ–‡,builderç”¨äºåˆ›å»ºæ˜¾ç¤ºçš„widget,barrierDismissibleå¯ä»¥æ§åˆ¶ç‚¹å‡»å¯¹è¯æ¡†ä»¥å¤–çš„åŒºåŸŸæ˜¯å¦éšè—å¯¹è¯æ¡†ã€‚</p><ul><li>ä½ ä¼šæ³¨æ„åˆ°ï¼ŒshowDialog()æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡,å¯ä»¥é€šè¿‡è¿™ä¸ªfutureå¯¹è±¡æ¥è·å–å¯¹è¯æ¡†æ‰€ä¼ é€’çš„æ•°æ®ã€‚ æ¯”å¦‚æˆ‘ä»¬æƒ³çŸ¥é“æƒ³çŸ¥é“ç”¨æˆ·æ˜¯ç‚¹å‡»äº†å¯¹è¯æ¡†çš„ç¡®è®¤æŒ‰é’®è¿˜æ˜¯å–æ¶ˆæŒ‰é’®,é‚£å°±åœ¨é€€å‡ºå¯¹è¯æ¡†çš„æ—¶å€™ï¼Œåˆ©ç”¨Navigator.of(context).pop(â€œä¸€äº›æ•°æ®â€);</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> _selectedDifficulty = <span class="string">&#x27;ç®€å•&#x27;</span>;</span><br><span class="line">ElevatedButton DifficultyButton() &#123;</span><br><span class="line">  <span class="keyword">return</span> ElevatedButton(</span><br><span class="line">        style: ElevatedButton.styleFrom(</span><br><span class="line">          backgroundColor: Color.fromARGB(<span class="number">255</span>, <span class="number">147</span>, <span class="number">131</span>, <span class="number">117</span>)<span class="comment">// è®¾ç½®æŒ‰é’®èƒŒæ™¯é¢œè‰²ä¸ºè“è‰²</span></span><br><span class="line">        ),</span><br><span class="line">        onPressed: () &#123;</span><br><span class="line">          _showDifficultyDialog();</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&#x27;è®¾ç½®éš¾åº¦ (<span class="subst">$_selectedDifficulty</span>)&#x27;</span>),</span><br><span class="line">      );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  Future&lt;<span class="keyword">void</span>&gt; _showDifficultyDialog() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">String?</span> selectedDifficulty = <span class="keyword">await</span> showDialog&lt;<span class="built_in">String</span>&gt;(</span><br><span class="line">      context: context,</span><br><span class="line">      builder: (BuildContext context) &#123;</span><br><span class="line">        <span class="keyword">return</span> SimpleDialog(</span><br><span class="line">          title: Text(<span class="string">&#x27;è®¾ç½®éš¾åº¦&#x27;</span>),</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            SimpleDialogOption(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).SIZE = <span class="number">3</span>;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).init();</span><br><span class="line">                Navigator.pop(context, <span class="string">&#x27;ç®€å•&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;ç®€å•&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">            SimpleDialogOption(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).SIZE = <span class="number">4</span>;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).init();</span><br><span class="line">                Navigator.pop(context, <span class="string">&#x27;ä¸­ç­‰&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;ä¸­ç­‰&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">            SimpleDialogOption(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).SIZE = <span class="number">5</span>;</span><br><span class="line">                Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).init();</span><br><span class="line">                Navigator.pop(context, <span class="string">&#x27;å›°éš¾&#x27;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              child: Text(<span class="string">&#x27;å›°éš¾&#x27;</span>),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (selectedDifficulty != <span class="keyword">null</span>) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _selectedDifficulty = selectedDifficulty;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><blockquote><p>Navigator.popçš„contextä½œç”¨:</p><p><code>BuildContext</code>å¯¹è±¡æ˜¯é€šè¿‡<code>builder</code>å‡½æ•°çš„å‚æ•°ä¼ é€’çš„ï¼Œå³<code>builder(BuildContext context)</code>ã€‚å› æ­¤ï¼Œ<code>context</code>å‚æ•°æŒ‡å®šäº†åœ¨å“ªä¸ªé¡µé¢å¼¹å‡ºå¯¹è¯æ¡†ï¼Œå¹¶ä¸”åœ¨å¯¹è¯æ¡†å…³é—­æ—¶ï¼Œè¿”å›çš„ç»“æœå°†ä¼ é€’ç»™è¯¥é¡µé¢ã€‚</p></blockquote><h1 id="æ¸¸æˆé€»è¾‘"><a href="#æ¸¸æˆé€»è¾‘" class="headerlink" title="æ¸¸æˆé€»è¾‘"></a>æ¸¸æˆé€»è¾‘</h1><h2 id="åŸºç¡€éª¨æ¶"><a href="#åŸºç¡€éª¨æ¶" class="headerlink" title="åŸºç¡€éª¨æ¶"></a>åŸºç¡€éª¨æ¶</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">if</span> (isgameOver) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Stack(</span><br><span class="line">          children: [</span><br><span class="line">            _gamePanel(context),<span class="comment">//ä¸»æ¸¸æˆç•Œé¢</span></span><br><span class="line">            _gameReset(context)<span class="comment">//è’™ç‰ˆ</span></span><br><span class="line">          ],</span><br><span class="line">        ),DifficultyButton(),<span class="comment">//è®¾ç½®æŒ‰é’®</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        _gamePanel(context),<span class="comment">//ä¸»æ¸¸æˆç•Œé¢</span></span><br><span class="line">        DifficultyButton(),<span class="comment">//è®¾ç½®æŒ‰é’®</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–"><a href="#æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–" class="headerlink" title="æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–"></a>æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–</h2><h3 id="æ•°æ®æº"><a href="#æ•°æ®æº" class="headerlink" title="æ•°æ®æº"></a>æ•°æ®æº</h3><p>æ•°æ®æºæ˜¯ä¸€ä¸ª<code>Future&lt;List&lt;imglib.Image&gt;&gt;</code>ç±»å‹çš„åˆ—è¡¨ï¼Œä»–å­˜æ”¾ç€å°†å›¾ç‰‡åˆ‡å‰²æˆnå—çš„æ•°æ®</p><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">final</span> Future&lt;<span class="built_in">List</span>&lt;imglib.Image&gt;&gt; _pieces = splitImage(Assets.img1, n : SIZE);</span><br><span class="line">    _pieces.then((_pieces) &#123;</span><br><span class="line">    result = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    <span class="comment">//é¦–å…ˆå¤åˆ¶åˆ‡å‰²åçš„å›¾ç‰‡åˆ—è¡¨ï¼Œç”¨äºæ£€æŸ¥æœ€ç»ˆæ˜¯å¦æ‹¼å¥½</span></span><br><span class="line">    pieces = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    <span class="comment">//æ¸¸æˆæ“ä½œæ—¶æ‰€æ”¹å˜çš„åˆ—è¡¨</span></span><br><span class="line">    pieces.shuffle(Random());</span><br><span class="line">    <span class="comment">//å°†åˆ—è¡¨æ‰“ä¹±</span></span><br><span class="line">    notifyListeners();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡åˆ‡å‰²"><a href="#å›¾ç‰‡åˆ‡å‰²" class="headerlink" title="å›¾ç‰‡åˆ‡å‰²"></a>å›¾ç‰‡åˆ‡å‰²</h2><p>ä»£ç æ¥æº:<a href="https://stackoverflow.com/questions/58363167/how-to-split-divide-image-in-parts-in-flutter">How to split&#x2F;divide image in parts in Flutter - Stack Overflow</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:math&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:typed_data&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:image/image.dart&#x27;</span> <span class="keyword">as</span> imglib;</span><br><span class="line"></span><br><span class="line">Future&lt;<span class="built_in">List</span>&lt;imglib.Image&gt;&gt; splitImage(<span class="built_in">String</span> path, &#123;<span class="built_in">int</span> n = <span class="number">3</span>&#125;) <span class="keyword">async</span> &#123;</span><br><span class="line">  imglib.Image? image = <span class="keyword">await</span> decodeAsset(path);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;imglib.Image&gt; pieces = [];</span><br><span class="line">  <span class="built_in">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">int</span> width = (image!.width / n).floor();</span><br><span class="line">  <span class="built_in">int</span> height = (image.height / n).floor();</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">      imglib.Image croppedImage = imglib.copyCrop(image, x: x, y: y, width: width, height: height);</span><br><span class="line">      pieces.add(croppedImage);</span><br><span class="line">      x += width;</span><br><span class="line">    &#125;</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    y += height;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> pieces;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Future&lt;imglib.Image?&gt; decodeAsset(<span class="built_in">String</span> path) <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="keyword">final</span> ByteData data = <span class="keyword">await</span> rootBundle.load(path);</span><br><span class="line">  <span class="keyword">final</span> Uint8List bytes = data.buffer.asUint8List();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> imglib.Image? image = imglib.decodeImage(bytes);</span><br><span class="line">  <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡æ˜¾ç¤º"><a href="#å›¾ç‰‡æ˜¾ç¤º" class="headerlink" title="å›¾ç‰‡æ˜¾ç¤º"></a>å›¾ç‰‡æ˜¾ç¤º</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Widget PuzzlePart(imglib.Image img, <span class="built_in">int</span> index) &#123;</span><br><span class="line">  <span class="keyword">return</span> Builder(</span><br><span class="line">    builder: (BuildContext context) &#123;</span><br><span class="line">      ObjectKey key = ObjectKey(index); <span class="comment">// åˆ›å»ºä¸€ä¸ªObjectKeyä½œä¸ºè¯¥ç»„ä»¶çš„key</span></span><br><span class="line">      Widget puzzleWidget = Container(</span><br><span class="line">        key: key,</span><br><span class="line">        child: Image.memory(imglib.encodeJpg(img)),</span><br><span class="line">      );</span><br><span class="line">      <span class="comment">// è·å–æ‹¼å›¾ç»„ä»¶çš„ä¸­å¿ƒä½ç½®</span></span><br><span class="line">      WidgetsBinding.instance!.addPostFrameCallback((timeStamp) &#123;</span><br><span class="line">        RenderBox renderBox = context.findRenderObject() <span class="keyword">as</span> RenderBox;</span><br><span class="line">        Offset center = renderBox.localToGlobal(</span><br><span class="line">            renderBox.size.center(Offset.zero));</span><br><span class="line">        <span class="comment">// å°†æ‹¼å›¾ç»„ä»¶çš„ä¸­å¿ƒä½ç½®å­˜å‚¨åˆ°Mapä¸­</span></span><br><span class="line">        puzzleCenterPositions[key] = center;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">return</span> puzzleWidget;</span><br><span class="line">    &#125;,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«"><a href="#æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«" class="headerlink" title="æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«"></a>æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«</h2><p>GridViewå‚è€ƒæ–‡ç« <a href="https://juejin.cn/post/6844903889502732295#heading-1">Flutterç½‘æ ¼å‹å¸ƒå±€ - GridViewç¯‡ - æ˜é‡‘ (juejin.cn)</a></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">      onPanDown: (DragDownDetails details) &#123;</span><br><span class="line">        lastPositon = details.globalPosition;</span><br><span class="line">        _firstTouch = <span class="keyword">true</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      onPanUpdate: (details) &#123;</span><br><span class="line">        <span class="keyword">final</span> curPosition = details.globalPosition;</span><br><span class="line">        <span class="built_in">double</span> min = (puzzleCenterPositions[ObjectKey(<span class="number">0</span>)]! - puzzleCenterPositions[ObjectKey(<span class="number">1</span>)]!).distance/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> ((curPosition - lastPositon).distance &gt; min)</span><br><span class="line">        moveJudge(lastPositon, curPosition);</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      child: ...ç•¥</span><br><span class="line">      ),</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h2 id="å›¾ç‰‡çš„ç§»åŠ¨ä¸åˆå¹¶"><a href="#å›¾ç‰‡çš„ç§»åŠ¨ä¸åˆå¹¶" class="headerlink" title="å›¾ç‰‡çš„ç§»åŠ¨ä¸åˆå¹¶"></a>å›¾ç‰‡çš„ç§»åŠ¨ä¸åˆå¹¶</h2><p>æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œé¦–å…ˆç¬¬ä¸€ä¸ª<code>for</code>å¾ªç¯æ‰¾åˆ°ä½ æƒ³æ‹–åŠ¨çš„æ–¹å—ï¼Œç¬¬äºŒä¸ª<code>for</code>å¾ªç¯æ‰¾åˆ°ä½ æƒ³æ‹–åŠ¨çš„ä½ç½®ï¼Œæœ€åäº¤äº’ä¸¤ä¸ªæ–¹å—çš„ä½ç½®</p><p>è¿™é‡Œçš„å…³é”®å°±è¿™æ ·å¯¹<code>min</code>çš„è®¾ç½®å’Œæ‰‹åŠ¿è¯†åˆ«ä¸­<code>curPosition</code>ä¼ å…¥çš„è®¾ç½®</p><ul><li>å¦‚æœminå¤ªå¤§ï¼Œå®¹æ˜“é€ æˆç§»åŠ¨æ··ä¹±</li><li>å¦‚æœminå¤ªå°ï¼Œå®¹æ˜“é€ æˆç§»åŠ¨æ•æ„Ÿåº¦è¿‡ä½</li><li>curPositionåŒç†</li></ul><p>æˆ‘çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯</p><ul><li>é€šè¿‡æ‹¼å›¾é—´çš„è·ç¦»æ¥è°ƒè¯•æœ€ä½³çš„<code>min</code>å’Œ<code>cur</code>ä¼ å…¥æ¡ä»¶</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> moveJudge(Offset last, Offset cur) &#123;</span><br><span class="line">  <span class="built_in">int</span> SIZE = Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).SIZE;</span><br><span class="line">  <span class="built_in">double</span> min = (puzzleCenterPositions[ObjectKey(<span class="number">0</span>)]! - puzzleCenterPositions[ObjectKey(<span class="number">1</span>)]!).distance/<span class="number">1.5</span>;</span><br><span class="line">  <span class="keyword">if</span> (_firstTouch)&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; SIZE * SIZE; i++) &#123;</span><br><span class="line">      <span class="comment">//print((puzzleCenterPositions[ObjectKey(i)]! - cur).distance);</span></span><br><span class="line">      <span class="keyword">if</span> (puzzleCenterPositions[ObjectKey(i)] != <span class="keyword">null</span> &amp;&amp;(puzzleCenterPositions[ObjectKey(i)]! - last).distance &lt; min) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> j = <span class="number">0</span>; j &lt;SIZE*SIZE;j++) &#123;</span><br><span class="line">          <span class="comment">//print((puzzleCenterPositions[ObjectKey(j)]! - cur).distance);</span></span><br><span class="line">          <span class="keyword">if</span>(puzzleCenterPositions[ObjectKey(j)] != <span class="keyword">null</span> &amp;&amp;(puzzleCenterPositions[ObjectKey(j)]! - cur).distance &lt; min ) &#123;</span><br><span class="line">            Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).move(i, j);</span><br><span class="line">            isgameOver = Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).checkEnd(SIZE * SIZE);</span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _firstTouch = <span class="keyword">false</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­æ¸¸æˆç»“æŸ"><a href="#åˆ¤æ–­æ¸¸æˆç»“æŸ" class="headerlink" title="åˆ¤æ–­æ¸¸æˆç»“æŸ"></a>åˆ¤æ–­æ¸¸æˆç»“æŸ</h2><p>æ¯æ¬¡ç§»åŠ¨éƒ½ä¼šè°ƒç”¨GameMapçš„checkEndæ–¹æ³•æ£€æŸ¥æ˜¯å¦æ¸¸æˆç»“æŸï¼Œè‹¥ç»“æŸè’™ç‰ˆè¦†ç›–</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">if</span> (isgameOver) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Stack(</span><br><span class="line">          children: [</span><br><span class="line">            _gamePanel(context),</span><br><span class="line">            _gameReset(context)</span><br><span class="line">          ],</span><br><span class="line">        ),DifficultyButton(),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        _gamePanel(context),</span><br><span class="line">        DifficultyButton(),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Widget _gameReset(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> AspectRatio(</span><br><span class="line">      aspectRatio: <span class="number">1.0</span>,</span><br><span class="line">      child: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: [</span><br><span class="line">            <span class="keyword">const</span> Text(<span class="string">&quot;Game Over&quot;</span>,style: TextStyle(</span><br><span class="line">              fontSize: <span class="number">50</span>,</span><br><span class="line">              color: Colors.white70</span><br><span class="line">            ),),</span><br><span class="line">            InkWell(</span><br><span class="line">                onTap: () &#123;</span><br><span class="line">                  resetGame();</span><br><span class="line">                &#125;,</span><br><span class="line">                child: <span class="keyword">const</span> Text(<span class="string">&quot;Reset&quot;</span>,style: TextStyle(</span><br><span class="line">                    fontSize: <span class="number">30</span>,</span><br><span class="line">                    color: Colors.white70</span><br><span class="line">                ),),)</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°å¼€å§‹æ¸¸æˆ"><a href="#é‡æ–°å¼€å§‹æ¸¸æˆ" class="headerlink" title="é‡æ–°å¼€å§‹æ¸¸æˆ"></a>é‡æ–°å¼€å§‹æ¸¸æˆ</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> resetGame() &#123;</span><br><span class="line">   setState(() &#123;</span><br><span class="line">     Provider.of&lt;GameMap&gt;(context, listen: <span class="keyword">false</span>).init();</span><br><span class="line">     isgameOver = <span class="keyword">false</span>;</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">final</span> Future&lt;<span class="built_in">List</span>&lt;imglib.Image&gt;&gt; _pieces = splitImage(Assets.img1, n : SIZE);</span><br><span class="line">    _pieces.then((_pieces) &#123;</span><br><span class="line">    result = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    pieces = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    pieces.shuffle(Random());</span><br><span class="line">    notifyListeners();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç»Ÿä¸€çŠ¶æ€ç®¡ç†"><a href="#ç»Ÿä¸€çŠ¶æ€ç®¡ç†" class="headerlink" title="ç»Ÿä¸€çŠ¶æ€ç®¡ç†"></a>ç»Ÿä¸€çŠ¶æ€ç®¡ç†</h2><p>privideå‚è€ƒæ–‡ç« </p><p>- <a href="https://juejin.cn/post/7015887922117214238#heading-9">Flutter ProviderçŠ¶æ€ç®¡ç†â€”å…«ç§æä¾›è€…ä½¿ç”¨åˆ†æ - æ˜é‡‘ (juejin.cn)</a></p><p>- <a href="https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink">https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink</a></p><p>é¦–å…ˆmainæ–¹æ³•æ”¹ä¸º<code>ChangeNotifierProvider</code>ç»„ä»¶</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(ChangeNotifierProvider(</span><br><span class="line">      create: (_) =&gt; GameMap(),</span><br><span class="line">      child: MaterialApp(</span><br><span class="line">        home: MyGame(),</span><br><span class="line">      )</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶å<code>GameMap</code>åŠ ä¸Š<code>ChangeNotifier</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GameMap</span> <span class="title">with</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line">     <span class="built_in">int</span> SIZE = <span class="number">3</span>;</span><br><span class="line">  Future&lt;imglib.Image?&gt; _none = decodeAsset(Assets.none);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> firstTouch = <span class="keyword">false</span>;</span><br><span class="line">  <span class="built_in">List</span> result = [];</span><br><span class="line">  <span class="built_in">List</span> pieces = [];</span><br><span class="line">  <span class="built_in">int</span> one = <span class="number">1</span>;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">final</span> Future&lt;<span class="built_in">List</span>&lt;imglib.Image&gt;&gt; _pieces = splitImage(Assets.img1, n : SIZE);</span><br><span class="line">    _pieces.then((_pieces) &#123;</span><br><span class="line">    result = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    pieces = <span class="built_in">List</span>.from(_pieces);</span><br><span class="line">    pieces.shuffle(Random());</span><br><span class="line">    notifyListeners();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  setTouch() &#123;</span><br><span class="line">    firstTouch = !firstTouch;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  checkEnd(<span class="built_in">int</span> size) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (result[i] != pieces[i]) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  imglib.Image <span class="keyword">get</span>(<span class="built_in">int</span> i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (one == <span class="number">1</span>) &#123;</span><br><span class="line">      init();</span><br><span class="line">      one = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> pieces[i];</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      imglib.Image img = imglib.Image.empty();</span><br><span class="line">      <span class="keyword">return</span> img;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  move(<span class="built_in">int</span> pre, <span class="built_in">int</span> next) &#123;</span><br><span class="line">    imglib.Image pre1 = pieces[pre];</span><br><span class="line">    pieces[pre] = pieces[next];</span><br><span class="line">    pieces[next] = pre1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨Panelè°ƒç”¨GameMapæ–¹æ³•çš„æ—¶å€™åŠ ä¸Š<code>Provide.of&lt;GameMap&gt;(context, listen:false)</code></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2048</title>
      <link href="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/"/>
      <url>/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/</url>
      
        <content type="html"><![CDATA[<p>GitHubä»“åº“:<a href="https://github.com/xxbaizero0/game_2048">xxbaizero0&#x2F;game_2048: Flutter game (github.com)</a></p><p>AspectRatioå‚è€ƒæ–‡ç« </p><ul><li><a href="https://juejin.cn/post/6844903856988487693#heading-1">Flutter çº¦æŸå®½é«˜æ¯”çš„æ§ä»¶ AspectRatio - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://juejin.cn/post/7112017871949004807#heading-1">flutterç³»åˆ—ä¹‹:æŒ‰æ¯”ä¾‹ç¼©æ”¾çš„AspectRatioå’ŒFractionallySizedBox - æ˜é‡‘ (juejin.cn)</a></li></ul><p>GridViewå‚è€ƒæ–‡ç« <a href="https://juejin.cn/post/6844903889502732295#heading-1">Flutterç½‘æ ¼å‹å¸ƒå±€ - GridViewç¯‡ - æ˜é‡‘ (juejin.cn)</a></p><p>GestureDetectorå‚è€ƒæ–‡ç«  <a href="https://juejin.cn/post/7009859979096096804#heading-16">Flutter æ‰‹åŠ¿ç³»åˆ—æ•™ç¨‹â€”GestureDetector - æ˜é‡‘ (juejin.cn)</a></p><p>shared_preferenceså‚è€ƒæ–‡ç«  <a href="https://juejin.cn/post/7012840579964862471">Flutter shared_preferencesçš„åŸºæœ¬ä½¿ç”¨ã€æºç åˆ†æã€å°è£… - æ˜é‡‘ (juejin.cn)</a></p><p>privideå‚è€ƒæ–‡ç« </p><ul><li><a href="https://juejin.cn/post/7015887922117214238#heading-9">Flutter ProviderçŠ¶æ€ç®¡ç†â€”å…«ç§æä¾›è€…ä½¿ç”¨åˆ†æ - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink">https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink</a></li></ul><p>é¢„è§ˆ</p><p><img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/2024-03-14-22-16-04.gif" alt="2024-03-14-22-16-04"></p><ul><li>UIç•Œé¢<ul><li>Headeréƒ¨åˆ†</li><li>Paneléƒ¨åˆ†</li></ul></li><li>æ¸¸æˆé€»è¾‘<ul><li>æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–</li><li>æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«</li><li>æ•°å­—å—çš„ç§»åŠ¨ä¸åˆå¹¶</li><li>äº§ç”Ÿæ–°çš„æ•°å­—å—</li><li>åˆ¤æ–­æ¸¸æˆç»“æŸ</li><li>é‡æ–°å¼€å§‹æ¸¸æˆ</li></ul></li></ul><h1 id="UIç•Œé¢"><a href="#UIç•Œé¢" class="headerlink" title="UIç•Œé¢"></a>UIç•Œé¢</h1><p><img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/image-20240313211804961.png"></p><h2 id="Headeréƒ¨åˆ†"><a href="#Headeréƒ¨åˆ†" class="headerlink" title="Headeréƒ¨åˆ†"></a>Headeréƒ¨åˆ†</h2><p>ç®€å•åˆ†æ:</p><ul><li>ä¸»è¦æ˜¯Rowç»“æ„ï¼Œchildrenå·¦å³å‡ä¸ºColumnç»“æ„</li><li>ä»£ç :</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Row(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">20</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">            child: Column(</span><br><span class="line">              children: [</span><br><span class="line">                <span class="keyword">const</span> Text(<span class="string">&quot;2048&quot;</span>,</span><br><span class="line">                  style: TextStyle(</span><br><span class="line">                    fontSize: <span class="number">75</span>,</span><br><span class="line">                    color: numColor,</span><br><span class="line">                    fontWeight: FontWeight.bold</span><br><span class="line">                ),),</span><br><span class="line">                SizedBox(height: <span class="number">12</span>,),</span><br><span class="line">                newGame()</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">40</span>, <span class="number">25</span>, <span class="number">0</span>),</span><br><span class="line">            child: Column(</span><br><span class="line">                crossAxisAlignment: CrossAxisAlignment.end,</span><br><span class="line">                children: [</span><br><span class="line">                  NumCard(text:<span class="string">&#x27;SCORE&#x27;</span>, score:currentScore),</span><br><span class="line">                  <span class="keyword">const</span> SizedBox(height: <span class="number">10</span>,),</span><br><span class="line">                  NumCard(text:<span class="string">&#x27;HIGHEST&#x27;</span>, score:highestScore),</span><br><span class="line">                ]</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ]</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Container newGame() &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">    height: <span class="number">60</span>,</span><br><span class="line">    width: <span class="number">160</span>,</span><br><span class="line">    decoration: BoxDecoration(</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">5</span>),</span><br><span class="line">        color: newGameColor</span><br><span class="line">    ),</span><br><span class="line">    child: InkWell(</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        <span class="comment">// é‡æ–°å¼€å§‹æ¸¸æˆï¼Œè¿™é‡Œçš„é€»è¾‘ä¹‹åå†å®ç°</span></span><br><span class="line">      &#125;,</span><br><span class="line">      child: <span class="keyword">const</span> Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: [</span><br><span class="line">        Text(<span class="string">&#x27;NEW GAME&#x27;</span>, style: TextStyle(</span><br><span class="line">            color: whiteText, fontSize: <span class="number">18</span>, fontWeight: FontWeight.bold)),</span><br><span class="line">        SizedBox(height: <span class="number">1</span>,)</span><br><span class="line">      ],</span><br><span class="line">    ),</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Container NumCard(&#123;<span class="built_in">String?</span> text, <span class="built_in">int?</span> score&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> Container(</span><br><span class="line">      height: <span class="number">80</span>,</span><br><span class="line">      width: <span class="number">130</span>,</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">          borderRadius: BorderRadius.circular(<span class="number">5</span>),</span><br><span class="line">          color: numCardColor</span><br><span class="line">      ),</span><br><span class="line">      child: Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">        children: [</span><br><span class="line">          Text(text!, style: <span class="keyword">const</span> TextStyle(</span><br><span class="line">              color: whiteText, fontSize: <span class="number">22</span>, fontWeight: FontWeight.bold)),</span><br><span class="line">          <span class="keyword">const</span> SizedBox(height: <span class="number">1</span>,),</span><br><span class="line">          Text(score!.toString(), style: <span class="keyword">const</span> TextStyle(color: Colors.white,</span><br><span class="line">              fontSize: <span class="number">26</span>,</span><br><span class="line">              fontWeight: FontWeight.bold),)</span><br><span class="line">        ],</span><br><span class="line">      )</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Paneléƒ¨åˆ†"><a href="#Paneléƒ¨åˆ†" class="headerlink" title="Paneléƒ¨åˆ†"></a>Paneléƒ¨åˆ†</h2><h3 id="åˆ†æï¼š"><a href="#åˆ†æï¼š" class="headerlink" title="åˆ†æï¼š"></a>åˆ†æï¼š</h3><ul><li>é¦–å…ˆå®ç°åº•éƒ¨çš„æ·±è‰²èƒŒæ™¯ï¼Œæ¥ç€æ•°ç»„æ˜ å°„åˆ°æ¯ä¸€ä¸ªå°æ–¹å—ï¼Œå…¶ä¸­æ˜ å°„é€šè¿‡<code>GridView</code>ç»„ä»¶å¿«é€Ÿçš„æ„å»ºå‡º4x4çš„ç½‘æ ¼ï¼Œè€Œ<code>GridView</code>å¸¸ä¸<code>AspectRatio</code>ç»„ä»¶ä¸€èµ·æ­é…(GridViewä½œä¸ºARçš„child)</li></ul><blockquote><p>åœ¨GridView ä¸­ï¼Œè¦æ§åˆ¶ä½æ¯ä¸€å¼ å›¾ç‰‡æˆ–æ–¹å—çš„å®½é«˜æ¯”ã€‚</p><p>å¦‚æœæ²¡æœ‰AspectRatio æ§ä»¶åˆ™æ¯”è¾ƒéš¾å®ç°ï¼Œå› ä¸ºè¦ç®—é—´è·ä¹‹ç±»çš„ã€‚</p><p>ä½†æ˜¯æœ‰äº† AspectRatioï¼Œæˆ‘ä»¬çš„ä»£ç å°±ä¼šç®€å•å¾ˆå¤š</p></blockquote><h3 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h3><p>AspectRatioå‚è€ƒæ–‡ç« </p><ul><li><a href="https://juejin.cn/post/6844903856988487693#heading-1">Flutter çº¦æŸå®½é«˜æ¯”çš„æ§ä»¶ AspectRatio - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://juejin.cn/post/7112017871949004807#heading-1">flutterç³»åˆ—ä¹‹:æŒ‰æ¯”ä¾‹ç¼©æ”¾çš„AspectRatioå’ŒFractionallySizedBox - æ˜é‡‘ (juejin.cn)</a></li></ul><p>GridViewå‚è€ƒæ–‡ç« <a href="https://juejin.cn/post/6844903889502732295#heading-1">Flutterç½‘æ ¼å‹å¸ƒå±€ - GridViewç¯‡ - æ˜é‡‘ (juejin.cn)</a></p><h4 id="AspectRatio-æ§ä»¶"><a href="#AspectRatio-æ§ä»¶" class="headerlink" title="AspectRatio æ§ä»¶"></a>AspectRatio æ§ä»¶</h4><p>AspectRatioæ„é€ å‡½æ•°</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AspectRatio(&#123;</span><br><span class="line">  Key? key,</span><br><span class="line">  <span class="keyword">required</span> <span class="keyword">this</span>.aspectRatio,</span><br><span class="line">  Widget? child,</span><br><span class="line">&#125;) : <span class="keyword">assert</span>(aspectRatio != <span class="keyword">null</span>),</span><br><span class="line">     <span class="keyword">assert</span>(aspectRatio &gt; <span class="number">0.0</span>),</span><br><span class="line">     <span class="comment">// can&#x27;t test isFinite because that&#x27;s not a constant expression</span></span><br><span class="line">     <span class="keyword">super</span>(key: key, child: child);</span><br></pre></td></tr></table></figure><p>AspectRatioå±æ€§å’Œè¯´æ˜</p><table><thead><tr><th>å­—æ®µ</th><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>aspectRatio</td><td>double</td><td>çºµæ¨ªæ¯”ä¾‹</td></tr><tr><td>child</td><td>Widget</td><td>å­ç»„ä»¶</td></tr></tbody></table><p> aspectRatioã€child</p><p><code>aspectRatio</code> ä¸»è¦ç”¨æ¥è®¾å®šå­ç»„ä»¶çš„çºµæ¨ªæ¯”ä¾‹ï¼Œè€Œ<code>child</code>å°±æ˜¯éœ€è¦è¢«è®¾å®šçºµæ¨ªæ¯”ä¾‹çš„å­ç»„ä»¶ã€‚</p><h4 id="GridViewç»„ä»¶"><a href="#GridViewç»„ä»¶" class="headerlink" title="GridViewç»„ä»¶"></a>GridViewç»„ä»¶</h4><p><code>GridView</code>ä¸€å…±æœ‰5ä¸ªæ„é€ å‡½æ•°ï¼š<code>GridView</code>ï¼Œ<code>GridView.builder</code>ï¼Œ<code>GridView.count</code>ï¼Œ<code>GridView.extent</code>å’Œ<code>GridView.custom</code></p><p>æˆ‘åœ¨æ¸¸æˆé‡Œç”¨çš„æ˜¯<code>GridView.builder</code></p><p>æ¥çœ‹ä¸‹<code>GridView</code>æ„é€ å‡½æ•°ï¼ˆå·²çœç•¥ä¸å¸¸ç”¨å±æ€§ï¼‰ï¼š</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GridView(&#123;</span><br><span class="line">  Key key,</span><br><span class="line">  Axis scrollDirection = Axis.vertical,</span><br><span class="line">  <span class="built_in">bool</span> reverse = <span class="keyword">false</span>,</span><br><span class="line">  ScrollController controller,</span><br><span class="line">  ScrollPhysics physics,</span><br><span class="line">  <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>,</span><br><span class="line">  EdgeInsetsGeometry padding,</span><br><span class="line">  <span class="meta">@required</span> <span class="keyword">this</span>.gridDelegate,</span><br><span class="line">  <span class="built_in">double</span> cacheExtent,</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>é‡ç‚¹å…³æ³¨ä¸‹<code>gridDelegate</code>è¿™ä¸ªå‚æ•°ï¼Œå®ƒå…¶å®æ˜¯<code>GridView</code>ç»„ä»¶å¦‚ä½•æ§åˆ¶æ’åˆ—å­å…ƒç´ çš„ä¸€ä¸ªå§”æ‰˜ã€‚è·Ÿè¸ªæºç æˆ‘ä»¬å¯ä»¥åœ¨<a href="https://link.juejin.cn/?target=https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/widgets/scroll_view.dart%23L1531">scroll_view.dart</a>ä¸­çœ‹åˆ°ï¼Œ<code>gridDelegate</code>çš„ç±»å‹æ˜¯<code>SliverGridDelegate</code>ï¼Œè¿›ä¸€æ­¥è·Ÿè¸ªè¿›<a href="https://link.juejin.cn/?target=https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/rendering/sliver_grid.dart%23L252">sliver_grid.dart</a>å¯ä»¥çœ‹åˆ°<code>SliverGridDelegate</code>å…¶å®æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œä¸”ä¸€å…±æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š</p><ul><li><code>SliverGridDelegateWithFixedCrossAxisCount</code>ï¼šç”¨äºå›ºå®šåˆ—æ•°çš„åœºæ™¯ï¼›</li><li><code>SliverGridDelegateWithMaxCrossAxisExtent</code>ï¼šç”¨äºå­å…ƒç´ æœ‰æœ€å¤§å®½åº¦é™åˆ¶çš„åœºæ™¯ï¼›</li></ul><p>æ¥çœ‹ä¸‹å…¶æ„é€ å‡½æ•°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">å¤åˆ¶ä»£ç SliverGridDelegateWithFixedCrossAxisCount(&#123;</span><br><span class="line">  @required this.crossAxisCount,</span><br><span class="line">  this.mainAxisSpacing = 0.0,</span><br><span class="line">  this.crossAxisSpacing = 0.0,</span><br><span class="line">  this.childAspectRatio = 1.0,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li><code>crossAxisCount</code>ï¼šåˆ—æ•°ï¼Œå³ä¸€è¡Œæœ‰å‡ ä¸ªå­å…ƒç´ ï¼›</li><li><code>mainAxisSpacing</code>ï¼šä¸»è½´æ–¹å‘ä¸Šçš„ç©ºéš™é—´è·ï¼›</li><li><code>crossAxisSpacing</code>ï¼šæ¬¡è½´æ–¹å‘ä¸Šçš„ç©ºéš™é—´è·ï¼›</li><li><code>childAspectRatio</code>ï¼šå­å…ƒç´ çš„å®½é«˜æ¯”ä¾‹ã€‚</li></ul><p><img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/16befc29ae31df16tplv-t2oaga2asx-jj-mark3024000q75.webp" alt="å‚æ•°å«ä¹‰è§£é‡Š"></p><p>æƒ³å¿…çœ‹åˆ°ä¸Šé¢çš„ç¤ºä¾‹å›¾ï¼Œä½ å°±ç§’æ‡‚å…¶ä¸­å„ä¸ªå‚æ•°çš„å«ä¹‰äº†ã€‚ä¸è¿‡ï¼Œè¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š<strong>å¦‚æœä½ çš„å­å…ƒç´ å®½é«˜æ¯”ä¾‹ä¸ä¸º1ï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦è®¾ç½®<code>childAspectRatio</code>å±æ€§</strong>ã€‚</p><p>è¿˜è®°å¾—ä¹‹å‰<code>GridView</code>çš„å„ç§æ„é€ å‡½æ•°å—ï¼Ÿå…¶å®ï¼š</p><ol><li><code>GridView</code>é»˜è®¤æ„é€ å‡½æ•°å¯ä»¥ç±»æ¯”äº<code>ListView</code>é»˜è®¤æ„é€ å‡½æ•°ï¼Œé€‚ç”¨äº<strong>æœ‰é™ä¸ªæ•°å­å…ƒç´ </strong>çš„åœºæ™¯ï¼Œå› ä¸º<code>GridView</code>ç»„ä»¶ä¼šä¸€æ¬¡æ€§å…¨éƒ¨æ¸²æŸ“<code>children</code>ä¸­çš„å­å…ƒç´ ç»„ä»¶ï¼›</li><li><code>GridView.builder</code>æ„é€ å‡½æ•°å¯ä»¥ç±»æ¯”äº<code>ListView.builder</code>æ„é€ å‡½æ•°ï¼Œé€‚ç”¨äº<strong>é•¿åˆ—è¡¨</strong>çš„åœºæ™¯ï¼Œå› ä¸º<code>GridView</code>ç»„ä»¶ä¼šæ ¹æ®å­å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å±å¹•å†…è€ŒåŠ¨æ€åˆ›å»ºé”€æ¯ï¼Œå‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæ›´é«˜æ•ˆæ¸²æŸ“ï¼›</li><li><code>GridView.count</code>æ„é€ å‡½æ•°æ˜¯<code>GrdiView</code>ä½¿ç”¨<code>SliverGridDelegateWithFixedCrossAxisCount</code>çš„ç®€å†™ï¼ˆè¯­æ³•ç³–ï¼‰ï¼Œæ•ˆæœå®Œå…¨ä¸€è‡´ï¼›</li><li><code>GridView.extent</code>æ„é€ å‡½æ•°å¼<code>GridView</code>ä½¿ç”¨<code>SliverGridDelegateWithMaxCrossAxisExtent</code>çš„ç®€å†™ï¼ˆè¯­æ³•ç³–ï¼‰ï¼Œæ•ˆæœå®Œå…¨ä¸€è‡´ã€‚</li></ol><p>å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®ƒä½¿ç”¨åˆ°<code>GridView.count</code>æ„é€ å‡½æ•°æ¨¡ä»¿ç¾å›¢å¤–å–é¦–é¡µæœåŠ¡åˆ—è¡¨ï¼ˆæœåŠ¡èœå•é¡¹çš„ä»£ç å¯ä»¥çœ‹<a href="https://link.juejin.cn/?target=https://github.com/SmallStoneSK/flutter_training_app/blob/master/lib/grid_view/service_item.dart">è¿™é‡Œ</a>ï¼Œä¹Ÿç®—æ˜¯å¯¹åŸºç¡€ç»„ä»¶ä½¿ç”¨çš„è¿›ä¸€æ­¥å·©å›ºï¼‰ï¼š</p><p><strong>ä»£ç ï¼ˆ<a href="https://link.juejin.cn/?target=https://github.com/SmallStoneSK/flutter_training_app/blob/master/lib/grid_view/service_categories.dart">æ–‡ä»¶åœ°å€</a>ï¼‰</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GridView.count(</span><br><span class="line">  crossAxisCount: <span class="number">5</span>,</span><br><span class="line">  padding: EdgeInsets.symmetric(vertical: <span class="number">0</span>),</span><br><span class="line">  children: serviceList.map((item) =&gt; ServiceItem(data: item)).toList(),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/<span class="strong">****</span><span class="strong">****</span><span class="strong">****</span><span class="emphasis">*/</span></span></span></span><br><span class="line"><span class="comment">/* å®Œå…¨ç­‰åŒäº */</span></span><br><span class="line"><span class="comment"><span class="language-markdown"><span class="emphasis">/<span class="strong">****</span><span class="strong">****</span><span class="strong">****</span>/</span></span></span></span><br><span class="line"></span><br><span class="line">GridView(</span><br><span class="line">  padding: EdgeInsets.symmetric(vertical: <span class="number">0</span>),</span><br><span class="line">  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">    crossAxisCount: <span class="number">5</span>,</span><br><span class="line">  ),</span><br><span class="line">  children: serviceList.map((item) =&gt; ServiceItem(data: item)).toList(),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>é¢„è§ˆ</strong></p><p>  <img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/16befc32ce4e1b8btplv-t2oaga2asx-jj-mark3024000q75.webp" alt="img"></p><p>å†æ¥çœ‹ä¸€ä¸ªæ¨¡ä»¿å–œé©¬æ‹‰é›…ä¸­ç›¸å£°åˆ—è¡¨ç”¨åˆ°<code>GridView.builder</code>åˆ›å»ºç½‘æ ¼å¸ƒå±€çš„å…·ä½“ä¾‹å­ï¼ˆç›¸å£°å¡ç‰‡çš„ä»£ç å¯ä»¥çœ‹<a href="https://link.juejin.cn/?target=https://github.com/SmallStoneSK/flutter_training_app/blob/master/lib/grid_view/programme.dart">è¿™é‡Œ</a>ï¼‰ï¼š</p><p><strong>ä»£ç ï¼ˆ<a href="https://link.juejin.cn/?target=https://github.com/SmallStoneSK/flutter_training_app/blob/master/lib/grid_view/guess_like_list.dart">æ–‡ä»¶åœ°å€</a>ï¼‰</strong></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">GridView.builder(</span><br><span class="line">  <span class="comment">// è®© GridView çš„å¤§å°è‡ªåŠ¨é€‚åº”å­é¡¹çš„å¤§å°</span></span><br><span class="line">  shrinkWrap: <span class="keyword">true</span>,</span><br><span class="line">  <span class="comment">// è®¾ç½®å­é¡¹çš„æ•°é‡ä¸º programmeList çš„é•¿åº¦</span></span><br><span class="line">  itemCount: programmeList.length,</span><br><span class="line">  <span class="comment">// ç¦ç”¨æ»šåŠ¨åŠŸèƒ½</span></span><br><span class="line">  physics: NeverScrollableScrollPhysics(),</span><br><span class="line">  <span class="comment">// è®¾ç½®å­é¡¹çš„å†…è¾¹è·</span></span><br><span class="line">  padding: EdgeInsets.symmetric(horizontal: <span class="number">16</span>),</span><br><span class="line">  <span class="comment">// è®¾ç½®ç½‘æ ¼å¸ƒå±€çš„å‚æ•°</span></span><br><span class="line">  gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">    <span class="comment">// æ¯è¡Œæ˜¾ç¤ºçš„åˆ—æ•°</span></span><br><span class="line">    crossAxisCount: <span class="number">3</span>,</span><br><span class="line">    <span class="comment">// ä¸»è½´æ–¹å‘ï¼ˆå‚ç›´æ–¹å‘ï¼‰ä¸Šçš„é—´è·</span></span><br><span class="line">    mainAxisSpacing: <span class="number">10</span>,</span><br><span class="line">    <span class="comment">// äº¤å‰è½´æ–¹å‘ï¼ˆæ°´å¹³æ–¹å‘ï¼‰ä¸Šçš„é—´è·</span></span><br><span class="line">    crossAxisSpacing: <span class="number">10</span>,</span><br><span class="line">    <span class="comment">// å­é¡¹çš„çºµæ¨ªæ¯”</span></span><br><span class="line">    childAspectRatio: <span class="number">0.7</span>,</span><br><span class="line">  ),</span><br><span class="line">  <span class="comment">// æ„å»ºå­é¡¹çš„æ–¹æ³•</span></span><br><span class="line">  itemBuilder: (context, index) &#123;</span><br><span class="line">    <span class="comment">// è¿”å›ä¸€ä¸ª Programme ç»„ä»¶ï¼Œä¼ å…¥ç›¸åº”çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">return</span> Programme(data: programmeList[index]);</span><br><span class="line">  &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><strong>é¢„è§ˆ</strong></p><p>  <img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/16befc39b52fd061tplv-t2oaga2asx-jj-mark3024000q75.webp" alt="img"></p><h3 id="æˆ‘çš„å®ç°ï¼š"><a href="#æˆ‘çš„å®ç°ï¼š" class="headerlink" title="æˆ‘çš„å®ç°ï¼š"></a>æˆ‘çš„å®ç°ï¼š</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">AspectRatio(</span><br><span class="line">        aspectRatio: <span class="number">1.0</span>,</span><br><span class="line">        child: Container(</span><br><span class="line">          child: _buildGameFrame(</span><br><span class="line">              context,</span><br><span class="line">              Container(</span><br><span class="line">                padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">                decoration: BoxDecoration(</span><br><span class="line">                  color: bgColor2,</span><br><span class="line">                  borderRadius: BorderRadius.circular(<span class="number">10</span>),</span><br><span class="line">                ),</span><br><span class="line">                child: MediaQuery.removePadding(</span><br><span class="line">                  removeTop: <span class="keyword">true</span>,</span><br><span class="line">                  <span class="comment">/// <span class="language-markdown">GridView é»˜è®¤é¡¶éƒ¨ä¼šæœ‰ paddingï¼Œé€šè¿‡è¿™ä¸ªåˆ é™¤é¡¶éƒ¨ padding</span></span></span><br><span class="line">                  context: context,</span><br><span class="line">                  child: GridView.builder(</span><br><span class="line">                    physics: <span class="keyword">const</span> NeverScrollableScrollPhysics(),</span><br><span class="line">                    <span class="comment">/// <span class="language-markdown">ç¦ç”¨ GridView çš„æ»‘åŠ¨</span></span></span><br><span class="line">                    gridDelegate: <span class="keyword">const</span> SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">                      crossAxisCount: SIZE,</span><br><span class="line">                      childAspectRatio: <span class="number">1</span>,</span><br><span class="line">                      mainAxisSpacing: <span class="number">10</span>,</span><br><span class="line">                      crossAxisSpacing: <span class="number">10</span>,</span><br><span class="line">                    ),</span><br><span class="line">                    itemCount: SIZE * SIZE,</span><br><span class="line">                    itemBuilder: (context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">                      <span class="built_in">int</span> indexI = index ~/ SIZE;</span><br><span class="line">                      <span class="built_in">int</span> indexJ = index % SIZE;</span><br><span class="line">                      <span class="keyword">return</span> _buildGameCell(_gameMap.tile(indexI, indexJ));</span><br><span class="line">                    &#125;,</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br></pre></td></tr></table></figure><h1 id="æ¸¸æˆé€»è¾‘"><a href="#æ¸¸æˆé€»è¾‘" class="headerlink" title="æ¸¸æˆé€»è¾‘"></a>æ¸¸æˆé€»è¾‘</h1><h2 id="é¢œè‰²é…ç½®"><a href="#é¢œè‰²é…ç½®" class="headerlink" title="é¢œè‰²é…ç½®"></a>é¢œè‰²é…ç½®</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:ui&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> cornerRadius = <span class="number">8.0</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> moveInterval = <span class="number">.5</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">èƒŒæ™¯é¢œè‰²</span></span></span><br><span class="line"><span class="keyword">const</span> Color bgColor1 = Color(<span class="number">0xFFFAF8EF</span>);</span><br><span class="line"><span class="keyword">const</span> Color bgColor2 = Color.fromRGBO(<span class="number">182</span>,<span class="number">173</span>,<span class="number">156</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> Color bgColor3 = Color(<span class="number">0xFF8F7B65</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Color whiteText = Color.fromARGB(<span class="number">255</span>, <span class="number">246</span>, <span class="number">240</span>, <span class="number">229</span>);</span><br><span class="line"><span class="keyword">const</span> Color lightBrown = Color.fromARGB(<span class="number">255</span>, <span class="number">236</span>, <span class="number">224</span>, <span class="number">208</span>);</span><br><span class="line"><span class="keyword">const</span> Color numCardColor = Color.fromRGBO(<span class="number">187</span>,<span class="number">176</span>,<span class="number">160</span>,<span class="number">1</span>);</span><br><span class="line"><span class="keyword">const</span> Color newGameColor = Color.fromARGB(<span class="number">255</span>, <span class="number">147</span>, <span class="number">131</span>, <span class="number">117</span>);</span><br><span class="line"><span class="keyword">const</span> Color orange = Color.fromARGB(<span class="number">255</span>, <span class="number">245</span>, <span class="number">149</span>, <span class="number">99</span>);</span><br><span class="line"><span class="keyword">const</span> Color tileColor = Color.fromRGBO(<span class="number">203</span>,<span class="number">197</span>,<span class="number">178</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Color tan = Color.fromARGB(<span class="number">255</span>, <span class="number">238</span>, <span class="number">235</span>, <span class="number">218</span>);</span><br><span class="line"><span class="keyword">const</span> Color numColor = Color.fromARGB(<span class="number">255</span>, <span class="number">119</span>, <span class="number">110</span>, <span class="number">101</span>);</span><br><span class="line"><span class="keyword">const</span> Color greyText = Color.fromARGB(<span class="number">255</span>, <span class="number">119</span>, <span class="number">110</span>, <span class="number">101</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, Color&gt; numTileColor = &#123;</span><br><span class="line">  <span class="number">0</span>: Color.fromRGBO(<span class="number">203</span>,<span class="number">197</span>,<span class="number">178</span>,<span class="number">1</span>),</span><br><span class="line">  <span class="number">2</span>: tan,</span><br><span class="line">  <span class="number">4</span>: tan,</span><br><span class="line">  <span class="number">8</span>: Color.fromARGB(<span class="number">255</span>, <span class="number">242</span>, <span class="number">177</span>, <span class="number">121</span>),</span><br><span class="line">  <span class="number">16</span>: Color.fromARGB(<span class="number">255</span>, <span class="number">245</span>, <span class="number">149</span>, <span class="number">99</span>),</span><br><span class="line">  <span class="number">32</span>: Color.fromARGB(<span class="number">255</span>, <span class="number">246</span>, <span class="number">124</span>, <span class="number">95</span>),</span><br><span class="line">  <span class="number">64</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">246</span>, <span class="number">95</span>, <span class="number">64</span>),</span><br><span class="line">  <span class="number">128</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">235</span>, <span class="number">208</span>, <span class="number">117</span>),</span><br><span class="line">  <span class="number">256</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">237</span>, <span class="number">203</span>, <span class="number">103</span>),</span><br><span class="line">  <span class="number">512</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">236</span>, <span class="number">201</span>, <span class="number">85</span>),</span><br><span class="line">  <span class="number">1024</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">229</span>, <span class="number">194</span>, <span class="number">90</span>),</span><br><span class="line">  <span class="number">2048</span>: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">232</span>, <span class="number">192</span>, <span class="number">70</span>),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">Map</span>&lt;<span class="built_in">int</span>, Color&gt; numTextColor = &#123;</span><br><span class="line">  <span class="number">0</span>: Color.fromRGBO(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>),</span><br><span class="line">  <span class="number">2</span>: greyText,</span><br><span class="line">  <span class="number">4</span>: greyText,</span><br><span class="line">  <span class="number">8</span>: Colors.white,</span><br><span class="line">  <span class="number">16</span>: Colors.white,</span><br><span class="line">  <span class="number">32</span>: Colors.white,</span><br><span class="line">  <span class="number">64</span>: Colors.white,</span><br><span class="line">  <span class="number">128</span>: Colors.white,</span><br><span class="line">  <span class="number">256</span>: Colors.white,</span><br><span class="line">  <span class="number">512</span>: Colors.white,</span><br><span class="line">  <span class="number">1024</span>: Colors.white,</span><br><span class="line">  <span class="number">2048</span>: Colors.white,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç”¨å­—å…¸å°†æ•°å­—ä¸æ•°å­—èƒŒæ™¯è‰²å’Œæ•°å­—å­—ä½“è‰²å¯¹åº”èµ·æ¥ï¼Œæ–¹ä¾¿æ˜ å°„æ¸²æŸ“ã€‚</p><h2 id="åŸºæœ¬æ¡†æ¶"><a href="#åŸºæœ¬æ¡†æ¶" class="headerlink" title="åŸºæœ¬æ¡†æ¶"></a>åŸºæœ¬æ¡†æ¶</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">if</span> (_isGameOver) &#123;</span><br><span class="line">    <span class="keyword">return</span> Stack(</span><br><span class="line">      children: [</span><br><span class="line">        _buildGamePanel(context),</span><br><span class="line">        _buildGameOverMask(context),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> _buildGamePanel(context);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–"><a href="#æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–" class="headerlink" title="æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–"></a>æ•°æ®æºä¸æ¸¸æˆåˆå§‹åŒ–</h2><p>æœ¬æ¸¸æˆäºŒç»´åˆ—è¡¨ä¸ºæ•°æ®æºï¼Œé€šè¿‡<code>_buildGameCell</code>æ–¹æ³•æ˜ å°„æ¸²æŸ“</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Widget _buildGameCell(<span class="built_in">int</span> value) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        color: numTileColor[value],</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">5</span>)</span><br><span class="line">      ),</span><br><span class="line">      child: Center(</span><br><span class="line">        child: Text(</span><br><span class="line">          value == <span class="number">0</span> ? <span class="string">&#x27;&#x27;</span> : value.toString(),</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: numTextColor[value],</span><br><span class="line">            fontSize: <span class="number">40</span></span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    logic.reset(_gameMap);</span><br><span class="line">      <span class="comment">//æ•°ç»„æ¸…0ï¼Œgameoverè®¾ä¸ºfalse;</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _initGameMap();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">åˆå§‹åŒ–æ•°æ®</span></span></span><br><span class="line"><span class="keyword">void</span> _initGameMap() &#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">æ‰§è¡Œä¸¤æ¬¡éšæœº</span></span></span><br><span class="line">  _randomNewCellData(<span class="number">2</span>);</span><br><span class="line">  _randomNewCellData(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«"><a href="#æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«" class="headerlink" title="æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«"></a>æ»‘åŠ¨æ‰‹åŠ¿è¯†åˆ«</h2><p>GestureDetectorå‚è€ƒæ–‡ç«  <a href="https://juejin.cn/post/7009859979096096804#heading-16">Flutter æ‰‹åŠ¿ç³»åˆ—æ•™ç¨‹â€”GestureDetector - æ˜é‡‘ (juejin.cn)</a></p><p>å…¶åˆ†ä¸º</p><ul><li>å•å‡»æ‰‹åŠ¿</li><li>åŒå‡»æ‰‹åŠ¿</li><li>é•¿æŒ‰æ‰‹åŠ¿</li><li>å‚ç›´æ»‘åŠ¨æ‰‹åŠ¿</li><li>æ°´å¹³æ»‘åŠ¨æ‰‹åŠ¿</li><li>æ‹–åŠ¨æ‰‹åŠ¿</li><li>ç¼©æ”¾æ‰‹åŠ¿</li><li>å…¶ä»–æ‰‹åŠ¿</li></ul><p>æœ¬æ¥æˆ‘æ˜¯ä½¿ç”¨å‚ç›´æ»‘åŠ¨å’Œæ°´å¹³æ»‘åŠ¨æ‰‹åŠ¿çš„ï¼Œä½†æ˜¯ä¸€æ¬¡æ‰‹åŠ¿åªèƒ½å¯¹åº”ä¸€æ¬¡æ»‘åŠ¨ï¼Œç´¢æ€§ç›´æ¥ç”¨æ‹–åŠ¨æ‰‹åŠ¿åˆ¤æ–­äº†</p><p>æ‹–åŠ¨æ‰‹åŠ¿æ€»å…±æœ‰äº”ç§ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å­—æ®µ</th><th>å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td>onPanDown</td><td>GestureDragDownCallback</td><td>æ‰‹æŒ‡æŒ‰ä¸‹æ—¶çš„å›è°ƒå‡½æ•°</td></tr><tr><td>onPanStart</td><td>GestureDragStartCallback</td><td>æ‰‹æŒ‡å¼€å§‹æ‹–åŠ¨æ—¶çš„å›è°ƒå‡½æ•°</td></tr><tr><td>onPanUpdate</td><td>GestureDragUpdateCallback</td><td>æ‰‹æŒ‡ç§»åŠ¨æ—¶çš„å›è°ƒå‡½æ•°</td></tr><tr><td>onPanEnd</td><td>GestureDragEndCallback</td><td>æ‰‹æŒ‡æŠ¬èµ·æ—¶çš„å›è°ƒå‡½æ•°</td></tr><tr><td>onPanCancel</td><td>GestureDragCancelCallback</td><td>æ‰‹æŒ‡å–æ¶ˆæ‹–åŠ¨æ—¶çš„å›è°ƒå‡½æ•°</td></tr></tbody></table><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç :"></a>ä»£ç :</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">Offset lastPosition = Offset.zero;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onPanDown: (DragDownDetails details) &#123;</span><br><span class="line">        lastPosition = details.globalPosition;</span><br><span class="line">        _firstTouch = <span class="keyword">true</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      onPanUpdate: (details) &#123;</span><br><span class="line">        <span class="keyword">final</span> curPosition = details.globalPosition;</span><br><span class="line">        <span class="keyword">if</span> ((curPosition.dx - lastPosition.dx).abs() &gt; _mainAxisMinLimit &amp;&amp;</span><br><span class="line">            (curPosition.dy - lastPosition.dy).abs() &lt; _crossAxisMaxLimit) &#123;</span><br><span class="line">          <span class="comment">// æ°´å¹³</span></span><br><span class="line">          <span class="keyword">if</span> (_firstTouch) &#123;</span><br><span class="line">            _firstTouch = <span class="keyword">false</span>;</span><br><span class="line">            <span class="keyword">if</span> ((curPosition.dx - lastPosition.dx).abs() &gt; _crossAxisMaxLimit) &#123;</span><br><span class="line">              <span class="keyword">if</span>(curPosition.dx - lastPosition.dx &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                setMoveState(Side.EAST);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                setMoveState(Side.WEST);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>((curPosition.dy - lastPosition.dy).abs() &gt;</span><br><span class="line">            _mainAxisMinLimit &amp;&amp;</span><br><span class="line">            (curPosition.dx - lastPosition.dx).abs() &lt; _crossAxisMaxLimit)&#123;</span><br><span class="line">          <span class="comment">//å‚ç›´</span></span><br><span class="line">          <span class="keyword">if</span> ((curPosition.dy - lastPosition.dy).abs() &gt; _mainAxisMinLimit) &#123;</span><br><span class="line">            <span class="keyword">if</span> (_firstTouch) &#123;</span><br><span class="line">              _firstTouch = <span class="keyword">false</span>;</span><br><span class="line">              <span class="keyword">if</span>(curPosition.dy - lastPosition.dy &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                setMoveState(Side.SOUTH);</span><br><span class="line">              &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                setMoveState(Side.NORTH);</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line">      child: AspectRatio( çœç•¥ ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> setMoveState(Side side) &#123;</span><br><span class="line">  <span class="keyword">return</span> setState(() &#123;</span><br><span class="line">    <span class="keyword">switch</span> (side) &#123;</span><br><span class="line">      <span class="keyword">case</span> Side.NORTH:</span><br><span class="line">        _joinGameMapDataToTop();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> Side.SOUTH:</span><br><span class="line">        _joinGameMapDataToBottom();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> Side.EAST:</span><br><span class="line">        _joinGameMapDataToRight();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> Side.WEST:</span><br><span class="line">        _joinGameMapDataToLeft();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> Exception(<span class="string">&#x27;Invalid side: <span class="subst">$this</span>&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!_noMoveInSwipe) &#123;</span><br><span class="line">        <span class="comment">//_noMoveInSwipeæ˜¯æ£€æŸ¥ç§»åŠ¨æ—¶æ˜¯ä¸æ˜¯å±äºæœ‰æ•ˆç§»åŠ¨ï¼Œè‹¥æ˜¯ï¼Œåˆ™éšæœºæ·»åŠ ã€‚</span></span><br><span class="line">      <span class="keyword">var</span> a = Random().nextDouble();</span><br><span class="line">      <span class="keyword">if</span> (a &lt; <span class="number">0.75</span>) _randomNewCellData(<span class="number">2</span>);</span><br><span class="line">      <span class="keyword">else</span> _randomNewCellData(<span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    checkEnd();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ•°å­—å—çš„ç§»åŠ¨ä¸åˆå¹¶"><a href="#æ•°å­—å—çš„ç§»åŠ¨ä¸åˆå¹¶" class="headerlink" title="æ•°å­—å—çš„ç§»åŠ¨ä¸åˆå¹¶"></a>æ•°å­—å—çš„ç§»åŠ¨ä¸åˆå¹¶</h2><h3 id="å¤±è´¥çš„æ„æƒ³"><a href="#å¤±è´¥çš„æ„æƒ³" class="headerlink" title="å¤±è´¥çš„æ„æƒ³"></a>å¤±è´¥çš„æ„æƒ³</h3><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªSideç±»ï¼Œå®ƒæšä¸¾å››ä¸ªæ–¹ä½ï¼Œåˆå§‹æ–¹å‘æ˜¯åŒ—</p><p>æˆ‘ä»¬åªéœ€è¦å®ç°å‘ä¸Šæ»‘çš„é€»è¾‘ï¼Œç„¶åé€šè¿‡æ”¹å˜è§†è§’ï¼Œå³æ•°ç»„çš„æ—‹è½¬ï¼Œä½¿å…¶å¥—ç”¨ä¹‹å‰å®ç°å¥½çš„å‘ä¸Šæ»‘çš„é€»è¾‘ï¼Œå°±å¯ä»¥å®ç°ä¸€å¥—ä»£ç å¤šæ¬¡ä½¿ç”¨ã€‚ä½†æ˜¯æ”¹å˜è§†è§’çš„é€»è¾‘æˆ‘æ²¡å†™å‡ºæ¥ã€‚ã€‚ã€‚ã€‚</p><p>ç§»åŠ¨åˆå¹¶çš„é€»è¾‘</p><p><img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/image-20240118213830819.png" alt="image-20240118213830819"></p><p><img src="/2024/03/10/%E5%AE%89%E5%8D%93-Flutter-%E6%B8%B8%E6%88%8F-2048/image-20240118213851546.png" alt="image-20240118213851546"></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">bool</span> tilt(Side side) &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;tilt work&quot;</span>);</span><br><span class="line">    <span class="built_in">bool</span> changed;</span><br><span class="line">    changed = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Modify this._gameMap (and perhaps this.score) to account</span></span><br><span class="line">    <span class="comment">// for the tilt to the Side SIDE. If the _gameMap changed, set the</span></span><br><span class="line">    <span class="comment">// changed local variable to true.</span></span><br><span class="line">    _gameMap.setViewingPerspective(side);</span><br><span class="line"></span><br><span class="line">    ç§»åŠ¨åˆå¹¶çš„é€»è¾‘;</span><br><span class="line">     </span><br><span class="line">   _gameMap.setViewingPerspective(Side.NORTH);</span><br><span class="line">    checkEnd();</span><br><span class="line">    <span class="keyword">if</span> (changed) &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _noMoveInSwipe = <span class="keyword">true</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      setState(() =&gt; _noMoveInSwipe = <span class="keyword">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> changed;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> moveTilesUp() &#123;</span><br><span class="line">  <span class="built_in">bool</span> changed = <span class="keyword">false</span>;</span><br><span class="line"><span class="comment">//å‡è®¾tile(c, r)æ˜¯ä»¥å·¦ä¸‹è§’ä¸ºåŸç‚¹çš„åæ ‡è½´è®¡ç®—çš„ã€‚</span></span><br><span class="line">  <span class="comment">// éå†æ¯ä¸€åˆ—</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> c = <span class="number">0</span>; c &lt; _gameMap.size(); c++) &#123;</span><br><span class="line">    <span class="comment">// ä»ä¸Šå¾€ä¸‹å¼€å§‹éå†</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> r = _gameMap.size() - <span class="number">1</span>; r &gt;= <span class="number">0</span>; r--) &#123;</span><br><span class="line">      <span class="built_in">int</span> t = _gameMap.tile(c, r); <span class="comment">// è·å–å½“å‰ä½ç½®ä¸Šçš„æ•°å­—æ–¹å—çš„å€¼</span></span><br><span class="line">      <span class="built_in">int</span> row = r; <span class="comment">// åˆå§‹åŒ–è¡Œæ•°</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (_gameMap.tile(c, r) != <span class="number">0</span>) &#123; <span class="comment">// å¦‚æœå½“å‰ä½ç½®æœ‰æ•°å­—æ–¹å—</span></span><br><span class="line">        <span class="comment">// å‘ä¸Šæœç´¢ç©ºæ ¼ï¼Œä»¥ä¾¿ç§»åŠ¨æ•°å­—æ–¹å—</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = _gameMap.size() - <span class="number">1</span>; i &gt; r; i--) &#123;</span><br><span class="line">          <span class="keyword">if</span> (_gameMap.tile(c, i) == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// å°†æ•°å­—æ–¹å—ç§»åŠ¨åˆ°ç©ºæ ¼æ‰€åœ¨çš„è¡Œï¼Œå¹¶æ›´æ–°è¡Œæ•°</span></span><br><span class="line">            setState(() =&gt; _gameMap.move(c, i, c, r));</span><br><span class="line">            row = i;</span><br><span class="line">            changed = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘ä¸‹æœç´¢ç›¸åŒæ•°å­—æ–¹å—ï¼Œä»¥ä¾¿åˆå¹¶</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = row - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">          <span class="keyword">if</span> (_gameMap.tile(c, i) != <span class="number">0</span> &amp;&amp; t != _gameMap.tile(c, i)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ‰¾åˆ°äº†ä¸åŒçš„æ•°å­—æ–¹å—ï¼Œåœæ­¢æœç´¢</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_gameMap.tile(c, i) != <span class="number">0</span> &amp;&amp; t == _gameMap.tile(c, i)) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœæ‰¾åˆ°äº†ç›¸åŒçš„æ•°å­—æ–¹å—ï¼Œè¿›è¡Œåˆå¹¶æ“ä½œ</span></span><br><span class="line">            setState(() =&gt; _gameMap.move(c, row, c, i));</span><br><span class="line">            changed = <span class="keyword">true</span>;</span><br><span class="line">            logic.currentScore += _gameMap.tile(c, row); <span class="comment">// æ›´æ–°åˆ†æ•°</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ ‡è®°çŠ¶æ€å·²ç»æ”¹å˜</span></span><br><span class="line">  <span class="keyword">if</span> (changed) &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ¸¸æˆçŠ¶æ€</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ•°çš„æ›´æ–°"><a href="#åˆ†æ•°çš„æ›´æ–°" class="headerlink" title="åˆ†æ•°çš„æ›´æ–°"></a>åˆ†æ•°çš„æ›´æ–°</h2><p>privideå‚è€ƒæ–‡ç« </p><ul><li><a href="https://juejin.cn/post/7015887922117214238#heading-9">Flutter ProviderçŠ¶æ€ç®¡ç†â€”å…«ç§æä¾›è€…ä½¿ç”¨åˆ†æ - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink">https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink</a></li></ul><p>å› ä¸ºæˆ‘Headerå’ŒPanelæ˜¯åˆ†å¼€çš„ï¼Œå¯¼è‡´åˆ†æ•°çš„ä¼ é€’å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æˆ‘ç”¨äº†Flutterçš„ProviderçŠ¶æ€ç®¡ç†</p><p>é¦–å…ˆæˆ‘åœ¨mainå‡½æ•°æ·»åŠ äº†ChangeNotifierProviderç»„ä»¶</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(ChangeNotifierProvider(</span><br><span class="line">    create: (_) =&gt; Score(),</span><br><span class="line">    child: MaterialApp(</span><br><span class="line">      home: MyGame(),</span><br><span class="line">    )</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¨¡ç»„Scoreä¸º:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Score</span> <span class="title">with</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">å½“å‰åˆ†æ•°</span></span></span><br><span class="line">  <span class="built_in">int</span>  currentScore = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">å†å²æœ€é«˜åˆ†</span></span></span><br><span class="line">  <span class="built_in">int</span> highestScore = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  getCur() =&gt; currentScore;</span><br><span class="line">  getHigh() =&gt; highestScore;</span><br><span class="line"></span><br><span class="line">  clearScore() &#123;</span><br><span class="line">    currentScore = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> setScore(<span class="built_in">int</span> s) &#123;</span><br><span class="line">    currentScore += s;</span><br><span class="line">    <span class="keyword">if</span> (currentScore &gt; highestScore) &#123;</span><br><span class="line">      highestScore = currentScore;</span><br><span class="line">    &#125;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    ....çœç•¥</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å­åœ¨Panelä¸­åˆå¹¶æ—¶ï¼Œè°ƒç”¨<code>setScore</code>,è¿™æ ·å­<code>notifyListeners()</code>å°±ä¼šé€šçŸ¥Hearderä¸­çš„åˆ†æ•°æ›´æ–°</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">            padding: <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0</span>, <span class="number">40</span>, <span class="number">25</span>, <span class="number">0</span>),</span><br><span class="line">            child: Column(</span><br><span class="line">                crossAxisAlignment: CrossAxisAlignment.end,</span><br><span class="line">                children: [</span><br><span class="line">                  Consumer&lt;Score&gt;(builder:(context, currentScore, child) &#123;</span><br><span class="line">                    <span class="keyword">return</span> NumCard(text:<span class="string">&#x27;SCORE&#x27;</span>, score:Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).currentScore);</span><br><span class="line">                  &#125;),</span><br><span class="line">                  <span class="keyword">const</span> SizedBox(height: <span class="number">10</span>,),</span><br><span class="line">                  Consumer&lt;Score&gt;(builder:(context, highestScore, child) &#123;</span><br><span class="line">                    <span class="keyword">return</span> NumCard(text:<span class="string">&#x27;HIGHEST&#x27;</span>, score:Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).highestScore);</span><br><span class="line">                  &#125;)</span><br><span class="line">                ]</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br></pre></td></tr></table></figure><h2 id="æœ€é«˜åˆ†æ•°çš„å¯¼å…¥"><a href="#æœ€é«˜åˆ†æ•°çš„å¯¼å…¥" class="headerlink" title="æœ€é«˜åˆ†æ•°çš„å¯¼å…¥"></a>æœ€é«˜åˆ†æ•°çš„å¯¼å…¥</h2><p>shared_preferenceså‚è€ƒæ–‡ç«  <a href="https://juejin.cn/post/7012840579964862471">Flutter shared_preferencesçš„åŸºæœ¬ä½¿ç”¨ã€æºç åˆ†æã€å°è£… - æ˜é‡‘ (juejin.cn)</a></p><p>å¯¼å…¥æ’ä»¶<code>shared_preferences: ^2.0.7</code></p><h3 id="è·å–å®ä¾‹å¯¹è±¡"><a href="#è·å–å®ä¾‹å¯¹è±¡" class="headerlink" title="è·å–å®ä¾‹å¯¹è±¡"></a>è·å–å®ä¾‹å¯¹è±¡</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SharedPreferences? sharedPreferences = <span class="keyword">await</span> SharedPreferences.getInstance();</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®æŒä¹…åŒ–æ•°æ®"><a href="#è®¾ç½®æŒä¹…åŒ–æ•°æ®" class="headerlink" title="è®¾ç½®æŒä¹…åŒ–æ•°æ®"></a>è®¾ç½®æŒä¹…åŒ–æ•°æ®</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>sharedPreferences</code>çš„å®ä¾‹åŒ–å¯¹è±¡è°ƒç”¨å¯¹åº”çš„<code>set</code>æ–¹æ³•è®¾ç½®æŒä¹…åŒ–æ•°æ®</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SharedPreferences? sharedPreferences;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®æŒä¹…åŒ–æ•°æ®</span></span><br><span class="line"><span class="keyword">void</span> _setData() <span class="keyword">async</span> &#123;</span><br><span class="line">  <span class="comment">// å®ä¾‹åŒ–</span></span><br><span class="line">  sharedPreferences = <span class="keyword">await</span> SharedPreferences.getInstance();</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®stringç±»å‹</span></span><br><span class="line">  <span class="keyword">await</span> sharedPreferences?.setString(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Jimi&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®intç±»å‹</span></span><br><span class="line">  <span class="keyword">await</span> sharedPreferences?.setInt(<span class="string">&quot;age&quot;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®boolç±»å‹</span></span><br><span class="line">  <span class="keyword">await</span> sharedPreferences?.setBool(<span class="string">&quot;isTeacher&quot;</span>, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®doubleç±»å‹</span></span><br><span class="line">  <span class="keyword">await</span> sharedPreferences?.setDouble(<span class="string">&quot;height&quot;</span>, <span class="number">1.88</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è®¾ç½®stringç±»å‹çš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">await</span> sharedPreferences?.setStringList(<span class="string">&quot;action&quot;</span>, [<span class="string">&quot;åƒé¥­&quot;</span>, <span class="string">&quot;ç¡è§‰&quot;</span>, <span class="string">&quot;æ‰“è±†è±†&quot;</span>]);</span><br><span class="line"></span><br><span class="line">  setState(() &#123;&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¯»å–æŒä¹…åŒ–æ•°æ®"><a href="#è¯»å–æŒä¹…åŒ–æ•°æ®" class="headerlink" title="è¯»å–æŒä¹…åŒ–æ•°æ®"></a>è¯»å–æŒä¹…åŒ–æ•°æ®</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>sharedPreferences</code>çš„å®ä¾‹åŒ–å¯¹è±¡è°ƒç”¨å¯¹åº”çš„<code>get</code>æ–¹æ³•è¯»å–æŒä¹…åŒ–æ•°æ®</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Text(<span class="string">&quot;åå­—: <span class="subst">$&#123;sharedPreferences?.getString(<span class="string">&quot;name&quot;</span>) ?? <span class="string">&quot;&quot;</span>&#125;</span>&quot;</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.blue,</span><br><span class="line">       fontSize: <span class="number">20</span></span><br><span class="line">     ),</span><br><span class="line">    ),</span><br><span class="line">SizedBox(height: <span class="number">20</span>,),</span><br><span class="line">Text(<span class="string">&quot;å¹´é¾„: <span class="subst">$&#123;sharedPreferences?.getInt(<span class="string">&quot;age&quot;</span>) ?? <span class="string">&quot;&quot;</span>&#125;</span>&quot;</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.red,</span><br><span class="line">       fontSize: <span class="number">20</span></span><br><span class="line">     ),</span><br><span class="line">    ),</span><br><span class="line">SizedBox(height: <span class="number">20</span>,),</span><br><span class="line">Text(<span class="string">&quot;æ˜¯è€å¸ˆå—?: <span class="subst">$&#123;sharedPreferences?.getBool(<span class="string">&quot;isTeacher&quot;</span>) ?? <span class="string">&quot;&quot;</span>&#125;</span>&quot;</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.orange,</span><br><span class="line">       fontSize: <span class="number">20</span></span><br><span class="line">     ),</span><br><span class="line">    ),</span><br><span class="line">SizedBox(height: <span class="number">20</span>,),</span><br><span class="line">Text(<span class="string">&quot;èº«é«˜: <span class="subst">$&#123;sharedPreferences?.getDouble(<span class="string">&quot;height&quot;</span>) ?? <span class="string">&quot;&quot;</span>&#125;</span>&quot;</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.pink,</span><br><span class="line">       fontSize: <span class="number">20</span></span><br><span class="line">     ),</span><br><span class="line">    ),</span><br><span class="line">SizedBox(height: <span class="number">20</span>,),</span><br><span class="line">Text(<span class="string">&quot;æˆ‘æ­£åœ¨: <span class="subst">$&#123;sharedPreferences?.getStringList(<span class="string">&quot;action&quot;</span>) ?? <span class="string">&quot;&quot;</span>&#125;</span>&quot;</span>,</span><br><span class="line">     style: TextStyle(</span><br><span class="line">       color: Colors.purple,</span><br><span class="line">       fontSize: <span class="number">20</span></span><br><span class="line">     ),</span><br><span class="line">    ),</span><br></pre></td></tr></table></figure><p>ä»£ç </p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> GAME_2048_HIGHEST_SCORE = <span class="string">&quot;game_2048_highest_score&quot;</span>;</span><br><span class="line"></span><br><span class="line">Future&lt;SharedPreferences&gt; _spFuture = SharedPreferences.getInstance();</span><br><span class="line"></span><br><span class="line">  _GameHeader() &#123;</span><br><span class="line">    initState();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    readHighestScoreFromSp();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> readHighestScoreFromSp() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> SharedPreferences sp = <span class="keyword">await</span> _spFuture;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      <span class="comment">//Score.setScore(sp.getInt(GAME_2048_HIGHEST_SCORE) ?? 0);</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> storeHighestScoreToSp() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> SharedPreferences sp = <span class="keyword">await</span> _spFuture;</span><br><span class="line">    <span class="comment">//await sp.setInt(GAME_2048_HIGHEST_SCORE, Score.getHigh());</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­æ¸¸æˆç»“æŸ"><a href="#åˆ¤æ–­æ¸¸æˆç»“æŸ" class="headerlink" title="åˆ¤æ–­æ¸¸æˆç»“æŸ"></a>åˆ¤æ–­æ¸¸æˆç»“æŸ</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line"><span class="built_in">bool</span> checkEnd(GameMap b) &#123;</span><br><span class="line">  <span class="keyword">return</span> maxTileExists(b) || !atLeastOneMoveExists(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> maxTileExists(GameMap b) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> r = <span class="number">0</span>; r &lt; b.size(); r++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> c = <span class="number">0</span>; c &lt; b.size(); c++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (b.tile(c, r) == MAX_PIECE) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">bool</span> atLeastOneMoveExists(GameMap b) &#123;</span><br><span class="line">  <span class="keyword">if</span> (b.hasEmptySpace()) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">int</span> r = <span class="number">0</span>; r &lt; b.size(); r++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> c = <span class="number">0</span>; c &lt; b.size(); c++) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((c - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; c + <span class="number">1</span> &lt; b.size()) &amp;&amp;</span><br><span class="line">          (b.tile(c - <span class="number">1</span>, r) == b.tile(c, r) ||</span><br><span class="line">              b.tile(c + <span class="number">1</span>, r) == b.tile(c, r))) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> ((r - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; r + <span class="number">1</span> &lt; b.size()) &amp;&amp;</span><br><span class="line">          (b.tile(c, r - <span class="number">1</span>) == b.tile(c, r) ||</span><br><span class="line">              b.tile(c, r + <span class="number">1</span>) == b.tile(c, r))) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°å¼€å§‹æ¸¸æˆ"><a href="#é‡æ–°å¼€å§‹æ¸¸æˆ" class="headerlink" title="é‡æ–°å¼€å§‹æ¸¸æˆ"></a>é‡æ–°å¼€å§‹æ¸¸æˆ</h2><p>privideå‚è€ƒæ–‡ç« </p><ul><li><a href="https://juejin.cn/post/7015887922117214238#heading-9">Flutter ProviderçŠ¶æ€ç®¡ç†â€”å…«ç§æä¾›è€…ä½¿ç”¨åˆ†æ - æ˜é‡‘ (juejin.cn)</a></li><li><a href="https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink">https://flyingstudio.feishu.cn/wiki/E2TSwTtZ9ik92EkCLpHcjAvbnRu?from=from_copylink</a></li></ul><p>å› ä¸ºæˆ‘Headerå’ŒPanelæ˜¯åˆ†å¼€çš„ï¼Œæ‰€ä»¥åˆæœ‰ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼šNEW GAMEæŒ‰é’®æŒ‰ä¸‹åï¼Œåˆ—è¡¨è¢«æ¸…é›¶äº†ï¼Œä½†æ˜¯ Panelé¡µé¢å¹¶ä¸ä¼šå¾—åˆ°æ›´æ–°çš„é€šçŸ¥ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘åˆä½¿ç”¨äº†Provider</p><p>Header</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onTap: () &#123;</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).currentScore = <span class="number">0</span>;</span><br><span class="line">    Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).NewGame();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>Panel</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> NewGame() &#123;</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).currentScore = <span class="number">0</span>;</span><br><span class="line">    Provider.of&lt;Score&gt;(context, listen: <span class="keyword">false</span>).NewGame();</span><br><span class="line">    _isGameOver = <span class="keyword">false</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">AspectRatio(</span><br><span class="line">        ...çœç•¥</span><br><span class="line">        itemBuilder: (context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">          <span class="built_in">int</span> indexI = index ~/ SIZE;</span><br><span class="line">          <span class="built_in">int</span> indexJ = index % SIZE;</span><br><span class="line">          <span class="keyword">return</span> _buildGameCell(Provider.of&lt;Score&gt;(context, listen: <span class="keyword">true</span>).tile1(indexI, indexJ));</span><br><span class="line">        &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p><strong>ä¸çŸ¥é“ä¸ºä»€ä¹ˆåªæœ‰listenè®¾ä¸ºtrueåæ‰æœ‰ç”¨</strong></p>]]></content>
      
      
      <categories>
          
          <category> Flutter </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åä¸ƒ)-RD17ã€18ã€19-æ ‘éå†ä¸å›¾</title>
      <link href="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/"/>
      <url>/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h1 id="æ ‘çš„éå†"><a href="#æ ‘çš„éå†" class="headerlink" title="æ ‘çš„éå†"></a>æ ‘çš„éå†</h1><h2 id="æ ‘çš„å›é¡¾"><a href="#æ ‘çš„å›é¡¾" class="headerlink" title="æ ‘çš„å›é¡¾"></a>æ ‘çš„å›é¡¾</h2><h3 id="æ ‘çš„å®šä¹‰"><a href="#æ ‘çš„å®šä¹‰" class="headerlink" title="æ ‘çš„å®šä¹‰"></a>æ ‘çš„å®šä¹‰</h3><p>å›æƒ³ä¸€ä¸‹ï¼Œä¸€æ£µæ ‘ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p><ul><li>ä¸€ç»„èŠ‚ç‚¹ï¼ˆæˆ–é¡¶ç‚¹ï¼‰ã€‚</li><li>è¿æ¥è¿™äº›èŠ‚ç‚¹çš„ä¸€ç»„è¾¹ã€‚<ul><li><strong>çº¦æŸ</strong>ï¼šä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´åªæœ‰ä¸€æ¡è·¯å¾„ã€‚</li></ul></li></ul><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240305235803647.png" alt="image-20240305235803647"></p><h3 id="æ ‘æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"><a href="#æ ‘æœ‰ä»€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="æ ‘æœ‰ä»€ä¹ˆç”¨ï¼Ÿ"></a>æ ‘æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†æœç´¢æ ‘ã€å°è¯•ã€å †ã€ä¸ç›¸äº¤é›†ç­‰ã€‚è¿™äº›åœ¨æˆ‘ä»¬åˆ›å»ºé«˜æ•ˆç®—æ³•çš„è¿‡ç¨‹ä¸­éå¸¸æœ‰ç”¨ï¼šåŠ å¿«æœç´¢é¡¹ã€å…è®¸æ·»åŠ å‰ç¼€ã€æ£€æŸ¥è¿é€šæ€§ç­‰ã€‚</p><p>ä½†äº‹å®æ˜¯å®ƒä»¬æ¯”æˆ‘ä»¬æ„è¯†åˆ°çš„æ›´åŠ æ™®éã€‚è€ƒè™‘ä¸€ä¸ªç»„ç»‡ç»“æ„å›¾ã€‚åœ¨è¿™é‡Œï¼Œæ€»ç»Ÿæ˜¯â€œæ ¹â€ã€‚ â€œVPâ€æ˜¯æ ¹çš„å­ä»£ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/org-chart-software-maker.png" alt="img"></p><p>å¦ä¸€ä¸ªæ ‘ç»“æ„æ˜¯æ¡Œé¢ä¸Šçš„ <code>61b/</code> ç›®å½•ï¼ˆå®ƒå°±åœ¨æ‚¨çš„æ¡Œé¢ä¸Šï¼Œä¸æ˜¯å—ï¼Ÿï¼‰ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œå½“æ‚¨éå†åˆ°å­æ–‡ä»¶å¤¹æ—¶ï¼Œå®ƒä¼šè½¬åˆ°åç»­å­æ–‡ä»¶å¤¹ï¼Œä¾æ­¤ç±»æ¨ã€‚è¿™ç®€ç›´å°±åƒæ ‘ä¸€æ ·ï¼</p><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240305235854969.png" alt="image-20240305235854969"></p><h2 id="Tree-Iteration-Traversal"><a href="#Tree-Iteration-Traversal" class="headerlink" title="Tree Iteration Traversal"></a>Tree <del>Iteration</del> Traversal</h2><p>å›æƒ³ä¸€ä¸‹æˆ‘ä»¬å¦‚ä½•å­¦ä¼šéå†åˆ—è¡¨çš„ï¼Ÿæœ‰ä¸€ç§éå†åˆ—è¡¨çš„æ–¹å¼æ„Ÿè§‰å¾ˆè‡ªç„¶ã€‚å°±æ˜¯ä»å¼€å¤´å¼€å§‹â€¦ç„¶åç»§ç»­å¾€ä¸‹èµ°ã€‚</p><p>æˆ–è€…ä¹Ÿè®¸æˆ‘ä»¬åšäº†ä¸€äº›æœ‰ç‚¹å¥‡æ€ªçš„äº‹æƒ…ï¼Œæ¯”å¦‚éå†åˆ—è¡¨çš„åå‘ã€‚å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬è¿˜åœ¨è®¨è®ºä¸­ç¼–å†™äº†è¿­ä»£å™¨ï¼Œä»¥è·³è¿‡æ²¡æœ‰åœ¨ Office Hours æ’é˜Ÿä¸­å†™æè¿°çš„å­¦ç”Ÿã€‚</p><p>ç°åœ¨å¦‚ä½•éå†ä¸€æ£µæ ‘å‘¢ï¼Ÿä»€ä¹ˆæ˜¯æ­£ç¡®çš„â€œé¡ºåºâ€ï¼Ÿ</p><p>åœ¨å›ç­”è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨è¿­ä»£è¿™ä¸ªè¯ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†ç§°ä¹‹ä¸ºâ€œéå†æ ‘â€æˆ–â€œæ ‘éå†â€ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿé™¤äº†æ¯ä¸ªäººéƒ½ç§°é€šè¿‡æ ‘è¿›è¡Œè¿­ä»£ä¸ºâ€œéå†â€ä¹‹å¤–ï¼Œæ²¡æœ‰çœŸæ­£çš„ç†ç”±ã€‚ä¹Ÿè®¸æ˜¯å› ä¸ºä¸–ç•Œå–œæ¬¢å¤´éŸµã€‚</p><p>é‚£ä¹ˆï¼Œé€šè¿‡æ ‘â€œéå†â€çš„ä¸€äº›è‡ªç„¶æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿäº‹å®è¯æ˜ï¼Œæœ‰ä¸€äº›æ–¹æ³•â€”â€”ä¸åˆ—è¡¨åŸºæœ¬ä¸Šåªæœ‰ä¸€ç§è‡ªç„¶çš„è¿­ä»£æ–¹å¼ä¸åŒï¼š</p><ol><li>å±‚æ¬¡éå†ã€‚</li><li>æ·±åº¦ä¼˜å…ˆéå†â€”â€”å…¶ä¸­æœ‰ä¸‰ç§ï¼šå‰åºã€ä¸­åºå’Œååºã€‚</li></ol><p>è®©æˆ‘ä»¬åœ¨ä¸‹é¢çš„æ ‘ä¸Šæµ‹è¯•ä¸Šè¿°éå†æ–¹æ³•ã€‚</p><h3 id="å±‚æ¬¡éå†"><a href="#å±‚æ¬¡éå†" class="headerlink" title="å±‚æ¬¡éå†"></a>å±‚æ¬¡éå†</h3><p>æˆ‘ä»¬å°†æŒ‰å±‚æ¬¡ä»å·¦åˆ°å³è¿›è¡Œè¿­ä»£ã€‚ç¬¬ 0 å±‚ï¼ŸDã€‚ç¬¬ 1 å±‚ï¼ŸBï¼Œç„¶åæ˜¯ Fã€‚ç¬¬ 2 å±‚ï¼ŸAï¼ŒCï¼ŒE å’Œ Gã€‚</p><p>è¿™ç»™æˆ‘ä»¬ D B F A C E Gã€‚</p><p>æƒ³è±¡æ¯ä¸€å±‚éƒ½æ˜¯è‹±è¯­ä¸­çš„ä¸€ä¸ªå¥å­ï¼Œæˆ‘ä»¬åªéœ€é€è¡Œé˜…è¯»å®ƒã€‚</p><p><strong>ç»ƒä¹  17.2.1.</strong> ç¼–å†™æ‰§è¡Œå±‚æ¬¡éå†çš„ä»£ç ï¼ˆè­¦å‘Šï¼Œè¿™æ¯”ç¼–å†™å…¶ä»–éå†æ›´éš¾ï¼‰ã€‚æç¤ºï¼šæ‚¨å°†éœ€è¦è·Ÿè¸ªæ‚¨æ‰€åœ¨çš„å±‚çº§ã€‚</p><h3 id="å‰åºéå†"><a href="#å‰åºéå†" class="headerlink" title="å‰åºéå†"></a>å‰åºéå†</h3><p>å‰åºéå†çš„æ€æƒ³å¾ˆç®€å•ã€‚ä»æ ¹å¼€å§‹ã€‚è®¿é—®æ ¹ï¼ˆä¹Ÿå°±æ˜¯ï¼Œæ‰§è¡Œä½ æƒ³è¦çš„æ“ä½œï¼‰ã€‚è¿™é‡Œçš„æ“ä½œæ˜¯â€œæ‰“å°â€ã€‚</p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å°†æ‰“å°æ ¹ã€‚Dã€‚å°±è¿™æ ·ã€‚</p><p>ç°åœ¨ï¼Œå‘å·¦èµ°ï¼Œç„¶åé€’å½’ã€‚ç„¶åï¼Œå‘å³èµ°å¹¶é€’å½’ã€‚</p><p>æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å·²ç»å‘å·¦èµ°äº†ã€‚æˆ‘ä»¬åœ¨ B èŠ‚ç‚¹ã€‚æ‰“å°å®ƒã€‚Bã€‚æˆ‘ä»¬åœ¨æ‰“å°åå‘å·¦èµ°ã€‚ï¼ˆè®°ä½ï¼Œå½“æˆ‘ä»¬å®Œæˆäº† B çš„å·¦åˆ†æ”¯åï¼Œæˆ‘ä»¬ä¼šå›æ¥è®¿é—® B çš„å³åˆ†æ”¯ã€‚ï¼‰</p><p>ç»§ç»­éµå¾ªè¿™ä¸ªé€»è¾‘ï¼Œä½ ä¼šå¾—åˆ° D B A C F E Gã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">preOrder(BSTNode x) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    print(x.key)</span><br><span class="line">    preOrder(x.left)</span><br><span class="line">    preOrder(x.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸­åºéå†"><a href="#ä¸­åºéå†" class="headerlink" title="ä¸­åºéå†"></a>ä¸­åºéå†</h3><p>ç¨å¾®ä¸åŒï¼Œä½†å¤§ä½“æ€è·¯ç›¸åŒã€‚è¿™é‡Œï¼Œæˆ‘ä»¬é¦–å…ˆè®¿é—®ï¼ˆä¹Ÿå°±æ˜¯æ‰“å°ï¼‰å·¦åˆ†æ”¯ï¼Œç„¶åæˆ‘ä»¬æ‰“å°ã€‚ç„¶åæˆ‘ä»¬è®¿é—®å³åˆ†æ”¯ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬ä» D å¼€å§‹ã€‚æˆ‘ä»¬ä¸æ‰“å°ã€‚æˆ‘ä»¬å‘å·¦èµ°ã€‚</p><p>æˆ‘ä»¬ä» B å¼€å§‹ã€‚æˆ‘ä»¬ä¸æ‰“å°ã€‚æˆ‘ä»¬å‘å·¦èµ°ã€‚</p><p>æˆ‘ä»¬ä» A å¼€å§‹ã€‚æˆ‘ä»¬ä¸æ‰“å°ã€‚æˆ‘ä»¬å‘å·¦èµ°ã€‚æˆ‘ä»¬ä»€ä¹ˆä¹Ÿæ²¡æ‰¾åˆ°ã€‚æˆ‘ä»¬å›æ¥ï¼Œæ‰“å° Aã€‚</p><p>ç„¶åå» A çš„å³è¾¹ã€‚æ‰¾ä¸åˆ°ä»»ä½•ä¸œè¥¿ã€‚è¿”å›ã€‚ç°åœ¨æˆ‘ä»¬åœ¨ Bã€‚è®°ä½ï¼Œåœ¨è®¿é—®å·¦è¾¹å’Œè®¿é—®å³è¾¹ä¹‹å‰æ‰“å°ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘ä»¬å°†æ‰“å° Bï¼Œç„¶åæˆ‘ä»¬å°†è®¿é—®å³è¾¹ã€‚</p><p>ç»§ç»­éµå¾ªè¿™ä¸ªé€»è¾‘ï¼Œä½ ä¼šå¾—åˆ° A B C D E F Gã€‚</p><p>å¦ä¸€ç§æ€è€ƒæ–¹æ³•æ˜¯ï¼š</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ Dã€‚æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬å°†å…ˆæ‰“å°å·¦è¾¹çš„é¡¹ç›®ï¼Œç„¶åæ˜¯ Dï¼Œç„¶åæ˜¯å³è¾¹çš„é¡¹ç›®ã€‚</p><p>[å·¦è¾¹çš„é¡¹ç›®] D [å³è¾¹çš„é¡¹ç›®]ã€‚</p><p>ç°åœ¨å·¦è¾¹çš„é¡¹ç›®ç­‰äºä»€ä¹ˆï¼Ÿæˆ‘ä»¬ä» B å¼€å§‹ï¼Œæ‰“å°å·¦è¾¹ï¼Œç„¶åæ‰“å° Bï¼Œç„¶åæ‰“å° B çš„å³è¾¹çš„ä¸œè¥¿ã€‚</p><p>[å·¦è¾¹çš„é¡¹ç›®] &#x3D; [B çš„å·¦è¾¹çš„é¡¹ç›®] B [B çš„å³è¾¹çš„é¡¹ç›®] &#x3D; A B Cã€‚</p><p>A B C D [å³è¾¹çš„ä¸œè¥¿] &#x3D; A B C D E F Gã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">inOrder(BSTNode x) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;    </span><br><span class="line">    inOrder(x.left)</span><br><span class="line">    print(x.key)</span><br><span class="line">    inOrder(x.right)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ååºéå†"><a href="#ååºéå†" class="headerlink" title="ååºéå†"></a>ååºéå†</h3><p>åŒæ ·çš„å¤§ä½“æ€è·¯ï¼Œä½†ç°åœ¨æˆ‘ä»¬å°†æ‰“å°å·¦åˆ†æ”¯ï¼Œç„¶åå³åˆ†æ”¯ï¼Œç„¶åæ˜¯è‡ªå·±ã€‚</p><p>ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®¾è®¡çš„æ–¹æ³•ï¼Œç»“æœå¦‚ä¸‹ï¼š</p><p>[å·¦è¾¹çš„é¡¹ç›®] [å³è¾¹çš„é¡¹ç›®] Dã€‚</p><p>å·¦è¾¹çš„é¡¹ç›®æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ B å­æ ‘çš„è¾“å‡ºã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨ Bï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° B çš„å·¦è¾¹çš„é¡¹ç›® B çš„å³è¾¹çš„é¡¹ç›® Bï¼Œç­‰äº A C Bã€‚</p><p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼šA C B E G F D</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">postOrder(BSTNode x) &#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span>;    </span><br><span class="line">    postOrder(x.left)</span><br><span class="line">    postOrder(x.right)</span><br><span class="line">    print(x.key)   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å †æ ˆæ€è·¯æ€è€ƒ"><a href="#å †æ ˆæ€è·¯æ€è€ƒ" class="headerlink" title="å †æ ˆæ€è·¯æ€è€ƒ"></a>å †æ ˆæ€è·¯æ€è€ƒ</h3><p><a href="https://blog.csdn.net/qq_61959780/article/details/127690872?ops_request_misc=%7B%22request_id%22:%22170965464016800215076432%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=170965464016800215076432&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-127690872-null-null.142%5Ev99%5Epc_search_result_base8&utm_term=%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%BA%8F%E9%81%8D%E5%8E%86&spm=1018.2226.3001.4187">äºŒå‰æ ‘éå†æ–¹æ³•â€”â€”å‰ã€ä¸­ã€ååºéå†ï¼ˆå›¾è§£ï¼‰_å‰åºéå†-CSDNåšå®¢</a></p><h1 id="å›¾"><a href="#å›¾" class="headerlink" title="å›¾"></a>å›¾</h1><p>æ ‘å¾ˆæ£’ï¼Œä¸æ˜¯å—ï¼Ÿä½†æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŠ‚ç‚¹å’Œè¾¹æ¥ç»˜åˆ¶ä¸€äº›ä¸æ˜¯æ ‘çš„ä¸œè¥¿ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬ä¹‹å‰çš„é™åˆ¶ï¼Œå³ä»»ä½•ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´åªèƒ½æœ‰ä¸€æ¡è·¯å¾„ï¼Œä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å–æ¶ˆäº†è¿™ä¸ªé™åˆ¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p><h2 id="ä»€ä¹ˆæ˜¯å›¾ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å›¾ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å›¾ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å›¾ï¼Ÿ</h2><p>å›¾ç”±ä»¥ä¸‹ç»„æˆï¼š</p><ul><li>ä¸€ç»„èŠ‚ç‚¹ï¼ˆæˆ–é¡¶ç‚¹ï¼‰</li><li>ä¸€ç»„é›¶ä¸ªæˆ–å¤šä¸ªè¾¹ï¼Œæ¯æ¡è¾¹è¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹ã€‚</li></ul><p>å°±æ˜¯è¿™æ ·ï¼æ²¡æœ‰å…¶ä»–é™åˆ¶ã€‚</p><p>ä¸‹é¢ä»¥ç»¿è‰²æ˜¾ç¤ºçš„æ‰€æœ‰ç»“æ„ï¼Ÿéƒ½æ˜¯æœ‰æ•ˆçš„å›¾ï¼ç¬¬äºŒä¸ªä¹Ÿæ˜¯ä¸€æ£µæ ‘ï¼Œä½†å…¶ä»–éƒ½ä¸æ˜¯ã€‚</p><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240306173801174.png" alt="image-20240306173801174"></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰€æœ‰æ ‘ä¹Ÿéƒ½æ˜¯å›¾ï¼Œä½†å¹¶éæ‰€æœ‰å›¾éƒ½æ˜¯æ ‘ã€‚</p><h2 id="ä»…æœ‰ç®€å•å›¾"><a href="#ä»…æœ‰ç®€å•å›¾" class="headerlink" title="ä»…æœ‰ç®€å•å›¾"></a>ä»…æœ‰ç®€å•å›¾</h2><p>å›¾å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šç®€å•å›¾å’Œå¤šé‡å›¾ï¼ˆæˆ–å¤æ‚å›¾ï¼‰ã€‚å¹¸è¿çš„æ˜¯ï¼Œåœ¨è¿™é—¨è¯¾ç¨‹ä¸­ï¼ˆä»¥åŠå‡ ä¹æ‰€æœ‰çš„åº”ç”¨å’Œç ”ç©¶ä¸­ï¼‰ï¼Œæˆ‘ä»¬åªå…³æ³¨ç®€å•å›¾ã€‚æ‰€ä»¥åœ¨è¿™é—¨è¯¾ç¨‹ä¸­ï¼Œå½“æˆ‘ä»¬è¯´â€œå›¾â€æ—¶ï¼Œä½ åº”è¯¥å§‹ç»ˆå°†å…¶è§†ä¸ºâ€œç®€å•å›¾â€ï¼ˆé™¤éå¦æœ‰è¯´æ˜ï¼‰ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨æ˜¯è§£å†³é—®é¢˜çš„æ—¶å€™äº†ã€‚ä»€ä¹ˆæ˜¯ç®€å•å›¾ï¼Ÿ</p><p>çœ‹ä¸€ä¸‹çº¢è‰²çš„å›¾ã€‚ä¸­é—´çš„å›¾ä»&#x2F;åˆ°åº•éƒ¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œ&#x2F;æˆ–ä»&#x2F;åˆ°åº•éƒ¨çš„å·¦ä¾§èŠ‚ç‚¹æœ‰2ä¸ªä¸åŒçš„è¾¹ã€‚æ¢å¥è¯è¯´ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å­˜åœ¨å¤šæ¡è¾¹ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªç®€å•å›¾ï¼Œé™¤éå¦æœ‰è¯´æ˜ï¼Œæˆ‘ä»¬å°†å¿½ç•¥å®ƒä»¬çš„å­˜åœ¨ã€‚ç±»ä¼¼è¿™æ ·çš„å›¾è¢«ç§°ä¸ºå¤šé‡å›¾ã€‚</p><p>å†çœ‹ç¬¬ä¸‰å¼ å›¾ã€‚å®ƒæœ‰ä¸€ä¸ªç¯ï¼ä¸€ä¸ªä»ä¸€ä¸ªèŠ‚ç‚¹åˆ°è‡ªèº«çš„è¾¹ï¼æˆ‘ä»¬ä¹Ÿä¸å…è®¸è¿™ç§æƒ…å†µã€‚ç±»ä¼¼è¿™æ ·çš„å›¾æœ‰æ—¶è¢«å½’ç±»ä¸ºå¤šé‡å›¾ï¼Œæœ‰æ—¶ç”šè‡³æ˜ç¡®ç¦æ­¢è‡ªç¯ã€‚</p><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240306173858995.png" alt="image-20240306173858995"></p><h2 id="æ›´å¤šåˆ†ç±»"><a href="#æ›´å¤šåˆ†ç±»" class="headerlink" title="æ›´å¤šåˆ†ç±»"></a>æ›´å¤šåˆ†ç±»</h2><p>é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™ä»¥ä¸‹æ–‡æœ¬ä¸­çš„å›¾éƒ½æ˜¯ç®€å•å›¾ã€‚ä½†è¿˜æœ‰æ›´å¤šçš„åˆ†ç±»ã€‚</p><ul><li>æ— å‘å›¾ï¼Œå…¶ä¸­ä¸€æ¡è¾¹ï¼ˆuï¼Œvï¼‰å¯èƒ½æ„å‘³ç€ä»èŠ‚ç‚¹ u åˆ°èŠ‚ç‚¹ v çš„è¾¹ï¼Œä¹Ÿå¯èƒ½æ„å‘³ç€ä»èŠ‚ç‚¹ v åˆ°èŠ‚ç‚¹ u çš„è¾¹ã€‚æœ‰å‘å›¾ï¼Œå…¶ä¸­è¾¹ï¼ˆuï¼Œvï¼‰è¡¨ç¤ºä» u å¼€å§‹çš„è¾¹ï¼Œåˆ°è¾¾ vï¼ˆåä¹‹åˆ™ä¸æˆç«‹ï¼Œé™¤éè¿˜å­˜åœ¨è¾¹ï¼ˆvï¼Œuï¼‰ï¼‰ã€‚æœ‰å‘å›¾ä¸­çš„è¾¹å¸¦æœ‰ç®­å¤´ã€‚</li><li>è¿˜æœ‰æ— ç¯å›¾ã€‚è¿™äº›æ˜¯æ²¡æœ‰ä»»ä½•ç¯çš„å›¾ã€‚ç„¶åæœ‰ç¯å›¾ï¼Œå³å­˜åœ¨ä¸€ç§æ–¹æ³•ä»ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œæ²¿ç€ä¸€äº›å”¯ä¸€çš„è¾¹è¿”å›åˆ°ä¸èµ·å§‹èŠ‚ç‚¹ç›¸åŒçš„èŠ‚ç‚¹ã€‚</li></ul><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240306173933436.png" alt="image-20240306173933436"></p><p>åœ¨ä¸Šé¢çš„å›¾ç‰‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°å¦‚ä½•ç»˜åˆ¶æœ‰å‘å’Œæ— å‘è¾¹ä¹‹é—´çš„å·®å¼‚ã€‚</p><p>çœ‹ä¸€ä¸‹å¾ªç¯å›¾ã€‚å¦‚æœä½ ä» a å¼€å§‹ï¼Œä½ å¯ä»¥æ²¿ç€ä»…ä½¿ç”¨ä¸åŒè¾¹çš„è·¯å¾„å›åˆ° aã€‚å› æ­¤ï¼Œè¯¥å›¾æ˜¯æœ‰ç¯çš„ã€‚</p><p>çœ‹ä¸€ä¸‹å·¦ä¸Šè§’çš„å›¾ã€‚æœ‰æ²¡æœ‰ä»»ä½•èŠ‚ç‚¹ nï¼Œå¦‚æœä½ ä» n å¼€å§‹ï¼Œä½ å¯ä»¥æ²¿ç€ä¸€äº›ä¸åŒçš„è¾¹ï¼Œå›åˆ° nï¼Ÿæ²¡æœ‰ï¼ï¼ˆè®°ä½å¯¹äºæœ‰å‘è¾¹ï¼Œä½ å¿…é¡»éµå¾ªæ–¹å‘ã€‚ä½ å¯ä»¥ä» a åˆ° bï¼Œä½†ä¸èƒ½ä» b åˆ° aã€‚ï¼‰</p><h1 id="å›¾çš„éå†"><a href="#å›¾çš„éå†" class="headerlink" title="å›¾çš„éå†"></a>å›¾çš„éå†</h1><h2 id="æ·±åº¦æœç´¢-Depth-First-Traversal"><a href="#æ·±åº¦æœç´¢-Depth-First-Traversal" class="headerlink" title="æ·±åº¦æœç´¢(Depth-First Traversal)"></a><strong>æ·±åº¦æœç´¢(Depth-First Traversal</strong>)</h2><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240306174606154.png" alt="image-20240306174606154"></p><p>è®©æˆ‘ä»¬å…ˆè§£å†³åˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ç»™å®šæºé¡¶ç‚¹ s å’Œç›®æ ‡é¡¶ç‚¹ tï¼Œæ˜¯å¦å­˜åœ¨ä¸¤è€…ä¹‹é—´çš„è·¯å¾„ï¼Ÿ</p><p>æ¢å¥è¯è¯´ï¼Œç¼–å†™ä¸€ä¸ªåä¸º connected(s, t) çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªé¡¶ç‚¹ï¼Œå¹¶è¿”å›ä¸¤è€…ä¹‹é—´æ˜¯å¦å­˜åœ¨è·¯å¾„ã€‚</p><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (s == t):</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> child in <span class="title function_">neighbors</span><span class="params">(s)</span>:</span><br><span class="line">    <span class="keyword">if</span> <span class="title function_">isconnected</span><span class="params">(child, t)</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªå­˜åœ¨ä¸€ä¸ªé—®é¢˜:</p><p>æˆ‘ä»¬ä» connected(0, 7) å¼€å§‹, è¿™å°†é€’å½’è°ƒç”¨ connected(1, 7)ï¼Œç„¶å connected(0, 7)ã€‚<strong>æ— é™å¾ªç¯å‘ç”Ÿäº†ã€‚</strong></p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦<strong>æ ‡è®°å·²ç»é€’å½’è¿‡çš„</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mark s  <span class="comment">// è®°ä½ä½ å·²ç»è®¿é—®è¿‡ s äº†</span></span><br><span class="line"><span class="keyword">if</span> (s == t):</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> child in <span class="title function_">unmarked_neighbors</span><span class="params">(s)</span>: <span class="comment">// å¦‚æœé‚»å±…å·²ç»è¢«æ ‡è®°ï¼Œå°±å¿½ç•¥ï¼</span></span><br><span class="line">    <span class="keyword">if</span> <span class="title function_">isconnected</span><span class="params">(child, t)</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><blockquote><p>æˆ‘ä»¬æ ‡è®°äº†è‡ªå·±ã€‚ç„¶åæˆ‘ä»¬è®¿é—®äº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ç„¶åæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹æ ‡è®°äº†è‡ªå·±ï¼Œå¹¶è®¿é—®äº†å®ƒçš„å­èŠ‚ç‚¹ã€‚ç„¶åæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹æ ‡è®°äº†è‡ªå·±ï¼Œå¹¶è®¿é—®äº†å®ƒçš„å­èŠ‚ç‚¹ã€‚</p><p>ç›´è§‚åœ°è¯´ï¼Œæˆ‘ä»¬ä¼šæ·±å…¥ï¼ˆå³ï¼Œæ²¿ç€æˆ‘ä»¬çš„å®¶æ—æ ‘å‘ä¸‹èµ°åˆ°æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­™å­ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå­™å­çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œä¾æ­¤ç±»æ¨â€¦â€¦è®¿é—®æ•´ä¸ªè°±ç³»ï¼‰ï¼Œç„¶åå†å»è§¦æ‘¸æˆ‘ä»¬çš„ç¬¬äºŒä¸ªå­©å­ã€‚</p></blockquote><div class="row">    <embed src="cs61b_s-t_connectivity_demo.pdf" width="100%" height="550" type="application/pdf"></div><div class="row">    <embed src="61B_depth_first_paths_demo.pdf" width="100%" height="550" type="application/pdf"></div><h3 id="æ ‘éå†å’Œæ·±æœçš„å¯¹æ¯”"><a href="#æ ‘éå†å’Œæ·±æœçš„å¯¹æ¯”" class="headerlink" title="æ ‘éå†å’Œæ·±æœçš„å¯¹æ¯”"></a>æ ‘éå†å’Œæ·±æœçš„å¯¹æ¯”</h3><p><img src="/2024/03/05/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-17-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD17%E3%80%8118%E3%80%8119-%E6%A0%91%E9%81%8D%E5%8E%86%E4%B8%8E%E5%9B%BE/image-20240306175152450.png" alt="image-20240306175152450"></p><h2 id="å¹¿åº¦ä¼˜å…ˆæœç´¢-Breadth-First-Search"><a href="#å¹¿åº¦ä¼˜å…ˆæœç´¢-Breadth-First-Search" class="headerlink" title="å¹¿åº¦ä¼˜å…ˆæœç´¢(Breadth First Search)"></a><strong>å¹¿åº¦ä¼˜å…ˆæœç´¢(Breadth First Search)</strong></h2><p>ä¹Ÿç§°ä¸ºå±‚åºéå†</p><p>åœ¨ BFS ä¸­ï¼Œæˆ‘ä»¬ä¼šå…ˆæ‹œè®¿æ‰€æœ‰çš„ç›´ç³»å­å¥³ï¼Œç„¶åå†ç»§ç»­æ‹œè®¿æˆ‘ä»¬çš„ä»»ä½•å­™è¾ˆã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬è®¿é—®è·æº 1 ä¸ªè¾¹çš„æ‰€æœ‰èŠ‚ç‚¹ã€‚ç„¶åï¼Œæ‰€æœ‰èŠ‚ç‚¹è·æˆ‘ä»¬çš„æºæœ‰ 2 ä¸ªè¾¹ï¼Œç­‰ç­‰ã€‚</p><p>BFSçš„ä¼ªä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Initialize the fringe (a queue with the starting vertex) and mark that vertex.</span><br><span class="line">Repeat until fringe is empty:</span><br><span class="line">Remove vertex v from the fringe.</span><br><span class="line">For each unmarked neighbor n of v:</span><br><span class="line">Mark n.</span><br><span class="line">Add n to fringe.</span><br><span class="line">Set edgeTo[n] = v.</span><br><span class="line">Set distTo[n] = distTo[v] + 1.</span><br></pre></td></tr></table></figure><p><em>fringe</em>åªæ˜¯æˆ‘ä»¬ç”¨äºå­˜å‚¨éå†å‘ç°è¿‡ç¨‹è¾¹ç•Œä¸Šçš„èŠ‚ç‚¹ï¼ˆå®ƒæ­£åœ¨ç­‰å¾…æŸ¥çœ‹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼‰çš„æ•°æ®ç»“æ„çš„æœ¯è¯­ã€‚å¯¹äº BFSï¼Œæˆ‘ä»¬ä½¿ç”¨é˜Ÿåˆ—ä½œä¸º<em>fringe</em>ã€‚</p><p><code>edgeTo[...]</code> æ˜¯ä¸€ä¸ªmapï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ªå¦‚ä½•åˆ°è¾¾èŠ‚ç‚¹ <code>n</code> ï¼›æˆ‘ä»¬æ²¿ç€ä» <code>v</code> åˆ° <code>n</code> çš„è¾¹ç¼˜åˆ°è¾¾äº†å®ƒã€‚</p><p><code>distTo[...]</code> æ˜¯ä¸€ä¸ªmapï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·Ÿè¸ª <code>n</code> è·èµ·å§‹é¡¶ç‚¹çš„è·ç¦»ã€‚å‡è®¾æ¯æ¡è¾¹çš„è·ç¦»ä¸º <code>1</code> ï¼Œé‚£ä¹ˆåˆ° <code>n</code> çš„è·ç¦»ä»…æ¯”åˆ° <code>v</code> çš„è·ç¦»å¤šä¸€ã€‚ä¸ºä»€ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•åˆ°è¾¾ <code>v</code> çš„æ–¹å¼ï¼Œç„¶åå†æ”¯ä»˜ä¸€æ¬¡è´¹ç”¨ï¼Œé€šè¿‡ <code>v</code> å’Œ <code>n</code> ï¼ˆå®ƒå¿…é¡»å­˜åœ¨ï¼Œå› ä¸ºåœ¨ <code>for</code> å¾ªç¯å¤´ä¸­ï¼Œ <code>n</code> è¢«å®šä¹‰ä¸º <code>v</code> çš„é‚»å±…ï¼‰ã€‚</p><div class="row">    <embed src="cs61b_Breadth_First_Paths_Demo(2019).pdf" width="100%" height="550" type="application/pdf"></div><h3 id="æ·±æœä¸å¹¿æœå¯¹æ¯”"><a href="#æ·±æœä¸å¹¿æœå¯¹æ¯”" class="headerlink" title="æ·±æœä¸å¹¿æœå¯¹æ¯”"></a>æ·±æœä¸å¹¿æœå¯¹æ¯”</h3><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ä¸ä»…åœ¨å®ƒä»¬çš„ fringe æ•°æ®ç»“æ„ä¸Šæœ‰æ‰€ä¸åŒï¼Œå®ƒä»¬åœ¨æ ‡è®°èŠ‚ç‚¹çš„é¡ºåºä¸Šä¹Ÿæœ‰æ‰€ä¸åŒã€‚å¯¹äºDFSï¼Œæˆ‘ä»¬åªæœ‰åœ¨è®¿é—®åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶æ‰æ ‡è®°å®ƒ - ä¹Ÿå°±æ˜¯è¯´ï¼Œä» fringe ä¸­å¼¹å‡ºå®ƒã€‚å› æ­¤ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹å·²ç»è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ä½†å°šæœªè¢«è®¿é—®ï¼Œé‚£ä¹ˆåœ¨æ ˆä¸ŠåŒæ—¶å­˜åœ¨å¤šä¸ªç›¸åŒèŠ‚ç‚¹çš„å®ä¾‹æ˜¯å¯èƒ½çš„ã€‚è€Œå¯¹äºBFSï¼Œæˆ‘ä»¬åœ¨å°†èŠ‚ç‚¹æ·»åŠ åˆ° fringe æ—¶ç«‹å³æ ‡è®°èŠ‚ç‚¹ï¼Œå› æ­¤ä¸å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µã€‚</p><blockquote><p>åœ¨DFSä¸­ï¼Œå½“éå†åˆ°ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œé¦–å…ˆå°†å…¶æ ‡è®°ä¸ºå·²è®¿é—®ï¼Œç„¶åæ¢ç´¢è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰ç›¸é‚»èŠ‚ç‚¹ã€‚è¿™æ„å‘³ç€èŠ‚ç‚¹åªæœ‰åœ¨è¢«è®¿é—®åˆ°å¹¶ä»éå†é˜Ÿåˆ—ä¸­å¼¹å‡ºæ—¶æ‰è¢«æ ‡è®°ã€‚å› æ­¤ï¼Œåœ¨DFSä¸­ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹å·²ç»è¢«åŠ å…¥åˆ°éå†é˜Ÿåˆ—ä¸­ä½†å°šæœªè¢«è®¿é—®åˆ°ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«å¤šæ¬¡åŠ å…¥åˆ°æ ˆä¸­ï¼Œå½¢æˆå¤šä¸ªå®ä¾‹ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨BFSä¸­ï¼Œå½“ä¸€ä¸ªèŠ‚ç‚¹è¢«åŠ å…¥åˆ°éå†é˜Ÿåˆ—ä¸­æ—¶ï¼Œç«‹å³å°†å…¶æ ‡è®°ä¸ºå·²è®¿é—®ã€‚è¿™æ ·å°±ä¸ä¼šå‡ºç°åŒä¸€èŠ‚ç‚¹çš„å¤šä¸ªå®ä¾‹åŒæ—¶å­˜åœ¨äºé˜Ÿåˆ—ä¸­çš„æƒ…å†µï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹åœ¨è¢«æ·»åŠ åˆ°é˜Ÿåˆ—æ—¶å°±å·²ç»è¢«æ ‡è®°è¿‡äº†ã€‚</p><p>è¿™ç§ä¸åŒçš„èŠ‚ç‚¹æ ‡è®°æ–¹å¼å¯¼è‡´DFSå’ŒBFSåœ¨æœç´¢é¡ºåºå’Œç©ºé—´å¤æ‚åº¦æ–¹é¢è¡¨ç°å‡ºä¸åŒçš„ç‰¹ç‚¹ã€‚DFSæ›´åŠ æ·±å…¥åœ°æœç´¢å›¾çš„åˆ†æ”¯ï¼Œå¯èƒ½ä¼šæ²¿ç€ä¸€æ¡è·¯å¾„ä¸€ç›´å‘ä¸‹æœç´¢ï¼Œè€ŒBFSåˆ™æ›´åŠ å¹¿æ³›åœ°æœç´¢å›¾çš„å„ä¸ªåˆ†æ”¯ï¼Œé€å±‚å‘å¤–æ‰©å±•ã€‚</p></blockquote><p>é€’å½’ DFS é€šè¿‡é€’å½’å †æ ˆå¸§è‡ªç„¶åœ°å®ç°äº†è¿™ä¸€ç‚¹ï¼›è¿­ä»£DFSæ‰‹åŠ¨å®ç°å®ƒï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Initialize the fringe, an empty stack</span><br><span class="line">    push the starting vertex on the fringe</span><br><span class="line">    while fringe is not empty:</span><br><span class="line">        pop a vertex off the fringe</span><br><span class="line">        if vertex is not marked:</span><br><span class="line">            mark the vertex</span><br><span class="line">            visit vertex</span><br><span class="line">            for each neighbor of vertex:</span><br><span class="line">                if neighbor not marked:</span><br><span class="line">                    push neighbor to fringe</span><br></pre></td></tr></table></figure><h1 id="å›¾çš„è¡¨ç¤º"><a href="#å›¾çš„è¡¨ç¤º" class="headerlink" title="å›¾çš„è¡¨ç¤º"></a>å›¾çš„è¡¨ç¤º</h1><p>ç°åœ¨è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥è®¨è®ºå¦‚ä½•åœ¨ä»£ç ä¸­å®ç°è¿™äº›å›¾å’Œå›¾ç®—æ³•ã€‚</p><p>æˆ‘ä»¬å°†è®¨è®ºæˆ‘ä»¬çš„ API é€‰æ‹©ï¼Œä»¥åŠç”¨äºè¡¨ç¤ºå›¾çš„åº•å±‚æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬çš„å†³å®šå¯èƒ½ä¼šå¯¹æˆ‘ä»¬çš„è¿è¡Œæ—¶ã€å†…å­˜ä½¿ç”¨æƒ…å†µä»¥åŠå®ç°å„ç§å›¾ç®—æ³•çš„éš¾åº¦äº§ç”Ÿæ·±è¿œçš„å½±å“ã€‚</p><h2 id="å›¾-API"><a href="#å›¾-API" class="headerlink" title="å›¾ API"></a>å›¾ API</h2><p>APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰æ˜¯æˆ‘ä»¬ç±»çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ–¹æ³•ç­¾åï¼ˆæ¯ä¸ªå‡½æ•°æ¥å—çš„å‚æ•°&#x2F;å‚æ•°æ˜¯ä»€ä¹ˆï¼‰ä»¥åŠæœ‰å…³å®ƒä»¬è¡Œä¸ºçš„ä¿¡æ¯ã€‚ä½ å·²ç»è§è¿‡æ¥è‡ªJavaå¼€å‘è€…çš„APIï¼Œæ¯”å¦‚ä»–ä»¬æä¾›çš„ç±»ï¼Œæ¯”å¦‚ Dequeã€‚</p><p>å¯¹äºæˆ‘ä»¬çš„å›¾ APIï¼Œè®©æˆ‘ä»¬ä½¿ç”¨å°†æ¯ä¸ªå”¯ä¸€èŠ‚ç‚¹åˆ†é…ç»™ä¸€ä¸ªæ•´æ•°ç¼–å·çš„å¸¸è§çº¦å®šã€‚è¿™å¯ä»¥é€šè¿‡ç»´æŠ¤ä¸€ä¸ªæ˜ å°„æ¥å®ç°ï¼Œè¯¥æ˜ å°„å¯ä»¥å‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªåŸå§‹èŠ‚ç‚¹æ ‡ç­¾åˆ†é…çš„æ•´æ•°ã€‚è¿™æ ·åšå¯ä»¥è®©æˆ‘ä»¬å®šä¹‰æˆ‘ä»¬çš„ API ä¸“é—¨ä¸æ•´æ•°ä¸€èµ·å·¥ä½œï¼Œè€Œä¸æ˜¯å¼•å…¥å¯¹æ³›å‹ç±»å‹çš„éœ€æ±‚ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰æˆ‘ä»¬çš„ API çœ‹èµ·æ¥å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Graph</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Graph</span><span class="params">(<span class="type">int</span> V)</span>:               <span class="comment">// åˆ›å»ºå…·æœ‰ v ä¸ªé¡¶ç‚¹çš„ç©ºå›¾</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addEdge</span><span class="params">(<span class="type">int</span> v, <span class="type">int</span> w)</span>: <span class="comment">// æ·»åŠ ä¸€æ¡ v-w çš„è¾¹</span></span><br><span class="line">  Iterable&lt;Integer&gt; <span class="title function_">adj</span><span class="params">(<span class="type">int</span> v)</span>:      <span class="comment">// ä¸ v ç›¸é‚»çš„é¡¶ç‚¹</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">V</span><span class="params">()</span>:                           <span class="comment">// é¡¶ç‚¹æ•°</span></span><br><span class="line">  <span class="type">int</span> <span class="title function_">E</span><span class="params">()</span>:                           <span class="comment">// è¾¹æ•°</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼ˆå¸Œæœ›ä½¿ç”¨æˆ‘ä»¬çš„å›¾æ•°æ®ç»“æ„çš„äººï¼‰å¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„ä»»ä½•å‡½æ•°æ¥å®ç°è‡ªå·±çš„ç®—æ³•ã€‚æˆ‘ä»¬æä¾›çš„æ–¹æ³•å¯èƒ½ä¼šå¯¹æˆ‘ä»¬çš„å®¢æˆ·å®ç°ç‰¹å®šç®—æ³•çš„éš¾æ˜“ç¨‹åº¦äº§ç”Ÿé‡å¤§å½±å“ã€‚</p><h2 id="å›¾çš„è¡¨ç¤º-1"><a href="#å›¾çš„è¡¨ç¤º-1" class="headerlink" title="å›¾çš„è¡¨ç¤º"></a>å›¾çš„è¡¨ç¤º</h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¯ä»¥ç”¨äºè¡¨ç¤ºæˆ‘ä»¬çš„å›¾çš„åº•å±‚æ•°æ®ç»“æ„ã€‚</p><h3 id="é‚»æ¥çŸ©é˜µ"><a href="#é‚»æ¥çŸ©é˜µ" class="headerlink" title="é‚»æ¥çŸ©é˜µ"></a>é‚»æ¥çŸ©é˜µ</h3><p>ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨äºŒç»´æ•°ç»„ã€‚å½“ä¸”ä»…å½“å¯¹åº”çš„å•å…ƒæ ¼ä¸º 1 æ—¶ï¼ˆè¡¨ç¤ºä¸º trueï¼‰ï¼Œå­˜åœ¨ä»é¡¶ç‚¹ s åˆ° t çš„è¾¹ã€‚æ³¨æ„ï¼Œå¦‚æœå›¾æ˜¯æ— å‘çš„ï¼Œåˆ™é‚»æ¥çŸ©é˜µå°†åœ¨å…¶å¯¹è§’çº¿ä¸Šå¯¹ç§°ï¼ˆä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„å¯¹è§’çº¿ï¼‰ã€‚</p><h3 id="è¾¹é›†"><a href="#è¾¹é›†" class="headerlink" title="è¾¹é›†"></a>è¾¹é›†</h3><p>å¦ä¸€ç§æ–¹æ³•æ˜¯å­˜å‚¨æ‰€æœ‰è¾¹çš„å•ä¸ªé›†åˆã€‚</p><h3 id="é‚»æ¥è¡¨"><a href="#é‚»æ¥è¡¨" class="headerlink" title="é‚»æ¥è¡¨"></a>é‚»æ¥è¡¨</h3><p>ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ç»´æŠ¤ä¸€ä¸ªç”±é¡¶ç‚¹ç¼–å·ç´¢å¼•çš„åˆ—è¡¨æ•°ç»„ã€‚å½“ä¸”ä»…å½“ä» s åˆ° t å­˜åœ¨ä¸€æ¡è¾¹æ—¶ï¼Œæ•°ç»„ç´¢å¼•ä¸º s çš„åˆ—è¡¨å°†åŒ…å« tã€‚</p><p>å®é™…ä¸Šï¼Œé‚»æ¥è¡¨æ˜¯æœ€å¸¸è§çš„ï¼Œå› ä¸ºå›¾å¾€å¾€æ˜¯ç¨€ç–çš„ï¼ˆæ¯ä¸ªæ¡¶ä¸­æ²¡æœ‰å¤ªå¤šçš„è¾¹ï¼‰ã€‚</p><h2 id="æ•ˆç‡"><a href="#æ•ˆç‡" class="headerlink" title="æ•ˆç‡"></a>æ•ˆç‡</h2><p>æ‚¨é€‰æ‹©çš„åº•å±‚æ•°æ®ç»“æ„å¯ä»¥å½±å“å›¾çš„è¿è¡Œæ—¶å’Œå†…å­˜ä½¿ç”¨æƒ…å†µã€‚å¹»ç¯ç‰‡ä¸­çš„è¿™å¼ è¡¨æ€»ç»“äº†æ¯ç§è¡¨ç¤ºå½¢å¼å¯¹å„ç§æ“ä½œçš„æ•ˆç‡ã€‚åœ¨å°†æ­¤å†…å®¹å¤åˆ¶åˆ°æ‚¨çš„å¤‡å¿˜å•ä¸Šä¹‹å‰ï¼Œè¯·å…ˆèŠ±æ—¶é—´äº†è§£è¿™äº›è¾¹ç•Œæ˜¯ä»ä½•è€Œæ¥çš„ã€‚è®²åº§åŒ…å«äº†è§£é‡Šå…¶ä¸­å‡ ä¸ªå•å…ƒæ ¼èƒŒååŸç†çš„æ­¥éª¤ã€‚</p><p>æ­¤å¤–ï¼ŒåŸºäºé‚»æ¥è¡¨çš„å›¾ä¸Šçš„DFS&#x2F;BFSçš„è¿è¡Œæ—¶é—´ä¸º </p><p>O(V+E)ï¼Œè€ŒåŸºäºé‚»æ¥çŸ©é˜µçš„å›¾ä¸Šçš„è¿è¡Œæ—¶é—´ä¸º </p><p> )ã€‚è¯·å‚è€ƒå¹»ç¯ç‰‡ä»¥å¸®åŠ©ç†è§£ä¸ºä»€ä¹ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç¬”è®°(ä¸ƒ)-proj2</title>
      <link href="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/"/>
      <url>/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/</url>
      
        <content type="html"><![CDATA[<p><a href="https://sp21.datastructur.es/materials/proj/proj2/proj2">é¡¹ç›®2ï¼šGitlet | CS 61B 2021 å¹´æ˜¥å­£ â€” Project 2: Gitlet | CS 61B Spring 2021 (datastructur.es)</a>è¦æ±‚ä»‹ç»</p><h1 id="ç¿»è¯‘"><a href="#ç¿»è¯‘" class="headerlink" title="ç¿»è¯‘"></a>ç¿»è¯‘</h1><h2 id="é¡¹ç›®-2-Gitlet"><a href="#é¡¹ç›®-2-Gitlet" class="headerlink" title="é¡¹ç›® 2: Gitlet"></a>é¡¹ç›® 2: Gitlet</h2><h2 id="å…³äºæ­¤è§„èŒƒçš„è¯´æ˜"><a href="#å…³äºæ­¤è§„èŒƒçš„è¯´æ˜" class="headerlink" title="å…³äºæ­¤è§„èŒƒçš„è¯´æ˜"></a>å…³äºæ­¤è§„èŒƒçš„è¯´æ˜</h2><p>æ­¤è§„èŒƒç›¸å½“é•¿ã€‚å‰åŠéƒ¨åˆ†è¯¦ç»†æè¿°äº†æ‚¨å°†æ”¯æŒçš„æ¯ä¸ªå‘½ä»¤ï¼Œå¦ä¸€åŠæ˜¯æµ‹è¯•è¯¦ç»†ä¿¡æ¯å’Œä¸€äº›å»ºè®®ã€‚ä¸ºäº†å¸®åŠ©æ‚¨ç†è§£ï¼Œæˆ‘ä»¬å‡†å¤‡äº†è®¸å¤šé«˜è´¨é‡çš„è§†é¢‘ï¼Œæè¿°äº†è§„èŒƒçš„å„ä¸ªéƒ¨åˆ†ï¼Œå¹¶æä¾›å»ºè®®ã€‚æ‰€æœ‰è§†é¢‘éƒ½é“¾æ¥åœ¨æœ¬è§„èŒƒçš„ç›¸å…³ä½ç½®ï¼Œä½†æˆ‘ä»¬ä¹Ÿå°†åœ¨æ­¤åˆ—å‡ºå®ƒä»¬ä»¥æ–¹ä¾¿æ‚¨æŸ¥çœ‹ã€‚è¯·æ³¨æ„ï¼šè¿™äº›è§†é¢‘ä¸­çš„ä¸€äº›æ˜¯åœ¨ 2020 å¹´æ˜¥å­£åˆ›å»ºçš„ï¼Œå½“æ—¶ Gitlet æ˜¯é¡¹ç›® 3ï¼ŒCapers æ˜¯ Lab 12ï¼Œå¹¶ä¸”ä¸€äº›è§†é¢‘ç®€è¦æåŠäº† Hilfinger æ•™æˆçš„ CS 61B è®¾ç½®ï¼ˆåŒ…æ‹¬åä¸º <code>shared</code> çš„è¿œç¨‹ï¼Œåä¸º <code>repo</code> çš„å­˜å‚¨åº“ç­‰ï¼‰ã€‚è¯·å¿½ç•¥è¿™äº›å†…å®¹ï¼Œå› ä¸ºå®ƒä»¬å¯¹æœ¬å­¦æœŸçš„æ‚¨æ²¡æœ‰ä»»ä½•æœ‰ç”¨çš„ä¿¡æ¯ã€‚ä»»åŠ¡çš„å®é™…å†…å®¹æ²¡æœ‰æ”¹å˜ã€‚</p><ul><li><a href="https://www.youtube.com/watch?v=yWBzCAY_5UI">Git ä»‹ç» - ç¬¬ 1 éƒ¨åˆ†</a></li><li><a href="https://www.youtube.com/watch?v=CnMpARAOhFg">Git ä»‹ç» - ç¬¬ 2 éƒ¨åˆ†</a></li><li><a href="https://youtu.be/fvhqn5PeU_Q">ç›´æ’­è®²åº§ 12</a></li><li>Gitlet ä»‹ç»æ’­æ”¾åˆ—è¡¨<ul><li><a href="https://www.youtube.com/watch?v=-1gE2cNFhPA">ç¬¬ 1 éƒ¨åˆ†</a></li><li><a href="https://www.youtube.com/watch?v=GfmH9_8tM5w">ç¬¬ 2 éƒ¨åˆ†</a></li><li><a href="https://www.youtube.com/watch?v=dv5VdbIZKF8">ç¬¬ 3 éƒ¨åˆ†</a></li><li><a href="https://www.youtube.com/watch?v=k8jwbG8bE7Y">ç¬¬ 4 éƒ¨åˆ†</a></li><li><a href="https://cdn-uploads.piazza.com/attach/k5eevxebzpj25b/jqr7jm9igtc7l5/k97ipfmgmb3n/Gitlet_Slides.pdf">Itai ä½¿ç”¨çš„å¹»ç¯ç‰‡</a></li></ul></li><li><a href="https://www.youtube.com/watch?v=JR3OYCMv9b4&t=929s">åˆå¹¶æ¦‚è¿°å’Œç¤ºä¾‹</a></li><li><a href="https://youtu.be/desB3AS6aZg">åˆ†æ”¯æ¦‚è¿°å’Œç¤ºä¾‹</a></li><li><a href="https://www.youtube.com/watch?v=uMYpuQuHGu0&t=752s">æµ‹è¯•</a></li><li><a href="https://paper.dropbox.com/doc/Gitlet-Persistence--AyM0lOEaezWrTi7gG_Pt~bXcAg-zEnTGJhtUMtGr8ILYhoab">è®¾è®¡æŒä¹…æ€§ï¼ˆä¹¦é¢ç¬”è®°ï¼‰</a></li><li>2021 å¹´æ˜¥å­£åŠå…¬æ—¶é—´æ¼”ç¤ºï¼š<ul><li>å¼€å§‹ Gitlet<ul><li><a href="https://youtu.be/6JVdbNZm0cM">ç¬¬ 1 éƒ¨åˆ†</a></li><li><a href="https://youtu.be/1d1yOSoTVAM">ç¬¬ 2 éƒ¨åˆ†</a></li></ul></li><li>è®¾è®¡ Gitlet<ul><li><a href="https://sp21.datastructur.es/materials/proj/proj2/gitlet-design-notes.pdf">ç¬”è®°</a></li></ul></li><li><a href="https://youtu.be/l0X5NgzAWYQ">åˆå¹¶</a></li></ul></li></ul><p>éšç€æ›´å¤šèµ„æºçš„åˆ›å»ºï¼Œæˆ‘ä»¬å°†åœ¨æ­¤å¤„æ·»åŠ å®ƒä»¬ï¼Œå› æ­¤è¯·ç»å¸¸åˆ·æ–°ï¼</p><h2 id="Gitlet-æ¦‚è¿°"><a href="#Gitlet-æ¦‚è¿°" class="headerlink" title="Gitlet æ¦‚è¿°"></a>Gitlet æ¦‚è¿°</h2><p><strong>è­¦å‘Šï¼š</strong>ç¡®ä¿æ‚¨åœ¨è¿›è¡Œæ­¤é¡¹ç›®ä¹‹å‰å·²å®Œæˆ<a href="https://sp21.datastructur.es/materials/lab/lab6/lab6">å®éªŒ 6: Canine Capers</a>ã€‚å®éªŒ 6 æ—¨åœ¨ä»‹ç»æ­¤é¡¹ç›®ï¼Œå¹¶å°†éå¸¸æœ‰åŠ©äºå¯åŠ¨å’Œç¡®ä¿æ‚¨å·²åšå¥½å‡†å¤‡ã€‚æ‚¨è¿˜åº”è¯¥è§‚çœ‹<a href="https://youtu.be/fvhqn5PeU_Q">ç›´æ’­è®²åº§ 12: Gitlet</a>ï¼Œè¯¥è®²åº§ä»‹ç»äº†æ­¤é¡¹ç›®çš„è®¸å¤šæœ‰ç”¨æƒ³æ³•ã€‚</p><p>åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œæ‚¨å°†å®ç°ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ¨¡ä»¿äº†æµè¡Œç³»ç»Ÿ Git çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ã€‚ä½†æˆ‘ä»¬çš„ç³»ç»Ÿæ›´å°æ›´ç®€å•ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å‘½åä¸º Gitletã€‚</p><p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯ä¸€ç§ç›¸å…³æ–‡ä»¶é›†çš„å¤‡ä»½ç³»ç»Ÿã€‚Gitlet æ”¯æŒçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p><ol><li>ä¿å­˜æ•´ä¸ªæ–‡ä»¶ç›®å½•çš„å†…å®¹ã€‚åœ¨ Gitlet ä¸­ï¼Œè¿™ç§°ä¸º<em>æäº¤</em>ï¼Œä¿å­˜çš„å†…å®¹æœ¬èº«ç§°ä¸º<em>æäº¤</em>ã€‚</li><li>æ¢å¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–æ•´ä¸ªæäº¤çš„ç‰ˆæœ¬ã€‚åœ¨ Gitlet ä¸­ï¼Œè¿™ç§°ä¸º<em>æ£€å‡º</em>è¿™äº›æ–‡ä»¶æˆ–è¯¥æäº¤ã€‚</li><li>æŸ¥çœ‹å¤‡ä»½å†å²ã€‚åœ¨ Gitlet ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨ç§°ä¸º<em>æ—¥å¿—</em>çš„å†…å®¹ä¸­æŸ¥çœ‹æ­¤å†å²è®°å½•ã€‚</li><li>ç»´æŠ¤ç›¸å…³çš„æäº¤åºåˆ—ï¼Œç§°ä¸º<em>åˆ†æ”¯</em>ã€‚</li><li>å°†åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸­è¿›è¡Œçš„æ›´æ”¹åˆå¹¶åˆ°å¦ä¸€ä¸ªåˆ†æ”¯ä¸­ã€‚</li></ol><p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ç›®çš„æ˜¯å¸®åŠ©æ‚¨åˆ›å»ºå¤æ‚ï¼ˆç”šè‡³ä¸é‚£ä¹ˆå¤æ‚ï¼‰çš„é¡¹ç›®ï¼Œæˆ–è€…ä¸ä»–äººå…±åŒåœ¨é¡¹ç›®ä¸Šåˆä½œã€‚æ‚¨ä¼šå®šæœŸä¿å­˜é¡¹ç›®çš„ç‰ˆæœ¬ã€‚å¦‚æœä»¥åæŸä¸ªæ—¶åˆ»æ„å¤–åœ°æä¹±äº†æ‚¨çš„ä»£ç ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°†æºä»£ç æ¢å¤åˆ°ä¹‹å‰æäº¤çš„ç‰ˆæœ¬ï¼ˆè€Œä¸ä¼šä¸¢å¤±æ­¤åæ‰€åšçš„ä»»ä½•æ›´æ”¹ï¼‰ã€‚å¦‚æœæ‚¨çš„åˆä½œè€…åšäº†ä¸€äº›æ›´æ”¹å¹¶ä½“ç°åœ¨æäº¤ä¸­ï¼Œåˆ™å¯ä»¥å°†è¿™äº›æ›´æ”¹åˆå¹¶åˆ°è‡ªå·±çš„ç‰ˆæœ¬ä¸­ã€‚</p><p>åœ¨ Gitlet ä¸­ï¼Œæ‚¨ä¸ä»…å¯ä»¥ä¸€æ¬¡æäº¤å•ä¸ªæ–‡ä»¶ã€‚ç›¸åï¼Œæ‚¨å¯ä»¥åŒæ—¶æäº¤ä¸€ç»„ç›¸å…³æ–‡ä»¶ã€‚æˆ‘ä»¬å–œæ¬¢å°†æ¯ä¸ªæäº¤è§†ä¸ºæ‚¨é¡¹ç›®åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„<em>å¿«ç…§</em>ã€‚ä½†ä¸ºç®€å•èµ·è§ï¼Œæœ¬æ–‡æ¡£å‰©ä½™éƒ¨åˆ†ä¸­çš„è®¸å¤šç¤ºä¾‹æ¶‰åŠæ¯æ¬¡æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶ã€‚åªéœ€è®°ä½ï¼Œæ‚¨å¯ä»¥åœ¨æ¯æ¬¡æäº¤ä¸­æ›´æ”¹å¤šä¸ªæ–‡ä»¶ã€‚</p><p>åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†å¯è§†åŒ–éšæ—¶é—´è¿›è¡Œçš„æäº¤ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªé¡¹ç›®ï¼ŒåªåŒ…å«æ–‡ä»¶ wug.txtï¼Œæˆ‘ä»¬å‘å…¶ä¸­æ·»åŠ äº†ä¸€äº›æ–‡æœ¬å¹¶æäº¤äº†å®ƒã€‚ç„¶åæˆ‘ä»¬ä¿®æ”¹äº†æ–‡ä»¶å¹¶æäº¤äº†è¿™äº›</p><p>æ›´æ”¹ã€‚ç„¶åæˆ‘ä»¬å†æ¬¡ä¿®æ”¹äº†æ–‡ä»¶ï¼Œå¹¶å†æ¬¡æäº¤äº†æ›´æ”¹ã€‚ç°åœ¨æˆ‘ä»¬å·²ä¿å­˜äº†è¿™ä¸ªæ–‡ä»¶çš„ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æ™šäºä¹‹å‰çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å¯è§†åŒ–è¿™äº›æäº¤ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/three_commits.png" alt="ä¸‰æ¬¡æäº¤"></p><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç»˜åˆ¶äº†ä¸€ä¸ªç®­å¤´ï¼ŒæŒ‡ç¤ºæ¯ä¸ªæäº¤åŒ…å«å¯¹ä¹‹å‰æäº¤çš„æŸç§å¼•ç”¨ã€‚æˆ‘ä»¬å°†å‰é¢çš„æäº¤ç§°ä¸º<em>çˆ¶æäº¤</em>â€”â€”è¿™åœ¨åé¢ä¼šå¾ˆé‡è¦ã€‚ä½†æ˜¯ç°åœ¨ï¼Œè¿™ä¸ªå›¾çœ‹èµ·æ¥ç†Ÿæ‚‰å—ï¼Ÿæ²¡é”™ï¼›è¿™æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼</p><p>Gitlet çš„é‡è¦æ€æƒ³æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™æ ·çš„åˆ—è¡¨ä¸­å¯è§†åŒ–æˆ‘ä»¬æ–‡ä»¶çš„ä¸åŒç‰ˆæœ¬çš„å†å²ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ¢å¤æ–‡ä»¶çš„æ—§ç‰ˆæœ¬ã€‚æ‚¨å¯ä»¥æƒ³è±¡åˆ¶ä½œä¸€ä¸ªå‘½ä»¤ï¼šâ€œGitletï¼Œè¯·æ¢å¤åˆ°æäº¤ï¼ƒ2æ—¶çš„æ–‡ä»¶çŠ¶æ€â€ï¼Œå®ƒä¼šè½¬åˆ°é“¾è¡¨ä¸­çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œå¹¶æ¢å¤åœ¨é‚£é‡Œæ‰¾åˆ°çš„æ–‡ä»¶çš„å‰¯æœ¬ï¼ŒåŒæ—¶åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼Œä½†ä¸åˆ é™¤ç¬¬äºŒä¸ªèŠ‚ç‚¹ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶ã€‚</p><p>å¦‚æœæˆ‘ä»¬å‘Šè¯‰ Gitlet æ¢å¤åˆ°æ—§æäº¤ï¼Œé‚£ä¹ˆé“¾è¡¨çš„å‰é¢å°†ä¸å†åæ˜ æ–‡ä»¶çš„å½“å‰çŠ¶æ€ï¼Œè¿™å¯èƒ½æœ‰ç‚¹è¯¯å¯¼ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªç§°ä¸º<em>å¤´æŒ‡é’ˆ</em>ï¼ˆä¹Ÿç§°ä¸º HEAD æŒ‡é’ˆï¼‰çš„ä¸œè¥¿ã€‚å¤´æŒ‡é’ˆè·Ÿè¸ªæˆ‘ä»¬å½“å‰æ‰€åœ¨çš„é“¾è¡¨ä¸­çš„ä½ç½®ã€‚é€šå¸¸ï¼Œå½“æˆ‘ä»¬è¿›è¡Œæäº¤æ—¶ï¼Œå¤´æŒ‡é’ˆå°†ä¿ç•™åœ¨é“¾è¡¨çš„å‰ç«¯ï¼Œè¡¨ç¤ºæœ€æ–°çš„æäº¤åæ˜ äº†æ–‡ä»¶çš„å½“å‰çŠ¶æ€ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/simple_head.png" alt="ç®€å•çš„å¤´éƒ¨"></p><p>ç„¶è€Œï¼Œå‡è®¾æˆ‘ä»¬æ¢å¤åˆ°æäº¤ï¼ƒ2æ—¶çš„æ–‡ä»¶çŠ¶æ€ï¼ˆä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ˜¯ <em>é‡ç½®</em> å‘½ä»¤ï¼Œæ‚¨ç¨åä¼šçœ‹åˆ°ï¼‰ã€‚æˆ‘ä»¬å°†å¤´æŒ‡é’ˆç§»å›ä»¥æ˜¾ç¤ºæ­¤ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/reverted_head.png" alt="æ¢å¤çš„å¤´éƒ¨"></p><p>è¿™é‡Œæˆ‘ä»¬è¯´æˆ‘ä»¬å¤„äº<em>åˆ†ç¦»çš„å¤´çŠ¶æ€</em>ï¼Œæ‚¨å¯èƒ½ä¹‹å‰é‡åˆ°è¿‡è¿™ä¸ªã€‚è¿™å°±æ˜¯å®ƒçš„å«ä¹‰ï¼</p><p>ç¼–è¾‘ 3&#x2F;5ï¼šè¯·æ³¨æ„ï¼Œåœ¨ Gitlet ä¸­ï¼Œç”±äºæ²¡æœ‰ <code>checkout</code> å‘½ä»¤ä¼šå°† HEAD æŒ‡é’ˆç§»åŠ¨åˆ°ç‰¹å®šæäº¤ï¼Œå› æ­¤ä¸å¯èƒ½å¤„äºåˆ†ç¦» HEAD çŠ¶æ€ã€‚<code>reset</code> å‘½ä»¤ä¼šæ‰§è¡Œæ­¤æ“ä½œï¼Œå°½ç®¡å®ƒä¹Ÿä¼šç§»åŠ¨åˆ†æ”¯æŒ‡é’ˆã€‚å› æ­¤ï¼Œåœ¨ Gitlet ä¸­ï¼Œæ‚¨æ°¸è¿œä¸ä¼šå¤„äºåˆ†ç¦»çš„ HEAD çŠ¶æ€ã€‚</p><p>å¥½äº†ï¼Œç°åœ¨ï¼Œå¦‚æœè¿™å°±æ˜¯ Gitlet æ‰€èƒ½åšçš„ä¸€åˆ‡ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„ç³»ç»Ÿã€‚ä½†æ˜¯ Gitlet è¿˜æœ‰ä¸€ä¸ªæ›´èªæ˜çš„åŠŸèƒ½ï¼šå®ƒä¸ä»…ç»´æŠ¤æ–‡ä»¶çš„æ—§ç‰ˆæœ¬å’Œæ–°ç‰ˆæœ¬ï¼Œè¿˜å¯ä»¥ç»´æŠ¤<em>ä¸åŒçš„</em>ç‰ˆæœ¬ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨æ­£åœ¨ç¼–å†™ä¸€ä¸ªé¡¹ç›®ï¼Œæ‚¨å¯¹å¦‚ä½•è¿›è¡Œä»¥ä¸‹ä¸¤ç§æƒ³æ³•ï¼šè®©æˆ‘ä»¬ç§°å…¶ä¸­ä¸€ç§ä¸ºè®¡åˆ’ Aï¼Œå¦ä¸€ç§ä¸ºè®¡åˆ’ Bã€‚Gitlet å…è®¸æ‚¨ä¿å­˜è¿™ä¸¤ä¸ªç‰ˆæœ¬ï¼Œå¹¶éšæ—¶åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚è¿™å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/two_versions.png" alt="ä¸¤ä¸ªç‰ˆæœ¬"></p><p>å®ƒä¸å†æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å®ƒæ›´åƒæ˜¯ä¸€æ£µæ ‘ã€‚æˆ‘ä»¬å°†è¿™ä¸ªä¸œè¥¿ç§°ä¸º<em>æäº¤æ ‘</em>ã€‚ä¿æŒè¿™ä¸ªéšå–»ï¼Œå„ä¸ªå•ç‹¬çš„ç‰ˆæœ¬ç§°ä¸ºæ ‘çš„<em>åˆ†æ”¯</em>ã€‚æ‚¨å¯ä»¥å•ç‹¬å¼€å‘æ¯ä¸ªç‰ˆæœ¬ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/two_developed_versions.png" alt="ä¸¤ä¸ªå¼€å‘ç‰ˆæœ¬"></p><p>æ ‘ä¸­æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œè¡¨ç¤ºæ¯ä¸ªåˆ†æ”¯çš„æœ€è¿œç‚¹ã€‚åœ¨ä»»ä½•ç»™å®šæ—¶é—´ï¼Œåªæœ‰ä¸€ä¸ªæ˜¯å½“å‰æ´»åŠ¨æŒ‡é’ˆï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å¤´æŒ‡é’ˆã€‚å¤´æŒ‡é’ˆæ˜¯å½“å‰åˆ†æ”¯å‰ç«¯çš„æŒ‡é’ˆã€‚</p><p>è¿™å°±æ˜¯æˆ‘ä»¬å¯¹ Gitlet ç³»ç»Ÿçš„ç®€è¦æ¦‚è¿°ï¼å¦‚æœæ‚¨è¿˜ä¸å®Œå…¨äº†è§£ï¼Œè¯·ä¸è¦æ‹…å¿ƒï¼›ä¸Šé¢çš„éƒ¨åˆ†åªæ˜¯ä¸ºäº†ç»™æ‚¨ä¸€ä¸ªé«˜å±‚æ¬¡çš„å›¾ç‰‡ï¼Œè¯´æ˜å®ƒçš„ç›®çš„æ˜¯åšä»€ä¹ˆã€‚æ¥ä¸‹æ¥çš„è¯¦ç»†è§„èŒƒå°†åœ¨æ­¤éƒ¨åˆ†åé¢ã€‚</p><p>ä½†æ˜¯åœ¨è¿™é‡Œæœ€åä¸€å¥è¯ï¼šæäº¤æ ‘æ˜¯<em>ä¸å¯å˜çš„</em>ï¼šä¸€æ—¦åˆ›å»ºäº†æäº¤èŠ‚ç‚¹ï¼Œå°±æ— æ³•é”€æ¯ï¼ˆæˆ–è€…æ ¹æœ¬æ— æ³•æ›´æ”¹ï¼‰ã€‚æˆ‘ä»¬åªèƒ½å‘æäº¤æ ‘æ·»åŠ æ–°å†…å®¹ï¼Œè€Œä¸èƒ½ä¿®æ”¹ç°æœ‰å†…å®¹ã€‚è¿™æ˜¯ Gitlet çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Gitlet çš„ä¸€ä¸ªç›®æ ‡æ˜¯å…è®¸æˆ‘ä»¬ä¿å­˜ä¸œè¥¿ï¼Œä»¥å…æ„å¤–åˆ é™¤å®ƒä»¬ã€‚</p><h2 id="å†…éƒ¨ç»“æ„"><a href="#å†…éƒ¨ç»“æ„" class="headerlink" title="å†…éƒ¨ç»“æ„"></a>å†…éƒ¨ç»“æ„</h2><p>çœŸæ­£çš„ Git åŒºåˆ†äº†å‡ ç§ä¸åŒçš„<em>å¯¹è±¡</em>ã€‚å°±æˆ‘ä»¬çš„ç›®çš„è€Œè¨€ï¼Œé‡è¦çš„å¯¹è±¡åŒ…æ‹¬</p><ul><li><strong>blobs</strong>ï¼šæ–‡ä»¶çš„ä¿å­˜å†…å®¹ã€‚ç”±äº Gitlet ä¿å­˜æ–‡ä»¶çš„å¤šä¸ªç‰ˆæœ¬ï¼Œå› æ­¤å•ä¸ªæ–‡ä»¶å¯èƒ½å¯¹åº”äºå¤šä¸ª blobsï¼šæ¯ä¸ª blobs åœ¨ä¸åŒæäº¤ä¸­è¢«è·Ÿè¸ªã€‚</li><li><strong>trees</strong>ï¼šå°†åç§°æ˜ å°„åˆ° blobs å’Œå…¶ä»–æ ‘ï¼ˆå­ç›®å½•ï¼‰çš„ç›®å½•ç»“æ„ã€‚</li><li><strong>commits</strong>ï¼šåŒ…å«æ—¥å¿—æ¶ˆæ¯ã€å…¶ä»–å…ƒæ•°æ®ï¼ˆæäº¤æ—¥æœŸã€ä½œè€…ç­‰ï¼‰ã€å¯¹æ ‘çš„å¼•ç”¨ä»¥åŠå¯¹çˆ¶æäº¤çš„å¼•ç”¨çš„ç»„åˆã€‚å­˜å‚¨åº“è¿˜ç»´æŠ¤ä»<em>åˆ†æ”¯å¤´</em>åˆ°å¯¹æäº¤çš„å¼•ç”¨çš„æ˜ å°„ï¼Œä»¥ä¾¿æŸäº›é‡è¦çš„æäº¤å…·æœ‰ç¬¦å·åç§°ã€‚</li></ul><p>Gitlet è¿›ä¸€æ­¥ç®€åŒ–äº† Gitï¼Œå…·ä½“åŒ…æ‹¬</p><ul><li>å°†æ ‘ç»“æ„åˆå¹¶åˆ°æäº¤ä¸­ï¼Œè€Œä¸å¤„ç†å­ç›®å½•ï¼ˆå› æ­¤æ¯ä¸ªå­˜å‚¨åº“å°†æœ‰ä¸€ä¸ªâ€œå¹³é¢â€ç›®å½•ï¼Œå…¶ä¸­åŒ…å«æ™®é€šæ–‡ä»¶ï¼‰ã€‚</li><li>é™åˆ¶æˆ‘ä»¬å°†åˆå¹¶ä¸ä¸¤ä¸ª</li></ul><p>çˆ¶äº²è”ç³»èµ·æ¥ï¼ˆåœ¨çœŸå®çš„ Git ä¸­ï¼Œå¯ä»¥æœ‰ä»»æ„æ•°é‡çš„çˆ¶äº²ã€‚ï¼‰</p><ul><li>æˆ‘ä»¬çš„å…ƒæ•°æ®ä»…åŒ…å«æ—¶é—´æˆ³å’Œæ—¥å¿—æ¶ˆæ¯ã€‚å› æ­¤ï¼Œæäº¤å°†ç”±æ—¥å¿—æ¶ˆæ¯ã€æ—¶é—´æˆ³ã€æ–‡ä»¶ååˆ° blob å¼•ç”¨çš„æ˜ å°„ã€çˆ¶å¼•ç”¨ä»¥åŠï¼ˆå¯¹äºåˆå¹¶ï¼‰ç¬¬äºŒçˆ¶å¼•ç”¨ç»„æˆã€‚</li></ul><p>æˆ‘ä»¬çš„æ¯ä¸ªå¯¹è±¡â€”â€”æˆ‘ä»¬çš„æ¯ä¸ª blob å’Œæ¯ä¸ªæäº¤ï¼Œåœ¨æˆ‘ä»¬çš„æƒ…å†µä¸‹â€”â€”éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•° idï¼Œå®ƒä½œä¸ºå¯¹è¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚Git çš„ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯è¿™äº› id æ˜¯<em>å…¨å±€</em>çš„ï¼šä¸å…¸å‹çš„ Java å®ç°ä¸åŒï¼Œå…·æœ‰å®Œå…¨ç›¸åŒå†…å®¹çš„ä¸¤ä¸ªå¯¹è±¡åœ¨æ‰€æœ‰ç³»ç»Ÿä¸Šï¼ˆå³æˆ‘çš„è®¡ç®—æœºã€æ‚¨çš„è®¡ç®—æœºå’Œä»»ä½•å…¶ä»–äººçš„è®¡ç®—æœºï¼‰ä¸Šéƒ½å…·æœ‰ç›¸åŒçš„ idï¼ˆå³ä¸¤ä¸ªå¯¹è±¡åœ¨ä¸åŒè®¡ç®—æœºä¸Šå…·æœ‰ç›¸åŒçš„ idï¼‰ã€‚åœ¨ blobs çš„æƒ…å†µä¸‹ï¼Œâ€œç›¸åŒå†…å®¹â€æ„å‘³ç€ç›¸åŒçš„æ–‡ä»¶å†…å®¹ã€‚åœ¨æäº¤çš„æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ç›¸åŒçš„å…ƒæ•°æ®ã€åç§°åˆ°å¼•ç”¨çš„æ˜ å°„å’Œçˆ¶å¼•ç”¨ã€‚å­˜å‚¨åº“ä¸­çš„å¯¹è±¡å› æ­¤è¢«ç§°ä¸º<em>å†…å®¹å¯»å€</em>ã€‚</p><p>Git å’Œ Gitlet é€šè¿‡ä½¿ç”¨ä¸€ä¸ªåä¸º SHA-1ï¼ˆSecure Hash 1ï¼‰çš„<em>åŠ å¯†æ•£åˆ—å‡½æ•°</em>å®ç°äº†è¿™ä¸€ç‚¹ï¼Œè¯¥å‡½æ•°å¯ä»¥ä»ä»»æ„å­—èŠ‚åºåˆ—äº§ç”Ÿä¸€ä¸ª 160 ä½æ•´æ•°å“ˆå¸Œã€‚åŠ å¯†å“ˆå¸Œå‡½æ•°çš„ç‰¹æ€§æ˜¯æéš¾æ‰¾åˆ°å…·æœ‰ç›¸åŒå“ˆå¸Œå€¼çš„ä¸¤ä¸ªä¸åŒçš„å­—èŠ‚æµï¼ˆæˆ–è€…åœ¨ä»…ç»™å‡ºå…¶å“ˆå¸Œå€¼çš„æƒ…å†µä¸‹æ‰¾åˆ°<em>ä»»ä½•</em>å­—èŠ‚æµï¼‰ï¼Œå› æ­¤ä»æœ¬è´¨ä¸Šè®²ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾ä»»ä½•ä¸¤ä¸ªå…·æœ‰ä¸åŒå†…å®¹çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„ SHA-1 å“ˆå¸Œå€¼çš„æ¦‚ç‡æ˜¯ 2-160 æˆ–çº¦ä¸º 10-48ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘ä»¬ç®€å•åœ°å¿½ç•¥äº†å“ˆå¸Œç¢°æ’çš„å¯èƒ½æ€§ï¼Œå› æ­¤åŸåˆ™ä¸Šç³»ç»Ÿå…·æœ‰ä¸€ä¸ªåŸºæœ¬çš„ç¼ºé™·ï¼Œä½†åœ¨å®è·µä¸­ä»æœªå‘ç”Ÿï¼</p><p>å¹¸è¿çš„æ˜¯ï¼Œæœ‰ç”¨äºè®¡ç®— SHA-1 å€¼çš„åº“ç±»ï¼Œå› æ­¤æ‚¨ä¸å¿…å¤„ç†å®é™…ç®—æ³•ã€‚æ‚¨éœ€è¦åšçš„ä¸€åˆ‡å°±æ˜¯ç¡®ä¿æ­£ç¡®åœ°æ ‡è®°æ‰€æœ‰å¯¹è±¡ã€‚ç‰¹åˆ«æ˜¯ï¼Œè¿™åŒ…æ‹¬</p><ul><li>åœ¨è®¡ç®—æäº¤çš„å“ˆå¸Œå€¼æ—¶åŒ…æ‹¬æ‰€æœ‰å…ƒæ•°æ®å’Œå¼•ç”¨ã€‚</li><li>åœ¨ blobs å’Œæäº¤çš„å“ˆå¸Œä¹‹é—´æŸç§åŒºåˆ†ã€‚é€šè¿‡ <code>.gitlet</code> ç›®å½•å†…éƒ¨çš„ä¸€ç§ç²¾å¿ƒè€ƒè™‘çš„ç›®å½•ç»“æ„æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ä¸ºæ¯ä¸ªå¯¹è±¡æ·»åŠ ä¸€ä¸ªé¢å¤–çš„å­—ï¼Œè¯¥å­—å¯¹äº blobs å’Œæäº¤å…·æœ‰ä¸€ä¸ªå€¼ã€‚</li></ul><p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒSHA-1 å“ˆå¸Œå€¼ï¼Œè¡¨ç¤ºä¸º 40 å­—ç¬¦çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ˜¯å°†æ•°æ®å­˜å‚¨åœ¨ <code>.gitlet</code> ç›®å½•ä¸­çš„æ–¹ä¾¿æ–‡ä»¶åï¼ˆç¨åä¼šè¯¦ç»†ä»‹ç»ï¼‰ã€‚å®ƒè¿˜æä¾›äº†ä¸€ç§æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶ï¼ˆblobsï¼‰ä»¥æŸ¥çœ‹å®ƒä»¬æ˜¯å¦å…·æœ‰ç›¸åŒå†…å®¹çš„æ–¹ä¾¿æ–¹æ³•ï¼šå¦‚æœå®ƒä»¬çš„ SHA-1 ç›¸åŒï¼Œåˆ™æˆ‘ä»¬ç®€å•åœ°å‡è®¾è¿™äº›æ–‡ä»¶æ˜¯ç›¸åŒçš„ã€‚</p><p>å¯¹äºè¿œç¨‹ï¼ˆä¾‹å¦‚æˆ‘ä»¬æ•´ä¸ªå­¦æœŸéƒ½åœ¨ä½¿ç”¨çš„ <code>skeleton</code>ï¼‰ï¼Œæˆ‘ä»¬å°†åªæ˜¯ä½¿ç”¨å…¶ä»– Gitlet å­˜å‚¨åº“ã€‚æ¨é€æ„å‘³ç€å°†è¿œç¨‹å­˜å‚¨åº“å°šæœªæ‹¥æœ‰çš„æ‰€æœ‰æäº¤å’Œ blobs å¤åˆ¶åˆ°è¿œç¨‹å­˜å‚¨åº“ï¼Œå¹¶é‡ç½®åˆ†æ”¯å¼•ç”¨ã€‚æ‹‰å–ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä½†æ–¹å‘ç›¸åã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œè¿œç¨‹æ˜¯é¢å¤–çš„å­¦åˆ†ï¼Œä¸æ˜¯å¿…é¡»çš„ã€‚</p><p>è¯»å–å’Œå†™å…¥å†…éƒ¨å¯¹è±¡åˆ°æ–‡ä»¶å…¶å®ç›¸å½“å®¹æ˜“ï¼Œè¿™è¦å½’åŠŸäºJavaçš„<em>åºåˆ—åŒ–</em>åŠŸèƒ½ã€‚æ¥å£<code>java.io.Serializable</code>æ²¡æœ‰æ–¹æ³•ï¼Œä½†å¦‚æœä¸€ä¸ªç±»å®ç°äº†å®ƒï¼Œé‚£ä¹ˆJavaè¿è¡Œæ—¶å°†è‡ªåŠ¨æä¾›ä¸€ç§å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµçš„æ–¹æ³•ï¼Œç„¶åæ‚¨å¯ä»¥ä½¿ç”¨I&#x2F;Oç±»<code>java.io.ObjectOutputStream</code>å°†å…¶å†™å…¥æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨<code>java.io.ObjectInputStream</code>è¯»å–ï¼ˆååºåˆ—åŒ–ï¼‰ã€‚æœ¯è¯­â€œåºåˆ—åŒ–â€æŒ‡çš„æ˜¯å°†æŸç§ä»»æ„ç»“æ„ï¼ˆæ•°ç»„ã€æ ‘ã€å›¾ç­‰ï¼‰è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ã€‚ä½ åº”è¯¥åœ¨å®éªŒ6ä¸­å·²ç»è§è¿‡å¹¶ç»ƒä¹ äº†åºåˆ—åŒ–ã€‚ä½ å°†åœ¨è¿™é‡Œä½¿ç”¨ä¸€ä¸ªéå¸¸ç±»ä¼¼çš„æ–¹æ³•ï¼Œå› æ­¤åœ¨æŒä¹…æ€§å’Œåºåˆ—åŒ–æ–¹é¢è¯·ä½¿ç”¨ä½ çš„lab6ä½œä¸ºå‚è€ƒã€‚</p><p>ä¸‹é¢æ˜¯æœ¬èŠ‚è®¨è®ºçš„ç»“æ„çš„æ‘˜è¦ç¤ºä¾‹ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ¯ä¸ªæäº¤ï¼ˆçŸ©å½¢ï¼‰æŒ‡å‘ä¸€äº›Blobï¼ˆåœ†åœˆï¼‰ï¼Œå…¶ä¸­åŒ…å«æ–‡ä»¶å†…å®¹ã€‚æäº¤åŒ…å«æ–‡ä»¶åå’Œå¯¹è¿™äº›Blobçš„å¼•ç”¨ï¼Œä»¥åŠçˆ¶é“¾æ¥ã€‚è¿™äº›å¼•ç”¨ï¼Œè¡¨ç¤ºä¸ºç®­å¤´ï¼Œåœ¨<code>.gitlet</code>ç›®å½•ä¸­ä½¿ç”¨å®ƒä»¬çš„SHA-1å“ˆå¸Œå€¼è¡¨ç¤ºï¼ˆåœ¨æäº¤ä¸Šæ–¹å’ŒBlobä¸‹æ–¹çš„å°åå…­è¿›åˆ¶æ•°å€¼ï¼‰ã€‚æ›´æ–°çš„æäº¤åŒ…å«<code>wug1.txt</code>çš„æ›´æ–°ç‰ˆæœ¬ï¼Œä½†ä¸æ—§æäº¤ç›¸åŒç‰ˆæœ¬çš„<code>wug2.txt</code>ã€‚ä½ çš„æäº¤ç±»å°†ä»¥æŸç§æ–¹å¼å­˜å‚¨æ­¤å›¾è¡¨æ˜¾ç¤ºçš„æ‰€æœ‰ä¿¡æ¯ï¼šä»”ç»†é€‰æ‹©å†…éƒ¨æ•°æ®ç»“æ„å°†ä½¿å®ç°å˜å¾—æ›´å®¹æ˜“æˆ–æ›´éš¾ï¼Œå› æ­¤ä½ åº”è¯¥èŠ±æ—¶é—´è®¡åˆ’å’Œè€ƒè™‘æœ€ä½³å­˜å‚¨æ–¹å¼ã€‚</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/commits-and-blobs.png" alt="ä¸¤ä¸ªæäº¤åŠå…¶Blob"></p><h2 id="è¡Œä¸ºçš„è¯¦ç»†è§„èŒƒ"><a href="#è¡Œä¸ºçš„è¯¦ç»†è§„èŒƒ" class="headerlink" title="è¡Œä¸ºçš„è¯¦ç»†è§„èŒƒ"></a>è¡Œä¸ºçš„è¯¦ç»†è§„èŒƒ</h2><h3 id="æ€»ä½“è§„èŒƒ"><a href="#æ€»ä½“è§„èŒƒ" class="headerlink" title="æ€»ä½“è§„èŒƒ"></a>æ€»ä½“è§„èŒƒ</h3><p>æˆ‘ä»¬å”¯ä¸€ç»™ä½ çš„ç»“æ„è¦æ±‚æ˜¯ä½ å¿…é¡»æœ‰ä¸€ä¸ªåä¸º<code>gitlet.Main</code>çš„ç±»ï¼Œå¹¶ä¸”å®ƒå¿…é¡»æœ‰ä¸€ä¸ªä¸»æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬è¿˜ä¸ºæ‚¨æä¾›äº†ä¸€äº›ç”¨äºæ‰§è¡Œè®¸å¤šä¸æ–‡ä»¶ç³»ç»Ÿç›¸å…³çš„ä»»åŠ¡çš„å®ç”¨æ–¹æ³•ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥é›†ä¸­ç²¾åŠ›äºé¡¹ç›®çš„é€»è¾‘ï¼Œè€Œä¸æ˜¯å¤„ç†æ“ä½œç³»ç»Ÿçš„ç‰¹æ®Šæ€§ã€‚</p><p>æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸¤ä¸ªå»ºè®®çš„ç±»ï¼š<code>Commit</code>å’Œ<code>Repository</code>ä»¥å¸®åŠ©æ‚¨å…¥é—¨ã€‚å½“ç„¶ï¼Œæ‚¨å¯ä»¥ç¼–å†™å…¶ä»–Javaç±»æ¥æ”¯æŒæ‚¨çš„é¡¹ç›®ï¼Œæˆ–è€…å¦‚æœæ‚¨æ„¿æ„ï¼Œå¯ä»¥åˆ é™¤æˆ‘ä»¬å»ºè®®çš„ç±»ã€‚ä½†æ˜¯ä¸è¦ä½¿ç”¨ä»»ä½•å¤–éƒ¨ä»£ç ï¼ˆé™¤äº†JUnitï¼‰ï¼Œä¹Ÿä¸è¦ä½¿ç”¨é™¤Javaä¹‹å¤–çš„ä»»ä½•ç¼–ç¨‹è¯­è¨€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ‚¨å¸Œæœ›ä½¿ç”¨çš„æ‰€æœ‰Javaæ ‡å‡†åº“ï¼Œä»¥åŠæˆ‘ä»¬æä¾›çš„å®ç”¨ç¨‹åºã€‚</p><p><strong>ä½ ä¸åº”è¯¥åœ¨Mainç±»ä¸­åšæ‰€æœ‰äº‹æƒ…ã€‚</strong>æ‚¨çš„Mainç±»åº”è¯¥ä¸»è¦è°ƒç”¨<code>Repository</code>ç±»ä¸­çš„è¾…åŠ©æ–¹æ³•ã€‚æŸ¥çœ‹å®éªŒ6çš„<code>CapersRepository</code>å’Œ<code>Main</code>ç±»ï¼Œä»¥äº†è§£æˆ‘ä»¬å»ºè®®çš„ç»“æ„ç¤ºä¾‹ã€‚</p><p>è¿™ä»½è§„èŒƒçš„å¤§éƒ¨åˆ†å†…å®¹å°†æè¿°å½“<code>Gitlet.java</code>çš„ä¸»æ–¹æ³•æ”¶åˆ°å„ç§gitletå‘½ä»¤ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æ—¶å¿…é¡»å¦‚ä½•ååº”ã€‚ä½†åœ¨æˆ‘ä»¬é€æ¡åˆ†è§£å‘½ä»¤ä¹‹å‰ï¼Œè¿™é‡Œæœ‰ä¸€äº›æ•´ä½“æŒ‡å—æ•´ä¸ªé¡¹ç›®éƒ½åº”è¯¥æ»¡è¶³çš„ï¼š</p><ul><li>ä¸ºäº†ä½¿Gitletæ­£å¸¸å·¥ä½œï¼Œå®ƒå°†éœ€è¦ä¸€ä¸ªå­˜å‚¨æ—§æ–‡ä»¶å‰¯æœ¬å’Œå…¶ä»–å…ƒæ•°æ®çš„åœ°æ–¹ã€‚æ‰€æœ‰è¿™äº›ä¸œè¥¿<strong>å¿…é¡»</strong>å­˜å‚¨åœ¨åä¸º<code>.gitlet</code>çš„ç›®å½•ä¸­ï¼Œå°±åƒå®é™…çš„gitç³»ç»Ÿä¸­çš„ä¿¡æ¯å­˜å‚¨åœ¨åä¸º<code>.git</code>çš„ç›®å½•ä¸­ä¸€æ ·ï¼ˆä»¥<code>.</code>å¼€å¤´çš„æ–‡ä»¶æ˜¯éšè—æ–‡ä»¶ã€‚æ‚¨æ— æ³•åœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿä¸Šé»˜è®¤çœ‹åˆ°å®ƒä»¬ã€‚åœ¨Unixä¸Šï¼Œå‘½ä»¤<code>ls -a</code>å°†æ˜¾ç¤ºå®ƒä»¬ã€‚ï¼‰å¦‚æœåœ¨ä¸€ä¸ªä½ç½®æœ‰ä¸€ä¸ª<code>.gitlet</code>ç›®å½•ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºGitletç³»ç»Ÿåœ¨é‚£é‡Œâ€œåˆå§‹åŒ–â€äº†ã€‚å¤§å¤šæ•°Gitletå‘½ä»¤ï¼ˆé™¤äº†<code>init</code>å‘½ä»¤ï¼‰åªéœ€è¦åœ¨åˆå§‹åŒ–äº†Gitletç³»ç»Ÿçš„ç›®å½•ä¸­ä½¿ç”¨æ—¶æ‰èƒ½å·¥ä½œâ€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒ…å«<code>.gitlet</code>ç›®å½•çš„ç›®å½•ä¸­ã€‚ä¸åœ¨æ‚¨çš„<code>.gitlet</code>ç›®å½•ä¸­çš„æ–‡ä»¶ï¼ˆå®ƒä»¬æ˜¯æ‚¨ä½¿ç”¨å’Œç¼–è¾‘çš„ä»“åº“ä¸­çš„æ–‡ä»¶çš„å‰¯æœ¬ï¼Œä»¥åŠæ‚¨è®¡åˆ’æ·»åŠ åˆ°ä»“åº“ä¸­çš„æ–‡ä»¶ï¼‰è¢«ç§°ä¸ºæ‚¨<em>å·¥ä½œç›®å½•</em>ä¸­çš„æ–‡ä»¶ã€‚</li><li>å¤§å¤šæ•°å‘½ä»¤æœ‰è¿è¡Œæ—¶æˆ–å†…å­˜ä½¿ç”¨è¦æ±‚ã€‚æ‚¨å¿…é¡»éµå¾ªè¿™äº›è¦æ±‚ã€‚å…¶ä¸­ä¸€äº›è¿è¡Œæ—¶æè¿°ä¸ºå¸¸é‡â€œç›¸å¯¹äºä»»ä½•é‡è¦åº¦é‡â€ã€‚é‡è¦åº¦é‡åŒ…æ‹¬ï¼šæ–‡ä»¶çš„æ•°é‡æˆ–å¤§å°çš„ä»»ä½•åº¦é‡ï¼Œæäº¤æ•°é‡çš„ä»»ä½•åº¦é‡ã€‚æ‚¨å¯ä»¥å¿½ç•¥åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–æ‰€éœ€çš„æ—¶é—´ï¼Œ<em>ä½†æœ‰ä¸€ä¸ªä¾‹å¤–ï¼Œå³æ‚¨çš„åºåˆ—åŒ–æ—¶é—´ä¸èƒ½ä»¥ä»»ä½•æ–¹å¼ä¾èµ–å·²æ·»åŠ ã€æäº¤ç­‰æ–‡ä»¶çš„æ€»å¤§å°</em>ï¼ˆä»€ä¹ˆæ˜¯åºåˆ—åŒ–ï¼Ÿå¦‚æœæ‚¨ä¸çŸ¥é“ï¼Œè¯·å›é¡¾å®éªŒ6ï¼ï¼‰ã€‚æ‚¨è¿˜å¯ä»¥å‡è®¾ä»å“ˆå¸Œè¡¨ä¸­è·å–æ˜¯å¸¸é‡æ—¶é—´ã€‚</li><li>ä¸€äº›å‘½ä»¤å…·æœ‰å¸¦æœ‰æŒ‡å®šé”™è¯¯æ¶ˆæ¯çš„å¤±è´¥æƒ…å†µã€‚è¿™äº›é”™è¯¯æ¶ˆæ¯çš„ç¡®åˆ‡æ ¼å¼ç¨ååœ¨è§„èŒƒä¸­æŒ‡å®šã€‚æ‰€æœ‰é”™è¯¯æ¶ˆæ¯éƒ½ä»¥å¥å·ç»“å°¾ï¼›ç”±äºæˆ‘ä»¬çš„è‡ªåŠ¨åˆ†çº§æ˜¯æ–‡å­—æ€§çš„ï¼Œè¯·åŠ¡å¿…åŒ…æ‹¬å®ƒã€‚å¦‚æœæ‚¨çš„ç¨‹åºæ›¾é‡åˆ°å…¶ä¸­ä¸€ç§å¤±è´¥æƒ…å†µï¼Œåˆ™å¿…é¡»æ‰“å°é”™è¯¯æ¶ˆæ¯å¹¶ä¸æ›´æ”¹ä»»ä½•å…¶ä»–å†…å®¹ã€‚<em>æ‚¨ä¸éœ€è¦å¤„ç†é™¤åˆ—å‡ºä¸ºå¤±è´¥æƒ…å†µä¹‹å¤–çš„ä»»ä½•å…¶ä»–é”™è¯¯æƒ…å†µ</em>ã€‚</li><li>æœ‰ä¸€äº›å¤±è´¥æƒ…å†µæ‚¨éœ€è¦å¤„ç†ï¼Œè¿™äº›å¤±è´¥æƒ…å†µä¸é€‚ç”¨äºç‰¹å®šå‘½ä»¤ã€‚è¿™é‡Œå®ƒä»¬æ˜¯ï¼š<ul><li>å¦‚æœç”¨æˆ·æ²¡æœ‰è¾“å…¥ä»»ä½•å‚æ•°ï¼Œè¯·æ‰“å°æ¶ˆæ¯ <code>Please enter a command.</code> å¹¶é€€å‡ºã€‚</li><li>å¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„å‘½ä»¤ï¼Œè¯·æ‰“å°æ¶ˆæ¯ <code>No command with that name exists.</code> å¹¶é€€å‡ºã€‚</li><li>å¦‚æœç”¨æˆ·è¾“å…¥å…·æœ‰é”™è¯¯æ•°é‡æˆ–æ ¼å¼çš„æ“ä½œæ•°çš„å‘½ä»¤ï¼Œè¯·æ‰“å°æ¶ˆæ¯ <code>Incorrect operands.</code> å¹¶é€€å‡ºã€‚</li><li>å¦‚æœç”¨æˆ·è¾“å…¥ä¸€ä¸ªéœ€è¦åœ¨åˆå§‹åŒ–çš„ Gitlet å·¥ä½œç›®å½•ä¸­ï¼ˆå³åŒ…å« <code>.gitlet</code> å­ç›®å½•çš„ç›®å½•ï¼‰çš„å‘½ä»¤ï¼Œä½†ä¸åœ¨è¿™æ ·çš„ç›®å½•ä¸­ï¼Œåˆ™æ‰“å°æ¶ˆæ¯ <code>Not in an initialized Gitlet directory.</code></li><li>ä¸€äº›å‘½ä»¤ä¸çœŸå®çš„ Git æœ‰æ‰€ä¸åŒã€‚è§„èŒƒæ²¡æœ‰è¯¦å°½åˆ—å‡ºä¸ Git çš„ <em>æ‰€æœ‰</em> ä¸åŒä¹‹å¤„ï¼Œä½†å®ƒç¡®å®åˆ—å‡ºäº†ä¸€äº›è¾ƒå¤§æˆ–æ½œåœ¨æ··æ·†å’Œè¯¯å¯¼çš„å·®å¼‚ã€‚</li><li><strong>ä¸è¦</strong> è¾“å‡ºé™¤äº†è§„èŒƒä¸­æ‰€è¯´çš„ä¹‹å¤–çš„ä»»ä½•å†…å®¹ã€‚æˆ‘ä»¬çš„è‡ªåŠ¨è¯„åˆ†æµ‹è¯•ä¸­å¯èƒ½ä¼šæœ‰ä¸€äº›æ‰“å°ä¸å¿…è¦ä¿¡æ¯çš„æµ‹è¯•ä¼šå‡ºé”™ã€‚</li><li>è‹¥è¦ç«‹å³é€€å‡ºç¨‹åºï¼Œæ‚¨å¯ä»¥è°ƒç”¨ <code>System.exit(0)</code>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨è¾…åŠ©å‡½æ•°ä¸­å‘ç”Ÿé”™è¯¯ï¼Œå¹¶ä¸”æ‚¨å¸Œæœ› gitlet ç«‹å³ç»ˆæ­¢ï¼Œåˆ™åº”è°ƒç”¨æ­¤å‡½æ•°ã€‚<strong>æ³¨æ„ï¼šæ‚¨åº”è¯¥å§‹ç»ˆä¸º <code>System.exit(0)</code> å‘½ä»¤æä¾›å‚æ•° 0</strong>ã€‚åœ¨ 61C ä¸­ï¼Œæ‚¨å°†äº†è§£å‚æ•°ï¼ˆç§°ä¸ºé”™è¯¯ä»£ç ï¼‰çš„å«ä¹‰ã€‚</li><li>è§„èŒƒå°†ä¸€äº›å‘½ä»¤åˆ†ç±»ä¸ºâ€œå±é™©â€ã€‚å±é™©å‘½ä»¤æ˜¯é‚£äº›å¯èƒ½è¦†ç›–æ–‡ä»¶ï¼ˆä¸ä»…ä»…æ˜¯å…ƒæ•°æ®ï¼‰çš„å‘½ä»¤ - ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·å‘Šè¯‰ Gitlet å°†æ–‡ä»¶æ¢å¤åˆ°æ—§ç‰ˆæœ¬ï¼ŒGitlet å¯èƒ½ä¼šè¦†ç›–æ–‡ä»¶çš„å½“å‰ç‰ˆæœ¬ã€‚è¯·æ³¨æ„ã€‚å› æ­¤ï¼Œåœ¨æµ‹è¯•è¿™äº›å‘½ä»¤ä¹‹å‰ï¼Œè¯·æˆ´ä¸Šå¤´ç›” :)</li></ul></li></ul><h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>æˆ‘ä»¬ç°åœ¨å°†è¯¦ç»†ä»‹ç»æ‚¨å¿…é¡»æ”¯æŒçš„æ¯ä¸ªå‘½ä»¤ã€‚è¯·è®°ä½ï¼Œä¼˜ç§€çš„ç¨‹åºå‘˜å§‹ç»ˆå…³å¿ƒä»–ä»¬çš„æ•°æ®ç»“æ„ï¼šå½“æ‚¨é˜…è¯»è¿™äº›å‘½ä»¤æ—¶ï¼Œæ‚¨åº”è¯¥é¦–å…ˆè€ƒè™‘å¦‚ä½•å­˜å‚¨æ‚¨çš„æ•°æ®ä»¥ä¾¿è½»æ¾æ”¯æŒè¿™äº›å‘½ä»¤ï¼Œå¹¶å…¶æ¬¡è€ƒè™‘æ˜¯å¦æœ‰æœºä¼šé‡ç”¨æ‚¨å·²ç»å®ç°çš„å‘½ä»¤ï¼ˆæç¤ºï¼šåœ¨é¡¹ç›®2çš„åç»­éƒ¨åˆ†ä¸­ï¼Œæ‚¨å·²ç»åœ¨é¡¹ç›®2çš„è¾ƒæ—©éƒ¨åˆ†ä¸­ç¼–å†™çš„ä»£ç å¯ä»¥å¾—åˆ°å……åˆ†çš„é‡ç”¨æœºä¼šï¼‰ã€‚æˆ‘ä»¬åœ¨ä¸€äº›æˆ‘ä»¬å‘ç°æœ‰ç”¨çš„æ–¹æ³•ä¸­åˆ—å‡ºäº†è®²åº§ï¼Œä½†æ‚¨ä¸å¿…ä½¿ç”¨è¿™äº›è®²åº§ä¸­çš„æ¦‚å¿µã€‚ä¸€äº›æ›´åŠ å¤æ‚çš„å‘½ä»¤ä¸Šæœ‰æ¦‚å¿µæ€§çš„æµ‹éªŒï¼Œæ‚¨åº”è¯¥ä½¿ç”¨å®ƒä»¬æ¥æ£€æŸ¥æ‚¨çš„ç†è§£ã€‚<strong>è¿™äº›æµ‹éªŒä¸è®¡å…¥æˆç»©</strong>ï¼Œå®ƒä»¬åªæ˜¯å¸®åŠ©æ‚¨åœ¨å°è¯•å®ç°å‘½ä»¤ä¹‹å‰æ£€æŸ¥æ‚¨çš„ç†è§£ã€‚</p><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main init</code></li><li><strong>æè¿°</strong>ï¼šåœ¨å½“å‰ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ Gitlet ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿå°†è‡ªåŠ¨å¼€å§‹ä¸€ä¸ªæäº¤ï¼šä¸€ä¸ªä¸åŒ…å«æ–‡ä»¶ä¸”å…·æœ‰æäº¤æ¶ˆæ¯ <code>initial commit</code>ï¼ˆå°±æ˜¯è¿™æ ·ï¼Œæ²¡æœ‰æ ‡ç‚¹ç¬¦å·ï¼‰ã€‚å®ƒå°†æœ‰ä¸€ä¸ªå•ä¸€åˆ†æ”¯ï¼š<code>master</code>ï¼Œæœ€åˆæŒ‡å‘æ­¤åˆå§‹æäº¤ï¼Œå¹¶ä¸”<code>master</code>å°†æ˜¯å½“å‰åˆ†æ”¯ã€‚æ­¤åˆå§‹æäº¤çš„æ—¶é—´æˆ³å°†ä¸º 00:00:00 UTCï¼ŒThursday, 1 January 1970ï¼Œä»¥æ‚¨é€‰æ‹©çš„æ—¥æœŸæ ¼å¼ï¼ˆè¿™è¢«ç§°ä¸ºâ€œUnix çºªå…ƒâ€ï¼Œå†…éƒ¨ç”±æ—¶é—´ 0 è¡¨ç¤ºï¼‰ã€‚ç”±äºç”± Gitlet åˆ›å»ºçš„æ‰€æœ‰å­˜å‚¨åº“ä¸­çš„åˆå§‹æäº¤éƒ½å…·æœ‰å®Œå…¨ç›¸åŒçš„å†…å®¹ï¼Œå› æ­¤æ‰€æœ‰å­˜å‚¨åº“å°†è‡ªåŠ¨å…±äº«æ­¤æäº¤ï¼ˆå®ƒä»¬å°†å…·æœ‰ç›¸åŒçš„ UIDï¼‰ï¼Œå¹¶ä¸”æ‰€æœ‰å­˜å‚¨åº“ä¸­çš„æ‰€æœ‰æäº¤éƒ½å°†è¿½æº¯åˆ°å®ƒã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>ï¼šç›¸å¯¹äºä»»ä½•é‡è¦æŒ‡æ ‡ï¼Œåº”è¯¥æ˜¯æ’å®šçš„ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœå½“å‰ç›®å½•ä¸­å·²ç»å­˜åœ¨ Gitlet ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåˆ™åº”ä¸­æ­¢ã€‚ä¸åº”ä½¿ç”¨æ–°ç³»ç»Ÿè¦†ç›–ç°æœ‰ç³»ç»Ÿã€‚åº”æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A Gitlet version-control system already exists in the current directory.</code>ã€‚</li><li><strong>å±é™©å—</strong>ï¼šå¦</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>ï¼š~15</li></ul><h3 id="add"><a href="#add" class="headerlink" title="add"></a>add</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main add [æ–‡ä»¶å]</code></li><li><strong>æè¿°</strong>ï¼šå°†æ–‡ä»¶çš„å½“å‰å‰¯æœ¬æ·»åŠ åˆ°<em>æš‚å­˜åŒº</em>ï¼ˆå‚è§ <code>commit</code> å‘½ä»¤çš„æè¿°ï¼‰ã€‚å› æ­¤ï¼Œæ·»åŠ æ–‡ä»¶ä¹Ÿç§°ä¸º<em>ä¸ºæ·»åŠ è€Œæš‚å­˜</em>æ–‡ä»¶ã€‚å°†å·²ç»æš‚å­˜çš„æ–‡ä»¶æš‚å­˜ä¼šä½¿ç”¨æ–°å†…å®¹è¦†ç›–æš‚å­˜åŒºä¸­çš„å…ˆå‰æ¡ç›®ã€‚æš‚å­˜åŒºåº”è¯¥ä½äº<code>.gitlet</code>çš„æŸä¸ªåœ°æ–¹ã€‚å¦‚æœæ–‡ä»¶çš„å½“å‰å·¥ä½œç‰ˆæœ¬ä¸å½“å‰æäº¤ä¸­çš„ç‰ˆæœ¬ç›¸åŒï¼Œåˆ™ä¸è¦å°†å…¶æš‚å­˜ä»¥æ·»åŠ ï¼Œå¹¶ä¸”å¦‚æœå·²ç»å­˜åœ¨ï¼ˆå½“æ–‡ä»¶æ›´æ”¹ã€æ·»åŠ ï¼Œç„¶åæ›´æ”¹å›å…¶åŸå§‹ç‰ˆæœ¬æ—¶å¯èƒ½ä¼šå‘ç”Ÿï¼‰çš„æƒ…å†µä¸‹ï¼Œä»æš‚å­˜åŒºåˆ é™¤å®ƒã€‚æ–‡ä»¶å°†ä¸å†è¢«æš‚å­˜ä»¥åˆ é™¤ï¼ˆè¯·å‚è§ <code>gitlet rm</code>ï¼‰ï¼Œå¦‚æœåœ¨å‘½ä»¤æ—¶å¤„äºè¯¥çŠ¶æ€ã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>ï¼šåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œåº”ç›¸å¯¹äºè¦æ·»åŠ çš„æ–‡ä»¶çš„å¤§å°å’Œ lgNlgâ¡ï¿½ è¿è¡Œï¼Œå…¶ä¸­ Nï¿½ æ˜¯æäº¤ä¸­çš„æ–‡ä»¶æ•°é‡ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>File does not exist.</code> å¹¶ä¸”é€€å‡ºè€Œä¸æ›´æ”¹ä»»ä½•å†…å®¹ã€‚</li><li><strong>å±é™©å—</strong>ï¼šå¦</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>ï¼š~20</li><li><strong>ä¸çœŸå® git çš„åŒºåˆ«</strong>ï¼šåœ¨çœŸå®çš„ git ä¸­ï¼Œå¯ä»¥ä¸€æ¬¡æ·»åŠ å¤šä¸ªæ–‡ä»¶ã€‚åœ¨ gitlet ä¸­ï¼Œä¸€æ¬¡åªèƒ½æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ã€‚</li><li><strong>å»ºè®®çš„è®²åº§</strong>ï¼šè®²åº§16ï¼ˆé›†åˆã€æ˜ å°„ã€ADTsï¼‰ã€è®²åº§19ï¼ˆå“ˆå¸Œï¼‰</li></ul><h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><ul><li><p><strong>ç”¨æ³•</strong>: <code>java gitlet.Main commit [æ¶ˆæ¯]</code></p></li><li><p><strong>æè¿°</strong>: åœ¨å½“å‰æäº¤å’Œæš‚å­˜åŒºä¿å­˜å·²è·Ÿè¸ªæ–‡ä»¶çš„å¿«ç…§ï¼Œä»¥ä¾¿ç¨åå¯ä»¥æ¢å¤ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ã€‚è¯¥æäº¤è¢«ç§°ä¸º<em>è·Ÿè¸ª</em>ä¿å­˜çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæäº¤çš„æ–‡ä»¶å¿«ç…§å°†ä¸å…¶çˆ¶æäº¤çš„æ–‡ä»¶å¿«ç…§å®Œå…¨ç›¸åŒï¼›å®ƒå°†ä¿ç•™æ–‡ä»¶çš„ç‰ˆæœ¬å®Œå…¨ä¸å˜ï¼Œä¸ä¼šæ›´æ–°å®ƒä»¬ã€‚æäº¤ä»…ä¼šæ›´æ–°åœ¨æäº¤æ—¶å·²æ ‡è®°ä¸ºè¦æ·»åŠ çš„æ–‡ä»¶çš„å†…å®¹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæäº¤ç°åœ¨å°†åŒ…å«å·²æ ‡è®°ä¸ºè¦æ·»åŠ çš„æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä»å…¶çˆ¶æäº¤ä¸­è·å–çš„ç‰ˆæœ¬ã€‚æäº¤å°†ä¿å­˜å¹¶å¼€å§‹è·Ÿè¸ªä»»ä½•å·²æ ‡è®°ä¸ºè¦æ·»åŠ ä½†çˆ¶æäº¤æœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚æœ€åï¼Œç”±äºè¢«<code>rm</code>å‘½ä»¤ï¼ˆä¸‹é¢ï¼‰æ ‡è®°ä¸º<em>è¦åˆ é™¤</em>ï¼Œå½“å‰æäº¤ä¸­è·Ÿè¸ªçš„æ–‡ä»¶å¯èƒ½ä¼šåœ¨æ–°æäº¤ä¸­è¢«å–æ¶ˆè·Ÿè¸ªã€‚</p><p>è¦ç‚¹æ€»ç»“ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œæäº¤çš„æ–‡ä»¶å†…å®¹ä¸å…¶çˆ¶æäº¤ç›¸åŒã€‚æ ‡è®°ä¸ºè¦æ·»åŠ å’Œåˆ é™¤çš„æ–‡ä»¶æ˜¯æäº¤çš„æ›´æ–°å†…å®¹ã€‚å½“ç„¶ï¼Œæ—¥æœŸï¼ˆä»¥åŠå¯èƒ½æ˜¯æ¶ˆæ¯ï¼‰ä¹Ÿä¸çˆ¶æäº¤ä¸åŒã€‚</p><p>å…³äºæäº¤çš„ä¸€äº›é™„åŠ è¯´æ˜ï¼š</p><ul><li>æäº¤åŒºåœ¨æäº¤åè¢«æ¸…é™¤ã€‚</li><li>æäº¤å‘½ä»¤æ°¸è¿œä¸ä¼šåœ¨å·¥ä½œç›®å½•ä¸­æ·»åŠ ã€æ›´æ”¹æˆ–åˆ é™¤æ–‡ä»¶ï¼ˆé™¤äº†<code>.gitlet</code>ç›®å½•ä¸­çš„æ–‡ä»¶ï¼‰ã€‚<code>rm</code>å‘½ä»¤<em>å°†</em>åˆ é™¤è¿™äº›æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ ‡è®°ä¸ºè¦åˆ é™¤ï¼Œä»¥ä¾¿åœ¨<code>commit</code>åå®ƒä»¬å°†ä¸å†è¢«è·Ÿè¸ªã€‚</li><li>åœ¨æ·»åŠ æˆ–åˆ é™¤ä¹‹åå¯¹æ–‡ä»¶è¿›è¡Œçš„ä»»ä½•æ›´æ”¹éƒ½å°†è¢«<code>commit</code>å‘½ä»¤å¿½ç•¥ï¼Œå®ƒ<em>åª</em>ä¿®æ”¹<code>.gitlet</code>ç›®å½•çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨Unixçš„<code>rm</code>å‘½ä»¤ï¼ˆè€Œä¸æ˜¯Gitletçš„åŒåå‘½ä»¤ï¼‰åˆ é™¤ä¸€ä¸ªå·²è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå¯¹ä¸‹ä¸€ä¸ªæäº¤æ²¡æœ‰å½±å“ï¼Œä¸‹ä¸€ä¸ªæäº¤ä»å°†åŒ…å«ï¼ˆç°åœ¨å·²åˆ é™¤çš„ï¼‰æ–‡ä»¶ç‰ˆæœ¬ã€‚</li><li>æäº¤å‘½ä»¤åï¼Œæ–°æäº¤å°†ä½œä¸ºæäº¤æ ‘ä¸­çš„æ–°èŠ‚ç‚¹æ·»åŠ ã€‚</li><li>åˆšåˆšè¿›è¡Œçš„æäº¤å°†æˆä¸ºâ€œå½“å‰æäº¤â€ï¼Œå¹¶ä¸”å¤´æŒ‡é’ˆç°åœ¨æŒ‡å‘å®ƒã€‚å…ˆå‰çš„å¤´æäº¤æ˜¯æ­¤æäº¤çš„çˆ¶æäº¤ã€‚</li><li>æ¯ä¸ªæäº¤åº”åŒ…å«å…¶åˆ¶ä½œæ—¶é—´å’Œæ—¥æœŸã€‚</li><li>æ¯ä¸ªæäº¤éƒ½æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„æ—¥å¿—æ¶ˆæ¯ï¼Œæè¿°æäº¤ä¸­æ–‡ä»¶çš„æ›´æ”¹ã€‚è¿™æ˜¯ç”±ç”¨æˆ·æŒ‡å®šçš„ã€‚æ•´ä¸ªæ¶ˆæ¯åº”ä»…å ç”¨ä¼ é€’ç»™<code>main</code>çš„<code>args</code>æ•°ç»„ä¸­çš„ä¸€ä¸ªæ¡ç›®ã€‚è¦åŒ…å«å¤šä¸ªå•è¯çš„æ¶ˆæ¯ï¼Œæ‚¨å¿…é¡»å°†å…¶ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</li><li>æ¯ä¸ªæäº¤ç”±å…¶SHA-1 idæ ‡è¯†ï¼Œè¯¥idå¿…é¡»åŒ…æ‹¬å…¶æ–‡ä»¶ï¼ˆblobï¼‰å¼•ç”¨ã€çˆ¶å¼•ç”¨ã€æ—¥å¿—æ¶ˆæ¯å’Œæäº¤æ—¶é—´ã€‚</li></ul></li><li><p><strong>è¿è¡Œæ—¶é—´</strong>: è¿è¡Œæ—¶é—´åº”ä¸æäº¤æ•°é‡çš„ä»»ä½•åº¦é‡ç›¸å…³çš„å¸¸é‡ã€‚è¿è¡Œæ—¶å¿…é¡»ä¸ä¼šæ¯”è·Ÿè¸ªçš„æ–‡ä»¶æ€»å¤§å°çš„çº¿æ€§å·®ã€‚æ­¤å¤–ï¼Œæ­¤å‘½ä»¤å…·æœ‰å†…å­˜è¦æ±‚ï¼šæäº¤å¿…é¡»å°†<code>.gitlet</code>ç›®å½•çš„å¤§å°å¢åŠ çš„é‡ä¸å¾—è¶…è¿‡æäº¤æ—¶æš‚å­˜è¦æ·»åŠ çš„æ–‡ä»¶çš„æ€»å¤§å°ï¼Œä¸åŒ…æ‹¬é™„åŠ å…ƒæ•°æ®ã€‚è¿™æ„å‘³ç€ä¸è¦å­˜å‚¨æäº¤ä»å…¶çˆ¶é¡¹æ¥æ”¶çš„æ–‡ä»¶ç‰ˆæœ¬çš„å†—ä½™å‰¯æœ¬ï¼ˆæç¤ºï¼šè¯·è®°ä½blobæ˜¯å†…å®¹å¯å¯»å€çš„ï¼Œå¹¶åˆ©ç”¨SHA1ä¼˜åŠ¿ï¼‰ã€‚æ‚¨<em>å¯ä»¥</em>ä¿å­˜å®Œæ•´çš„é™„åŠ æ–‡ä»¶å‰¯æœ¬ï¼›ä¸è¦æ‹…å¿ƒä»…ä¿å­˜å·®å¼‚æˆ–ç±»ä¼¼çš„äº‹æƒ…ã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœæ²¡æœ‰æ–‡ä»¶è¢«æš‚å­˜ï¼Œåˆ™ä¸­æ­¢ã€‚æ‰“å°æ¶ˆæ¯<code>No changes added to the commit.</code>ã€‚æ¯ä¸ªæäº¤å¿…é¡»æœ‰ä¸€ä¸ªéç©ºæ¶ˆæ¯ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>Please enter a commit message.</code>ã€‚å¯¹äºå·²è·Ÿè¸ªæ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸­ç¼ºå¤±æˆ–æ›´æ”¹çš„æƒ…å†µ<em>ä¸</em>ç®—æ˜¯å¤±è´¥ã€‚å®Œå…¨å¿½ç•¥<code>.gitlet</code>ç›®å½•å¤–çš„æ‰€æœ‰å†…å®¹ã€‚</p></li><li><p><strong>å±é™©æ€§</strong>: æ²¡æœ‰</p></li><li><p><strong>ä¸çœŸå®Gitçš„ä¸åŒä¹‹å¤„</strong>: åœ¨çœŸå®çš„Gitä¸­ï¼Œæäº¤å¯èƒ½æœ‰å¤šä¸ªçˆ¶æäº¤ï¼ˆç”±äºåˆå¹¶ï¼‰å¹¶ä¸”è¿˜å…·æœ‰æ›´å¤šå…ƒæ•°æ®ã€‚</p></li><li><p><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~35</p></li><li><p><strong>å»ºè®®çš„è®²åº§</strong>: è®²åº§19ï¼ˆé›†åˆã€æ˜ å°„ã€ADTsï¼‰ã€è®²åº§19ï¼ˆå“ˆå¸Œï¼‰</p></li></ul><p>è¿™æ˜¯æäº¤ä¹‹å‰å’Œä¹‹åçš„å›¾ç‰‡ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/before_and_after_commit.png" alt="Before and after commit"></p><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main rm [æ–‡ä»¶å]</code></li><li><strong>æè¿°</strong>: å¦‚æœæ–‡ä»¶å½“å‰å·²æš‚å­˜ä»¥æ·»åŠ ï¼Œåˆ™å–æ¶ˆæš‚å­˜è¯¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶åœ¨å½“å‰æäº¤ä¸­è¢«è·Ÿè¸ªï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºåˆ é™¤ï¼Œå¹¶ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤è¯¥æ–‡ä»¶ï¼ˆé™¤éç”¨æˆ·å·²ç»è¿™æ ·åšï¼Œå¦åˆ™<em>ä¸è¦</em>åˆ é™¤å®ƒï¼‰ã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºä»»ä½•é‡è¦åº¦é‡çš„å¸¸é‡æ—¶é—´è¿è¡Œã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœæ–‡ä»¶æ—¢æ²¡æœ‰è¢«æš‚å­˜ä¹Ÿæ²¡æœ‰è¢«å½“å‰æäº¤è·Ÿè¸ªï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>No reason to remove the file.</code>ã€‚</li><li><strong>å±é™©æ€§</strong>: æ˜¯çš„ï¼ˆå°½ç®¡å¦‚æœä½¿ç”¨æˆ‘ä»¬çš„å®ç”¨æ–¹æ³•ï¼Œæ‚¨åªä¼šæŸå®³æ‚¨çš„å­˜å‚¨åº“æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‚¨ç›®å½•ä¸­çš„æ‰€æœ‰å…¶ä»–æ–‡ä»¶ã€‚ï¼‰</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~20</li></ul><h3 id="log"><a href="#log" class="headerlink" title="log"></a>log</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main log</code></li><li><strong>æè¿°</strong>: ä»å½“å‰å¤´æäº¤å¼€å§‹ï¼Œæ²¿ç€æäº¤æ ‘å‘åæ˜¾ç¤ºæ¯ä¸ªæäº¤çš„ä¿¡æ¯ï¼Œç›´åˆ°åˆå§‹æäº¤ï¼Œè·Ÿéšç¬¬ä¸€ä¸ªçˆ¶æäº¤é“¾æ¥ï¼Œå¿½ç•¥åˆå¹¶æäº¤ä¸­æ‰¾åˆ°çš„ä»»ä½•ç¬¬äºŒçˆ¶æäº¤ï¼ˆåœ¨å¸¸è§„Gitä¸­ï¼Œè¿™å°±æ˜¯ä½¿ç”¨<code>git log --first-parent</code>å¾—åˆ°çš„ï¼‰ã€‚è¿™ç»„æäº¤èŠ‚ç‚¹ç§°ä¸ºæäº¤çš„<em>å†å²è®°å½•</em>ã€‚å¯¹äºå†å²è®°å½•ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œåº”æ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯æäº¤IDã€æäº¤æ—¶é—´å’Œæäº¤æ¶ˆæ¯ã€‚ä»¥ä¸‹æ˜¯åº”éµå¾ªçš„<em>ç¡®åˆ‡</em>æ ¼å¼ç¤ºä¾‹ï¼š</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">===</span><br><span class="line">commit a0da1ea5a15ab613bf9961fd86f010cf74c7ee48</span><br><span class="line">Date: Thu Nov 9 20:00:05 2017 -0800</span><br><span class="line">A commit message.</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ff</span><br><span class="line">Date: Thu Nov 9 17:01:33 2017 -0800</span><br><span class="line">Another commit message.</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">commit e881c9575d180a215d1a636545b8fd9abfb1d2bb</span><br><span class="line">Date: Wed Dec 31 16:00:00 1969 -0800</span><br><span class="line">initial commit</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªæäº¤ä¹‹å‰éƒ½æœ‰ä¸€ä¸ª<code>===</code>ï¼Œå¹¶ä¸”åœ¨å…¶åæœ‰ä¸€ä¸ªç©ºè¡Œã€‚ä¸çœŸå®Gitä¸€æ ·ï¼Œæ¯ä¸ªæ¡ç›®æ˜¾ç¤ºæäº¤å¯¹è±¡çš„å”¯ä¸€SHA-1 IDã€‚æäº¤ä¸­æ˜¾ç¤ºçš„æ—¶é—´æˆ³åæ˜ å½“å‰æ—¶åŒºï¼Œè€Œä¸æ˜¯UTCï¼›å› æ­¤ï¼Œåˆå§‹æäº¤çš„æ—¶é—´æˆ³ä¸æ˜¯<code>Thursday, January 1st, 1970, 00:00:00</code>ï¼Œè€Œæ˜¯ç›¸åº”çš„å¤ªå¹³æ´‹æ ‡å‡†æ—¶é—´ã€‚æ‚¨æ‰€åœ¨çš„æ—¶åŒºå¯èƒ½å› æ‚¨çš„å±…ä½åœ°è€Œå¼‚ï¼Œè¿™æ²¡å…³ç³»ã€‚</p><p>å°†æœ€æ–°çš„æäº¤æ˜¾ç¤ºåœ¨é¡¶éƒ¨ã€‚é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œæ‚¨ä¼šå‘ç°Javaç±»<code>java.util.Date</code>å’Œ<code>java.util.Formatter</code>å¯¹äºè·å–å’Œæ ¼å¼åŒ–æ—¶é—´éå¸¸æœ‰ç”¨ã€‚æŸ¥çœ‹å®ƒä»¬ï¼Œè€Œä¸æ˜¯å°è¯•æ‰‹åŠ¨æ„é€ å®ƒä»¬ï¼</p><p>å½“ç„¶ï¼ŒSHA1æ ‡è¯†ç¬¦å°†æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ä¸è¦æ‹…å¿ƒè¿™äº›ã€‚æˆ‘ä»¬çš„æµ‹è¯•å°†ç¡®ä¿æ‚¨æœ‰ä¸€äº›â€œçœ‹èµ·æ¥åƒâ€SHA1æ ‡è¯†ç¬¦ï¼ˆæœ‰å…³æµ‹è¯•éƒ¨åˆ†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚</p><p>å¯¹äºåˆå¹¶æäº¤ï¼ˆå…·æœ‰ä¸¤ä¸ªçˆ¶æäº¤ï¼‰ï¼Œè¯·åœ¨ç¬¬ä¸€ä¸ªçˆ¶æäº¤çš„ä¸‹æ–¹æ·»åŠ ä¸€è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">===</span><br><span class="line">commit 3e8bf1d794ca2e9ef8a4007275acf3751c7170ff</span><br><span class="line">Merge: 4975af1 2c1ead1</span><br><span class="line">Date: Sat Nov 11 12:30:00 2017 -0800</span><br><span class="line">Merged development into master.</span><br></pre></td></tr></table></figure><p>â€œMerge:â€åé¢çš„ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ç”±ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªçˆ¶æäº¤çš„æäº¤IDçš„å‰ä¸ƒä½æ•°å­—ç»„æˆï¼Œé¡ºåºå¦‚ä¸Šæ‰€è¿°ã€‚ç¬¬ä¸€ä¸ªçˆ¶æäº¤æ˜¯åˆå¹¶æ—¶æ‰€åœ¨çš„åˆ†æ”¯ï¼›ç¬¬äºŒä¸ªæ˜¯åˆå¹¶è¿›æ¥çš„åˆ†æ”¯ã€‚è¿™ä¸å¸¸è§„Gitç›¸åŒã€‚</p><ul><li><strong>è¿è¡Œæ—¶é—´</strong>: åº”ä¸å¤´éƒ¨å†å²ä¸­èŠ‚ç‚¹æ•°é‡çš„çº¿æ€§æœ‰å…³ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: æ— </li><li><strong>å±é™©æ€§</strong>: å¦</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~20</li></ul><p>è¿™æ˜¯ç‰¹å®šæäº¤çš„å†å²è®°å½•å›¾ç‰‡ã€‚å¦‚æœå½“å‰åˆ†æ”¯çš„å¤´æŒ‡é’ˆæ°å¥½æŒ‡å‘è¯¥æäº¤ï¼Œæ—¥å¿—å°†æ‰“å°æœ‰å…³åœˆä¸­æäº¤çš„ä¿¡æ¯ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/history.png" alt="History"></p><p>è¯¥å†å²è®°å½•å¿½ç•¥äº†å…¶ä»–åˆ†æ”¯å’Œæœªæ¥ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»ä»‹ç»äº†å†å²è®°å½•çš„æ¦‚å¿µï¼Œè®©æˆ‘ä»¬è¿›ä¸€æ­¥å®Œå–„æˆ‘ä»¬ä¹‹å‰å…³äºæäº¤æ ‘æ˜¯ä¸å¯å˜çš„è¯´æ³•ã€‚å®ƒçš„ä¸å¯å˜æ€§ç¡®åˆ‡åœ°ä½“ç°åœ¨<em>å…·æœ‰ç‰¹å®šIDçš„æäº¤çš„å†å²è®°å½•å¯èƒ½æ°¸è¿œä¸ä¼šæ”¹å˜</em>ã€‚å¦‚æœæ‚¨å°†æäº¤æ ‘è§†ä¸ºä¸å¯å˜çš„å†å²è®°å½•é›†åˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨è¯´æ¯ä¸ªå†å²è®°å½•éƒ½æ˜¯ä¸å¯å˜çš„ã€‚</p><h3 id="global-log"><a href="#global-log" class="headerlink" title="global-log"></a>global-log</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main global-log</code></li><li><strong>æè¿°</strong>: ç±»ä¼¼äºæ—¥å¿—ï¼Œä½†æ˜¾ç¤ºæœ‰å…³å·²ç»è¿›è¡Œçš„æ‰€æœ‰æäº¤çš„ä¿¡æ¯ã€‚æäº¤çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚æç¤ºï¼šåœ¨<code>gitlet.Utils</code>ä¸­æœ‰ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æ‚¨éå†ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºå·²ç»è¿›è¡Œçš„æäº¤æ•°é‡çš„çº¿æ€§æ—¶é—´ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: æ— </li><li><strong>å±é™©æ€§</strong>: å¦</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~10</li></ul><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main find [æäº¤æ¶ˆæ¯]</code></li><li><strong>æè¿°</strong>: æ‰“å°å‡ºå…·æœ‰ç»™å®šæäº¤æ¶ˆæ¯çš„æ‰€æœ‰æäº¤çš„IDï¼Œæ¯è¡Œä¸€ä¸ªã€‚å¦‚æœæœ‰å¤šä¸ªè¿™æ ·çš„æäº¤ï¼Œå®ƒä¼šå°†IDåˆ†åˆ«æ‰“å°åœ¨ä¸åŒçš„è¡Œä¸Šã€‚æäº¤æ¶ˆæ¯æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ“ä½œæ•°ï¼›è¦æŒ‡ç¤ºå¤šä¸ªå•è¯çš„æ¶ˆæ¯ï¼Œè¯·å°†æ“ä½œæ•°æ”¾åœ¨å¼•å·ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºçš„<code>commit</code>å‘½ä»¤ã€‚æç¤ºï¼šæ­¤å‘½ä»¤çš„æç¤ºä¸<code>global-log</code>çš„æç¤ºç›¸åŒã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºæäº¤æ•°é‡çš„çº¿æ€§æ—¶é—´ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„æäº¤ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>Found no commit with that message.</code>ã€‚</li><li><strong>å±é™©æ€§</strong>: å¦</li><li><strong>ä¸çœŸå®gitçš„ä¸åŒ</strong>: åœ¨çœŸå®çš„gitä¸­ä¸å­˜åœ¨ã€‚å¯ä»¥é€šè¿‡æœç´¢æ—¥å¿—çš„è¾“å‡ºæ¥è¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœã€‚</li><li><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~15</li></ul><h3 id="status"><a href="#status" class="headerlink" title="status"></a>status</h3><ul><li><p><strong>ç”¨æ³•</strong>: <code>java gitlet.Main status</code></p></li><li><p><strong>æè¿°</strong>: æ˜¾ç¤ºå½“å‰å­˜åœ¨çš„åˆ†æ”¯ï¼Œå¹¶ç”¨<code>*</code>æ ‡è®°å½“å‰åˆ†æ”¯ã€‚è¿˜æ˜¾ç¤ºå“ªäº›æ–‡ä»¶å·²ç»è¢«æ ‡è®°ä¸ºæ·»åŠ æˆ–åˆ é™¤ã€‚å®ƒåº”è¯¥éµå¾ªçš„<em>ç¡®åˆ‡</em>æ ¼å¼ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">=== åˆ†æ”¯ ===</span><br><span class="line">*master</span><br><span class="line">other-branch</span><br><span class="line">  </span><br><span class="line">=== æš‚å­˜çš„æ–‡ä»¶ ===</span><br><span class="line">wug.txt</span><br><span class="line">wug2.txt</span><br><span class="line">  </span><br><span class="line">=== å·²åˆ é™¤çš„æ–‡ä»¶ ===</span><br><span class="line">goodbye.txt</span><br><span class="line">  </span><br><span class="line">=== æœªæš‚å­˜çš„ä¿®æ”¹ ===</span><br><span class="line">junk.txt (deleted)</span><br><span class="line">wug3.txt (modified)</span><br><span class="line">  </span><br><span class="line">=== æœªè·Ÿè¸ªçš„æ–‡ä»¶ ===</span><br><span class="line">random.stuff</span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>æœ€åä¸¤ä¸ªéƒ¨åˆ†ï¼ˆæœªæš‚å­˜çš„ä¿®æ”¹å’Œæœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼‰æ˜¯é¢å¤–åŠ åˆ†é¡¹ï¼Œä»·å€¼32åˆ†ã€‚å¯ä»¥å°†å®ƒä»¬ç•™ç©ºï¼ˆåªä¿ç•™æ ‡é¢˜ï¼‰ã€‚</p><p>æ¯ä¸ªéƒ¨åˆ†ä¹‹é—´æœ‰ä¸€ä¸ªç©ºè¡Œï¼Œå¹¶ä¸”æ•´ä¸ªçŠ¶æ€ä»¥ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚æ¡ç›®åº”æŒ‰å­—å…¸é¡ºåºåˆ—å‡ºï¼Œä½¿ç”¨Javaå­—ç¬¦ä¸²æ¯”è¾ƒé¡ºåºï¼ˆæ˜Ÿå·ä¸è®¡ï¼‰ã€‚å¦‚æœå·¥ä½œç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯â€œä¿®æ”¹ä½†æœªæš‚å­˜â€ï¼Œåˆ™ä¸ºä»¥ä¸‹æƒ…å†µä¹‹ä¸€ï¼š</p><ul><li>åœ¨å½“å‰æäº¤ä¸­è·Ÿè¸ªï¼Œåœ¨å·¥ä½œç›®å½•ä¸­å·²æ›´æ”¹ï¼Œä½†æœªæš‚å­˜ï¼›æˆ–</li><li>å·²æ ‡è®°ä¸ºæ·»åŠ ï¼Œä½†å†…å®¹ä¸å·¥ä½œç›®å½•ä¸­çš„å†…å®¹ä¸åŒï¼›æˆ–</li><li>å·²æ ‡è®°ä¸ºæ·»åŠ ï¼Œä½†åœ¨å·¥ä½œç›®å½•ä¸­å·²åˆ é™¤ï¼›æˆ–</li><li>æœªæ ‡è®°ä¸ºåˆ é™¤ï¼Œä½†åœ¨å½“å‰æäº¤ä¸­å·²è·Ÿè¸ªå¹¶å·²ä»å·¥ä½œç›®å½•ä¸­åˆ é™¤ã€‚</li></ul><p>æœ€åä¸€ç±»ï¼ˆâ€œæœªè·Ÿè¸ªçš„æ–‡ä»¶â€ï¼‰æ˜¯æŒ‡å­˜åœ¨äºå·¥ä½œç›®å½•ä¸­ä½†æ—¢æœªæ ‡è®°ä¸ºæ·»åŠ ä¹Ÿæœªè·Ÿè¸ªçš„æ–‡ä»¶ã€‚è¿™åŒ…æ‹¬å·²æ ‡è®°ä¸ºåˆ é™¤ä½†åœ¨Gitletä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹é‡æ–°åˆ›å»ºçš„æ–‡ä»¶ã€‚å¿½ç•¥å¯èƒ½å·²å¼•å…¥çš„ä»»ä½•å­ç›®å½•ï¼Œå› ä¸ºGitletä¸å¤„ç†å®ƒä»¬ã€‚</p></li><li><p><strong>è¿è¡Œæ—¶é—´</strong>: ç¡®ä¿è¿™ä»…å–å†³äºå·¥ä½œç›®å½•ä¸­çš„æ•°æ®é‡åŠ ä¸Šå·²æ ‡è®°ä¸ºæ·»åŠ æˆ–åˆ é™¤çš„æ–‡ä»¶çš„æ•°é‡åŠ ä¸Šåˆ†æ”¯çš„æ•°é‡ã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>: æ— </p></li><li><p><strong>å±é™©æ€§</strong>: å¦</p></li><li><p><strong>æˆ‘ä»¬çš„ä»£ç è¡Œæ•°</strong>: ~45</p></li><li><p><a href="https://forms.gle/LSgBK5RAdRwhAqKK8"><strong>æ¦‚å¿µæµ‹éªŒï¼ˆä¸æ¶‰åŠåˆ†æ”¯ï¼‰</strong></a></p></li><li><p><a href="https://forms.gle/RHUiRkSrtgysC6En8"><strong>æ¦‚å¿µæµ‹éªŒï¼ˆæ¶‰åŠåˆ†æ”¯ï¼‰</strong></a></p></li></ul><h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><p>æ£€å‡ºæ˜¯ä¸€ç§é€šç”¨å‘½ä»¤ï¼Œå¯ä»¥æ ¹æ®å…¶å‚æ•°æ‰§è¡Œå‡ ç§ä¸åŒçš„æ“ä½œã€‚ä¸‹é¢æœ‰3ç§å¯èƒ½çš„ç”¨æ³•ã€‚åœ¨æ¯ä¸ªéƒ¨åˆ†ä¸‹é¢ï¼Œæ‚¨ä¼šçœ‹åˆ°3ä¸ªç¼–å·çš„ç‚¹ã€‚æ¯ä¸ªå¯¹åº”äºç›¸åº”çš„æ£€å‡ºç”¨æ³•ã€‚</p><ul><li><strong>ç”¨æ³•</strong>ï¼š<ol><li><code>java gitlet.Main checkout -- [æ–‡ä»¶å]</code></li><li><code>java gitlet.Main checkout [æäº¤ID] -- [æ–‡ä»¶å]</code></li><li><code>java gitlet.Main checkout [åˆ†æ”¯å]</code></li></ol></li><li><strong>æè¿°</strong>ï¼š<ol><li>è·å–æ–‡ä»¶åœ¨å½“å‰åˆ†æ”¯çš„æœ€æ–°æäº¤ä¸­çš„ç‰ˆæœ¬ï¼Œå¹¶å°†å…¶æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒã€‚æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ä¸ä¼šè¢«æš‚å­˜ã€‚</li><li>è·å–æ–‡ä»¶åœ¨å…·æœ‰ç»™å®šIDçš„æäº¤ä¸­çš„ç‰ˆæœ¬ï¼Œå¹¶å°†å…¶æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒã€‚æ–°ç‰ˆæœ¬çš„æ–‡ä»¶ä¸ä¼šè¢«æš‚å­˜ã€‚</li><li>è·å–ç»™å®šåˆ†æ”¯å¤´éƒ¨çš„æäº¤ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ”¾å…¥å·¥ä½œç›®å½•ä¸­ï¼Œå¦‚æœå·²ç»å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¦†ç›–å®ƒä»¬ã€‚æ­¤å¤–ï¼Œåœ¨æ‰§è¡Œæ­¤å‘½ä»¤ç»“æŸæ—¶ï¼Œç»™å®šåˆ†æ”¯å°†è¢«è§†ä¸ºå½“å‰åˆ†æ”¯ï¼ˆHEADï¼‰ã€‚ä»»ä½•åœ¨å½“å‰åˆ†æ”¯ä¸­è¢«è·Ÿè¸ªä½†åœ¨æ£€å‡ºåˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶å°†è¢«åˆ é™¤ã€‚æš‚å­˜åŒºå°†è¢«æ¸…ç©ºï¼Œé™¤éæ£€å‡ºçš„åˆ†æ”¯æ˜¯å½“å‰åˆ†æ”¯ï¼ˆå‚è§<strong>å¤±è´¥æƒ…å†µ</strong>ä¸‹é¢ï¼‰ã€‚</li></ol></li><li><strong>è¿è¡Œæ—¶é—´</strong>ï¼š<ol><li>ç›¸å¯¹äºæ­£åœ¨æ£€å‡ºçš„æ–‡ä»¶çš„å¤§å°ï¼Œåº”è¯¥æ˜¯çº¿æ€§çš„ã€‚</li><li>ç›¸å¯¹äºæäº¤å¿«ç…§ä¸­æ–‡ä»¶çš„æ€»å¤§å°ï¼Œåº”è¯¥æ˜¯çº¿æ€§çš„ã€‚å¯¹äºæ¶‰åŠæäº¤æ•°é‡çš„ä»»ä½•åº¦é‡ï¼Œåº”è¯¥æ˜¯å¸¸æ•°ã€‚å¯¹äºåˆ†æ”¯æ•°é‡çš„ä»»ä½•åº¦é‡ï¼Œåº”è¯¥æ˜¯å¸¸æ•°ã€‚</li></ol></li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼š<ol><li>å¦‚æœæ–‡ä»¶åœ¨ä¸Šä¸€ä¸ªæäº¤ä¸­ä¸å­˜åœ¨ï¼Œåˆ™ä¸­æ­¢æ“ä½œï¼Œå¹¶æ‰“å°é”™è¯¯æ¶ˆæ¯<code>File does not exist in that commit.</code> ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li><li>å¦‚æœä¸å­˜åœ¨å…·æœ‰ç»™å®šIDçš„æäº¤ï¼Œåˆ™æ‰“å°<code>No commit with that id exists.</code>ã€‚å¦åˆ™ï¼Œå¦‚æœæ–‡ä»¶åœ¨ç»™å®šæäº¤ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°ä¸å¤±è´¥æƒ…å†µ1ç›¸åŒçš„æ¶ˆæ¯ã€‚ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li><li>å¦‚æœä¸å­˜åœ¨å…·æœ‰è¯¥åç§°çš„åˆ†æ”¯ï¼Œåˆ™æ‰“å°<code>No such branch exists.</code> å¦‚æœè¯¥åˆ†æ”¯æ˜¯å½“å‰åˆ†æ”¯ï¼Œåˆ™æ‰“å°<code>No need to checkout the current branch.</code> å¦‚æœå½“å‰åˆ†æ”¯ä¸­æœ‰ä¸€ä¸ªå·¥ä½œæ–‡ä»¶åœ¨æ£€å‡ºæ—¶å°†è¢«è¦†ç›–ï¼Œåˆ™æ‰“å°<code>There is an untracked file in the way; delete it, or add and commit it first.</code> å¹¶é€€å‡ºï¼›åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚ä¸è¦æ›´æ”¹å½“å‰å·¥ä½œç›®å½•ã€‚</li></ol></li><li><strong>ä¸çœŸå®gitçš„ä¸åŒ</strong>ï¼šçœŸå®çš„gitä¸ä¼šæ¸…é™¤æš‚å­˜åŒºï¼Œå¹¶å°†æ£€å‡ºçš„æ–‡ä»¶æš‚å­˜ã€‚æ­¤å¤–ï¼Œå®ƒä¸ä¼šæ‰§è¡Œå¯èƒ½è¦†ç›–æˆ–æ’¤æ¶ˆæ‚¨å·²æš‚å­˜çš„æ›´æ”¹ï¼ˆæ·»åŠ æˆ–åˆ é™¤ï¼‰çš„æ£€å‡ºæ“ä½œã€‚</li></ul><p>ä¸€ä¸ª<code>[æäº¤ID]</code>å°±åƒå‰é¢æè¿°çš„ï¼Œæ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶æ•°ã€‚çœŸå®Gitçš„ä¸€ä¸ªæ–¹ä¾¿çš„ç‰¹æ€§æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨å”¯ä¸€å‰ç¼€æ¥ç¼©å†™æäº¤ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a0da1ea5a15ab613bf9961fd86f010cf74c7ee48</span><br></pre></td></tr></table></figure><p>ç¼©å†™ä¸º</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a0da1e</span><br></pre></td></tr></table></figure><p>åœ¨ï¼ˆå¯èƒ½ï¼‰æ²¡æœ‰å…¶ä»–ä»¥ç›¸åŒå…­ä¸ªæ•°å­—å¼€å¤´çš„SHA-1æ ‡è¯†ç¬¦çš„å¯¹è±¡å­˜åœ¨çš„æƒ…å†µä¸‹ã€‚æ‚¨åº”è¯¥å®‰æ’ç›¸åŒçš„äº‹æƒ…å‘ç”Ÿåœ¨åŒ…å«å°‘äº40ä¸ªå­—ç¬¦çš„æäº¤IDä¸­ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½¿ç”¨ç¼©çŸ­çš„IDå¯èƒ½ä¼šå¯¼è‡´æŸ¥æ‰¾å¯¹è±¡çš„é€Ÿåº¦å˜æ…¢ï¼Œå¦‚æœå®ç°å¾—ä¸å¥½ï¼ˆä½¿æŸ¥æ‰¾æ–‡ä»¶çš„æ—¶é—´ä¸å¯¹è±¡æ•°é‡æˆçº¿æ€§å…³ç³»ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šæ‹…å¿ƒä½¿ç”¨ç¼©çŸ­çš„IDçš„å‘½ä»¤çš„æ—¶é—´ã€‚ä½†æˆ‘ä»¬å»ºè®®æ‚¨åœ¨<code>.git</code>ç›®å½•ï¼ˆç‰¹åˆ«æ˜¯<code>.git/objects</code>ï¼‰ä¸­æŸ¥çœ‹å®ƒæ˜¯å¦‚ä½•åŠ é€Ÿæœç´¢çš„ã€‚æ‚¨å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªç†Ÿæ‚‰çš„æ•°æ®ç»“æ„å®ç°åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­è€Œä¸æ˜¯æŒ‡é’ˆã€‚</p><p>åªæœ‰ç‰ˆæœ¬3ï¼ˆå®Œæ•´åˆ†æ”¯çš„æ£€å‡ºï¼‰ä¼šä¿®æ”¹æš‚å­˜åŒºï¼š</p><ul><li><strong>å±é™©æ€§?</strong>: Yes!</li><li><strong>è¡Œæ•°</strong>:<ul><li>~15</li><li>~5</li><li>~15</li></ul></li><li><a href="https://forms.gle/mfHLnrU9VX349jnr7"><strong>Conceptual Quiz (without branching)</strong></a></li><li><a href="https://forms.gle/tbZuqDz7x3u41JhM6"><strong>Conceptual Quiz (with branching)</strong></a></li></ul><h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><ul><li><strong>ç”¨æ³•</strong>: <code>java gitlet.Main branch [åˆ†æ”¯åç§°]</code></li><li><strong>æè¿°</strong>: åˆ›å»ºä¸€ä¸ªå…·æœ‰ç»™å®šåç§°çš„æ–°åˆ†æ”¯ï¼Œå¹¶å°†å…¶æŒ‡å‘å½“å‰çš„å¤´éƒ¨æäº¤ã€‚åˆ†æ”¯åªæ˜¯å¯¹æäº¤èŠ‚ç‚¹çš„å¼•ç”¨ï¼ˆä¸€ä¸ªSHA-1æ ‡è¯†ç¬¦ï¼‰çš„åç§°ã€‚è¯¥å‘½ä»¤ä¸ä¼šç«‹å³åˆ‡æ¢åˆ°æ–°åˆ›å»ºçš„åˆ†æ”¯ï¼ˆå°±åƒçœŸå®çš„Gitä¸€æ ·ï¼‰ã€‚åœ¨è°ƒç”¨åˆ†æ”¯ä¹‹å‰ï¼Œæ‚¨çš„ä»£ç åº”è¯¥ä½¿ç”¨ä¸€ä¸ªåä¸ºâ€œmasterâ€çš„é»˜è®¤åˆ†æ”¯è¿è¡Œã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºä»»ä½•é‡è¦åº¦é‡ï¼Œåº”è¯¥æ˜¯å¸¸é‡ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœå·²ç»å­˜åœ¨å…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯<code>A branch with that name already exists.</code>ã€‚</li><li><strong>å±é™©æ€§</strong>: å¦</li><li><strong>æˆ‘ä»¬çš„è¡Œæ•°</strong>: ~10</li></ul><p>å¥½çš„ï¼Œè®©æˆ‘ä»¬è¯¦ç»†çœ‹çœ‹åˆ†æ”¯å‘½ä»¤çš„ä½œç”¨ã€‚å‡è®¾æˆ‘ä»¬çš„çŠ¶æ€å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/simple_history.png" alt="ç®€å•çš„å†å²"></p><p>ç°åœ¨æˆ‘ä»¬è°ƒç”¨ <code>java gitlet.Main branch cool-beans</code>ã€‚ç„¶åæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/just_called_branch.png" alt="åˆšåˆšè°ƒç”¨åˆ†æ”¯"></p><p>å—¯â€¦ æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ã€‚è®©æˆ‘ä»¬åˆ‡æ¢åˆ°åä¸º <code>java gitlet.Main checkout cool-beans</code> çš„åˆ†æ”¯ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/just_switched_branch.png" alt="åˆšåˆšåˆ‡æ¢çš„åˆ†æ”¯"></p><p>åˆä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Ÿï¼å¥½å§ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨è¿›è¡Œä¸€æ¬¡æäº¤ã€‚ä¿®æ”¹ä¸€äº›æ–‡ä»¶ï¼Œç„¶å <code>java gitlet.Main add...</code> ç„¶å <code>java gitlet.Main commit...</code></p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/commit_on_branch.png" alt="åˆ†æ”¯ä¸Šçš„æäº¤"></p><p>æˆ‘è¢«å‘ŠçŸ¥ä¼šæœ‰åˆ†æ”¯ã€‚ä½†æˆ‘çœ‹åˆ°çš„åªæ˜¯ä¸€æ¡ç›´çº¿ã€‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä¹Ÿè®¸æˆ‘åº”è¯¥å›åˆ°æˆ‘çš„å¦ä¸€ä¸ªåˆ†æ”¯ <code>java gitlet.Main checkout master</code>ï¼š</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/checkout_master.png" alt="åˆ‡æ¢åˆ°master"></p><p>ç°åœ¨æˆ‘åšä¸€ä¸ªæäº¤â€¦</p><p><img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/branched.png" alt="åˆ†æ”¯"></p><p>å‘¼ï¼è¿™å°±æ˜¯åˆ†æ”¯çš„æ•´ä¸ªç†å¿µã€‚ä½ æ˜ç™½å‘ç”Ÿäº†ä»€ä¹ˆäº†å—ï¼Ÿåˆ›å»ºåˆ†æ”¯çš„æ‰€æœ‰æ“ä½œåªæ˜¯ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæ–°çš„æŒ‡é’ˆã€‚åœ¨ä»»ä½•ç»™å®šæ—¶é—´ï¼Œè¿™äº›æŒ‡é’ˆä¸­çš„ä¸€ä¸ªè¢«è®¤ä¸ºæ˜¯å½“å‰æ´»åŠ¨çš„æŒ‡é’ˆï¼Œä¹Ÿç§°ä¸ºHEADæŒ‡é’ˆï¼ˆç”¨ * æ ‡è®°ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>checkout [åˆ†æ”¯åç§°]</code> åˆ‡æ¢å½“å‰æ´»åŠ¨çš„HEADæŒ‡é’ˆã€‚æ¯å½“æˆ‘ä»¬æäº¤æ—¶ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å°†ä¸€ä¸ªå­æäº¤æ·»åŠ åˆ°å½“å‰æ´»åŠ¨çš„HEADæäº¤ä¸­ï¼Œå³ä½¿å·²ç»å­˜åœ¨ä¸€ä¸ªå­æäº¤ã€‚è¿™è‡ªç„¶åœ°åˆ›å»ºäº†åˆ†æ”¯è¡Œä¸ºï¼Œå› ä¸ºç°åœ¨ä¸€ä¸ªæäº¤å¯ä»¥æœ‰å¤šä¸ªå­æäº¤ã€‚</p><p>å¯ä»¥åœ¨<a href="https://youtu.be/desB3AS6aZg">è¿™é‡Œ</a>æ‰¾åˆ°å…³äºåˆ†æ”¯çš„è§†é¢‘ç¤ºä¾‹å’Œæ¦‚è¿°ã€‚</p><p><em>ç¡®ä¿</em>æ‚¨çš„<code>branch</code>ã€<code>checkout</code>å’Œ<code>commit</code>çš„è¡Œä¸ºä¸æˆ‘ä»¬ä¸Šé¢æè¿°çš„ä¸€è‡´ã€‚è¿™æ˜¯Gitletçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œè®¸å¤šå…¶ä»–å‘½ä»¤éƒ½å°†ä¾èµ–äºå®ƒã€‚å¦‚æœä»»ä½•æ ¸å¿ƒåŠŸèƒ½å‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­çš„å¾ˆå¤šæµ‹è¯•å°†æ— æ³•æ­£å¸¸å·¥ä½œï¼</p><h3 id="rm-branch"><a href="#rm-branch" class="headerlink" title="rm-branch"></a>rm-branch</h3><ul><li><strong>Usage</strong>: <code>java gitlet.Main rm-branch [branch name]</code></li><li><strong>Description</strong>: åˆ é™¤å…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ã€‚è¿™åªæ˜¯åˆ é™¤ä¸åˆ†æ”¯å…³è”çš„æŒ‡é’ˆï¼›ä¸æ„å‘³ç€åˆ é™¤åœ¨è¯¥åˆ†æ”¯ä¸‹åˆ›å»ºçš„æ‰€æœ‰æäº¤ï¼Œæˆ–è€…ç±»ä¼¼çš„æ“ä½œã€‚</li><li><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºä»»ä½•é‡è¦åº¦é‡ï¼Œåº”è¯¥æ˜¯å¸¸é‡ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœå…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ä¸å­˜åœ¨ï¼Œåˆ™ä¸­æ­¢ã€‚æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A branch with that name does not exist.</code> å¦‚æœå°è¯•åˆ é™¤å½“å‰æ­£åœ¨ä½¿ç”¨çš„åˆ†æ”¯ï¼Œåˆ™ä¸­æ­¢ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯ <code>Cannot remove the current branch.</code>ã€‚</li><li><strong>å±é™©æ€§</strong>: å¦</li><li><strong>æˆ‘ä»¬çš„è¡Œæ•°</strong>: ~15</li></ul><h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><ul><li><p><strong>Usage</strong>: <code>java gitlet.Main reset [commit id]</code></p></li><li><p><strong>Description</strong>: æ£€å‡ºç»™å®šæäº¤è·Ÿè¸ªçš„æ‰€æœ‰æ–‡ä»¶ã€‚åˆ é™¤ä¸åœ¨è¯¥æäº¤ä¸­çš„è·Ÿè¸ªæ–‡ä»¶ã€‚è¿˜å°†å½“å‰åˆ†æ”¯çš„å¤´æŒ‡é’ˆç§»åŠ¨åˆ°è¯¥æäº¤èŠ‚ç‚¹ã€‚æœ‰å…³åœ¨ä½¿ç”¨ reset åå¤´æŒ‡é’ˆçš„å˜åŒ–ç¤ºä¾‹ï¼Œè¯·å‚è§ç®€ä»‹ã€‚<code>[commit id]</code> å¯ä»¥åƒ <code>checkout</code> ä¸€æ ·ç¼©å†™ã€‚æš‚å­˜åŒºè¢«æ¸…é™¤ã€‚è¯¥å‘½ä»¤å®è´¨ä¸Šæ˜¯å°†å½“å‰åˆ†æ”¯å¤´åˆ‡æ¢åˆ°ä»»æ„æäº¤çš„ <code>checkout</code> å‘½ä»¤ã€‚</p></li><li><p><strong>è¿è¡Œæ—¶é—´</strong>: ç›¸å¯¹äºç»™å®šæäº¤å¿«ç…§ä¸­è·Ÿè¸ªçš„æ–‡ä»¶æ€»å¤§å°ï¼Œåº”è¯¥æ˜¯çº¿æ€§çš„ã€‚ç›¸å¯¹äºæ¶‰åŠæäº¤æ•°é‡çš„ä»»ä½•åº¦é‡ï¼Œåº”è¯¥æ˜¯å¸¸é‡çš„ã€‚</p></li><li><p>å¤±è´¥æƒ…å†µ</p><p>: å¦‚æœä¸å­˜åœ¨å…·æœ‰ç»™å®š id çš„æäº¤ï¼Œåˆ™æ‰“å°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">No commit with that id exists.</span><br></pre></td></tr></table></figure><p>å¦‚æœå½“å‰åˆ†æ”¯ä¸­å­˜åœ¨ä¸€ä¸ªæœªè·Ÿè¸ªçš„å·¥ä½œæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¢«é‡ç½®è¦†ç›–ï¼Œåˆ™æ‰“å°</p><p><code>There is an untracked file in the way; delete it, or add and commit it first.</code></p><p>å¹¶é€€å‡ºï¼›åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–æ“ä½œä¹‹å‰æ‰§è¡Œæ­¤æ£€æŸ¥ã€‚</p></li><li><p><strong>å±é™©æ€§</strong>: æ˜¯çš„ï¼</p></li><li><p><strong>ä¸çœŸå® git çš„å·®å¼‚</strong>: æ­¤å‘½ä»¤æœ€æ¥è¿‘ä½¿ç”¨ <code>--hard</code> é€‰é¡¹ï¼Œå¦‚ <code>git reset --hard [commit hash]</code>ã€‚</p></li><li><p><strong>æˆ‘ä»¬çš„è¡Œæ•°</strong>: ~10 æˆ‘ä»¬æ˜¯å¦‚ä½•å¾—åˆ°å¦‚æ­¤å°çš„è¡Œæ•°çš„ï¼Ÿè¯·å›æƒ³ä¸€ä¸‹ï¼Œä½ åº”è¯¥é‡ç”¨ä½ çš„ä»£ç  :)</p></li></ul><h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><ul><li><p><strong>Usage</strong>: <code>java gitlet.Main merge [branch name]</code></p></li><li><p><strong>Description</strong>: å°†ç»™å®šåˆ†æ”¯ä¸­çš„æ–‡ä»¶åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ä¸­ã€‚è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹å¤æ‚ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ä¸€ä¸ªæ›´è¯¦ç»†çš„æè¿°ï¼š</p><ul><li>é¦–å…ˆè€ƒè™‘å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯çš„<strong>åˆ†å‰²ç‚¹</strong>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ <code>master</code> æ˜¯å½“å‰åˆ†æ”¯ï¼Œ<code>branch</code> æ˜¯ç»™å®šåˆ†æ”¯ï¼š<img src="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-6-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-proj2/split_point.png" alt="Split point"> åˆ†å‰²ç‚¹æ˜¯å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯å¤´éƒ¨çš„ <em>æœ€æ–°å…¬å…±ç¥–å…ˆ</em>ï¼š- ä¸€ä¸ª <em>å…¬å…±ç¥–å…ˆ</em> æ˜¯ä¸€ä¸ªä»ä¸¤ä¸ªåˆ†æ”¯å¤´éƒ¨åˆ°è¾¾çš„è·¯å¾„ï¼ˆæœ‰0ä¸ªæˆ–æ›´å¤šä¸ªçˆ¶æŒ‡é’ˆï¼‰ã€‚- ä¸€ä¸ª <em>æœ€æ–°</em> å…¬å…±ç¥–å…ˆæ˜¯ä¸æ˜¯å…¶ä»–å…¬å…±ç¥–å…ˆçš„ç¥–å…ˆçš„å…¬å…±ç¥–å…ˆã€‚ä¾‹å¦‚ï¼Œå°½ç®¡ä¸Šå›¾ä¸­æœ€å·¦è¾¹çš„æäº¤æ˜¯ <code>master</code> å’Œ <code>branch</code> çš„å…¬å…±ç¥–å…ˆï¼Œä½†å®ƒä¹Ÿæ˜¯å³ä¾§ç´§é‚»çš„æäº¤çš„ç¥–å…ˆï¼Œå› æ­¤å®ƒä¸æ˜¯æœ€æ–°çš„å…¬å…±ç¥–å…ˆã€‚å¦‚æœåˆ†å‰²ç‚¹ <em>æ˜¯</em> ä¸ç»™å®šåˆ†æ”¯ç›¸åŒçš„æäº¤ï¼Œåˆ™æˆ‘ä»¬ä¸æ‰§è¡Œä»»ä½•æ“ä½œï¼›åˆå¹¶å·²å®Œæˆï¼Œå¹¶ä»¥æ¶ˆæ¯ <code>Given branch is an ancestor of the current branch.</code> ç»“æŸã€‚å¦‚æœåˆ†å‰²ç‚¹æ˜¯å½“å‰åˆ†æ”¯ï¼Œåˆ™æ•ˆæœæ˜¯æ£€å‡ºç»™å®šåˆ†æ”¯ï¼Œå¹¶åœ¨æ‰“å°æ¶ˆæ¯ <code>Current branch fast-forwarded.</code> åç»“æŸã€‚å¦åˆ™ï¼Œæˆ‘ä»¬ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚</li></ul><ol><li>è‡ªåˆ†å‰²ç‚¹ä»¥æ¥åœ¨ç»™å®šåˆ†æ”¯ä¸­è¢« <em>ä¿®æ”¹</em>ï¼Œä½†åœ¨å½“å‰åˆ†æ”¯ä¸­è‡ªåˆ†å‰²ç‚¹ä»¥æ¥æœªè¢«ä¿®æ”¹çš„ä»»ä½•æ–‡ä»¶éƒ½åº”æ›´æ”¹ä¸ºç»™å®šåˆ†æ”¯ä¸­å®ƒä»¬çš„ç‰ˆæœ¬ï¼ˆä»ç»™å®šåˆ†æ”¯å‰ç«¯çš„æäº¤ä¸­æ£€å‡ºï¼‰ã€‚ç„¶åï¼Œè¿™äº›æ–‡ä»¶åº”è‡ªåŠ¨è¿›å…¥æš‚å­˜åŒºã€‚ä¸ºäº†æ¾„æ¸…ï¼Œå¦‚æœä¸€ä¸ªæ–‡ä»¶â€œåœ¨ç»™å®šåˆ†æ”¯ä¸­è‡ªåˆ†å‰²ç‚¹ä»¥æ¥è¢«ä¿®æ”¹â€ï¼Œè¿™æ„å‘³ç€æ–‡ä»¶çš„ç‰ˆæœ¬å¦‚åŒåœ¨ç»™å®šåˆ†æ”¯å‰ç«¯çš„æäº¤ä¸­å­˜åœ¨ï¼Œå†…å®¹ä¸åˆ†å‰²ç‚¹å¤„çš„æ–‡ä»¶ç‰ˆæœ¬ä¸åŒã€‚è®°ä½ï¼šblob æ˜¯å†…å®¹å¯å¯»å€çš„ï¼</li><li>åœ¨å½“å‰åˆ†æ”¯ä¸­è¢«ä¿®æ”¹ä½†åœ¨ç»™å®šåˆ†æ”¯è‡ªåˆ†å‰²ç‚¹ä»¥æ¥æœªè¢«ä¿®æ”¹çš„ä»»ä½•æ–‡ä»¶éƒ½åº”ä¿æŒä¸å˜ã€‚</li><li>åœ¨å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯ä¸­ä»¥ç›¸åŒæ–¹å¼è¢«ä¿®æ”¹çš„ä»»ä½•æ–‡ä»¶ï¼ˆå³ï¼Œè¿™äº›æ–‡ä»¶ç°åœ¨éƒ½å…·æœ‰ç›¸åŒçš„å†…å®¹æˆ–éƒ½è¢«ç§»é™¤ï¼‰éƒ½ä¼šè¢«åˆå¹¶åä¿æŒä¸å˜ã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶åœ¨å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯ä¸­éƒ½è¢«ç§»é™¤ï¼Œä½†æ˜¯å·¥ä½œç›®å½•ä¸­å­˜åœ¨åŒåæ–‡ä»¶ï¼Œåˆ™è¯¥æ–‡ä»¶å°†è¢«ä¿æŒä¸å˜ï¼Œå¹¶ç»§ç»­åœ¨åˆå¹¶ä¸­å¤„äºç¼ºå¤±çŠ¶æ€ï¼ˆæœªè¢«è·Ÿè¸ªä¹Ÿæœªè¢«æš‚å­˜ï¼‰ã€‚</li><li>åœ¨åˆ†å‰²ç‚¹å¤„æœªå‡ºç°ä½†ä»…åœ¨å½“å‰åˆ†æ”¯ä¸­å‡ºç°çš„ä»»ä½•æ–‡ä»¶éƒ½åº”ä¿æŒä¸å˜ã€‚</li><li>åœ¨åˆ†å‰²ç‚¹å¤„æœªå‡ºç°ä½†ä»…åœ¨ç»™å®šåˆ†æ”¯ä¸­å‡ºç°çš„ä»»ä½•æ–‡ä»¶éƒ½åº”è¢«æ£€å‡ºå¹¶æš‚å­˜ã€‚</li><li>åœ¨åˆ†å‰²ç‚¹å¤„å­˜åœ¨ä½†åœ¨å½“å‰åˆ†æ”¯ä¸­æœªè¢«ä¿®æ”¹å¹¶ä¸”åœ¨ç»™å®šåˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„ä»»ä½•æ–‡ä»¶éƒ½åº”è¯¥è¢«ç§»é™¤ï¼ˆå¹¶ä¸”æœªè¢«è·Ÿè¸ªï¼‰ã€‚</li><li>åœ¨åˆ†å‰²ç‚¹å¤„å­˜åœ¨ä½†åœ¨ç»™å®šåˆ†æ”¯ä¸­æœªè¢«ä¿®æ”¹å¹¶ä¸”åœ¨å½“å‰åˆ†æ”¯ä¸­ä¸å­˜åœ¨çš„ä»»ä½•æ–‡ä»¶éƒ½åº”ä¿æŒä¸å­˜åœ¨ã€‚</li><li>åœ¨å½“å‰åˆ†æ”¯å’Œç»™å®šåˆ†æ”¯ä¸­ä»¥ä¸åŒæ–¹å¼è¢«ä¿®æ”¹çš„ä»»ä½•æ–‡ä»¶éƒ½ä¼š<em>å†²çª</em>ã€‚â€œä»¥ä¸åŒæ–¹å¼è¢«ä¿®æ”¹â€å¯ä»¥æ„å‘³ç€ä¸¤è€…çš„å†…å®¹éƒ½å‘ç”Ÿäº†å˜åŒ–ä¸”ä¸åŒï¼Œæˆ–è€…ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–è€Œå¦ä¸€ä¸ªæ–‡ä»¶è¢«åˆ é™¤ï¼Œæˆ–è€…æ–‡ä»¶åœ¨åˆ†å‰²ç‚¹å¤„ä¸å­˜åœ¨ï¼Œå¹¶ä¸”åœ¨ç»™å®šåˆ†æ”¯å’Œå½“å‰åˆ†æ”¯ä¸­å…·æœ‰ä¸åŒçš„å†…å®¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢å†²çªæ–‡ä»¶çš„å†…å®¹ï¼š</li></ol></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">current branch ä¸­æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">=======</span><br><span class="line">given branch ä¸­æ–‡ä»¶çš„å†…å®¹</span><br><span class="line">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>ï¼ˆç”¨æŒ‡å®šæ–‡ä»¶çš„å†…å®¹æ›¿æ¢â€œcurrent branch ä¸­æ–‡ä»¶çš„å†…å®¹â€å’Œâ€œgiven branch ä¸­æ–‡ä»¶çš„å†…å®¹â€ï¼‰ã€‚å¹¶æš‚å­˜ç»“æœã€‚åœ¨è¿™é‡Œä½¿ç”¨ç›´æ¥è¿æ¥ã€‚åœ¨æ–‡ä»¶æœ«å°¾æ²¡æœ‰æ¢è¡Œç¬¦çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD</span><br><span class="line">current branch ä¸­æ–‡ä»¶çš„å†…å®¹=======</span><br><span class="line">given branch ä¸­æ–‡ä»¶çš„å†…å®¹&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><p>è¿™æ²¡é—®é¢˜ï¼›é‚£äº›å› ä¸ºä¸çŸ¥é“æ¢è¡Œç¬¦å’Œè¡Œåˆ†éš”ç¬¦çš„åŒºåˆ«è€Œäº§ç”Ÿéæ ‡å‡†ã€ç—…æ€æ–‡ä»¶çš„äººåº”è¯¥å¾—åˆ°ä»–ä»¬æ‰€å¾—åˆ°çš„ã€‚</p><p>ä¸€æ—¦æ ¹æ®ä¸Šè¿°æ›´æ–°æ–‡ä»¶ï¼Œå¹¶ä¸”åˆ†å‰²ç‚¹ä¸æ˜¯å½“å‰åˆ†æ”¯æˆ–ç»™å®šåˆ†æ”¯ï¼Œåˆå¹¶å°†è‡ªåŠ¨æäº¤ï¼Œå¹¶ä½¿ç”¨æ—¥å¿—æ¶ˆæ¯ <code>Merged [given branch name] into [current branch name].</code>ã€‚ç„¶åï¼Œå¦‚æœåˆå¹¶é‡åˆ°å†²çªï¼Œæ‰“å°æ¶ˆæ¯ <code>Encountered a merge conflict.</code> åœ¨ç»ˆç«¯ä¸Šï¼ˆè€Œä¸æ˜¯æ—¥å¿—ä¸Šï¼‰ã€‚åˆå¹¶æäº¤ä¸å…¶ä»–æäº¤ä¸åŒï¼šå®ƒä»¬è®°å½•äº†å½“å‰åˆ†æ”¯å¤´éƒ¨ï¼ˆç§°ä¸º<em>ç¬¬ä¸€ä¸ªçˆ¶èŠ‚ç‚¹</em>ï¼‰å’Œä¼ é€’ç»™åˆå¹¶å‘½ä»¤è¡Œçš„åˆ†æ”¯å¤´éƒ¨ä¸¤è€…ä½œä¸ºçˆ¶èŠ‚ç‚¹ã€‚</p><p>  æœ‰å…³è¯¥å‘½ä»¤çš„è§†é¢‘æ¼”ç¤ºå¯ä»¥åœ¨<a href="https://www.youtube.com/watch?v=JR3OYCMv9b4&t=929s">æ­¤å¤„</a>æ‰¾åˆ°ã€‚</p><ul><li><p><strong>è¿è¡Œæ—¶é—´</strong>: O(NlgN+D)ï¼Œå…¶ä¸­ N æ˜¯ä¸¤ä¸ªåˆ†æ”¯çš„ç¥–å…ˆæäº¤çš„æ€»æ•°ï¼ŒD æ˜¯è¿™äº›æäº¤ä¸‹æ‰€æœ‰æ–‡ä»¶ä¸­çš„æ•°æ®æ€»é‡ã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>: å¦‚æœå­˜åœ¨å·²æš‚å­˜çš„æ·»åŠ æˆ–åˆ é™¤ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯ <code>You have uncommitted changes.</code> å¹¶é€€å‡ºã€‚å¦‚æœä¸å­˜åœ¨å…·æœ‰ç»™å®šåç§°çš„åˆ†æ”¯ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯ <code>A branch with that name does not exist.</code> å¦‚æœå°è¯•åˆå¹¶è‡ªèº«çš„åˆ†æ”¯ï¼Œæ‰“å°é”™è¯¯æ¶ˆæ¯ <code>Cannot merge a branch with itself.</code> å¦‚æœåˆå¹¶ä¼šç”Ÿæˆé”™è¯¯ï¼Œå› ä¸ºæ‰€åšçš„æäº¤ä¸­æ²¡æœ‰æ›´æ”¹</p></li></ul><h2 id="éª¨æ¶"><a href="#éª¨æ¶" class="headerlink" title="éª¨æ¶"></a>éª¨æ¶</h2><p>éª¨æ¶ç›¸å½“ç®€é™‹ï¼Œå¤§éƒ¨åˆ†ç±»éƒ½æ˜¯ç©ºçš„ã€‚æˆ‘ä»¬æä¾›äº†æœ‰ç”¨çš„ javadoc æ³¨é‡Šï¼Œæš—ç¤ºäº†æ¯ä¸ªæ–‡ä»¶ä¸­å¯èƒ½æƒ³è¦åŒ…å«çš„å†…å®¹ã€‚<strong>æ‚¨åº”è¯¥éµå¾ªç±»ä¼¼äº Capers çš„æ–¹æ³•</strong>ï¼Œå…¶ä¸­æ‚¨çš„ <code>Main</code> ç±»æœ¬èº«ä¸åšå¤ªå¤šå·¥ä½œï¼Œè€Œæ˜¯æ ¹æ® <code>args</code> ç®€å•åœ°è°ƒç”¨å…¶ä»–æ–¹æ³•ã€‚æ‚¨å®Œå…¨å¯ä»¥åˆ é™¤å…¶ä»–ç±»æˆ–æ·»åŠ è‡ªå·±çš„ç±»ï¼Œ<strong>ä½†æ˜¯ <code>Main</code> ç±»åº”è¯¥ä¿ç•™</strong>ï¼Œå¦åˆ™æˆ‘ä»¬çš„æµ‹è¯•å°†æ— æ³•æ‰¾åˆ°æ‚¨çš„ä»£ç ã€‚</p><p>å¦‚æœæ‚¨ä¸ç¡®å®šä»ä½•å¤„å¼€å§‹ï¼Œæˆ‘ä»¬å»ºè®®æŸ¥çœ‹<a href="https://sp21.datastructur.es/materials/lab/lab6/lab6">Lab 6: Canine Capers</a>ã€‚</p><h2 id="è®¾è®¡æ–‡æ¡£"><a href="#è®¾è®¡æ–‡æ¡£" class="headerlink" title="è®¾è®¡æ–‡æ¡£"></a>è®¾è®¡æ–‡æ¡£</h2><p>ç”±äºè¿™æ¬¡æ‚¨ä¸æ˜¯ä»ä¸€ä¸ªå®è´¨æ€§çš„éª¨æ¶ä¸­å·¥ä½œï¼Œ<strong>æˆ‘ä»¬è¦æ±‚æ¯ä¸ªäººæäº¤ä¸€ä¸ªæè¿°å…¶å®ç°ç­–ç•¥çš„è®¾è®¡æ–‡æ¡£</strong>ã€‚è¿™ä¸æ˜¯è¯„åˆ†æ ‡å‡†ï¼Œä½†åœ¨æˆ‘ä»¬çš„åŠå…¬æ—¶é—´æˆ– Gitbug ä¸Šæä¾›å¸®åŠ©ä¹‹å‰ï¼Œæ‚¨å¿…é¡»æœ‰ä¸€ä¸ªæœ€æ–°å’Œå®Œæ•´çš„è®¾è®¡æ–‡æ¡£ã€‚å¦‚æœæ‚¨æ²¡æœ‰æˆ–è€…å®ƒä¸æ˜¯æœ€æ–°çš„&#x2F;ä¸å®Œæ•´çš„ï¼Œæˆ‘ä»¬å°†æ— æ³•å¸®åŠ©æ‚¨ã€‚è¿™æ˜¯ä¸ºäº†æˆ‘ä»¬åŒæ–¹è€ƒè™‘çš„ï¼šé€šè¿‡ç¼–å†™è®¾è®¡æ–‡æ¡£ï¼Œæ‚¨å·²ç»ä¸ºå¦‚ä½•è§£å†³ä»»åŠ¡åˆ¶å®šäº†ä¸€æ¡è·¯çº¿å›¾ã€‚å¦‚æœæ‚¨éœ€è¦å¸®åŠ©åˆ›å»ºè®¾è®¡æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥å¸®å¿™ï¼šï¼‰è¿™é‡Œæœ‰<a href="https://sp21.datastructur.es/materials/proj/proj2/design.html">ä¸€äº›æŒ‡å¯¼æ–¹é’ˆ</a>ï¼Œä»¥åŠæ¥è‡ª Capers å®éªŒçš„<a href="https://sp21.datastructur.es/materials/proj/proj2/capers-example">ç¤ºä¾‹</a>ã€‚</p><h2 id="å…³äºé¡¹ç›®çš„æ‚é¡¹äº‹é¡¹"><a href="#å…³äºé¡¹ç›®çš„æ‚é¡¹äº‹é¡¹" class="headerlink" title="å…³äºé¡¹ç›®çš„æ‚é¡¹äº‹é¡¹"></a>å…³äºé¡¹ç›®çš„æ‚é¡¹äº‹é¡¹</h2><p>å“‡ï¼åˆšæ‰é‚£äº›å‘½ä»¤çœŸæ˜¯å¤Ÿå¤šçš„ã€‚ä½†åˆ«æ‹…å¿ƒï¼Œä¸æ˜¯æ‰€æœ‰çš„å‘½ä»¤éƒ½åŒæ ·å›°éš¾ã€‚å¯¹äºæ¯ä¸ªå‘½ä»¤ï¼Œä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨æ¯ä¸ªéƒ¨åˆ†æ‰€ç”¨çš„å¤§è‡´è¡Œæ•°ï¼ˆè¿™ä»…è®¡ç®—ä¸è¯¥å‘½ä»¤ç›¸å…³çš„ä»£ç  - ä¸ä¼šé‡å¤è®¡ç®—åœ¨å¤šä¸ªå‘½ä»¤ä¸­é‡å¤ä½¿ç”¨çš„ä»£ç ï¼‰ã€‚ä½ ä¸å¿…æ‹…å¿ƒä¸æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆå®Œå…¨åŒ¹é…ï¼Œä½†å¸Œæœ›å®ƒèƒ½è®©ä½ äº†è§£æ¯ä¸ªå‘½ä»¤ç›¸å¯¹æ¶ˆè€—çš„æ—¶é—´ã€‚åˆå¹¶æ˜¯ä¸€ä¸ªæ¯”å…¶ä»–å‘½ä»¤æ›´é•¿çš„å‘½ä»¤ï¼Œæ‰€ä»¥ä¸è¦æŠŠå®ƒç•™åˆ°æœ€åä¸€åˆ»ï¼</p><p>è¿™æ˜¯ä¸€ä¸ªé›„å¿ƒå‹ƒå‹ƒçš„é¡¹ç›®ï¼Œå¦‚æœä½ æ„Ÿåˆ°ä¸çŸ¥ä»ä½•å¤„å¼€å§‹ï¼Œä¹Ÿä¸è¶³ä¸ºå¥‡ã€‚å› æ­¤ï¼Œè¯·éšæ„æ¯”å¹³å¸¸æ›´å¯†åˆ‡åœ°ä¸ä»–äººåˆä½œï¼Œä½†éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>åœ¨ä½ çš„ <code>gitlet/Main.java</code> æ–‡ä»¶çš„å¼€å¤´é™„è¿‘çš„æ³¨é‡Šä¸­æ‰¿è®¤æ‰€æœ‰åˆä½œè€…ã€‚</li><li>ä¸è¦åˆ†äº«å…·ä½“çš„ä»£ç ï¼›æ‰€æœ‰åˆä½œè€…å¿…é¡»ç”Ÿæˆè‡ªå·±çš„ç®—æ³•ç‰ˆæœ¬ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä»¬çš„ä¸åŒã€‚</li></ul><p>Edçš„è®¨è®ºä¸²é€šå¸¸åœ¨Gitletä¸­å˜å¾—éå¸¸é•¿ï¼Œä½†å®ƒä»¬å……æ»¡äº†å…³äºç‰¹å®šæäº¤æ–¹æ³•çš„éå¸¸å¥½çš„å¯¹è¯å’Œè®¨è®ºã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œä½ åº”è¯¥åˆ©ç”¨è¯¾ç¨‹è§„æ¨¡çš„å¤§å°ï¼Œçœ‹çœ‹æ˜¯å¦å¯ä»¥æ‰¾åˆ°ä¸ä½ åœ¨è®¨è®ºä¸²ä¸Šæœ‰ç±»ä¼¼é—®é¢˜çš„äººã€‚ä½ çš„é—®é¢˜å¾ˆæœ‰å¯èƒ½ä¸æ˜¯é‚£ä¹ˆç‹¬ç‰¹ï¼Œä»¥è‡³äºæ²¡æœ‰å…¶ä»–äººé‡åˆ°è¿‡ï¼ˆé™¤éå®ƒæ˜¯ä¸ä½ çš„è®¾è®¡ç›¸å…³çš„é”™è¯¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥æäº¤ä¸€ä¸ª Gitbugï¼‰ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸ªè§„èŒƒå·²ç»ç»™äº†ä½ è¶³å¤Ÿçš„ä¿¡æ¯æ¥å¼€å§‹é¡¹ç›®äº†ã€‚ä½†ä¸ºäº†å¸®åŠ©ä½ æ›´å¤šä¸€ç‚¹ï¼Œè¿˜æœ‰ä¸€äº›ä½ åº”è¯¥çŸ¥é“çš„äº‹æƒ…ï¼š</p><h2 id="å¤„ç†æ–‡ä»¶"><a href="#å¤„ç†æ–‡ä»¶" class="headerlink" title="å¤„ç†æ–‡ä»¶"></a>å¤„ç†æ–‡ä»¶</h2><p>è¯¥é¡¹ç›®éœ€è¦è¯»å†™æ–‡ä»¶ã€‚ä¸ºäº†æ‰§è¡Œè¿™äº›æ“ä½œï¼Œä½ å¯èƒ½ä¼šå‘ç° <code>java.io.File</code> å’Œ <code>java.nio.file.Files</code> ç±»æœ‰æ‰€å¸®åŠ©ã€‚å®é™…ä¸Šï¼Œä½ å¯èƒ½ä¼šå‘ç° <code>java.io</code> å’Œ <code>java.nio</code> åŒ…ä¸­çš„å„ç§ä¸œè¥¿éƒ½å¾ˆæœ‰ç”¨ã€‚ç¡®ä¿é˜…è¯»æˆ‘ä»¬ä¸ºä½ ç¼–å†™çš„ <code>gitlet.Utils</code> åŒ…ä¸­çš„å…¶ä»–å†…å®¹ã€‚å¦‚æœä½ é€šè¿‡æ‰€æœ‰è¿™äº›å†…å®¹è¿›è¡Œä¸€äº›æŒ–æ˜ï¼Œä½ å¯èƒ½ä¼šæ‰¾åˆ°ä¸€äº›å¯ä»¥ä½¿è¯¥é¡¹ç›®çš„ I&#x2F;O éƒ¨åˆ†<em>å¤§å¤§</em>ç®€åŒ–çš„æ–¹æ³•ï¼ä¸€ä¸ªè­¦å‘Šï¼šå¦‚æœä½ å‘ç°è‡ªå·±åœ¨ä½¿ç”¨è¯»å–å™¨ã€å†™å…¥å™¨ã€æ‰«æå™¨æˆ–æµï¼Œé‚£ä¹ˆä½ æ­£åœ¨ä½¿äº‹æƒ…å˜å¾—æ¯”å¿…è¦çš„æ›´å¤æ‚ã€‚</p><h2 id="åºåˆ—åŒ–ç»†èŠ‚"><a href="#åºåˆ—åŒ–ç»†èŠ‚" class="headerlink" title="åºåˆ—åŒ–ç»†èŠ‚"></a>åºåˆ—åŒ–ç»†èŠ‚</h2><p>å¦‚æœä½ è€ƒè™‘ä¸€ä¸‹ Gitletï¼Œä½ ä¼šæ³¨æ„åˆ°æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶åªèƒ½è¿è¡Œä¸€ä¸ªå‘½ä»¤ã€‚ä¸ºäº†æˆåŠŸå®Œæˆä½ çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œä½ éœ€è¦è®°ä½è·¨å¤šä¸ªç¨‹åºè¿è¡Œçš„ commit æ ‘ã€‚è¿™æ„å‘³ç€ä½ ä¸ä»…éœ€è¦è®¾è®¡ä¸€ç»„åœ¨æ‰§è¡ŒæœŸé—´ä»£è¡¨å†…éƒ¨ Gitlet ç»“æ„çš„ç±»ï¼Œè¿˜éœ€è¦ä¸€ç§ç±»ä¼¼çš„è¡¨ç¤ºæ–¹å¼ä½œä¸ºä½ çš„ <code>.gitlet</code> ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†è·¨å¤šæ¬¡ç¨‹åºè¿è¡Œã€‚</p><p>æ­£å¦‚å‰é¢æ‰€ç¤ºï¼Œè¿™æ ·åšçš„æ–¹ä¾¿æ–¹æ³•æ˜¯å¯¹ä½ å°†æ°¸ä¹…å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„è¿è¡Œæ—¶å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–ã€‚Java è¿è¡Œæ—¶ä¼šå®Œæˆæ‰€æœ‰å·¥ä½œï¼Œæ‰¾å‡ºéœ€è¦è½¬æ¢ä¸ºå­—èŠ‚çš„å­—æ®µä»¥åŠå¦‚ä½•è¿›è¡Œè½¬æ¢ã€‚</p><p>ä½ å·²ç»åœ¨ lab6 ä¸­åšè¿‡åºåˆ—åŒ–äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä¼šåœ¨è¿™é‡Œé‡å¤ä¿¡æ¯ã€‚å¦‚æœä½ å¯¹åºåˆ—åŒ–çš„æŸäº›æ–¹é¢ä»ç„¶æ„Ÿåˆ°å›°æƒ‘ï¼Œè¯·é‡æ–°é˜…è¯» lab6 è§„èŒƒçš„ç›¸å…³éƒ¨åˆ†ï¼Œå¹¶æ£€æŸ¥ä¸€ä¸‹ä½ çš„ä»£ç ã€‚</p><p>ç„¶è€Œï¼Œæœ‰ä¸€ä¸ªä»¤äººè®¨åŒçš„ç»†å¾®ä¹‹å¤„éœ€è¦æ³¨æ„ï¼šJava åºåˆ—åŒ–éµå¾ªæŒ‡é’ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä»…ä¼ é€’ç»™ <code>writeObject</code> çš„å¯¹è±¡è¢«åºåˆ—åŒ–å’Œå†™å…¥ï¼Œå®ƒæŒ‡å‘çš„ä»»ä½•å¯¹è±¡ä¹Ÿè¢«åºåˆ—åŒ–å’Œå†™å…¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„æäº¤çš„å†…éƒ¨è¡¨ç¤ºå°†çˆ¶æäº¤è¡¨ç¤ºä¸ºæŒ‡å‘å…¶ä»–æäº¤å¯¹è±¡çš„æŒ‡é’ˆï¼Œé‚£ä¹ˆå†™å…¥åˆ†æ”¯çš„å¤´éƒ¨å°†ä¼šå†™å…¥æ•´ä¸ªæäº¤å­å›¾ä¸­çš„æ‰€æœ‰æäº¤ï¼ˆå’Œ blobï¼‰åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™é€šå¸¸ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä¸è¦åœ¨ä½ çš„è¿è¡Œæ—¶å¯¹è±¡ä¸­ä½¿ç”¨ Java æŒ‡é’ˆæ¥å¼•ç”¨æäº¤å’Œ blobï¼Œè€Œæ˜¯ä½¿ç”¨ SHA-1 å“ˆå¸Œå­—ç¬¦ä¸²ã€‚åœ¨è¿™äº›å­—ç¬¦ä¸²å’Œè¿è¡Œæ—¶å¯¹è±¡ä¹‹é—´ä¿æŒä¸€ä¸ªè¿è¡Œæ—¶æ˜ å°„ã€‚ä½ åœ¨ Gitlet è¿è¡Œæ—¶åˆ›å»ºå¹¶å¡«å……è¿™ä¸ªæ˜ å°„ï¼Œä½†æ°¸è¿œä¸ä¼šå°†å…¶è¯»å–æˆ–å†™å…¥æ–‡ä»¶ä¸­ã€‚</p><p>ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œä¸è¦åœ¨ä½ çš„è¿è¡Œæ—¶å¯¹è±¡ä¸­ä½¿ç”¨ Java æŒ‡é’ˆæ¥å¼•ç”¨æäº¤å’Œ blobï¼Œè€Œæ˜¯ä½¿ç”¨ SHA-1 å“ˆå¸Œå­—ç¬¦ä¸²ã€‚åœ¨è¿™äº›å­—ç¬¦ä¸²å’Œè¿è¡Œæ—¶å¯¹è±¡ä¹‹é—´ä¿æŒä¸€ä¸ªè¿è¡Œæ—¶æ˜ å°„ã€‚ä½ åœ¨ Gitlet è¿è¡Œæ—¶åˆ›å»ºå¹¶å¡«å……è¿™ä¸ªæ˜ å°„ï¼Œä½†æ°¸è¿œä¸ä¼šå°†å…¶è¯»å–æˆ–å†™å…¥æ–‡ä»¶ä¸­ã€‚</p><p>ä½ å¯èƒ½ä¼šå‘ç°æœ‰ä¸€äº›ä¾¿åˆ©ï¼Œå¯¹æäº¤è¿›è¡Œå¤šä½™çš„æŒ‡é’ˆï¼Œä»¥é¿å…æ¯æ¬¡æŸ¥æ‰¾æ—¶æ‰€éœ€çš„éº»çƒ¦å’Œæ‰§è¡Œæ—¶é—´ã€‚ä½ å¯ä»¥å°†è¿™æ ·çš„æŒ‡é’ˆå­˜å‚¨åœ¨ä½ çš„å¯¹è±¡ä¸­ï¼ŒåŒæ—¶é¿å…å°†å®ƒä»¬å†™å‡ºå»ï¼Œæ–¹æ³•æ˜¯å£°æ˜å®ƒä»¬ä¸ºâ€œç¬æ€â€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private transient MyCommitType parent1;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„å­—æ®µå°†ä¸ä¼šè¢«åºåˆ—åŒ–ï¼Œå¹¶ä¸”åœ¨ååºåˆ—åŒ–æ—¶ï¼Œå°†è¢«è®¾ç½®ä¸ºå®ƒä»¬çš„é»˜è®¤å€¼ï¼ˆå¯¹äºå¼•ç”¨ç±»å‹ä¸º nullï¼‰ã€‚å½“è¯»å–åŒ…å«ç¬æ€å­—æ®µçš„å¯¹è±¡æ—¶ï¼Œä½ å¿…é¡»å°å¿ƒåœ°å°†ç¬æ€å­—æ®µè®¾ç½®ä¸ºé€‚å½“çš„å€¼</p><p>ã€‚</p><p>ä¸å¹¸çš„æ˜¯ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æŸ¥çœ‹ä½ çš„ç¨‹åºäº§ç”Ÿçš„åºåˆ—åŒ–æ–‡ä»¶ï¼ˆç”¨äºè°ƒè¯•ç›®çš„ï¼‰ä¼šéå¸¸æ²¡æœ‰å¯ç¤ºæ€§ï¼›å†…å®¹ä»¥ Java çš„ç§æœ‰åºåˆ—åŒ–ç¼–ç è¿›è¡Œç¼–ç ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç®€å•çš„è°ƒè¯•å·¥å…·ç¨‹åºï¼Œä½ å¯èƒ½ä¼šè§‰å¾—æœ‰ç”¨ï¼š<code>gitlet.DumpObj</code>ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜… <code>gitlet/DumpObj.java</code> çš„ Javadoc æ³¨é‡Šã€‚</p><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><p>ä½ åº”è¯¥é˜…è¯»æ•´ä¸ªè¿™ä¸ªéƒ¨åˆ†ï¼Œå°½ç®¡ <a href="https://www.youtube.com/watch?v=uMYpuQuHGu0&t=752s">è§†é¢‘</a> ä¹Ÿæ˜¯å¯ç”¨çš„ï¼Œæ–¹ä¾¿ä½ æŸ¥çœ‹ã€‚</p><p>åƒå¾€å¸¸ä¸€æ ·ï¼Œæµ‹è¯•æ˜¯é¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚ç¡®ä¿ä¸ºæ¯ä¸ªå‘½ä»¤æä¾›è‡ªå·±çš„é›†æˆæµ‹è¯•ï¼Œè¦†ç›–æ‰€æœ‰æŒ‡å®šçš„åŠŸèƒ½ã€‚æ­¤å¤–ï¼Œéšæ„æ·»åŠ ä»»ä½•å•å…ƒæµ‹è¯•ã€‚æˆ‘ä»¬æ²¡æœ‰æä¾›ä»»ä½•å•å…ƒæµ‹è¯•ï¼Œå› ä¸ºå•å…ƒæµ‹è¯•é«˜åº¦ä¾èµ–äºä½ çš„å®ç°ã€‚</p><p>æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œå¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°ç¼–å†™é›†æˆæµ‹è¯•ï¼š<code>testing/tester.py</code>ã€‚è¿™ä¸ªç¨‹åºä¼šè§£é‡Šå¸¦æœ‰ <code>.in</code> æ‰©å±•åçš„æµ‹è¯•æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make check</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦æœ‰å…³å¤±è´¥æµ‹è¯•çš„å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚ä½ çš„ç¨‹åºè¾“å‡ºäº†ä»€ä¹ˆï¼Œè¿è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make check TESTER_FLAGS=&quot;--verbose&quot;</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦è¿è¡Œå•ä¸ªæµ‹è¯•ï¼Œåœ¨ <code>testing</code> å­ç›®å½•ä¸­è¿è¡Œå‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 tester.py --verbose FILE.in ...</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>FILE.in ...</code> æ˜¯ä½ æƒ³è¦æ£€æŸ¥çš„ç‰¹å®š <code>.in</code> æ–‡ä»¶åˆ—è¡¨ã€‚</p><p><strong>å°å¿ƒè¿è¡Œæ­¤å‘½ä»¤</strong>ï¼Œå› ä¸ºå®ƒä¸ä¼šé‡æ–°ç¼–è¯‘ä½ çš„ä»£ç ã€‚æ¯æ¬¡è¿è¡Œ <code>python</code> å‘½ä»¤ä¹‹å‰ï¼Œä½ éƒ½å¿…é¡»å…ˆç¼–è¯‘ä½ çš„ä»£ç ï¼ˆé€šè¿‡ <code>make</code>ï¼‰ã€‚</p><p>å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 tester.py --verbose --keep FILE.in</span><br></pre></td></tr></table></figure><p>å°†åœ¨æµ‹è¯•è„šæœ¬æ£€æµ‹åˆ°é”™è¯¯çš„åœ°æ–¹ä¿ç•™ <code>tester.py</code> äº§ç”Ÿçš„ç›®å½•ï¼Œä»¥ä¾¿ä½ å¯ä»¥æ£€æŸ¥å®ƒçš„æ–‡ä»¶ã€‚å¦‚æœä½ çš„æµ‹è¯•æ²¡æœ‰å‡ºé”™ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä»ç„¶ä¼šä¿ç•™ä¸‹æ¥ï¼Œå…¶ä¸­åŒ…å«æ‰€æœ‰ä¸œè¥¿çš„æœ€ç»ˆå†…å®¹ã€‚</p><p>å®é™…ä¸Šï¼Œæµ‹è¯•ç¨‹åºå®ç°äº†ä¸€ä¸ªéå¸¸ç®€å•çš„<em>ç‰¹å®šé¢†åŸŸè¯­è¨€ï¼ˆDSLï¼‰</em>ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å‘½ä»¤ï¼š</p><ul><li>è®¾ç½®æˆ–ä»æµ‹è¯•ç›®å½•ä¸­åˆ é™¤æ–‡ä»¶ï¼›</li><li>è¿è¡Œ <code>java gitlet.Main</code>ï¼›</li><li>æ£€æŸ¥ Gitlet çš„è¾“å‡ºä¸ç‰¹å®šè¾“å‡ºæˆ–æè¿°å¯èƒ½è¾“å‡ºçš„æ­£åˆ™è¡¨è¾¾å¼ï¼›</li><li>æ£€æŸ¥æ–‡ä»¶çš„å­˜åœ¨ã€ä¸å­˜åœ¨å’Œå†…å®¹ã€‚è¿è¡Œå‘½ä»¤</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 testing/tester.py</span><br></pre></td></tr></table></figure><p>ï¼ˆæ²¡æœ‰æ“ä½œæ•°ï¼Œå¦‚æ‰€ç¤ºï¼‰å°†æä¾›ä¸€æ¡æ¶ˆæ¯ï¼Œè®°å½•æ­¤è¯­è¨€çš„å†…å®¹ã€‚æˆ‘ä»¬åœ¨ <code>testing/samples</code> ç›®å½•ä¸­æä¾›äº†ä¸€äº›ç¤ºä¾‹ã€‚ä¸è¦å°†ä½ è‡ªå·±çš„æµ‹è¯•æ”¾åœ¨è¯¥å­ç›®å½•ä¸­ï¼›å°†å®ƒä»¬æ”¾åœ¨ä¸æˆ‘ä»¬çš„æµ‹è¯•ä¸åŒçš„åœ°æ–¹ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šæ··æ·†æˆ‘ä»¬çš„æµ‹è¯•å’Œä½ çš„æµ‹è¯•ï¼ˆåè€…å¯èƒ½æœ‰é”™è¯¯ï¼ï¼‰ã€‚å°†æ‰€æœ‰ä½ çš„ <code>.in</code> æ–‡ä»¶æ”¾åœ¨ <code>testing</code> ç›®å½•ä¸‹çš„å¦ä¸€ä¸ªåä¸º <code>student_tests</code> çš„æ–‡ä»¶å¤¹ä¸­ã€‚åœ¨éª¨æ¶ä¸­ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸ºç©ºã€‚</p><p>æˆ‘ä»¬å·²ç»åœ¨ Makefile ä¸­æ·»åŠ äº†ä¸€äº›å†…å®¹ï¼Œä»¥è°ƒæ•´äººä»¬çš„è®¾ç½®ä¹‹é—´çš„å·®å¼‚ã€‚å¦‚æœä½ çš„ç³»ç»Ÿè°ƒç”¨ Python 3 çš„å‘½ä»¤åªæ˜¯ <code>python</code>ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„ Makefileï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make PYTHON=python check</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥ä½¿ç”¨é¢å¤–çš„æ ‡å¿—å‘ <code>tester.py</code> ä¼ é€’é¢å¤–çš„æ ‡å¿—ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make TESTER_FLAGS=&quot;--keep --verbose&quot;</span><br></pre></td></tr></table></figure><h2 id="å¯¹å‘˜å·¥è§£å†³æ–¹æ¡ˆè¿›è¡Œæµ‹è¯•"><a href="#å¯¹å‘˜å·¥è§£å†³æ–¹æ¡ˆè¿›è¡Œæµ‹è¯•" class="headerlink" title="å¯¹å‘˜å·¥è§£å†³æ–¹æ¡ˆè¿›è¡Œæµ‹è¯•"></a>å¯¹å‘˜å·¥è§£å†³æ–¹æ¡ˆè¿›è¡Œæµ‹è¯•</h2><p>æˆªè‡³ 2 æœˆ 28 æ—¥æ˜ŸæœŸæ—¥ï¼Œç°åœ¨ä½ å¯ä»¥ä½¿ç”¨å‘˜å·¥è§£å†³æ–¹æ¡ˆæ¥éªŒè¯ä½ å¯¹å‘½ä»¤çš„ç†è§£ä»¥åŠéªŒè¯ä½ è‡ªå·±çš„æµ‹è¯•ï¼<a href="https://sp21.datastructur.es/materials/guides/staff-gitlet">è¿™é‡Œ</a>æœ‰ä¸€ä¸ªæŒ‡å—ã€‚</p><h2 id="ç†è§£é›†æˆæµ‹è¯•"><a href="#ç†è§£é›†æˆæµ‹è¯•" class="headerlink" title="ç†è§£é›†æˆæµ‹è¯•"></a>ç†è§£é›†æˆæµ‹è¯•</h2><p>åœ¨ Gitbugs ä¸Šå‘æˆ‘ä»¬è¯·æ±‚å¸®åŠ©ï¼Œæˆ–è€…åœ¨åŠå…¬æ—¶é—´æ¥æ¥å—å¸®åŠ©æ—¶ï¼Œæˆ‘ä»¬å°†é¦–å…ˆè¦æ±‚ä½ æä¾›ä¸€ä¸ªå¤±è´¥çš„æµ‹è¯•ï¼Œå› æ­¤ä½ å­¦ä¼šåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ç¼–å†™æµ‹è¯•éå¸¸é‡è¦ã€‚æˆ‘ä»¬å·²ç»åšäº†å¾ˆå¤šå·¥ä½œï¼Œä½¿è¿™ä¸€è¿‡ç¨‹å°½å¯èƒ½è½»æ¾ï¼Œè¯·èŠ±æ—¶é—´é˜…è¯»æœ¬èŠ‚ï¼Œä»¥ä¾¿ç†è§£æä¾›çš„æµ‹è¯•å¹¶è‡ªå·±ç¼–å†™è‰¯å¥½çš„æµ‹è¯•ã€‚</p><p>é›†æˆæµ‹è¯•çš„æ ¼å¼ä¸ Capers çš„æµ‹è¯•ç±»ä¼¼ã€‚å¦‚æœä½ ä¸çŸ¥é“ Capers çš„é›†æˆæµ‹è¯•ï¼ˆå³ <code>.in</code> æ–‡ä»¶ï¼‰æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¯·å…ˆé˜…è¯» <a href="https://sp21.datastructur.es/materials/lab/lab6/lab6">capers è§„èŒƒ</a> ä¸­çš„è¯¥éƒ¨åˆ†ã€‚</p><p>æä¾›çš„æµ‹è¯•è¿œéå…¨é¢ï¼Œä½ è‚¯å®šéœ€è¦ç¼–å†™è‡ªå·±çš„æµ‹è¯•æ‰èƒ½è·å¾—é¡¹ç›®çš„æ»¡åˆ†ã€‚ä¸ºäº†ç¼–å†™æµ‹è¯•ï¼Œè®©æˆ‘ä»¬é¦–å…ˆäº†è§£ä¸€ä¸‹è¿™ä¸€åˆ‡æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>è¿™æ˜¯ <code>testing</code> ç›®å½•çš„ç»“æ„ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ student_tests                    &lt;==== ä½ çš„ .in æ–‡ä»¶å°†æ”¾åœ¨è¿™é‡Œ</span><br><span class="line">â”œâ”€â”€ samples                          &lt;==== æˆ‘ä»¬æä¾›çš„ç¤ºä¾‹ .in æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ test01-init.in               &lt;==== ä¸€ä¸ªç¤ºä¾‹æµ‹è¯•</span><br><span class="line">â”‚   â”œâ”€â”€ test02-basic-checkout.in</span><br><span class="line">â”‚   â”œâ”€â”€ test03-basic-log.in</span><br><span class="line">â”‚   â”œâ”€â”€ test04-prev-checkout.in</span><br><span class="line">â”‚   â””â”€â”€ definitions.inc</span><br><span class="line">â”œâ”€â”€ src                              &lt;==== åŒ…å«ç”¨äºæµ‹è¯•çš„æ–‡ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ notwug.txt</span><br><span class="line">â”‚   â””â”€â”€ wug.txt</span><br><span class="line">â”œâ”€â”€ runner.py                        &lt;==== ç”¨äºå¸®åŠ©è°ƒè¯•ä½ çš„ç¨‹åºçš„è„šæœ¬</span><br><span class="line">â””â”€â”€ tester.py                        &lt;==== æµ‹è¯•ä½ çš„ç¨‹åºçš„è„šæœ¬</span><br></pre></td></tr></table></figure><p>å°±åƒ Capers ä¸€æ ·ï¼Œè¿™äº›æµ‹è¯•é€šè¿‡åœ¨ <code>testing</code> ç›®å½•å†…åˆ›å»ºä¸´æ—¶ç›®å½•å¹¶è¿è¡Œ <code>.in</code> æ–‡ä»¶ä¸­æŒ‡å®šçš„å‘½ä»¤æ¥å·¥ä½œã€‚å¦‚æœä½¿ç”¨ <code>--keep</code> æ ‡å¿—ï¼Œåˆ™è¯¥ä¸´æ—¶ç›®å½•å°†åœ¨æµ‹è¯•å®Œæˆåä¿ç•™ï¼Œä»¥ä¾¿ä½ å¯ä»¥æ£€æŸ¥å®ƒã€‚</p><p>ä¸ Capers ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†å·¥ä½œç›®å½•ä¸­æ–‡ä»¶çš„ <em>å†…å®¹</em>ã€‚å› æ­¤ï¼Œåœ¨è¿™ä¸ª <code>testing</code> æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º <code>src</code> çš„é¢å¤–æ–‡ä»¶å¤¹ã€‚è¯¥ç›®å½•å­˜å‚¨äº†è®¸å¤šé¢„å…ˆå¡«å……çš„ <code>.txt</code> æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬éœ€è¦çš„ç‰¹å®šå†…å®¹ã€‚ç¨åæˆ‘ä»¬ä¼šå›åˆ°è¿™ä¸€ç‚¹ï¼Œä½†ç°åœ¨åªéœ€çŸ¥é“ <code>src</code> å­˜å‚¨äº†å®é™…çš„æ–‡ä»¶å†…å®¹ã€‚<code>samples</code> åŒ…å«ç¤ºä¾‹æµ‹è¯•çš„ <code>.in</code> æ–‡ä»¶ï¼ˆå³æ£€æŸ¥ç‚¹æµ‹è¯•ï¼‰ã€‚å½“ä½ åˆ›å»ºè‡ªå·±çš„æµ‹è¯•æ—¶ï¼Œåº”å°†å®ƒä»¬æ·»åŠ åˆ°æœ€åˆä¸ºç©ºçš„ <code>student_tests</code> æ–‡ä»¶å¤¹ä¸­ã€‚</p><p><code>.in</code> æ–‡ä»¶åœ¨ Gitlet ä¸­æœ‰æ›´å¤šçš„åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯æ¥è‡ª <code>tester.py</code> æ–‡ä»¶çš„è¯´æ˜ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># ...  ä¸€ä¸ªæ³¨é‡Šï¼Œæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚</span><br><span class="line">I FILE åŒ…å«ã€‚ç”¨ FILE çš„å†…å®¹æ›¿æ¢æ­¤è¯­å¥ï¼Œ</span><br><span class="line">      ç›¸å¯¹äºåŒ…å« .in æ–‡ä»¶çš„ç›®å½•è¿›è¡Œè§£é‡Šã€‚</span><br><span class="line">C DIR  åˆ›å»ºä¸€ä¸ªå­ç›®å½• DIRï¼ˆå¦‚æœ‰å¿…è¦ï¼‰ï¼Œå¹¶åˆ‡æ¢åˆ°æ­¤ç›®å½•ä¸‹ï¼Œ</span><br><span class="line">      è¯¥ç›®å½•ä½äºæ­¤æµ‹è¯•çš„ä¸»ç›®å½•ä¸‹ã€‚å¦‚æœ DIR ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›</span><br><span class="line">      é»˜è®¤ç›®å½•ã€‚æ­¤å‘½ä»¤ä¸»è¦ç”¨äºè®¾ç½®è¿œç¨‹å­˜å‚¨åº“ã€‚</span><br><span class="line">T N    è®¾ç½®åç»­æµ‹è¯•ä¸­ gitlet å‘½ä»¤çš„è¶…æ—¶æ—¶é—´ä¸º N</span><br><span class="line">      ç§’ã€‚</span><br><span class="line">+ NAME F</span><br><span class="line">      å°† src/F çš„å†…å®¹å¤åˆ¶åˆ°åä¸º NAME çš„æ–‡ä»¶ä¸­ã€‚</span><br><span class="line">- NAME</span><br><span class="line">      åˆ é™¤åä¸º NAME çš„æ–‡ä»¶ã€‚</span><br><span class="line">&gt; COMMAND OPERANDS</span><br><span class="line">LINE1</span><br><span class="line">LINE2</span><br><span class="line">...</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">      ä½¿ç”¨ COMMAND å‚æ•°ä½œä¸ºå‚æ•°è¿è¡Œ gitlet.Mainã€‚å°†å…¶è¾“å‡ºä¸</span><br><span class="line">      LINE1ã€LINE2 ç­‰è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå­˜åœ¨è¶³å¤Ÿçš„å·®å¼‚åˆ™æŠ¥å‘Š</span><br><span class="line">      é”™è¯¯ã€‚&lt;&lt;&lt; åˆ†éš”ç¬¦åé¢å¯ä»¥è·Ÿä¸€ä¸ªæ˜Ÿå· (*)ï¼Œ</span><br><span class="line">      è¿™æ ·ï¼Œå‰é¢çš„è¡Œå°†è¢«è§†ä¸º Python æ­£åˆ™è¡¨è¾¾å¼å¹¶ç›¸åº”åŒ¹é…ã€‚</span><br><span class="line">      å‡å®šåŒ…å« gitlet.Main ç¨‹åºçš„ç›®å½•æˆ– JAR æ–‡ä»¶åœ¨</span><br><span class="line">      --progdir æŒ‡å®šçš„ç›®å½•ä¸­ï¼ˆé»˜è®¤ä¸º ..ï¼‰ã€‚</span><br><span class="line">= NAME F</span><br><span class="line">      æ£€æŸ¥åä¸º NAME çš„æ–‡ä»¶æ˜¯å¦ä¸ src/F ç›¸åŒï¼Œå¦‚æœä¸åŒåˆ™æŠ¥å‘Š</span><br><span class="line">      é”™è¯¯ã€‚</span><br><span class="line">* NAME</span><br><span class="line">      æ£€æŸ¥åä¸º NAME çš„æ–‡ä»¶æ˜¯å¦ä¸å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æŠ¥å‘Š</span><br><span class="line">      é”™è¯¯ã€‚</span><br><span class="line">E NAME</span><br><span class="line">      æ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½• NAME æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ¥å‘Š</span><br><span class="line">      é”™è¯¯ã€‚</span><br><span class="line">D VAR &quot;VALUE&quot;</span><br><span class="line">      å°†å˜é‡ VAR å®šä¹‰ä¸ºå­—é¢å€¼ VALUEã€‚VALUE è¢«è§†ä¸ºåŸå§‹ Python å­—ç¬¦ä¸²</span><br><span class="line">      ï¼ˆä¾‹å¦‚ r&quot;VALUE&quot;ï¼‰ã€‚é¦–å…ˆå¯¹ VALUE è¿›è¡Œæ›¿æ¢ã€‚</span><br></pre></td></tr></table></figure><p>ä¸å¿…æ‹…å¿ƒä¸Šè¿°è¯´æ˜ä¸­æåˆ°çš„ Python æ­£åˆ™è¡¨è¾¾å¼çš„ä¸œè¥¿ï¼šæˆ‘ä»¬å°†å‘ä½ å±•ç¤ºå®ƒå¾ˆç®€å•ï¼Œç”šè‡³ä¼šé€šè¿‡ä¸€ä¸ªä¾‹å­æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒã€‚</p><p>è®©æˆ‘ä»¬èµ°ä¸€éæµ‹è¯•ï¼Œçœ‹çœ‹ä»å¤´åˆ°å°¾å‘ç”Ÿäº†ä»€ä¹ˆã€‚è®©æˆ‘ä»¬æ£€æŸ¥ <code>test02-basic-checkout.in</code>ã€‚</p><h4 id="ç¤ºä¾‹æµ‹è¯•"><a href="#ç¤ºä¾‹æµ‹è¯•" class="headerlink" title="ç¤ºä¾‹æµ‹è¯•"></a>ç¤ºä¾‹æµ‹è¯•</h4><p>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿è¡Œæ­¤æµ‹è¯•æ—¶ï¼Œå°†åˆ›å»ºä¸€ä¸ªæœ€åˆä¸ºç©ºçš„ä¸´æ—¶ç›®å½•ã€‚æˆ‘ä»¬çš„ç›®å½•ç»“æ„ç°åœ¨æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ student_tests</span><br><span class="line">â”œâ”€â”€ samples</span><br><span class="line">â”‚   â”œâ”€â”€ test01-init.in</span><br><span class="line">â”‚   â”œâ”€â”€ test02-basic-checkout.in</span><br><span class="line">â”‚   â”œâ”€â”€ test03-basic-log.in</span><br><span class="line">â”‚   â”œâ”€â”€ test04-prev-checkout.in</span><br><span class="line">â”‚   â””â”€â”€ definitions.inc</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ notwug.txt</span><br><span class="line">â”‚   â””â”€â”€ wug.txt</span><br><span class="line">â”œâ”€â”€ test02-basic-checkout_0          &lt;==== åˆšåˆ›å»º</span><br><span class="line">â”œâ”€â”€ runner.py</span><br><span class="line">â””â”€â”€ tester.py</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¸´æ—¶ç›®å½•æ˜¯ç”¨äºæ­¤æµ‹è¯•æ‰§è¡Œçš„ Gitlet ä»“åº“ï¼Œå› æ­¤æˆ‘ä»¬å°†åœ¨é‚£é‡Œæ·»åŠ ä¸œè¥¿å¹¶è¿è¡Œæ‰€æœ‰çš„ Gitlet å‘½ä»¤ã€‚å¦‚æœç¬¬äºŒæ¬¡è¿è¡Œæµ‹è¯•è€Œä¸åˆ é™¤ç›®å½•ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªåä¸º <code>test02-basic-checkout_1</code> çš„æ–°ç›®å½•ï¼Œä¾æ­¤ç±»æ¨ã€‚æ¯æ¬¡æµ‹è¯•çš„æ‰§è¡Œéƒ½ä½¿ç”¨å®ƒ</p><p>è‡ªå·±çš„ç›®å½•ï¼Œå› æ­¤ä¸å¿…æ‹…å¿ƒæµ‹è¯•ä¹‹é—´çš„å¹²æ‰°ã€‚</p><p>æµ‹è¯•çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ³¨é‡Šï¼Œæ‰€ä»¥æˆ‘ä»¬å¿½ç•¥å®ƒã€‚</p><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; init</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>è¿™ä¸åº”è¯¥æœ‰ä»»ä½•è¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤éƒ¨åˆ†çš„ç¬¬ä¸€è¡Œä¸å¸¦æœ‰ <code>&gt;</code> çš„è¡Œå’Œå¸¦æœ‰ <code>&lt;&lt;&lt;</code> çš„è¡Œä¹‹é—´æ²¡æœ‰æ–‡æœ¬æ¥åˆ¤æ–­ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥é“çš„ï¼Œè¿™åº”è¯¥åˆ›å»ºä¸€ä¸ª <code>.gitlet</code> æ–‡ä»¶å¤¹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„ç°åœ¨æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ student_tests</span><br><span class="line">â”œâ”€â”€ samples</span><br><span class="line">â”‚   â”œâ”€â”€ test01-init.in</span><br><span class="line">â”‚   â”œâ”€â”€ test02-basic-checkout.in</span><br><span class="line">â”‚   â”œâ”€â”€ test03-basic-log.in</span><br><span class="line">â”‚   â”œâ”€â”€ test04-prev-checkout.in</span><br><span class="line">â”‚   â””â”€â”€ definitions.inc</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ notwug.txt</span><br><span class="line">â”‚   â””â”€â”€ wug.txt</span><br><span class="line">â”œâ”€â”€ test02-basic-checkout_0</span><br><span class="line">â”‚   â””â”€â”€ .gitlet                     &lt;==== åˆšåˆ›å»º</span><br><span class="line">â”œâ”€â”€ runner.py</span><br><span class="line">â””â”€â”€ tester.py</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ wug.txt wug.txt</span><br></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œä½¿ç”¨ <code>+</code> å‘½ä»¤ã€‚å®ƒå°†å³ä¾§çš„æ–‡ä»¶ä» <code>src</code> ç›®å½•å¤åˆ¶å…¶å†…å®¹åˆ°ä¸´æ—¶ç›®å½•ä¸­çš„å·¦ä¾§æ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼‰ã€‚å®ƒä»¬çš„åå­—ç›¸åŒï¼Œä½†ç”±äºå®ƒä»¬ä½äºä¸åŒçš„ç›®å½•ä¸­ï¼Œè¿™å¹¶ä¸é‡è¦ã€‚åœ¨æ‰§è¡Œæ­¤å‘½ä»¤åï¼Œæˆ‘ä»¬çš„ç›®å½•ç»“æ„ç°åœ¨æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Makefile</span><br><span class="line">â”œâ”€â”€ student_tests</span><br><span class="line">â”œâ”€â”€ samples</span><br><span class="line">â”‚   â”œâ”€â”€ test01-init.in</span><br><span class="line">â”‚   â”œâ”€â”€ test02-basic-checkout.in</span><br><span class="line">â”‚   â”œâ”€â”€ test03-basic-log.in</span><br><span class="line">â”‚   â”œâ”€â”€ test04-prev-checkout.in</span><br><span class="line">â”‚   â””â”€â”€ definitions.inc</span><br><span class="line">â”œâ”€â”€ src</span><br><span class="line">â”‚   â”œâ”€â”€ notwug.txt</span><br><span class="line">â”‚   â””â”€â”€ wug.txt</span><br><span class="line">â”œâ”€â”€ test02-basic-checkout_0</span><br><span class="line">â”‚   â”œâ”€â”€ .gitlet</span><br><span class="line">â”‚   â””â”€â”€ wug.txt                     &lt;==== åˆšåˆ›å»º</span><br><span class="line">â”œâ”€â”€ runner.py</span><br><span class="line">â””â”€â”€ tester.py</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬çœ‹åˆ°äº† <code>src</code> ç›®å½•çš„ç”¨é€”ï¼šå®ƒåŒ…å«æµ‹è¯•å¯ä»¥ä½¿ç”¨çš„æ–‡ä»¶å†…å®¹ï¼Œä»¥ä¾¿è®¾ç½® Gitlet ä»“åº“ã€‚å¦‚æœä½ æƒ³è¦å‘æ–‡ä»¶æ·»åŠ ç‰¹æ®Šå†…å®¹ï¼Œä½ åº”è¯¥å°†è¿™äº›å†…å®¹æ·»åŠ åˆ° <code>src</code> ä¸­çš„ä¸€ä¸ªå‘½ååˆé€‚çš„æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ä¸æ­¤å¤„ç›¸åŒçš„ <code>+</code> å‘½ä»¤ã€‚å¾ˆå®¹æ˜“æ··æ·†å‚æ•°çš„é¡ºåºï¼Œæ‰€ä»¥ç¡®ä¿å³ä¾§å¼•ç”¨ <code>src</code> ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œè€Œå·¦ä¾§å¼•ç”¨ä¸´æ—¶ç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</p><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; add wug.txt</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™åº”è¯¥æ²¡æœ‰ä»»ä½•è¾“å‡ºã€‚<code>wug.txt</code> æ–‡ä»¶ç°åœ¨åœ¨ä¸´æ—¶ç›®å½•ä¸­å‡†å¤‡æ·»åŠ ã€‚æ­¤æ—¶ï¼Œä½ çš„ç›®å½•ç»“æ„å¯èƒ½ä¼šåœ¨ <code>.gitlet</code> ç›®å½•å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºä½ éœ€è¦ä»¥æŸç§æ–¹å¼æŒä¹…ä¿å­˜ <code>wug.txt</code> å‡†å¤‡æ·»åŠ çš„äº‹å®ã€‚</p><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; commit &quot;added wug&quot;</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œæ²¡æœ‰è¾“å‡ºï¼Œä½ çš„ç›®å½•ç»“æ„å¯èƒ½ä¼šåœ¨ <code>.gitlet</code> ä¸­å‘ç”Ÿå˜åŒ–ã€‚</p><p>æ¥ä¸‹æ¥çš„éƒ¨åˆ†æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ wug.txt notwug.txt</span><br></pre></td></tr></table></figure><p>ç”±äº <code>wug.txt</code> å·²ç»å­˜åœ¨äºæˆ‘ä»¬çš„ä¸´æ—¶ç›®å½•ä¸­ï¼Œå…¶å†…å®¹å°†æ›´æ”¹ä¸º <code>src/notwug.txt</code> ä¸­çš„ä»»ä½•å†…å®¹ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; checkout -- wug.txt</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>åŒæ ·ï¼Œæ²¡æœ‰è¾“å‡ºã€‚ç„¶è€Œï¼Œå®ƒåº”è¯¥å°†æˆ‘ä»¬ä¸´æ—¶ç›®å½•ä¸­çš„ <code>wug.txt</code> çš„å†…å®¹æ›´æ”¹å›åŸå§‹å†…å®¹ï¼Œå³ <code>src/wug.txt</code> çš„å†…å®¹ã€‚ä¸‹ä¸€ä¸ªå‘½ä»¤æ˜¯æ–­è¨€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">= wug.txt wug.txt</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ªæ–­è¨€ï¼šå¦‚æœå·¦ä¾§çš„æ–‡ä»¶ï¼ˆå†æ¬¡å¼ºè°ƒï¼Œè¿™æ˜¯åœ¨ä¸´æ—¶ç›®å½•ä¸­ï¼‰ä¸å³ä¾§çš„æ–‡ä»¶ï¼ˆæ¥è‡ª <code>src</code> ç›®å½•ï¼‰çš„å†…å®¹ä¸å®Œå…¨ç›¸åŒï¼Œåˆ™æµ‹è¯•è„šæœ¬å°†æŠ¥é”™å¹¶è¯´ä½ çš„æ–‡ä»¶å†…å®¹ä¸æ­£ç¡®ã€‚</p><p>è¿˜æœ‰ä¸¤ç§å…¶ä»–å¯ç”¨äºæ–­è¨€çš„å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E NAME</span><br></pre></td></tr></table></figure><p>å°†æ–­è¨€ä¸´æ—¶ç›®å½•ä¸­å­˜åœ¨ä¸€ä¸ªåä¸º <code>NAME</code> çš„æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ã€‚å®ƒä¸æ£€æŸ¥å†…å®¹ï¼Œåªæ£€æŸ¥å®ƒæ˜¯å¦å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ï¼Œåˆ™æµ‹è¯•å°†å¤±è´¥ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* NAME</span><br></pre></td></tr></table></figure><p>æ–­è¨€ä¸´æ—¶ç›®å½•ä¸­ä¸å­˜åœ¨åä¸º <code>NAME</code> çš„æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ã€‚å¦‚æœå­˜åœ¨å…·æœ‰è¯¥åç§°çš„æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹ï¼Œåˆ™æµ‹è¯•å°†å¤±è´¥ã€‚</p><p>è¿™æ°å¥½æ˜¯æµ‹è¯•çš„æœ€åä¸€è¡Œï¼Œæ‰€ä»¥æµ‹è¯•ç»“æŸäº†ã€‚å¦‚æœæä¾›äº† <code>--keep</code> æ ‡å¿—ï¼Œåˆ™ä¸´æ—¶ç›®å½•å°†ä¿ç•™ï¼Œå¦åˆ™å°†è¢«åˆ é™¤ã€‚å¦‚æœä½ æ€€ç–‘ä½ çš„ <code>.gitlet</code> ç›®å½•æ²¡æœ‰è¢«æ­£ç¡®è®¾ç½®æˆ–è€…å­˜åœ¨ä¸€äº›æŒä¹…æ€§é—®é¢˜ï¼Œä½ å¯èƒ½ä¼šå¸Œæœ›ä¿ç•™å®ƒã€‚</p><h4 id="æµ‹è¯•å‡†å¤‡"><a href="#æµ‹è¯•å‡†å¤‡" class="headerlink" title="æµ‹è¯•å‡†å¤‡"></a>æµ‹è¯•å‡†å¤‡</h4><p>æ­£å¦‚ä½ å¾ˆå¿«ä¼šå‘ç°çš„ï¼Œæµ‹è¯•ä¸€ä¸ªç‰¹å®šå‘½ä»¤å¯èƒ½éœ€è¦å¾ˆå¤šé‡å¤çš„è®¾ç½®ï¼šä¾‹å¦‚ï¼Œå¦‚æœä½ æ­£åœ¨æµ‹è¯• <code>checkout</code> å‘½ä»¤ï¼Œä½ éœ€è¦ï¼š</p><ol><li>åˆå§‹åŒ–ä¸€ä¸ª Gitlet ä»“åº“</li><li>ä½¿ç”¨æŸä¸ªç‰ˆæœ¬ï¼ˆv1ï¼‰åœ¨æäº¤ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</li><li>ä½¿ç”¨è¯¥æ–‡ä»¶çš„å¦ä¸€ä¸ªç‰ˆæœ¬ï¼ˆv2ï¼‰åœ¨å¦ä¸€ä¸ªæäº¤ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</li><li>å°†è¯¥æ–‡ä»¶æ£€å‡ºåˆ° v1</li></ol><p>å¦‚æœä½ æƒ³æµ‹è¯•åœ¨ç¬¬äºŒä¸ªæäº¤ä¸­æœªè·Ÿè¸ªä½†åœ¨ç¬¬ä¸€ä¸ªæäº¤ä¸­å·²è·Ÿè¸ªçš„æ–‡ä»¶ï¼Œå¯èƒ½è¿˜éœ€è¦æ›´å¤šçš„è®¾ç½®ã€‚</p><p>å› æ­¤ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ æ‰€æœ‰è¿™äº›è®¾ç½®ï¼Œå¹¶ä½¿ç”¨ <code>I</code> å‘½ä»¤æ¥èŠ‚çœæ—¶é—´ã€‚å‡è®¾æˆ‘ä»¬åœ¨è¿™é‡Œè¿™æ ·åšï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># åˆå§‹åŒ–ï¼Œæ·»åŠ å¹¶æäº¤ä¸€ä¸ªæ–‡ä»¶ã€‚</span><br><span class="line">&gt; init</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">+ a.txt wug.txt</span><br><span class="line">&gt; add a.txt</span><br><span class="line">&lt;&lt;&lt;</span><br><span class="line">&gt; commit &quot;a is a wug&quot;</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åº”è¯¥å°†æ­¤æ–‡ä»¶ä¸å…¶ä»–æµ‹è¯•ä¸€èµ·æ”¾åœ¨ <code>samples</code> ç›®å½•ä¸­ï¼Œä½†æ˜¯å°†æ–‡ä»¶æ‰©å±•åè®¾ç½®ä¸º <code>.inc</code>ï¼Œ</p><p>æ‰€ä»¥ä¹Ÿè®¸æˆ‘ä»¬å‘½åä¸º <code>samples/commit_setup.inc</code>ã€‚å¦‚æœæˆ‘ä»¬ç»™å®ƒçš„æ–‡ä»¶æ‰©å±•åæ˜¯ <code>.in</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æµ‹è¯•è„šæœ¬å°†é”™è¯¯åœ°å°†å…¶è§†ä¸ºä¸€ä¸ªæµ‹è¯•å¹¶å°è¯•å•ç‹¬è¿è¡Œå®ƒã€‚åœ¨æˆ‘ä»¬çš„å®é™…æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨å‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I commit_setup.inc</span><br></pre></td></tr></table></figure><p>è¿™å°†ä½¿æµ‹è¯•è„šæœ¬è¿è¡Œè¯¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰å‘½ä»¤ï¼Œå¹¶ä¿ç•™å®ƒåˆ›å»ºçš„ä¸´æ—¶ç›®å½•ã€‚è¿™æ ·å¯ä»¥ä½¿ä½ çš„æµ‹è¯•ç›¸å¯¹è¾ƒçŸ­ï¼Œå› æ­¤æ›´å®¹æ˜“é˜…è¯»ã€‚</p><p>æˆ‘ä»¬åŒ…å«äº†ä¸€ä¸ªåä¸º <code>definitions.inc</code> çš„ <code>.inc</code> æ–‡ä»¶ï¼Œå®ƒå°†ä¸ºä½ è®¾ç½®æ–¹ä¾¿çš„æ¨¡å¼ã€‚è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹æ¨¡å¼æ˜¯ä»€ä¹ˆã€‚</p><h4 id="åŒ¹é…æ¨¡å¼è¾“å‡º"><a href="#åŒ¹é…æ¨¡å¼è¾“å‡º" class="headerlink" title="åŒ¹é…æ¨¡å¼è¾“å‡º"></a>åŒ¹é…æ¨¡å¼è¾“å‡º</h4><p>æµ‹è¯•æœ€ä»¤äººå›°æƒ‘çš„éƒ¨åˆ†æ˜¯ <code>log</code> è¾“å‡ºã€‚æœ‰å‡ ä¸ªåŸå› ï¼š</p><ol><li>æäº¤ SHA å°†éšç€ä¿®æ”¹ä»£ç å’Œå“ˆå¸Œæ›´å¤šå†…å®¹è€Œæ›´æ”¹ï¼Œå› æ­¤ä½ å¿…é¡»ä¸æ–­ä¿®æ”¹æµ‹è¯•ä»¥è·Ÿä¸Š SHA çš„å˜åŒ–ã€‚</li><li>ä½ çš„æ—¥æœŸå°†æ¯æ¬¡æ›´æ”¹ï¼Œå› ä¸ºæ—¶é—´åªä¼šå‘å‰æ¨ç§»ã€‚</li><li>å®ƒä¼šä½¿æµ‹è¯•å˜å¾—å¾ˆé•¿ã€‚</li></ol><p>æˆ‘ä»¬å®é™…ä¸Šå¹¶ä¸åœ¨ä¹ç²¾ç¡®çš„æ–‡æœ¬ï¼šåªè¦æœ‰ä¸€äº› SHA å’Œæ­£ç¡®çš„æ—¥æœŸæ ¼å¼çš„ä¸œè¥¿å³å¯ã€‚åŸºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ä½¿ç”¨æ¨¡å¼åŒ¹é…ã€‚</p><p>è¿™ä¸æ˜¯ä½ éœ€è¦ç†è§£çš„æ¦‚å¿µï¼Œä½†åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œæˆ‘ä»¬ä¸ºä¸€äº›æ–‡æœ¬ï¼ˆä¾‹å¦‚æäº¤ SHAï¼‰å®šä¹‰ä¸€ä¸ªæ¨¡å¼ï¼Œç„¶åä»…æ£€æŸ¥è¾“å‡ºæ˜¯å¦å…·æœ‰è¯¥æ¨¡å¼ï¼ˆä¸å…³å¿ƒå®é™…çš„å­—æ¯å’Œæ•°å­—ï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯ä½ å¦‚ä½•ä¸º <code>log</code> è¾“å‡ºåˆ›å»ºé¢„æœŸè¾“å‡ºå¹¶æ£€æŸ¥å®ƒæ˜¯å¦åŒ¹é…æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># é¦–å…ˆä»æˆ‘ä»¬çš„è®¾ç½®ä¸­â€œå¯¼å…¥â€æ¨¡å¼å®šä¹‰</span><br><span class="line">I definitions.inc</span><br><span class="line"># åœ¨è¿™é‡Œæ·»åŠ ä½ çš„è¡Œï¼Œç”¨äºåˆ›å»ºå…·æœ‰æŒ‡å®šæ¶ˆæ¯çš„æäº¤ã€‚æˆ‘ä»¬å°†çœç•¥è¿™ä¸ªä¾‹å­ã€‚</span><br><span class="line">&gt; log</span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">added wug</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">initial commit</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;*</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°çš„éƒ¨åˆ†ä¸æ­£å¸¸çš„ Gitlet å‘½ä»¤ç›¸åŒï¼Œé™¤äº†å®ƒä»¥ <code>&lt;&lt;&lt;*</code> ç»“å°¾ï¼Œè¿™å‘Šè¯‰æµ‹è¯•è„šæœ¬ä½¿ç”¨æ¨¡å¼ã€‚æ¨¡å¼è¢«åŒ…å«åœ¨ <code>$&#123;PATTERN_NAME&#125;</code> ä¸­ã€‚</p><p>æ‰€æœ‰æ¨¡å¼éƒ½å®šä¹‰åœ¨ <code>samples/definitions.inc</code> ä¸­ã€‚ä½ ä¸éœ€è¦ç†è§£å®é™…æ¨¡å¼ï¼Œåªéœ€çŸ¥é“å®ƒåŒ¹é…çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œ<code>HEADER</code> åŒ¹é…æäº¤çš„å¤´éƒ¨ï¼Œåº”è¯¥ç±»ä¼¼äºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">commit fc26c386f550fc17a0d4d359d70bae33c47c54b9</span><br></pre></td></tr></table></figure><p>è¿™åªæ˜¯ä¸€ä¸ªéšæœºçš„æäº¤ SHAã€‚</p><p>å› æ­¤ï¼Œå½“æˆ‘ä»¬ä¸ºæ­¤æµ‹è¯•åˆ›å»ºé¢„æœŸè¾“å‡ºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“æ—¥å¿—ä¸­æœ‰å¤šå°‘æ¡ç›®ä»¥åŠæäº¤æ¶ˆæ¯æ˜¯ä»€ä¹ˆã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ç±»ä¼¼çš„æ–¹æ³•æ¥è¿›è¡Œ <code>status</code> å‘½ä»¤çš„æµ‹è¯•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">I definitions.inc</span><br><span class="line"># åœ¨è¿™é‡Œæ·»åŠ è®¾ç½®çŠ¶æ€çš„å‘½ä»¤ã€‚æˆ‘ä»¬å°†åœ¨è¿™é‡Œçœç•¥å®ƒä»¬ã€‚</span><br><span class="line">&gt; status</span><br><span class="line">=== Branches ===</span><br><span class="line">\*master</span><br><span class="line"></span><br><span class="line">=== Staged Files ===</span><br><span class="line">g.txt</span><br><span class="line"></span><br><span class="line">=== Removed Files ===</span><br><span class="line"></span><br><span class="line">=== Modifications Not Staged For Commit ===</span><br><span class="line"></span><br><span class="line">=== Untracked Files ===</span><br><span class="line">$&#123;ARBLINES&#125;</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;*</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨çš„æ¨¡å¼æ˜¯ <code>ARBLINES</code>ï¼Œå®ƒæ˜¯ä»»æ„è¡Œã€‚å¦‚æœä½ ç¡®å®å…³å¿ƒå“ªäº›æ–‡ä»¶æœªè·Ÿè¸ªï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ï¼Œè€Œä¸ä½¿ç”¨æ¨¡å¼ï¼Œä½†ä¹Ÿè®¸æˆ‘ä»¬æ›´æ„Ÿå…´è¶£çš„æ˜¯çœ‹åˆ° <code>g.txt</code> è¢«å‡†å¤‡æ·»åŠ ã€‚</p><p>æ³¨æ„åˆ†æ”¯ <code>master</code> ä¸Šçš„ <code>\*</code>ã€‚å›æƒ³ä¸€ä¸‹ï¼Œåœ¨ <code>status</code> å‘½ä»¤ä¸­ï¼Œåº”è¯¥ä½¿ç”¨ <code>*</code> æ¥æ ‡è®° HEAD åˆ†æ”¯ã€‚å¦‚æœä½ ä½¿ç”¨æ¨¡å¼ï¼Œä½ éœ€è¦åœ¨é¢„æœŸè¾“å‡ºä¸­å°†è¿™ä¸ª <code>*</code> æ›¿æ¢ä¸º <code>\*</code>ã€‚è¿™æ˜¯åœ¨è¯¾ç¨‹èŒƒå›´ä¹‹å¤–çš„äº‹æƒ…ï¼Œä½†å®ƒè¢«ç§°ä¸ºâ€œè½¬ä¹‰â€æ˜Ÿå·ã€‚å¦‚æœä½ ä¸ä½¿ç”¨æ¨¡å¼ï¼ˆå³ä½ çš„å‘½ä»¤ä»¥ <code>&lt;&lt;&lt;</code> è€Œä¸æ˜¯ <code>&lt;&lt;&lt;*</code> ç»“å°¾ï¼‰ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨æ²¡æœ‰ <code>\</code> çš„ <code>*</code>ã€‚</p><p>å¯¹äºè¿™äº›æ¨¡å¼ï¼Œä½ å¯ä»¥è¿›è¡Œæœ€åä¸€ä»¶äº‹æ˜¯â€œä¿å­˜â€åŒ¹é…çš„éƒ¨åˆ†ã€‚<strong>è­¦å‘Š</strong>ï¼šè¿™ä¼¼ä¹åƒæ˜¯é­”æ³•ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸å…³å¿ƒä½ æ˜¯å¦ç†è§£è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼ŒåªçŸ¥é“å®ƒå¯ä»¥å¹¶ä¸”å¯¹ä½ å¯ç”¨ã€‚ä½ å¯ä»¥ä»æˆ‘ä»¬æä¾›çš„æµ‹è¯•ä¸­å¤åˆ¶å¹¶ç²˜è´´ç›¸å…³éƒ¨åˆ†ï¼Œå› æ­¤ä½ ä¸éœ€è¦å¤ªæ‹…å¿ƒä»å¤´å¼€å§‹åˆ¶ä½œè¿™äº›ã€‚è¯´å®Œäº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™æ˜¯ä»€ä¹ˆã€‚</p><p>å¦‚æœä½ æ­£åœ¨æ‰§è¡Œ <code>checkout</code> å‘½ä»¤ï¼Œä½ éœ€è¦ä½¿ç”¨ SHA æ ‡è¯†ç¬¦æ¥æŒ‡å®šè¦æ£€å‡ºåˆ°&#x2F;ä»å“ªä¸ªæäº¤ã€‚ä½†æ˜¯è®°ä½ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ¨¡å¼ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºæµ‹è¯•æ—¶æˆ‘ä»¬å®é™…ä¸Šä¸çŸ¥é“ SHA æ ‡è¯†ç¬¦ã€‚è¿™æ˜¯æœ‰é—®é¢˜çš„ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ <code>test04-prev-checkout.in</code> æ¥çœ‹çœ‹ä½ å¦‚ä½•â€œæ•è·â€æˆ–â€œä¿å­˜â€SHAï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">I definitions.inc</span><br><span class="line"># æ¯ä¸ª $&#123;COMMIT_HEAD&#125; éƒ½æ•è·å…¶æäº¤ UIDã€‚</span><br><span class="line"># è¿™é‡Œæ²¡æœ‰æ˜¾ç¤ºï¼Œä½†æ˜¯æµ‹è¯•é€šè¿‡åˆ¶ä½œäº†è®¸å¤šå…·æœ‰ç‰¹å®šæ¶ˆæ¯çš„æäº¤è®°å½•æ¥è®¾ç½®æ—¥å¿—ã€‚</span><br><span class="line">&gt; log</span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">version 2 of wug.txt</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">version 1 of wug.txt</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">initial commit</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;*</span><br></pre></td></tr></table></figure><p>è¿™å°†è®¾ç½® UIDï¼ˆSHAï¼‰åœ¨ <code>log</code> å‘½ä»¤åè¢«æ•è·ã€‚å› æ­¤ï¼Œåœ¨è¿è¡Œæ­¤å‘½ä»¤åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>D</code> å‘½ä»¤å°† UID å®šä¹‰ä¸ºå˜é‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ç¬¬äºŒä¸ªç‰ˆæœ¬çš„ UID</span><br><span class="line">D UID2 &quot;$&#123;1&#125;&quot;</span><br><span class="line"># ç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ UID</span><br><span class="line">D UID1 &quot;$&#123;2&#125;&quot;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ç¼–å·æ˜¯åå‘çš„ï¼šç¼–å·ä» 1 å¼€å§‹ï¼Œå¹¶ä»æ—¥å¿—çš„é¡¶éƒ¨å¼€å§‹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“å‰ç‰ˆæœ¬ï¼ˆå³ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼‰è¢«å®šä¹‰ä¸º <code>&quot;$&#123;1&#125;&quot;</code>ã€‚æˆ‘ä»¬ä¸å…³å¿ƒåˆå§‹æäº¤ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä¼šè´¹å¿ƒæ•è·</p><p>å®ƒçš„ SHAã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¿å­˜äº†ä¸¤ä¸ª UIDï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ç¬¬ä¸€ä¸ªç‰ˆæœ¬æœ‰å†…å®¹ï¼Œç¬¬äºŒä¸ªç‰ˆæœ¬çš„å†…å®¹è¢«æˆ‘ä»¬æ›´æ”¹äº†ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¤æ‚çš„æ“ä½œï¼Œä½†è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚æˆ‘ä»¬é€šè¿‡åœ¨ <code>$&#123;&#125;</code> ä¸­å¼•ç”¨ UID æ¥ä½¿ç”¨ UIDã€‚æˆ‘ä»¬å¯ä»¥å°† UID ç›´æ¥ä¼ é€’ç»™ Gitlet å‘½ä»¤ï¼Œè€Œæ— éœ€çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; checkout $&#123;UID1&#125; -- wug.txt</span><br><span class="line">&lt;&lt;&lt;</span><br></pre></td></tr></table></figure><p>è¿™å°†æ£€å‡ºåˆ°ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»æ•è·äº†å®ƒçš„ UIDã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥ç¡®å®šè¿™ä¸€åˆ‡æ˜¯å¦æ­£ç¡®ã€‚</p><p>è¿™å°±æ˜¯æ‰€æœ‰å…³äºæµ‹è¯•çš„å…¨éƒ¨ã€‚è¯·ç¡®ä¿æ¯ä¸ªæµ‹è¯•éƒ½æ˜¯è‡ªåŒ…å«çš„ï¼Œå¹¶ä¸”åº”è¯¥åœ¨æ²¡æœ‰ä»»ä½•ä¾èµ–å…³ç³»çš„æƒ…å†µä¸‹è¿è¡Œã€‚æ¯ä¸ªæµ‹è¯•åº”è¯¥è®¾ç½®å®ƒè‡ªå·±çš„ä»“åº“ï¼Œå¹¶å‡è®¾æ²¡æœ‰ä¹‹å‰çš„æµ‹è¯•ã€‚æ¯«æ— ç–‘é—®ï¼Œæµ‹è¯•è„šæœ¬å’Œæµ‹è¯•æ–‡ä»¶ä¸­çš„æ³¨é‡Šå°†æ˜¯ä½ çš„å¥½æœ‹å‹ï¼Œæ‰€ä»¥ä¸è¦çŠ¹è±«å»æ·»åŠ å®ƒä»¬ã€‚</p><h3 id="ä¸€äº›é¢å¤–çš„æŠ€å·§"><a href="#ä¸€äº›é¢å¤–çš„æŠ€å·§" class="headerlink" title="ä¸€äº›é¢å¤–çš„æŠ€å·§"></a>ä¸€äº›é¢å¤–çš„æŠ€å·§</h3><p>ä½ ä¼šå‘ç°åœ¨æµ‹è¯•ä¸­æœ‰äº›æ¨¡å¼çš„ä½¿ç”¨é¢‘ç‡æ›´é«˜ã€‚ä¾‹å¦‚ <code>UID</code>ï¼Œå› ä¸ºå®ƒç”¨äºæ£€å‡ºå‘½ä»¤ã€‚å¦ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼æ˜¯æ—¥æœŸå’Œæ—¶é—´æˆ³ã€‚è¿™äº›åœ¨ <code>log</code> è¾“å‡ºä¸­å‡ºç°ï¼Œä»¥åŠå½“ä½ åˆ›å»ºæäº¤æ—¶ï¼Œå®ƒä»¬å°†è¢«åŒ…å«åœ¨è¾“å‡ºä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„ç†æ—¥æœŸçš„ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D DATE &quot;Wed Apr 10 12:00:00 2024 -0700&quot;</span><br></pre></td></tr></table></figure><p>å®ƒå°†æ—¥æœŸè®¾ç½®ä¸ºæŒ‡å®šçš„æ—¥æœŸã€‚è¿™å°†å…è®¸ä½ åœ¨æµ‹è¯•ä¸­åˆ›å»ºæäº¤ï¼Œå¹¶æ£€æŸ¥å®ƒä»¬çš„æ—¥æœŸæ˜¯å¦æ­£ç¡®ã€‚åŒæ ·ï¼Œå¦‚æœä½ æƒ³è¦æ£€æŸ¥ SHA ä»¥ç¡®ä¿æ¯ä¸ªæäº¤å…·æœ‰å”¯ä¸€çš„ SHAï¼Œä½ å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥åŒ¹é…æäº¤ SHAã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">D COMMIT_HEAD &quot;[0-9a-f]&#123;40&#125;&quot;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå°†å®ƒæ”¾åœ¨ä½ çš„ <code>log</code> è¾“å‡ºä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">added wug</span><br><span class="line"></span><br><span class="line">===</span><br><span class="line">$&#123;COMMIT_HEAD&#125;</span><br><span class="line">initial commit</span><br><span class="line"></span><br><span class="line">&lt;&lt;&lt;*</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæˆ‘è¦å¼ºè°ƒæµ‹è¯•æ–‡ä»¶çš„å°é—­æ€§å’Œè‡ªåŒ…å«æ€§ã€‚ä¸€ä¸ªæµ‹è¯•åº”è¯¥æ˜¯ç‹¬ç«‹äºå…¶ä»–æµ‹è¯•çš„ï¼Œè¿™æ„å‘³ç€ä½ çš„æµ‹è¯•åº”è¯¥æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œä¸åº”è¯¥ä¾èµ–äºå…¶ä»–æµ‹è¯•çš„ç»“æœã€‚è¿™æ˜¯å› ä¸ºåœ¨è¿è¡Œæµ‹è¯•å¥—ä»¶æ—¶ï¼Œæµ‹è¯•çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿ä½ çš„æµ‹è¯•å¯ä»¥å•ç‹¬è¿è¡Œï¼Œè€Œä¸å¿…æ‹…å¿ƒå®ƒä»¬æ‰€ä¾èµ–çš„å…¶ä»–æµ‹è¯•ã€‚</p><h2 id="è¿œç¨‹æ“ä½œï¼ˆé¢å¤–å­¦åˆ†ï¼‰"><a href="#è¿œç¨‹æ“ä½œï¼ˆé¢å¤–å­¦åˆ†ï¼‰" class="headerlink" title="è¿œç¨‹æ“ä½œï¼ˆé¢å¤–å­¦åˆ†ï¼‰"></a>è¿œç¨‹æ“ä½œï¼ˆé¢å¤–å­¦åˆ†ï¼‰</h2><p>è¿™ä¸ªé¡¹ç›®çš„ä¸»è¦ç›®æ ‡æ˜¯æ¨¡ä»¿ git çš„æœ¬åœ°åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å…è®¸ä½ å¤‡ä»½è‡ªå·±çš„æ–‡ä»¶å¹¶ç»´æŠ¤å®ƒä»¬çš„å¤šä¸ªç‰ˆæœ¬ã€‚ç„¶è€Œï¼Œgit çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„<em>è¿œç¨‹</em>åŠŸèƒ½ï¼Œå…è®¸ä¸å…¶ä»–äººé€šè¿‡äº’è”ç½‘è¿›è¡Œåä½œã€‚å…³é”®åœ¨äºä½ å’Œä½ çš„æœ‹å‹éƒ½å¯ä»¥åœ¨ä¸€ä¸ªä»£ç åº“ä¸Šè¿›è¡Œåä½œã€‚å¦‚æœä½ å¯¹æ–‡ä»¶è¿›è¡Œäº†æ›´æ”¹ï¼Œä½ å¯ä»¥å°†å®ƒä»¬å‘é€ç»™ä½ çš„æœ‹å‹ï¼Œåä¹‹äº¦ç„¶ã€‚ä½ ä»¬ä¸¤ä¸ªéƒ½å¯ä»¥è®¿é—®æ‰€æœ‰ä½ ä»¬æ‰€åšæ›´æ”¹çš„å…±äº«å†å²è®°å½•ã€‚</p><p>ä¸ºäº†è·å¾—é¢å¤–å­¦åˆ†ï¼Œå®ç°ä¸€äº›åŸºæœ¬çš„è¿œç¨‹å‘½ä»¤ï¼šå³ <code>add-remote</code>ã€<code>rm-remote</code>ã€<code>push</code>ã€<code>fetch</code> å’Œ <code>pull</code>ã€‚å®Œæˆå®ƒä»¬å°†è·å¾— 64 åˆ†é¢å¤–å­¦åˆ†ã€‚åœ¨å®Œæˆé¡¹ç›®çš„å…¶ä½™éƒ¨åˆ†ä¹‹å‰ï¼Œè¯·ä¸è¦å°è¯•æˆ–è®¡åˆ’é¢å¤–å­¦åˆ†ã€‚</p><p>æ ¹æ®ä½ è®¾è®¡é¡¹ç›®çš„çµæ´»æ€§ï¼Œ64 åˆ†é¢å¤–å­¦åˆ†å¯èƒ½ä¸å€¼å¾—å»åšè¿™ä¸€éƒ¨åˆ†æ‰€éœ€çš„åŠªåŠ›ã€‚æˆ‘ä»¬å¹¶ä¸æœŸæœ›æ¯ä¸ªäººéƒ½å»åšã€‚æˆ‘ä»¬çš„é‡ç‚¹å°†æ˜¯å¸®åŠ©å­¦ç”Ÿå®Œæˆä¸»è¦é¡¹ç›®ï¼›å¦‚æœä½ åœ¨åšé¢å¤–å­¦åˆ†ï¼Œæˆ‘ä»¬å¸Œæœ›ä½ èƒ½å¤Ÿæ¯”å¤§å¤šæ•°å­¦ç”Ÿæ›´ç‹¬ç«‹ä¸€äº›ã€‚</p><h2 id="å‘½ä»¤-1"><a href="#å‘½ä»¤-1" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h2><p>å…³äºè¿œç¨‹å‘½ä»¤æœ‰å‡ ç‚¹è¯´æ˜ï¼š</p><ul><li>ä¸ä¼šå¯¹æ‰§è¡Œæ—¶é—´è¿›è¡Œè¯„åˆ†ã€‚ä¸ºäº†ä½ è‡ªå·±çš„æé«˜ï¼Œè¯·ä¸è¦åšä»»ä½•è’è°¬çš„äº‹æƒ…ã€‚</li><li>æ‰€æœ‰å‘½ä»¤éƒ½æ˜¯ä»å®ƒä»¬çš„ git ç­‰æ•ˆç‰ˆæœ¬å¤§å¹…ç®€åŒ–çš„ï¼Œå› æ­¤é€šå¸¸ä¸æ³¨æ˜ä¸ git çš„å…·ä½“åŒºåˆ«ã€‚ä½†è¦æ³¨æ„å®ƒä»¬çš„å­˜åœ¨ã€‚</li></ul><p>ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›å‘½ä»¤ï¼š</p><h3 id="add-remote"><a href="#add-remote" class="headerlink" title="add-remote"></a>add-remote</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main add-remote [è¿œç¨‹åç§°] [è¿œç¨‹ç›®å½•åç§°]/.gitlet</code></li><li><strong>æè¿°</strong>ï¼šå°†ç»™å®šçš„ç™»å½•ä¿¡æ¯ä¿å­˜åœ¨ç»™å®šçš„è¿œç¨‹åç§°ä¸‹ã€‚å°è¯•ä»ç»™å®šçš„è¿œç¨‹åç§°æ¨é€æˆ–æ‹‰å–å°†å°è¯•ä½¿ç”¨æ­¤<code>.gitlet</code>ç›®å½•ã€‚é€šè¿‡ç¼–å†™ï¼Œä¾‹å¦‚ï¼Œ<code>java gitlet.Main add-remote other ../testing/otherdir/.gitlet</code>ï¼Œä½ å¯ä»¥æä¾›ä»æ‰€æœ‰ä½ç½®ï¼ˆåœ¨ä½ çš„å®¶ç”¨è®¡ç®—æœºä¸Šæˆ–è¯„åˆ†ç¨‹åºçš„è½¯ä»¶ä¸­ï¼‰å·¥ä½œçš„è¿œç¨‹æµ‹è¯•ã€‚åœ¨è¿™äº›å‘½ä»¤ä¸­å§‹ç»ˆä½¿ç”¨æ­£æ–œæ ã€‚è®©ä½ çš„ç¨‹åºå°†æ‰€æœ‰æ­£æ–œæ è½¬æ¢ä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼ˆUnix ä¸Šçš„æ­£æ–œæ å’Œ Windows ä¸Šçš„åæ–œæ ï¼‰ã€‚Java å‹å¥½åœ°å®šä¹‰äº†ç±»å˜é‡ <code>java.io.File.separator</code> ä½œä¸ºæ­¤å­—ç¬¦ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœå·²ç»å­˜åœ¨å…·æœ‰ç»™å®šåç§°çš„è¿œç¨‹ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ï¼š<code>å·²ç»å­˜åœ¨è¯¥åç§°çš„è¿œç¨‹ã€‚</code>ä½ ä¸å¿…æ£€æŸ¥ç”¨æˆ·åå’ŒæœåŠ¡å™¨ä¿¡æ¯æ˜¯å¦åˆæ³•ã€‚</li><li><strong>å±é™©å—ï¼Ÿ</strong>ï¼šä¸ã€‚</li></ul><h3 id="rm-remote"><a href="#rm-remote" class="headerlink" title="rm-remote"></a>rm-remote</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main rm-remote [è¿œç¨‹åç§°]</code></li><li><strong>æè¿°</strong>ï¼šåˆ é™¤ä¸ç»™å®šè¿œç¨‹åç§°å…³è”çš„ä¿¡æ¯ã€‚è¿™é‡Œçš„æƒ³æ³•æ˜¯ï¼Œå¦‚æœä½ æ›¾ç»æƒ³è¦æ›´æ”¹ä½ æ·»åŠ çš„è¿œç¨‹ï¼Œä½ å¿…é¡»é¦–å…ˆåˆ é™¤å®ƒï¼Œç„¶åé‡æ–°æ·»åŠ å®ƒã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœå…·æœ‰ç»™å®šåç§°çš„è¿œç¨‹ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ï¼š<code>ä¸å­˜åœ¨å…·æœ‰è¯¥åç§°çš„è¿œç¨‹ã€‚</code></li><li><strong>å±é™©å—ï¼Ÿ</strong>ï¼šä¸ã€‚</li></ul><h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><ul><li><p><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main push [è¿œç¨‹åç§°] [è¿œç¨‹åˆ†æ”¯åç§°]</code></p></li><li><p><strong>æè¿°</strong>ï¼šå°è¯•å°†å½“å‰åˆ†æ”¯çš„æäº¤è¿½åŠ åˆ°ç»™å®šè¿œç¨‹çš„ç»™å®šåˆ†æ”¯çš„æœ«å°¾ã€‚ç»†èŠ‚ï¼š</p><p>æ­¤å‘½ä»¤ä»…åœ¨è¿œç¨‹åˆ†æ”¯çš„å¤´éƒ¨åœ¨å½“å‰æœ¬åœ°å¤´éƒ¨çš„å†å²è®°å½•ä¸­æ—¶æ‰èµ·ä½œç”¨ï¼Œè¿™æ„å‘³ç€æœ¬åœ°åˆ†æ”¯åŒ…å«ä¸€äº›åœ¨è¿œç¨‹åˆ†æ”¯æœªæ¥çš„æäº¤ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æœªæ¥çš„æäº¤è¿½åŠ åˆ°è¿œç¨‹åˆ†æ”¯ã€‚ç„¶åï¼Œè¿œç¨‹åº”è¯¥é‡ç½®åˆ°é™„åŠ çš„æäº¤çš„å‰ç«¯ï¼ˆå› æ­¤å…¶å¤´éƒ¨å°†ä¸æœ¬åœ°å¤´éƒ¨ç›¸åŒï¼‰ã€‚è¿™ç§°ä¸ºå¿«è¿›ã€‚</p><p>å¦‚æœè¿œç¨‹æœºå™¨ä¸Šçš„ Gitlet ç³»ç»Ÿå­˜åœ¨ä½†æ²¡æœ‰è¾“å…¥åˆ†æ”¯ï¼Œåˆ™ç®€å•åœ°å°†è¯¥åˆ†æ”¯æ·»åŠ åˆ°è¿œç¨‹ Gitletã€‚</p></li><li><p><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœè¿œç¨‹åˆ†æ”¯çš„å¤´éƒ¨ä¸åœ¨å½“å‰æœ¬åœ°å¤´éƒ¨çš„å†å²è®°å½•ä¸­ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>è¯·åœ¨æ¨é€ä¹‹å‰æ‹‰å–è¿œç¨‹æ›´æ”¹ã€‚</code>å¦‚æœè¿œç¨‹<code>.gitlet</code>ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å° <code>æœªæ‰¾åˆ°è¿œç¨‹ç›®å½•ã€‚</code></p></li><li><p><strong>å±é™©å—ï¼Ÿ</strong>ï¼šä¸ã€‚</p></li></ul><h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main fetch [è¿œç¨‹åç§°] [è¿œç¨‹åˆ†æ”¯åç§°]</code></li><li><strong>æè¿°</strong>ï¼šå°†è¿œç¨‹ Gitlet ä»“åº“ä¸­çš„æäº¤ä¸‹è½½åˆ°æœ¬åœ° Gitlet ä»“åº“ä¸­ã€‚åŸºæœ¬ä¸Šï¼Œè¿™å°†ä»è¿œç¨‹ä»“åº“ä¸­çš„ç»™å®šåˆ†æ”¯å¤åˆ¶æ‰€æœ‰æäº¤å’Œ blobï¼ˆåœ¨å½“å‰ä»“åº“ä¸­å°šä¸å­˜åœ¨çš„ï¼‰åˆ°æœ¬åœ°<code>.gitlet</code>ä¸­çš„åä¸º<code>[è¿œç¨‹åç§°]/[è¿œç¨‹åˆ†æ”¯åç§°]</code>çš„åˆ†æ”¯ä¸­ï¼ˆä¸çœŸå®çš„ Git ä¸€æ ·ï¼‰ï¼Œå°†<code>[è¿œç¨‹åç§°]/[è¿œç¨‹åˆ†æ”¯åç§°]</code>æŒ‡å‘å¤´æäº¤ï¼ˆå› æ­¤å°†åˆ†æ”¯çš„å†…å®¹ä»è¿œç¨‹ä»“åº“å¤åˆ¶åˆ°å½“å‰ä»“åº“ï¼‰ã€‚å¦‚æœæ­¤åˆ†æ”¯ä¹‹å‰ä¸å­˜åœ¨ï¼Œåˆ™åœ¨æœ¬åœ°ä»“åº“ä¸­åˆ›å»ºæ­¤åˆ†æ”¯ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼šå¦‚æœè¿œç¨‹ Gitlet ä»“åº“æ²¡æœ‰ç»™å®šçš„åˆ†æ”¯åç§°ï¼Œåˆ™æ‰“å°é”™è¯¯æ¶ˆæ¯ <code>è¯¥è¿œç¨‹æ²¡æœ‰è¯¥åˆ†æ”¯ã€‚</code>å¦‚æœè¿œç¨‹<code>.gitlet</code>ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™æ‰“å° <code>æœªæ‰¾åˆ°è¿œç¨‹ç›®å½•ã€‚</code></li><li>**å±é™©</li></ul><p>å—ï¼Ÿ**ï¼šä¸ã€‚</p><h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><ul><li><strong>ç”¨æ³•</strong>ï¼š<code>java gitlet.Main pull [è¿œç¨‹åç§°] [è¿œç¨‹åˆ†æ”¯åç§°]</code></li><li><strong>æè¿°</strong>ï¼šåƒ<code>fetch</code>å‘½ä»¤ä¸€æ ·è·å–åˆ†æ”¯<code>[è¿œç¨‹åç§°]/[è¿œç¨‹åˆ†æ”¯åç§°]</code>ï¼Œç„¶åå°†è¯¥è·å–åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚</li><li><strong>å¤±è´¥æƒ…å†µ</strong>ï¼š<code>fetch</code>å’Œ<code>merge</code>å‘½ä»¤çš„å¤±è´¥æƒ…å†µã€‚</li><li><strong>å±é™©å—ï¼Ÿ</strong>ï¼šæ˜¯çš„ï¼</li></ul><h2 id="I-é¿å…çš„äº‹æƒ…"><a href="#I-é¿å…çš„äº‹æƒ…" class="headerlink" title="I. é¿å…çš„äº‹æƒ…"></a>I. é¿å…çš„äº‹æƒ…</h2><p>æ ¹æ®ç»éªŒï¼Œæœ‰ä¸€äº›åšæ³•ä¼šå¯¼è‡´ç¨‹åºä¸å·¥ä½œï¼Œéš¾ä»¥æ‰¾åˆ°çš„é”™è¯¯ï¼Œæœ‰æ—¶ä¸å¯é‡å¤ï¼ˆâ€œHeisenbugsâ€ï¼‰ã€‚</p><ol><li>ç”±äºä½ å¯èƒ½ä¼šåœ¨æ–‡ä»¶ä¸­ä¿å­˜å„ç§ä¿¡æ¯ï¼ˆä¾‹å¦‚æäº¤ï¼‰ï¼Œä½ å¯èƒ½ä¼šå€¾å‘äºä½¿ç”¨æ˜¾ç„¶æ–¹ä¾¿çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆä¾‹å¦‚åˆ—å‡ºç›®å½•ï¼‰æ¥å¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚è¦å°å¿ƒã€‚ä¾‹å¦‚ï¼Œ<code>File.list</code>å’Œ<code>File.listFiles</code>ç­‰æ–¹æ³•ä»¥æœªå®šä¹‰çš„é¡ºåºç”Ÿæˆæ–‡ä»¶åã€‚å¦‚æœä½ ä½¿ç”¨å®ƒä»¬æ¥å®ç°<code>log</code>å‘½ä»¤ï¼Œç‰¹åˆ«æ˜¯ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°éšæœºç»“æœã€‚</li><li>ç‰¹åˆ«æ˜¯ Windows ç”¨æˆ·åº”è¯¥æ³¨æ„ï¼Œæ–‡ä»¶åˆ†éš”ç¬¦å­—ç¬¦æ˜¯ Unixï¼ˆæˆ– MacOSï¼‰ä¸Šçš„<code>/</code>ï¼Œåœ¨ Windows ä¸Šæ˜¯â€˜\â€™ã€‚å› æ­¤ï¼Œå¦‚æœä½ é€šè¿‡å°†ä¸€äº›ç›®å½•åç§°å’Œæ–‡ä»¶åä¸æ˜¾å¼çš„<code>/</code>æˆ–<code>\</code>è¿æ¥èµ·æ¥æ¥å½¢æˆæ–‡ä»¶åï¼Œåœ¨ä½ çš„ç¨‹åºä¸­ï¼Œä½ å¯ä»¥ç¡®ä¿å®ƒä¸ä¼šåœ¨ä¸€ä¸ªç³»ç»Ÿæˆ–å¦ä¸€ä¸ªç³»ç»Ÿä¸Šå·¥ä½œã€‚Java æä¾›äº†ä¸€ä¸ªç³»ç»Ÿç›¸å…³çš„æ–‡ä»¶åˆ†éš”ç¬¦å­—ç¬¦ï¼ˆ<code>System.getProperty(&quot;file.separator&quot;)</code>ï¼‰ï¼Œæˆ–è€…ä½ å¯ä»¥ä½¿ç”¨å¤šå‚æ•°æ„é€ å‡½æ•°æ¥åˆ›å»º<code>File</code>ã€‚</li><li>åœ¨åºåˆ—åŒ–æ—¶è¦å°å¿ƒä½¿ç”¨<code>HashMap</code>ï¼<code>HashMap</code>å†…éƒ¨çš„äº‹ç‰©é¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨<code>TreeMap</code>ï¼Œå®ƒå°†å§‹ç»ˆå…·æœ‰ç›¸åŒçš„é¡ºåºã€‚æ›´å¤šè¯¦æƒ…<a href="https://stackoverflow.com/questions/5993752/hashmap-serialization-and-deserialization-changes">åœ¨è¿™é‡Œ</a></li></ol><h2 id="J-è‡´è°¢"><a href="#J-è‡´è°¢" class="headerlink" title="J. è‡´è°¢"></a>J. è‡´è°¢</h2><p>æ„Ÿè°¢ Alicia Luengoã€Josh Hugã€Sarah Kimã€Austin Chenã€Andrew Huangã€Yan Zhaoã€Matthew Chowï¼Œç‰¹åˆ«æ˜¯ Alan Yaoã€Daniel Nguyen å’Œ Armani Ferranteï¼Œæä¾›äº†æ­¤é¡¹ç›®çš„åé¦ˆã€‚æ„Ÿè°¢ git çš„å¼ºå¤§ã€‚</p><p>æ­¤é¡¹ç›®åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ° [è¿™ç¯‡][Nilsson Article] ç”± Philip Nilsson æ’°å†™çš„ä¼˜ç§€æ–‡ç« çš„å¯å‘ã€‚</p><p>æ­¤é¡¹ç›®ç”± Joseph Moghadam åˆ›å»ºã€‚Paul Hilfinger åˆ†åˆ«åœ¨ 2015 å¹´ç§‹å­£ã€2017 å¹´ç§‹å­£å’Œ 2019 å¹´ç§‹å­£è¿›è¡Œäº†ä¿®æ”¹ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç¬”è®°(å…­)-Lab8-å“ˆå¸Œè¡¨</title>
      <link href="/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab8-%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
      <url>/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab8-%E5%93%88%E5%B8%8C%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<p>ä»£ç ä»‹ç»åœ¨<a href="https://sp21.datastructur.es/materials/lab/lab8/lab8">Lab8</a></p><p>èµ·å§‹ä»£ç åœ¨<a href="https://github.com/Berkeley-CS61B/skeleton-sp21/tree/master/lab8">skeleton-sp21&#x2F;lab8 at master Â· Berkeley-CS61B&#x2F;skeleton-sp21 (github.com)</a>ä»“åº“ä¸­</p><h1 id="æ”¶è·ç‚¹"><a href="#æ”¶è·ç‚¹" class="headerlink" title="æ”¶è·ç‚¹"></a>æ”¶è·ç‚¹</h1><p>æœ¬æ¬¡Labä¸»è¦ä»‹ç»äº†å·¥å‚åŒ–ä»£ç çš„æ€æƒ³</p><p>å¯åŠ¨æ–‡ä»¶çš„ç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Map61B.java</span><br><span class="line">â””â”€â”€ MyHashMap.java</span><br><span class="line">    â”œâ”€â”€ MyHashMapALBuckets.java</span><br><span class="line">    â”œâ”€â”€ MyHashMapHSBuckets.java</span><br><span class="line">    â”œâ”€â”€ MyHashMapLLBuckets.java</span><br><span class="line">    â”œâ”€â”€ MyHashMapPQBuckets.java</span><br><span class="line">    â””â”€â”€ MyHashMapTSBuckets.java</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªå“ˆå¸Œè¡¨ä¸­ï¼Œæœ‰ä¸€ä¸ªå·¥å‚æ–¹æ³• <code>createBucket()</code> å’Œ <code>createTable(int tableSize)</code>ã€‚</p><ul><li><code>createBucket()</code> æ–¹æ³•ç”¨äºåˆ›å»ºä¸€ä¸ªå­˜å‚¨ <code>Node</code> çš„æ¡¶ã€‚åœ¨ä¸‹é¢çš„å®ç°ä¸­ï¼Œä½¿ç”¨ <code>LinkedList</code> ä½œä¸ºæ¡¶çš„æ•°æ®ç»“æ„ï¼Œå› æ­¤è¿™ä¸ªå·¥å‚æ–¹æ³•è¿”å›äº†ä¸€ä¸ª <code>LinkedList&lt;Node&gt;</code>ã€‚ä½ å¯ä»¥é€šè¿‡é‡å†™è¿™ä¸ªæ–¹æ³•æ¥é€‰æ‹©å…¶ä»–æ•°æ®ç»“æ„ä½œä¸ºæ¡¶çš„å®ç°ã€‚</li><li><code>createTable(int tableSize)</code> æ–¹æ³•ç”¨äºåˆ›å»ºåº•å±‚æ•°ç»„ï¼Œå³å“ˆå¸Œè¡¨çš„ä¸»è¦å­˜å‚¨ç»“æ„ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º <code>tableSize</code> çš„æ•°ç»„ï¼Œç„¶åéå†æ•°ç»„ï¼Œä¸ºæ¯ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªæ¡¶ï¼Œè°ƒç”¨ <code>createBucket()</code> æ–¹æ³•åˆ›å»ºæ¡¶å¯¹è±¡ã€‚æœ€åè¿”å›åˆ›å»ºå¥½çš„æ•°ç»„ï¼Œä½œä¸ºå“ˆå¸Œè¡¨çš„åº•å±‚å­˜å‚¨ç»“æ„ã€‚è¿™ä¸ªæ–¹æ³•å…è®¸ä½ çµæ´»åœ°é€‰æ‹©æ•°ç»„çš„é•¿åº¦ï¼Œä»¥åŠæ¯ä¸ªæ¡¶çš„å…·ä½“å®ç°æ–¹å¼ã€‚</li></ul><p>åœ¨ <code>MyHashMap</code> çš„æ„é€ å‡½æ•°ä¸­ï¼Œé€šè¿‡è°ƒç”¨ <code>createTable(capacity)</code> æ–¹æ³•æ¥åˆå§‹åŒ– <code>buckets</code>ï¼Œè¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å®šå®¹é‡çš„å“ˆå¸Œè¡¨ã€‚åœ¨å“ˆå¸Œè¡¨çš„ <code>resize(int newCapacity)</code> æ–¹æ³•ä¸­ï¼ŒåŒæ ·ä¼šä½¿ç”¨ <code>createTable(newCapacity)</code> æ¥åˆ›å»ºæ–°çš„æ›´å¤§å®¹é‡çš„å“ˆå¸Œè¡¨ï¼Œå¹¶å°†åŸæœ‰çš„é”®å€¼å¯¹é‡æ–°å“ˆå¸Œåˆ°æ–°çš„æ•°ç»„ä¸­ã€‚</p><p>è¿™ç§å·¥å‚æ–¹æ³•çš„è®¾è®¡å…è®¸äº†çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä¿®æ”¹å’Œæ›¿æ¢å“ˆå¸Œè¡¨çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚å’Œæ€§èƒ½è¦æ±‚ã€‚</p><h1 id="å“ˆå¸Œè¡¨API"><a href="#å“ˆå¸Œè¡¨API" class="headerlink" title="å“ˆå¸Œè¡¨API"></a>å“ˆå¸Œè¡¨API</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hashmap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your implementation hashmap.MyHashMap should implement this interface. To do so,</span></span><br><span class="line"><span class="comment"> * append &quot;implements hashmap.Map61B&lt;K, V&gt;&quot; to the end of your &quot;public class...&quot;</span></span><br><span class="line"><span class="comment"> * declaration, though you can use other formal type parameters if you&#x27;d like.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Map61B</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">Iterable</span>&lt;K&gt; &#123;</span><br><span class="line">    <span class="comment">/** Removes all of the mappings from this map. */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns true if this map contains a mapping for the specified key. */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value to which the specified key is mapped, or null if this</span></span><br><span class="line"><span class="comment">     * map contains no mapping for the key.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    V <span class="title function_">get</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of key-value mappings in this map. */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Associates the specified value with the specified key in this map.</span></span><br><span class="line"><span class="comment">     * If the map previously contained a mapping for the key,</span></span><br><span class="line"><span class="comment">     * the old value is replaced.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns a Set view of the keys contained in this map. */</span></span><br><span class="line">    Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Removes the mapping for the specified key from this map if present.</span></span><br><span class="line"><span class="comment">     * Not required for Lab 8. If you don&#x27;t implement this, throw an</span></span><br><span class="line"><span class="comment">     * UnsupportedOperationException.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    V <span class="title function_">remove</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Removes the entry for the specified key only if it is currently mapped to</span></span><br><span class="line"><span class="comment">     * the specified value. Not required for Lab 8. If you don&#x27;t implement this,</span></span><br><span class="line"><span class="comment">     * throw an UnsupportedOperationException.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    V <span class="title function_">remove</span><span class="params">(K key, V value)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hashmap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  A hash table-backed Map implementation. Provides amortized constant time</span></span><br><span class="line"><span class="comment"> *  access to elements via get(), remove(), and put() in the best case.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  Assumes null keys will never be inserted, and does not resize down upon remove().</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@author</span> YOUR NAME HERE</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyHashMap</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map61B</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        Node(K k, V v) &#123;</span><br><span class="line">            key = k;</span><br><span class="line">            value = v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Instance Variables */</span></span><br><span class="line">    <span class="keyword">private</span> Collection&lt;Node&gt;[] buckets;</span><br><span class="line">    <span class="comment">// You should probably define some more!</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> loadFactor;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> capacity;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Constructors */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyHashMap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">16</span>, <span class="number">0.75</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyHashMap</span><span class="params">(<span class="type">int</span> initialSize)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(initialSize, <span class="number">0.75</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MyHashMap constructor that creates a backing array of initialSize.</span></span><br><span class="line"><span class="comment">     * The load factor (# items / # buckets) should always be &lt;= loadFactor</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> initialSize initial size of backing array</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> maxLoad maximum load factor</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyHashMap</span><span class="params">(<span class="type">int</span> initialSize, <span class="type">double</span> maxLoad)</span> &#123;</span><br><span class="line">        capacity = initialSize;</span><br><span class="line">        buckets = createTable(capacity);</span><br><span class="line">        loadFactor = maxLoad;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a new node to be placed in a hash table bucket</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">createNode</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a data structure to be a hash table bucket</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * The only requirements of a hash table bucket are that we can:</span></span><br><span class="line"><span class="comment">     *  1. Insert items (`add` method)</span></span><br><span class="line"><span class="comment">     *  2. Remove items (`remove` method)</span></span><br><span class="line"><span class="comment">     *  3. Iterate through items (`iterator` method)</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Each of these methods is supported by java.util.Collection,</span></span><br><span class="line"><span class="comment">     * Most data structures in Java inherit from Collection, so we</span></span><br><span class="line"><span class="comment">     * can use almost any data structure as our buckets.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * Override this method to use different data structures as</span></span><br><span class="line"><span class="comment">     * the underlying bucket type</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * BE SURE TO CALL THIS FACTORY METHOD INSTEAD OF CREATING YOUR</span></span><br><span class="line"><span class="comment">     * OWN BUCKET DATA STRUCTURES WITH THE NEW OPERATOR!</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">protected</span> Collection&lt;Node&gt; <span class="title function_">createBucket</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a table to back our hash table. As per the comment</span></span><br><span class="line"><span class="comment">     * above, this table can be an array of Collection objects</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * BE SURE TO CALL THIS FACTORY METHOD WHEN CREATING A TABLE SO</span></span><br><span class="line"><span class="comment">     * THAT ALL BUCKET TYPES ARE OF JAVA.UTIL.COLLECTION</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tableSize the size of the table to create</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Collection&lt;Node&gt;[] createTable(<span class="type">int</span> tableSize) &#123;</span><br><span class="line">        <span class="keyword">return</span> (Collection&lt;Node&gt;[]) <span class="keyword">new</span> <span class="title class_">Collection</span>[tableSize];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Implement the methods of the Map61B Interface below</span></span><br><span class="line">    <span class="comment">// Your code won&#x27;t compile until you do so!</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Removes all of the mappings from this map.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        MyHashMap&lt;K, V&gt; newTable = <span class="keyword">new</span> <span class="title class_">MyHashMap</span>&lt;&gt;();</span><br><span class="line">        size = newTable.size();</span><br><span class="line">        capacity = newTable.capacity;</span><br><span class="line">        loadFactor = newTable.loadFactor;</span><br><span class="line">        buckets = newTable.buckets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns true if this map contains a mapping for the specified key.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;key is null in containsKey() function&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> get(key) != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the value to which the specified key is mapped, or null if this</span></span><br><span class="line"><span class="comment">     * map contains no mapping for the key.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;the key is null in get() function&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Collection&lt;Node&gt; bucket = getBucket(key);</span><br><span class="line">        <span class="keyword">if</span> (bucket != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Node node : bucket) &#123;</span><br><span class="line">                <span class="keyword">if</span> (node.key.equals(key)) &#123;</span><br><span class="line">                    <span class="keyword">return</span> node.value;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns the number of key-value mappings in this map.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">(K num)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.abs(num.hashCode()) % capacity;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> Collection&lt;Node&gt; <span class="title function_">getBucket</span><span class="params">(K k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> hashCode(k);</span><br><span class="line">        <span class="keyword">return</span> buckets[index];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Associates the specified value with the specified key in this map.</span></span><br><span class="line"><span class="comment">     * If the map previously contained a mapping for the key,</span></span><br><span class="line"><span class="comment">     * the old value is replaced.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        Collection&lt;Node&gt; bucket = getBucket(key);</span><br><span class="line">        <span class="keyword">if</span> (bucket == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// if bucket dont exist</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> hashCode(key);</span><br><span class="line">            buckets[index] = createBucket();</span><br><span class="line">            bucket = buckets[index];</span><br><span class="line">        &#125;</span><br><span class="line">        putIn(bucket, key, value);</span><br><span class="line">        <span class="type">double</span> <span class="variable">load</span> <span class="operator">=</span> (<span class="type">double</span>) size() /capacity;</span><br><span class="line">        <span class="keyword">if</span> (load &gt; loadFactor) &#123;</span><br><span class="line">            resize(<span class="number">2</span> * capacity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        capacity = size;</span><br><span class="line">        Collection&lt;Node&gt;[] newBuckets = createTable(size);</span><br><span class="line">        <span class="keyword">for</span> (Collection&lt;Node&gt; bucket : buckets) &#123;</span><br><span class="line">            <span class="keyword">if</span> (bucket != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Node node : bucket) &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> hashCode(node.key);</span><br><span class="line">                    <span class="keyword">if</span> (newBuckets[index] == <span class="literal">null</span>) &#123;</span><br><span class="line">                        newBuckets[index] = createBucket();</span><br><span class="line">                    &#125;</span><br><span class="line">                    newBuckets[index].add(node);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        buckets = newBuckets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">putIn</span><span class="params">(Collection&lt;Node&gt; bucket, K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node x : bucket) &#123; <span class="comment">// iterate the bucket</span></span><br><span class="line">            <span class="keyword">if</span> (x.key.equals(key)) &#123; <span class="comment">// find the exact key</span></span><br><span class="line">                x.value = value;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        bucket.add(<span class="keyword">new</span> <span class="title class_">Node</span>(key, value));</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns a Set view of the keys contained in this map.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">        Set&lt;K&gt; keySet = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Collection&lt;Node&gt; bucket : buckets) &#123;</span><br><span class="line">            <span class="keyword">if</span> (bucket != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">for</span> (Node node : bucket) &#123;</span><br><span class="line">                    keySet.add(node.key);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> keySet;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Removes the mapping for the specified key from this map if present.</span></span><br><span class="line"><span class="comment">     * Not required for Lab 8. If you don&#x27;t implement this, throw an</span></span><br><span class="line"><span class="comment">     * UnsupportedOperationException.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Removes the entry for the specified key only if it is currently mapped to</span></span><br><span class="line"><span class="comment">     * the specified value. Not required for Lab 8. If you don&#x27;t implement this,</span></span><br><span class="line"><span class="comment">     * throw an UnsupportedOperationException.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Returns an iterator over elements of type &#123;<span class="doctag">@code</span> T&#125;.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> an Iterator.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;K&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Protected helper class to store key/value pairs</span></span><br><span class="line"><span class="comment">     * The protected qualifier allows subclass access</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åå…­)-RD13-å †å’Œä¼˜å…ˆçº§é˜Ÿåˆ—</title>
      <link href="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/"/>
      <url>/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨PQï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨PQï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨PQï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨PQï¼Ÿ</h1><p>æˆ‘ä»¬å­¦åˆ°çš„æœ€åä¸€ä¸ª ADT æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿé«˜æ•ˆæœç´¢ï¼Œåªéœ€è¦ log<em>N</em> æ—¶é—´ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥åœ¨æœç´¢çš„æ¯ä¸€æ­¥ä¸­å‰”é™¤ä¸€åŠçš„å…ƒç´ ã€‚å¦‚æœæˆ‘ä»¬æ›´å…³å¿ƒå¿«é€Ÿæ‰¾åˆ°æœ€å°æˆ–æœ€å¤§å…ƒç´ è€Œä¸æ˜¯å¿«é€Ÿæœç´¢æ€ä¹ˆåŠï¼Ÿ</p><p>åŒæ—¶ï¼ŒäºŒå‰æ ‘ä¸­ï¼Œæˆ‘ä»¬ä¸å…è®¸å­˜åœ¨ä¸¤ä¸ªå…·æœ‰ç›¸åŒçš„å€¼çš„æƒ…å†µé‡æ–°ï¼Œå› æ­¤å°±æœ‰äº†PQã€‚</p><h1 id="ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å£"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å£" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å£"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—æ¥å£</h1><p>è¦ç†è§£è¿™ä¸ªæŠ½è±¡æ•°æ®ç±»å‹ï¼Œè¯·è€ƒè™‘ä¸€è¢‹ç‰©å“ã€‚æ‚¨å¯ä»¥å‘è¿™ä¸ªè¢‹å­ä¸­æ·»åŠ ç‰©å“ï¼Œä¹Ÿå¯ä»¥ä»ä¸­ç§»é™¤ç‰©å“ç­‰ç­‰ã€‚å”¯ä¸€çš„é™åˆ¶æ˜¯æ‚¨åªèƒ½ä¸è¿™ä¸ªè¢‹å­ä¸­çš„æœ€å°çš„ç‰©å“è¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** (Min) Priority Queue: Allowing tracking and removal of </span></span><br><span class="line"><span class="comment">  * the smallest item in a priority queue. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MinPQ</span>&lt;Item&gt; &#123;</span><br><span class="line">    <span class="comment">/** Adds the item to the priority queue. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Item x)</span>;</span><br><span class="line">    <span class="comment">/** Returns the smallest item in the priority queue. */</span></span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">getSmallest</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/** Removes the smallest item from the priority queue. */</span></span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">removeSmallest</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">/** Returns the size of the priority queue. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ä¼˜å…ˆçº§"><a href="#ä½¿ç”¨ä¼˜å…ˆçº§" class="headerlink" title="ä½¿ç”¨ä¼˜å…ˆçº§"></a>ä½¿ç”¨ä¼˜å…ˆçº§</h2><p>æˆ‘ä»¬ä½•æ—¶ä¼šçœŸæ­£ä½¿ç”¨æˆ–éœ€è¦è¿™ç§ç»“æ„ï¼Ÿ</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥è§£å†³ä»»åŠ¡è°ƒåº¦çš„é—®é¢˜ï¼š</p><p>å‡è®¾æœ‰ä¸€ä¸ªä»»åŠ¡è°ƒåº¦ç³»ç»Ÿï¼Œæœ‰å¤šä¸ªä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œæ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ã€‚æˆ‘ä»¬å¸Œæœ›æŒ‰ç…§ä»»åŠ¡çš„ä¼˜å…ˆçº§æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœæœ‰å¤šä¸ªä¼˜å…ˆçº§ç›¸åŒçš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›æŒ‰ç…§å®ƒä»¬çš„åˆ°è¾¾æ—¶é—´å…ˆåæ¥æ‰§è¡Œã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—æ¥ç®¡ç†å¾…æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ã€‚æ¯æ¬¡ä»ä¼˜å…ˆé˜Ÿåˆ—ä¸­å–å‡ºä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡æ¥æ‰§è¡Œï¼Œå¦‚æœæœ‰å¤šä¸ªä¼˜å…ˆçº§ç›¸åŒçš„ä»»åŠ¡ï¼Œåˆ™æŒ‰ç…§å®ƒä»¬çš„åˆ°è¾¾æ—¶é—´å…ˆåæ¥æ‰§è¡Œã€‚</p><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303012318646.png" alt="image-20240303012318646"></p><h2 id="æ¦‚æ‹¬"><a href="#æ¦‚æ‹¬" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h2><ul><li><p>ä½¿ç”¨è¿™ç§ä¸“é—¨çš„æ•°æ®ç»“æ„å¯ä»¥å¸¦æ¥ç©ºé—´&#x2F;å†…å­˜æ–¹é¢çš„å¥½å¤„ã€‚</p></li><li><p>æˆ‘ä»¬ç›®å‰æ‰€çŸ¥çš„ ADT å®ç°å¹¶ä¸èƒ½ä¸º PQ æ“ä½œæä¾›é«˜æ•ˆçš„è¿è¡Œæ—¶ã€‚</p><ul><li>åœ¨å…¶ä»–ç»“æ„ä¸­ï¼ŒäºŒå‰æœç´¢æ ‘æ˜¯æœ€æœ‰æ•ˆçš„</li></ul></li></ul><h1 id="å †ç»“æ„"><a href="#å †ç»“æ„" class="headerlink" title="å †ç»“æ„"></a>å †ç»“æ„</h1><p><strong>æ³¨æ„:è¿™ä¸ªå †å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„å †æ ˆ</strong></p><p>æˆ‘ä»¬ä¹‹å‰å·²ç»çœ‹åˆ°ï¼Œæˆ‘ä»¬æ‰€çŸ¥çš„æ•°æ®ç»“æ„ä¸­å¯¹äºä¼˜å…ˆé˜Ÿåˆ—æ“ä½œçš„è¿è¡Œæ—¶æœ€å¥½çš„æ˜¯äºŒå‰æœç´¢æ ‘ã€‚é€šè¿‡ä¿®æ”¹å…¶ç»“æ„å’Œçº¦æŸæ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æé«˜è¿™äº›æ“ä½œçš„è¿è¡Œæ—¶å’Œæ•ˆç‡ã€‚</p><p>æˆ‘ä»¬å°†å®šä¹‰æˆ‘ä»¬çš„äºŒå‰æœ€å°å †ä¸ºå®Œå…¨å †ï¼Œå¹¶éµå®ˆæœ€å°å †æ€§è´¨ï¼š</p><ul><li><strong>æœ€å°å †ï¼š</strong> æ¯ä¸ªèŠ‚ç‚¹éƒ½å°äºæˆ–ç­‰äºå…¶ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚</li><li><strong>å®Œå…¨å †ï¼š</strong> åº•å±‚ï¼ˆå¦‚æœæœ‰ï¼‰ä»…ç¼ºå°‘é¡¹ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½å°½å¯èƒ½é å·¦ã€‚</li></ul><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303012625523.png" alt="image-20240303012625523"></p><p>æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„å›¾ä¸­æ‰€çœ‹åˆ°çš„ï¼Œç»¿è‰²çš„å †æ˜¯æœ‰æ•ˆçš„ï¼Œè€Œçº¢è‰²çš„å †åˆ™ä¸æ˜¯ã€‚åä¸¤ä¸ªä¸æ˜¯æœ‰æ•ˆçš„ï¼Œå› ä¸ºå®ƒä»¬è¿åäº†æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„è‡³å°‘ä¸€ä¸ªå±æ€§ã€‚</p><p>ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘è¿™ç§ç»“æ„å¦‚ä½•é€‚ç”¨äºæˆ‘ä»¬åœ¨å‰ä¸€ç« ä¸­æè¿°çš„æŠ½è±¡æ•°æ®ç±»å‹ã€‚æˆ‘ä»¬å°†é€šè¿‡åˆ†ææˆ‘ä»¬æœŸæœ›çš„æ“ä½œæ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><p><strong>ç»ƒä¹  13.2.1.</strong> åœ¨ç»™å®šçš„å †ç»“æ„ä¸‹ï¼Œç¡®å®šæˆ‘ä»¬çš„ä¼˜å…ˆé˜Ÿåˆ—æ¥å£çš„æ¯ç§æ–¹æ³•å°†å¦‚ä½•å®ç°ã€‚ä¸è¦ç¼–å†™å®é™…ä»£ç ï¼Œåªéœ€ä¼ªä»£ç ï¼</p><h2 id="å †æ“ä½œ"><a href="#å †æ“ä½œ" class="headerlink" title="å †æ“ä½œ"></a>å †æ“ä½œ</h2><p>å¯¹äºä¼˜å…ˆé˜Ÿåˆ— ADTï¼Œæˆ‘ä»¬å…³å¿ƒçš„ä¸‰ç§æ–¹æ³•æ˜¯ <code>add</code>ã€<code>getSmallest</code> å’Œ <code>removeSmallest</code>ã€‚æˆ‘ä»¬å°†ä»æ¦‚å¿µä¸Šæè¿°å¦‚ä½•æ ¹æ®æˆ‘ä»¬ç»™å®šçš„å †æ¨¡å¼å®ç°è¿™äº›æ–¹æ³•ã€‚</p><ul><li><p><code>add</code>ï¼š</p><p> æš‚æ—¶æ·»åŠ åˆ°å †çš„æœ«å°¾ã€‚å‘ä¸Šæ¸¸åˆ°é€‚å½“ä½ç½®ã€‚</p><ul><li>ä¸Šæ¸¸æ¶‰åŠäº¤æ¢èŠ‚ç‚¹ï¼Œå¦‚æœå­èŠ‚ç‚¹å°äºçˆ¶èŠ‚ç‚¹ã€‚</li></ul></li><li><p><strong><code>getSmallest</code>ï¼š</strong> è¿”å›å †çš„æ ¹ï¼ˆæ ¹æ®æˆ‘ä»¬çš„æœ€å°å †å±æ€§ï¼Œè¿™æ˜¯æœ€å°å€¼ï¼‰ã€‚</p></li><li><p><code>removeSmallest</code>ï¼š</p><p> å°†å †ä¸­çš„æœ€åä¸€ä¸ªé¡¹ç›®ä¸æ ¹äº¤æ¢ã€‚å‘ä¸‹æ²‰åˆ°é€‚å½“çš„ä½ç½®ã€‚</p><ul><li>ä¸‹æ²‰æ¶‰åŠäº¤æ¢èŠ‚ç‚¹ï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹å¤§äºå­èŠ‚ç‚¹ã€‚ä¸æœ€å°å­èŠ‚ç‚¹äº¤æ¢ä»¥ä¿æŒæœ€å°å †å±æ€§ã€‚</li></ul></li></ul><p>æˆ‘ä»¬å·²ç»ç¡®å®šäº†æˆ‘ä»¬å°†å¦‚ä½•ä»¥æœ‰æ•ˆçš„æ–¹å¼å¤„ç† <code>PriorityQueue</code> æ¥å£æŒ‡å®šçš„æ“ä½œã€‚ä½†æˆ‘ä»¬å¦‚ä½•å®é™…ç¼–å†™ä»£ç å‘¢ï¼Ÿ</p><p><strong>ç»ƒä¹  13.2.2.</strong> ç»™å‡ºä¸Šè¿°æ¯ç§æ–¹æ³•çš„è¿è¡Œæ—¶ã€‚æœ€åæƒ…å†µå’Œæœ€ä½³æƒ…å†µã€‚</p><h2 id="æ ‘è¡¨ç¤º"><a href="#æ ‘è¡¨ç¤º" class="headerlink" title="æ ‘è¡¨ç¤º"></a>æ ‘è¡¨ç¤º</h2><p>æœ‰è®¸å¤šæ–¹æ³•å¯ä»¥ç”¨æ¥è¡¨ç¤ºæ ‘ã€‚</p><h3 id="æ–¹æ³•-1aã€1b-å’Œ-1c"><a href="#æ–¹æ³•-1aã€1b-å’Œ-1c" class="headerlink" title="æ–¹æ³• 1aã€1b å’Œ 1c"></a><strong>æ–¹æ³• 1aã€1b å’Œ 1c</strong></h3><p>æˆ‘ä»¬è€ƒè™‘å¯¹æ ‘æœ€ç›´è§‚å’Œä¹‹å‰ä½¿ç”¨çš„è¡¨ç¤ºæ–¹æ³•ã€‚æˆ‘ä»¬å°†åˆ›å»ºèŠ‚ç‚¹å’Œå…¶å­èŠ‚ç‚¹ä¹‹é—´çš„æ˜ å°„ã€‚æˆ‘ä»¬å°†æ¢ç´¢å‡ ç§æ–¹æ³•ã€‚</p><p>åœ¨ Tree1A æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘åˆ›å»ºæŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¹¶å°†å€¼å­˜å‚¨åœ¨èŠ‚ç‚¹å¯¹è±¡ä¸­ã€‚è¿™äº›æ˜¯ç¡¬è¿çº¿ï¼Œç»™æˆ‘ä»¬å›ºå®šå®½åº¦çš„èŠ‚ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tree1A</span>&lt;Key&gt; &#123;</span><br><span class="line">  Key k;</span><br><span class="line">  Tree1A left;</span><br><span class="line">  Tree1A middle;</span><br><span class="line">  Tree1A right;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303012921276.png" alt="image-20240303012921276"></p><p>æˆ–è€…ï¼Œåœ¨ Tree1B ä¸­ï¼Œæˆ‘ä»¬æ¢ç´¢ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤ºå­èŠ‚ç‚¹å’ŒèŠ‚ç‚¹ä¹‹é—´çš„æ˜ å°„ã€‚è¿™å°†ç»™æˆ‘ä»¬å¯å˜å®½åº¦çš„èŠ‚ç‚¹ï¼Œä½†éå†ä¼šæ›´åŠ ç¬¨æ‹™ï¼Œæ€§èƒ½ä¼šæ›´å·®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tree1B</span>&lt;Key&gt; &#123;</span><br><span class="line">  Key k;</span><br><span class="line">  Tree1B[] children;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303012939472.png" alt="image-20240303012939472"></p><p>æœ€åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Tree1C æ–¹æ³•ã€‚è¿™ä¸æˆ‘ä»¬ä»¥å‰è§è¿‡çš„å¸¸è§„æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚ä¸ä»…è¡¨ç¤ºèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸åŒï¼Œæˆ‘ä»¬è¯´èŠ‚ç‚¹ä¹Ÿå¯ä»¥ä¿æŒå¯¹å®ƒä»¬çš„å…„å¼Ÿçš„å¼•ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tree1C</span>&lt;Key&gt; &#123;</span><br><span class="line">  Key k;</span><br><span class="line">  Tree1C favoredChild;</span><br><span class="line">  Tree1C sibling;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303012952386.png" alt="image-20240303012952386"></p><p>åœ¨æ‰€æœ‰è¿™äº›æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å­˜å‚¨äº†è°åœ¨ä¸‹é¢çš„æ˜¾å¼å¼•ç”¨ã€‚è¿™äº›æ˜¾å¼å¼•ç”¨é‡‡ç”¨æŒ‡å‘å®é™…æ ‘å¯¹è±¡çš„æŒ‡é’ˆçš„å½¢å¼ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›ä¸å­˜å‚¨å¯¹å­èŠ‚ç‚¹çš„æ˜¾å¼å¼•ç”¨çš„æ›´å¥‡ç‰¹çš„æ–¹æ³•ã€‚</p><h3 id="æ–¹æ³•-2"><a href="#æ–¹æ³•-2" class="headerlink" title="æ–¹æ³• 2"></a><strong>æ–¹æ³• 2</strong></h3><p>å›é¡¾ä¸€ä¸‹ä¸ç›¸äº¤é›† ADTã€‚æˆ‘ä»¬è¡¨ç¤ºè¿™ç§åŠ æƒå¿«é€Ÿè”åˆç»“æ„çš„æ–¹å¼æ˜¯é€šè¿‡æ•°ç»„ã€‚å¯¹äºè¡¨ç¤ºæ ‘ï¼Œæˆ‘ä»¬å¯ä»¥å­˜å‚¨é”®æ•°ç»„ä»¥åŠçˆ¶æ•°ç»„ã€‚é”®æ•°ç»„è¡¨ç¤ºå“ªä¸ªç´¢å¼•æ˜ å°„åˆ°å“ªä¸ªé”®ï¼Œçˆ¶æ•°ç»„è¡¨ç¤ºå¦ä¸€ä¸ªé”®æ˜¯å¦ä¸€ä¸ªé”®çš„å­èŠ‚ç‚¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Tree2</span>&lt;Key&gt; &#123;</span><br><span class="line">  Key[] keys;</span><br><span class="line">  <span class="type">int</span>[] parents;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303013018033.png" alt="image-20240303013018033"></p><p>èŠ±ç‚¹æ—¶é—´ç¡®ä¿å·¦ä¾§çš„æ ‘å¯¹åº”äºå³ä¾§æ•°ç»„ä¸­çš„è¡¨ç¤ºã€‚</p><p>æ˜¯æ—¶å€™åšå‡ºéå¸¸é‡è¦çš„è§‚å¯Ÿäº†ï¼åŸºäºæ ‘çš„ç»“æ„å’Œæ•°ç»„è¡¨ç¤ºä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p><ul><li>æ ‘æ˜¯å®Œå…¨çš„ã€‚è¿™æ˜¯æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ä¸€ä¸ªå±æ€§ã€‚</li><li>çˆ¶æ•°ç»„å…·æœ‰ä¸€ç§å†—ä½™æ¨¡å¼ï¼Œå…¶ä¸­å…ƒç´ åªæ˜¯åŒå€çš„ã€‚</li><li>é˜…è¯»æ ‘çš„å±‚åºï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒä¸é”®æ•°ç»„ä¸­çš„é”®çš„é¡ºåºå®Œå…¨åŒ¹é…ã€‚</li></ul><p>è¿™ä¸€åˆ‡æ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“çˆ¶æ•°ç»„æ˜¯å¤šä½™çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒï¼Œæˆ‘ä»¬çŸ¥é“æ ‘å¯ä»¥ç”¨æ•°ç»„ä¸­çš„å±‚åºè¡¨ç¤ºã€‚</p><h3 id="æ–¹æ³•-3"><a href="#æ–¹æ³•-3" class="headerlink" title="æ–¹æ³• 3"></a><strong>æ–¹æ³• 3</strong></h3><p>åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„æ ‘æ˜¯å®Œå…¨çš„ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„æ•°ç»„è¡¨ç¤ºä¸­æ²¡æœ‰â€œé—´éš™â€ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæ ‘çš„å¤æ‚çš„äºŒç»´ç»“æ„å‹ç¼©æˆä¸€ä¸ªæ•°ç»„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeC</span>&lt;Key&gt; &#123;</span><br><span class="line">  Key[] keys;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303013042035.png" alt="image-20240303013042035"></p><p>æ ¹æ®ä¸Šé¢çš„æŒç»­å›¾è¡¨ï¼š</p><p>è¿™å°†ç±»ä¼¼äºä¹¦ä¸­å¯¹å †çš„å®ç°æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¼˜å…ˆé˜Ÿåˆ— ADT çš„åŸºç¡€å®ç°ã€‚</p><h3 id="æ–¹æ³•3b"><a href="#æ–¹æ³•3b" class="headerlink" title="æ–¹æ³•3b"></a><strong>æ–¹æ³•3b</strong></h3><p><img src="/2024/03/03/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-16-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-RD13-%E5%A0%86%E5%92%8C%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/image-20240303013345336.png" alt="image-20240303013345336"></p><h2 id="ä¸Šæµ®"><a href="#ä¸Šæµ®" class="headerlink" title="ä¸Šæµ®"></a>ä¸Šæµ®</h2><p>ç»™å®šè¿™ä¸ªå®ç°ï¼Œæˆ‘ä»¬å®šä¹‰äº†åœ¨å †æ“ä½œéƒ¨åˆ†ä¸­æè¿°çš„â€œä¸Šæµ®â€ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">swim</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (keys[parent(k)] â‰» keys[k]) &#123;</span><br><span class="line">       swap(k, parent(k));</span><br><span class="line">       swim(parent(k));              </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">parent</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (k - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h2><table><thead><tr><th>Methods</th><th>Ordered Array</th><th>Bushy BST</th><th>Hash Table</th><th>Heap</th></tr></thead><tbody><tr><td><code>add</code></td><td>Î˜(<em>N</em>)</td><td>Î˜(log<em>N</em>)</td><td>Î˜(1)</td><td>Î˜(log<em>N</em>)</td></tr><tr><td><code>getSmallest</code></td><td>Î˜(1)</td><td>Î˜(log<em>N</em>)</td><td>Î˜(<em>N</em>)</td><td>Î˜(1)</td></tr><tr><td><code>removeSmallest</code></td><td>Î˜(<em>N</em>)</td><td>Î˜(log<em>N</em>)</td><td>Î˜(<em>N</em>)</td><td>Î˜(log<em>N</em>)</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå¡Œçš„æ²™å‘æ³•åˆ™</title>
      <link href="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/"/>
      <url>/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡ç”±GPTç¿»è¯‘ï¼ŒåŸæ–‡é“¾æ¥ä¸º:</p><a href="https://mathwithbaddrawings.com/2015/04/08/the-math-ceiling-wheres-your-cognitive-breaking-point/" title target>åŸæ–‡</a><span id="more"></span><h1 id="æ•°å­¦å¤©èŠ±æ¿ï¼šä½ çš„è®¤çŸ¥ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ"><a href="#æ•°å­¦å¤©èŠ±æ¿ï¼šä½ çš„è®¤çŸ¥ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="æ•°å­¦å¤©èŠ±æ¿ï¼šä½ çš„è®¤çŸ¥ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ"></a>æ•°å­¦å¤©èŠ±æ¿ï¼šä½ çš„è®¤çŸ¥ç“¶é¢ˆåœ¨å“ªé‡Œï¼Ÿ</h1><p><a href="https://mathwithbaddrawings.com/author/mathwithbaddrawings/">æœ¬Â·å¥¥æ—</a> <a href="https://mathwithbaddrawings.com/category/reflections/">æ€è€ƒ</a> 2015å¹´4æœˆ8æ—¥ 4åˆ†é’Ÿ</p><p>æŸå¤©ä¸‹åˆï¼Œæˆ‘çš„ç³»ä¸»ä»»åœ¨æ•™èŒå·¥ä¼‘æ¯å®¤é‡Œç¢°åˆ°äº†æˆ‘ï¼Œæå‡ºäº†ä¸€ä¸ªå‘äººæ·±æ€çš„é—®é¢˜ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00001.jpg" alt="20150326082040_00001"></p><p>ï¼ˆä»–åæ¥æ‰¿è®¤ï¼Œä»–åªæ˜¯å¥½å¥‡æ˜¯å¦èƒ½å¤Ÿåœ¨è¿™ä¸ªåšå®¢ä¸Šç©å‚€å„¡ã€‚ç­”æ¡ˆæ˜¯ä¸€ä¸ªå“äº®çš„â€œæ˜¯çš„â€ï¼šæˆ‘åƒä¸€ä¸ªå‚€å„¡ä¸€æ ·è·³èˆã€‚ï¼‰</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00006.jpg" alt="20150324074539_00006"></p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æœ‰å¤©èŠ±æ¿å—ï¼Ÿ</p><p>ä¼ ç»Ÿçš„æ­£ç»Ÿè¯´ï¼šâ€œç»å¯¹æœ‰ã€‚â€æœ‰é«˜æ™ºå•†å’Œä½æ™ºå•†ã€‚æœ‰â€œæ•°å­¦äººâ€å’Œâ€œéæ•°å­¦äººâ€ã€‚æœ‰äº›å­©å­å°±æ˜¯â€œæ‡‚å¾—äº†â€ï¼›è€Œå…¶ä»–äººåˆ™ä¸æ˜¯ã€‚</p><p>è¯•ç€é—®é—®æˆå¹´äººæœ‰å…³ä»–ä»¬çš„æ•°å­¦æ•™è‚²ï¼šä»–ä»¬æŠŠå®ƒçœ‹ä½œæ˜¯æŸç§NCAAé”¦æ ‡èµ›ã€‚æ¯ä¸ªäººéƒ½ä¼šè¢«æ·˜æ±°ï¼Œé—®é¢˜åªæ˜¯ä½ èƒ½åœ¨æ¸¸æˆä¸­åšæŒå¤šä¹…ã€‚â€œæˆ‘å¤„ç†ä¸äº†ä»£æ•°â€æ„å‘³ç€ç¬¬ä¸€è½®çš„æ·˜æ±°ã€‚â€œæˆ‘åœ¨å¤šå…ƒå¾®ç§¯åˆ†åœä¸‹äº†â€æ„å‘³ç€â€œå˜¿ï¼Œæˆ‘æ²¡èµ¢ï¼Œä½†æˆ‘ä¸ºè¿›å…¥æœ€åå››å¼ºè€Œè‡ªè±ªã€‚â€</p><p>ä½†æ˜¯æ•™å¸ˆä»¬ä¸­é—´æœ‰ä¸€ä¸ªæ–°çš„æ­£ç»Ÿè§‚å¿µï¼Œé‚£å°±æ˜¯â€œç»å¯¹æ²¡æœ‰â€ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00002.jpg" alt="20150326082040_00002"></p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00003.jpg" alt="20150326082040_00003"></p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00004.jpg" alt="20150326082040_00004"></p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00005.jpg" alt="20150326082040_00005"></p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00006.jpg" alt="20150326082040_00006"></p><p>ä½ å¾—æ¬£èµè¿™ç§ä¹è§‚ä¸»ä¹‰ï¼Œè¿™ç§å¤§ä¼—ä¸»ä¹‰ã€‚ï¼ˆçœ‹çœ‹ä½ æ¤…å­ä¸‹é¢â€”â€”<em>æ¯ä¸ªäºº</em>éƒ½å¾—åˆ°äº†ä¸€æœ¬èŒƒç•´è®ºæ•™æï¼ï¼‰ä½†æˆ‘è®¤ä¸ºä½ ä¹Ÿå¾—åƒæˆ‘çš„æœ‹å‹Karenä¸€æ ·æ€€ç–‘ã€‚</p><p>Karenï¼Œæˆ‘ä»¬æœ‰å¤©èŠ±æ¿å—ï¼Ÿ</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00007.jpg" alt="20150326082040_00007"></p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150326082040_00008.jpg" alt="20150326082040_00008"></p><p>Karenå¾ˆåŠªåŠ›ã€‚Karenä¼šé—®é—®é¢˜ã€‚Karenç›¸ä¿¡è‡ªå·±ã€‚ä½†Karenä»ç„¶è§‰å¾—æŸäº›æ•°å­¦è¶…å‡ºäº†å¥¹çš„èƒ½åŠ›èŒƒå›´ï¼Œè¶…å‡ºäº†å¥¹çš„å¤©èŠ±æ¿ã€‚</p><p>å­¦ç”Ÿï¼ˆâ€œæ¯ä¸ªäººéƒ½æœ‰æé™â€ï¼‰å’Œè€å¸ˆï¼ˆâ€œä»»ä½•äººéƒ½å¯ä»¥åšä»»ä½•äº‹ï¼â€ï¼‰ä¹‹é—´çš„é¸¿æ²Ÿä¼¼ä¹æ˜¯ä¸å¯é€¾è¶Šçš„ã€‚è€å¸ˆå¯èƒ½ä¼šè¯´â€œä½ èƒ½åšåˆ°ï¼â€ä½œä¸ºé¼“åŠ±ï¼Œä½†ä¸€ä¸ªæ²®ä¸§çš„å­¦ç”Ÿå¯èƒ½ä¼šå¬åˆ°è¿™äº›è¯ä½œä¸ºå¯¹ä»–ä»¬åŠªåŠ›çš„è°´è´£ï¼ˆæˆ–è€…ä½œä¸ºä¸€ç§å¦„æƒ³çš„è™šå‡ï¼‰ã€‚æœ‰æ²¡æœ‰åŠæ³•è°ƒå’Œè¿™äº›çŸ›ç›¾ï¼Ÿ</p><p>æˆ‘ç›¸ä¿¡æœ‰ï¼š<strong>ç ´æŸæ²™å‘å®šå¾‹</strong>ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00010.jpg" alt="20150324074539_00010"></p><p>åœ¨å¤§å­¦é‡Œï¼Œæˆ‘çš„å®¤å‹å’Œæˆ‘ä»ä¸€äº›æœ‹å‹é‚£é‡Œä¹°äº†ä¸€å¼ äºŒæ‰‹æ²™å‘ï¼ˆåªæœ‰å‡ ä¸ªæœˆçš„å†å²ï¼‰ã€‚ä»–ä»¬ä½åœ¨ä¸€æ¥¼ï¼›æˆ‘ä»¬ä½åœ¨å››æ¥¼ã€‚ä»–ä»¬å‹å¥½åœ°å¸®æˆ‘ä»¬æŠŠå®ƒæ¬ä¸Šäº†æ¥¼ã€‚</p><p>å½“ä»–ä»¬èµ°åˆ°ä¸‰æ¥¼çš„æ¥¼æ¢¯å£æ—¶ï¼Œä»–ä»¬å¬åˆ°äº†ä¸€å£°çˆ†è£‚å£°ã€‚ä¸€ä¸ªå°çš„é‡‘å±æ¡ä»æ²™å‘ä¸Šæ‰äº†ä¸‹æ¥ã€‚æˆ‘ä»¬æ‰€æœ‰äººéƒ½æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œä½†ç”šè‡³æ‰¾ä¸åˆ°è¿™å—é›¶ä»¶ä»å“ªé‡Œæ‰ä¸‹æ¥çš„ã€‚ç”±äºæ²™å‘çœ‹èµ·æ¥å¾ˆå¥½ï¼Œæˆ‘ä»¬åªæ˜¯è€¸äº†è€¸è‚©ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00007.jpg" alt="20150324074539_00007"></p><p>ä¸€ä¸ªæ˜ŸæœŸåï¼Œæ²™å‘å¼€å§‹ä¸‹å‚ã€‚â€œå®ƒä¸€ç›´éƒ½æ˜¯è¿™æ ·å—ï¼Ÿâ€æˆ‘ä»¬</p><p>å½¼æ­¤é—®é“ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00008.jpg" alt="20150324074539_00008"></p><p>ä¸€ä¸ªæœˆåï¼Œå®ƒå°´å°¬åœ°ä¸‹å‚ã€‚ååœ¨å°½å¤´ï¼Œæ²™å‘çš„å¼¯æ›²ä¼šæŠŠä½ ï¼ˆå’Œå…¶ä»–äººï¼‰å€’åœ¨ä¸€ä¸ªä¸­å¿ƒçš„ä¸€å †é‡Œã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00009.jpg" alt="20150324074539_00009"></p><p>åˆ°å­¦æœŸç»“æŸæ—¶ï¼Œå®ƒå·²ç»åœ¨ç°å°˜çš„å®¿èˆåœ°æ¿ä¸Šå´©æºƒæˆäº†ä¸€å †ï¼Œæ›¾ç»ç¹è£çš„æ²™å‘çš„æ®‹éª¸ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00010.jpg" alt="20150324074539_00010"></p><p>ç°åœ¨ï¼Œå®œå®¶å®¶å…·æ˜¯å®¢å…çš„æœè‡ï¼šä»¥å¯¿å‘½çŸ­æš‚è€Œè‘—ç§°ã€‚æˆ‘ä»¬æ²™å‘çš„å¯¿å‘½æ— ç–‘æœ‰ä¸€ä¸ªä¸Šé™ï¼Œä¹Ÿè®¸æ˜¯ä¸‰å¹´æˆ–å››å¹´ã€‚ä½†è¿™ä¸ªæ²™å‘ä»…ä»…æ´»äº†ä¸åˆ°å…«ä¸ªæœˆã€‚</p><p>äº‹åçœ‹æ¥ï¼Œè¿™ä¸ªæŸåçš„é›¶ä»¶ç»å¯¹è‡³å…³é‡è¦ã€‚æ²™å‘æ²¡æœ‰å®ƒçœ‹èµ·æ¥æ˜¯å®Œå¥½æ— æŸçš„ã€‚ä½†æ˜¯æ¯ä¸€å¤©ï¼Œéšç€æ¯ä¸ªæ–°çš„å±è‚¡ï¼Œé‡é‡éƒ½ä¼šå‹åœ¨ç»“æ„çš„æŸäº›éƒ¨åˆ†ä¸Šï¼Œè¿™äº›éƒ¨åˆ†æœ¬æ¥ä¸åº”è¯¥ç‹¬è‡ªæ‰¿å—è´Ÿè·ã€‚æ¡†æ¶å˜å¾—æ‰­æ›²ã€‚å‹åŠ›æ— æ³•æŒç»­ã€‚æ²™å‘çš„å†…éƒ¨æ—¶é’Ÿæ‚„æ‚„åœ°æ»´ç­”ä½œå“ï¼Œç›´åˆ°æ”¯æ’‘ä¸è¶³å˜å¾—ä¸å ªæ‰¿å—ï¼Œæ•´ä¸ªä¸œè¥¿éƒ½å´©æºƒäº†ã€‚</p><p>å¯æ‚²çš„æ˜¯ï¼Œåœ¨æ•°å­¦è¯¾ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><p>å‡è®¾ä½ åœ¨å…«å¹´çº§è¡¨ç°å‡ºè‰²ã€‚ä½ å¯ä»¥å®Œç¾æµç•…è€Œç²¾ç¡®åœ°ç»˜åˆ¶çº¿æ€§æ–¹ç¨‹çš„å›¾å½¢ã€‚ä½ å¯ä»¥è®¡ç®—å®ƒä»¬çš„æ–œç‡ï¼Œè¯†åˆ«ç‚¹ï¼Œå¹¶ç”Ÿæˆå¹³è¡Œå’Œå‚ç›´çº¿ã€‚</p><p><img src="/2024/02/28/%E5%A5%BD%E6%96%87%E7%AB%A0-%E7%A0%B4%E7%A2%8E%E7%9A%84%E8%A2%AB%E8%A4%A5%E6%B3%95%E5%88%99/20150324074539_00011.jpg" alt="20150324074539_00011"></p><p>ä½†æ˜¯å¦‚æœä½ ç¼ºå°‘ä¸€ä¸ªç®€å•çš„ç†è§£â€”â€”è¿™äº›å›¾å½¢åªæ˜¯æ»¡è¶³æ–¹ç¨‹çš„x-yå¯¹â€”â€”é‚£ä¹ˆä½ å°±æ˜¯ä¸€ä¸ªç ´æŸçš„æ²™å‘ã€‚ä½ ç¼ºå°‘äº†ä¸€ä¸ªæœªæ¥å­¦ä¹ è‡³å…³é‡è¦çš„éƒ¨åˆ†ã€‚äºŒæ¬¡å‡½æ•°ä¼šå›°æ‰°ä½ ï¼›æ­£å¼¦æ›²çº¿æ°¸è¿œä¸ä¼šè®©ä½ æ„Ÿåˆ°æ»¡æ„ï¼›ä½ å¯èƒ½ä¼šåœ¨å¾®ç§¯åˆ†åé€€å‡ºï¼Œå®‰æ…°è‡ªå·±ï¼šâ€œå˜¿ï¼Œè‡³å°‘æˆ‘çš„å¤©èŠ±æ¿æ¯”ä¸€äº›äººçš„é«˜ã€‚â€</p><p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œæ—¢ç„¶æˆ‘ç°åœ¨æ²¡äº‹ï¼Œéš¾é“æˆ‘ä¸èƒ½åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™è¡¥ä¸Šé‚£å—ç¼ºå¤±çš„éƒ¨åˆ†å—ï¼Ÿâ€æœ‰æ—¶å€™ï¼Œæ˜¯çš„ã€‚ä½†è¿™è¦å›°éš¾å¾—å¤šã€‚ä½ ç°åœ¨å·²ç»æ²¡æœ‰äº†é‚£ä¸ªå…³é”®éƒ¨åˆ†ã€‚ä½ å·²ç»èŠ±äº†å‡ å¹´æ—¶é—´å»åšé‚£ä¸ªå…³é”®éƒ¨åˆ†ã€‚ä½ å·²ç»å‘å±•å‡ºäº†ä¸€äº›ä¸´æ—¶çš„æ–¹æ³•å’Œç‰‡æ®µå¼çš„æ–¹æ³•æ¥åº”ä»˜ã€‚è¿™äº›æ–¹æ³•æœ‰ä¸€æ®µæ—¶é—´æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å®ƒä»¬æ‰­æ›²äº†æ¡†æ¶ï¼Œç°åœ¨ä½ ä¸å¤Ÿç”¨äº†ã€‚è¦æƒ³å‰è¿›ï¼Œä½ å¿…é¡»å…ˆæ”¾å¼ƒä½ çš„æƒå®œä¹‹è®¡â€”â€”æœ‰æ•ˆåœ°æŠŠæ²™å‘å¼¯å›åŸæ¥çš„å½¢çŠ¶â€”â€”ç„¶åæ‰èƒ½ç»§ç»­å‰è¿›ã€‚ä½†æ”¾å¼ƒå·²ç»å¾—åˆ°ä½ è¿™ä¹ˆè¿œçš„ç­–ç•¥æ˜¯éå¸¸å›°éš¾çš„ã€‚</p><p>ä»¥åè¡¥ä¸Šç¼ºå¤±çš„éƒ¨åˆ†æ„å‘³ç€ç­‰å¾…æŸå®³å·²ç»å¼€å§‹ï¼Œè€Œä¸”éå¸¸éš¾ä»¥æ’¤æ¶ˆã€‚</p><p>æˆ‘ç›¸ä¿¡ï¼Œè¿™å°±æ˜¯è®¸å¤šå­¦ç”Ÿç»å†çš„å¤©èŠ±æ¿ã€‚è¿™ä¸æ˜¯ä»–ä»¬ç¥ç»å…ƒå›ºæœ‰çš„é™åˆ¶ã€‚è¿™æ˜¯æˆ‘ä»¬åˆ›é€ çš„ã€‚æˆ‘ä»¬é€šè¿‡è¨€è¯­æˆ–è¡ŒåŠ¨è¯´ï¼šâ€œä½ ä¸ç†è§£æ²¡å…³ç³»ã€‚åªéœ€æŒ‰ç…§è¿™äº›æ­¥éª¤è¿›è¡Œå¹¶åœ¨åé¢æ£€æŸ¥ç­”æ¡ˆå³å¯ã€‚â€æˆ‘ä»¬é€šè¿‡è¯´ï¼šâ€œåªæœ‰èªæ˜äººæ‰èƒ½<em>ç†è§£</em>ï¼›è‡³äºå…¶ä»–äººï¼Œæˆ‘åªæ˜¯æƒ³ç¡®ä¿ä»–ä»¬èƒ½<em>åš</em>ã€‚â€æˆ‘ä»¬é€šè¿‡è¯´ï¼šâ€œå¥½å§ï¼Œä»–ä»¬ç°åœ¨ä¸ç†è§£ï¼Œä½†ä»–ä»¬ä»¥åä¼šè‡ªå·±ææ˜ç™½çš„ã€‚â€</p><p>è¿™æ ·åšï¼Œæˆ‘ä»¬å¯èƒ½æˆåŠŸåœ°æŠŠæ²™å‘æ¬ä¸Šäº†æ¥¼ã€‚ä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¤±å»äº†ä¸€äº›ä¸œè¥¿ã€‚æŠŠæˆ‘ä»¬çš„å­¦ç”Ÿæ²¡æœ‰å…³é”®çš„ç†è§£é€å‡ºå»å°±åƒæŠŠä»–ä»¬ marching è¿›å…¥æˆ˜åœºæ²¡æœ‰å¤‡ç”¨å¼¹è¯ä¸€æ ·ã€‚å½“ç„¶ï¼Œä»–ä»¬ä¼šå°„å‡»å‡ å‘å­å¼¹ï¼Œä½†åˆ°ä»–ä»¬æ„è¯†åˆ°ç¼ºå°‘äº†ä»€ä¹ˆæ—¶å€™ï¼Œå·²ç»å¤ªè¿Ÿäº†ï¼Œæ— æ³•æŒ½å›ã€‚</p><p>ä¸€ä¸ªèƒ½å¤Ÿå›ç­”é—®é¢˜è€Œä¸ç†è§£çš„å­¦ç”Ÿå°±æ˜¯ä¸€ä¸ªæœ‰è¿‡æœŸæ—¥æœŸçš„å­¦ç”Ÿã€‚</p><p>ç¼–è¾‘ï¼Œ2015å¹´4æœˆ15æ—¥ï¼šè¿™çœŸæ˜¯ä¸€ä¸ªå“åº”å•Šï¼ä¸‹é¢çš„è¯„è®ºåŒºå°±åƒæ˜¯æˆ‘æ¢¦ä¸­çš„å’–å•¡åº—é‡Œçš„å·å¬è€…ã€‚æˆ‘å¸Œæœ›æˆ‘æœ‰æ—¶é—´é€ä¸ªå›å¤ï¼›è¯·çŸ¥é“æˆ‘è¯»è¿‡å¹¶äº«å—äº†ä½ ä»¬æ€æƒ³æ·±æ²‰çš„å›å¤å’Œè®¨è®ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æœ‰è¶£ã®æ–‡ç«  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœ‰è¶£ã®æ–‡ç«  </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åäº”)-Rd12-å“ˆå¸Œè¡¨</title>
      <link href="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/"/>
      <url>/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="ç›®å‰çš„é—®é¢˜"><a href="#ç›®å‰çš„é—®é¢˜" class="headerlink" title="ç›®å‰çš„é—®é¢˜"></a>ç›®å‰çš„é—®é¢˜</h1><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†ä¸€äº›æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿æœ‰æ•ˆåœ°æœç´¢æ•°æ®ç»“æ„ä¸­æ˜¯å¦å­˜åœ¨é¡¹ç›®ã€‚æˆ‘ä»¬ç ”ç©¶äº†äºŒå‰æœç´¢æ ‘ï¼Œç„¶åä½¿ç”¨ 2-3 æ£µæ ‘ä½¿å®ƒä»¬å¹³è¡¡ã€‚</p><p>ç„¶è€Œï¼Œè¿™äº›ç»“æ„å­˜åœ¨ä¸€äº›é™åˆ¶ï¼ˆæ˜¯çš„ï¼Œç”šè‡³æ˜¯ 2-3 æ£µæ ‘ï¼‰</p><ol><li><p>ä»–ä»¬è¦æ±‚é¡¹ç›®å…·æœ‰å¯æ¯”æ€§ã€‚æ‚¨å¦‚ä½•å†³å®šæ–°é¡¹ç›®åœ¨ BST ä¸­çš„ä½ç½®ï¼Ÿä½ å¿…é¡»å›ç­”â€œä½ æ¯”æ ¹å°è¿˜æ˜¯å¤§â€çš„é—®é¢˜ï¼Ÿå¯¹äºæŸäº›å¯¹è±¡æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½æ²¡æœ‰æ„ä¹‰ã€‚</p></li><li><p>å®ƒä»¬ç»™å‡ºçš„å¤æ‚åº¦ä¸º <code>Î˜(logN)</code> ã€‚è¿™ä¸ªå¥½å—ï¼Ÿç»å¯¹åœ°ã€‚ä½†ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚</p></li></ol><h2 id="ç¬¬ä¸€æ¬¡å°è¯•ï¼š-DataIndexedIntegerSet"><a href="#ç¬¬ä¸€æ¬¡å°è¯•ï¼š-DataIndexedIntegerSet" class="headerlink" title="ç¬¬ä¸€æ¬¡å°è¯•ï¼š DataIndexedIntegerSet"></a>ç¬¬ä¸€æ¬¡å°è¯•ï¼š <code>DataIndexedIntegerSet</code></h2><p>ç›®å‰ï¼Œæˆ‘ä»¬åªå°è¯•æ”¹è¿›ä¸Šé¢çš„é—®é¢˜#2ï¼ˆå°†å¤æ‚æ€§ä» <code>Î˜(logN)</code> æé«˜åˆ° <code>Î˜(1)</code> ã€‚æˆ‘ä»¬ä¸ä¼šæ‹…å¿ƒé—®é¢˜#1ï¼ˆå¯æ¯”æ€§ï¼‰äº‹å®ä¸Šï¼Œæˆ‘ä»¬åªä¼šè€ƒè™‘å­˜å‚¨å’Œæœç´¢ <code>int</code> ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªæƒ³æ³•ï¼šè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±»å‹ä¸º <code>boolean</code> ä¸”å¤§å°ä¸º 20 äº¿çš„ ArrayListã€‚è®©ä¸€åˆ‡é»˜è®¤ä¸ºå‡ã€‚</p><ul><li><code>add(int x)</code> æ–¹æ³•åªæ˜¯å°† ArrayList ä¸­çš„ <code>x</code> ä½ç½®è®¾ç½®ä¸º trueã€‚è¿™éœ€è¦ Î˜(1)Î˜(1) æ—¶é—´ã€‚</li><li><code>contains(int x)</code> æ–¹æ³•åªæ˜¯è¿”å› ArrayList ä¸­çš„ <code>x</code> ä½ç½®æ˜¯ <code>true</code> è¿˜æ˜¯ <code>false</code> ã€‚è¿™ä¹Ÿéœ€è¦ <code>Î˜(1) </code>æ—¶é—´ï¼</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataIndexedIntegerSet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>[] present;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DataIndexedIntegerSet</span><span class="params">()</span> &#123;</span><br><span class="line">        present = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">2000000000</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        present[i] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> present[i];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228174821879.png" alt="image-20240228174821879"></p><p>è¿™ç§æ–¹æ³•æœ‰å“ªäº›<strong>æ½œåœ¨é—®é¢˜</strong>ï¼Ÿ</p><ul><li>æå…¶æµªè´¹ã€‚å¦‚æœæˆ‘ä»¬å‡è®¾ <code>boolean</code> éœ€è¦ 1 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œåˆ™ä¸Šé¢çš„æ¯ä¸ª <code>new DataIndexedIntegerSet()</code> éœ€è¦ <code>2GB</code> ç©ºé—´ã€‚æ­¤å¤–ï¼Œç”¨æˆ·åªèƒ½æ’å…¥å°‘é‡é¡¹ç›®â€¦â€¦</li><li>å¦‚æœæœ‰äººæƒ³æ’å…¥ <code>String</code> æˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿ</li></ul><h1 id="è§£å†³å•è¯æ’å…¥é—®é¢˜"><a href="#è§£å†³å•è¯æ’å…¥é—®é¢˜" class="headerlink" title="è§£å†³å•è¯æ’å…¥é—®é¢˜"></a>è§£å†³å•è¯æ’å…¥é—®é¢˜</h1><p>æˆ‘ä»¬çš„ <code>DataIndexedIntegerSet</code> åªå…è®¸ä½¿ç”¨æ•´æ•°ï¼Œä½†ç°åœ¨æˆ‘ä»¬æƒ³è¦å°† <code>String</code> <code>&quot;cat&quot;</code> æ’å…¥å…¶ä¸­ã€‚æˆ‘ä»¬å°†å¯ä»¥æ’å…¥å­—ç¬¦ä¸²çš„æ•°æ®ç»“æ„ç§°ä¸º <code>DataIntexedEnglishWordSet</code> è¿™æ˜¯ä¸€ä¸ªç–¯ç‹‚çš„æƒ³æ³•ï¼šè®©æˆ‘ä»¬ç»™æ¯ä¸ªå­—ç¬¦ä¸²ä¸€ä¸ªæ•°å­—ã€‚ä¹Ÿè®¸â€œcatâ€å¯ä»¥æ˜¯ <code>1</code> ï¼Œâ€œdogâ€å¯ä»¥æ˜¯ <code>2</code> ï¼Œâ€œturtleâ€å¯ä»¥æ˜¯ <code>3</code> ã€‚</p><p>ï¼ˆè¿™æ ·åšçš„æ–¹å¼æ˜¯â€”â€”å¦‚æœæœ‰äººæƒ³åœ¨æˆ‘ä»¬çš„æ•°æ®ç»“æ„ä¸­æ·»åŠ ä¸€åªâ€œçŒ«â€ï¼Œæˆ‘ä»¬ä¼šâ€œç®—å‡ºâ€â€œçŒ«â€çš„æ•°å­—æ˜¯ 1ï¼Œç„¶åå°† <code>present[1]</code> è®¾ç½®ä¸ºæ˜¯ <code>true</code> ã€‚å¦‚æœæœ‰äººæƒ³é—®æˆ‘ä»¬â€œcatâ€æ˜¯å¦åœ¨æˆ‘ä»¬çš„æ•°æ®ç»“æ„ä¸­ï¼Œæˆ‘ä»¬ä¼šâ€œæ‰¾å‡ºâ€â€œcatâ€æ˜¯ 1ï¼Œå¹¶æ£€æŸ¥ <code>present[1]</code> æ˜¯å¦ä¸º true .)</p><p>ä½†å¦‚æœæœ‰äººè¯•å›¾æ’å…¥â€œpotatocactusâ€è¿™ä¸ªè¯ï¼Œæˆ‘ä»¬å°±ä¸çŸ¥é“è¯¥æ€ä¹ˆåŠäº†ã€‚æˆ‘ä»¬éœ€è¦åˆ¶å®šä¸€ä¸ªé€šç”¨ç­–ç•¥ï¼Œä»¥ä¾¿ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå®ƒçš„æ•°å­—è¡¨ç¤ºå½¢å¼ã€‚</p><h2 id="ç­–ç•¥-1ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ¯ã€‚"><a href="#ç­–ç•¥-1ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ¯ã€‚" class="headerlink" title="ç­–ç•¥ 1ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ¯ã€‚"></a>ç­–ç•¥ 1ï¼šä½¿ç”¨ç¬¬ä¸€ä¸ªå­—æ¯ã€‚</h2><p>ä¸€ä¸ªç®€å•çš„æƒ³æ³•æ˜¯ä»…ä½¿ç”¨ä»»ä½•ç»™å®šå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å°†å…¶è½¬æ¢ä¸ºå…¶æ•°å­—è¡¨ç¤ºå½¢å¼ã€‚æ‰€ä»¥â€œcatâ€-&gt;â€œcâ€-&gt; 3ã€‚â€œDogâ€-&gt;â€œdâ€-&gt; 4ã€‚è€Œä¸”ï¼Œâ€œdrumâ€-&gt;â€œdâ€-&gt; 4ã€‚</p><p>å¦‚æœæœ‰äººæƒ³åœ¨æˆ‘ä»¬çš„ <code>DataIntexedEnglishWordSet</code> ä¸­æ’å…¥â€œdogâ€å’Œâ€œdrumâ€æ€ä¹ˆåŠï¼Ÿæ‰€æœ‰çš„èµŒæ³¨éƒ½è½ç©ºäº†ï¼Œæˆ‘ä»¬ä¸çŸ¥é“è¯¥æ€ä¹ˆåšã€‚</p><p>è¯·æ³¨æ„ï¼Œå½“ä¸¤ä¸ªä¸åŒçš„è¾“å…¥ï¼ˆâ€œdogâ€å’Œâ€œdrumâ€ï¼‰æ˜ å°„åˆ°åŒä¸€æ•´æ•°æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ç¢°æ’</strong>ã€‚æˆ‘ä»¬è¿˜ä¸çŸ¥é“å¦‚ä½•å¤„ç†ç¢°æ’ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬æƒ³åŠæ³•é¿å…å®ƒä»¬ã€‚</p><h2 id="ç­–ç•¥-2ï¼šé¿å…ç¢°æ’"><a href="#ç­–ç•¥-2ï¼šé¿å…ç¢°æ’" class="headerlink" title="ç­–ç•¥ 2ï¼šé¿å…ç¢°æ’"></a>ç­–ç•¥ 2ï¼šé¿å…ç¢°æ’</h2><p>æˆ‘ä»¬çŸ¥é“è‹±è¯­å°å†™å­—æ¯ä¸­æœ‰26ä¸ªç‹¬ç‰¹çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†å…¶ç¼–å·ï¼ša &#x3D; 1, b &#x3D; 2, â€¦, z &#x3D; 26ï¼Œæˆ‘ä»¬å¯ä»¥å°†å•è¯æ¯ä¸ªå­—æ¯è¿›è¡ŒåŠ æƒã€‚</p><ul><li><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228172338363.png" alt="image-20240228172338363"></li></ul><p><strong>è¿™ç§è¡¨ç¤ºå½¢å¼ä¸ºæ¯ä¸ªåŒ…å«å°å†™å­—æ¯çš„è‹±è¯­å•è¯æä¾›äº†ä¸€ä¸ªå”¯ä¸€çš„æ•´æ•°ï¼Œå°±åƒä½¿ç”¨åŸºæ•° 10 ä¸ºæ¯ä¸ªæ•°å­—æä¾›äº†å”¯ä¸€çš„è¡¨ç¤ºå½¢å¼ä¸€æ ·ã€‚æˆ‘ä»¬ä¿è¯ä¸ä¼šå‘ç”Ÿç¢°æ’ã€‚</strong></p><h2 id="æˆ‘ä»¬çš„æ•°æ®ç»“æ„-DataIndexedEnglishWordSet"><a href="#æˆ‘ä»¬çš„æ•°æ®ç»“æ„-DataIndexedEnglishWordSet" class="headerlink" title="æˆ‘ä»¬çš„æ•°æ®ç»“æ„ DataIndexedEnglishWordSet"></a>æˆ‘ä»¬çš„æ•°æ®ç»“æ„ <code>DataIndexedEnglishWordSet</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataIndexedEnglishWordSet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>[] present;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DataIndexedEnglishWordSet</span><span class="params">()</span> &#123;</span><br><span class="line">        present = <span class="keyword">new</span> <span class="title class_">boolean</span>[<span class="number">2000000000</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        present[englishToInt(s)] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        resent present[englishToInt(s)];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨è¾…åŠ©æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">letterNum</span><span class="params">(String s, <span class="type">int</span> i)</span> &#123;</span><br><span class="line">    <span class="comment">/** Converts ith character of String to a letter number.</span></span><br><span class="line"><span class="comment">    * e.g. &#x27;a&#x27; -&gt; 1, &#x27;b&#x27; -&gt; 2, &#x27;z&#x27; -&gt; 26 */</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">ithChar</span> <span class="operator">=</span> s.charAt(i)</span><br><span class="line">    <span class="keyword">if</span> ((ithChar &lt; <span class="string">&#x27;a&#x27;</span>) || (ithChar &gt; <span class="string">&#x27;z&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ithChar - <span class="string">&#x27;a&#x27;</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">englishToInt</span><span class="params">(String s)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">intRep</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0l</span> i &lt; s.length(); i += <span class="number">1</span>) &#123;</span><br><span class="line">        intRep = intRep * <span class="number">26</span>;</span><br><span class="line">        intRep += letterNum(s, i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> intRep;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç›®å‰è¿›åº¦"><a href="#ç›®å‰è¿›åº¦" class="headerlink" title="ç›®å‰è¿›åº¦"></a>ç›®å‰è¿›åº¦</h2><ul><li>æˆ‘ä»¬çš„æ–¹æ³•ä»ç„¶éå¸¸æµªè´¹å†…å­˜ã€‚æˆ‘ä»¬è¿˜æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼</li><li>åªå±€é™äºæ•´æ•°å’Œè‹±è¯­å°å†™å­—æ¯</li><li>æ¯” Î˜(log<em>N</em>) æ›´å¥½ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»å¯¹æ•´æ•°å’Œå•ä¸ªè‹±è¯­å•è¯è¿›è¡Œäº†æ­¤æ“ä½œã€‚</li><li>æ— æ³•å­˜å‚¨<code>2pac</code>è¿™æ ·çš„å­—ç¬¦ä¸²</li></ul><h1 id="åœ¨å•ä¸ªè‹±æ–‡å•è¯ä¹‹å¤–æ’å…¥-String"><a href="#åœ¨å•ä¸ªè‹±æ–‡å•è¯ä¹‹å¤–æ’å…¥-String" class="headerlink" title="åœ¨å•ä¸ªè‹±æ–‡å•è¯ä¹‹å¤–æ’å…¥ String"></a>åœ¨å•ä¸ªè‹±æ–‡å•è¯ä¹‹å¤–æ’å…¥ <code>String</code></h1><p>æœ‰ä¸€ç§ç§°ä¸º ASCII çš„å­—ç¬¦æ ¼å¼ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½æœ‰ä¸€ä¸ªæ•´æ•°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çœ‹åˆ°æœ€å¤§å€¼ï¼ˆå³æˆ‘ä»¬éœ€è¦ä½¿ç”¨çš„åŸºæ•°&#x2F;ä¹˜æ•°ï¼‰æ˜¯ 126ã€‚è®©æˆ‘ä»¬è¿™æ ·åšã€‚ä¸ <code>DataIndexedEnglishWordSet</code> ç›¸åŒï¼Œä½†åªæ˜¯ä½¿ç”¨åŸºç¡€ <code>126</code> ã€‚</p><p><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228174935269.png" alt="image-20240228174935269"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public static int asciiToInt(String s) &#123;</span><br><span class="line">    int intRep = 0;</span><br><span class="line">    for (int i = 0; i &lt; s.length(); i += 1) &#123;           </span><br><span class="line">        intRep = intRep * 126;</span><br><span class="line">        intRep = intRep + s.charAt(i);</span><br><span class="line">    &#125;</span><br><span class="line">    return intRep;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ·»åŠ å¯¹ä¸­æ–‡çš„æ”¯æŒæ€ä¹ˆæ ·ï¼Ÿæœ€å¤§å¯èƒ½çš„è¡¨ç¤ºå½¢å¼æ˜¯ 40959ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨å®ƒä½œä¸ºåŸºç¡€ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</p><p><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228175013247.png" alt="image-20240228175013247"></p><p>æ‰€ä»¥â€¦ä¸ºäº†å­˜å‚¨ä¸€ä¸ª 3 ä¸ªå­—ç¬¦çš„ä¸­æ–‡å•è¯ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¤§å°å¤§äº 39 ä¸‡äº¿ï¼ˆå¸¦ Tï¼‰çš„æ•°ç»„ï¼è¿™å·²ç»å¤±æ§äº†â€¦â€¦æ‰€ä»¥è®©æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹æˆ‘ä»¬èƒ½åšä»€ä¹ˆã€‚</p><h1 id="å¤„ç†æ•´æ•°æº¢å‡ºå’Œå“ˆå¸Œç "><a href="#å¤„ç†æ•´æ•°æº¢å‡ºå’Œå“ˆå¸Œç " class="headerlink" title="å¤„ç†æ•´æ•°æº¢å‡ºå’Œå“ˆå¸Œç "></a>å¤„ç†æ•´æ•°æº¢å‡ºå’Œå“ˆå¸Œç </h1><p>Java ä¸­æ•´æ•°çš„æœ€å¤§å¯èƒ½å€¼ä¸º 2,147,483,647ã€‚æœ€å°å€¼ä¸º-2,147,483,648ã€‚</p><p>å¦‚æœä½ å°è¯•å–æœ€å¤§å€¼å¹¶åŠ  1ï¼Œä½ ä¼šå¾—åˆ°æœ€å°å€¼ï¼</p><p>å› æ­¤ï¼Œå³ä½¿åªä½¿ç”¨ ASCII å­—ç¬¦ï¼ˆè®°ä½ï¼Œä»¥ 126 ä¸ºåŸºæ•°ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿä¼šé‡åˆ°é—®é¢˜ã€‚</p><p>å¯¹äº<em>omens</em><del>126</del>&#x3D;28,196,917,171 .<code>asciiToInt(omens)</code> è¿”å› <code>-1,867,853,901</code>.</p><p>ç”±äºæº¢å‡ºï¼Œ <code>melt banana</code> å’Œ <code>subterresetrial anticosmetic</code> å®é™…ä¸Šæ ¹æ® <code>asciiToInt</code> å…·æœ‰ç›¸åŒçš„è¡¨ç¤ºã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ  <code>melt banana</code> ç„¶åå°è¯•è¯¢é—® <code>contains(subterrestrial anticosmetic)</code> ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ° <code>true</code> ã€‚</p><h2 id="ä¸å¯é¿å…çš„äº‹å®ã€‚"><a href="#ä¸å¯é¿å…çš„äº‹å®ã€‚" class="headerlink" title="ä¸å¯é¿å…çš„äº‹å®ã€‚"></a>ä¸å¯é¿å…çš„äº‹å®ã€‚</h2><p>ä»æœ€å°åˆ°æœ€å¤§å¯èƒ½çš„æ•´æ•°ï¼ŒJava ä¸­æ€»å…±æœ‰ 4,294,967,296 ä¸ªæ•´æ•°ã€‚ç„¶è€Œï¼ŒJava ä¸­å¯ä»¥åˆ›å»ºçš„å¯¹è±¡æ€»æ•°è¿œä¸æ­¢äºæ­¤ï¼Œå› æ­¤å†²çªæ˜¯ä¸å¯é¿å…çš„ã€‚æŠµæŠ—æ˜¯å¾’åŠ³çš„ã€‚æˆ‘ä»¬å¿…é¡»å¼„æ¸…æ¥šå¦‚ä½•æ­£é¢å¤„ç†ç¢°æ’ï¼Œè€Œä¸æ˜¯è¯•å›¾è§£å†³å®ƒã€‚</p><blockquote><p>ï¼ˆå¦‚æœæ‚¨ä¸ç›¸ä¿¡åœ¨ Java ä¸­å¯ä»¥åˆ›å»ºè¶…è¿‡ 40 äº¿ä¸ªå¯¹è±¡ï¼Œåªéœ€è€ƒè™‘ä¸€ä¸‹ï¼šâ€œä¸€â€ã€â€œäºŒâ€ã€â€¦ã€â€œäº”ä¸‡äº¿â€â€”â€”æ¯ä¸ªéƒ½æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚ ï¼‰</p></blockquote><p><strong>æˆ‘ä»¬å¿…é¡»å¤„ç†ç¢°æ’ã€‚</strong></p><h2 id="å“ˆå¸Œç "><a href="#å“ˆå¸Œç " class="headerlink" title="å“ˆå¸Œç "></a>å“ˆå¸Œç </h2><p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè·å–ä¸€ä¸ªå¯¹è±¡å¹¶å°†å…¶è½¬æ¢ä¸ºæŸä¸ªæ•´æ•°ç§°ä¸ºâ€œè®¡ç®—è¯¥å¯¹è±¡çš„å“ˆå¸Œç â€ã€‚ä¾‹å¦‚ï¼Œâ€œmeltbananaâ€çš„å“ˆå¸Œç æ˜¯839099497ã€‚</p><blockquote><p><a href="https://mathworld.wolfram.com/HashFunction.html">å“ˆå¸Œå‡½æ•°â€”â€”æ¥è‡ª Wolfram MathWorld â€” Hash Function â€“ from Wolfram MathWorld</a></p></blockquote><p>æˆ‘ä»¬ç ”ç©¶äº†å¦‚ä½•è®¡ç®—å­—ç¬¦ä¸²çš„å“ˆå¸Œç ã€‚å¯¹äºå…¶ä»–å¯¹è±¡ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹ä¸¤ä»¶äº‹ä¹‹ä¸€ï¼š</p><ul><li>Javaä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„ <code>.hashcode()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒã€‚ Java é€šè¿‡è®¡ç®— <code>Object</code> åœ¨å†…å­˜ä¸­çš„ä½ç½®ï¼ˆè®¡ç®—æœºå†…å­˜çš„æ¯ä¸ªéƒ¨åˆ†éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼ï¼‰æ¥è®¡ç®—æ­¤å€¼ï¼Œå¹¶ä½¿ç”¨è¯¥å†…å­˜åœ°å€æ‰§è¡Œç±»ä¼¼äºæˆ‘ä»¬å¯¹ <code>String</code> sã€‚è¯¥æ–¹æ³•ä¸ºæ¯ä¸ª Java å¯¹è±¡æä¾›å”¯ä¸€çš„å“ˆå¸Œç ã€‚</li><li>æœ‰æ—¶ï¼Œæˆ‘ä»¬ç¼–å†™è‡ªå·±çš„ <code>hashcode</code> æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ª <code>Dog</code> ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„ <code>name</code> ã€ <code>age</code> å’Œ <code>breed</code> çš„ç»„åˆæ¥ç”Ÿæˆ <code>hashcode</code></li></ul><h2 id="å“ˆå¸Œç çš„å±æ€§"><a href="#å“ˆå¸Œç çš„å±æ€§" class="headerlink" title="å“ˆå¸Œç çš„å±æ€§"></a>å“ˆå¸Œç çš„å±æ€§</h2><p>å“ˆå¸Œç å…·æœ‰ä¸‰ä¸ªå¿…è¦çš„å±æ€§ï¼Œè¿™æ„å‘³ç€å“ˆå¸Œç å¿…é¡»å…·æœ‰ä»¥ä¸‹å±æ€§æ‰èƒ½æœ‰æ•ˆï¼š</p><ol><li>å®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°</li><li>å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šè¿è¡Œ <code>.hashCode()</code> ä¸¤æ¬¡ï¼Œå®ƒåº”è¯¥è¿”å›ç›¸åŒçš„æ•°å­—</li><li>è¢«è§†ä¸º <code>.equal()</code> çš„ä¸¤ä¸ªå¯¹è±¡å¿…é¡»å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç ã€‚</li></ol><p>ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰å“ˆå¸Œç éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä½ å¸Œæœ›ä½ çš„å“ˆå¸Œç è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå¥½çš„å“ˆå¸Œç ï¼Œå®ƒåº”è¯¥ï¼š</p><ol><li>å‡åŒ€åˆ†é…ç‰©å“</li></ol><p><strong>è¯·æ³¨æ„ï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“å¦‚ä½•å‘æ•°æ®ç»“æ„æ·»åŠ ä»»æ„å¯¹è±¡ï¼Œè€Œä¸ä»…ä»…æ˜¯å­—ç¬¦ä¸²ã€‚</strong></p><h2 id="æœªå†³é—®é¢˜"><a href="#æœªå†³é—®é¢˜" class="headerlink" title="æœªå†³é—®é¢˜"></a>æœªå†³é—®é¢˜</h2><ul><li>ç©ºé—´ï¼šæˆ‘ä»¬è¿˜æ²¡æœ‰å¼„æ¸…æ¥šå¦‚ä½•ä½¿ç”¨æ›´å°‘çš„ç©ºé—´ã€‚</li><li>å¤„ç†ç¢°æ’ï¼šæˆ‘ä»¬å·²ç»ç¡®å®šéœ€è¦å¤„ç†ç¢°æ’ï¼Œä½†æˆ‘ä»¬è¿˜æ²¡æœ‰çœŸæ­£å¤„ç†å®ƒä»¬ã€‚</li></ul><h1 id="å¤„ç†ç¢°æ’"><a href="#å¤„ç†ç¢°æ’" class="headerlink" title="å¤„ç†ç¢°æ’"></a>å¤„ç†ç¢°æ’</h1><p>æœ€é‡è¦çš„æƒ³æ³•æ˜¯ç¨å¾®æ”¹å˜æˆ‘ä»¬çš„æ•°ç»„ï¼Œä½¿å…¶ä¸åªåŒ…å«é¡¹ç›®ï¼Œè€Œæ˜¯åŒ…å«é¡¹ç›®çš„ LinkedListï¼ˆæˆ–ä»»ä½•å…¶ä»–åˆ—è¡¨ï¼‰ã€‚æ‰€ä»¥â€¦</p><p>æ•°ç»„ä¸­çš„æ‰€æœ‰å†…å®¹åŸæœ¬éƒ½æ˜¯ç©ºçš„ã€‚<br>å¦‚æœæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå®ƒçš„å“ˆå¸Œç æ˜¯ $h$ï¼š</p><ul><li>å¦‚æœç´¢å¼• $h$ ç›®å‰æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œæˆ‘ä»¬å°†ä¸ºç´¢å¼• $h$ åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>LinkedList</code> ï¼Œå°†å…¶æ”¾ç½®åœ¨é‚£é‡Œï¼Œç„¶åå°†æ–°é¡¹ç›®æ·»åŠ åˆ°æ–°åˆ›å»ºçš„ <code>LinkedList</code></li><li>å¦‚æœç´¢å¼• $h$ å¤„å·²ç»æœ‰ä¸€äº›ä¸œè¥¿ï¼Œé‚£ä¹ˆé‚£é‡Œå·²ç»æœ‰ä¸€ä¸ª <code>LinkedList</code> ã€‚æˆ‘ä»¬åªéœ€å°†æ–°é¡¹ç›®æ·»åŠ åˆ° <code>LinkedList</code> ä¸­å³å¯ã€‚<strong>æ³¨æ„ï¼šæˆ‘ä»¬çš„æ•°æ®ç»“æ„ä¸å…è®¸æœ‰ä»»ä½•é‡å¤çš„é¡¹&#x2F;é”®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆæ£€æŸ¥æˆ‘ä»¬è¦æ’å…¥çš„é¡¹æ˜¯å¦å·²ç»åœ¨æ­¤ LinkedList ä¸­ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œæˆ‘ä»¬ä»€ä¹ˆä¹Ÿä¸åšï¼è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å°†æ’å…¥åˆ°é“¾è¡¨çš„æœ«å°¾ï¼Œå› ä¸ºæ— è®ºå¦‚ä½•æˆ‘ä»¬éƒ½éœ€è¦æ£€æŸ¥æ‰€æœ‰å…ƒç´ ã€‚</strong></li></ul><h2 id="å…·ä½“å·¥ä½œæµç¨‹"><a href="#å…·ä½“å·¥ä½œæµç¨‹" class="headerlink" title="å…·ä½“å·¥ä½œæµç¨‹"></a>å…·ä½“å·¥ä½œæµç¨‹</h2><ul><li><p><code>add</code> é¡¹ç›®</p><ul><li><p>è·å–é¡¹ç›®çš„å“ˆå¸Œç ï¼ˆå³ç´¢å¼•ï¼‰ã€‚</p></li><li><p>å¦‚æœç´¢å¼•æ²¡æœ‰é¡¹ç›®ï¼Œåˆ™åˆ›å»ºæ–°åˆ—è¡¨ï¼Œå¹¶å°†é¡¹ç›®æ”¾ç½®åœ¨é‚£é‡Œã€‚</p></li><li><p>å¦‚æœç´¢å¼•å·²ç»æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œè¯·æ£€æŸ¥åˆ—è¡¨ä»¥æŸ¥çœ‹é¡¹ç›®æ˜¯å¦å·²åœ¨å…¶ä¸­ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¯·å°†é¡¹ç›®æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</p></li></ul></li><li><p><code>contains</code>é¡¹ç›®</p><ul><li>è·å–é¡¹ç›®çš„å“ˆå¸Œç ï¼ˆå³ç´¢å¼•ï¼‰ã€‚</li><li>å¦‚æœç´¢å¼•ä¸ºç©ºï¼Œåˆ™è¿”å› <code>false</code> ã€‚</li><li>å¦åˆ™ï¼Œæ£€æŸ¥åˆ—è¡¨ä¸­è¯¥ç´¢å¼•å¤„çš„æ‰€æœ‰é¡¹ç›®ï¼Œå¦‚æœè¯¥é¡¹ç›®å­˜åœ¨ï¼Œåˆ™è¿”å› <code>true</code> ã€‚</li></ul></li></ul><h2 id="è¿è¡Œæ—¶å¤æ‚æ€§"><a href="#è¿è¡Œæ—¶å¤æ‚æ€§" class="headerlink" title="è¿è¡Œæ—¶å¤æ‚æ€§"></a>è¿è¡Œæ—¶å¤æ‚æ€§</h2><p>ç”±äºæˆ‘ä»¬éœ€è¦é€šè¿‡å“ˆå¸Œç ï¼ˆå³ç´¢å¼•ï¼‰æŸ¥çœ‹ LinkedList ä¸­çš„æ‰€æœ‰é¡¹ç›®ã€‚æ‰€ä»¥<code>contains</code>çš„å¤æ‚åº¦æ˜¯Î˜(<em>Q</em>)</p><p>å› ä¸ºæˆ‘ä»¬å¿…é¡»æ£€æŸ¥ä»¥ç¡®ä¿è¯¥é¡¹ç›®å°šæœªä½äºé“¾æ¥åˆ—è¡¨ä¸­ï¼Œæ‰€ä»¥<code>add</code>çš„å¤æ‚åº¦æ˜¯Î˜(<em>Q</em>)</p><h2 id="è§£å†³ç©ºé—´"><a href="#è§£å†³ç©ºé—´" class="headerlink" title="è§£å†³ç©ºé—´"></a>è§£å†³ç©ºé—´</h2><p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 100 çš„ ArrayListã€‚æˆ‘ä»¬ä¸è¦æ›´æ”¹ <code>hashcode</code> å‡½æ•°çš„è¡Œä¸ºæ–¹å¼ï¼ˆè®©å®ƒè¿”å›ä¸€ä¸ªç–¯ç‹‚çš„å¤§æ•´æ•°ã€‚ï¼‰ä½†æ˜¯åœ¨è·å¾— <code>hashcode</code> åï¼Œæˆ‘ä»¬å°†å¯¹å…¶å–æ¨¡ 100 ä»¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ 0â€¦990â€¦99 èŒƒå›´å†…çš„ç´¢å¼•ã€‚</p><p><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228175450133.png" alt="image-20240228175450133"></p><h2 id="ç›®å‰è¿›åº¦-1"><a href="#ç›®å‰è¿›åº¦-1" class="headerlink" title="ç›®å‰è¿›åº¦"></a>ç›®å‰è¿›åº¦</h2><ul><li>ç©ºé—´ï¼šå·²è§£å†³ã€‚</li><li>å¤„ç†ç¢°æ’ï¼šå®Œæˆï¼</li><li>è¿è¡Œæ—¶å¤æ‚åº¦ï¼Ÿæˆ‘ä»¬ä¹‹å‰åœ¨ Î˜(ï¿½)Î˜(<em>Q</em>) å¤„ä¸º <code>add</code> å’Œ <code>contains</code> ä¸¢å¤±äº†ä¸€äº›ï¼Œç„¶ååœ¨ <code>è§£å†³ç©ºé—´</code> éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ„è¯†åˆ°æˆ‘ä»¬ä¸¢å¤±äº†æ›´å¤šï¼Œå› ä¸ºæˆ‘ä»¬çš„ LinkedList å¯èƒ½ä¼šæ›´å¤§ï¼ˆå› æ­¤ <code>Q</code> ä¼šæ›´å¤§ã€‚ï¼‰</li></ul><h1 id="æˆ‘ä»¬æœ€ç»ˆçš„æ•°æ®ç»“æ„ï¼š-HashTable"><a href="#æˆ‘ä»¬æœ€ç»ˆçš„æ•°æ®ç»“æ„ï¼š-HashTable" class="headerlink" title="æˆ‘ä»¬æœ€ç»ˆçš„æ•°æ®ç»“æ„ï¼š HashTable"></a>æˆ‘ä»¬æœ€ç»ˆçš„æ•°æ®ç»“æ„ï¼š <code>HashTable</code></h1><p>æˆ‘ä»¬ç°åœ¨åˆ›å»ºçš„ç§°ä¸º <code>HashTable</code> ã€‚</p><ul><li>è¾“å…¥ç”±å“ˆå¸Œå‡½æ•° ( <code>hashcode</code> ) è½¬æ¢ä¸ºæ•´æ•°ã€‚ç„¶åï¼Œä½¿ç”¨æ¨¡è¿ç®—ç¬¦å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆç´¢å¼•ã€‚ç„¶åï¼Œå®ƒä»¬è¢«æ·»åŠ åˆ°è¯¥ç´¢å¼•å¤„ï¼ˆä½¿ç”¨ LinkedList å¤„ç†å†²çªï¼‰ã€‚</li><li><code>contains</code> é€šè¿‡æ‰¾å‡ºæœ‰æ•ˆç´¢å¼•å¹¶åœ¨ç›¸åº”çš„ LinkedList ä¸­æŸ¥æ‰¾è¯¥é¡¹ç›®ä»¥ç±»ä¼¼çš„æ–¹å¼å·¥ä½œã€‚</li></ul><h2 id="å¤„ç†è¿è¡Œæ—¶é—´"><a href="#å¤„ç†è¿è¡Œæ—¶é—´" class="headerlink" title="å¤„ç†è¿è¡Œæ—¶é—´"></a>å¤„ç†è¿è¡Œæ—¶é—´</h2><p>å”¯ä¸€éœ€è¦è§£å†³çš„é—®é¢˜æ˜¯è¿è¡Œæ—¶é—´é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬æœ‰ 100 ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸” ArrayList çš„å¤§å°ä¸º 5ï¼Œé‚£ä¹ˆ</p><ul><li>åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½ä¼šå‡åŒ€åœ°å‘é€åˆ°ä¸åŒçš„ç´¢å¼•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æœ‰ 5 ä¸ª linkedListï¼Œæ¯ä¸ª linkedList åŒ…å« 20 ä¸ªé¡¹ç›®ã€‚</li><li>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰é¡¹ç›®éƒ½ä¼šå‘é€åˆ°åŒä¸€ä¸ªç´¢å¼•ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åªæœ‰ 1 ä¸ª LinkedListï¼Œä½†å®ƒåŒ…å«å…¨éƒ¨ 100 ä¸ªé¡¹ç›®ã€‚</li></ul><p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å°è¯•è§£å†³æ­¤é—®é¢˜ï¼š</p><ul><li>åŠ¨æ€å¢é•¿æˆ‘ä»¬çš„å“ˆå¸Œè¡¨ã€‚</li><li>æ”¹è¿›æˆ‘ä»¬çš„å“ˆå¸Œç </li></ul><h3 id="åŠ¨æ€å¢é•¿å“ˆå¸Œè¡¨"><a href="#åŠ¨æ€å¢é•¿å“ˆå¸Œè¡¨" class="headerlink" title="åŠ¨æ€å¢é•¿å“ˆå¸Œè¡¨"></a>åŠ¨æ€å¢é•¿å“ˆå¸Œè¡¨</h3><p>å‡è®¾æˆ‘ä»¬æœ‰ <em>M</em> ä¸ªæ¡¶ï¼ˆç´¢å¼•ï¼‰å’Œ <em>N</em> ä¸ªé¡¹ã€‚æˆ‘ä»¬è¯´æˆ‘ä»¬çš„<strong>è£…è½½å› å­</strong>æ˜¯ <em>N</em>&#x2F;<em>M</em>ã€‚</p><p>ï¼ˆæ³¨æ„ï¼Œ<strong>è£…è½½å› å­</strong>ç­‰åŒäºæˆ‘ä»¬ä¸Šé¢çš„<strong>æœ€ä½³</strong>æƒ…å†µè¿è¡Œæ—¶é—´ã€‚ï¼‰</p><p>æ‰€ä»¥â€¦æˆ‘ä»¬æœ‰åŠ¨æœºä¿æŒæˆ‘ä»¬çš„è£…è½½å› å­ä½ï¼ˆæ¯•ç«Ÿï¼Œè¿™æ˜¯æˆ‘ä»¬å¯èƒ½å®ç°çš„æœ€ä½³è¿è¡Œæ—¶é—´ï¼ï¼‰ã€‚</p><p>æ³¨æ„ï¼Œå¦‚æœæˆ‘ä»¬ä¿æŒ <em>M</em>ï¼ˆæ¡¶çš„æ•°é‡ï¼‰å›ºå®šï¼Œè€Œ <em>N</em> ä¸æ–­å¢åŠ ï¼Œè£…è½½å› å­ä¼šä¸æ–­å¢åŠ ã€‚</p><p>ç­–ç•¥ï¼Ÿæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°† <em>M</em> åŠ å€ã€‚æˆ‘ä»¬è¿™æ ·åšçš„æ–¹å¼å¦‚ä¸‹ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªå…·æœ‰ 2<em>M</em> ä¸ªæ¡¶çš„æ–°å“ˆå¸Œè¡¨ã€‚</li><li>éå†æ—§å“ˆå¸Œè¡¨ä¸­çš„æ‰€æœ‰é¡¹ï¼Œé€ä¸ªå°†å®ƒä»¬æ·»åŠ åˆ°è¿™ä¸ªæ–°å“ˆå¸Œè¡¨ä¸­ã€‚<ul><li>æˆ‘ä»¬éœ€è¦å†æ¬¡é€ä¸ªæ·»åŠ å…ƒç´ ï¼Œå› ä¸ºç”±äºæ•°ç»„çš„å¤§å°å˜åŒ–ï¼Œæ¨¡æ•°ä¹Ÿä¼šå˜åŒ–ï¼Œå› æ­¤è¯¥é¡¹å¯èƒ½å±äºæ–°å“ˆå¸Œè¡¨ä¸­çš„ä¸åŒæ¡¶è€Œä¸æ˜¯æ—§å“ˆå¸Œè¡¨ä¸­çš„æ¡¶ã€‚</li></ul></li></ul><p>æˆ‘ä»¬é€šè¿‡è®¾ç½®<strong>è£…è½½å› å­é˜ˆå€¼</strong>æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ä¸€æ—¦è£…è½½å› å­å¤§äºæ­¤é˜ˆå€¼ï¼Œæˆ‘ä»¬å°±ä¼šè°ƒæ•´å¤§å°ã€‚</p><p>çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ã€‚â€helmetâ€ çš„å“ˆå¸Œç æ˜¯ 13ã€‚åœ¨ç¬¬ä¸€ä¸ªå“ˆå¸Œè¡¨ä¸­ï¼Œå®ƒè¢«å‘é€åˆ°æ¡¶ 13%4&#x3D;1ã€‚åœ¨ç¬¬äºŒä¸ªå“ˆå¸Œè¡¨ä¸­ï¼Œå®ƒè¢«å‘é€åˆ°æ¡¶ 13%8&#x3D;5ã€‚<strong>è¯·æ³¨æ„ï¼Œè°ƒæ•´å“ˆå¸Œè¡¨çš„å¤§å°ä¹Ÿæœ‰åŠ©äºæ‰“ä¹±å“ˆå¸Œè¡¨ä¸­çš„é¡¹</strong>ï¼ </p><p><img src="/2024/02/28/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-15-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd12-%E5%93%88%E5%B8%8C%E8%A1%A8/image-20240228175534697.png" alt="image-20240228175534697"></p><p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œ<em>å‡è®¾é¡¹ç›®å‡åŒ€åˆ†å¸ƒ</em>ï¼Œæ‰€æœ‰åˆ—è¡¨å¤§çº¦éƒ½ä¼šæ˜¯ <em>N</em>&#x2F;<em>M</em> ä¸ªé¡¹ç›®é•¿ï¼Œå¯¼è‡´ Î˜(<em>N</em>&#x2F;<em>M</em>) è¿è¡Œæ—¶é—´ã€‚è¯·è®°ä½ï¼Œ<em>N</em>&#x2F;<em>M</em> åªå…è®¸åœ¨ä¸€ä¸ªå¸¸æ•°<strong>è£…è½½å› å­é˜ˆå€¼</strong>ä¸‹ï¼Œå› æ­¤ï¼Œ Î˜(<em>N</em>&#x2F;<em>M</em>)&#x3D;Î˜(1)ã€‚</p><p>è¿˜è¦æ³¨æ„ï¼Œè°ƒæ•´å¤§å°éœ€è¦ Î˜(<em>N</em>) æ—¶é—´ã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬éœ€è¦å°† <em>N</em> ä¸ªé¡¹ç›®æ·»åŠ åˆ°å“ˆå¸Œè¡¨ä¸­ï¼Œå¹¶ä¸”æ¯æ¬¡æ·»åŠ éƒ½éœ€è¦ Î˜(1) æ—¶é—´ã€‚</p><p>ä¸€ä¸ªå°ç»†èŠ‚ï¼šå½“è¿›è¡Œè°ƒæ•´å¤§å°æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šä¸éœ€è¦æ£€æŸ¥é¡¹æ˜¯å¦å·²ç»å­˜åœ¨äºé“¾è¡¨ä¸­ï¼ˆå› ä¸ºæˆ‘ä»¬çŸ¥é“æ²¡æœ‰é‡å¤é¡¹ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç¡®ä¿å°†æ¯ä¸ªé¡¹éƒ½åœ¨ Î˜(1) æ—¶é—´å†…æ·»åŠ åˆ°é“¾è¡¨çš„å‰é¢ã€‚ï¼ˆå›æƒ³ä¸€ä¸‹ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æœç´¢é“¾è¡¨ä»¥ç¡®ä¿é¡¹ä¸åœ¨é‚£é‡Œâ€¦ä½†æ˜¯å½“è°ƒæ•´å¤§å°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è·³è¿‡è¯¥æ­¥éª¤ã€‚ï¼‰</p><p>å½“ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å®¡è§†å‡è®¾é¡¹ç›®å‡åŒ€åˆ†å¸ƒçš„å‡è®¾ã€‚å¦‚æœé¡¹ç›®ä¸å‡åŒ€åˆ†å¸ƒï¼Œæˆ‘ä»¬çš„è¿è¡Œæ—¶é—´å°†æ˜¯ Î˜(<em>N</em>)ï¼Œå› ä¸ºå¯èƒ½ä¼šå­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º <em>N</em> çš„å•ä¸ªé“¾è¡¨ã€‚</p><h3 id="å‡è®¾ç‰©å“å‡åŒ€åˆ†å¸ƒï¼Ÿ"><a href="#å‡è®¾ç‰©å“å‡åŒ€åˆ†å¸ƒï¼Ÿ" class="headerlink" title="å‡è®¾ç‰©å“å‡åŒ€åˆ†å¸ƒï¼Ÿ"></a>å‡è®¾ç‰©å“å‡åŒ€åˆ†å¸ƒï¼Ÿ</h3><p>å¦‚æœæˆ‘ä»¬æœ‰å¥½çš„å“ˆå¸Œç ï¼ˆå³ä¸ºä¸åŒé¡¹ç›®æä¾›ç›¸å½“éšæœºçš„å€¼çš„å“ˆå¸Œç ï¼‰ï¼Œé¡¹ç›®å°†å‡åŒ€åˆ†å¸ƒã€‚ï¼‰ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·åšæ˜¯â€¦â€¦å—¯â€¦â€¦å¾ˆéš¾ã€‚</p><p>ä¸€äº›é€šç”¨çš„å¥½çš„ç»éªŒæ³•åˆ™ï¼š</p><ul><li>ä½¿ç”¨ä¸æˆ‘ä»¬ä¹‹å‰å¼€å‘çš„ç­–ç•¥ç±»ä¼¼çš„â€œåŸºæœ¬â€ç­–ç•¥ã€‚</li><li>ä½¿ç”¨ä¸€ä¸ªå°è´¨æ•°çš„â€œåŸºæ•°â€ã€‚<ul><li>Base 126 å®é™…ä¸Šå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºä½¿ç”¨ Base 126 æ„å‘³ç€ä»¥ç›¸åŒçš„æœ€å 32 ä¸ªå­—ç¬¦ç»“å°¾çš„ä»»ä½•å­—ç¬¦ä¸²éƒ½å…·æœ‰ç›¸åŒçš„å“ˆå¸Œç ã€‚</li><li>å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºæº¢å‡ºã€‚</li><li>ä½¿ç”¨ç´ æ•°æœ‰åŠ©äºé¿å…æº¢å‡ºé—®é¢˜ï¼ˆå³ç”±äºæº¢å‡ºè€Œå¯¼è‡´çš„å†²çªï¼‰ã€‚</li><li>ä¸ºä»€ä¹ˆæ˜¯å°ç´ æ•°ï¼Ÿå› ä¸ºå®ƒæ›´å®¹æ˜“è®¡ç®—ã€‚</li></ul></li></ul><h1 id="å“ˆå¸Œè¡¨çš„æ™®åŠ"><a href="#å“ˆå¸Œè¡¨çš„æ™®åŠ" class="headerlink" title="å“ˆå¸Œè¡¨çš„æ™®åŠ"></a>å“ˆå¸Œè¡¨çš„æ™®åŠ</h1><p>å“ˆå¸Œè¡¨æ˜¯é›†åˆå’Œæ˜ å°„çš„æœ€æµè¡Œå®ç°ã€‚</p><ul><li>åœ¨å®è·µä¸­æ€§èƒ½å‡ºè‰²ã€‚ </li><li>ä¸éœ€è¦é¡¹å¯æ¯”è¾ƒã€‚ </li><li>å®ç°é€šå¸¸ç›¸å¯¹ç®€å•ã€‚ </li><li>Python å­—å…¸å®é™…ä¸Šå°±æ˜¯å“ˆå¸Œè¡¨ã€‚</li></ul><p>åœ¨ Java ä¸­ï¼Œå®ƒä»¬ä»¥ java.util.HashMap å’Œ java.util.HashSet å®ç°</p><ul><li>HashMap å¦‚ä½•çŸ¥é“å¦‚ä½•è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„å“ˆå¸Œç ï¼Ÿ <ul><li>å¥½æ¶ˆæ¯æ˜¯ï¼šä¸æ˜¯â€œimplements Hashableâ€ã€‚ </li><li>ç›¸åï¼Œåœ¨ Java ä¸­ï¼Œæ‰€æœ‰å¯¹è±¡å¿…é¡»å®ç°ä¸€ä¸ª .hashCode() æ–¹æ³•ã€‚</li></ul></li></ul><h1 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h1><p>ä»£ç ä»‹ç»åœ¨<a href="https://sp21.datastructur.es/materials/lab/lab8/lab8">Lab8</a>ä¸­</p><p>èµ·å§‹ä»£ç åœ¨<a href="https://github.com/Berkeley-CS61B/skeleton-sp21/tree/master/lab8">skeleton-sp21&#x2F;lab8 at master Â· Berkeley-CS61B&#x2F;skeleton-sp21 (github.com)</a>ä»“åº“ä¸­</p><p>å…·ä½“å®ç°åœ¨åšå®¢(é¡¹ç›®ç¬”è®°äº”)[<a href="https://www.bailog.top/2024/03/04/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-5-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab8-%E5%93%88%E5%B8%8C%E8%A1%A8/]">https://www.bailog.top/2024/03/04/JAVA-CS61B-é¡¹ç›®ç¬”è®°-5-CS61Bé¡¹ç›®ç¬”è®°-Lab8-å“ˆå¸Œè¡¨/]</a></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åå››)-Rd11-æ ‘</title>
      <link href="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/"/>
      <url>/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>Reading: <a href="https://joshhug.gitbooks.io/hug61b/content/chap11/">11. å¹³è¡¡æ ‘ Â·æ‹¥æŠ±61B â€” 11. Balanced Trees Â· Hug61B (gitbooks.io)</a></p><p>å½“æˆ‘ä»¬éšæœºæ’å…¥ BST æ—¶ï¼Œå¹³å‡æ·±åº¦å’Œé«˜åº¦é¢„è®¡ä¸º<code>Î˜(*logN*)</code> .</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¹¶ä¸æ€»æ˜¯èƒ½å¤Ÿä»¥éšæœºé¡ºåºæ’å…¥ BSTã€‚å¦‚æœæˆ‘ä»¬çš„æ•°æ®æ˜¯å®æ—¶çš„å‘¢ï¼Ÿç„¶åï¼Œæˆ‘ä»¬å°†è¢«è¿«æŒ‰ç…§æ•°æ®åˆ°è¾¾æˆ‘ä»¬çš„é¡ºåºè¿›è¡Œæ’å…¥ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209082942966.png" alt="image-20240209082942966"></p><p>ä¸‹é¢æˆ‘ä»¬å°†äº†è§£ä¸€æ£µå§‹ç»ˆä¿æŒå¹³è¡¡çš„æ ‘ï¼</p><h1 id="B-trees-2-3-trees-2-3-4-trees"><a href="#B-trees-2-3-trees-2-3-4-trees" class="headerlink" title="B-trees &#x2F; 2-3 trees &#x2F; 2-3-4 trees"></a>B-trees &#x2F; 2-3 trees &#x2F; 2-3-4 trees</h1><p><a href="https://docs.google.com/presentation/d/1zhQDvbcDZ9RJgJl0bmqwFFlHP8ExbDFo36Q9ZWH9EgU/edit#slide=id.g4fe50d0bd7_0_381">cs61b 2019 lec17 ds3 2-3 trees, 2-3-4 trees - Google å¹»ç¯ç‰‡</a></p><p>BST çš„é—®é¢˜åœ¨äºæˆ‘ä»¬æ€»æ˜¯æ’å…¥å¶èŠ‚ç‚¹ã€‚è¿™å°±æ˜¯å¯¼è‡´é«˜åº¦å¢åŠ çš„åŸå› ã€‚</p><p>å½“æˆ‘ä»¬å¼€å§‹æ’å…¥èŠ‚ç‚¹æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç ´åå¹³è¡¡ç»“æ„ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æƒ³å‡ºä¸€ç§æ–¹æ³•ï¼Œåœ¨æ·»åŠ æ–°èŠ‚ç‚¹æ—¶ä¿æŒæ ‘çš„å¹³è¡¡ï¼</p><p><strong>ç–¯ç‹‚çš„æƒ³æ³•</strong>ï¼šæˆ‘ä»¬æ°¸è¿œä¸è¦æ·»åŠ å¶å­èŠ‚ç‚¹ï¼å½“æˆ‘ä»¬æ’å…¥æ—¶ï¼Œè®©æˆ‘ä»¬åªæ·»åŠ åˆ°å½“å‰çš„å¶èŠ‚ç‚¹ã€‚è¿™æ ·ï¼Œé«˜åº¦æ°¸è¿œä¸ä¼šå¢åŠ ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209074328974.png" alt="image-20240209074328974"></p><p>ä½†æ˜¯ï¼Œæ‚¨èƒ½çœ‹åˆ°è¿™ç§æ’å…¥æ–¹æ¡ˆçš„æ½œåœ¨é—®é¢˜å—ï¼Ÿå¦‚æœæˆ‘ä»¬æœç´¢ 19ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å‘ä¸‹éå†åˆ°åŒ…å«å®ƒçš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä»ç„¶å¿…é¡»åƒæŸ¥çœ‹æ•°ç»„ä¸€æ ·æŸ¥çœ‹è¯¥èŠ‚ç‚¹æ‰èƒ½åˆ°è¾¾ 19 å…ƒç´ ã€‚è¿™å°†å¯¼è‡´ <em>N</em>  çš„è¿è¡Œæ—¶ï¼</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šè®¾ç½®å•ä¸ªèŠ‚ç‚¹ä¸­å…ƒç´ æ•°é‡çš„é™åˆ¶ã€‚æ¯”æ–¹è¯´ 4.å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨èŠ‚ç‚¹å·²ç»æœ‰ 4 ä¸ªå…ƒç´ çš„æƒ…å†µä¸‹å‘èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ï¼Œæˆ‘ä»¬ä¼šå°†èŠ‚ç‚¹åˆ†æˆä¸¤åŠã€‚é€šè¿‡å‘ä¸Šå‡¸èµ·å·¦ä¸­é—´çš„èŠ‚ç‚¹ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209074359730.png" alt="image-20240209074359730"></p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209074429994.png" alt="image-20240209074429994"></p><p>é€šè¿‡åœ¨ä¸­é—´æ‹†åˆ†èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ä¿æŒäº†å®Œç¾çš„å¹³è¡¡ï¼è¿™äº›æ ‘è¢«ç§°ä¸º B æ ‘æˆ– 2-3-4&#x2F;2-3 æ ‘ã€‚2-3-4 å’Œ 2-3 æ˜¯æŒ‡æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥æ‹¥æœ‰çš„å­èŠ‚ç‚¹æ•°ã€‚å› æ­¤ï¼Œä¸€æ£µ 2-3-4 æ£µæ ‘å¯ä»¥æœ‰ 2ã€3 æˆ– 4 ä¸ªå­©å­ï¼Œè€Œä¸€æ£µ 2-3 æ£µæ ‘å¯ä»¥æœ‰ 2 æˆ– 3 ä¸ªå­©å­ã€‚è¿™æ„å‘³ç€å½“ 2-3-4 æ£µæ ‘æœ‰ 3 ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå®ƒä»¬ä¼šæ‹†åˆ†èŠ‚ç‚¹ï¼Œå¹¶ä¸”éœ€è¦å†æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ã€‚2-3 æ£µæ ‘åœ¨æœ‰ 2 ä¸ªèŠ‚ç‚¹ååˆ†è£‚ï¼Œéœ€è¦å†æ·»åŠ ä¸€ä¸ªã€‚</p><h2 id="Insertion-Process-æ’å…¥è¿‡ç¨‹"><a href="#Insertion-Process-æ’å…¥è¿‡ç¨‹" class="headerlink" title="Insertion Process æ’å…¥è¿‡ç¨‹"></a>Insertion Process æ’å…¥è¿‡ç¨‹</h2><p>The process of adding a node to a 2-3-4 tree is:<br>å°†èŠ‚ç‚¹æ·»åŠ åˆ° 2-3-4 æ ‘çš„è¿‡ç¨‹æ˜¯ï¼š</p><ol><li>æˆ‘ä»¬ä»ç„¶æ€»æ˜¯æ’å…¥åˆ°å¶å­èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥æ‹¿ä½ è¦æ’å…¥çš„èŠ‚ç‚¹ï¼Œç”¨å®ƒæ²¿ç€æ ‘å‘ä¸‹éå†ï¼Œæ ¹æ®è¦æ’å…¥çš„èŠ‚ç‚¹æ˜¯å¤§äºè¿˜æ˜¯å°äºæ¯ä¸ªèŠ‚ç‚¹ä¸­çš„é¡¹ç›®æ¥å·¦å³ç§»åŠ¨ã€‚</li><li>å°†èŠ‚ç‚¹æ·»åŠ åˆ°å¶èŠ‚ç‚¹åï¼Œå¦‚æœæ–°èŠ‚ç‚¹æœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼Œåˆ™å¼¹å‡ºå·¦ä¾§ä¸­é—´çš„èŠ‚ç‚¹å¹¶ç›¸åº”åœ°é‡æ–°æ’åˆ—å­èŠ‚ç‚¹ã€‚</li><li>å¦‚æœè¿™å¯¼è‡´çˆ¶èŠ‚ç‚¹æœ‰ 4 ä¸ªèŠ‚ç‚¹ï¼Œåˆ™å†æ¬¡å¼¹å‡ºå·¦ä¸­é—´èŠ‚ç‚¹ï¼Œç›¸åº”åœ°é‡æ–°æ’åˆ—å­èŠ‚ç‚¹ã€‚</li><li>é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹å¯ä»¥å®¹çº³æˆ–æ‚¨åˆ°è¾¾æ ¹èŠ‚ç‚¹ã€‚</li></ol><h2 id="Bæ ‘ä¸å˜é‡"><a href="#Bæ ‘ä¸å˜é‡" class="headerlink" title="Bæ ‘ä¸å˜é‡"></a>Bæ ‘ä¸å˜é‡</h2><p>ç»ƒä¹  11.3.1ï¼šæŒ‰æ­¤é¡ºåºå°† 1-7 æ’å…¥åˆ° B æ ‘ä¸­ã€‚æ ‘çš„é«˜åº¦æ˜¯å¤šå°‘ï¼Ÿæˆ‘ä»¬å¯ä»¥æ”¹å˜æ’å…¥çš„é¡ºåºï¼Œä»¥ä¾¿é™ä½é«˜åº¦å—ï¼Ÿè¿™é‡Œæœ‰ä¸€ä¸ª <a href="https://www.cs.usfca.edu/~galles/visualization/BTree.html/">å¾ˆé…·çš„ B æ ‘å¯è§†åŒ–å·¥å…·</a> å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ï¼</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209074745016.png" alt="image-20240209074745016"></p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209074805752.png" alt="image-20240209074805752"></p><blockquote><p>æ ¹æ®æ‚¨æ’å…¥èŠ‚ç‚¹çš„é¡ºåºï¼ŒB æ ‘çš„é«˜åº¦å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚ç„¶è€Œï¼Œè¿™æ£µæ ‘å°†æ°¸è¿œæ˜¯æµ“å¯†çš„ã€‚</p><p>é«˜åº¦ä¸º1çš„B-Treeéœ€è¦å…ˆæ·»åŠ 2-6ï¼Œæœ€åæ·»åŠ 1å’Œ7å®ç°ã€‚</p></blockquote><p>B æ ‘å…·æœ‰ä»¥ä¸‹æœ‰ç”¨çš„ä¸å˜é‡ï¼š</p><ul><li>æ‰€æœ‰å¶å­ä¸æºçš„è·ç¦»å¿…é¡»ç›¸åŒã€‚</li><li>åŒ…å« <em>k</em> é¡¹çš„éå¶èŠ‚ç‚¹å¿…é¡»å…·æœ‰<em>k</em>+1 çš„å­èŠ‚ç‚¹ã€‚</li></ul><p>åŒæ—¶ï¼Œè¿™äº›ä¸å˜é‡å¯¼è‡´æ ‘æ€»æ˜¯æµ“å¯†çš„ã€‚</p><h2 id="B-Treeè¿è¡Œæ—¶åˆ†æ"><a href="#B-Treeè¿è¡Œæ—¶åˆ†æ" class="headerlink" title="B-Treeè¿è¡Œæ—¶åˆ†æ"></a>B-Treeè¿è¡Œæ—¶åˆ†æ</h2><p>åœ¨ B æ ‘ä¸­æœç´¢çš„æœ€åæƒ…å†µæ˜¯ï¼Œå¦‚æœæ¯ä¸ªèŠ‚ç‚¹ä¸­éƒ½æœ‰æœ€å¤§æ•°é‡çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¿…é¡»ä¸€ç›´éå†åˆ°åº•éƒ¨ã€‚æˆ‘ä»¬å°†ç”¨äº L è¡¨ç¤ºæ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ æ•°é‡ã€‚è¿™æ„å‘³ç€éœ€è¦æ¢ç´¢èŠ‚ç‚¹ï¼ˆå› ä¸ºæœ€å¤§é«˜åº¦æ˜¯ log<em>N</em> ç”±äºçŒæœ¨ä¸›ä¸å˜ï¼‰ï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æ¢ç´¢ <em>L</em>log<em>N</em> å…ƒç´ ã€‚æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦è¿è¡Œ <em>L</em>log<em>N</em> æ“ä½œã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“ <em>L</em> æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œå› æ­¤æˆ‘ä»¬çš„æ€»è¿è¡Œæ—¶é—´æ˜¯ O*(log*N) ã€‚</p><h2 id="B-Tree-åˆ é™¤-ï¼ˆExtraï¼‰"><a href="#B-Tree-åˆ é™¤-ï¼ˆExtraï¼‰" class="headerlink" title="B-Tree åˆ é™¤ ï¼ˆExtraï¼‰"></a>B-Tree åˆ é™¤ ï¼ˆExtraï¼‰</h2><p>å¦‚æœæ‚¨å¥½å¥‡ï¼Œè¯·çœ‹ <a href="https://docs.google.com/presentation/d/1zhQDvbcDZ9RJgJl0bmqwFFlHP8ExbDFo36Q9ZWH9EgU/edit#slide=id.g508ece10b0_1_1305">these extra slides</a> ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨è¿™é‡Œè®¨è®ºå®ƒä»¬ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>BST æœ‰æœ€ä½³æƒ…å†µé«˜åº¦ Î˜(log<em>N</em>) å’Œæœ€åæƒ…å†µé«˜åº¦ Î˜(<em>N</em>) ã€‚</p><ul><li>å¤§Oä¸æœ€åçš„æƒ…å†µä¸æ˜¯ä¸€å›äº‹ï¼</li></ul><p>B æ ‘æ˜¯å¯¹äºŒå‰æœç´¢æ ‘çš„ä¿®æ”¹ï¼Œå¯é¿å… Î˜(<em>N</em>) æœ€åçš„æƒ…å†µã€‚</p><ul><li>èŠ‚ç‚¹å¯ä»¥åŒ…å«ä»1 åˆ° <em>L</em>ä¸ª é¡¹ç›®ã€‚</li><li>åŒ…å«çš„å·¥ä½œåŸç†å‡ ä¹ä¸æ™®é€š BST å®Œå…¨ç›¸åŒã€‚</li><li>é€šè¿‡å‘ç°æœ‰å¶èŠ‚ç‚¹æ·»åŠ é¡¹ç›®æ¥æ·»åŠ å·¥ä½œã€‚<ul><li>å¦‚æœèŠ‚ç‚¹å¤ªæ»¡ï¼Œå®ƒä»¬å°±ä¼šåˆ†è£‚ã€‚</li></ul></li><li>ç”±æ­¤äº§ç”Ÿçš„æ ‘å…·æœ‰å®Œç¾çš„å¹³è¡¡ã€‚æ“ä½œçš„è¿è¡Œæ—¶ä¸º: O*(log<em>N</em>) ã€‚</li><li>æ²¡æœ‰è®¨è®ºåˆ é™¤ã€‚å¦‚æœæ‚¨å¥½å¥‡ï¼Œè¯·å‚é˜…å…¶ä»–å¹»ç¯ç‰‡ã€‚</li><li>æ²¡æœ‰è®¨è®ºè¿‡æ‹†åˆ†æ˜¯å¦‚ä½•å·¥ä½œçš„ <em>L</em>&gt;3 ï¼ˆå‚è§å…¶ä»–ç±»ï¼‰ã€‚</li><li>B æ ‘æ›´å¤æ‚ï¼Œä½†å®ƒä»¬å¯ä»¥æœ‰æ•ˆåœ°å¤„ç†ä»»ä½•æ’å…¥é¡ºåºã€‚</li></ul><blockquote><p>ç›®å‰é—®é¢˜:</p><ul><li>åˆ†è£‚çš„å®ç°è¿‡äºå¤æ‚</li><li>åˆ é™¤çš„æ“ä½œå¿…é¡»ä¿è¯åŒ…å« <em>k</em> é¡¹çš„éå¶èŠ‚ç‚¹å¿…é¡»å…·æœ‰<em>k</em>+1 çš„å­èŠ‚ç‚¹ï¼Œå› æ­¤åˆ é™¤ä¼šå˜å¾—æ›´åŠ å›°éš¾ï¼Œå¯èƒ½éœ€è¦æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ã€‚</li></ul></blockquote><h1 id="æ—‹è½¬æ ‘"><a href="#æ—‹è½¬æ ‘" class="headerlink" title="æ—‹è½¬æ ‘"></a>æ—‹è½¬æ ‘</h1><p><a href="https://docs.google.com/presentation/d/1S27xlCPX0Up8WAHZPBqmbcrcKo4FNbyG6eTHamOxzgA/edit#slide=id.g7582c86fb_0984">cs61b 2020 lec18 ds4 balanced search trees - Google å¹»ç¯ç‰‡</a></p><p><a href="https://docs.google.com/presentation/d/1pfkQENfIBwiThGGFVO5xvlVp7XAUONI2BwBqYxib0A4/edit#slide=id.g465b5392c_00">rotation balancing demo - Google å¹»ç¯ç‰‡</a></p><h2 id="BST-ç»“æ„"><a href="#BST-ç»“æ„" class="headerlink" title="BST ç»“æ„"></a>BST ç»“æ„</h2><p>å¯¹äºä»»ä½• BSTï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥æ„å»ºå®ƒä»¥ä¿æŒ BST ä¸å˜æ€§ã€‚åœ¨ç¬¬ 11.1 ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¦‚ä½•ä»¥ä¸åŒé¡ºåºæ’å…¥å…ƒç´ å°†å¯¼è‡´ä¸åŒçš„ BSTã€‚ä»¥ä¸‹ BST éƒ½åŒ…å«å…ƒç´  1ã€2 å’Œ 3ï¼Œä½†ç»“æ„å„å¼‚ã€‚</p><p>ç„¶è€Œï¼Œæ’å…¥å¹¶ä¸æ˜¯äº§ç”Ÿç›¸åŒ BST ä¸åŒç»“æ„çš„å”¯ä¸€æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ç§ç§°ä¸º<strong>æ—‹è½¬</strong>çš„è¿‡ç¨‹æ”¹å˜å·²ç»æ”¾ç½®èŠ‚ç‚¹çš„æ ‘ã€‚</p><h2 id="æ ‘çš„æ—‹è½¬"><a href="#æ ‘çš„æ—‹è½¬" class="headerlink" title="æ ‘çš„æ—‹è½¬"></a>æ ‘çš„æ—‹è½¬</h2><p>æ—‹è½¬çš„å½¢å¼å®šä¹‰ä¸ºï¼š</p><ul><li><code>rotateLeft(G)</code>: ä»¤ x ä¸º G çš„å³å­èŠ‚ç‚¹ã€‚å°† G è®¾ä¸º x çš„æ–°å·¦å­èŠ‚ç‚¹ã€‚</li><li><code>rotateRight(G)</code>: ä»¤ x ä¸º G çš„å·¦å­èŠ‚ç‚¹ã€‚å°† G è®¾ä¸º x çš„æ–°å³å­èŠ‚ç‚¹ã€‚</li></ul><p>åœ¨æ¥ä¸‹æ¥çš„å‡ æ®µæ–‡å­—ä¸­ï¼Œæˆ‘ä»¬å°†æ…¢æ…¢æ­ç¤ºè¿™ä¸ªè¿‡ç¨‹ã€‚ä¸‹é¢æ˜¯å¯¹èŠ‚ç‚¹ G è¿›è¡Œå·¦æ—‹è½¬æ—¶æ‰€å‘ç”Ÿçš„æƒ…å†µçš„å›¾å½¢æè¿°ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081017071.png" alt="image-20240209081017071"></p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081034821.png" alt="image-20240209081034821"></p><p>G çš„å³å­èŠ‚ç‚¹ P ä¸ G åˆå¹¶ï¼Œå¸¦ç€å®ƒçš„å­èŠ‚ç‚¹ä¸€èµ·ã€‚ç„¶å P å°†å…¶å·¦å­èŠ‚ç‚¹ä¼ é€’ç»™ Gï¼Œå¹¶ä¸” G å‘å·¦ä¸‹ç§»åŠ¨æˆä¸º P çš„å·¦å­èŠ‚ç‚¹ã€‚æ‚¨å¯ä»¥çœ‹åˆ°æ ‘çš„ç»“æ„ä»¥åŠçº§åˆ«æ•°é‡å‘ç”Ÿäº†å˜åŒ–ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨éæ ¹èŠ‚ç‚¹ä¸Šæ—‹è½¬ã€‚æˆ‘ä»¬åªéœ€æš‚æ—¶æ–­å¼€èŠ‚ç‚¹ä¸çˆ¶èŠ‚ç‚¹çš„è¿æ¥ï¼Œæ—‹è½¬èŠ‚ç‚¹å¤„çš„å­æ ‘ï¼Œç„¶åé‡æ–°è¿æ¥æ–°çš„æ ¹ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>rotateRight</code> å’Œ <code>rotateLeft</code> çš„å®ç°ï¼Œç”± <a href="https://algs4.cs.princeton.edu/33balanced/RedBlackBST.java.html">æ™®æ—æ–¯é¡¿æ–‡æ¡£</a> æä¾›ï¼Œä¸ºç®€å•èµ·è§çœç•¥äº†ä¸€äº›ä»£ç è¡Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Node <span class="title function_">rotateRight</span><span class="params">(Node h)</span> &#123;</span><br><span class="line">    <span class="comment">// assert (h != null) &amp;&amp; isRed(h.left);</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">x</span> <span class="operator">=</span> h.left;</span><br><span class="line">    h.left = x.right;</span><br><span class="line">    x.right = h;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// make a right-leaning link lean to the left</span></span><br><span class="line"><span class="keyword">private</span> Node <span class="title function_">rotateLeft</span><span class="params">(Node h)</span> &#123;</span><br><span class="line">    <span class="comment">// assert (h != null) &amp;&amp; isRed(h.right);</span></span><br><span class="line">    <span class="type">Node</span> <span class="variable">x</span> <span class="operator">=</span> h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ—‹è½¬ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥å®Œå…¨å¹³è¡¡ä¸€æ£µæ ‘ã€‚åœ¨è¿™äº›å¹»ç¯ç‰‡ä¸­æŸ¥çœ‹æ¼”ç¤ºï¼š<a href="https://docs.google.com/presentation/d/1pfkQENfIBwiThGGFVO5xvlVp7XAUONI2BwBqYxib0A4/edit#slide=id.g465b5392c_00">ç‚¹å‡»è¿™é‡Œ</a></p><p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¸€ç§ç‰¹å®šçš„æ ‘æ•°æ®ç»“æ„ï¼Œé€šè¿‡ä½¿ç”¨æ—‹è½¬ä¿æŒå¹³è¡¡ã€‚</p><h1 id="é»‘ç™½æ ‘"><a href="#é»‘ç™½æ ‘" class="headerlink" title="é»‘ç™½æ ‘"></a>é»‘ç™½æ ‘</h1><p><a href="https://docs.google.com/presentation/d/1S27xlCPX0Up8WAHZPBqmbcrcKo4FNbyG6eTHamOxzgA/edit#slide=id.g4694c9844_01030">cs61b 2020 lec18 ds4 balanced search trees - Google å¹»ç¯ç‰‡</a></p><p>åœ¨å‰ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬è¯´æˆ‘ä»¬çœŸçš„å¾ˆå–œæ¬¢ 2-3 æ ‘ï¼Œå› ä¸ºå®ƒä»¬å§‹ç»ˆä¿æŒå¹³è¡¡ï¼Œä½†æˆ‘ä»¬ä¹Ÿä¸å–œæ¬¢å®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬å¾ˆéš¾å®ç°ã€‚ä½†ä¸ºä»€ä¹ˆä¸ä¸¤è€…å…¼å¾—å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¸åˆ›å»ºä¸€æ£µä½¿ç”¨ BST å®ç°çš„æ ‘ï¼Œä½†åœ¨ç»“æ„ä¸Šä¸ 2-3 æ ‘ç›¸åŒï¼Œå› æ­¤ä¿æŒå¹³è¡¡ï¼Ÿï¼ˆè¯·æ³¨æ„ï¼Œåœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äº 2-3 æ ‘ï¼Œè€Œä¸æ˜¯ 2-3-4 æ ‘ï¼‰</p><h2 id="çº¢é»‘æ ‘çš„ä»‹ç»"><a href="#çº¢é»‘æ ‘çš„ä»‹ç»" class="headerlink" title="çº¢é»‘æ ‘çš„ä»‹ç»"></a>çº¢é»‘æ ‘çš„ä»‹ç»</h2><p>æˆ‘ä»¬å°†é€šè¿‡æŸ¥çœ‹ 2-3 æ ‘æ¥åˆ›å»ºè¿™æ£µæ ‘ï¼Œå¹¶é—®è‡ªå·±æˆ‘ä»¬å¯ä»¥è¿›è¡Œä»€ä¹ˆæ ·çš„ä¿®æ”¹æ¥å°†å…¶è½¬æ¢ä¸º BSTã€‚</p><p>å¯¹äºä»…å…·æœ‰ 2 ä¸ªå­èŠ‚ç‚¹ï¼ˆå…·æœ‰ 2 ä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼‰çš„ 2-3 æ ‘ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ª BSTï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼</p><p>ç„¶è€Œï¼Œå½“æˆ‘ä»¬é‡åˆ° 3 ä¸ªèŠ‚ç‚¹æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªâ€œç²˜åˆâ€èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ä¸åŒ…å«ä»»ä½•ä¿¡æ¯ï¼Œåªç”¨äºæ˜¾ç¤ºå…¶ 2 ä¸ªå­èŠ‚ç‚¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081406566.png" alt="image-20240209081406566"></p><p>ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘ä»¬å ç”¨äº†æ›´å¤šçš„ç©ºé—´ï¼Œå¹¶ä¸”ä»£ç ä¼šå˜å¾—ä¸‘é™‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ç²˜åˆèŠ‚ç‚¹ï¼Œè€Œæ˜¯ä½¿ç”¨ç²˜åˆé“¾æ¥ï¼</p><p>æˆ‘ä»¬ä»»æ„é€‰æ‹©å°†å·¦ä¾§å…ƒç´ è®¾ä¸ºå³ä¾§å…ƒç´ çš„å­èŠ‚ç‚¹ã€‚è¿™å¯¼è‡´äº†å·¦å€¾æ ‘ã€‚æˆ‘ä»¬é€šè¿‡å°†å…¶æ ‡è®°ä¸º<strong>çº¢è‰²</strong>æ¥æ˜¾ç¤ºé“¾æ¥ä¸º<strong>ç²˜åˆé“¾æ¥</strong>ã€‚æ­£å¸¸çš„é“¾æ¥æ˜¯é»‘è‰²çš„ã€‚ç”±äºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†è¿™äº›ç»“æ„ç§°ä¸ºå·¦å€¾çº¢é»‘æ ‘ï¼ˆLLRBï¼‰ã€‚æˆ‘ä»¬å°†åœ¨ 61B ä¸­ä½¿ç”¨å·¦å€¾æ ‘ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081418640.png" alt="image-20240209081418640"></p><p>å·¦å€¾çº¢é»‘æ ‘ä¸ 2-3 æ ‘å…·æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚æ¯ä¸ª 2-3 æ ‘éƒ½æœ‰ä¸ä¹‹å…³è”çš„å”¯ä¸€ LLRB çº¢é»‘æ ‘ã€‚è‡³äº 2-3-4 æ ‘ï¼Œå®ƒä»¬ä¸æ ‡å‡†çº¢é»‘æ ‘ä¿æŒå¯¹åº”å…³ç³»ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081433983.png" alt="image-20240209081433983"></p><h2 id="LLRB-çš„å±æ€§"><a href="#LLRB-çš„å±æ€§" class="headerlink" title="LLRB çš„å±æ€§"></a>LLRB çš„å±æ€§</h2><p>LLRB(<strong>Left-Leaning Red Black Binary Search Tree</strong>)å·¦å€¾é»‘ç™½æœç´¢æ ‘</p><p>ä»¥ä¸‹æ˜¯ LLRB çš„å±æ€§ï¼š</p><ul><li>ä¸ 2-3 æ ‘å…·æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚</li><li>æ²¡æœ‰èŠ‚ç‚¹æœ‰ 2 æ¡çº¢è‰²é“¾æ¥ã€‚</li><li>æ²¡æœ‰çº¢è‰²å³é“¾æ¥ã€‚</li><li>ä»æ ¹åˆ°å¶çš„æ¯æ¡è·¯å¾„å…·æœ‰ç›¸åŒæ•°é‡çš„é»‘è‰²é“¾æ¥ï¼ˆå› ä¸º 2-3 æ ‘åˆ°æ¯ä¸ªå¶å­çš„é“¾æ¥æ•°ç›¸åŒï¼‰ã€‚</li><li>é«˜åº¦ä¸è¶…è¿‡ç›¸åº” 2-3 æ ‘çš„é«˜åº¦çš„ 2 å€ + 1ã€‚</li></ul><blockquote><p>æ³¨æ„ï¼Œå½“æˆ‘ä»¬å¯¹åº”åˆ°2-3æ ‘çš„æ—¶å€™éœ€è¦è€ƒè™‘2-3æ ‘çš„ä¸¤ä¸ªä¸å˜é‡:</p><ul><li>æ‰€æœ‰å¶å­ä¸æºçš„è·ç¦»å¿…é¡»ç›¸åŒã€‚</li><li>åŒ…å« <em>k</em> é¡¹çš„éå¶èŠ‚ç‚¹å¿…é¡»å…·æœ‰<em>k</em>+1 çš„å­èŠ‚ç‚¹ã€‚</li></ul></blockquote><h2 id="LLRB-çš„æ’å…¥"><a href="#LLRB-çš„æ’å…¥" class="headerlink" title="LLRB çš„æ’å…¥"></a>LLRB çš„æ’å…¥</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘ 2-3 æ ‘æ’å…¥å¹¶ä½¿ç”¨ä¸Šè¿°æ–¹æ¡ˆè½¬æ¢æ¥éšæ—¶æ’å…¥åˆ° LLRB æ ‘ã€‚ä½†æ˜¯ï¼Œè¿™ä¸æˆ‘ä»¬æœ€åˆåˆ›å»º LLRB çš„ç›®çš„ç›¸è¿èƒŒï¼Œå³é¿å…å¤æ‚çš„ 2-3 æ ‘ä»£ç ï¼ç›¸åï¼Œæˆ‘ä»¬å°†åƒå¯¹å¾…æ™®é€š BST ä¸€æ ·æ’å…¥åˆ° LLRB ä¸­ã€‚ç„¶è€Œï¼Œè¿™å¯èƒ½ä¼šç ´åå®ƒä¸ 2-3 æ ‘çš„ä¸€ä¸€æ˜ å°„ï¼Œå› æ­¤æˆ‘ä»¬å°†ä½¿ç”¨æ—‹è½¬å°†æ ‘è°ƒæ•´å›æ­£ç¡®çš„ç»“æ„ã€‚</p><p>åœ¨æ’å…¥ LLRB æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³çš„ä¸åŒä»»åŠ¡å¦‚ä¸‹ã€‚</p><p><strong>ä»»åŠ¡ 1ï¼šæ’å…¥é¢œè‰²ï¼š</strong>å› ä¸ºåœ¨ 2-3 æ ‘ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯é€šè¿‡å‘å¶èŠ‚ç‚¹æ·»åŠ æ¥æ’å…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ çš„é“¾æ¥çš„é¢œè‰²åº”å§‹ç»ˆä¸ºçº¢è‰²ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081859814.png" alt="image-20240209081859814"></p><p><strong>ä»»åŠ¡ 2ï¼šå³ä¾§æ’å…¥ï¼š</strong> å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨å·¦å€¾çº¢é»‘æ ‘ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬<strong>æ°¸è¿œä¸èƒ½æœ‰å³ä¾§çš„çº¢è‰²é“¾æ¥</strong>ã€‚å¦‚æœæˆ‘ä»¬åœ¨å³ä¾§æ’å…¥ï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨æ—‹è½¬æ¥ç»´æŠ¤ LLRB ä¸å˜å¼ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081919590.png" alt="image-20240209081919590"></p><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬åœ¨å³ä¾§æ’å…¥æ—¶æœ‰ä¸€ä¸ªçº¢è‰²é“¾æ¥ï¼Œä¸”å·¦å­èŠ‚ç‚¹ä¹Ÿæ˜¯çº¢è‰²é“¾æ¥ï¼Œåˆ™å‡ºäºåœ¨ä»»åŠ¡ 3 ä¸­å°†ä¼šæ›´æ¸…æ¥šçš„ç›®çš„ï¼Œæˆ‘ä»¬å°†æš‚æ—¶å…è®¸å®ƒã€‚</p><p><strong>ä»»åŠ¡ 3ï¼šå·¦ä¾§åŒé‡æ’å…¥ï¼š</strong> å¦‚æœå­˜åœ¨ 2 ä¸ªè¿ç»­çš„å·¦é“¾æ¥ï¼Œåˆ™æˆ‘ä»¬æœ‰ä¸€ä¸ªéæ³•çš„ 4 èŠ‚ç‚¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ—‹è½¬ä»¥åˆ›å»ºåœ¨ä»»åŠ¡ 2 ä¸­çœ‹åˆ°çš„ç›¸åŒæ ‘ã€‚ç„¶åï¼Œåœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ç¿»è½¬æ‰€æœ‰æ¥è§¦ S çš„è¾¹çš„é¢œè‰²ã€‚è¿™ç›¸å½“äºåœ¨ 2-3 æ ‘ä¸­æ¨åŠ¨ä¸­é—´èŠ‚ç‚¹ä¸Šå‡ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209081940480.png" alt="image-20240209081940480"></p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209082031744.png" alt="image-20240209082031744"></p><p>æ‚¨å¯èƒ½éœ€è¦ç»è¿‡ä¸€ç³»åˆ—æ—‹è½¬æ‰èƒ½å®Œæˆè½¬æ¢ã€‚è¿‡ç¨‹æ˜¯ï¼šåœ¨ LLRB æ ‘ä¸æ»¡è¶³ä¸ 2-3 æ ‘çš„ä¸€ä¸€å¯¹åº”æˆ–ç ´å LLRB ä¸å˜å¼æ—¶ï¼Œæ‰§è¡Œä»»åŠ¡ 1ã€2 æˆ– 3ï¼Œå…·ä½“å–å†³äºæ ‘çš„æ¡ä»¶ï¼Œç›´åˆ°æ‚¨è·å¾—åˆæ³•çš„ LLRBã€‚</p><p><strong>ä»»åŠ¡4ï¼šåˆ†ç¦»ä¸´æ—¶çš„4èŠ‚ç‚¹</strong></p><p>å¦‚æœå­˜åœ¨å…·æœ‰ä¸¤ä¸ªçº¢è‰²å­èŠ‚ç‚¹çš„ä»»ä½•èŠ‚ç‚¹ï¼Œåè½¬é¢œè‰²ã€‚</p><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209082102708.png" alt="image-20240209082102708"></p><p>ä»¥ä¸‹æ˜¯æ‰€æœ‰æ“ä½œçš„æ‘˜è¦ï¼š</p><ul><li>æ’å…¥æ—¶ï¼šä½¿ç”¨çº¢è‰²é“¾æ¥ã€‚</li><li>å¦‚æœå­˜åœ¨å³å€¾çš„â€œ3 èŠ‚ç‚¹â€ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå·¦å€¾è¿ä¾‹<ul><li>æ—‹è½¬é€‚å½“çš„èŠ‚ç‚¹å‘å·¦ä»¥ä¿®å¤ã€‚</li></ul></li><li>å¦‚æœæœ‰ä¸¤ä¸ªè¿ç»­çš„å·¦é“¾æ¥ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸æ­£ç¡®çš„ 4 èŠ‚ç‚¹è¿ä¾‹ï¼<ul><li>æ—‹è½¬é€‚å½“çš„èŠ‚ç‚¹å‘å³ä»¥ä¿®å¤ã€‚</li></ul></li><li>å¦‚æœå­˜åœ¨å…·æœ‰ä¸¤ä¸ªçº¢è‰²å­èŠ‚ç‚¹çš„ä»»ä½•èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªä¸´æ—¶çš„ 4 èŠ‚ç‚¹ã€‚<ul><li>é¢œè‰²ç¿»è½¬èŠ‚ç‚¹ä»¥æ¨¡æ‹Ÿæ‹†åˆ†æ“ä½œã€‚</li></ul></li></ul><h2 id="è¿è¡Œæ—¶"><a href="#è¿è¡Œæ—¶" class="headerlink" title="è¿è¡Œæ—¶"></a>è¿è¡Œæ—¶</h2><p><img src="/2024/02/09/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-14-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd11-%E5%B9%B3%E8%A1%A1%E6%A0%91/image-20240209082331745.png" alt="image-20240209082331745"></p><p>ç”±äºå·¦å€¾çº¢é»‘æ ‘ä¸ 2-3 æ ‘å…·æœ‰ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œå¹¶ä¸”å§‹ç»ˆä¿æŒåœ¨å…¶ 2-3 æ ‘çš„ 2 å€é«˜åº¦ä¹‹å†…ï¼Œæ“ä½œçš„è¿è¡Œæ—¶å°†èŠ±è´¹<code> logN</code> æ—¶é—´ã€‚</p><p>ä»¥ä¸‹æ˜¯æ’å…¥ LLRB çš„æŠ½è±¡ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Node <span class="title function_">put</span><span class="params">(Node h, Key key, Value val)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (h == <span class="literal">null</span>) &#123; <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, val, RED); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> key.compareTo(h.key);</span><br><span class="line">    <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)      &#123; h.left  = put(h.left,  key, val); &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123; h.right = put(h.right, key, val); &#125;</span><br><span class="line">    <span class="keyword">else</span>              &#123; h.val   = val;                    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isRed(h.right) &amp;&amp; !isRed(h.left))      &#123; h = rotateLeft(h);  &#125;</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left)  &amp;&amp;  isRed(h.left.left)) &#123; h = rotateRight(h); &#125;</span><br><span class="line">    <span class="keyword">if</span> (isRed(h.left)  &amp;&amp;  isRed(h.right))     &#123; flipColors(h);      &#125; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>äºŒå‰æœç´¢æ ‘å¾ˆç®€å•ï¼Œä½†æ˜“å—ä¸å¹³è¡¡çš„å½±å“ï¼Œå¯¼è‡´ç³Ÿç³•çš„è¿è¡Œæ—¶ã€‚</li><li>2-3 æ ‘ï¼ˆB æ ‘ï¼‰æ˜¯å¹³è¡¡çš„ï¼Œä½†å®ç°èµ·æ¥ç—›è‹¦ï¼Œè€Œä¸”ç›¸å¯¹è¾ƒæ…¢ã€‚</li><li>LLRB çš„æ’å…¥ç®€å•æ˜“è¡Œï¼ˆä½†åˆ é™¤å›°éš¾ï¼‰ã€‚</li><li>é€šè¿‡ä¸ 2-3 æ ‘ä¿æŒæ•°å­¦åŒå°„æ¥å·¥ä½œã€‚</li><li>Java çš„ <a href="%5BTreeMap%5D(https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/999dbd4192d0f819cb5224f26e9e7fa75ca6f289/src/java.base/share/classes/java/util/TreeMap.java)">TreeMap</a> æ˜¯ä¸€æ£µçº¢é»‘æ ‘ï¼ˆä½†ä¸æ˜¯å·¦å€¾çš„ï¼‰ã€‚</li><li>LLRB ä¸ 2-3 æ ‘ä¿æŒä¸€è‡´ï¼Œæ ‡å‡†çº¢é»‘æ ‘ä¸ 2-3-4 æ ‘ä¿æŒä¸€è‡´ã€‚</li><li>å…è®¸åœ¨ä»»ä¸€ä¾§ä½¿ç”¨ç²˜åˆé“¾æ¥ï¼ˆè¯·å‚é˜…<a href="http://en.wikipedia.org/wiki/Red%E2%80%93black_tree">Red-Black Tree</a>ï¼‰ã€‚</li><li>å®ç°æ›´å¤æ‚ï¼Œä½†é€Ÿåº¦æ˜æ˜¾æ›´å¿«ã€‚</li></ul><blockquote><p>åˆ é™¤è¿‡äºå¤æ‚ï¼Œæš‚ä¸è®¨è®º</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç¬”è®°(äº”)-Lab7-äºŒå‰æŸ¥æ‰¾æ ‘</title>
      <link href="/2024/02/07/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61b%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab7-%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91/"/>
      <url>/2024/02/07/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61b%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab7-%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p><a href="https://sp21.datastructur.es/materials/lab/lab7/lab7">Lab 7: BSTMap | CS 61B Spring 2021 (datastructur.es)</a></p><p><img src="/2024/02/07/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-4-CS61b%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab7-%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91/image-20240207100309645.png" alt="image-20240207100309645"></p><p>åˆ›å»ºä¸€ä¸ª BSTMap ç±»ï¼Œå®ƒä½¿ç”¨ BSTï¼ˆäºŒå‰æœç´¢æ ‘ï¼‰ä½œä¸ºå…¶æ ¸å¿ƒæ•°æ®ç»“æ„æ¥å®ç° Map61B æ¥å£ã€‚æ‚¨å¿…é¡»åœ¨åä¸º <code>BSTMap.java</code> çš„æ–‡ä»¶ä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚æ‚¨çš„å®ç°éœ€è¦å®ç° Map61B ä¸­ç»™å‡ºçš„æ‰€æœ‰æ–¹æ³•ï¼Œä½† <code>remove</code> ã€ <code>iterator</code> å’Œ <code>keySet</code> é™¤å¤–ã€‚å¯¹äºè¿™äº›æ–¹æ³•ï¼Œæ‚¨åº”è¯¥æŠ›å‡ºä¸€ä¸ª <code>UnsupportedOperationException</code> </p><p>åœ¨åˆ›å»º <code>BSTMap</code> ç±»å¹¶å®ç° Map61B çš„æ‰€æœ‰æ–¹æ³•ä¹‹å‰ï¼Œæ‚¨çš„ä»£ç ä¸ä¼šç¼–è¯‘ã€‚æ‚¨å¯ä»¥ä¸€æ¬¡å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œæ–¹æ³•æ˜¯ç¼–å†™æ‰€æœ‰å¿…éœ€æ–¹æ³•çš„æ–¹æ³•ç­¾åï¼Œä½†ä¸ºå®ç°æŠ›å‡º <code>UnsupportedOperationExceptions</code> ï¼Œç›´åˆ°æ‚¨çœŸæ­£å¼€å§‹ç¼–å†™å®ƒä»¬ã€‚</p><p>æ‚¨çš„ <code>BSTMap</code> è¿˜åº”è¯¥æ·»åŠ ä¸€ä¸ªé™„åŠ æ–¹æ³• <code>printInOrder()</code> ï¼ˆMap61B æ¥å£ä¸­æœªç»™å‡ºï¼‰ï¼Œè¯¥æ–¹æ³•æŒ‰ Key é€’å¢çš„é¡ºåºæ‰“å°å‡º BSTMapã€‚æˆ‘ä»¬ä¸ä¼šæµ‹è¯•æ­¤æ–¹æ³•çš„ç»“æœï¼Œä½†æ‚¨ä¼šå‘ç°è¿™å¯¹æµ‹è¯•æ‚¨çš„å®ç°å¾ˆæœ‰å¸®åŠ©ï¼</p><h1 id="èµ„æº"><a href="#èµ„æº" class="headerlink" title="èµ„æº"></a>èµ„æº</h1><ul><li>Lecture 16 <a href="https://docs.google.com/presentation/d/1Bl-PTBfa5sp1vM1l0OSMpK_0JFQ-MT6je4O26-9ffpg/edit#slide=id.g50738e5fde_0_0">slides</a>. è®²åº§ 16 å¹»ç¯ç‰‡ã€‚</li><li>BST ä»£ç æ¥è‡ªæˆ‘ä»¬çš„è¯¾ç¨‹èµ„æºé¡µé¢çš„<a href="http://www-inst.eecs.berkeley.edu/~cs61b/fa14/book2/data-structures.pdf">Data Structures Into Java</a> ç¬¬ 109 å’Œ 111 é¡µã€‚</li><li>æ¥è‡ªæˆ‘ä»¬<a href="https://algs4.cs.princeton.edu/32bst/BST.java.html">our optional textbook</a>.çš„ BST ä»£ç ã€‚</li><li><code>ULLMap.java</code> ï¼ˆå·²æä¾›ï¼‰ï¼Œä¸€ä¸ªåŸºäº Map61B å®ç°çš„å·¥ä½œ<strong>æ— åºé“¾æ¥åˆ—è¡¨ã€‚</strong></li></ul><h1 id="BSTMap"><a href="#BSTMap" class="headerlink" title="BSTMap"></a>BSTMap</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bstmap;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BSTMap</span>&lt;K <span class="keyword">extends</span> <span class="title class_">Comparable</span>&lt;K&gt;, V&gt; <span class="keyword">implements</span> <span class="title class_">Map61B</span>&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Node root;             <span class="comment">// root of BST</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> K key;           <span class="comment">// sorted by key</span></span><br><span class="line">        <span class="keyword">private</span> V val;         <span class="comment">// associated data</span></span><br><span class="line">        <span class="keyword">private</span> Node left, right;  <span class="comment">// left and right subtrees</span></span><br><span class="line">        <span class="keyword">private</span> <span class="type">int</span> size;          <span class="comment">// number of nodes in subtree</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(K key, V val, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.val = val;</span><br><span class="line">            <span class="built_in">this</span>.size = size;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Initializes an empty symbol table.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BSTMap</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        root.size = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//        clear(root);</span></span><br><span class="line">        root = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    private Node clear(Node node) &#123;</span></span><br><span class="line"><span class="comment">//        if (node == null) &#123;</span></span><br><span class="line"><span class="comment">//            return null;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        if (node.left != null) &#123;</span></span><br><span class="line"><span class="comment">//            node.left = clear(node.left);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        if (node.right != null) &#123;</span></span><br><span class="line"><span class="comment">//            node.right = clear(node.right);</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        return null;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> conainsKey(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> <span class="title function_">conainsKey</span><span class="params">(Node n, K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> key.compareTo(n.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> conainsKey(n.right, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> conainsKey(n.left, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> get(root, key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> V <span class="title function_">get</span><span class="params">(Node n, K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> key.compareTo(n.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> get(n.right, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> get(n.left, key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> n.val;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size(root);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">(Node x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="literal">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> x.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">        root = put(root, key, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">put</span><span class="params">(Node node, K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Node</span>(key, value, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> key.compareTo(node.key);</span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            node.right = put(node.right, key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            node.left = put(node.left, key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            node.val = value;</span><br><span class="line">        &#125;</span><br><span class="line">        node.size = <span class="number">1</span> + size(node.right) + size(node.left);</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printInOrder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;K&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;argument to contains() is null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    private class MapIterator implements Iterator&lt;K&gt; &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        /**</span></span><br><span class="line"><span class="comment">//         * Returns &#123;@code true&#125; if the iteration has more elements.</span></span><br><span class="line"><span class="comment">//         * (In other words, returns &#123;@code true&#125; if &#123;@link #next&#125; would</span></span><br><span class="line"><span class="comment">//         * return an element rather than throwing an exception.)</span></span><br><span class="line"><span class="comment">//         *</span></span><br><span class="line"><span class="comment">//         * @return &#123;@code true&#125; if the iteration has more elements</span></span><br><span class="line"><span class="comment">//         */</span></span><br><span class="line"><span class="comment">//        int size = size();</span></span><br><span class="line"><span class="comment">//        MapIterator() &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public boolean hasNext() &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//        /**</span></span><br><span class="line"><span class="comment">//         * Returns the next element in the iteration.</span></span><br><span class="line"><span class="comment">//         *</span></span><br><span class="line"><span class="comment">//         * @return the next element in the iteration</span></span><br><span class="line"><span class="comment">//         */</span></span><br><span class="line"><span class="comment">//        @Override</span></span><br><span class="line"><span class="comment">//        public K next() &#123;</span></span><br><span class="line"><span class="comment">//            return null;</span></span><br><span class="line"><span class="comment">//        &#125;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ULLMap"><a href="#ULLMap" class="headerlink" title="ULLMap"></a>ULLMap</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bstmap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** A data structure that uses a linked list to store pairs of keys and values.</span></span><br><span class="line"><span class="comment"> *  Any key must appear at most once in the dictionary, but values may appear multiple</span></span><br><span class="line"><span class="comment"> *  times. Key operations are get(key), put(key, value), and contains(key) methods. The value</span></span><br><span class="line"><span class="comment"> *  associated to a key is the value in the last call to put with that key. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ULLMap</span>&lt;K, V&gt;  <span class="keyword">implements</span> <span class="title class_">Map61B</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the value corresponding to KEY or null if no such value exists. */</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Entry</span> <span class="variable">lookup</span> <span class="operator">=</span> list.get(key);</span><br><span class="line">        <span class="keyword">if</span> (lookup == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> lookup.val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes all of the mappings from this map. */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        list = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Inserts the key-value pair of KEY and VALUE into this dictionary,</span></span><br><span class="line"><span class="comment">     *  replacing the previous value associated to KEY, if any. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V val)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">Entry</span> <span class="variable">lookup</span> <span class="operator">=</span> list.get(key);</span><br><span class="line">            <span class="keyword">if</span> (lookup == <span class="literal">null</span>) &#123;</span><br><span class="line">                list = <span class="keyword">new</span> <span class="title class_">Entry</span>(key, val, list);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                lookup.val = val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            list = <span class="keyword">new</span> <span class="title class_">Entry</span>(key, val, list);</span><br><span class="line">            size = size + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns true if and only if this dictionary contains KEY as the</span></span><br><span class="line"><span class="comment">     *  key of some key-value pair. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (list == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> list.get(key) != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;K&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ULLMapIter</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Keys and values are stored in a linked list of Entry objects.</span></span><br><span class="line"><span class="comment">     *  This variable stores the first pair in this linked list. */</span></span><br><span class="line">    <span class="keyword">private</span> Entry list;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Represents one node in the linked list that stores the key-value pairs</span></span><br><span class="line"><span class="comment">     *  in the dictionary. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Entry</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** Stores KEY as the key in this key-value pair, VAL as the value, and</span></span><br><span class="line"><span class="comment">         *  NEXT as the next node in the linked list. */</span></span><br><span class="line">        Entry(K k, V v, Entry n) &#123;</span><br><span class="line">            key = k;</span><br><span class="line">            val = v;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** Returns the Entry in this linked list of key-value pairs whose key</span></span><br><span class="line"><span class="comment">         *  is equal to KEY, or null if no such Entry exists. */</span></span><br><span class="line">        Entry <span class="title function_">get</span><span class="params">(K k)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (k != <span class="literal">null</span> &amp;&amp; k.equals(key)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> next.get(key);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** Stores the key of the key-value pair of this node in the list. */</span></span><br><span class="line">        K key;</span><br><span class="line">        <span class="comment">/** Stores the value of the key-value pair of this node in the list. */</span></span><br><span class="line">        V val;</span><br><span class="line">        <span class="comment">/** Stores the next Entry in the linked list. */</span></span><br><span class="line">        Entry next;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** An iterator that iterates over the keys of the dictionary. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ULLMapIter</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;K&gt; &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** Create a new ULLMapIter by setting cur to the first node in the</span></span><br><span class="line"><span class="comment">         *  linked list that stores the key-value pairs. */</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">ULLMapIter</span><span class="params">()</span> &#123;</span><br><span class="line">            cur = list;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> cur != <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> K <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="type">K</span> <span class="variable">ret</span> <span class="operator">=</span> cur.key;</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/** Stores the current key-value pair. */</span></span><br><span class="line">        <span class="keyword">private</span> Entry cur;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">remove</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UnsupportedOperationException</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Map61Bæ¥å£"><a href="#Map61Bæ¥å£" class="headerlink" title="Map61Bæ¥å£"></a>Map61Bæ¥å£</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bstmap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Your implementation BSTMap should implement this interface. To do so,</span></span><br><span class="line"><span class="comment"> * append &quot;implements Map61B&lt;K,V&gt;&quot; to the end of your &quot;public class...&quot;</span></span><br><span class="line"><span class="comment"> * declaration, though you can use other formal type parameters if you&#x27;d like.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Map61B</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">Iterable</span>&lt;K&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes all of the mappings from this map. */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns true if this map contains a mapping for the specified key. */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns the value to which the specified key is mapped, or null if this</span></span><br><span class="line"><span class="comment">     * map contains no mapping for the key.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    V <span class="title function_">get</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns the number of key-value mappings in this map. */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Associates the specified value with the specified key in this map. */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns a Set view of the keys contained in this map. Not required for Lab 7.</span></span><br><span class="line"><span class="comment">     * If you don&#x27;t implement this, throw an UnsupportedOperationException. */</span></span><br><span class="line">    Set&lt;K&gt; <span class="title function_">keySet</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Removes the mapping for the specified key from this map if present.</span></span><br><span class="line"><span class="comment">     * Not required for Lab 7. If you don&#x27;t implement this, throw an</span></span><br><span class="line"><span class="comment">     * UnsupportedOperationException. */</span></span><br><span class="line">    V <span class="title function_">remove</span><span class="params">(K key)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Removes the entry for the specified key only if it is currently mapped to</span></span><br><span class="line"><span class="comment">     * the specified value. Not required for Lab 7. If you don&#x27;t implement this,</span></span><br><span class="line"><span class="comment">     * throw an UnsupportedOperationException.*/</span></span><br><span class="line">    V <span class="title function_">remove</span><span class="params">(K key, V value)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åä¸‰)-Rd10-ADPã€æ ‘</title>
      <link href="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/"/>
      <url>/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<p>Slides:<a href="https://docs.google.com/presentation/d/1Bl-PTBfa5sp1vM1l0OSMpK_0JFQ-MT6je4O26-9ffpg/edit#slide=id.g50738e5fde_0_6">cs61b 2020 lec16 ds2 adts, sets, maps, binary search trees - Google å¹»ç¯ç‰‡</a></p><p>Reading:<a href="https://joshhug.gitbooks.io/hug61b/content/chap10/chap102.html">10.2 Trees Â· Hug61B (gitbooks.io)</a></p><h1 id="ADTs"><a href="#ADTs" class="headerlink" title="ADTs"></a>ADTs</h1><iframe frameborder="0" allowfullscreen src="https://www.youtube.com/embed/aFOSePlOExw" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-size: inherit; border: none; top: 0px; left: 0px; width: 770px; height: 458.125px;"></iframe><p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ä»…é€šè¿‡å…¶æ“ä½œè¿›è¡Œå®šä¹‰ï¼Œè€Œä¸æ˜¯é€šè¿‡å…¶å®ç°ã€‚</p><blockquote><p>è¿™æ„å‘³ç€ADTå®šä¹‰äº†ä¸€ç»„æ“ä½œæˆ–è¡Œä¸ºï¼Œè€Œä¸æ¶‰åŠå…·ä½“çš„å®ç°ç»†èŠ‚ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œåœ¨proj1aä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª<code>ArrayDeque</code>å’Œä¸€ä¸ª<code>LinkedListDeque</code>ï¼Œå®ƒä»¬å…·æœ‰<strong>ç›¸åŒçš„æ–¹æ³•</strong>ï¼Œä½†è¿™äº›æ–¹æ³•çš„ç¼–å†™æ–¹å¼éå¸¸ä¸åŒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¯´<code>ArrayDeque</code>å’Œ<code>LinkedListDeque</code>æ˜¯Deque ADTçš„<em>å®ç°</em>ã€‚ä»è¿™ä¸ªæè¿°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºADTå’Œæ¥å£åœ¨æŸç§ç¨‹åº¦ä¸Šæ˜¯ç›¸å…³çš„ã€‚</p><blockquote><p>ADTå¼ºè°ƒçš„æ˜¯æ•°æ®å’Œæ“ä½œçš„æŠ½è±¡æè¿°ï¼Œè€Œæ¥å£å¼ºè°ƒçš„æ˜¯è¡Œä¸ºå’Œæ“ä½œçš„è§„èŒƒå®šä¹‰ã€‚</p></blockquote><p>åœ¨æ¦‚å¿µä¸Šï¼ŒDequeæ˜¯ä¸€ä¸ªæ¥å£ï¼Œ<code>ArrayDeque</code>å’Œ<code>LinkedListDeque</code>æ˜¯å…¶å®ç°ã€‚åœ¨ä»£ç ä¸­ï¼Œä¸ºäº†è¡¨è¾¾è¿™ç§å…³ç³»ï¼Œæˆ‘ä»¬è®©<code>ArrayDeque</code>å’Œ<code>LinkedListDeque</code>ç±»ä»Dequeæ¥å£ç»§æ‰¿ã€‚</p><p>ä¸€äº›å¸¸ç”¨çš„ADTåŒ…æ‹¬ï¼š</p><ul><li><p>æ ˆ(Stack)ï¼šæ”¯æŒåè¿›å…ˆå‡ºæ£€ç´¢å…ƒç´ çš„ç»“æ„</p><ul><li><code>push(int x)</code>: å°†xæ”¾åœ¨æ ˆé¡¶</li><li><code>int pop()</code>: å–å‡ºæ ˆé¡¶å…ƒç´ </li></ul></li><li><p>åˆ—è¡¨(List)</p><p>: ä¸€ç»„æœ‰åºçš„å…ƒç´ </p><ul><li><code>add(int i)</code>: æ·»åŠ ä¸€ä¸ªå…ƒç´ </li><li><code>int get(int i)</code>: è·å–ç´¢å¼•ä¸ºiçš„å…ƒç´ </li></ul></li><li><p>é›†åˆ(Set)</p><p>: ä¸€ç»„æ— åºçš„å”¯ä¸€å…ƒç´ ï¼ˆä¸é‡å¤ï¼‰</p><ul><li><code>add(int i)</code>: æ·»åŠ ä¸€ä¸ªå…ƒç´ </li><li><code>contains(int i)</code>: è¿”å›é›†åˆä¸­æ˜¯å¦åŒ…å«è¯¥å€¼çš„å¸ƒå°”å€¼</li></ul></li><li><p>æ˜ å°„(Map)</p><p>: ä¸€ç»„é”®&#x2F;å€¼å¯¹</p><ul><li><code>put(K key, V value)</code>: å°†ä¸€ä¸ªé”®å€¼å¯¹æ”¾å…¥æ˜ å°„</li><li><code>V get(K key)</code>: è·å–ä¸é”®å¯¹åº”çš„å€¼</li></ul></li></ul><p><strong>åŠ ç²—çš„ADTæ˜¯ä¸€ä¸ªåä¸º<code>Collections</code>çš„æ›´å¤§çš„æ€»ä½“æ¥å£çš„å­æ¥å£</strong></p><p>ä¸‹é¢æˆ‘ä»¬å±•ç¤ºæ¥å£å’Œç±»ä¹‹é—´çš„å…³ç³»ã€‚æ¥å£ä¸ºç™½è‰²ï¼Œç±»ä¸ºè“è‰²ã€‚</p><p>ADTä½¿æˆ‘ä»¬èƒ½å¤Ÿä»¥é«˜æ•ˆè€Œä¼˜é›…çš„æ–¹å¼åˆ©ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚æ‚¨åœ¨proj1bä¸­çœ‹åˆ°äº†æˆ‘ä»¬å¦‚ä½•äº¤æ¢<code>OffByOne</code>å’Œ<code>OffByN</code>æ¯”è¾ƒå™¨ï¼Œå› ä¸ºå®ƒä»¬éƒ½å®ç°äº†ç›¸åŒçš„æ¥å£ï¼åŒæ ·ï¼Œæ‚¨å¯ä»¥äº¤æ›¿ä½¿ç”¨ArrayDequeæˆ–LinkedListArrayDequeï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯Deque ADTçš„ä¸€éƒ¨åˆ†ã€‚</p><p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†è‡´åŠ›äºå®šä¹‰ä¸€äº›æ›´å¤šçš„ADTå¹¶åˆ—ä¸¾å®ƒä»¬çš„ä¸åŒå®ç°ã€‚</p><h1 id="äºŒå‰æŸ¥æ‰¾æ ‘"><a href="#äºŒå‰æŸ¥æ‰¾æ ‘" class="headerlink" title="äºŒå‰æŸ¥æ‰¾æ ‘"></a>äºŒå‰æŸ¥æ‰¾æ ‘</h1><p>ç°åœ¨æˆ‘ä»¬è¦å­¦ä¹ å¯èƒ½æ˜¯æœ‰å²ä»¥æ¥æœ€é‡è¦çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚</p><iframe width="475" height="292" src="https://www.youtube.com/embed/AcRKQOe0zYg" title="[ADTs, Sets, Maps, BSTs, Video 2] - Inventing the BST" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>é“¾è¡¨å¾ˆæ£’ï¼Œä½†æ˜¯æŸ¥æ‰¾é¡¹éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå³ä½¿åˆ—è¡¨æ˜¯æ’åºçš„ï¼å¦‚æœé¡¹ç›®åœ¨åˆ—è¡¨çš„æœ«å°¾æ€ä¹ˆåŠï¼Ÿé‚£å°†èŠ±è´¹çº¿æ€§æ—¶é—´ï¼çœ‹ä¸€ä¸‹ä¸‹é¢çš„é“¾è¡¨ï¼Œå¹¶è®©è‡ªå·±ç›¸ä¿¡è¿™æ˜¯çœŸçš„ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095104937.png" alt="image-20240207095104937"></p><blockquote><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095200910.png" alt="image-20240207095200910"></p><p><a href="https://en.wikipedia.org/wiki/Skip_list">è·³è¿‡åˆ—è¡¨ - ç»´åŸºç™¾ç§‘ â€” Skip list - Wikipedia</a></p></blockquote><p>æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥æ›´å¿«åœ°æ‰¾åˆ°å…ƒç´ ã€‚å…·ä½“åœ°è¯´ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯<code>log(*n*)</code>ã€‚å…³äºäºŒåˆ†æŸ¥æ‰¾çš„ç®€çŸ­è§£é‡Šï¼Œè¯·æŸ¥çœ‹æ­¤<a href="https://www.geeksforgeeks.org/binary-search/">é“¾æ¥</a>ã€‚</p><p>TL;DRï¼šåœ¨äºŒåˆ†æŸ¥æ‰¾ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“åˆ—è¡¨æ˜¯æ’åºçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ä¿¡æ¯æ¥ç¼©å°æœç´¢èŒƒå›´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æŸ¥çœ‹ä¸­é—´å…ƒç´ ã€‚å¦‚æœå®ƒå¤§äºæˆ‘ä»¬è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™å‘å·¦æŸ¥æ‰¾ã€‚å¦‚æœå®ƒå°äºæˆ‘ä»¬è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™å‘å³æŸ¥æ‰¾ã€‚ç„¶åï¼Œæˆ‘ä»¬æŸ¥çœ‹å„è‡ªä¸€åŠçš„ä¸­é—´å…ƒç´ ï¼Œå¹¶é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°æ‰¾åˆ°æˆ‘ä»¬è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼ˆæˆ–å› ä¸ºåˆ—è¡¨ä¸åŒ…å«å®ƒè€Œæ‰¾ä¸åˆ°ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•åœ¨é“¾è¡¨ä¸­è¿è¡ŒäºŒåˆ†æŸ¥æ‰¾å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦éå†åˆ°ä¸­é—´ä½ç½®æ‰èƒ½æ£€æŸ¥é‚£é‡Œçš„å…ƒç´ ï¼Œè¿™æœ¬èº«å°±éœ€è¦çº¿æ€§æ—¶é—´ï¼</p><p>æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ç§ä¼˜åŒ–ï¼Œå³å…·æœ‰å¯¹ä¸­é—´èŠ‚ç‚¹çš„å¼•ç”¨ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…åˆ°è¾¾ä¸­é—´ä½ç½®ã€‚ç„¶åï¼Œå¦‚æœæˆ‘ä»¬ç¿»è½¬èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™æ ·å°±å¯ä»¥éå†åˆ°å·¦å³ä¸¤åŠï¼Œä»è€Œå°†è¿è¡Œæ—¶é—´å‡åŠï¼</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095039828.png" alt="image-20240207095039828"></p><p>ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åƒä¸‹é¢è¿™æ ·åœ¨æ¯ä¸ªé€’å½’åŠéƒ¨åˆ†çš„ä¸­é—´æ·»åŠ æŒ‡é’ˆæ¥è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095020256.png" alt="image-20240207095020256"></p><p>ç°åœ¨ï¼Œå¦‚æœä½ å‚ç›´æ‹‰ä¼¸è¿™ä¸ªç»“æ„ï¼Œä½ ä¼šçœ‹åˆ°ä¸€æ£µæ ‘ï¼</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095026028.png" alt="image-20240207095026028"></p><p>è¿™æ£µå…·ä½“çš„æ ‘ç§°ä¸º<strong>äºŒå‰æ ‘</strong>ï¼Œå› ä¸ºæ¯ä¸ªäº¤å‰ç‚¹åˆ†ä¸ºä¸¤ä¸ªã€‚</p><h3 id="æ ‘çš„å±æ€§"><a href="#æ ‘çš„å±æ€§" class="headerlink" title="æ ‘çš„å±æ€§"></a>æ ‘çš„å±æ€§</h3><p>è®©æˆ‘ä»¬æ›´åŠ æ­£å¼åœ°å®šä¹‰æ ‘æ•°æ®ç»“æ„ã€‚</p><iframe width="770" height="458" src="https://www.youtube.com/embed/slOxliXDV-s" title="[ADTs, Sets, Maps, BSTs, Video 3] - BST Definitions" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>æ ‘ç”±ä»¥ä¸‹ç»„æˆï¼š</p><ul><li>èŠ‚ç‚¹</li><li>å°†è¿™äº›èŠ‚ç‚¹è¿æ¥èµ·æ¥çš„è¾¹ã€‚<ul><li><strong>çº¦æŸ</strong>ï¼šä»»ä½•ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´åªæœ‰ä¸€æ¡è·¯å¾„ã€‚</li></ul></li></ul><p>åœ¨æŸäº›æ ‘ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ª<strong>æ ¹</strong>èŠ‚ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p>æ ‘è¿˜æœ‰<strong>å¶å­èŠ‚ç‚¹</strong>ï¼Œå®ƒä»¬æ˜¯æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚</p><p>ä¸‹é¢çš„ç»“æ„æ˜¯æœ‰æ•ˆçš„æ ‘ï¼š<img src="https://joshhug.gitbooks.io/hug61b/content/assets/Screen%20Shot%202019-02-28%20at%209.25.43%20AM.png" alt="img"></p><p><strong>ç»ƒä¹  10.2.1ï¼š</strong>ä½ èƒ½æƒ³å‡ºä¸€ä¸ªéæœ‰æ•ˆçš„æ ‘çš„ä¾‹å­å—ï¼Ÿ</p><p>å°†è¿™ä¸æˆ‘ä»¬ä¹‹å‰æå‡ºçš„åŸå§‹æ ‘ç»“æ„è”ç³»èµ·æ¥ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å¯¹å·²æœ‰çš„çº¦æŸå¼•å…¥æ–°çš„çº¦æŸã€‚è¿™åˆ›å»ºäº†æ›´å…·ä½“çš„æ ‘ç±»å‹ï¼Œå…¶ä¸­ä¸¤ä¸ªç¤ºä¾‹æ˜¯äºŒå‰æ ‘å’ŒäºŒå‰æœç´¢æ ‘ã€‚</p><ul><li><strong>äºŒå‰æ ‘</strong>ï¼šé™¤äº†ä¸Šè¿°è¦æ±‚å¤–ï¼Œè¿˜æ»¡è¶³äºŒè¿›åˆ¶å±æ€§çº¦æŸã€‚å³æ¯ä¸ªèŠ‚ç‚¹åªæœ‰0ã€1æˆ–2ä¸ªå­èŠ‚ç‚¹ã€‚</li><li><strong>äºŒå‰æœç´¢æ ‘</strong>ï¼šé™¤äº†æ‰€æœ‰ä¸Šè¿°è¦æ±‚å¤–ï¼Œè¿˜å…·æœ‰ä»¥ä¸‹å±æ€§ï¼šå¯¹äºæ ‘ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹Xï¼š<ul><li>å·¦å­æ ‘ä¸­çš„æ¯ä¸ªé”®éƒ½å°äºXçš„é”®ã€‚</li><li>å³å­æ ‘ä¸­çš„æ¯ä¸ªé”®éƒ½å¤§äºXçš„é”®ã€‚<strong>è®°ä½è¿™ä¸ªå±æ€§ï¼ï¼</strong>æˆ‘ä»¬åœ¨æœ¬æ¨¡å—å’Œ61Bçš„æ•´ä¸ªæŒç»­æ—¶é—´ä¸­å°†å¼•ç”¨å®ƒå¾ˆå¤šæ¬¡ã€‚</li></ul></li></ul><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095307884.png" alt="image-20240207095307884"></p><blockquote><p>æ»¡è¶³å¯¹ç§°æ€§å’Œä¼ é€’æ€§</p></blockquote><p>è¿™æ˜¯æˆ‘ä»¬åœ¨æœ¬æ¨¡å—ä¸­å°†ä½¿ç”¨çš„BSTç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">BST</span>&lt;Key&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> BST left;</span><br><span class="line">    <span class="keyword">private</span> BST right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BST</span><span class="params">(Key key, BST left, BST Right)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">        <span class="built_in">this</span>.left = left;</span><br><span class="line">        <span class="built_in">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BST</span><span class="params">(Key key)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äºŒå‰æœç´¢æ ‘æ“ä½œ"><a href="#äºŒå‰æœç´¢æ ‘æ“ä½œ" class="headerlink" title="äºŒå‰æœç´¢æ ‘æ“ä½œ"></a>äºŒå‰æœç´¢æ ‘æ“ä½œ</h2><iframe width="770" height="458" src="https://www.youtube.com/embed/PLyDf3_J7Cc" title="[ADTs, Sets, Maps, BSTs, Video 4] - BST Search" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>è¦æœç´¢æŸä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ç”±äºå‰ä¸€èŠ‚ä¸­æè¿°çš„BSTå±æ€§çš„ä¾¿åˆ©ï¼</p><p>æˆ‘ä»¬çŸ¥é“BSTè¢«æ„é€ å¾—ä½¿å¾—èŠ‚ç‚¹çš„å³ä¾§æ‰€æœ‰å…ƒç´ éƒ½å¤§äºèŠ‚ç‚¹ï¼Œå¹¶ä¸”å·¦ä¾§æ‰€æœ‰å…ƒç´ éƒ½å°äºèŠ‚ç‚¹ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œå°†å…¶ä¸æˆ‘ä»¬æ­£åœ¨æŸ¥æ‰¾çš„å…ƒç´ Xè¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœXå¤§äºæ ¹ï¼Œåˆ™æˆ‘ä»¬è½¬å‘æ ¹çš„å³å­èŠ‚ç‚¹ã€‚å¦‚æœXå°äºæ ¹ï¼Œåˆ™æˆ‘ä»¬è½¬å‘æ ¹çš„å·¦å­èŠ‚ç‚¹ã€‚æˆ‘ä»¬é€’å½’åœ°é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æˆ‘ä»¬æ‰¾åˆ°é¡¹ç›®æˆ–è€…æˆ‘ä»¬åˆ°è¾¾ä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ ‘ä¸åŒ…å«è¯¥é¡¹ç›®ã€‚</p><p><strong>ç»ƒä¹  10.2.2ï¼š</strong>å°è¯•è‡ªå·±ç¼–å†™æ­¤æ–¹æ³•ã€‚è¿™æ˜¯æ–¹æ³•å¤´ï¼š<code>static BST find(BST T, Key key)</code>ã€‚å®ƒåº”è¿”å›ä»¥ä¸é”®å‚æ•°åŒ¹é…çš„é”®æ ¹èŠ‚ç‚¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> BST <span class="title function_">find</span><span class="params">(BST T, Key sk)</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   <span class="keyword">if</span> (sk.equals(T.key))</span><br><span class="line">      <span class="keyword">return</span> T;</span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">if</span> (sk â‰º T.key)</span><br><span class="line">      <span class="keyword">return</span> find(T.left, sk);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> find(T.right, sk);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬çš„æ ‘ç›¸å¯¹â€œèŒ‚å¯†â€ï¼Œé‚£ä¹ˆfindæ“ä½œå°†åœ¨log(ï¿½)log(<em>n</em>)æ—¶é—´å†…è¿è¡Œï¼Œå› ä¸ºæ ‘çš„é«˜åº¦æ˜¯lognï¼Œè¿™ç›¸å½“å¿«ï¼</p><h3 id="æ’å…¥"><a href="#æ’å…¥" class="headerlink" title="æ’å…¥"></a>æ’å…¥</h3><iframe width="770" height="458" src="https://www.youtube.com/embed/otDvoMb8UqE" title="[ADTs, Sets, Maps, BSTs, Video 5] - BST Insert" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>æˆ‘ä»¬<strong>æ€»æ˜¯</strong>åœ¨å¶å­èŠ‚ç‚¹æ’å…¥ï¼</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨æ ‘ä¸­æœç´¢èŠ‚ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æ‰¾åˆ°å®ƒï¼Œåˆ™ä¸åšä»»ä½•æ“ä½œã€‚å¦‚æœæˆ‘ä»¬æ‰¾ä¸åˆ°å®ƒï¼Œåˆ™æˆ‘ä»¬å·²ç»åœ¨å¶å­èŠ‚ç‚¹ä¸Šã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€å°†æ–°å…ƒç´ æ·»åŠ åˆ°å¶å­çš„å·¦ä¾§æˆ–å³ä¾§ï¼Œä¿æŒBSTå±æ€§ä¸å˜ã€‚</p><p><strong>ç»ƒä¹  10.2.3ï¼š</strong>å°è¯•è‡ªå·±ç¼–å†™æ­¤æ–¹æ³•ã€‚è¿™æ˜¯æ–¹æ³•å¤´ï¼š<code>static BST insert(BST T, Key ik)</code>ã€‚å®ƒåº”è¿”å›æ’å…¥äº†æ­£ç¡®ä½ç½®çš„æ–°èŠ‚ç‚¹çš„å®Œæ•´BSTã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> BST <span class="title function_">insert</span><span class="params">(BST T, Key ik)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (T == <span class="literal">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BST</span>(ik);</span><br><span class="line">  <span class="keyword">if</span> (ik â‰º T.key)</span><br><span class="line">    T.left = insert(T.left, ik);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (ik â‰» T.key)</span><br><span class="line">    T.right = insert(T.right, ik);</span><br><span class="line">  <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç»ƒä¹  10.2.4ï¼š</strong>æƒ³å‡ºä¸€ç§æ’å…¥é¡ºåºï¼Œä¼šå¯¼è‡´æ ‘çš„é«˜åº¦ä¸åŒã€‚å°è¯•æ‰¾åˆ°æ ‘é«˜åº¦çš„ä¸¤ç§æç«¯æƒ…å†µã€‚æç¤ºï¼šæ‚¨çš„ç¬¬ä¸€ä¸ªæ’å…¥å°†å†³å®šéšåæ’å…¥çš„è¡Œä¸ºã€‚</p><h3 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h3><iframe width="770" height="458" src="https://www.youtube.com/embed/vPzB6svl4rc" title="[ADTs, Sets, Maps, BSTs, Video 6] - BST Deletion" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>ä»äºŒå‰æ ‘ä¸­åˆ é™¤èŠ‚ç‚¹ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºæ¯å½“æˆ‘ä»¬åˆ é™¤æ—¶ï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç¡®ä¿é‡æ„æ ‘å¹¶ä»ç„¶ä¿æŒå…¶BSTå±æ€§ã€‚</p><p>è®©æˆ‘ä»¬å°†æ­¤é—®é¢˜åˆ†ä¸ºä¸‰ä¸ªç±»åˆ«ï¼š</p><ul><li>æˆ‘ä»¬å°è¯•åˆ é™¤çš„èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹</li><li>æœ‰ä¸€ä¸ªå­èŠ‚ç‚¹</li><li>æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</li></ul><h4 id="æ²¡æœ‰å­èŠ‚ç‚¹"><a href="#æ²¡æœ‰å­èŠ‚ç‚¹" class="headerlink" title="æ²¡æœ‰å­èŠ‚ç‚¹"></a>æ²¡æœ‰å­èŠ‚ç‚¹</h4><p>å¦‚æœèŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å®ƒæ˜¯ä¸€ä¸ªå¶å­ï¼Œæˆ‘ä»¬å¯ä»¥åªåˆ é™¤å…¶çˆ¶èŠ‚ç‚¹æŒ‡é’ˆï¼ŒèŠ‚ç‚¹æœ€ç»ˆä¼šè¢«<a href="https://stackoverflow.com/questions/3798424/what-is-the-garbage-collector-in-java">åƒåœ¾å›æ”¶å™¨</a>æ¸…é™¤ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095555283.png" alt="image-20240207095555283"></p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095604465.png" alt="image-20240207095604465"></p><h4 id="ä¸€ä¸ªå­èŠ‚ç‚¹"><a href="#ä¸€ä¸ªå­èŠ‚ç‚¹" class="headerlink" title="ä¸€ä¸ªå­èŠ‚ç‚¹"></a>ä¸€ä¸ªå­èŠ‚ç‚¹</h4><p>å¦‚æœèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥å­èŠ‚ç‚¹ä¸èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¿æŒBSTå±æ€§ï¼Œå› ä¸ºè¯¥å±æ€§å¯¹å³å’Œå·¦å­æ ‘æ˜¯é€’å½’çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€é‡æ–°åˆ†é…çˆ¶èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æŒ‡é’ˆåˆ°èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æœ€ç»ˆå°†è¢«åƒåœ¾å›æ”¶ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095614371.png" alt="image-20240207095614371"></p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095632829.png" alt="image-20240207095632829"></p><h4 id="ä¸¤ä¸ªå­èŠ‚ç‚¹"><a href="#ä¸¤ä¸ªå­èŠ‚ç‚¹" class="headerlink" title="ä¸¤ä¸ªå­èŠ‚ç‚¹"></a>ä¸¤ä¸ªå­èŠ‚ç‚¹</h4><p>å¦‚æœèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œåˆ™è¯¥è¿‡ç¨‹å˜å¾—ç¨å¾®å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½ç®€å•åœ°å°†ä¸€ä¸ªå­èŠ‚ç‚¹æŒ‡å®šä¸ºæ–°æ ¹ã€‚è¿™å¯èƒ½ä¼šç ´åBSTå±æ€§ã€‚</p><p>ç›¸åï¼Œæˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªæ–°èŠ‚ç‚¹æ¥æ›¿æ¢åˆ é™¤çš„èŠ‚ç‚¹ã€‚</p><p>æˆ‘ä»¬çŸ¥é“æ–°èŠ‚ç‚¹å¿…é¡»ï¼š</p><ul><li>å¤§äºå·¦å­æ ‘ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</li><li>å°äºå³å­æ ‘ä¸­çš„æ‰€æœ‰å†…å®¹ã€‚</li></ul><p>åœ¨ä¸‹é¢çš„æ ‘ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å“ªäº›èŠ‚ç‚¹å°†æ»¡è¶³è¿™äº›è¦æ±‚ï¼Œå‡è®¾æˆ‘ä»¬è¦åˆ é™¤<code>dog</code>èŠ‚ç‚¹ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095730453.png" alt="image-20240207095730453"></p><p>è¦æ‰¾åˆ°è¿™äº›èŠ‚ç‚¹ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å·¦å­æ ‘ä¸­çš„æœ€å³èŠ‚ç‚¹æˆ–å³å­æ ‘ä¸­çš„æœ€å·¦èŠ‚ç‚¹ã€‚</p><p>ç„¶åï¼Œæˆ‘ä»¬ç”¨<code>cat</code>æˆ–<code>elf</code>æ›¿æ¢<code>dog</code>èŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤æ—§çš„<code>cat</code>æˆ–<code>elf</code>èŠ‚ç‚¹ã€‚</p><p>è¿™ç§°ä¸º<strong>Hibbardåˆ é™¤</strong>ï¼Œåœ¨åˆ é™¤ä¸­ä¿æŒäº†BSTå±æ€§ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095803817.png" alt="image-20240207095803817"></p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095812382.png" alt="image-20240207095812382"></p><blockquote><p>è‹¥å°†æ ‘é‡æ–°æ‹‰ç›´ï¼Œkå·¦å³ä¸¤è¾¹å°†ä¼šæ˜¯gå’Œmï¼Œæˆ‘ä»¬åªéœ€è¦å°†å…¶ä¸­ä¸€ä¸ªæ›¿æ¢æ‰kï¼Œé‚£ä¹ˆå°±èƒ½å®ç°åˆ é™¤çš„åŒæ—¶ä¿æŒæ ‘çš„ç‰¹æ€§ï¼</p></blockquote><h2 id="ä½œä¸ºé›†åˆå’Œæ˜ å°„çš„BST"><a href="#ä½œä¸ºé›†åˆå’Œæ˜ å°„çš„BST" class="headerlink" title="ä½œä¸ºé›†åˆå’Œæ˜ å°„çš„BST"></a>ä½œä¸ºé›†åˆå’Œæ˜ å°„çš„BST</h2><iframe width="770" height="458" src="https://www.youtube.com/embed/sL2p1slgUMg" title="[ADTs, Sets, Maps, BSTs, Video 7] - Sets vs Maps, Summary, Tips for Lab" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨BSTæ¥å®ç°<code>Set</code> ADTï¼ä½†æ˜¯å®ƒæ›´å¥½ï¼Œå› ä¸ºåœ¨<code>ArraySet</code>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœ€åçš„æƒ…å†µä¸‹<code>O*(*n*)</code>æ—¶é—´æ¥è¿è¡Œ<code>contains</code>ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦æœç´¢æ•´ä¸ªé›†åˆã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨BSTï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤è¿è¡Œæ—¶é—´å‡å°‘åˆ°log(<em>n</em>)&#96;ï¼Œå› ä¸ºBSTå±æ€§ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼</p><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿æ¯ä¸ªBSTèŠ‚ç‚¹ä¿å­˜<code>(key,value)</code>å¯¹è€Œä¸æ˜¯å•ä¸ªå€¼æ¥å°†äºŒå‰æ ‘è½¬æ¢ä¸ºæ˜ å°„ã€‚æˆ‘ä»¬å°†æ¯”è¾ƒæ¯ä¸ªå…ƒç´ çš„é”®ä»¥ç¡®å®šåœ¨æ ‘ä¸­çš„ä½ç½®ã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTsï¼‰æ˜¯æ ¹æ®æ“ä½œè€Œä¸æ˜¯å®ç°æ¥å®šä¹‰çš„ã€‚</p><p>å‡ ç§æœ‰ç”¨çš„ADTï¼š</p><ul><li>ä¸ç›¸äº¤é›†ã€æ˜ å°„ã€é›†åˆã€åˆ—è¡¨ã€‚</li><li>Javaæä¾›äº†æ˜ å°„ã€é›†åˆã€åˆ—è¡¨æ¥å£ï¼Œä»¥åŠå‡ ç§å®ç°ã€‚</li></ul><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å®ç°Setï¼ˆæˆ–Mapï¼‰çš„ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li>ArraySetï¼šåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œéœ€è¦<code>Î˜(*N*)</code>çš„æ“ä½œã€‚</li><li>BSTï¼šå¦‚æœæ ‘æ˜¯å¹³è¡¡çš„ï¼Œåˆ™éœ€è¦Î˜(log<em>N</em>)&#96;çš„æ“ä½œã€‚</li></ul><p>BSTå®ç°ï¼š</p><ul><li>æœç´¢å’Œæ’å…¥éƒ½å¾ˆç®€å•ï¼ˆä½†æ’å…¥æœ‰ç‚¹æ£˜æ‰‹ï¼‰ã€‚</li><li>åˆ é™¤æ›´å…·æŒ‘æˆ˜æ€§ã€‚å…¸å‹çš„æ–¹æ³•æ˜¯â€œHibbardåˆ é™¤â€ã€‚</li></ul><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-13-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd10-ADP%E3%80%81%E6%A0%91/image-20240207095946155.png" alt="image-20240207095946155"></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åäºŒ)-Rd8.9-ä¸ç›¸äº¤é›†</title>
      <link href="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/"/>
      <url>/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<p>slide:<a href="https://docs.google.com/presentation/d/1I9Jzt95GvxRqwGMzN7DSEIREKhMZ0qEUzPyWLl6CU5g/edit#slide=id.g5347e2c8f_210">cs61b 2020 lec14 ds1 disjoint sets - Google å¹»ç¯ç‰‡</a></p><p>Reading:<a href="https://joshhug.gitbooks.io/hug61b/content/chap9/chap91.html">9.1 Introduction Â· Hug61B (gitbooks.io)</a></p><p>code:<a href="https://algs4.cs.princeton.edu/15uf/">Case Study: Union-Find (princeton.edu)</a></p><h1 id="Disjoint-Setsç®€ä»‹"><a href="#Disjoint-Setsç®€ä»‹" class="headerlink" title="Disjoint Setsç®€ä»‹"></a>Disjoint Setsç®€ä»‹</h1><p>å¦‚æœä¸¤ä¸ªé›†åˆæ²¡æœ‰å…±åŒå…ƒç´ ï¼Œåˆ™ç§°å®ƒä»¬ä¸º<em>ä¸ç›¸äº¤é›†åˆ</em>ã€‚ä¸€ä¸ªä¸ç›¸äº¤é›†åˆï¼ˆæˆ–è€…ç§°ä¸ºå¹¶æŸ¥é›†ï¼‰æ•°æ®ç»“æ„ç”¨äºè¿½è¸ªå›ºå®šæ•°é‡çš„å…ƒç´ ï¼Œè¿™äº›å…ƒç´ è¢«åˆ’åˆ†ä¸ºå¤šä¸ª<em>ä¸ç›¸äº¤é›†åˆ</em>ã€‚è¯¥æ•°æ®ç»“æ„å…·æœ‰ä¸¤ä¸ªæ“ä½œï¼š</p><ol><li><code>connect(x, y)</code>: è¿æ¥ <code>x</code> å’Œ <code>y</code>ã€‚ä¹Ÿç§°ä¸º <code>union</code>ã€‚</li><li><code>isConnected(x, y)</code>: å¦‚æœ <code>x</code> å’Œ <code>y</code> è¿æ¥ï¼ˆå³å±äºåŒä¸€é›†åˆï¼‰ï¼Œåˆ™è¿”å›trueã€‚</li></ol><p>ä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„æœ‰ä¸€å®šæ•°é‡çš„å…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ æœ€åˆéƒ½ä½äºè‡ªå·±çš„å­é›†ä¸­ã€‚é€šè¿‡å¯¹æŸäº›å…ƒç´  <code>x</code> å’Œ <code>y</code> è°ƒç”¨ <code>connect(x, y)</code>ï¼Œæˆ‘ä»¬å¯ä»¥å°†å­é›†åˆå¹¶åœ¨ä¸€èµ·ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰å››ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸º Aã€Bã€Cã€Dã€‚åˆå§‹æ—¶ï¼Œæ¯ä¸ªå…ƒç´ éƒ½åœ¨è‡ªå·±çš„é›†åˆä¸­ï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/intro1_resized.png" alt="img"></p><p>è°ƒç”¨ <code>connect(A, B)</code> åï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/intro2_resized.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œå­é›† A å’Œ B è¢«åˆå¹¶ã€‚è®©æˆ‘ä»¬æ¥æ£€æŸ¥ä¸€äº› <code>isConnected</code> è°ƒç”¨çš„è¾“å‡ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CodeisConnected(A, B) -&gt; <span class="literal">true</span></span><br><span class="line"><span class="title function_">isConnected</span><span class="params">(A, C)</span> -&gt; <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>è°ƒç”¨ <code>connect(A, D)</code> åï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/intro3_resized.png" alt="img"></p><p>æˆ‘ä»¬æ‰¾åˆ°äº† A æ‰€å±çš„é›†åˆï¼Œå¹¶å°†å…¶ä¸ D æ‰€å±çš„é›†åˆåˆå¹¶ï¼Œå½¢æˆäº†ä¸€ä¸ªå¤§çš„ Aã€Bã€D é›†åˆã€‚C ä¿æŒä¸å˜ã€‚ <code>isConnected(A, D) -&gt; true</code> <code>isConnected(A, C) -&gt; false</code></p><p>æœ‰äº†è¿™ä¸ªç›´è§‚ç†è§£ï¼Œè®©æˆ‘ä»¬æ­£å¼å®šä¹‰ä¸€ä¸‹æˆ‘ä»¬çš„ä¸ç›¸äº¤é›†åˆæ¥å£æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚ä½œä¸ºæé†’ï¼Œä¸€ä¸ª <strong>æ¥å£</strong> ç¡®å®šäº†ä¸€ä¸ªæ•°æ®ç»“æ„åº”è¯¥å…·æœ‰çš„è¡Œä¸ºï¼ˆä½†ä¸åŒ…æ‹¬å®ç°æ–¹æ³•ï¼‰ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªå¤„ç†éè´Ÿæ•´æ•°é›†åˆã€‚è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé™åˆ¶ï¼Œå› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬æƒ³è¦è¡¨ç¤ºçš„ä»»ä½•å†…å®¹åˆ†é…æ•´æ•°å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line">    <span class="comment">/** è¿æ¥ä¸¤ä¸ªé¡¹ç›® P å’Œ Q */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** æ£€æŸ¥ä¸¤ä¸ªé¡¹ç›®æ˜¯å¦è¿æ¥ */</span></span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†å­¦ä¹ å¦‚ä½•å®ç°ä¸€ä¸ªè¿·äººçš„æ•°æ®ç»“æ„ä¹‹å¤–ï¼Œè¿™ä¸€ç« è¿˜å°†æ˜¯ä¸€ä¸ªäº†è§£æ•°æ®ç»“æ„å®ç°å¦‚ä½•æ¼”å˜çš„æœºä¼šã€‚æˆ‘ä»¬å°†è®¨è®ºå››ä¸ªä¸ç›¸äº¤é›†åˆè®¾è®¡çš„è¿­ä»£è¿‡ç¨‹ï¼š<em>Quick Find â†’ Quick Union â†’ Weighted Quick Union (WQU) â†’ WQU with Path Compression</em>ã€‚<strong>æˆ‘ä»¬å°†çœ‹åˆ°è®¾è®¡å†³ç­–å¦‚ä½•æå¤§åœ°å½±å“æ¸è¿‘è¿è¡Œæ—¶é—´å’Œä»£ç å¤æ‚åº¦ã€‚</strong></p><h1 id="å¿«é€ŸæŸ¥æ‰¾Quick-Find"><a href="#å¿«é€ŸæŸ¥æ‰¾Quick-Find" class="headerlink" title="å¿«é€ŸæŸ¥æ‰¾Quick Find"></a>å¿«é€ŸæŸ¥æ‰¾Quick Find</h1><iframe width="770" height="458" src="https://www.youtube.com/embed/W6Dckcv8PIo" title="[Disjoint Sets, Video 2] - Quick Find" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>ç°åœ¨æˆ‘ä»¬æ¥è§£å†³å¦‚ä½•å®ç°æˆ‘ä»¬çš„ <code>DisjointSets</code> æ¥å£æ‰€éœ€çš„è¡Œä¸ºã€‚æˆ‘ä»¬çš„æŒ‘æˆ˜æ˜¯è·Ÿè¸ªé›†åˆæˆå‘˜å…³ç³»ã€‚</p><h2 id="é›†åˆåˆ—è¡¨"><a href="#é›†åˆåˆ—è¡¨" class="headerlink" title="é›†åˆåˆ—è¡¨"></a>é›†åˆåˆ—è¡¨</h2><p>ç›´è§‚åœ°ï¼Œæˆ‘ä»¬å¯èƒ½é¦–å…ˆè€ƒè™‘å°†ä¸ç›¸äº¤é›†åˆè¡¨ç¤ºä¸ºä¸€ä¸ªé›†åˆåˆ—è¡¨ï¼Œä¾‹å¦‚ <code>List&lt;Set&lt;Integer&gt;&gt;</code>ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ N&#x3D;6 ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰è¿æ¥ä»»ä½•å…ƒç´ ï¼Œæˆ‘ä»¬çš„é›†åˆåˆ—è¡¨çœ‹èµ·æ¥åƒï¼š<code>[&#123;0&#125;, &#123;1&#125;, &#123;2&#125;, &#123;3&#125;, &#123;4&#125;, &#123;5&#125;, &#123;6&#125;]</code>ã€‚çœ‹èµ·æ¥ä¸é”™ã€‚ç„¶è€Œï¼Œè€ƒè™‘å¦‚ä½•å®Œæˆåƒ <code>connect(5, 6)</code> è¿™æ ·çš„æ“ä½œã€‚æˆ‘ä»¬å°†ä¸å¾—ä¸éå†å¤šè¾¾ <code>N</code> ä¸ªé›†åˆæ¥æ‰¾åˆ°5ï¼Œä»¥åŠå¤šè¾¾ <code>N</code> ä¸ªé›†åˆæ¥æ‰¾åˆ°6ã€‚æˆ‘ä»¬çš„è¿è¡Œæ—¶é—´å˜ä¸º <code>O(N)</code>ã€‚è€Œä¸”ï¼Œå¦‚æœä½ è¯•å›¾å®ç°è¿™ä¸ªï¼Œä»£ç ä¼šéå¸¸å¤æ‚ã€‚</p><blockquote><p>è¦è®°ä½çš„æ•™è®­æ˜¯ <strong>åˆå§‹è®¾è®¡å†³ç­–å†³å®šäº†æˆ‘ä»¬çš„ä»£ç å¤æ‚åº¦å’Œè¿è¡Œæ—¶é—´ã€‚</strong></p></blockquote><h2 id="å¿«é€ŸæŸ¥æ‰¾"><a href="#å¿«é€ŸæŸ¥æ‰¾" class="headerlink" title="å¿«é€ŸæŸ¥æ‰¾"></a>å¿«é€ŸæŸ¥æ‰¾</h2><p>è®©æˆ‘ä»¬è€ƒè™‘å¦ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨ä¸€ä¸ª <em>æ•´æ•°æ•°ç»„</em>ã€‚</p><ul><li>æ•°ç»„çš„<strong>ç´¢å¼•</strong>è¡¨ç¤ºæˆ‘ä»¬é›†åˆçš„å…ƒç´ ã€‚</li><li>ç´¢å¼•å¤„çš„<strong>å€¼</strong>æ˜¯å®ƒæ‰€å±çš„é›†åˆç¼–å·ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°† <code>&#123;0, 1, 2, 4&#125;, &#123;3, 5&#125;, &#123;6&#125;</code> è¡¨ç¤ºä¸ºï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.2.1-1707267489271-11.png" alt="img"></p><p>æ•°ç»„ç´¢å¼•ï¼ˆ0â€¦6ï¼‰æ˜¯å…ƒç´ ã€‚<code>id[i]</code> å¤„çš„å€¼æ˜¯å®ƒæ‰€å±çš„é›†åˆã€‚<em>å…·ä½“çš„é›†åˆç¼–å·å¹¶ä¸é‡è¦ï¼Œåªè¦åŒä¸€é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ å…±äº«ç›¸åŒçš„idã€‚</em></p><h3 id="connect-x-y"><a href="#connect-x-y" class="headerlink" title="connect(x, y)"></a><code>connect(x, y)</code></h3><p>è®©æˆ‘ä»¬çœ‹çœ‹è¿æ¥æ“ä½œå¦‚ä½•å·¥ä½œã€‚å½“å‰ï¼Œ<code>id[2] = 4</code> å’Œ <code>id[3] = 5</code>ã€‚è°ƒç”¨ <code>connect(2, 3)</code> åï¼Œæ‰€æœ‰idä¸º4å’Œ5çš„å…ƒç´ åº”è¯¥å…·æœ‰ç›¸åŒçš„idã€‚ç°åœ¨æš‚æ—¶å°†å®ƒä»¬å…¨éƒ¨èµ‹å€¼ä¸º5ï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.2.2-1707267498002-14.png" alt="img"></p><h3 id="isConnected-x-y"><a href="#isConnected-x-y" class="headerlink" title="isConnected(x, y)"></a><code>isConnected(x, y)</code></h3><p>è¦æ£€æŸ¥ <code>isConnected(x, y)</code>ï¼Œæˆ‘ä»¬åªéœ€æ£€æŸ¥ <code>id[x] == id[y]</code>ã€‚è¯·æ³¨æ„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸æ•°æ—¶é—´æ“ä½œï¼</p><p>æˆ‘ä»¬å°†æ­¤å®ç°ç§°ä¸º â€œå¿«é€ŸæŸ¥æ‰¾â€ï¼Œå› ä¸ºæŸ¥æ‰¾å…ƒç´ æ˜¯å¦ç›¸è¿éœ€è¦å¸¸æ•°æ—¶é—´ã€‚</p><h3 id="æ€»ç»“å’Œä»£ç "><a href="#æ€»ç»“å’Œä»£ç " class="headerlink" title="æ€»ç»“å’Œä»£ç "></a>æ€»ç»“å’Œä»£ç </h3><table><thead><tr><th>å®ç°æ–¹å¼</th><th>æ„é€ å‡½æ•°</th><th><code>connect</code></th><th><code>isConnected</code></th></tr></thead><tbody><tr><td>é›†åˆåˆ—è¡¨</td><td>Î˜(N)</td><td>O(N)</td><td>O(N)</td></tr><tr><td>å¿«é€ŸæŸ¥æ‰¾</td><td>Î˜(N)</td><td>Î˜(N)</td><td>Î˜(1)</td></tr></tbody></table><p>N &#x3D; ä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ æ•°é‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickFindDS</span> <span class="keyword">implements</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] id;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Î˜(N) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickFindDS</span><span class="params">(<span class="type">int</span> N)</span>&#123;</span><br><span class="line">        id = <span class="keyword">new</span> <span class="title class_">int</span>[N];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++)&#123;</span><br><span class="line">            id[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* éœ€è¦éå†æ•°ç»„ =&gt; Î˜(N) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pid</span> <span class="operator">=</span> id[p];</span><br><span class="line">        <span class="type">int</span> <span class="variable">qid</span> <span class="operator">=</span> id[q];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; id.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (id[i] == pid)&#123;</span><br><span class="line">                id[i] = qid;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Î˜(1) */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (id[p] == id[q]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å¿«é€Ÿåˆå¹¶Quick-Union"><a href="#å¿«é€Ÿåˆå¹¶Quick-Union" class="headerlink" title="å¿«é€Ÿåˆå¹¶Quick Union"></a>å¿«é€Ÿåˆå¹¶Quick Union</h1><iframe width="770" height="458" src="https://www.youtube.com/embed/RY7UCusguGg" title="[Disjoint Sets, Video 3] - Quick Union" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>å‡è®¾æˆ‘ä»¬ä¼˜å…ˆè€ƒè™‘ä½¿ <code>connect</code> æ“ä½œå¿«é€Ÿã€‚æˆ‘ä»¬ä»ç„¶å°†ä½¿ç”¨æ•°ç»„æ¥è¡¨ç¤ºæˆ‘ä»¬çš„é›†åˆã€‚ä½†æ˜¯ï¼Œä¸å…¶ä½¿ç”¨ä¸€ä¸ªidï¼Œæˆ‘ä»¬å°†æ¯ä¸ªé¡¹ç›®åˆ†é…ç»™å…¶çˆ¶é¡¹çš„ç´¢å¼•ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®æ²¡æœ‰çˆ¶é¡¹ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª â€˜æ ¹â€™ï¼Œæˆ‘ä»¬ä¸ºå…¶åˆ†é…ä¸€ä¸ªè´Ÿå€¼ã€‚</p><p>è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æ¯ä¸ªé›†åˆæƒ³è±¡æˆä¸€æ£µæ ‘ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°† <code>&#123;0, 1, 2, 4&#125;, &#123;3, 5&#125;, &#123;6&#125;</code> è¡¨ç¤ºä¸ºï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.3.1-1707267897651-23.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>åªæœ‰ä¸€ä¸ªæ•°ç»„</strong>æ¥è¡¨ç¤ºé›†åˆã€‚æˆ‘ä»¬è‡ªå·±å°†å…¶è§†ä¸ºæ ‘ã€‚</p><p>å¯¹äºå¿«é€Ÿåˆå¹¶ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>find(int item)</code>ï¼Œå®ƒè¿”å›é¡¹ç›®æ‰€åœ¨æ ‘çš„æ ¹ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸Šé¢çš„é›†åˆï¼Œ<code>find(4) == 0</code>ï¼Œ<code>find(1) == 0</code>ï¼Œ<code>find(5) == 3</code> ç­‰ã€‚æ¯ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ¹ã€‚</p><h2 id="connect-x-y-1"><a href="#connect-x-y-1" class="headerlink" title="connect(x, y)"></a><code>connect(x, y)</code></h2><p>è¦è¿æ¥ä¸¤ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬æ‰¾åˆ°æ¯ä¸ªé¡¹ç›®æ‰€å±çš„é›†åˆï¼ˆå®ƒä»¬å„è‡ªæ ‘çš„æ ¹ï¼‰ï¼Œå¹¶å°†å…¶ä¸­ä¸€ä¸ªä½œä¸ºå¦ä¸€ä¸ªçš„å­é¡¹ã€‚ä¾‹å¦‚ï¼š</p><p><code>connect(5, 2)</code>ï¼š</p><ol><li><code>find(5)</code> -&gt; 3</li><li><code>find(2)</code> -&gt; 0</li><li>è®¾ç½® <code>find(5)</code> çš„å€¼ä¸º <code>find(2)</code>ï¼Œä¹Ÿå°±æ˜¯ <code>parent[3] = 0</code></li></ol><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.3.2-1707267923567-26.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œå…ƒç´ 3ç°åœ¨æŒ‡å‘å…ƒç´ 0ï¼Œå°†ä¸¤æ£µæ ‘&#x2F;é›†åˆåˆå¹¶ä¸ºä¸€æ£µæ ‘ã€‚</p><p>åœ¨æœ€ä½³æƒ…å†µä¸‹ï¼Œå¦‚æœ <code>x</code> å’Œ <code>y</code> éƒ½æ˜¯å®ƒä»¬æ ‘çš„æ ¹ï¼Œé‚£ä¹ˆ <code>connect(x, y)</code> å°±ä¼šç®€å•åœ°ä½¿ <code>x</code> æŒ‡å‘ <code>y</code>ï¼Œè¿™æ˜¯ä¸€ä¸ª Î˜(1) çš„æ“ä½œï¼ï¼ˆå› æ­¤ç§°ä¸ºå¿«é€Ÿåˆå¹¶ï¼‰</p><h2 id="isConnected-x-y-1"><a href="#isConnected-x-y-1" class="headerlink" title="isConnected(x, y)"></a><code>isConnected(x, y)</code></h2><p>å¦‚æœä¸¤ä¸ªå…ƒç´ å±äºåŒä¸€ä¸ªé›†åˆï¼Œé‚£ä¹ˆå®ƒä»¬å°†åœ¨åŒä¸€æ£µæ ‘ä¸­ã€‚å› æ­¤ï¼Œå®ƒä»¬å°†å…·æœ‰ç›¸åŒçš„æ ¹ã€‚å› æ­¤å¯¹äº <code>isConnected(x, y)</code>ï¼Œæˆ‘ä»¬åªéœ€æ£€æŸ¥ <code>find(x) == find(y)</code>ã€‚</p><h3 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h3><p>å¿«é€Ÿåˆå¹¶å­˜åœ¨æ½œåœ¨çš„æ€§èƒ½é—®é¢˜ï¼šæ ‘å¯èƒ½å˜å¾—éå¸¸é•¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰¾åˆ°ä¸€ä¸ªé¡¹ç›®çš„æ ¹ (<code>find(item)</code>) å°±å˜å¾—éå¸¸æ˜‚è´µã€‚è€ƒè™‘ä¸‹é¢çš„æ ‘ï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.3.3.png" alt="9.3.3"></p><p>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»éå†æ‰€æœ‰é¡¹ç›®æ‰èƒ½åˆ°è¾¾æ ¹ï¼Œè¿™æ˜¯ä¸€ä¸ª Î˜(N) çš„è¿è¡Œæ—¶é—´ã€‚ç”±äºæˆ‘ä»¬å¿…é¡»å¯¹ <code>connect</code> å’Œ <code>isConnected</code> éƒ½è°ƒç”¨ <code>find</code>ï¼Œæ‰€ä»¥å®ƒä»¬çš„è¿è¡Œæ—¶é—´éƒ½ç”± O(N) ä¸Šé™çº¦æŸã€‚</p><h3 id="æ€»ç»“å’Œä»£ç -1"><a href="#æ€»ç»“å’Œä»£ç -1" class="headerlink" title="æ€»ç»“å’Œä»£ç "></a>æ€»ç»“å’Œä»£ç </h3><table><thead><tr><th>å®ç°æ–¹å¼</th><th>æ„é€ å‡½æ•°</th><th><code>connect</code></th><th><code>isConnected</code></th></tr></thead><tbody><tr><td>é›†åˆåˆ—è¡¨</td><td>Î˜(N)</td><td>O(N)</td><td>O(N)</td></tr><tr><td>å¿«é€Ÿåˆå¹¶</td><td>Î˜(N)</td><td>O(N)</td><td>O(N)</td></tr><tr><td>å¿«é€ŸæŸ¥æ‰¾</td><td>Î˜(N)</td><td>Î˜(N)</td><td>Î˜(1)</td></tr></tbody></table><p>N &#x3D; ä¸ç›¸äº¤é›†åˆæ•°æ®ç»“æ„ä¸­çš„å…ƒç´ æ•°é‡</p><p>ä»è¿è¡Œæ—¶é—´è¡¨ä¸­ï¼Œå¿«é€Ÿåˆå¹¶ä¼¼ä¹æ¯”å¿«é€ŸæŸ¥æ‰¾æ›´å·®ï¼ä½†è¯·æ³¨æ„ï¼ŒO(N) æ˜¯ä¸€ä¸ª <strong>ä¸Šé™</strong>ã€‚å½“æˆ‘ä»¬çš„æ ‘æ˜¯å¹³è¡¡çš„æ—¶å€™ï¼Œ<code>connect</code> å’Œ <code>isConnected</code> éƒ½è¡¨ç°å¾—ç›¸å½“å¥½ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½• <em>ä¿è¯</em> å®ƒä»¬çš„æ€§èƒ½è‰¯å¥½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickUnionDS</span> <span class="keyword">implements</span> <span class="title class_">DisjointSets</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] parent;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">QuickUnionDS</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        parent = <span class="keyword">new</span> <span class="title class_">int</span>[num];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">            parent[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> p)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (parent[p] &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            p = parent[p];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">connect</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> find(p);</span><br><span class="line">        <span class="type">int</span> j= find(q);</span><br><span class="line">        parent[i] = j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isConnected</span><span class="params">(<span class="type">int</span> p, <span class="type">int</span> q)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> find(p) == find(q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="åŠ æƒå¿«é€Ÿè”åˆWeighted-Quick-Uion-WQU"><a href="#åŠ æƒå¿«é€Ÿè”åˆWeighted-Quick-Uion-WQU" class="headerlink" title="åŠ æƒå¿«é€Ÿè”åˆWeighted Quick Uion(WQU)"></a>åŠ æƒå¿«é€Ÿè”åˆWeighted Quick Uion(WQU)</h1><p>Quick Union çš„æ”¹è¿›ä¾èµ–äºä¸€ä¸ªå…³é”®çš„è§è§£ï¼šæ¯å½“æˆ‘ä»¬è°ƒç”¨ <code>find</code> æ—¶ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»çˆ¬åˆ°æ ‘çš„æ ¹éƒ¨ã€‚å› æ­¤ï¼Œæ ‘è¶ŠçŸ­ï¼Œé€Ÿåº¦å°±è¶Šå¿«ï¼</p><p><strong>æ–°è§„åˆ™</strong>ï¼šæ¯å½“æˆ‘ä»¬è°ƒç”¨ <code>connect</code> æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯å°†<strong>è¾ƒå°æ ‘çš„æ ¹</strong>é“¾æ¥åˆ°<strong>è¾ƒå¤§æ ‘</strong>ã€‚</p><p>éµå¾ªæ­¤è§„åˆ™å°†ä¸ºæ‚¨çš„æ ‘æä¾›æœ€å¤§é«˜åº¦ <code>logN</code> ï¼Œå…¶ä¸­ N æ˜¯ä¸ç›¸äº¤é›†ä¸­çš„å…ƒç´ æ•°é‡ã€‚è¿™å¦‚ä½•å½±å“ <code>connect</code> å’Œ <code>isConnected</code> çš„è¿è¡Œæ—¶ï¼Ÿ</p><iframe frameborder="0" allowfullscreen src="https://www.youtube.com/embed/xc9s9wdaSdU" style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; text-size-adjust: none; -webkit-font-smoothing: antialiased; font-size: inherit; border: none; top: 0px; left: 0px; width: 770px; height: 458.125px;"></iframe><p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™æ ·åšçš„å¥½å¤„ã€‚è€ƒè™‘è¿æ¥ä¸‹é¢ä¸¤ç»„ T1 å’Œ T2ï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.4.1.png" alt="img"></p><p>æˆ‘ä»¬æœ‰ä¸¤ç§è¿æ¥å®ƒä»¬çš„é€‰é¡¹ï¼š</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/9.4.2.png" alt="img"> ç¬¬ä¸€ä¸ªé€‰é¡¹æˆ‘ä»¬å°† T1 é“¾æ¥åˆ° T2ã€‚åœ¨ç¬¬äºŒä¸ªä¸­ï¼Œæˆ‘ä»¬å°† T2 é“¾æ¥åˆ° T1ã€‚</p><p><strong>ç¬¬äºŒä¸ªé€‰é¡¹æ›´å¯å–</strong>ï¼Œå› ä¸ºå®ƒçš„é«˜åº¦åªæœ‰ 2ï¼Œè€Œä¸æ˜¯ 3ã€‚æ ¹æ®æˆ‘ä»¬çš„æ–°è§„åˆ™ï¼Œæˆ‘ä»¬ä¹Ÿä¼šé€‰æ‹©ç¬¬äºŒä¸ªé€‰é¡¹ï¼Œå› ä¸º T2 å°äº T1ï¼ˆå°ºå¯¸ä¸º 3 ä¸ 6ï¼‰ã€‚</p><p>æˆ‘ä»¬æ ¹æ®æ ‘ä¸­çš„é¡¹ç›®æ•°é‡æ¥ç¡®å®šæ›´å°&#x2F;æ›´å¤§ã€‚å› æ­¤ï¼Œå½“è¿æ¥ä¸¤æ£µæ ‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“å®ƒä»¬çš„å¤§å°ï¼ˆæˆ–é‡é‡ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨ <code>-(size of tree)</code> æ›¿æ¢ <code>-1</code> æ¥å°†æ­¤ä¿¡æ¯å­˜å‚¨åœ¨æ ‘çš„æ ¹ä¸­ã€‚æ‚¨å°†åœ¨<a href="https://sp19.datastructur.es/materials/lab/lab6/lab6">Lab 6</a>ä¸­å®ç°è¿™ä¸€ç‚¹ã€‚</p><h2 id="æœ€å¤§é«˜åº¦ï¼šLog-N"><a href="#æœ€å¤§é«˜åº¦ï¼šLog-N" class="headerlink" title="æœ€å¤§é«˜åº¦ï¼šLog N"></a>æœ€å¤§é«˜åº¦ï¼šLog N</h2><p>éµå¾ªä¸Šè¿°è§„åˆ™å¯ç¡®ä¿ä»»ä½•æ ‘çš„æœ€å¤§é«˜åº¦ä¸º Î¸(log N)ã€‚ N æ˜¯ä¸ç›¸äº¤é›†ä¸­çš„å…ƒç´ æ•°é‡ã€‚<strong>é€šè¿‡æ‰©å±•ï¼Œ <code>connect</code> å’Œ <code>isConnected</code> çš„è¿è¡Œæ—¶é—´ä»¥ O(log N) ä¸ºç•Œã€‚</strong></p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/image-20240207091146331.png" alt="image-20240207091146331"></p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/image-20240207091744666.png" alt="image-20240207091744666"></p><p>æ‚¨å¯èƒ½æƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æ ¹æ®é«˜åº¦è€Œæ˜¯é‡é‡æ¥é“¾æ¥æ ‘æœ¨ã€‚äº‹å®è¯æ˜ï¼Œè¿™å®ç°èµ·æ¥æ›´å¤æ‚ï¼Œå¹¶ä¸”ç»™äº†æˆ‘ä»¬ç›¸åŒçš„ Î¸(log N) é«˜åº¦é™åˆ¶ã€‚</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/image-20240207091815565.png" alt="image-20240207091815565"></p><h2 id="æ€»ç»“å’Œä»£ç -2"><a href="#æ€»ç»“å’Œä»£ç -2" class="headerlink" title="æ€»ç»“å’Œä»£ç "></a>æ€»ç»“å’Œä»£ç </h2><table><thead><tr><th>Implementation</th><th>Constructor</th><th><code>connect</code></th><th><code>isConnected</code></th></tr></thead><tbody><tr><td>ListOfSets</td><td>Î˜(N)</td><td>O(N)</td><td>O(N)</td></tr><tr><td>QuickFind</td><td>Î˜(N)</td><td>Î˜(N)</td><td>Î˜(1)</td></tr><tr><td>QuickUnion</td><td>Î˜(N)</td><td>O(N)</td><td>O(N)</td></tr><tr><td>Weighted Quick Union</td><td>Î˜(N)</td><td>O(log N)</td><td>O(log N)</td></tr></tbody></table><p>N &#x3D; number of elements in our DisjointSets data structure</p><p>ä»£ç :<a href="https://sp19.datastructur.es/materials/lab/lab6/lab6">Lab 6</a>ä¸­å®ç° or <a href="https://algs4.cs.princeton.edu/15uf/WeightedQuickUnionUF.java.html">WeightedQuickUnionUF.java (princeton.edu)</a></p><h1 id="å¸¦è·¯å¾„å‹ç¼©çš„åŠ æƒå¿«é€Ÿè”åˆWQU-with-Path-Compression"><a href="#å¸¦è·¯å¾„å‹ç¼©çš„åŠ æƒå¿«é€Ÿè”åˆWQU-with-Path-Compression" class="headerlink" title="å¸¦è·¯å¾„å‹ç¼©çš„åŠ æƒå¿«é€Ÿè”åˆWQU with Path Compression"></a>å¸¦è·¯å¾„å‹ç¼©çš„åŠ æƒå¿«é€Ÿè”åˆWQU with Path Compression</h1><iframe width="770" height="458" src="https://www.youtube.com/embed/DZKzDebT4gU" title="[Disjoint Sets, Video 5] - Weighted Quick Union with Path Compression and Summary" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe><p>æ¯å½“æˆ‘ä»¬è°ƒç”¨ <code>find(x)</code> æ—¶ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»éå†ä» <code>x</code> åˆ° root çš„è·¯å¾„ã€‚å› æ­¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬è®¿é—®çš„æ‰€æœ‰é¡¹ç›®è¿æ¥åˆ°å®ƒä»¬çš„æ ¹ï¼Œè€Œæ— éœ€é¢å¤–çš„æ¸è¿‘æˆæœ¬ã€‚</p><p>å°†æ²¿é€”çš„æ‰€æœ‰é¡¹ç›®è¿æ¥åˆ°æ ¹å°†æœ‰åŠ©äºæ¯æ¬¡è°ƒç”¨ <code>find</code> æ—¶ä½¿æˆ‘ä»¬çš„æ ‘æ›´çŸ­ã€‚</p><p>å›æƒ³ä¸€ä¸‹ï¼Œ <code>connect(x, y)</code> å’Œ <code>isConnected(x, y)</code> æ€»æ˜¯è°ƒç”¨ <code>find(x)</code> å’Œ <code>find(y)</code> ã€‚å› æ­¤ï¼Œåœ¨è¶³å¤Ÿå¤šåœ°è°ƒç”¨ <code>connect</code> æˆ– <code>isConnected</code> ä¹‹åï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰å…ƒç´ éƒ½å°†ç›´æ¥æŒ‡å‘å®ƒä»¬çš„æ ¹ã€‚</p><p>é€šè¿‡æ‰©å±•ï¼Œ <code>connect</code> å’Œ <code>isConnected</code> çš„å¹³å‡è¿è¡Œæ—¶é—´ä»é•¿è¿œæ¥çœ‹å‡ ä¹ä¿æŒä¸å˜ï¼è¿™ç§°ä¸ºæ‘Šé”€è¿è¡Œæ—¶é—´ï¼ˆæ¥è‡ªæ‘Šé”€åˆ†æï¼Œç¬¬ 8.4 ç« ï¼‰ã€‚</p><p>æ›´å…·ä½“åœ°è¯´ï¼Œå¯¹äº N ä¸ªå…ƒç´ ä¸Šçš„ M æ¬¡æ“ä½œï¼Œå…·æœ‰è·¯å¾„å‹ç¼©çš„ WQU ä¸º <code>O(N + M (lg* N))</code>ã€‚ <code>lg* </code>æ˜¯è¿­ä»£å¯¹æ•°ï¼Œå¯¹äºä»»ä½•ç°å®ä¸–ç•Œçš„è¾“å…¥éƒ½å°äº 5ã€‚</p><blockquote><p><code>lg*</code>:</p><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/image-20240207091913787.png" alt="image-20240207091913787"></p></blockquote><h3 id="æ¦‚æ‹¬"><a href="#æ¦‚æ‹¬" class="headerlink" title="æ¦‚æ‹¬"></a>æ¦‚æ‹¬</h3><p>Nï¼šä¸ç›¸äº¤é›†ä¸­çš„å…ƒç´ æ•°é‡</p><table><thead><tr><th>æ‰§è¡Œ</th><th><code>isConnected</code></th><th><code>connect</code></th></tr></thead><tbody><tr><td>å¿«é€ŸæŸ¥æ‰¾</td><td>Î˜(N)</td><td>Î˜(1)</td></tr><tr><td>å¿«è”</td><td>O(N)</td><td>O(N)</td></tr><tr><td>åŠ æƒå¿«é€Ÿè”åˆ (WQU)</td><td>O(log N)</td><td>O(log N)</td></tr><tr><td>å¸¦è·¯å¾„å‹ç¼©çš„ WQU</td><td>O(Î±(N))*</td><td>O(Î±(N))*</td></tr></tbody></table><p>*é•¿æœŸè¡¨ç°ç¨³å®šã€‚</p><p>ä»£ç :<a href="https://algs4.cs.princeton.edu/15uf/WeightedQuickUnionPathCompressionUF.java.html">WeightedQuickUnionPathCompressionUF.java (princeton.edu)</a></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><img src="/2024/02/07/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-12-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-9-%E4%B8%8D%E7%9B%B8%E4%BA%A4%E9%9B%86/image-20240207091954317.png" alt="image-20240207091954317"></p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(åä¸€)-Rd8.1-å°è£…ã€APIã€ADT</title>
      <link href="/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-1/"/>
      <url>/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-1/</url>
      
        <content type="html"><![CDATA[<h1 id="é«˜æ•ˆç¼–ç¨‹"><a href="#é«˜æ•ˆç¼–ç¨‹" class="headerlink" title="é«˜æ•ˆç¼–ç¨‹"></a>é«˜æ•ˆç¼–ç¨‹</h1><p>æ•ˆç‡æœ‰ä¸¤ç§å½¢å¼ï¼š</p><p>1.ï¼‰ ç¼–ç¨‹æˆæœ¬ã€‚</p><ul><li>å¼€å‘æ‚¨çš„ç¨‹åºéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ</li><li>è¯»å–ã€ä¿®æ”¹å’Œç»´æŠ¤ä»£ç çš„éš¾æ˜“ç¨‹åº¦å¦‚ä½•ï¼Ÿ</li></ul><p>2.ï¼‰ æ‰§è¡Œæˆæœ¬ï¼ˆä»ä¸‹å‘¨å¼€å§‹ï¼‰ã€‚</p><ul><li>æ‚¨çš„ç¨‹åºéœ€è¦å¤šå°‘æ—¶é—´æ‰èƒ½æ‰§è¡Œï¼Ÿ</li><li>æ‚¨çš„ç¨‹åºéœ€è¦å¤šå°‘å†…å­˜ï¼Ÿ</li></ul><p>61B ä¸­è®¨è®ºäº†ä¸€äº›æœ‰ç”¨çš„ Java ç‰¹æ€§ï¼š</p><ul><li>åŒ…ï¼ˆPackagesï¼‰<ul><li>ä¼˜ç‚¹ï¼šç»„ç»‡ï¼Œä½¿äº‹ç‰©æˆä¸ºåŒ…ç§æœ‰ã€‚</li><li>ç¼ºç‚¹ï¼šè¿‡äºå…·ä½“ã€‚</li></ul></li><li>é™æ€ç±»å‹æ£€æŸ¥ï¼ˆStatic type checkingï¼‰ã€‚<ul><li>ä¼˜ç‚¹ï¼šæ—©æœŸæ£€æŸ¥é”™è¯¯ï¼Œæ›´åƒæ˜¯ä¸€ç¯‡æ•…äº‹ã€‚</li><li>ç¼ºç‚¹ï¼šä¸å¤Ÿçµæ´»ï¼Œï¼ˆå¼ºåˆ¶è½¬æ¢ç­‰ï¼‰</li></ul></li><li>ç»§æ‰¿ï¼ˆInheritanceï¼‰<ul><li>ä¼˜ç‚¹ï¼šä»£ç é‡ç”¨ã€‚</li><li>ç¼ºç‚¹ï¼š â€œIs aâ€ï¼Œï¼Œè°ƒè¯•è·¯å¾„å˜å¾—çƒ¦äººï¼Œä¸èƒ½å®ä¾‹åŒ–ï¼Œè¦å®ç°æ¥å£çš„æ¯ä¸ªæ–¹æ³•ã€‚</li></ul></li></ul><h1 id="å°è£…"><a href="#å°è£…" class="headerlink" title="å°è£…"></a>å°è£…</h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€äº›æœ¯è¯­ï¼š</p><ul><li><p><strong>æ¨¡å—</strong>ï¼šä¸€ç»„æ–¹æ³•ï¼Œä½œä¸ºæ•´ä½“ä¸€èµ·æ‰§è¡ŒæŸä¸ªä»»åŠ¡æˆ–ä¸€ç»„ç›¸å…³ä»»åŠ¡ã€‚ </p></li><li><p><strong>å°è£…çš„</strong>ï¼šå¦‚æœæ¨¡å—çš„å®ç°å®Œå…¨éšè—ï¼Œåªèƒ½é€šè¿‡æ–‡æ¡£åŒ–çš„æ¥å£è®¿é—®ï¼Œåˆ™ç§°å…¶ä¸ºå°è£…çš„ã€‚</p></li></ul><h1 id="APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰"><a href="#APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰" class="headerlink" title="APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰"></a>APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰</h1><p>ADTï¼ˆæŠ½è±¡æ•°æ®ç»“æ„ï¼‰çš„APIæ˜¯æ„é€ å‡½æ•°å’Œæ–¹æ³•åˆ—è¡¨ä»¥åŠæ¯ä¸ªæ–¹æ³•çš„ç®€çŸ­æè¿°ã€‚</p><p>APIç”±è¯­æ³•å’Œè¯­ä¹‰è§„èŒƒç»„æˆã€‚</p><ul><li>ç¼–è¯‘å™¨éªŒè¯æ˜¯å¦ç¬¦åˆè¯­æ³•ã€‚ <ul><li>ä¹Ÿå°±æ˜¯è¯´ï¼ŒAPIä¸­æŒ‡å®šçš„ä¸€åˆ‡éƒ½å­˜åœ¨ã€‚</li></ul></li><li>æµ‹è¯•æœ‰åŠ©äºéªŒè¯è¯­ä¹‰æ˜¯å¦æ­£ç¡®ã€‚ <ul><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€åˆ‡éƒ½æŒ‰ç…§åº”è¯¥çš„æ–¹å¼å·¥ä½œã€‚ </li><li>è¯­ä¹‰è§„èŒƒé€šå¸¸ç”¨è‹±è¯­ç¼–å†™ï¼ˆå¯èƒ½åŒ…æ‹¬ä½¿ç”¨ç¤ºä¾‹ï¼‰ã€‚æ•°å­¦ä¸Šç²¾ç¡®çš„å½¢å¼è§„èŒƒåœ¨æŸç§ç¨‹åº¦ä¸Šå¯èƒ½å­˜åœ¨ï¼Œä½†å¹¶ä¸æ™®éã€‚</li></ul></li></ul><h1 id="ADT"><a href="#ADT" class="headerlink" title="ADT"></a>ADT</h1><p>ADTï¼ˆæŠ½è±¡æ•°æ®ç»“æ„ï¼‰æ˜¯æ ¹æ®å…¶è¡Œä¸ºè€Œä¸æ˜¯å®ç°å®šä¹‰çš„é«˜çº§ç±»å‹ã€‚</p><p>å³ï¼‰Proj1ä¸­çš„Dequeæ˜¯ä¸€ä¸ªå…·æœ‰ç‰¹å®šè¡Œä¸ºï¼ˆ<code>addFirst</code>ã€<code>addLast</code>ç­‰ï¼‰çš„ADTã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å®é™…ä½¿ç”¨çš„æ•°æ®ç»“æ„æ˜¯<code>ArrayDeque</code>å’Œ<code>LinkedListDeque</code>ã€‚</p><p>æœ‰äº›ADTå®é™…ä¸Šæ˜¯å…¶ä»–ADTçš„ç‰¹æ®Šæƒ…å†µã€‚ä¾‹å¦‚ï¼Œæ ˆå’Œé˜Ÿåˆ—åªæ˜¯å…·æœ‰æ›´å…·ä½“è¡Œä¸ºçš„åˆ—è¡¨ã€‚</p><p>ç»ƒä¹  8.1.1 ä½¿ç”¨é“¾è¡¨ä½œä¸ºå…¶åº•å±‚æ•°æ®ç»“æ„ç¼–å†™ä¸€ä¸ªæ ˆç±»ã€‚æ‚¨åªéœ€è¦å®ç°ä¸€ä¸ªå‡½æ•°ï¼špush(Item x)ã€‚ç¡®ä¿è¯¥ç±»æ˜¯é€šç”¨çš„ï¼Œå…¶ä¸­â€œItemâ€æ˜¯æ³›å‹ç±»å‹ï¼</p><p>å¯èƒ½ä¼šä»¥å‡ ç§ä¸åŒçš„æ–¹å¼ç¼–å†™å®ƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä¸‰ç§æµè¡Œçš„è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExtensionStack</span>&lt;Item&gt; <span class="keyword">extends</span> <span class="title class_">LinkedList</span>&lt;Item&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(Item x)</span> &#123;</span><br><span class="line">        add(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè§£å†³æ–¹æ¡ˆä½¿ç”¨æ‰©å±•(<em>extension</em>)ã€‚å®ƒç®€å•åœ°ä»<code>LinkedList&lt;Item&gt;</code>ä¸­å€Ÿç”¨æ–¹æ³•å¹¶å°†å…¶ç”¨ä½œè‡ªå·±çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DelegationStack</span>&lt;Item&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> LinkedList&lt;Item&gt; L = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Item&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(Item x)</span> &#123;</span><br><span class="line">        L.add(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ä½¿ç”¨å§”æ‰˜(<em>Delegation</em>)ã€‚å®ƒåˆ›å»ºä¸€ä¸ªLinkedListå¯¹è±¡å¹¶è°ƒç”¨å…¶æ–¹æ³•ä»¥å®ç°ç›®æ ‡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StackAdapter</span>&lt;Item&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> List L;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StackAdapter</span><span class="params">(List&lt;Item&gt; worker)</span> &#123;</span><br><span class="line">        L = worker;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(Item x)</span> &#123;</span><br><span class="line">        L.add(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•ç±»ä¼¼äºå‰ä¸€ç§æ–¹æ³•ï¼Œé™¤äº†å®ƒå¯ä»¥ä½¿ç”¨å®ç°Listæ¥å£çš„ä»»ä½•ç±»ï¼ˆå¦‚<code>LinkedList</code>ã€<code>ArrayList</code>ç­‰ï¼‰ã€‚</p><p><strong>è­¦å‘Š</strong>ï¼šæ³¨æ„â€œis-aâ€å’Œâ€œhas-aâ€å…³ç³»ä¹‹é—´çš„åŒºåˆ«ã€‚</p><ul><li><p>çŒ«æœ‰ä¸€ä¸ªçˆªå­</p></li><li><p>çŒ«æ˜¯ä¸€ç§çŒ«ç§‘åŠ¨ç‰©</p></li></ul><p>åœ¨æœ¬èŠ‚çš„å‰é¢ï¼Œå®šä¹‰äº†å§”æ‰˜æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªç±»æ¥å®Œæˆçš„ï¼Œè€Œæ‰©å±•æ˜¯é€šè¿‡ç»§æ‰¿ï¼ˆåªæ˜¯å› ä¸ºä¸€å¼€å§‹å¯èƒ½ä¸å®¹æ˜“æ³¨æ„åˆ°ï¼‰ã€‚</p><p><strong>å§”æ‰˜vsæ‰©å±•</strong>ï¼šç°åœ¨çœ‹èµ·æ¥ï¼Œå§”æ‰˜å’Œæ‰©å±•ä¼¼ä¹å¯ä»¥äº’æ¢ä½¿ç”¨ï¼›ç„¶è€Œï¼Œåœ¨ä½¿ç”¨å®ƒä»¬æ—¶å¿…é¡»è®°ä½ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚</p><p>æ‰©å±•å€¾å‘äºåœ¨çŸ¥é“çˆ¶ç±»ä¸­å‘ç”Ÿä»€ä¹ˆçš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚æ¢å¥è¯è¯´ï¼Œä½ çŸ¥é“æ–¹æ³•æ˜¯å¦‚ä½•å®ç°çš„ã€‚æ­¤å¤–ï¼Œé€šè¿‡æ‰©å±•ï¼ŒåŸºæœ¬ä¸Šæ˜¯åœ¨è¯´ä½ æ­£åœ¨æ‰©å±•çš„ç±»çš„è¡Œä¸ºä¸æ‰§è¡Œæ‰©å±•çš„ç±»çš„è¡Œä¸ºç›¸ä¼¼ã€‚å¦ä¸€æ–¹é¢ï¼Œå§”æ‰˜æ˜¯å½“ä½ ä¸æƒ³å°†å½“å‰ç±»è§†ä¸ºä»ä¸­æå–æ–¹æ³•çš„ç±»çš„ç‰ˆæœ¬æ—¶ä½¿ç”¨çš„ã€‚</p><p>è§†å›¾ï¼šè§†å›¾æ˜¯ç°æœ‰å¯¹è±¡çš„æ›¿ä»£è¡¨ç¤ºã€‚è§†å›¾æœ¬è´¨ä¸Šé™åˆ¶äº†ç”¨æˆ·å¯¹åº•å±‚å¯¹è±¡çš„è®¿é—®ã€‚ç„¶è€Œï¼Œé€šè¿‡è§†å›¾è¿›è¡Œçš„æ›´æ”¹å°†å½±å“å®é™…å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** åˆ›å»ºä¸€ä¸ªArrayListã€‚ */</span></span><br><span class="line">List&lt;String&gt; L = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">/** æ·»åŠ ä¸€äº›é¡¹ç›®ã€‚ */</span></span><br><span class="line">L.add(<span class="string">&quot;at&quot;</span>); L.add(<span class="string">&quot;ax&quot;</span>); â€¦</span><br></pre></td></tr></table></figure><p>å‡è®¾ä½ åªæƒ³è¦ä¸€ä¸ªç´¢å¼•ä¸º1åˆ°4çš„åˆ—è¡¨ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨<code>sublist</code>æ–¹æ³•é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** subList me up fam. */</span></span><br><span class="line">List&lt;String&gt; SL = l.subList(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line"><span class="comment">/** Mutate that thing. */</span></span><br><span class="line">SL.set(<span class="number">0</span>, â€œjugâ€);</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè¿™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå—¯ï¼Œå‡è®¾æˆ‘ä»¬åªæƒ³åè½¬åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åè½¬ä¸Šå›¾ä¸­çš„<code>ax ban bat</code>ã€‚</p><p><img src="/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-1/reverse_list1.png" alt="reverse"></p><p>æœ€ç›´è§‚çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªæ¥å—åˆ—è¡¨å¯¹è±¡å’Œåº”è¯¥è¢«åè½¬çš„ç´¢å¼•çš„æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œè¿™å¯èƒ½æœ‰ç‚¹ç¹çï¼Œå› ä¸ºæˆ‘ä»¬æ·»åŠ äº†ä¸€äº›å¤šä½™çš„é€»è¾‘ã€‚</p><p>ä¸ºäº†é¿å…è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥åªåˆ›å»ºä¸€ä¸ªé€šç”¨çš„åè½¬å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªåˆ—è¡¨å¹¶åè½¬è¯¥åˆ—è¡¨ã€‚ç”±äºè§†å›¾æ”¹å˜äº†å®ƒè¡¨ç¤ºçš„åº•å±‚å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥åƒå‰é¢ä¸€æ ·åˆ›å»ºä¸€ä¸ªå­åˆ—è¡¨ï¼Œç„¶ååè½¬å­åˆ—è¡¨ã€‚æœ€ç»ˆç»“æœå®é™…ä¸Šä¼šæ”¹å˜å®é™…åˆ—è¡¨è€Œä¸æ˜¯å‰¯æœ¬ã€‚</p><p><img src="/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-11-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd8-1/reverse_list2.png" alt="img"></p><p>è¿™ä¸€åˆ‡éƒ½å¾ˆå¥½ã€‚ç„¶è€Œï¼Œå®ƒä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ã€‚æ‚¨å£°ç§°æ‚¨å¯ä»¥æä¾›ä¸€ä¸ªåˆ—è¡¨å¯¹è±¡ï¼Œå½“æ“ä½œè¯¥åˆ—è¡¨å¯¹è±¡æ—¶ï¼Œå¯ä»¥å½±å“åŸå§‹åˆ—è¡¨å¯¹è±¡-è¿™æœ‰ç‚¹å¥‡æ€ªã€‚æ€è€ƒä¸€ä¸‹â€œå¦‚ä½•è¿”å›ä¸€ä¸ªå®é™…çš„Listä½†ä»ç„¶å¯¹å¦ä¸€ä¸ªListäº§ç”Ÿå½±å“ï¼Ÿâ€å¯èƒ½æœ‰ç‚¹ä»¤äººå›°æƒ‘ã€‚å¥½å§ï¼Œç­”æ¡ˆæ˜¯è®¿é—®æ–¹æ³•ã€‚</p><p>é¦–å…ˆè¦æ³¨æ„çš„æ˜¯ï¼Œ<code>sublist</code>æ–¹æ³•è¿”å›ä¸€ä¸ªListç±»å‹ã€‚æ­¤å¤–ï¼Œæœ‰ä¸€ä¸ªç§°ä¸º<code>Sublist</code>çš„å®šä¹‰ç±»ï¼Œå®ƒæ‰©å±•äº†<code>AbstractList</code>ã€‚ç”±äº<code>Abstract List</code>å®ç°äº†Listæ¥å£ï¼Œå®ƒå’Œ<code>Sublist</code>éƒ½æ˜¯<code>List</code>ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Item&gt; <span class="title function_">sublist</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span>&#123;</span><br><span class="line">    Return <span class="keyword">new</span> <span class="title class_">this</span>.Sublist(start,end);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç çš„é¦–è¦ä¹‹å¤„æ˜¯<code>subList</code>è¿”å›ä¸€ä¸ª<code>List</code>ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Private <span class="keyword">class</span> <span class="title class_">Sublist</span> <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;Item&gt;&#123;</span><br><span class="line">    Private <span class="type">int</span> start end;</span><br><span class="line">    Sublist(inst start, <span class="type">int</span> end)&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œ<code>sublist</code>å‡½æ•°è¿”å›ä¸€ä¸ª<code>List</code>æ˜¯å› ä¸º<code>SubList</code>ç±»æ‰©å±•äº†<code>AbstractList</code>ã€‚ç”±äº<code>AbstractList</code>å®ç°äº†<code>List</code>æ¥å£ï¼Œå®ƒå’Œ<code>Sublist</code>éƒ½æ˜¯Listç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Item <span class="title function_">get</span><span class="params">(<span class="type">int</span> k)</span>&#123;<span class="keyword">return</span> AbstractList.<span class="built_in">this</span>.get(start+k);&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> l, Item x)</span>&#123;AbstractList.<span class="built_in">this</span>.add(start+k, x); end+=<span class="number">1</span>&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åœ¨ <code>Sublist</code> ç±»ä¸­å®šä¹‰çš„ã€‚</p><p>åœ¨ç»™å®šçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>Sublist</code> ç±»è¢«è®¾è®¡ä¸ºä¸€ä¸ªè§†å›¾ï¼Œå®ƒæä¾›äº†å¯¹åŸå§‹åˆ—è¡¨çš„éƒ¨åˆ†å…ƒç´ çš„è®¿é—®å’Œæ“ä½œã€‚<code>Sublist</code> ä¸æ˜¯é€šè¿‡å¤åˆ¶æ•°æ®æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„åˆ—è¡¨ï¼Œè€Œæ˜¯é€šè¿‡å¼•ç”¨åŸå§‹åˆ—è¡¨çš„ä¸€éƒ¨åˆ†æ¥åˆ›å»ºè§†å›¾ã€‚è¿™æ ·çš„è®¾è®¡å¯ä»¥èŠ‚çœå†…å­˜ï¼Œå¹¶ä¸”åœ¨éœ€è¦ä¿®æ”¹åŸå§‹åˆ—è¡¨çš„æƒ…å†µä¸‹ï¼Œè§†å›¾çš„æ“ä½œä¼šç›´æ¥å½±å“åŸå§‹åˆ—è¡¨ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œ<code>get</code> æ–¹æ³•é€šè¿‡è°ƒç”¨å¤–éƒ¨ç±» <code>AbstractList</code> çš„ <code>get</code> æ–¹æ³•è·å–åŸå§‹åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚è¿™æ˜¯å› ä¸º <code>Sublist</code> ç±»æ²¡æœ‰è‡ªå·±çš„æ•°æ®å­˜å‚¨ï¼Œè€Œæ˜¯ä¾èµ–äºå¤–éƒ¨ç±»æä¾›çš„æ•°æ®ã€‚ç±»ä¼¼åœ°ï¼Œ<code>add</code> æ–¹æ³•ä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨å¤–éƒ¨ç±» <code>AbstractList</code> çš„ <code>add</code> æ–¹æ³•ï¼Œå°†å…ƒç´ æ·»åŠ åˆ°åŸå§‹åˆ—è¡¨çš„æŒ‡å®šä½ç½®ï¼Œå¹¶ä¸” <code>end</code> è®¡æ•°ä¹Ÿé€šè¿‡ä¿®æ”¹å¤–éƒ¨ç±»çš„å­—æ®µæ¥æ›´æ–°ã€‚</p><p>è¿™ç§ä¾èµ–å…³ç³»çš„è®¾è®¡æœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š</p><ol><li><strong>èŠ‚çœå†…å­˜ï¼š</strong> ä¸éœ€è¦ä¸ºå­åˆ—è¡¨å¤åˆ¶ä¸€ä»½åŸå§‹åˆ—è¡¨çš„æ•°æ®ï¼Œè€Œæ˜¯ç›´æ¥å¼•ç”¨åŸå§‹åˆ—è¡¨çš„éƒ¨åˆ†æ•°æ®ã€‚</li><li><strong>åŠ¨æ€æ›´æ–°ï¼š</strong> ç”±äºè§†å›¾æ˜¯å¯¹åŸå§‹æ•°æ®çš„å¼•ç”¨ï¼Œå¯¹è§†å›¾çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“åŸå§‹æ•°æ®ã€‚è¿™æ ·çš„åŠ¨æ€æ€§ä½¿å¾—ä¿®æ”¹å­åˆ—è¡¨æ—¶å¯ä»¥å®æ—¶åæ˜ åœ¨åŸå§‹åˆ—è¡¨ä¸­ï¼Œæ— éœ€æ‰§è¡Œé¢å¤–çš„åŒæ­¥æ“ä½œã€‚</li></ol><p>æ€»ä½“è€Œè¨€ï¼Œè¿™ç§ä¾èµ–å…³ç³»çš„è®¾è®¡ä½¿å¾— <code>Sublist</code> èƒ½å¤Ÿæä¾›é«˜æ•ˆçš„è§†å›¾åŠŸèƒ½ï¼ŒåŒæ—¶èŠ‚çœå†…å­˜å¹¶ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚</p></blockquote><p>åº”è¯¥æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä»æˆ‘ä»¬çš„å­åˆ—è¡¨ä¸­è·å–ç¬¬kä¸ªé¡¹ä¸ä»å…·æœ‰åç§»é‡ç­‰äºæˆ‘ä»¬çš„èµ·å§‹ç´¢å¼•çš„åŸå§‹åˆ—è¡¨ä¸­è·å–ç¬¬kä¸ªé¡¹æ˜¯ç›¸åŒçš„ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å¤–éƒ¨ç±»ï¼ˆæœ€çˆ¶çº§çš„ç±»ï¼‰çš„getæ–¹æ³•ï¼Œæˆ‘ä»¬æ”¹å˜äº†æˆ‘ä»¬çš„åŸå§‹åˆ—è¡¨ã€‚</p><p>ç±»ä¼¼åœ°ï¼Œå‘æˆ‘ä»¬çš„å­åˆ—è¡¨æ·»åŠ å…ƒç´ ä¸åœ¨èµ·å§‹ç´¢å¼•çš„å­åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´ ç›¸åŒã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å­åˆ—è¡¨çš„getæ–¹æ³•ï¼Œæˆ‘ä»¬æ”¹å˜äº†æˆ‘ä»¬çš„åŸå§‹åˆ—è¡¨ã€‚</p><h1 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h1><ul><li>APIå¾ˆéš¾è®¾è®¡ï¼›ç„¶è€Œï¼Œæ‹¥æœ‰ä¸€ç§ä¸€è‡´çš„è®¾è®¡ç†å¿µå¯ä»¥ä½¿æ‚¨çš„ä»£ç æ›´æ¸…æ™°ï¼Œæ›´å®¹æ˜“å¤„ç†ã€‚ </li><li>ç»§æ‰¿ç»å¸¸è¢«é¢‘ç¹ä½¿ç”¨ï¼Œä½†å®ƒå­˜åœ¨é—®é¢˜ï¼Œåº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œåªæœ‰åœ¨å¯¹ç±»çš„å±æ€§ï¼ˆæ—¢è¢«æ‰©å±•åˆè¿›è¡Œæ‰©å±•çš„ç±»ï¼‰æœ‰æŠŠæ¡çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ã€‚</li></ul><h2 id="ä¸‰ç§å®ç°æ–¹å¼ï¼š"><a href="#ä¸‰ç§å®ç°æ–¹å¼ï¼š" class="headerlink" title="ä¸‰ç§å®ç°æ–¹å¼ï¼š"></a><strong>ä¸‰ç§å®ç°æ–¹å¼ï¼š</strong></h2><ul><li><strong>ä½¿ç”¨æ‰©å±•ï¼ˆExtensionï¼‰ï¼š</strong> é€šè¿‡ç»§æ‰¿ç°æœ‰ç±»çš„æ–¹å¼å®ç°ï¼Œæ¯”å¦‚ä½¿ç”¨<code>extends</code>å…³é”®å­—ã€‚æ–‡ç« ç»™å‡ºäº†ä¸€ä¸ªä½¿ç”¨æ‰©å±•çš„ä¾‹å­ï¼Œå³åˆ›å»ºä¸€ä¸ªæ‰©å±•äº†<code>LinkedList</code>çš„<code>ExtensionStack</code>ç±»ï¼Œå®ƒç®€å•åœ°å€Ÿç”¨äº†<code>LinkedList</code>çš„æ–¹æ³•å¹¶å°†å…¶ä½œä¸ºè‡ªå·±çš„æ–¹æ³•ä½¿ç”¨ã€‚</li><li><strong>ä½¿ç”¨å§”æ‰˜ï¼ˆDelegationï¼‰ï¼š</strong> é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œåœ¨å…¶ä¸­åŒ…å«ä¸€ä¸ªå®ä¾‹åŒ–çš„ç°æœ‰ç±»ï¼Œå¹¶è°ƒç”¨å…¶æ–¹æ³•æ¥å®ç°ç›®æ ‡ã€‚æ–‡ç« ç»™å‡ºäº†ä¸€ä¸ªä½¿ç”¨å§”æ‰˜çš„ä¾‹å­ï¼Œå³åˆ›å»ºä¸€ä¸ª<code>DelegationStack</code>ç±»ï¼Œå®ƒåŒ…å«ä¸€ä¸ª<code>LinkedList</code>å¯¹è±¡ï¼Œé€šè¿‡è°ƒç”¨å…¶æ–¹æ³•æ¥å®ç°å †æ ˆçš„ç›®æ ‡ã€‚</li><li><strong>ä½¿ç”¨è§†å›¾ï¼ˆViewsï¼‰ï¼š</strong> è§†å›¾æ˜¯å¯¹ç°æœ‰å¯¹è±¡çš„æ›¿ä»£è¡¨ç¤ºï¼Œé€šè¿‡è§†å›¾å¯ä»¥é™åˆ¶ç”¨æˆ·å¯¹åº•å±‚å¯¹è±¡çš„è®¿é—®ã€‚è§†å›¾çš„æ›´æ”¹ä¼šå½±å“å®é™…å¯¹è±¡ã€‚è¿™ä¸€æ¦‚å¿µåœ¨åæ–‡æœ‰å…·ä½“çš„ä¾‹å­ã€‚</li></ul><h2 id="å…³äºè§†å›¾çš„è®¨è®ºï¼š"><a href="#å…³äºè§†å›¾çš„è®¨è®ºï¼š" class="headerlink" title="å…³äºè§†å›¾çš„è®¨è®ºï¼š"></a><strong>å…³äºè§†å›¾çš„è®¨è®ºï¼š</strong></h2><ul><li><strong>è§†å›¾çš„æ¦‚å¿µï¼š</strong> è§†å›¾æ˜¯ç°æœ‰å¯¹è±¡çš„æ›¿ä»£è¡¨ç¤ºï¼Œé€šè¿‡å®ƒå¯ä»¥é™åˆ¶ç”¨æˆ·å¯¹åº•å±‚å¯¹è±¡çš„è®¿é—®ã€‚å°½ç®¡è§†å›¾å¯ä»¥é™åˆ¶è®¿é—®ï¼Œä½†é€šè¿‡è§†å›¾è¿›è¡Œçš„æ›´æ”¹ä¼šç›´æ¥å½±å“å®é™…å¯¹è±¡ã€‚</li><li><strong>ä½¿ç”¨sublistæ–¹æ³•åˆ›å»ºè§†å›¾ï¼š</strong> é€šè¿‡ç¤ºä¾‹è¯´æ˜äº†ä½¿ç”¨<code>sublist</code>æ–¹æ³•åˆ›å»ºè§†å›¾ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªArrayList <code>L</code>ï¼Œç„¶åä½¿ç”¨<code>sublist</code>æ–¹æ³•è·å–ç´¢å¼•1åˆ°4çš„éƒ¨åˆ†è§†å›¾ï¼ˆ<code>SL</code>ï¼‰ã€‚è¿™æ ·ï¼Œå¯¹<code>SL</code>çš„æ›´æ”¹å°†ç›´æ¥å½±å“åŸå§‹åˆ—è¡¨ <code>L</code>ã€‚</li><li><strong>é€šè¿‡è§†å›¾ä¿®æ”¹åŸå§‹åˆ—è¡¨ï¼š</strong> é€šè¿‡è§†å›¾ï¼Œå¯ä»¥åœ¨ä¸åˆ›å»ºé¢å¤–é€»è¾‘çš„æƒ…å†µä¸‹ä¿®æ”¹åŸå§‹åˆ—è¡¨çš„éƒ¨åˆ†å†…å®¹ã€‚æ–‡ç« ä»¥ä¸€ä¸ªå…·ä½“çš„ä¾‹å­è¯´æ˜äº†å¦‚ä½•é€šè¿‡åˆ›å»ºè§†å›¾ï¼Œå¹¶åœ¨è§†å›¾ä¸Šè¿›è¡Œä¿®æ”¹ï¼Œæ¥å®ç°å¯¹åŸå§‹åˆ—è¡¨çš„ä¿®æ”¹ã€‚</li></ul><h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ol><li><strong>æ‰©å±•ï¼ˆExtensionï¼‰ï¼š</strong><ul><li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> å½“ä½ æƒ³è¦åœ¨å·²æœ‰ç±»çš„åŸºç¡€ä¸Šæ„å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œå¹¶ä¸”æ–°ç±»æ˜¯å·²æœ‰ç±»çš„æ‰©å±•ï¼Œå…·æœ‰ç±»ä¼¼çš„è¡Œä¸ºï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨æ‰©å±•ã€‚</li><li><strong>ä¼˜åŠ¿ï¼š</strong> å¯ä»¥ç»§æ‰¿ç°æœ‰ç±»çš„æ–¹æ³•ï¼Œä½¿ä»£ç é‡ç”¨æ›´ä¸ºç®€å•ã€‚</li></ul></li><li><strong>å§”æ‰˜ï¼ˆDelegationï¼‰ï¼š</strong><ul><li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> å½“ä½ æƒ³è¦åœ¨æ–°çš„ç±»ä¸­ä½¿ç”¨ç°æœ‰ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸æ˜¯æ‰©å±•å®ƒï¼Œè€Œæ˜¯å°†è¿™äº›åŠŸèƒ½å§”æ‰˜ç»™å…¶ä»–ç±»å®ç°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å§”æ‰˜ã€‚</li><li><strong>ä¼˜åŠ¿ï¼š</strong> æ›´çµæ´»ï¼Œå…è®¸æ›´åŠ¨æ€åœ°æ”¹å˜å§”æ‰˜å¯¹è±¡ï¼Œé¿å…äº†ç»§æ‰¿é“¾çš„ä¸€äº›é—®é¢˜ã€‚</li></ul></li><li><strong>è§†å›¾ï¼ˆViewsï¼‰ï¼š</strong><ul><li><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> å½“ä½ éœ€è¦å¯¹ç°æœ‰å¯¹è±¡çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ“ä½œï¼Œå¹¶ä¸”å¸Œæœ›å¯¹è¿™éƒ¨åˆ†çš„ä¿®æ”¹èƒ½å¤Ÿç›´æ¥å½±å“åˆ°åŸå§‹å¯¹è±¡æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è§†å›¾ã€‚</li><li><strong>ä¼˜åŠ¿ï¼š</strong> èŠ‚çœå†…å­˜ï¼Œé¿å…äº†ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶ï¼ŒåŒæ—¶æä¾›å¯¹åŸå§‹æ•°æ®çš„åŠ¨æ€æ“ä½œã€‚</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(å)-Rd6-è¿­ä»£å™¨ï¼Œequalæ–¹æ³•ï¼Œå¼‚å¸¸å¤„ç†</title>
      <link href="/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd6/"/>
      <url>/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd6/</url>
      
        <content type="html"><![CDATA[<p><a href="https://joshhug.gitbooks.io/hug61b/content/chap6/chap61.html">6.1 Lists, Sets, and ArraySet Â· Hug61B (gitbooks.io)</a></p><p>åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Java çš„å†…ç½® <code>List</code> å’Œ <code>Set</code> æ•°æ®ç»“æ„ï¼Œä»¥åŠæ„å»ºæˆ‘ä»¬è‡ªå·±çš„ <code>ArraySet</code> </p><h1 id="Javaä¸­çš„Lists"><a href="#Javaä¸­çš„Lists" class="headerlink" title="Javaä¸­çš„Lists"></a>Javaä¸­çš„Lists</h1><p>æˆ‘ä»¬ä»å¤´å¼€å§‹æ„å»ºäº†ä¸€ä¸ªåˆ—è¡¨ï¼Œä½† Java æä¾›äº†ä¸€ä¸ªå†…ç½® <code>List</code> æ¥å£å’Œå‡ ä¸ªå®ç°ï¼Œä¾‹å¦‚ <code>ArrayList</code> .è¯·è®°ä½ï¼Œç”±äº <code>List</code> æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæˆ‘ä»¬æ— æ³•å¯¹å…¶è¿›è¡Œè®¾ç½®ï¼æˆ‘ä»¬å¿…é¡»ç¡®å®šå®ƒçš„ä¸€ä¸ªå®ç°ã€‚</p><p>ä¸ºäº†è®¿é—®å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»ã€æ¥å£çš„å…¨åï¼ˆâ€œè§„èŒƒåç§°â€ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.util.List&lt;Integer&gt; L = <span class="keyword">new</span> <span class="title class_">java</span>.util.ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™æœ‰ç‚¹å†—é•¿ã€‚ä»¥ç±»ä¼¼äºæˆ‘ä»¬å¯¼å…¥çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¯¼å…¥ <code>JUnit</code> java åº“ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; L = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        L.add(<span class="number">5</span>);</span><br><span class="line">        L.add(<span class="number">10</span>);</span><br><span class="line">        System.out.println(L);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="é›†åˆ-Sets"><a href="#é›†åˆ-Sets" class="headerlink" title="é›†åˆ(Sets)"></a>é›†åˆ(Sets)</h1><p>é›†åˆæ˜¯å”¯ä¸€å…ƒç´ çš„é›†åˆ - æ¯ä¸ªå…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªå‰¯æœ¬ï¼Œä¹Ÿæ— åºã€‚</p><h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><p>Java å…·æœ‰ <code>Set</code> æ¥å£å’Œå®ç°ï¼Œä¾‹å¦‚ <code>HashSet</code> .å¦‚æœæ‚¨ä¸æƒ³ä½¿ç”¨å…¨åï¼Œè¯·è®°ä½å¯¼å…¥å®ƒä»¬ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">s.add(<span class="string">&quot;Tokyo&quot;</span>);</span><br><span class="line">s.add(<span class="string">&quot;Lagos&quot;</span>);</span><br><span class="line">System.out.println(S.contains(<span class="string">&quot;Tokyo&quot;</span>)); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><p>åœ¨ python ä¸­ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨ <code>set()</code> .ä¸ºäº†æ£€æŸ¥ï¼Œ <code>contains</code> æˆ‘ä»¬ä¸ä½¿ç”¨æ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨å…³é”®å­— <code>in</code> ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">set</span>()</span><br><span class="line">s.add(<span class="string">&quot;Tokyo&quot;</span>)</span><br><span class="line">s.add(<span class="string">&quot;Lagos&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Tokyo&quot;</span> <span class="keyword">in</span> s) // <span class="literal">True</span></span><br></pre></td></tr></table></figure><h2 id="ArraySet"><a href="#ArraySet" class="headerlink" title="ArraySet"></a>ArraySet</h2><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”¨ä»¥ä¸‹æ–¹æ³•åˆ¶ä½œæˆ‘ä»¬è‡ªå·±çš„é›†åˆ <code>ArraySet</code> ï¼š</p><ul><li><code>add(value)</code>: add the value to the set if not already present<br><code>add(value)</code> ï¼šå°†å€¼æ·»åŠ åˆ°é›†åˆä¸­ï¼ˆå¦‚æœå°šä¸å­˜åœ¨ï¼‰</li><li><code>contains(value)</code>: check to see if ArraySet contains the key<br><code>contains(value)</code> ï¼šæ£€æŸ¥ ArraySet æ˜¯å¦åŒ…å«é”®</li><li><code>size()</code>: return number of values<br><code>size()</code> ï¼šè¿”å›å€¼çš„æ•°é‡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraySet</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T[] items;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size; <span class="comment">// the next item to be added will be at position size</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArraySet</span><span class="params">()</span> &#123;</span><br><span class="line">        items = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">100</span>];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns true if this map contains a mapping for the specified key.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">contains</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i += <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (items[i].equals(x)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Associates the specified value with the specified key in this map. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T x)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (contains(x)) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        items[size] = x;</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Returns the number of key-value mappings in this map. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æŠ›å‡ºå¼‚å¸¸"><a href="#æŠ›å‡ºå¼‚å¸¸" class="headerlink" title="æŠ›å‡ºå¼‚å¸¸"></a>æŠ›å‡ºå¼‚å¸¸</h1><p>æˆ‘ä»¬åœ¨ <code>ArraySet</code> ä¸Šä¸€èŠ‚ä¸­çš„å®ç°æœ‰ä¸€ä¸ªå°é”™è¯¯ã€‚å½“æˆ‘ä»¬æ·»åŠ <code>null</code>åˆ°  ArraySet æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ª NullPointerExceptionã€‚</p><p>é—®é¢˜å‡ºåœ¨æˆ‘ä»¬æ£€æŸ¥ <code>contains</code> <code>items[i].equals(x)</code> çš„æ–¹æ³•ä¸Šã€‚å¦‚æœ <code>items[i]</code>å€¼ä¸º nullï¼Œåˆ™æˆ‘ä»¬è°ƒç”¨ <code>null.equals(x)</code> -&gt; NullPointerExceptionã€‚</p><p>åœ¨ Java ä¸­ï¼Œå¼‚å¸¸æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹æ ¼å¼æŠ›å‡ºå¼‚å¸¸ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">throw new ExceptionObject(parameter1, ...)</span><br></pre></td></tr></table></figure><p>å½“ç”¨æˆ·å°è¯•å°† null æ·»åŠ åˆ°æˆ‘ä»¬çš„ <code>ArraySet</code> .æˆ‘ä»¬å°†æŠ›å‡ºä¸€ä¸ªæ¥å—ä¸€ä¸ª <code>IllegalArgumentException</code> å‚æ•°ï¼ˆä¸€æ¡ <code>String</code> æ¶ˆæ¯ï¼‰ã€‚</p><p>æˆ‘ä»¬æ›´æ–° <code>add</code> çš„æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Associates the specified value with the specified key in this map.</span></span><br><span class="line"><span class="comment">   Throws an IllegalArgumentException if the key is null. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(T x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;can&#x27;t add null&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (contains(x)) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    items[size] = x;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ— è®ºå“ªç§æ–¹å¼ï¼Œæˆ‘ä»¬éƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå¼‚å¸¸ - ä¸ºä»€ä¹ˆè¿™æ ·æ›´å¥½ï¼Ÿ</p><ol><li>æˆ‘ä»¬å¯ä»¥æ§åˆ¶æˆ‘ä»¬çš„ä»£ç ï¼šæˆ‘ä»¬æœ‰æ„è¯†åœ°å†³å®šåœ¨ä»€ä¹ˆæ—¶å€™åœæ­¢æˆ‘ä»¬çš„ç¨‹åºæµ</li><li>å¯¹äºä½¿ç”¨æˆ‘ä»¬ä»£ç çš„ç”¨æˆ·æ¥è¯´ï¼Œæ›´æœ‰ç”¨çš„å¼‚å¸¸ç±»å‹å’Œæœ‰ç”¨çš„é”™è¯¯æ¶ˆæ¯</li></ol><p>ä½†æ˜¯ï¼Œå¦‚æœç¨‹åºæ ¹æœ¬ä¸å´©æºƒä¼šæ›´å¥½ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸åŒçš„äº‹æƒ…ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ï¼š</p><p><strong>æ–¹æ³• 1</strong>ï¼šå¦‚æœæ•°ç»„è¢«ä¼ é€’åˆ°æ•°ç»„ä¸­ï¼Œåˆ™ä¸è¦å°†å…¶æ·»åŠ åˆ° <code>null</code> æ•°ç»„ä¸­ <code>add</code> </p><p><strong>æ–¹æ³• 2</strong>ï¼šæ›´æ”¹ <code>contains</code> æ–¹æ³•ä»¥è€ƒè™‘æƒ…å†µ if <code>items[i] == null</code> .</p><p>æ— è®ºæ‚¨åšå‡ºä»€ä¹ˆå†³å®šï¼Œé‡è¦çš„æ˜¯ç”¨æˆ·çŸ¥é“ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ–‡æ¡£ï¼ˆä¾‹å¦‚å…³äºæ‚¨çš„æ–¹æ³•çš„è¯„è®ºï¼‰éå¸¸é‡è¦çš„åŸå› ã€‚</p><h1 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h1><p>æˆ‘ä»¬å¯ä»¥åœ¨ Java çš„ <code>HashSet</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">s.add(<span class="string">&quot;Tokyo&quot;</span>);</span><br><span class="line">s.add(<span class="string">&quot;Lagos&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (String city : s) &#123;</span><br><span class="line">    System.out.println(city);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•å¯¹æˆ‘ä»¬çš„ <code>ArraySet</code> åšåŒæ ·çš„äº‹æƒ…ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ã€‚æˆ‘ä»¬å¦‚ä½•å¯ç”¨æ­¤åŠŸèƒ½ï¼Ÿ</p><h2 id="å¢å¼ºçš„-For-å¾ªç¯"><a href="#å¢å¼ºçš„-For-å¾ªç¯" class="headerlink" title="å¢å¼ºçš„ For å¾ªç¯"></a>å¢å¼ºçš„ For å¾ªç¯</h2><p>è®©æˆ‘ä»¬é¦–å…ˆäº†è§£å½“æˆ‘ä»¬ä½¿ç”¨å¢å¼ºçš„ for å¾ªç¯æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬å¯ä»¥å°†å¢å¼ºçš„ for å¾ªç¯â€œç¿»è¯‘â€æˆä¸€ç§ä¸‘é™‹çš„æ‰‹åŠ¨æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">...</span><br><span class="line"><span class="keyword">for</span> (String city : s) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ç¿»è¯‘ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Set&lt;String&gt; s = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">...</span><br><span class="line">Iterator&lt;String&gt; seer = s.iterator();</span><br><span class="line"><span class="keyword">while</span> (seer.hasNext()) &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">city</span> <span class="operator">=</span> seer.next();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„å…³é”®æ˜¯ä¸€ä¸ªç§°ä¸ºè¿­ä»£å™¨çš„å¯¹è±¡ã€‚</p><p>åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œåœ¨ List.java ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>iterator()</code> è¿”å›è¿­ä»£å™¨å¯¹è±¡çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¯¥å¯¹è±¡éå†åˆ—è¡¨ä¸­çš„æ‰€æœ‰æ¡ç›®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; friends = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">...</span><br><span class="line">Iterator&lt;Integer&gt; seer = friends.iterator();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (seer.hasNext()) &#123;</span><br><span class="line">System.out.println(seer.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤ä»£ç çš„è¡Œä¸ºä¸ä¸Šé¢çš„ foreach å¾ªç¯ç‰ˆæœ¬ç›¸åŒã€‚</p><p>æˆ‘ä»¬çš„è¿­ä»£å™¨æ–¹æ³•ä¸­æœ‰ä¸‰ç§å…³é”®æ–¹æ³•ï¼š</p><ul><li><p>é¦–å…ˆï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªæ–°çš„è¿­ä»£å™¨å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å« <code>Iterator&lt;Integer&gt; seer = friends.iterator();</code></p></li><li><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ while å¾ªç¯éå†åˆ—è¡¨ã€‚æˆ‘ä»¬æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å‰©ä½™çš„é¡¹ç›®ï¼Œå¦‚æœè¿˜æœ‰çœ‹ä¸è§çš„é¡¹ç›®ï¼Œåˆ™è¿”å› <code>seer.hasNext()</code> trueï¼Œå¦‚æœæ‰€æœ‰é¡¹ç›®éƒ½å·²å¤„ç†ï¼Œåˆ™è¿”å› falseã€‚</p></li><li><p>æœ€åï¼Œ <code>seer.next()</code> ä¸€æ¬¡åšä¸¤ä»¶äº‹ã€‚å®ƒè¿”å›åˆ—è¡¨çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†å…¶æ‰“å°å‡ºæ¥ã€‚å®ƒè¿˜å°†è¿­ä»£å™¨<strong>å‰è¿›ä¸€é¡¹</strong>ã€‚è¿™æ ·ï¼Œè¿­ä»£å™¨å°†åªæ£€æŸ¥æ¯ä¸ªé¡¹ç›®ä¸€æ¬¡ã€‚</p></li></ul><h2 id="å®ç°è¿­ä»£å™¨"><a href="#å®ç°è¿­ä»£å™¨" class="headerlink" title="å®ç°è¿­ä»£å™¨"></a>å®ç°è¿­ä»£å™¨</h2><p>è®©æˆ‘ä»¬é¦–å…ˆè€ƒè™‘ç¼–è¯‘å™¨éœ€è¦äº†è§£ä»€ä¹ˆæ‰èƒ½æˆåŠŸç¼–è¯‘ä»¥ä¸‹è¿­ä»£å™¨ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; friends = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line">Iterator&lt;Integer&gt; seer = friends.iterator();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(seer.hasNext()) &#123;</span><br><span class="line">    System.out.println(seer.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹è°ƒç”¨ç›¸å…³æ–¹æ³•çš„æ¯ä¸ªå¯¹è±¡çš„é™æ€ç±»å‹ã€‚ <code>friends</code> æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåœ¨å®ƒ <code>iterator()</code> ä¸Šé¢è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é—®ï¼š</p><ul><li>Does the List interface have an iterator() method?<br>List æ¥å£æœ‰ iteratorï¼ˆï¼‰ æ–¹æ³•å—ï¼Ÿ</li></ul><p><code>seer</code> æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨å®ƒ <code>hasNext()</code> ä¸Šé¢ <code>next()</code> è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»é—®ï¼š</p><ul><li>Does the Iterator interface have next&#x2F;hasNext() methods?<br>è¿­ä»£å™¨æ¥å£æ˜¯å¦æœ‰ next&#x2F;hasNextï¼ˆï¼‰ æ–¹æ³•ï¼Ÿ</li></ul><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å®ç°è¿™äº›è¦æ±‚å‘¢ï¼Ÿ</p><p>List æ¥å£æ‰©å±•äº† Iterable æ¥å£ï¼Œç»§æ‰¿äº†æŠ½è±¡çš„ iteratorï¼ˆï¼‰ æ–¹æ³•ã€‚ï¼ˆå®é™…ä¸Šï¼ŒList æ‰©å±•äº†æ‰©å±• Iterable çš„ Collectionï¼Œä½†ä»¥è¿™ç§æ–¹å¼å¼€å§‹ä»£ç æ€è€ƒæ›´å®¹æ˜“ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterable</span>&lt;T&gt; &#123;</span><br><span class="line">    Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">Iterable</span>&lt;T&gt;&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œç¼–è¯‘å™¨æ£€æŸ¥è¿­ä»£å™¨æ˜¯å¦å…·æœ‰ <code>hasNext()</code> å’Œ <code>next()</code> ã€‚Iterator æ¥å£æ˜¾å¼æŒ‡å®šä»¥ä¸‹æŠ½è±¡æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span>;</span><br><span class="line">    T <span class="title function_">next</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†å‘ ArrayMap ç±»æ·»åŠ è¿­ä»£é”®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåä¸º ArraySetIterator çš„æ–°ç±»ï¼Œå®ƒ<strong>åµŒå¥—åœ¨</strong> ArraySet ä¸­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Iterator&lt;T&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArraySetIterator</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">ArraySetIterator</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> wizPos;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArraySetIterator</span><span class="params">()</span> &#123;</span><br><span class="line">        wizPos = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> wizPos &lt; size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">T</span> <span class="variable">returnItem</span> <span class="operator">=</span> items[wizPos];</span><br><span class="line">        wizPos += <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> returnItem;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>è‹¥éœ€è¦ç”¨å¢å¼ºForå¾ªç¯ï¼Œå°±éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ä½ æœ‰ä¸€ä¸ªè¿­ä»£å™¨ï¼Œé‚£å¦‚ä½•å‘Šè¯‰ç¼–è¯‘å™¨å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ç»§æ‰¿Iterable</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArraySet</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Iterable</span>&lt;T&gt; </span><br></pre></td></tr></table></figure><h1 id="Objectæ–¹æ³•"><a href="#Objectæ–¹æ³•" class="headerlink" title="Objectæ–¹æ³•"></a><code>Object</code>æ–¹æ³•</h1><p>æ‰€æœ‰ç±»éƒ½ç»§æ‰¿è‡ªæ€»ä½“ Object ç±»ã€‚ç»§æ‰¿çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ul><li><code>String toString()</code></li><li><code>boolean equals(Object obj)</code></li><li><code>Class &lt;?&gt; getClass()</code></li><li><code>int hashCode()</code></li><li><code>protected Objectclone()</code></li><li><code>protected void finalize()</code></li><li><code>void notify()</code></li><li><code>void notifyAll()</code></li><li><code>void wait()</code></li><li><code>void wait(long timeout)</code></li><li><code>void wait(long timeout, int nanos)</code></li></ul><p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å‰ä¸¤ä¸ªã€‚æˆ‘ä»¬å°†åˆ©ç”¨ç»§æ‰¿æ¥è¦†ç›–ç±»ä¸­çš„è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œä»¥æŒ‰ç…§æˆ‘ä»¬å¸Œæœ›å®ƒä»¬çš„æ–¹å¼è¿è¡Œã€‚</p><h2 id="toStringï¼ˆï¼‰"><a href="#toStringï¼ˆï¼‰" class="headerlink" title="toStringï¼ˆï¼‰"></a>toStringï¼ˆï¼‰</h2><p>è¯¥ <code>toString()</code> æ–¹æ³•æä¾›å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚è¯¥ <code>System.out.println()</code> å‡½æ•°åœ¨ä¼ é€’ç»™å®ƒçš„ä»»ä½•å¯¹è±¡ä¸Šéšå¼è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¹¶æ‰“å°è¿”å›çš„å­—ç¬¦ä¸²ã€‚å½“ä½ è¿è¡Œ <code>System.out.println(dog)</code> æ—¶ï¼Œå®ƒå®é™…ä¸Šæ˜¯è¿™æ ·åšçš„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> dog.toString()</span><br><span class="line">System.out.println(s)</span><br></pre></td></tr></table></figure><p>é»˜è®¤ <code>Object</code> ç±»çš„<code>toString()</code> æ–¹æ³•æ‰“å°å¯¹è±¡åœ¨å†…å­˜ä¸­çš„ä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚åƒ Arraylist å’Œ java æ•°ç»„è¿™æ ·çš„ç±»æœ‰è‡ªå·±çš„æ–¹æ³•é‡å†™ç‰ˆæœ¬ <code>toString()</code> ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“ä½ ä½¿ç”¨ Arraylist å¹¶ä¸ºå…¶ç¼–å†™æµ‹è¯•æ—¶ï¼Œé”™è¯¯æ€»æ˜¯ä¼šä»¥è¿™æ ·çš„æ ¼å¼ï¼ˆ1ã€2ã€3ã€4ï¼‰è¿”å›åˆ—è¡¨ï¼Œè€Œä¸æ˜¯è¿”å›å†…å­˜ä½ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">returnString</span> <span class="operator">=</span> <span class="string">&quot;&#123;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i += <span class="number">1</span>) &#123;</span><br><span class="line">        returnString += keys[i];</span><br><span class="line">        returnString += <span class="string">&quot;, &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    returnString += <span class="string">&quot;&#125;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> returnString;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¸ªæ–¹æ³•å¾ˆä¸å¥½ï¼Œå› ä¸ºæ¯æ¬¡<code>+=</code>éƒ½æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„Stringå¯¹è±¡</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJava æœ‰ä¸€ä¸ªåä¸º <code>StringBuilder</code> .å®ƒä¼šåˆ›å»ºä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå› æ­¤æ‚¨å¯ä»¥ç»§ç»­è¿½åŠ åˆ°åŒä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚</p></blockquote><p>é‡å†™:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">returnSB</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;&#123;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size - <span class="number">1</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">            returnSB.append(items[i].toString());</span><br><span class="line">            returnSB.append(<span class="string">&quot;, &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        returnSB.append(items[size - <span class="number">1</span>]);</span><br><span class="line">        returnSB.append(<span class="string">&quot;&#125;&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> returnSB.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="equals"><a href="#equals" class="headerlink" title="equals()"></a>equals()</h2><p><code>equals()</code> å¹¶åœ¨ <code>==</code> Java ä¸­å…·æœ‰ä¸åŒçš„è¡Œä¸ºã€‚ <code>==</code> æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­æ˜¯å¦å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚è®°ä½ï¼ŒæŒ‰å€¼ä¼ é€’ï¼ <code>==</code> æ£€æŸ¥ä¸¤ä¸ªç›’å­æ˜¯å¦è£…æœ‰ç›¸åŒçš„ä¸œè¥¿ã€‚å¯¹äºåŸºå…ƒï¼Œè¿™æ„å‘³ç€æ£€æŸ¥å€¼æ˜¯å¦ç›¸ç­‰ã€‚å¯¹äºå¯¹è±¡ï¼Œè¿™æ„å‘³ç€æ£€æŸ¥åœ°å€&#x2F;æŒ‡é’ˆæ˜¯å¦ç›¸ç­‰ã€‚</p><p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¸ª <code>Doge</code> ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Doge</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> age;</span><br><span class="line">   <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="title function_">Doge</span><span class="params">(<span class="type">int</span> age, String name)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.age = age;</span><br><span class="line">      <span class="built_in">this</span>.name = name;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">      <span class="type">int</span> <span class="variable">z</span> <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">      <span class="type">Doge</span> <span class="variable">fido</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Doge</span>(<span class="number">5</span>, <span class="string">&quot;Fido&quot;</span>);</span><br><span class="line">      <span class="type">Doge</span> <span class="variable">doggo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Doge</span>(<span class="number">6</span>, <span class="string">&quot;Doggo&quot;</span>);</span><br><span class="line">      <span class="type">Doge</span> <span class="variable">fidoTwin</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Doge</span>(<span class="number">5</span>, <span class="string">&quot;Fido&quot;</span>);</span><br><span class="line">      <span class="type">Doge</span> <span class="variable">fidoRealTwin</span> <span class="operator">=</span> fido;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å°†æ­¤ä»£ç æ’å…¥ java å¯è§†åŒ–å·¥å…·ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢æ‰€ç¤ºçš„æŒ‡é’ˆå›¾ä¸­çœ‹åˆ°è¯¥æ¡†ã€‚</p><p><img src="/2024/02/02/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-10-CS61b%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd6/image-20240202181822175.png" alt="image-20240202181822175"></p><p>ç»ƒä¹  6.4.2ï¼šå¦‚æœæˆ‘ä»¬è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œjava å°†è¿”å›ä»€ä¹ˆï¼Ÿ</p><ul><li><code>x == y</code></li><li><code>x == z</code></li><li><code>fido == doggo</code></li><li><code>fido == fidoTwin</code></li><li><code>fido = fidoRealTwin</code></li></ul><p><strong>ç­”æ¡ˆ</strong></p><ul><li><code>True</code></li><li><code>False</code></li><li><code>False</code></li><li><code>False</code></li><li><code>True</code></li></ul><p><code>fido</code> å¹¶ä¸” <code>fidoTwin</code> ä¸è¢«è€ƒè™‘ <code>==</code> ï¼Œå› ä¸ºå®ƒä»¬æŒ‡å‘ä¸åŒçš„å¯¹è±¡ã€‚ç„¶è€Œï¼Œè¿™æ˜¯éå¸¸æ„šè ¢çš„ï¼Œå› ä¸ºå®ƒä»¬çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯ç›¸åŒçš„ã€‚æ‚¨å¯ä»¥çœ‹åˆ°å¦‚ä½•åœ¨ <code>==</code> Java æµ‹è¯•ä¸­å¯¼è‡´ä¸€äº›é—®é¢˜ã€‚å½“æˆ‘ä»¬ä¸º ArrayList ç¼–å†™æµ‹è¯•å¹¶æƒ³è¦æ£€æŸ¥ expected æ˜¯å¦ä¸å‡½æ•°è¿”å›çš„å†…å®¹ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šå°† expected åˆ›å»ºä¸ºæ–°çš„ arraylistã€‚å¦‚æœæˆ‘ä»¬ <code>==</code> åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ï¼Œå®ƒæ€»æ˜¯ä¼šè¿”å› falseã€‚è¿™å°±æ˜¯ <code>equals(Object o)</code> ç›®çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object other)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == other) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (other == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (other.getClass() != <span class="built_in">this</span>.getClass()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ArraySet&lt;T&gt; o = (ArraySet&lt;T&gt;) other;</span><br><span class="line">        <span class="keyword">if</span> (o.size() != <span class="built_in">this</span>.size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (T item : <span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!o.contains(item)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>Java ä¸­çš„ç­‰å¼è§„åˆ™ï¼šé‡å†™ <code>.equals()</code> æ–¹æ³•æ—¶ï¼Œæœ‰æ—¶å¯èƒ½æ¯”çœ‹èµ·æ¥æ›´æ£˜æ‰‹ã€‚å®ç°æ–¹æ³• <code>.equals()</code> æ—¶è¦éµå®ˆçš„å‡ æ¡è§„åˆ™å¦‚ä¸‹ï¼š</p><p>1.ï¼‰ <code>equals</code> å¿…é¡»æ˜¯ç­‰ä»·å…³ç³»</p><ul><li><strong>åèº«</strong>ï¼š <code>x.equals(x)</code> æ˜¯çœŸçš„</li><li><strong>å¯¹ç§°</strong>ï¼š <code>x.equals(y)</code> å½“ä¸”ä»…å½“ <code>y.equals(x)</code></li><li><code>x.equals(z)</code><br><strong>åŠç‰©</strong>ï¼š <code>x.equals(y)</code> å’Œ <code>y.equals(z)</code> æš—ç¤º <code>x.equals(z)</code></li></ul><p>2.ï¼‰ å®ƒå¿…é¡»æ¥å—ä¸€ä¸ª Object å‚æ•°ï¼Œä»¥ä¾¿è¦†ç›–åŸå§‹ <code>.equals()</code> æ–¹æ³•</p><p>3.ï¼‰ å®ƒå¿…é¡»ä¸€è‡´ å¦‚æœ <code>x.equals(y)</code> ï¼Œé‚£ä¹ˆåªè¦ <code>x</code> å’Œ <code>y</code> ä¿æŒä¸å˜ï¼š <code>x</code> å¿…é¡»ç»§ç»­ç›¸ç­‰ <code>y</code></p><p>4.) It is never true for null <code>x.equals(null)</code> must be false<br>4.ï¼‰  nullæ°¸è¿œä¸ä¼šä¸ºçœŸï¼Œ <code>x.equals(null)</code> å¿…é¡»æ˜¯å‡çš„</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(ä¹)-Rd4.3-å­ç±»å¤šæ€æ€§ä¸HoFsçš„å…³ç³»</title>
      <link href="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/"/>
      <url>/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/</url>
      
        <content type="html"><![CDATA[<p>å¹»ç¯ç‰‡:<a href="https://docs.google.com/presentation/d/13SVUU8oeTch0ex42hBQLGTZ4XAaMKDJmuXMqegEoVqM/edit#slide=id.g4eef494c27_45_245">cs61b 2021 lec10 inheritance3 - Google å¹»ç¯ç‰‡</a></p><p>Reading:<a href="https://joshhug.gitbooks.io/hug61b/content/chap4/chap43.html">4.3 Subtype Polymorphism vs. HOFs Â· Hug61B (gitbooks.io)</a></p><h1 id="å­ç±»å¤šæ€æ€§"><a href="#å­ç±»å¤šæ€æ€§" class="headerlink" title="å­ç±»å¤šæ€æ€§"></a>å­ç±»å¤šæ€æ€§</h1><p>å¤šæ€æ€§çš„æ ¸å¿ƒæ˜¯â€œå¤šç§å½¢å¼â€ã€‚åœ¨ Java ä¸­ï¼Œå¤šæ€æ€§æ˜¯æŒ‡å¯¹è±¡å¯ä»¥å…·æœ‰å¤šç§å½¢å¼æˆ–ç±»å‹ã€‚åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå¤šæ€æ€§æ¶‰åŠå¦‚ä½•å°†ä¸€ä¸ªå¯¹è±¡è§†ä¸ºå…¶è‡ªèº«ç±»çš„å®ä¾‹ã€å…¶è¶…ç±»çš„å®ä¾‹ã€å…¶è¶…ç±»çš„è¶…ç±»çš„å®ä¾‹ç­‰ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªé™æ€ç±»å‹ä¸º<code>deque</code>çš„å˜é‡dequeã€‚è°ƒç”¨<code>dequeue .addFirst()</code> å°†åœ¨æ‰§è¡Œæ—¶ç¡®å®šï¼Œè¿™å–å†³äºè°ƒç”¨ <code>addFirst</code> æ—¶<code>deque</code>çš„è¿è¡Œæ—¶ç±»å‹æˆ–åŠ¨æ€ç±»å‹ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šä¸€ç« ä¸­çœ‹åˆ°çš„ï¼ŒJavaä½¿ç”¨åŠ¨æ€æ–¹æ³•é€‰æ‹©æ¥é€‰æ‹©è°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚</p><blockquote><ol><li><strong>è¿è¡Œæ—¶ç±»å‹ï¼ˆRuntime Typeï¼‰ï¼š</strong> è¿è¡Œæ—¶ç±»å‹æŒ‡çš„æ˜¯åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŸä¸ªå˜é‡æˆ–å¯¹è±¡çš„å®é™…ç±»å‹ã€‚è¿™æ˜¯ç”±ç¨‹åºåœ¨è¿è¡Œæ—¶åŠ¨æ€å†³å®šçš„ã€‚åœ¨ä¸€äº›é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œå¯¹è±¡å¯èƒ½è¢«å£°æ˜ä¸ºæŸä¸ªç±»å‹ï¼Œä½†åœ¨è¿è¡Œæ—¶å¯èƒ½ä¼šè¢«èµ‹äºˆè¯¥ç±»å‹çš„å­ç±»å‹ã€‚å› æ­¤ï¼Œè¿è¡Œæ—¶ç±»å‹æ˜¯ç¨‹åºå®é™…å¤„ç†çš„å¯¹è±¡ç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨ä»£ç ä¸­å£°æ˜çš„ç±»å‹ã€‚å¦‚åŸºç±»ã€‚</li><li><strong>åŠ¨æ€ç±»å‹ï¼ˆDynamic Typeï¼‰ï¼š</strong> åŠ¨æ€ç±»å‹æ˜¯æŒ‡å˜é‡æˆ–å¯¹è±¡åœ¨è¿è¡Œæ—¶çš„ç±»å‹ã€‚ä¸é™æ€ç±»å‹ç›¸å¯¹åº”ï¼ŒåŠ¨æ€ç±»å‹æ„å‘³ç€ç±»å‹ä¿¡æ¯æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šçš„ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ã€‚åœ¨ä¸€äº›åŠ¨æ€è¯­è¨€ä¸­ï¼Œå˜é‡å¯ä»¥åœ¨è¿è¡Œæ—¶å¼•ç”¨ä¸åŒçš„ç±»å‹ï¼Œå› æ­¤å˜é‡çš„åŠ¨æ€ç±»å‹æ˜¯å¯ä»¥å˜åŒ–çš„ã€‚</li></ol></blockquote><p>å‡è®¾æˆ‘ä»¬æƒ³ç¼–å†™ä¸€ä¸ª python ç¨‹åºï¼Œè¯¥ç¨‹åºæ‰“å°ä¸¤ä¸ªå¯¹è±¡ä¸­è¾ƒå¤§çš„ä¸€ä¸ªçš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚</p><ol><li>æ˜¾å¼ HoF æ–¹æ³•</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_larger</span>(<span class="params">x, y, compare, stringify</span>):</span><br><span class="line">    <span class="keyword">if</span> compare(x, y):</span><br><span class="line">        <span class="keyword">return</span> stringify(x)</span><br><span class="line">    <span class="keyword">return</span> stringify(y)</span><br></pre></td></tr></table></figure><ol start="2"><li>å­ç±»å¤šæ€æ€§æ–¹æ³•</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_larger</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">if</span> x.largerThan(y):</span><br><span class="line">        <span class="keyword">return</span> x.<span class="built_in">str</span>()</span><br><span class="line">    <span class="keyword">return</span> y.<span class="built_in">str</span>()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ˜¾å¼é«˜é˜¶å‡½æ•°æ–¹æ³•ï¼Œæ‚¨æœ‰ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ¥æ‰“å°å‡ºä¸¤ä¸ªå¯¹è±¡ä¸­è¾ƒå¤§çš„ä¸€ä¸ªã€‚ç›¸åï¼Œåœ¨å­ç±»å¤šæ€æ€§æ–¹æ³•ä¸­ï¼Œå¯¹è±¡æœ¬èº«åšå‡ºé€‰æ‹©ã€‚æ‰€è°ƒç”¨ <code>largerFunction</code> çš„å–å†³äº x å’Œ y çš„å®é™…å«ä¹‰ã€‚</p><h2 id="Max-å‡½æ•°"><a href="#Max-å‡½æ•°" class="headerlink" title="Max å‡½æ•°"></a>Max å‡½æ•°</h2><p>å‡è®¾æˆ‘ä»¬æƒ³ç¼–å†™ä¸€ä¸ª <code>max</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä»»ä½•æ•°ç»„ï¼ˆæ— è®ºç±»å‹å¦‚ä½•ï¼‰å¹¶è¿”å›æ•°ç»„ä¸­çš„æœ€å¤§é¡¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">max</span><span class="params">(Object[] items)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxDex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; items.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (items[i] &gt; items[maxDex]) &#123;</span><br><span class="line">            maxDex = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> items[maxDex];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    Dog[] dogs = &#123;<span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Elyse&quot;</span>, <span class="number">3</span>), <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Sture&quot;</span>, <span class="number">9</span>), <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="string">&quot;Benjamin&quot;</span>, <span class="number">15</span>)&#125;;</span><br><span class="line">    <span class="type">Dog</span> <span class="variable">maxDog</span> <span class="operator">=</span> (Dog) max(dogs);</span><br><span class="line">    maxDog.bark();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸€å¤„å¾ˆæ˜æ˜¾çš„é”™è¯¯:<code>items[i] &gt; items[maxDex]</code>ï¼Œè¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯çš„åŸå› æ˜¯ï¼Œæ­¤è¡Œå‡å®š <code>&gt;</code> è¿ç®—ç¬¦ä½¿ç”¨ä»»æ„ Object ç±»å‹ï¼Œè€Œå®é™…ä¸Šå¹¶éå¦‚æ­¤ã€‚</p><p>ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Dog ç±»ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ”¾å¼ƒç¼–å†™ä¸€ä¸ª <code>maxDog</code> å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„æ•°ç»„çš„â€œä¸€ä¸ªçœŸæ­£çš„æœ€å¤§å‡½æ•°â€ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Dog <span class="title function_">maxDog</span><span class="params">(Dog[] dogs)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (dogs == <span class="literal">null</span> || dogs.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Dog</span> <span class="variable">maxDog</span> <span class="operator">=</span> dogs[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (Dog d : dogs) &#123;</span><br><span class="line">        <span class="keyword">if</span> (d.size &gt; maxDog.size) &#123;</span><br><span class="line">            maxDog = d;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxDog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è™½ç„¶è¿™åœ¨ç›®å‰æ˜¯å¯è¡Œçš„ï¼Œä½†å¦‚æœæˆ‘ä»¬æ”¾å¼ƒåˆ¶ä½œå¹¿ä¹‰ <code>max</code> å‡½æ•°çš„æ¢¦æƒ³ï¼Œè®© Dog ç±»å®šä¹‰è‡ªå·±çš„ <code>max</code> å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸å¾—ä¸å¯¹ç¨åå®šä¹‰çš„ä»»ä½•ç±»åšåŒæ ·çš„äº‹æƒ…ã€‚æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ªå‡½æ•°ã€ä¸€ä¸ª <code>maxCat</code> <code>maxPenguin</code> <code>maxWhale</code> å‡½æ•°ç­‰ï¼Œå¯¼è‡´ä¸å¿…è¦çš„é‡å¤å·¥ä½œå’Œå¤§é‡å†—ä½™ä»£ç ã€‚</p><p>å¯¼è‡´è¿™ç§æƒ…å†µçš„æ ¹æœ¬é—®é¢˜æ˜¯ <strong>Objects ä¸èƒ½ä¸ <code>&gt;</code> è¿›è¡Œæ¯”è¾ƒ</strong>ã€‚è¿™æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸º Java æ€ä¹ˆçŸ¥é“å®ƒæ˜¯å¦åº”è¯¥ä½¿ç”¨å¯¹è±¡çš„ String è¡¨ç¤ºã€å¤§å°æˆ–å…¶ä»–åº¦é‡æ¥è¿›è¡Œæ¯”è¾ƒï¼Ÿåœ¨ Python æˆ– C++ ä¸­ï¼Œ <code>&gt;</code> è¿ç®—ç¬¦çš„å·¥ä½œæ–¹å¼å¯ä»¥é‡æ–°å®šä¹‰ï¼Œä»¥ä¾¿åœ¨åº”ç”¨äºä¸åŒç±»å‹æ—¶ä»¥ä¸åŒçš„æ–¹å¼å·¥ä½œã€‚ä¸å¹¸çš„æ˜¯ï¼ŒJava æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚ç›¸åï¼Œæˆ‘ä»¬æ±‚åŠ©äº<strong>æ¥å£ç»§æ‰¿</strong>æ¥å¸®åŠ©æˆ‘ä»¬ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæ¥å£æ¥ä¿è¯ä»»ä½•å®ç°ç±»ï¼ˆå¦‚ Dogï¼‰éƒ½åŒ…å«ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>compareTo</code> ã€‚</p><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/dog_comparable.png" alt="img"></p><p>è®©æˆ‘ä»¬ç¼–å†™æˆ‘ä»¬çš„æ¥å£ã€‚æˆ‘ä»¬æŒ‡å®šä¸€ç§æ–¹æ³•<code>compareTo</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OurComparable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†è¿™æ ·å®šä¹‰å®ƒçš„è¡Œä¸ºï¼š</p><ul><li>å¦‚æœ <code>this</code> &lt; oï¼Œåˆ™è¿”å›è´Ÿæ•°ã€‚</li><li>å¦‚æœ <code>this</code> ç­‰äº oï¼Œåˆ™è¿”å› 0ã€‚</li><li>å¦‚æœ <code>this</code> &gt; oï¼Œåˆ™è¿”å›æ­£æ•°ã€‚</li></ul><p>ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº† <code>OurComparable</code> æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥è¦æ±‚ Dog ç±»å®ç°è¯¥ <code>compareTo</code> æ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°† Dog çš„ç±»å¤´æ›´æ”¹ä¸º  <code>implements OurComparable</code> ï¼Œç„¶åæ ¹æ®ä¸Šé¢å®šä¹‰çš„è¡Œä¸ºç¼–å†™ <code>compareTo</code> æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">OurComparable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(String n, <span class="type">int</span> s)</span> &#123;</span><br><span class="line">        name = n;</span><br><span class="line">        size = s;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bark</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(name + <span class="string">&quot; says: bark&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">uddaDog</span> <span class="operator">=</span> (Dog) o;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size - uddaDog.size;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>è¯·æ³¨æ„ï¼Œç”±äº <code>compareTo</code> æ¥å—ä»»ä½•ä»»æ„å¯¹è±¡ oï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å°†è¾“å…¥è½¬æ¢ä¸º Dog æ‰èƒ½ä½¿ç”¨ <code>size</code> å®ä¾‹å˜é‡è¿›è¡Œæ¯”è¾ƒã€‚</strong></p></blockquote><p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬åœ¨ç»ƒä¹  4.3.1 ä¸­å®šä¹‰çš„ <code>max</code> å‡½æ•°æ¨å¹¿ä¸ºï¼Œè€Œä¸æ˜¯æ¥å—ä»»ä½•ä»»æ„çš„å¯¹è±¡æ•°ç»„ï¼Œè€Œæ˜¯æ¥å— <code>OurComparable</code> å¯¹è±¡ - æˆ‘ä»¬è‚¯å®šçŸ¥é“æ‰€æœ‰å¯¹è±¡éƒ½å®ç°äº†è¯¥ <code>compareTo</code> æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> OurComparable <span class="title function_">max</span><span class="params">(OurComparable[] items)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">maxDex</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; items.length; i += <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">cmp</span> <span class="operator">=</span> items[i].compareTo(items[maxDex]);</span><br><span class="line">        <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            maxDex = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> items[maxDex];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¯ä»¥æ¥å—ä»»ä½• <code>OurComparable</code> ç±»å‹å¯¹è±¡çš„æ•°ç»„ï¼Œ <code>max</code> å¹¶è¿”å›æ•°ç»„ä¸­çš„æœ€å¤§å¯¹è±¡ã€‚</p><p>ä½¿ç”¨ç»§æ‰¿ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¨å¹¿æˆ‘ä»¬çš„æœ€å¤§åŒ–å‡½æ•°ã€‚è¿™ç§æ–¹æ³•æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p><ul><li>ä¸éœ€è¦æ¯ä¸ªç±»ä¸­çš„æ±‚æœ€å¤§ä»£ç ï¼ˆå³ä¸éœ€è¦ <code>Dog.maxDog(Dog[])</code> å‡½æ•°</li><li>æˆ‘ä»¬æœ‰ä»£ç å¯ä»¥ä¼˜é›…åœ°å¯¹å¤šç§ç±»å‹ï¼ˆå¤§å¤šæ•°ï¼‰è¿›è¡Œæ“ä½œ</li></ul><h2 id="Comparables"><a href="#Comparables" class="headerlink" title="Comparables"></a>Comparables</h2><p>æˆ‘ä»¬åˆšåˆšæ„å»ºçš„ <code>OurComparable</code> æ¥å£å¯ä»¥å·¥ä½œï¼Œä½†å¹¶ä¸å®Œç¾ã€‚ä»¥ä¸‹æ˜¯å®ƒçš„ä¸€äº›é—®é¢˜ï¼š</p><ul><li>å¯¹è±¡é—´å°´å°¬çš„ç±»å‹è½¬æ¢</li><li>æˆ‘ä»¬ç¼–å†™äº†å®ƒã€‚<ul><li>æ²¡æœ‰ç°æœ‰ç±»ç»§æ‰¿ OurComparable ï¼ˆä¾‹å¦‚ String ç­‰ï¼‰</li><li>æ²¡æœ‰ç°æœ‰ç±»ä½¿ç”¨ OurComparableï¼ˆä¾‹å¦‚ï¼Œæ²¡æœ‰ä½¿ç”¨ OurCompare çš„å†…ç½® max å‡½æ•°ï¼‰</li></ul></li></ul><p>è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å°†åˆ©ç”¨ä¸€ä¸ªåä¸º <code>Comparable</code> . <code>Comparable</code> å·²ç»ç”± Java å®šä¹‰ï¼Œå¹¶è¢«æ— æ•°åº“ä½¿ç”¨ã€‚</p><p><code>Comparable</code> çœ‹èµ·æ¥ä¸æˆ‘ä»¬åˆ¶ä½œçš„ OurComparable æ¥å£éå¸¸ç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ä¸ªä¸»è¦åŒºåˆ«ã€‚ä½ èƒ½å‘ç°å®ƒå—ï¼Ÿ</p><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/comparable_interface.png" alt="img"></p><p>è¯·æ³¨æ„ï¼Œ <code>Comparable&lt;T&gt;</code> è¿™æ„å‘³ç€å®ƒé‡‡ç”¨æ³›å‹ç±»å‹ã€‚è¿™å°†å¸®åŠ©æˆ‘ä»¬é¿å…å°†å¯¹è±¡è½¬æ¢ä¸ºç‰¹å®šç±»å‹ï¼ç°åœ¨ï¼Œæˆ‘ä»¬å°†é‡å†™ Dog ç±»ä»¥å®ç° Comparable æ¥å£ï¼Œç¡®ä¿å°†æ³›å‹ç±»å‹ <code>T</code> æ›´æ–°ä¸º Dogï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Dog&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Dog uddaDog)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size - uddaDog.size;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨å‰©ä¸‹çš„å°±æ˜¯å°† Maximizer ç±»ä¸­çš„æ¯ä¸ª OurComparable å®ä¾‹æ›´æ”¹ä¸º Comparableã€‚çœ‹ç€æœ€å¤§çš„ç‹—è¯´å å«ï¼š</p><p>æˆ‘ä»¬ç°åœ¨ä½¿ç”¨çœŸæ­£çš„å†…ç½®æ¥å£ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æˆ‘ä»¬ä¸ªäººåˆ›å»ºçš„æ¥å£ <code>OurComparable</code> ã€‚ <code>Comparable</code> å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ‰€æœ‰å·²ç»å­˜åœ¨çš„åº“å¹¶ä½¿ç”¨ <code>Comparable</code> .</p><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/comparable.png" alt="img"></p><h2 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a>Comparator</h2><p>æˆ‘ä»¬åˆšåˆšäº†è§£äº†å¯æ¯”è¾ƒçš„æ¥å£ï¼Œå®ƒä¸ºæ¯åªç‹—åµŒå…¥äº†å°†è‡ªå·±ä¸å¦ä¸€åªç‹—è¿›è¡Œæ¯”è¾ƒçš„èƒ½åŠ›ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€ä¸ªçœ‹èµ·æ¥éå¸¸ç›¸ä¼¼çš„æ–°æ¥å£ï¼Œç§°ä¸º <code>Comparator</code> .</p><p>è®©æˆ‘ä»¬ä»å®šä¹‰ä¸€äº›æœ¯è¯­å¼€å§‹ã€‚</p><ul><li>è‡ªç„¶é¡ºåº - ç”¨äºæŒ‡ç‰¹å®šç±» <code>compareTo</code> çš„æ–¹æ³•ä¸­éšå«çš„é¡ºåºã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå¦‚å‰æ‰€è¿°ï¼Œç‹—çš„è‡ªç„¶æ’åºæ˜¯æ ¹æ®å¤§å°çš„å€¼å®šä¹‰çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³ä»¥ä¸åŒäºç‹—çš„è‡ªç„¶é¡ºåºçš„æ–¹å¼å¯¹ç‹—è¿›è¡Œæ’åºï¼Œä¾‹å¦‚æŒ‰å®ƒä»¬åå­—çš„å­—æ¯é¡ºåºæ’åºï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p>Java å®ç°è¿™ä¸€ç‚¹çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>Comparator</code>ã€‚ç”±äº <code>Comparator</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>Comparator</code> çš„æ–¹æ³•æ˜¯é€šè¿‡åœ¨ <code>Dog</code> ç±»å†…éƒ¨ç¼–å†™ä¸€ä¸ªå®ç° <code>Comparator</code> æ¥å£çš„åµŒå¥—ç±»ã€‚</p><p>ä½†é¦–å…ˆï¼Œè¿™ä¸ªæ¥å£é‡Œé¢æœ‰ä»€ä¹ˆï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Comparator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">compare</span><span class="params">(T o1, T o2)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™è¡¨æ˜ <code>Comparator</code> æ¥å£è¦æ±‚ä»»ä½•å®ç°ç±»å®ç°è¯¥ <code>compare</code> æ–¹æ³•ã€‚çš„è§„åˆ™ <code>compare</code> å°±åƒï¼š <code>compareTo</code></p><ul><li>å¦‚æœ o1 &lt; o2ï¼Œåˆ™è¿”å›è´Ÿæ•°ã€‚</li><li>å¦‚æœ o1 ç­‰äº o2ï¼Œåˆ™è¿”å› 0ã€‚</li><li>å¦‚æœ o1 &gt; o2ï¼Œåˆ™è¿”å›æ­£æ•°ã€‚</li></ul><p>è®©æˆ‘ä»¬ç»™ Dog ä¸€ä¸ª NameComparatorã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°éµå¾ª <code>String</code> å·²ç»å®šä¹‰ <code>compareTo</code> çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Dog&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Dog uddaDog)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size - uddaDog.size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">NameComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;Dog&gt; &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Dog a, Dog b)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> a.name.compareTo(b.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Comparator&lt;Dog&gt; <span class="title function_">getNameComparator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NameComparator</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²å°† NameComparator å£°æ˜ä¸ºé™æ€ç±»ã€‚è¿™æ˜¯ä¸€ä¸ªç»†å¾®çš„å·®å¼‚ï¼Œä½†æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å®ä¾‹åŒ– Dog æ¥è·å– NameComparatorã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ¯”è¾ƒå™¨æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p></blockquote><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·æ£€ç´¢æˆ‘ä»¬çš„ NameComparatorï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;Dog&gt; nc = Dog.getNameComparator();</span><br></pre></td></tr></table></figure><p>æ€»è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª Dog ç±»ï¼Œå®ƒæœ‰ä¸€ä¸ªç§æœ‰çš„ NameComparator ç±»å’Œä¸€ä¸ªè¿”å› NameComparator çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æŒ‰åç§°çš„å­—æ¯é¡ºåºæ¯”è¾ƒç‹—ã€‚</p><p>è®©æˆ‘ä»¬çœ‹çœ‹ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­çš„ä¸€åˆ‡æ˜¯å¦‚ä½•å·¥ä½œçš„â€”â€”æˆ‘ä»¬æœ‰ä¸€ä¸ªå†…ç½®äº Java çš„æ¯”è¾ƒå™¨æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å®ƒæ¥åœ¨ Dog ä¸­å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ¯”è¾ƒå™¨ï¼ˆ <code>NameComparator</code> ã€ <code>SizeComparator</code> ç­‰ï¼‰ã€‚</p><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/comparator.png" alt="img"></p><p>æ€»è€Œè¨€ä¹‹ï¼ŒJava ä¸­çš„æ¥å£ä¸ºæˆ‘ä»¬æä¾›äº†è¿›è¡Œå›è°ƒçš„èƒ½åŠ›ã€‚æœ‰æ—¶ï¼Œä¸€ä¸ªå‡½æ•°éœ€è¦å¦ä¸€ä¸ªå¯èƒ½å°šæœªç¼–å†™çš„å‡½æ•°çš„å¸®åŠ©ï¼ˆä¾‹å¦‚ <code>max</code> needs <code>compareTo</code> ï¼‰ã€‚å›è°ƒå‡½æ•°æ˜¯å¸®åŠ©å‡½æ•°ï¼ˆåœ¨æ–¹æ¡ˆä¸­ä¸º <code>compareTo</code> ï¼‰ã€‚åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œè¿™æ˜¯ä½¿ç”¨æ˜¾å¼å‡½æ•°ä¼ é€’æ¥å®ç°çš„;åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬å°†æ‰€éœ€çš„å‡½æ•°åŒ…è£…åœ¨ä¸€ä¸ªæ¥å£ä¸­ã€‚</p><p>ä¸€ä¸ªå¯æ¯”è€…è¯´ï¼Œâ€œæˆ‘æƒ³å°†è‡ªå·±ä¸å¦ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ¯”è¾ƒâ€ã€‚å®ƒåµŒå…¥åœ¨å¯¹è±¡æœ¬èº«ä¸­ï¼Œå®ƒå®šä¹‰äº†ç±»å‹çš„<strong>è‡ªç„¶é¡ºåº</strong>ã€‚å¦ä¸€æ–¹é¢ï¼Œæ¯”è¾ƒå™¨æ›´åƒæ˜¯å°†ä¸¤ä¸ªå¯¹è±¡ç›¸äº’æ¯”è¾ƒçš„ç¬¬ä¸‰æ–¹æœºå™¨ã€‚ç”±äºåªæœ‰ä¸€ç§æ–¹æ³• <code>compareTo</code> çš„ç©ºé—´ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¤šç§æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å¿…é¡»æ±‚åŠ©äºæ¯”è¾ƒå™¨ã€‚</p><blockquote><p>å³<code>a.max(b)</code>å’Œmax(a, b)çš„åŒºåˆ«</p></blockquote><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æ¥å£ä¸ºæˆ‘ä»¬æä¾›äº†è¿›è¡Œå›è°ƒçš„èƒ½åŠ›ï¼š</p><ul><li>æœ‰æ—¶å€™ï¼Œä¸€ä¸ªå‡½æ•°éœ€è¦å¦ä¸€ä¸ªå¯èƒ½å°šæœªç¼–å†™çš„å‡½æ•°çš„å¸®åŠ©ã€‚ ä¾‹å¦‚ï¼š<code>max</code> éœ€è¦ <code>compareTo</code>ã€‚ è¿™ç§å¸®åŠ©å‡½æ•°æœ‰æ—¶è¢«ç§°ä¸ºâ€œå›è°ƒâ€ã€‚ </li><li>ä¸€äº›ç¼–ç¨‹è¯­è¨€ä½¿ç”¨æ˜¾å¼çš„å‡½æ•°ä¼ é€’æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚ </li><li>åœ¨Javaä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°†æ‰€éœ€çš„å‡½æ•°åŒ…è£…åœ¨æ¥å£ä¸­æ¥å®ç°è¿™ä¸€ç‚¹ï¼ˆä¾‹å¦‚ï¼Œ<code>Arrays.sort</code> éœ€è¦åœ¨æ¯”è¾ƒå™¨æ¥å£ä¸­å®šä¹‰çš„ <code>compare</code>ï¼‰ã€‚ </li><li><code>Arrays.sort</code> åœ¨éœ€è¦è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šâ€œå›è°ƒâ€ç›¸åº”çš„å‡½æ•°ã€‚ ç±»ä¼¼äºåœ¨éœ€è¦ä¿¡æ¯æ—¶å°†ä½ çš„å·ç æä¾›ç»™åˆ«äººã€‚</li></ul><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><ol><li><strong>Comparablesï¼ˆå¯æ¯”è¾ƒçš„ï¼‰ï¼š</strong><ul><li>å¯æ¯”è¾ƒçš„å¯¹è±¡é€šå¸¸å®ç°<code>Comparable</code>æ¥å£ï¼Œè¯¥æ¥å£å®šä¹‰äº†<code>compareTo</code>æ–¹æ³•ï¼Œè§„å®šäº†å¯¹è±¡çš„è‡ªç„¶é¡ºåºã€‚</li><li>è‡ªç„¶é¡ºåºæ˜¯å¯¹è±¡çš„é»˜è®¤æ’åºæ–¹å¼ã€‚</li><li>åœ¨å­ç±»ä¸­å®ç°<code>compareTo</code>æ–¹æ³•ï¼Œä»¥ä¾¿å¯¹è±¡å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä¸­è¿›è¡Œæ¯”è¾ƒï¼Œä¾‹å¦‚åœ¨æ’åºä¸­ä½¿ç”¨ã€‚</li></ul></li><li><strong>Comparatorsï¼ˆæ¯”è¾ƒå™¨ï¼‰ï¼š</strong><ul><li>æ¯”è¾ƒå™¨æ˜¯å®ç°äº†<code>Comparator</code>æ¥å£çš„å¯¹è±¡ï¼Œè¯¥æ¥å£å®šä¹‰äº†<code>compare</code>æ–¹æ³•ï¼Œå…è®¸ä¸¤ä¸ªå¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰çš„æ¯”è¾ƒã€‚</li><li>æ¯”è¾ƒå™¨å…è®¸åœ¨ä¸ä¿®æ”¹å¯¹è±¡ç±»æœ¬èº«çš„æƒ…å†µä¸‹å®šä¹‰å¤šç§æ¯”è¾ƒæ–¹å¼ã€‚</li><li>åœ¨éœ€è¦å¤šç§æ¯”è¾ƒæ–¹å¼æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸åŒçš„æ¯”è¾ƒå™¨ç±»ï¼Œä¾‹å¦‚<code>NameComparator</code>å’Œ<code>SizeComparator</code>ã€‚</li></ul></li><li><strong>å­ç±»å¤šæ€æ€§ï¼š</strong><ul><li>å¤šæ€æ€§æ¶‰åŠå¯¹è±¡åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥å…·æœ‰å¤šç§å½¢å¼æˆ–ç±»å‹çš„æ¦‚å¿µã€‚</li><li>åœ¨Javaä¸­ï¼Œå¤šæ€æ€§è¡¨ç°ä¸ºå¯¹è±¡å¯ä»¥è¢«è§†ä¸ºå…¶è‡ªèº«ç±»çš„å®ä¾‹ã€å…¶è¶…ç±»çš„å®ä¾‹ç­‰ã€‚</li><li>å­ç±»å¤šæ€æ€§é€šè¿‡ç»§æ‰¿å’Œæ¥å£å®ç°ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ï¼Œå…è®¸å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡ã€‚</li></ul></li><li><strong>æ¥å£å’Œå›è°ƒå‡½æ•°ï¼š</strong><ul><li>æ¥å£æä¾›äº†è¿›è¡Œå›è°ƒçš„èƒ½åŠ›ï¼Œå…è®¸ä¸€ä¸ªå‡½æ•°åœ¨éœ€è¦æ—¶è°ƒç”¨å¦ä¸€ä¸ªå¯èƒ½å°šæœªç¼–å†™çš„å‡½æ•°ã€‚</li><li>åœ¨Javaä¸­ï¼Œå›è°ƒå‡½æ•°é€šå¸¸é€šè¿‡å°†å‡½æ•°åŒ…è£…åœ¨æ¥å£ä¸­å®ç°ï¼Œä¾‹å¦‚<code>compareTo</code>æ–¹æ³•åœ¨<code>OurComparable</code>æ¥å£ä¸­å®šä¹‰ã€‚</li><li>ä½¿ç”¨æ¥å£å’Œæ¯”è¾ƒå™¨ï¼Œå¯ä»¥å®ç°å¤šç§æ¯”è¾ƒæ–¹å¼ï¼Œä½¿å¾—å¯¹è±¡åœ¨æ’åºç­‰åœºæ™¯ä¸­æ›´åŠ çµæ´»ã€‚</li></ul></li></ol><h2 id="å…³ç³»"><a href="#å…³ç³»" class="headerlink" title="å…³ç³»"></a>å…³ç³»</h2><ol><li><strong>Comparables å’Œ Comparatorsï¼š</strong><ul><li><code>Comparables</code> å’Œ <code>Comparators</code> éƒ½æ˜¯ç”¨äºè¿›è¡Œå¯¹è±¡æ¯”è¾ƒçš„æœºåˆ¶ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œå®ç°æ–¹å¼ç•¥æœ‰ä¸åŒã€‚</li><li><code>Comparables</code> ç”¨äºå®šä¹‰å¯¹è±¡çš„è‡ªç„¶é¡ºåºï¼Œè¦æ±‚å¯¹è±¡è‡ªèº«å®ç° <code>Comparable</code> æ¥å£ï¼Œå¹¶é‡å†™ <code>compareTo</code> æ–¹æ³•æ¥è§„å®šæ¯”è¾ƒè§„åˆ™ã€‚</li><li><code>Comparators</code> ç”¨äºå®ç°è‡ªå®šä¹‰çš„æ¯”è¾ƒé€»è¾‘ï¼Œå¯ä»¥ä¸ºåŒä¸€ç±»å¯¹è±¡å®šä¹‰å¤šä¸ªä¸åŒçš„æ¯”è¾ƒæ–¹å¼ï¼Œè€Œæ— éœ€ä¿®æ”¹å¯¹è±¡ç±»æœ¬èº«ã€‚æ¯”è¾ƒå™¨å®ç° <code>Comparator</code> æ¥å£ï¼Œå¹¶é‡å†™ <code>compare</code> æ–¹æ³•ã€‚</li></ul></li><li><strong>å­ç±»å¤šæ€æ€§å’Œæ¥å£çš„å…³ç³»ï¼š</strong><ul><li>å­ç±»å¤šæ€æ€§æ¶‰åŠå¯¹è±¡åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¯ä»¥å…·æœ‰å¤šç§å½¢å¼æˆ–ç±»å‹çš„æ¦‚å¿µã€‚åœ¨æ–‡ç« ä¸­ï¼Œå­ç±»å¤šæ€æ€§é€šè¿‡ç»§æ‰¿å’Œæ¥å£å®ç°ï¼Œä½¿å¾—å¯¹è±¡å¯ä»¥å…·æœ‰ä¸åŒçš„å½¢å¼ã€‚</li><li>æ¥å£åœ¨è¿™é‡Œèµ·åˆ°äº†å…³é”®ä½œç”¨ã€‚ä¾‹å¦‚ï¼Œ<code>OurComparable</code> æ¥å£å®šä¹‰äº† <code>compareTo</code> æ–¹æ³•ï¼Œé€šè¿‡è®©ç±»å®ç°è¿™ä¸ªæ¥å£ï¼Œå¯ä»¥åœ¨ä¸åŒç±»å‹çš„ç±»ä¹‹é—´å®ç°ç›¸ä¼¼çš„æ¯”è¾ƒè¡Œä¸ºï¼Œå®ç°å¤šæ€æ€§ã€‚</li></ul></li><li><strong>ä½¿ç”¨ Comparables å’Œ Comparators å®ç°çµæ´»æ€§ï¼š</strong><ul><li>é€šè¿‡ä½¿ç”¨ <code>Comparables</code> æ¥å£ï¼Œå¯¹è±¡å¯ä»¥å®šä¹‰å®ƒä»¬çš„è‡ªç„¶é¡ºåºï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥å‚ä¸æ’åºç­‰æ“ä½œã€‚</li><li>ä½¿ç”¨ <code>Comparators</code> æ¥å£ï¼Œå¯ä»¥å®ç°å¤šç§æ¯”è¾ƒæ–¹å¼ï¼Œè€Œä¸å¿…ä¿®æ”¹å¯¹è±¡çš„ç±»ã€‚è¿™æä¾›äº†çµæ´»æ€§ï¼Œå…è®¸åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ä¸åŒçš„æ¯”è¾ƒè§„åˆ™ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼ŒComparables å’Œ Comparators æä¾›äº†ä¸åŒå±‚æ¬¡çš„æ¯”è¾ƒæœºåˆ¶ï¼Œä½¿å¾—ä»£ç æ›´åŠ çµæ´»ï¼ŒåŒæ—¶å­ç±»å¤šæ€æ€§é€šè¿‡æ¥å£çš„å®ç°ä½¿å¾—å¯¹è±¡å¯ä»¥ä»¥å¤šç§å½¢å¼å­˜åœ¨ã€‚è¿™äº›æ¦‚å¿µç›¸äº’åä½œï¼Œä¸ºJavaä¸­çš„å¯¹è±¡æ¯”è¾ƒå’Œå¤šæ€æ€§æä¾›äº†å¼ºå¤§çš„å·¥å…·ã€‚</p><h2 id="å¯¹æŠ½è±¡çš„æ„ä¹‰"><a href="#å¯¹æŠ½è±¡çš„æ„ä¹‰" class="headerlink" title="å¯¹æŠ½è±¡çš„æ„ä¹‰"></a>å¯¹æŠ½è±¡çš„æ„ä¹‰</h2><ol><li><strong>æŠ½è±¡æ¥å£æé«˜é€šç”¨æ€§ï¼š</strong><ul><li>æ¥å£ï¼ˆæ¯”å¦‚ <code>Comparable</code> å’Œ <code>Comparator</code>ï¼‰æä¾›äº†æŠ½è±¡çš„è§„èŒƒï¼Œå®šä¹‰äº†åœ¨ä¸åŒç±»ä¹‹é—´è¿›è¡Œæ¯”è¾ƒçš„é€šç”¨æ–¹å¼ã€‚</li><li>è¿™ç§æŠ½è±¡æ€§ä½¿å¾—å¯ä»¥ç¼–å†™é€šç”¨çš„ç®—æ³•å’Œæ–¹æ³•ï¼Œè€Œæ— éœ€å…³å¿ƒå…·ä½“ç±»çš„å®ç°ç»†èŠ‚ï¼Œä»è€Œæé«˜äº†ä»£ç çš„é€šç”¨æ€§ã€‚</li></ul></li><li><strong>å¤šæ€æ€§æé«˜æ‰©å±•æ€§ï¼š</strong><ul><li>ä½¿ç”¨ <code>Comparables</code> å’Œ <code>Comparators</code> çš„å¤šæ€æ€§ï¼Œä»£ç å¯ä»¥å¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡ï¼Œå¹¶æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©é€‚å½“çš„æ¯”è¾ƒæ–¹å¼ã€‚</li><li>æ–°çš„ç±»å¯ä»¥è½»æ¾åœ°å®ç°ç›¸åº”çš„æ¥å£æˆ–æ¯”è¾ƒå™¨ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ç°æœ‰çš„ä»£ç ï¼Œä»è€Œæé«˜äº†ä»£ç çš„æ‰©å±•æ€§ã€‚</li></ul></li><li><strong>å‡å°‘è€¦åˆåº¦ï¼š</strong><ul><li>é€šè¿‡æ¥å£å’Œå¤šæ€æ€§ï¼Œå®ç°äº†å¯¹è±¡ä¹‹é—´çš„æ¾æ•£è€¦åˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç®—æ³•å¯èƒ½ä»…å…³å¿ƒå¯¹è±¡æ˜¯å¦å¯æ¯”è¾ƒï¼Œè€Œä¸å…³å¿ƒå¯¹è±¡çš„å…·ä½“ç±»å‹ã€‚</li><li>è¿™ç§å‡å°‘è€¦åˆåº¦çš„è®¾è®¡ä½¿å¾—ä»£ç æ›´åŠ çµæ´»ï¼Œå‡å°‘äº†å¯¹å…·ä½“å®ç°çš„ä¾èµ–ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ã€‚</li></ul></li><li><strong>æ”¯æŒç®—æ³•çš„é€šç”¨æ€§ï¼š</strong><ul><li>é€šè¿‡æ¥å£å’ŒæŠ½è±¡çš„æ¯”è¾ƒæœºåˆ¶ï¼Œå¯ä»¥ç¼–å†™é€šç”¨çš„æ’åºã€æœç´¢ç­‰ç®—æ³•ï¼Œè¿™äº›ç®—æ³•å¯ä»¥åœ¨ä¸åŒç±»å‹çš„å¯¹è±¡ä¸Šå·¥ä½œï¼Œåªè¦å®ƒä»¬å®ç°äº†ç›¸åº”çš„æ¥å£æˆ–æ¯”è¾ƒå™¨ã€‚</li><li>è¿™ç§é€šç”¨æ€§ä½¿å¾—å¯ä»¥æ›´å®¹æ˜“åœ°å…±äº«å’Œé‡ç”¨ç®—æ³•ï¼ŒåŒæ—¶å‡å°‘äº†ä»£ç å†—ä½™ã€‚</li></ul></li><li><strong>æ›´å¥½çš„ä»£ç ç»„ç»‡å’Œå¯è¯»æ€§ï¼š</strong><ul><li>ä½¿ç”¨æŠ½è±¡æ¥å£å’Œå¤šæ€æ€§ï¼Œå¯ä»¥æ›´æ¸…æ™°åœ°ç»„ç»‡ä»£ç ï¼Œå°†é€šç”¨çš„æ¯”è¾ƒé€»è¾‘ä¸å…·ä½“ç±»çš„å®ç°åˆ†ç¦»ã€‚</li><li>è¿™æé«˜äº†ä»£ç çš„å¯è¯»æ€§ï¼Œä½¿å¾—ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</li></ul></li></ol><p>æ€»ä½“è€Œè¨€ï¼Œé€šè¿‡åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­å¼•å…¥æŠ½è±¡æ¥å£å’Œå¤šæ€æ€§ï¼Œå¯ä»¥ä½¿ä»£ç æ›´åŠ çµæ´»ã€é€šç”¨å’Œå¯æ‰©å±•ã€‚è¿™ç§å®ç°å¯¹äºå¤„ç†ä¸åŒç±»å‹çš„å¯¹è±¡ã€æ”¯æŒé€šç”¨ç®—æ³•ä»¥åŠå‡å°‘ä»£ç è€¦åˆåº¦éƒ½å…·æœ‰é‡è¦çš„æ„ä¹‰ã€‚</p><h2 id="æ€ç»´æµç¨‹"><a href="#æ€ç»´æµç¨‹" class="headerlink" title="æ€ç»´æµç¨‹"></a>æ€ç»´æµç¨‹</h2><ol><li><p>æˆ‘ä»¬å¸Œæœ›ç¼–å†™ä¸€ä¸ª <code>max</code> å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä»»ä½•æ•°ç»„ï¼ˆæ— è®ºç±»å‹å¦‚ä½•ï¼‰å¹¶è¿”å›æ•°ç»„ä¸­çš„æœ€å¤§é¡¹ã€‚å› ä¸ºç›®å‰æˆ‘ä»¬åªæœ‰<code>Dog</code>ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨<code>Dog</code>ç±»ä¸­ç¼–å†™äº†ä¸€ä¸ª<code>MaxDog</code>çš„æ–¹æ³•ã€‚</p></li><li><p>è™½ç„¶è¿™æ ·å­å¯ä»¥å®ç°æˆ‘ä»¬çš„ç›®çš„ï¼Œä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬æœ‰å…¶ä»–ç±»æƒ³è¦æ¯”è¾ƒæ—¶ï¼Œè¿™ä¸ª<code>Max</code>å‡½æ•°æ²¡æœ‰åŠæ³•æ¯”è¾ƒï¼Œå¯¼è‡´è¿™ç§æƒ…å†µçš„æ ¹æœ¬é—®é¢˜æ˜¯ <strong>Objects ä¸èƒ½ä¸ <code>&gt;</code> è¿›è¡Œæ¯”è¾ƒ</strong>ã€‚äºæ˜¯æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªæ¥å£æ¥ä¿è¯ä»»ä½•å®ç°ç±»ï¼ˆå¦‚ Dogï¼‰éƒ½åŒ…å«ä¸€ä¸ªæ¯”è¾ƒæ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <code>compareTo</code> ã€‚</p></li><li><p>äºæ˜¯æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªOurComparableæ¥å£ï¼Œé‡Œé¢è§„å®šäº†compareToæ–¹æ³•ã€‚æˆ‘ä»¬åœ¨Dogç±»ä¸­å®ç°åï¼ŒæŠŠmaxæ–¹æ³•ä¿®æ”¹æˆäº†è¿™æ ·</p></li><li><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/image-20240130034614544.png" alt="image-20240130034614544"></p></li><li><p>ä½†æ˜¯è¿™æ ·å­åˆæœ‰äº›é—®é¢˜:æ²¡æœ‰ç°æœ‰ç±»ç»§æ‰¿ OurComparable, æ²¡æœ‰ç°æœ‰ç±»ä½¿ç”¨ OurComparableã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å°†åˆ©ç”¨ä¸€ä¸ªåä¸º <code>Comparable</code> . <code>Comparable</code> å·²ç»ç”± Java å®šä¹‰ï¼Œå¹¶è¢«æ— æ•°åº“ä½¿ç”¨ã€‚</p></li><li><p>å¦‚å‰æ‰€è¿°ï¼Œç‹—çš„è‡ªç„¶æ’åºæ˜¯æ ¹æ®å¤§å°çš„å€¼å®šä¹‰çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³ä»¥ä¸åŒäºç‹—çš„è‡ªç„¶é¡ºåºçš„æ–¹å¼å¯¹ç‹—è¿›è¡Œæ’åºï¼Œä¾‹å¦‚æŒ‰å®ƒä»¬åå­—çš„å­—æ¯é¡ºåºæ’åºï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p></li><li><p>Java å®ç°è¿™ä¸€ç‚¹çš„æ–¹å¼æ˜¯ä½¿ç”¨ <code>Comparator</code>ã€‚ç”±äº <code>Comparator</code> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>Comparator</code> çš„æ–¹æ³•æ˜¯é€šè¿‡åœ¨ <code>Dog</code> ç±»å†…éƒ¨ç¼–å†™ä¸€ä¸ªå®ç° <code>Comparator</code> æ¥å£çš„åµŒå¥—ç±»ã€‚</p></li><li><pre><code class="java">import java.util.Comparator;public class Dog implements Comparable&lt;Dog&gt; &#123;    ...    public int compareTo(Dog uddaDog) &#123;        return this.size - uddaDog.size;    &#125;    private static class NameComparator implements Comparator&lt;Dog&gt; &#123;        public int compare(Dog a, Dog b) &#123;            return a.name.compareTo(b.name);        &#125;    &#125;    public static Comparator&lt;Dog&gt; getNameComparator() &#123;        return new NameComparator();    &#125;&#125;</code></pre></li><li><p>è¿™æ ·å­å°±èƒ½å®ç°è‡ªå®šä¹‰æ’åº</p></li><li><p><img src="/2024/01/30/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-9-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-3/image-20240130032414722.png" alt="image-20240130032414722"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(å…«)-Rd4.2-Extends.Casting,HigherOrderFunction</title>
      <link href="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-2/"/>
      <url>/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-2/</url>
      
        <content type="html"><![CDATA[<p>å¹»ç¯ç‰‡:<a href="https://docs.google.com/presentation/d/1zsr4-MHM5STYr_b0l-lZ8ABqAPzyIU3P31qWKP2M3m4/edit#slide=id.g109ce79706_0_385">cs61b 2021 lec9 inheritance2 - Google å¹»ç¯ç‰‡</a></p><p>Reading:<a href="https://joshhug.gitbooks.io/hug61b/content/chap4/chap42.html">4.2 Extends, Casting, Higher Order Functions Â· Hug61B (gitbooks.io)</a></p><h1 id="Extendså…³é”®å­—"><a href="#Extendså…³é”®å­—" class="headerlink" title="Extendså…³é”®å­—"></a>Extendså…³é”®å­—</h1><p>ç°åœ¨ï¼Œæ‚¨å·²ç»äº†è§£äº†å¦‚ä½•ä½¿ç”¨ <code>implements</code> å…³é”®å­—æ¥å®šä¹‰ä¸æ¥å£çš„å±‚æ¬¡ç»“æ„å…³ç³»ã€‚å¦‚æœæˆ‘ä»¬æƒ³å®šä¹‰ç±»ä¹‹é—´çš„å±‚æ¬¡ç»“æ„å…³ç³»æ€ä¹ˆåŠï¼Ÿ</p><ul><li><code>implements</code> å…³é”®å­—ï¼šå®šä¹‰ç±»ä¸æ¥å£çš„å±‚æ¬¡ç»“æ„å…³ç³»</li><li><code>extends</code>å…³é”®å­—ï¼šå®šä¹‰ç±»ä¹‹é—´çš„å±‚æ¬¡ç»“æ„å…³ç³»</li></ul><p>é€šè¿‡ä½¿ç”¨ <code>extends</code> å…³é”®å­—ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æˆå‘˜ã€‚ â€œæˆå‘˜â€åŒ…æ‹¬ï¼š</p><ul><li>æ‰€æœ‰å®ä¾‹å˜é‡å’Œé™æ€å˜é‡</li><li>æ‰€æœ‰æ–¹æ³•</li><li>æ‰€æœ‰åµŒå¥—ç±»</li></ul><p>è¯·æ³¨æ„ï¼Œæ„é€ å‡½æ•°ä¸æ˜¯ç»§æ‰¿çš„ï¼Œå­ç±»ä¸èƒ½ç›´æ¥è®¿é—®ç§æœ‰æˆå‘˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** è¯·æ³¨æ„ï¼Œå½“æœ‰äººè°ƒç”¨ removeLast SLList æ—¶ï¼Œå®ƒä¼šä¸¢å¼ƒè¯¥å€¼ - å†ä¹Ÿçœ‹ä¸åˆ°äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœé‚£äº›è¢«ç§»é™¤çš„ä»·å€¼è§‚ç¦»å¼€å¹¶å¼€å§‹å¯¹æˆ‘ä»¬è¿›è¡Œå¤§è§„æ¨¡çš„åæŠ—å‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½é‚£äº›è¢«åˆ é™¤çš„ï¼ˆæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´æ˜¯æœ‰ç¼ºé™·çš„&gt;:(ï¼‰å€¼æ˜¯ä»€ä¹ˆï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¿½è¸ªå®ƒä»¬å¹¶åœ¨ä»¥åç»ˆæ­¢å®ƒä»¬ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–°ç±» VengefulSLListï¼Œå®ƒè®°ä½äº†æ‰€æœ‰è¢« removeLast æ”¾é€çš„å…ƒç´ ã€‚*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VengefulSLList</span>&lt;Item&gt; <span class="keyword">extends</span> <span class="title class_">SLList</span>&lt;Item&gt; &#123;</span><br><span class="line">    SLList&lt;Item&gt; deletedItems;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">VengefulSLList</span><span class="params">()</span> &#123;</span><br><span class="line">        deletedItems = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;Item&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Item</span> <span class="variable">x</span> <span class="operator">=</span> <span class="built_in">super</span>.removeLast();</span><br><span class="line">        deletedItems.addLast(x);</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Prints deleted items. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printLostItems</span><span class="params">()</span> &#123;</span><br><span class="line">        deletedItems.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="surper"><a href="#surper" class="headerlink" title="surper()"></a>surper()</h2><p>æˆ‘ä»¬ç»§æ‰¿è¿‡æ¥çš„ä¸åŒ…å«æ„é€ å‡½æ•°ï¼Œè™½ç„¶æ„é€ å‡½æ•°ä¸æ˜¯ç»§æ‰¿çš„ï¼Œä½† Java è¦æ±‚æ‰€æœ‰æ„é€ å‡½æ•°éƒ½å¿…é¡»<strong>ä»è°ƒç”¨å…¶è¶…ç±»çš„æ„é€ å‡½æ•°ä¹‹ä¸€å¼€å§‹</strong>ã€‚å½“æˆ‘ä»¬è°ƒç”¨å­ç±»çš„æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œä¼šéšå½¢åœ°è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­åŠ å…¥<code>surper()</code>è¯­å¥æ¥æ˜¾æ€§è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">VengefulSLList</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();<span class="comment">//æˆ–è€…åˆ æ‰</span></span><br><span class="line">    deletedItems = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™æ ·å­çœ‹èµ·æ¥surper()å¥½åƒæ²¡æœ‰å­˜åœ¨çš„å¿…è¦</p></blockquote><p>ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦è°ƒç”¨å¸¦å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœçº¯éšå½¢è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°çš„è¯ï¼Œæˆ‘ä»¬çš„ä¼ å…¥çš„å‚æ•°å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦å°†å‚æ•°ä¼ å…¥<code>surper()</code>ä¸­ï¼Œå³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">VengefulSLList</span><span class="params">(Item x)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(x);</span><br><span class="line">    deletedItems = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;Item&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡ç±»-The-Object-Class"><a href="#å¯¹è±¡ç±»-The-Object-Class" class="headerlink" title="å¯¹è±¡ç±»(The Object Class)"></a>å¯¹è±¡ç±»(The Object Class)</h2><p>Java ä¸­çš„æ¯ä¸ªç±»éƒ½æ˜¯ Object ç±»æˆ– <code>extends</code> Object ç±»çš„åä»£ã€‚å³ä½¿ç±»ä¸­æ²¡æœ‰æ˜¾å¼ç±»ï¼Œå®ƒä»¬ä»ç„¶éšå¼ <code>extends</code> æ‰©å±• Object ç±»ã€‚</p><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-2/image-20240130003225738.png" alt="image-20240130003225738"></p><blockquote><p>è™šçº¿è¡¨ç¤ºéšå¼ç»§æ‰¿</p></blockquote><p>Documentation for Object class: <a href="https://docs.oracle.com/javase/9/docs/api/java/lang/Object.html">Object (Java SE 9 &amp; JDK 9 ) (oracle.com)</a></p><h1 id="å°è£…-Encapsulation"><a href="#å°è£…-Encapsulation" class="headerlink" title="å°è£…(Encapsulation)"></a>å°è£…(Encapsulation)</h1><p>å°è£…æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜ç”¨æ¥æŠµæŠ—æˆ‘ä»¬æœ€å¤§çš„æ•Œäººï¼šå¤æ‚æ€§çš„æ–¹æ³•ä¹‹ä¸€ã€‚ç®¡ç†å¤æ‚æ€§æ˜¯æˆ‘ä»¬åœ¨ç¼–å†™å¤§å‹ç¨‹åºæ—¶å¿…é¡»é¢å¯¹çš„ä¸»è¦æŒ‘æˆ˜ä¹‹ä¸€ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç”¨æ¥å¯¹æŠ—å¤æ‚æ€§çš„ä¸€äº›å·¥å…·åŒ…æ‹¬åˆ†å±‚æŠ½è±¡ï¼ˆæŠ½è±¡éšœç¢ï¼ï¼‰å’Œç§°ä¸ºâ€œä¸ºå˜é©è€Œè®¾è®¡â€çš„æ¦‚å¿µã€‚è¿™å›´ç»•ç€è¿™æ ·ä¸€ç§æƒ³æ³•ï¼Œå³ç¨‹åºåº”è¯¥è¢«æ„å»ºæˆæ¨¡å—åŒ–çš„ã€å¯äº’æ¢çš„éƒ¨åˆ†ï¼Œè¿™äº›éƒ¨åˆ†å¯ä»¥åœ¨ä¸ç ´åç³»ç»Ÿçš„æƒ…å†µä¸‹è¿›è¡Œäº¤æ¢ã€‚æ­¤å¤–ï¼Œåœ¨ç®¡ç†å¤§å‹ç³»ç»Ÿæ—¶ï¼Œéšè—å…¶ä»–äººä¸éœ€è¦çš„ä¿¡æ¯æ˜¯å¦ä¸€ç§åŸºæœ¬æ–¹æ³•ã€‚</p><p>å°è£…çš„æ ¹æºåœ¨äºè¿™ç§å‘å¤–éƒ¨éšè—ä¿¡æ¯çš„æ¦‚å¿µã€‚è§‚å¯Ÿå®ƒçš„ä¸€ç§æ–¹æ³•æ˜¯äº†è§£å°è£…å¦‚ä½•ç±»ä¼¼äºäººç±»ç»†èƒã€‚ç»†èƒçš„å†…éƒ¨å¯èƒ½éå¸¸å¤æ‚ï¼Œç”±æŸ“è‰²ä½“ã€çº¿ç²’ä½“ã€æ ¸ç³–ä½“ç­‰ç»„æˆï¼Œä½†å®ƒè¢«å®Œå…¨å°è£…åœ¨ä¸€ä¸ªæ¨¡å—ä¸­â€”â€”æŠ½è±¡å‡ºå†…éƒ¨çš„å¤æ‚æ€§ã€‚</p><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-2/cell_encapsulated.png" alt="img"></p><p>åœ¨è®¡ç®—æœºç§‘å­¦æœ¯è¯­ä¸­ï¼Œæ¨¡å—å¯ä»¥å®šä¹‰ä¸ºä¸€ç»„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ä½œä¸ºä¸€ä¸ªæ•´ä½“ååŒå·¥ä½œä»¥æ‰§è¡Œä¸€é¡¹ä»»åŠ¡æˆ–ä¸€ç»„ç›¸å…³ä»»åŠ¡ã€‚è¿™å¯èƒ½ç±»ä¼¼äºè¡¨ç¤ºåˆ—è¡¨çš„ç±»ã€‚ç°åœ¨ï¼Œå¦‚æœä¸€ä¸ªæ¨¡å—çš„å®ç°ç»†èŠ‚åœ¨å†…éƒ¨è¢«éšè—ï¼Œå¹¶ä¸”ä¸å®ƒäº¤äº’çš„å”¯ä¸€æ–¹æ³•æ˜¯é€šè¿‡ä¸€ä¸ªè®°å½•çš„æ¥å£ï¼Œé‚£ä¹ˆè¯¥æ¨¡å—å°±è¢«ç§°ä¸ºå°è£…ã€‚</p><p>ä»¥ <code>ArrayDeque</code> ç±»ä¸ºä¾‹ã€‚å¤–éƒ¨ä¸–ç•Œèƒ½å¤Ÿ <code>ArrayDeque</code> é€šè¿‡å…¶å®šä¹‰çš„æ–¹æ³•ï¼ˆå¦‚ <code>addLast</code> å’Œ ï¼‰åˆ©ç”¨å’Œ <code>removeLast</code> ä¸ä¹‹äº¤äº’ã€‚ä½†æ˜¯ï¼Œä»–ä»¬ä¸éœ€è¦äº†è§£æ•°æ®ç»“æ„å¦‚ä½•å®ç°çš„å¤æ‚ç»†èŠ‚ï¼Œä»¥ä¾¿èƒ½å¤Ÿæœ‰æ•ˆåœ°ä½¿ç”¨å®ƒã€‚</p><h2 id="æŠ½è±¡éšœç¢-Abstraction-Barriers"><a href="#æŠ½è±¡éšœç¢-Abstraction-Barriers" class="headerlink" title="æŠ½è±¡éšœç¢(Abstraction Barriers)"></a>æŠ½è±¡éšœç¢(Abstraction Barriers)</h2><p>ç†æƒ³æƒ…å†µä¸‹ï¼Œç”¨æˆ·åº”è¯¥æ— æ³•è§‚å¯Ÿä»–ä»¬æ­£åœ¨ä½¿ç”¨çš„æ•°æ®ç»“æ„çš„å†…éƒ¨å·¥ä½œåŸç†ã€‚å¹¸è¿çš„æ˜¯ï¼ŒJava ä½¿å®æ–½æŠ½è±¡å£å’å˜å¾—å®¹æ˜“ã€‚åœ¨ Java ä¸­ä½¿ç”¨å…³é”®å­— <code>private</code> ï¼Œå‡ ä¹ä¸å¯èƒ½æŸ¥çœ‹å¯¹è±¡å†…éƒ¨ - ç¡®ä¿åº•å±‚å¤æ‚æ€§ä¸ä¼šæš´éœ²ç»™å¤–ç•Œã€‚</p><h2 id="ç»§æ‰¿å¦‚ä½•ç ´åå°è£…"><a href="#ç»§æ‰¿å¦‚ä½•ç ´åå°è£…" class="headerlink" title="ç»§æ‰¿å¦‚ä½•ç ´åå°è£…"></a>ç»§æ‰¿å¦‚ä½•ç ´åå°è£…</h2><p>å‡è®¾æˆ‘ä»¬åœ¨ Dog ç±»ä¸­æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ³•ã€‚æˆ‘ä»¬æœ¬å¯ä»¥å®ç° <code>bark</code> å¹¶ <code>barkMany</code> åƒè¿™æ ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bark</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;bark&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">barkMany</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">        bark();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°å®ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bark</span><span class="params">()</span> &#123;</span><br><span class="line">    barkMany(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">barkMany</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;bark&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›å®ç°ä¸­çš„ä»»ä½•ä¸€ä¸ªçš„åŠŸèƒ½éƒ½æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬è¦å®šä¹‰ä¸€ä¸ª <code>Dog</code> called <code>VerboseDog</code> çš„å­ç±»ï¼Œå¹¶æŒ‰å¦‚ä¸‹æ–¹å¼è¦†ç›–å…¶æ–¹æ³•ï¼Œåˆ™è§‚å¯Ÿå…¶ <code>barkMany</code> æ•ˆæœï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">barkMany</span><span class="params">(<span class="type">int</span> N)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;As a dog, I say: &quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">        bark();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä½¿ç”¨ç¬¬ä¸€ä¸ªå®ç°ï¼Œè¾“å‡ºæ˜¯ <code>As a dog, I say: bark bark bark</code>ï¼Œè€Œä½¿ç”¨ç¬¬äºŒä¸ªå®ç°ï¼Œç¨‹åºé™·å…¥æ— é™å¾ªç¯ã€‚å¯¹ <code>bark()</code> çš„è°ƒç”¨å°†è°ƒç”¨ ï¼Œå®ƒè°ƒç”¨ <code>barkMany(1)</code> <code>bark()</code> ï¼Œæ— é™å¤šæ¬¡é‡å¤è¯¥è¿‡ç¨‹ã€‚</p><h1 id="ç±»å‹æ£€æŸ¥å’Œé“¸é€ "><a href="#ç±»å‹æ£€æŸ¥å’Œé“¸é€ " class="headerlink" title="ç±»å‹æ£€æŸ¥å’Œé“¸é€ "></a>ç±»å‹æ£€æŸ¥å’Œé“¸é€ </h1><p>åœ¨è®¨è®ºç±»å‹å’Œè½¬æ¢ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹åŠ¨æ€æ–¹æ³•é€‰æ‹©ã€‚å›æƒ³ä¸€ä¸‹ï¼ŒåŠ¨æ€æ–¹æ³•æŸ¥æ‰¾æ˜¯æ ¹æ®å¯¹è±¡çš„åŠ¨æ€ç±»å‹ç¡®å®šåœ¨è¿è¡Œæ—¶æ‰§è¡Œçš„æ–¹æ³•çš„è¿‡ç¨‹ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœ SLList ä¸­çš„æ–¹æ³•è¢« VengefulSLList ç±»é‡å†™ï¼Œåˆ™åœ¨è¿è¡Œæ—¶è°ƒç”¨çš„æ–¹æ³•ç”±è¯¥å˜é‡çš„è¿è¡Œæ—¶ç±»å‹æˆ–åŠ¨æ€ç±»å‹ç¡®å®šã€‚</p><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-8-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-2/dynamic_selection.png" alt="img"></p><p>å¯¹äºè¿™æ®µä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sl.printLostItems();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è¿™ä¸€è¡Œä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚è¯·è®°ä½ï¼Œç¼–è¯‘å™¨æ ¹æ®å¯¹è±¡çš„é™æ€ç±»å‹æ¥ç¡®å®šæŸäº›å†…å®¹æ˜¯å¦æœ‰æ•ˆã€‚ç”±äº <code>sl</code> æ˜¯é™æ€ç±»å‹ SLListï¼Œå¹¶ä¸” <code>printLostItems</code> æœªåœ¨ SLList ç±»ä¸­å®šä¹‰ï¼Œå› æ­¤å³ä½¿ <code>sl</code> çš„è¿è¡Œæ—¶ç±»å‹æ˜¯ VengefulSLListï¼Œä¹Ÿä¸å…è®¸è¿è¡Œä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VengefulSLList&lt;Integer&gt; vsl2 = sl;</span><br></pre></td></tr></table></figure><p>å‡ºäºç±»ä¼¼çš„åŸå› ï¼Œä¸Šé¢çš„è¿™ä¸€è¡Œä¹Ÿä¼šå¯¼è‡´ç¼–è¯‘æ—¶é”™è¯¯ã€‚é€šå¸¸ï¼Œç¼–è¯‘å™¨åªå…è®¸åŸºäºç¼–è¯‘æ—¶ç±»å‹çš„æ–¹æ³•è°ƒç”¨å’Œèµ‹å€¼ã€‚ç”±äºç¼–è¯‘å™¨åªçœ‹åˆ° çš„é™æ€ç±»å‹ <code>sl</code> æ˜¯ SLListï¼Œå› æ­¤å®ƒä¸å…è®¸ VengefulSLListâ€œå®¹å™¨â€ä¿å­˜å®ƒã€‚</p><p>æ€»ç»“:</p><ul><li>åŸºç±»æ— æ³•è°ƒç”¨å­ç±»çš„æ–¹æ³•</li><li>å­ç±»æŒ‡é’ˆæ— æ³•å­˜å‚¨åŸºç±»åœ°å€</li></ul><h2 id="è¡¨è¾¾-å¼"><a href="#è¡¨è¾¾-å¼" class="headerlink" title="è¡¨è¾¾ å¼"></a>è¡¨è¾¾ å¼</h2><p>ä¸ä¸Šé¢çš„å˜é‡ä¸€æ ·ï¼Œä½¿ç”¨å…³é”®å­—çš„ <code>new</code> è¡¨è¾¾å¼ä¹Ÿå…·æœ‰ç¼–è¯‘æ—¶ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SLList&lt;Integer&gt; sl = <span class="keyword">new</span> <span class="title class_">VengefulSLList</span>&lt;Integer&gt;();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ï¼Œè¡¨è¾¾å¼å³ä¾§çš„ç¼–è¯‘æ—¶ç±»å‹æ˜¯ <code>VengefulSLList</code>ã€‚ç¼–è¯‘å™¨æ£€æŸ¥ä»¥ç¡®ä¿ <code>VengefulSLList</code> â€œis-aâ€<code> SLList</code>ï¼Œå¹¶å…è®¸æ­¤èµ‹å€¼ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VengefulSLList&lt;Integer&gt; vsl = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;Integer&gt;();</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ï¼Œè¡¨è¾¾å¼å³ä¾§çš„ç¼–è¯‘æ—¶ç±»å‹æ˜¯<code> SLList</code>ã€‚ç¼–è¯‘å™¨æ£€æŸ¥ <code>SLList</code> â€œis aâ€<code>VengefulSLList</code>ï¼Œå¹¶éåœ¨æ‰€æœ‰æƒ…å†µä¸‹éƒ½æ˜¯å¦‚æ­¤ï¼Œå› æ­¤ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><p>æ­¤å¤–ï¼Œæ–¹æ³•è°ƒç”¨å…·æœ‰ä¸å…¶å£°æ˜ç±»å‹ç›¸ç­‰çš„ç¼–è¯‘æ—¶ç±»å‹ã€‚å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Dog <span class="title function_">maxDog</span><span class="params">(Dog d1, Dog d2)</span> &#123; ... &#125;</span><br></pre></td></tr></table></figure><p>ç”±äºè¿”å›ç±»å‹ <code>maxDog</code> ä¸º Dogï¼Œå› æ­¤ä»»ä½•è°ƒç”¨ <code>maxDog</code> éƒ½å°†å…·æœ‰ç¼–è¯‘æ—¶ç±»å‹ Dogã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Poodle</span> <span class="variable">frank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Poodle</span>(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">Poodle</span> <span class="variable">frankJr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Poodle</span>(<span class="string">&quot;Frank Jr.&quot;</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Dog</span> <span class="variable">largerDog</span> <span class="operator">=</span> maxDog(frank, frankJr);</span><br><span class="line"><span class="type">Poodle</span> <span class="variable">largerPoodle</span> <span class="operator">=</span> maxDog(frank, frankJr); <span class="comment">//does not compile! RHS has compile-time type Dog</span></span><br></pre></td></tr></table></figure><p>å°† Dog å¯¹è±¡åˆ†é…ç»™ Poodle å˜é‡ï¼ˆå¦‚åœ¨ SLList æ¡ˆä¾‹ä¸­ï¼‰ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚è´µå®¾çŠ¬â€œæ˜¯â€ä¸€åªç‹—ï¼Œä½†æ›´ä¸€èˆ¬çš„ç‹—å¯¹è±¡å¯èƒ½å¹¶ä¸æ€»æ˜¯è´µå®¾çŠ¬ï¼Œå³ä½¿å®ƒæ˜¾ç„¶æ˜¯ä½ å’Œæˆ‘ï¼ˆæˆ‘ä»¬çŸ¥é“è¿™ä¸€ç‚¹ <code>frank</code> ï¼Œå¹¶ä¸” <code>frankJr</code> éƒ½æ˜¯è´µå®¾çŠ¬ï¼å½“æˆ‘ä»¬ç¡®å®šåˆ†é…ä¼šèµ·ä½œç”¨æ—¶ï¼Œæœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</p><h2 id="è½¬æ¢-Casting"><a href="#è½¬æ¢-Casting" class="headerlink" title="è½¬æ¢(Casting)"></a>è½¬æ¢(Casting)</h2><p>Java æœ‰ä¸€ç§ç‰¹æ®Šçš„è¯­æ³•ï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å‘Šè¯‰ç¼–è¯‘å™¨ç‰¹å®šè¡¨è¾¾å¼å…·æœ‰ç‰¹å®šçš„ç¼–è¯‘æ—¶ç±»å‹ã€‚è¿™ç§°ä¸º<strong>â€œè½¬æ¢â€</strong>ã€‚é€šè¿‡å¼ºåˆ¶è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨å°†è¡¨è¾¾å¼è§†ä¸ºä¸åŒçš„ç¼–è¯‘æ—¶ç±»å‹ã€‚</p><p>å›é¡¾ä¸Šé¢å¤±è´¥çš„ä»£ç ï¼Œæ—¢ç„¶æˆ‘ä»¬çŸ¥é“å¹¶ä¸” <code>frank</code> <code>frankJr</code> éƒ½æ˜¯è´µå®¾çŠ¬ï¼Œæˆ‘ä»¬å¯ä»¥å¼ºåˆ¶æ‰§è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Poodle</span> <span class="variable">largerPoodle</span> <span class="operator">=</span> (Poodle) maxDog(frank, frankJr); <span class="comment">// compiles! Right hand side has compile-time type Poodle after casting</span></span><br></pre></td></tr></table></figure><p><em>æ³¨æ„</em>ï¼šè½¬æ¢æ˜¯ä¸€ç§å¼ºå¤§ä½†å±é™©çš„å·¥å…·ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå¼ºåˆ¶è½¬æ¢æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¦æ‰§è¡Œå…¶ç±»å‹æ£€æŸ¥èŒè´£ - å‘Šè¯‰å®ƒä¿¡ä»»ä½ å¹¶æŒ‰ç…§ä½ å¸Œæœ›çš„æ–¹å¼è¡Œäº‹ã€‚ä»¥ä¸‹æ˜¯å¯èƒ½å‡ºç°çš„é—®é¢˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Poodle</span> <span class="variable">frank</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Poodle</span>(<span class="string">&quot;Frank&quot;</span>, <span class="number">5</span>);</span><br><span class="line"><span class="type">Malamute</span> <span class="variable">frankSr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Malamute</span>(<span class="string">&quot;Frank Sr.&quot;</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Poodle</span> <span class="variable">largerPoodle</span> <span class="operator">=</span> (Poodle) maxDog(frank, frankSr); <span class="comment">// runtime exception!</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ¯”è¾ƒè´µå®¾çŠ¬å’Œé›ªæ©‡çŠ¬ã€‚å¦‚æœæ²¡æœ‰å¼ºåˆ¶è½¬æ¢ï¼Œç¼–è¯‘å™¨é€šå¸¸ä¸å…è®¸è°ƒç”¨ç¼–è¯‘ <code>maxDog</code> ï¼Œå› ä¸ºå³ä¾§çš„ç¼–è¯‘æ—¶ç±»å‹æ˜¯ Dogï¼Œè€Œä¸æ˜¯ Poodleã€‚ä½†æ˜¯ï¼Œå¼ºåˆ¶è½¬æ¢å…è®¸æ­¤ä»£ç é€šè¿‡ï¼Œå¹¶ä¸”å½“åœ¨è¿è¡Œæ—¶è¿”å›é›ªæ©‡çŠ¬æ—¶ï¼Œæˆ‘ä»¬å°è¯•å°†é›ªæ©‡çŠ¬å¼ºåˆ¶è½¬æ¢ä¸ºè´µå®¾çŠ¬æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†è¿è¡Œæ—¶ <code>maxDog</code> å¼‚å¸¸ - a <code>ClassCastException</code> .</p><h1 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h1><p>é«˜é˜¶å‡½æ•°æ˜¯å°†å…¶ä»–å‡½æ•°è§†ä¸ºæ•°æ®çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä»¥è¿™ä¸ª Python ç¨‹åº <code>do_twice</code> ä¸ºä¾‹ï¼Œå®ƒæ¥å—å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºè¾“å…¥ï¼Œå¹¶å°†å…¶åº”ç”¨äºè¾“å…¥ <code>x</code> ä¸¤æ¬¡ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">tenX</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span>*x</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_twice</span>(<span class="params">f, x</span>):</span><br><span class="line">    <span class="keyword">return</span> f(f(x))</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ <code>print(do_twice(tenX, 2))</code> ä¼šå°† tenX åº”ç”¨äº 2ï¼Œç„¶åå†æ¬¡å°† tenX åº”ç”¨äºå…¶ç»“æœ 20ï¼Œä»è€Œå¾—åˆ° 200ã€‚æˆ‘ä»¬å¦‚ä½•åœ¨ Java ä¸­åšè¿™æ ·çš„äº‹æƒ…ï¼Ÿ</p><p>åœ¨è€å¼çš„ Javaï¼ˆJava 7 åŠæ›´æ—©ç‰ˆæœ¬ï¼‰ä¸­ï¼Œå†…å­˜æ¡†ï¼ˆå˜é‡ï¼‰ä¸èƒ½åŒ…å«æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚è¿™æ„å‘³ç€æˆ‘ä»¬æ— æ³•ç¼–å†™å…·æœ‰â€œFunctionâ€ç±»å‹çš„å‡½æ•°ï¼Œå› ä¸ºæ ¹æœ¬æ²¡æœ‰å‡½æ•°ç±»å‹ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ¥å£ç»§æ‰¿ã€‚è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªæ¥å£æ¥å®šä¹‰ä»»ä½•æ¥å—æ•´æ•°å¹¶è¿”å›æ•´æ•°çš„å‡½æ•° - ä¸€ä¸ª <code>IntUnaryFunction</code> .</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IntUnaryFunction</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">apply</span><span class="params">(<span class="type">int</span> x)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªç±»æ¥ <code>implements IntUnaryFunction</code> è¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„å‡½æ•°ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ•´æ•°å¹¶è¿”å›è¯¥æ•´æ•°çš„ 10 å€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TenX</span> <span class="keyword">implements</span> <span class="title class_">IntUnaryFunction</span> &#123;</span><br><span class="line">    <span class="comment">/* Returns ten times the argument. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">apply</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span> * x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å·²ç»ç”¨ Java ç¼–å†™äº† <code>tenX</code> è¯¥å‡½æ•°çš„ Python ç­‰ä»·ç‰©ã€‚è®©æˆ‘ä»¬ç°åœ¨å†™ <code>do_twice</code> å§ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">do_twice</span><span class="params">(IntUnaryFunction f, <span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> f.apply(f.apply(x));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ Java ä¸­è°ƒç”¨ <code>print(do_twice(tenX, 2))</code> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(do_twice(<span class="keyword">new</span> <span class="title class_">TenX</span>(), <span class="number">2</span>));</span><br></pre></td></tr></table></figure><h1 id="ç»§æ‰¿å¤‡å¿˜å•"><a href="#ç»§æ‰¿å¤‡å¿˜å•" class="headerlink" title="ç»§æ‰¿å¤‡å¿˜å•"></a>ç»§æ‰¿å¤‡å¿˜å•</h1><p><code>VengefulSLList extends SLList</code> è¡¨ç¤º VengefulSLList â€œis-anâ€ SLListï¼Œå¹¶ç»§æ‰¿ SLList çš„æ‰€æœ‰æˆå‘˜ï¼š</p><ul><li>å˜é‡ã€æ–¹æ³•ã€åµŒå¥—ç±»</li><li>ä¸æ˜¯æ„é€ å‡½æ•° å­ç±»æ„é€ å‡½æ•°å¿…é¡»é¦–å…ˆè°ƒç”¨è¶…ç±»æ„é€ å‡½æ•°ã€‚è¯¥ <code>super</code> å…³é”®å­—å¯ç”¨äºè°ƒç”¨é‡å†™çš„è¶…ç±»æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚</li></ul><p>é‡å†™æ–¹æ³•çš„è°ƒç”¨éµå¾ªä¸¤ä¸ªç®€å•çš„è§„åˆ™ï¼š</p><ul><li>ç¼–è¯‘å™¨æ˜¯å®‰å…¨çš„ï¼Œåªå…è®¸æˆ‘ä»¬æ ¹æ®é™æ€ç±»å‹åšäº‹ã€‚</li><li>å¯¹äºé‡å†™çš„æ–¹æ³•ï¼ˆéé‡è½½æ–¹æ³•ï¼‰ï¼Œè°ƒç”¨çš„å®é™…æ–¹æ³•åŸºäºè°ƒç”¨è¡¨è¾¾å¼çš„åŠ¨æ€ç±»å‹</li><li>å¯ä»¥ä½¿ç”¨å¼ºåˆ¶è½¬æ¢æ¥å¦å†³ç¼–è¯‘å™¨ç±»å‹æ£€æŸ¥ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(ä¸ƒ)-Rd4.1-å¯¼è¨€å’Œæ¥å£</title>
      <link href="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/"/>
      <url>/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/</url>
      
        <content type="html"><![CDATA[<p><a href="https://joshhug.gitbooks.io/hug61b/content/chap4/chap41.html">4.1 Intro and interfaces Â· Hug61B (gitbooks.io)</a></p><h1 id="æ–¹æ³•é‡è½½-method-overloading"><a href="#æ–¹æ³•é‡è½½-method-overloading" class="headerlink" title="æ–¹æ³•é‡è½½(method overloading)"></a>æ–¹æ³•é‡è½½(<em>method overloading</em>)</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">longest</span><span class="params">(SLList&lt;String&gt; list)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">longest</span><span class="params">(AList&lt;String&gt; list)</span></span><br></pre></td></tr></table></figure><p>è¿™å°±æ˜¯æ‰€è°“çš„æ–¹æ³•é‡è½½ã€‚å½“æ‚¨è°ƒç”¨ <code>WordUtils.longest</code> æ—¶ï¼ŒJava ä¼šæ ¹æ®æ‚¨æä¾›çš„å‚æ•°ç±»å‹çŸ¥é“è¦è¿è¡Œå“ªä¸€ä¸ªã€‚å¦‚æœä¸ºå…¶æä¾› <code>AList</code>ï¼Œå®ƒå°†è°ƒç”¨ <code>AList </code>æ–¹æ³•ã€‚ä¸ <code>SLList</code> ç›¸åŒã€‚</p><p>Java è¶³å¤Ÿèªæ˜ï¼ŒçŸ¥é“å¦‚ä½•ä¸ºä¸åŒç±»å‹çš„ä¸¤ç§ç›¸åŒçš„æ–¹æ³•å¤„ç†ï¼Œè¿™å¾ˆå¥½ï¼Œä½†é‡è½½æœ‰å‡ ä¸ªç¼ºç‚¹ï¼š</p><ul><li>è¿™æ˜¯è¶…çº§é‡å¤å’Œä¸‘é™‹çš„ï¼Œå› ä¸ºä½ ç°åœ¨æœ‰ä¸¤ä¸ªå‡ ä¹ç›¸åŒçš„ä»£ç å—ã€‚</li><li>å®ƒéœ€è¦æ›´å¤šçš„ä»£ç æ¥ç»´æŠ¤ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æƒ³å¯¹æ–¹æ³•è¿›è¡Œä¸€äº›å°çš„æ›´æ”¹ï¼Œä¾‹å¦‚æ›´æ­£ä¸€ä¸ªé”™è¯¯ï¼Œä½ éœ€è¦åœ¨ <code>longest</code> æ–¹æ³•ä¸­ä¸ºæ¯ç§ç±»å‹çš„åˆ—è¡¨è¿›è¡Œæ›´æ”¹ã€‚</li><li>å¦‚æœæˆ‘ä»¬æƒ³åˆ›å»ºæ›´å¤šçš„åˆ—è¡¨ç±»å‹ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸ªæ–°çš„åˆ—è¡¨ç±»å¤åˆ¶è¯¥æ–¹æ³•ã€‚</li></ul><h1 id="ä¸Šä½è¯ã€ä¸‹ä½è¯å’Œæ¥å£ç»§æ‰¿"><a href="#ä¸Šä½è¯ã€ä¸‹ä½è¯å’Œæ¥å£ç»§æ‰¿" class="headerlink" title="ä¸Šä½è¯ã€ä¸‹ä½è¯å’Œæ¥å£ç»§æ‰¿"></a>ä¸Šä½è¯ã€ä¸‹ä½è¯å’Œæ¥å£ç»§æ‰¿</h1><p><strong>Hypernyms, Hyponyms, and Interface Inheritance</strong></p><p>ç‹—æ˜¯è´µå®¾çŠ¬ã€é›ªæ©‡çŠ¬ã€å“ˆå£«å¥‡ç­‰çš„ä¸Šä½è¯ã€‚ç›¸åï¼Œè´µå®¾çŠ¬ã€é›ªæ©‡çŠ¬å’Œå“ˆå£«å¥‡æ˜¯ç‹—çš„ä¸‹ä½è¯ã€‚</p><p>è¿™äº›è¯æ„æˆäº†â€œis-aâ€å…³ç³»çš„å±‚æ¬¡ç»“æ„ï¼š</p><ul><li>a poodle â€œis-aâ€ dog<br>è´µå®¾çŠ¬â€œis-aâ€ç‹—</li><li>a dog â€œis-aâ€ canine<br>ä¸€åªç‹—â€œæ˜¯â€çŠ¬</li><li>a canine â€œis-aâ€ carnivore<br>çŠ¬ç§‘åŠ¨ç‰©â€œIS-Aâ€é£Ÿè‚‰åŠ¨ç‰©</li><li>a carnivore â€œis-anâ€ animal<br>é£Ÿè‚‰åŠ¨ç‰©â€œis-anâ€åŠ¨ç‰©</li></ul><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/hierarchy.png" alt="hierarchy"></p><p>åŒæ ·çš„å±‚æ¬¡ç»“æ„ä¹Ÿé€‚ç”¨äº SLLists å’Œ AListsï¼SLList å’Œ AList éƒ½æ˜¯æ›´ä¸€èˆ¬çš„åˆ—è¡¨çš„ä¸‹ä½è¯ã€‚</p><p>æˆ‘ä»¬å°†åœ¨ Java ä¸­å½¢å¼åŒ–è¿™ç§å…³ç³»ï¼šå¦‚æœ SLList æ˜¯ List61B çš„ä¸‹ä½è¯ï¼Œé‚£ä¹ˆ SLList ç±»æ˜¯ List61B ç±»çš„å­ç±»ï¼Œè€Œ List61B ç±»æ˜¯ SLList ç±»çš„è¶…ç±»ã€‚</p><p><strong>å›¾ 4.1.1 :</strong></p><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/subclass.png" alt="subclass"></p><p>åœ¨ Java ä¸­ï¼Œä¸ºäº†è¡¨è¾¾è¿™ä¸ªå±‚æ¬¡ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦åš<strong>ä¸¤ä»¶äº‹</strong>ï¼š</p><ul><li>ç¬¬ 1 æ­¥ï¼šä¸ºå¸¸è§„åˆ—è¡¨è¶…ä¹‰è¯å®šä¹‰ä¸€ä¸ªç±»å‹â€”â€”æˆ‘ä»¬å°†é€‰æ‹©åç§° List61Bã€‚</li><li>ç¬¬ 2 æ­¥ï¼šæŒ‡å®š SLList å’Œ AList æ˜¯è¯¥ç±»å‹çš„ä¸‹ä½è¯ã€‚</li></ul><p>æ–°çš„ List61B æ˜¯ Java æ‰€è¯´çš„**æ¥å£(interface)**ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡å®šåˆ—è¡¨å¿…é¡»èƒ½å¤Ÿæ‰§è¡Œçš„æ“ä½œçš„åå®šï¼Œä½†å®ƒä¸ä¸ºè¿™äº›è¡Œä¸ºæä¾›ä»»ä½•å®ç°ã€‚</p><p>è¿™æ˜¯æˆ‘ä»¬çš„ List61B æ¥å£ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å»ºç«‹å…³ç³»å±‚æ¬¡ç»“æ„çš„ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºè¶…ä¹‰è¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">List61B</span>&lt;Item&gt; &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(Item x)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> add <span class="title function_">Last</span><span class="params">(Item y)</span>;</span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">getFirst</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">getLast</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">removeLast</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Item <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Item x, <span class="type">int</span> position)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œè¦å®Œæˆæ­¥éª¤ 2ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®š AList å’Œ SLList æ˜¯ List61B ç±»çš„ä¸‹ä½è¯ã€‚åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬åœ¨ç±»å®šä¹‰ä¸­å®šä¹‰äº†è¿™ç§å…³ç³»ã€‚</p><p>æˆ‘ä»¬å°†æ·»åŠ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class AList&lt;Item&gt; &#123;...&#125;</span><br></pre></td></tr></table></figure><p>å®šä¹‰å…³ç³»çš„è¯ï¼šimplementsã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class AList&lt;Item&gt; implements List61B&lt;Item&gt;&#123;...&#125;</span><br></pre></td></tr></table></figure><p><code>implements List61B&lt;Item&gt;</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‰¿è¯ºã€‚AList è¯´â€œæˆ‘ä¿è¯æˆ‘å°†æ‹¥æœ‰å¹¶å®šä¹‰ List61B æ¥å£ä¸­æŒ‡å®šçš„æ‰€æœ‰å±æ€§å’Œè¡Œä¸ºâ€</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç¼–è¾‘æˆ‘ä»¬ <code>longest</code> çš„æ–¹æ³• <code>WordUtils</code> ä»¥æ¥æ”¶ List61Bã€‚å› ä¸º AList å’Œ SLList å…±äº«â€œis-aâ€å…³ç³»ã€‚</p><h1 id="æ–¹æ³•è¦†ç›–-Override"><a href="#æ–¹æ³•è¦†ç›–-Override" class="headerlink" title="æ–¹æ³•è¦†ç›–(@Override)"></a>æ–¹æ³•è¦†ç›–(@Override)</h1><p>åœ¨å­ç±»ä¸­å®ç°æ‰€éœ€çš„å‡½æ•°æ—¶ï¼Œåœ¨æ–¹æ³•ç­¾åçš„é¡¶éƒ¨åŒ…å« <code>@Override</code> æ ‡è®°å¾ˆæœ‰ç”¨ï¼ˆå®é™…ä¸Šåœ¨ 61B ä¸­ä¹Ÿæ˜¯å¿…éœ€çš„ï¼‰ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªç”¨ä¸€ç§æ–¹æ³•åšåˆ°äº†è¿™ä¸€ç‚¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(Item x)</span> &#123;</span><br><span class="line">    insert(x, <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå³ä½¿æ‚¨ä¸åŒ…å«æ­¤æ ‡è®°ï¼Œæ‚¨<strong>ä»ç„¶ä¼š</strong>è¦†ç›–è¯¥æ–¹æ³•ã€‚æ‰€ä»¥ä»æŠ€æœ¯ä¸Šè®²ï¼Œä½ ä¸å¿…åŒ…æ‹¬å®ƒã€‚ä½†æ˜¯ï¼ŒåŒ…å«æ ‡è®°å¯ä»¥ä½œä¸ºç¨‹åºå‘˜çš„ä¸€ç§ä¿æŠ¤æªæ–½ï¼Œæé†’ç¼–è¯‘å™¨æ‚¨æ‰“ç®—é‡å†™æ­¤æ–¹æ³•ã€‚ä½ é—®ä¸ºä»€ä¹ˆè¿™ä¼šæœ‰å¸®åŠ©ï¼Ÿå—¯ï¼Œè¿™æœ‰ç‚¹åƒæœ‰ä¸€ä¸ªæ ¡å¯¹å‘˜ï¼ç¼–è¯‘å™¨ä¼šå‘Šè¯‰æ‚¨è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°é—®é¢˜ã€‚</p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç”¨Overrideå‘¢ï¼Ÿ:</p><ul><li>ä¸»è¦åŸå› :é˜²æ­¢æ‰“å­—é”™è¯¯ã€‚<ul><li>å¦‚æœä½ è¯´@Overrideï¼Œä½†å¦‚æœè¿™ä¸ªæ–¹æ³•æ²¡æœ‰è¦†ç›–ä»»ä½•ä¸œè¥¿ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚</li><li>ä¾‹å¦‚public void addLats(é¡¹ç›®x)</li></ul></li><li>æé†’ç¨‹åºå‘˜ï¼Œæ–¹æ³•å®šä¹‰æ¥è‡ªç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­æ›´é«˜çš„ä½ç½®ã€‚</li></ul><h2 id="æ¥å£ç»§æ‰¿-Interface-Inheritance"><a href="#æ¥å£ç»§æ‰¿-Interface-Inheritance" class="headerlink" title="æ¥å£ç»§æ‰¿(Interface Inheritance)"></a>æ¥å£ç»§æ‰¿(Interface Inheritance)</h2><p>æ¥å£ç»§æ‰¿æ˜¯æŒ‡å­ç±»ç»§æ‰¿è¶…ç±»çš„æ‰€æœ‰æ–¹æ³•&#x2F;è¡Œä¸ºçš„å…³ç³»ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ Hyponyms å’Œ Hypernyms éƒ¨åˆ†ä¸­å®šä¹‰çš„ List61B ç±»ä¸€æ ·ï¼Œè¯¥æ¥å£åŒ…æ‹¬æ‰€æœ‰æ–¹æ³•ç­¾åï¼Œä½†ä¸åŒ…æ‹¬å®ç°ã€‚ç”±å­ç±»å®é™…æä¾›è¿™äº›å®ç°ã€‚</p><p>è¿™ç§ç»§æ‰¿ä¹Ÿæ˜¯å¤šä»£çš„ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€é•¿ä¸²çš„è¶…ç±»&#x2F;å­ç±»å…³ç³»ï¼Œå¦‚å›¾ 4.1.1 æ‰€ç¤ºï¼ŒAList ä¸ä»…ç»§æ‰¿äº† List61B çš„æ–¹æ³•ï¼Œè€Œä¸”è¿˜ç»§æ‰¿äº†å®ƒä¸Šé¢çš„æ‰€æœ‰å…¶ä»–ç±»ï¼Œä¸€ç›´åˆ°æœ€é«˜è¶…ç±» AKA AList ç»§æ‰¿è‡ª Collectionã€‚</p><h1 id="GRoE"><a href="#GRoE" class="headerlink" title="GRoE"></a>GRoE</h1><p>å›æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ç¬¬ä¸€ç« ä¸­ä»‹ç»çš„å¹³ç­‰é»„é‡‘æ³•åˆ™ã€‚è¿™æ„å‘³ç€æ¯å½“æˆ‘ä»¬è¿›è¡Œèµ‹å€¼æ—¶ <code>a = b</code> ï¼Œæˆ‘ä»¬éƒ½ä¼šå°† b ä¸­çš„ä½å¤åˆ¶åˆ° a ä¸­ï¼Œå¹¶è¦æ±‚ b ä¸ a çš„ç±»å‹ç›¸åŒã€‚ä½ ä¸èƒ½åˆ†é… <code>Dog b = 1</code> OR <code>Dog b = new Cat()</code> ï¼Œå› ä¸º 1 ä¸æ˜¯ç‹—ï¼ŒçŒ«ä¹Ÿä¸æ˜¯ã€‚</p><p>è®©æˆ‘ä»¬å°è¯•å°†æ­¤è§„åˆ™åº”ç”¨äºæˆ‘ä»¬ä¹‹å‰åœ¨æœ¬ç« ä¸­ç¼–å†™ <code>longest</code> çš„æ–¹æ³•ã€‚</p><p><code>public static String longest(List61B&lt;String&gt; list)</code> æ¥å— List61Bã€‚æˆ‘ä»¬è¯´è¿‡è¿™ä¹Ÿå¯ä»¥æ¥å— AList å’Œ SLListï¼Œä½†ç”±äº AList å’Œ List61B æ˜¯ä¸åŒçš„ç±»ï¼Œè¿™æ€ä¹ˆå¯èƒ½å‘¢ï¼Ÿå¥½å§ï¼Œå›æƒ³ä¸€ä¸‹ï¼ŒAList ä¸ List61B å…±äº«â€œis-aâ€å…³ç³»ï¼Œè¿™æ„å‘³ç€ AList åº”è¯¥èƒ½å¤Ÿæ”¾å…¥ List61B æ¡†ä¸­ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List61B&lt;String&gt; someList = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;String&gt;();</span><br><span class="line">    someList.addFirst(<span class="string">&quot;elk&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å½“å®ƒè¿è¡Œæ—¶ï¼Œå°†åˆ›å»º SLListï¼Œå¹¶ä¸”å…¶åœ°å€å­˜å‚¨åœ¨ someList å˜é‡ä¸­ã€‚ç„¶åå°†å­—ç¬¦ä¸²â€œelkâ€æ’å…¥åˆ° addFirst å¼•ç”¨çš„ SLList ä¸­ã€‚</p></blockquote><h2 id="å®ç°ç»§æ‰¿"><a href="#å®ç°ç»§æ‰¿" class="headerlink" title="å®ç°ç»§æ‰¿"></a>å®ç°ç»§æ‰¿</h2><p>ä»¥å‰ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¥å£ List61Bï¼Œå®ƒåªæœ‰æ ‡è¯† List61B åº”è¯¥åšä»€ä¹ˆçš„æ–¹æ³•æ ‡å¤´ã€‚ä½†æ˜¯ï¼Œç°åœ¨æˆ‘ä»¬å°†çœ‹åˆ°æˆ‘ä»¬å¯ä»¥åœ¨ List61B ä¸­ç¼–å†™å·²ç»å¡«å†™äº†å®ç°çš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ç¡®å®š List61B çš„ä¸Šä½è¯åº”å¦‚ä½•è¡¨ç°ã€‚</p><p>ä¸ºæ­¤ï¼Œå¿…é¡»åœ¨æ–¹æ³•ç­¾åä¸­åŒ…å« <strong><code>default</code> å…³é”®å­—</strong>ã€‚</p><p>å¦‚æœæˆ‘ä»¬åœ¨ List61B ä¸­å®šä¹‰æ­¤æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">default</span> <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size(); i += <span class="number">1</span>) &#123;</span><br><span class="line">        System.out.print(get(i) + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆæ‰€æœ‰å®ç° List61B ç±»çš„ä¸œè¥¿éƒ½å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ï¼</p><p>ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•å¯¹äºSLListæ¥è¯´è¿‡äºæ…¢ï¼Œå› ä¸ºä»–æ˜¯åŸºäºé“¾è¡¨å®ç°çš„åˆ—è¡¨ï¼Œè¿™æ ·å­ç›¸å½“äºè¿ç”¨äº†ä¸¤æ¬¡forå¾ªç¯</p><p>æˆ‘ä»¬å¸Œæœ› SLList çš„æ‰“å°æ–¹å¼ä¸å…¶æ¥å£ä¸­æŒ‡å®šçš„æ–¹å¼ä¸åŒã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¦†ç›–å®ƒã€‚åœ¨ SLList ä¸­ï¼Œæˆ‘ä»¬å®ç°äº†è¿™ç§æ–¹æ³•;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel.next; p != <span class="literal">null</span>; p = p.next) &#123;</span><br><span class="line">        System.out.print(p.item + <span class="string">&quot; &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæ¯å½“æˆ‘ä»¬åœ¨ SLList ä¸Šè°ƒç”¨ printï¼ˆï¼‰ æ—¶ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•è€Œä¸æ˜¯ List61B ä¸­çš„æ–¹æ³•ã€‚</p><h3 id="åŠ¨æ€ç±»å‹ä»¥åŠåŠ¨æ€æ–¹æ³•é€‰æ‹©"><a href="#åŠ¨æ€ç±»å‹ä»¥åŠåŠ¨æ€æ–¹æ³•é€‰æ‹©" class="headerlink" title="åŠ¨æ€ç±»å‹ä»¥åŠåŠ¨æ€æ–¹æ³•é€‰æ‹©"></a>åŠ¨æ€ç±»å‹ä»¥åŠåŠ¨æ€æ–¹æ³•é€‰æ‹©</h3><p>æ‚¨å¯èƒ½æƒ³çŸ¥é“ï¼ŒJava å¦‚ä½•çŸ¥é“è¦è°ƒç”¨å“ªä¸ª printï¼ˆï¼‰ï¼Ÿé—®å¾—å¥½ã€‚Java ä¹‹æ‰€ä»¥èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œæ˜¯å› ä¸ºæœ‰ä¸€ç§å«åšåŠ¨æ€æ–¹æ³•é€‰æ‹©çš„ä¸œè¥¿ã€‚</p><p>æˆ‘ä»¬çŸ¥é“ java ä¸­çš„å˜é‡æœ‰ä¸€ä¸ªç±»å‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List61B&lt;String&gt; lst = new SLList&lt;String&gt;();</span><br></pre></td></tr></table></figure><p>In the above declaration and instantiation, lst is of type â€œList61Bâ€. This is called the â€œstatic typeâ€<br>åœ¨ä¸Šé¢çš„å£°æ˜å’Œå®ä¾‹åŒ–ä¸­ï¼Œlst çš„ç±»å‹ä¸ºâ€œList61Bâ€ã€‚è¿™ç§°ä¸ºâ€œé™æ€ç±»å‹â€</p><p>ä½†æ˜¯ï¼Œå¯¹è±¡æœ¬èº«ä¹Ÿå…·æœ‰ç±»å‹ã€‚LST æŒ‡å‘çš„å¯¹è±¡ç±»å‹ä¸º SLListã€‚å°½ç®¡è¿™ä¸ªå¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª SLListï¼ˆå› ä¸ºå®ƒè¢«å£°æ˜ä¸º SLListï¼‰ï¼Œä½†å®ƒä¹Ÿæ˜¯ä¸€ä¸ª List61Bï¼Œå› ä¸ºæˆ‘ä»¬ä¹‹å‰æ¢è®¨è¿‡çš„â€œis-aâ€å…³ç³»ã€‚ä½†æ˜¯ï¼Œç”±äºå¯¹è±¡æœ¬èº«æ˜¯ä½¿ç”¨ SLList æ„é€ å‡½æ•°å®ä¾‹åŒ–çš„ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ç§°ä¸ºâ€œåŠ¨æ€ç±»å‹â€ã€‚</p><h4 id="åŠ¨æ€ç±»å‹"><a href="#åŠ¨æ€ç±»å‹" class="headerlink" title="åŠ¨æ€ç±»å‹:"></a>åŠ¨æ€ç±»å‹:</h4><ul><li>è¿™æ˜¯åœ¨å®ä¾‹åŒ–æ—¶æŒ‡å®šçš„ç±»å‹(ä¾‹å¦‚åœ¨ä½¿ç”¨newæ—¶)ã€‚</li><li>ç­‰äºæ‰€æŒ‡å‘çš„å¯¹è±¡çš„ç±»å‹ã€‚</li></ul><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/image-20240129204744765.png" alt="image-20240129204744765"></p><p><img src="/2024/01/29/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-7-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Rd4-1/image-20240129204833057.png" alt="image-20240129204833057"></p><p>å½“ Java è¿è¡Œè¢«é‡å†™çš„æ–¹æ³•æ—¶ï¼Œå®ƒä¼šåœ¨å…¶åŠ¨æ€ç±»å‹ä¸­æœç´¢é€‚å½“çš„æ–¹æ³•ç­¾åå¹¶è¿è¡Œå®ƒã€‚</p><p><strong>é‡è¦æç¤ºï¼šè¿™ä¸é€‚ç”¨äºé‡è½½æ–¹æ³•ï¼</strong></p><p>å‡è®¾åŒä¸€ç±»ä¸­æœ‰ä¸¤ä¸ªæ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">peek</span><span class="params">(List61B&lt;String&gt; list)</span> &#123;</span><br><span class="line">    System.out.println(list.getLast());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">peek</span><span class="params">(SLList&lt;String&gt; list)</span> &#123;</span><br><span class="line">    System.out.println(list.getFirst());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œæ­¤ä»£ç </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SLList&lt;String&gt; SP = <span class="keyword">new</span> <span class="title class_">SLList</span>&lt;String&gt;();</span><br><span class="line">List61B&lt;String&gt; LP = SP;</span><br><span class="line">SP.addLast(<span class="string">&quot;elk&quot;</span>);</span><br><span class="line">SP.addLast(<span class="string">&quot;are&quot;</span>);</span><br><span class="line">SP.addLast(<span class="string">&quot;cool&quot;</span>);</span><br><span class="line">peek(SP);</span><br><span class="line">peek(LP);</span><br></pre></td></tr></table></figure><p>å¯¹ peekï¼ˆï¼‰ çš„ç¬¬ä¸€æ¬¡è°ƒç”¨å°†ä½¿ç”¨ç¬¬äºŒä¸ª peek æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å— SLListã€‚å¯¹ peekï¼ˆï¼‰ çš„ç¬¬äºŒæ¬¡è°ƒç”¨å°†ä½¿ç”¨ç¬¬ä¸€ä¸ª peek æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å— List61Bã€‚è¿™æ˜¯å› ä¸ºä¸¤ä¸ªé‡è½½æ–¹æ³•ä¹‹é—´çš„å”¯ä¸€åŒºåˆ«æ˜¯<strong>å‚æ•°çš„ç±»å‹</strong>ã€‚å½“ Java æ£€æŸ¥è¦è°ƒç”¨çš„æ–¹æ³•æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥é™æ€ç±»å‹å¹¶ä½¿ç”¨ç›¸åŒç±»å‹çš„å‚æ•°è°ƒç”¨è¯¥æ–¹æ³•ã€‚</p><blockquote><p>åŠ¨æ€æ–¹æ³•ä¸é€‚ç”¨äºæ–¹æ³•é‡è½½ï¼Œæ–¹æ³•é‡è½½åªè€ƒè™‘ç­¾åï¼Œä¸è€ƒè™‘æŒ‡å‘</p><p>è¿™é‡Œçš„SPå’ŒLPçš„åŠ¨æ€ç±»å‹éƒ½æ˜¯SLList(å› ä¸ºéƒ½æŒ‡å‘SLList)</p></blockquote><h2 id="æ¥å£ç»§æ‰¿-vs-å®ç°ç»§æ‰¿"><a href="#æ¥å£ç»§æ‰¿-vs-å®ç°ç»§æ‰¿" class="headerlink" title="æ¥å£ç»§æ‰¿ vs å®ç°ç»§æ‰¿"></a>æ¥å£ç»§æ‰¿ vs å®ç°ç»§æ‰¿</h2><ol><li><strong>æ¥å£ç»§æ‰¿ï¼ˆInterface Inheritanceï¼‰ï¼š</strong><ul><li>æ¥å£ç»§æ‰¿æ˜¯æŒ‡ä¸€ä¸ªç±»ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„æ¥å£ï¼ˆæ–¹æ³•ç­¾åï¼‰è€Œä¸ç»§æ‰¿å…¶å®ç°ã€‚</li><li>åœ¨æ¥å£ç»§æ‰¿ä¸­ï¼Œå­ç±»ä»…ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•ç­¾åï¼Œä½†å¹¶ä¸ç»§æ‰¿å®é™…çš„å®ç°ä»£ç ã€‚</li><li>æ¥å£ç»§æ‰¿çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å®šä¹‰ä¸€ç»„å…±äº«çš„æ–¹æ³•è§„èŒƒï¼Œä»¥ç¡®ä¿å®ç°è¿™äº›æ¥å£çš„ç±»éƒ½æœ‰ç›¸ä¼¼çš„è¡Œä¸ºã€‚</li><li>å¤šä¸ªç±»å¯ä»¥å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œä»è€Œè¾¾åˆ°ä»£ç çš„å¯å¤ç”¨æ€§å’Œçµæ´»æ€§ã€‚</li></ul></li><li><strong>å®ç°ç»§æ‰¿ï¼ˆImplementation Inheritanceï¼‰ï¼š</strong><ul><li>å®ç°ç»§æ‰¿æ˜¯æŒ‡ä¸€ä¸ªç±»ä»å¦ä¸€ä¸ªç±»ç›´æ¥ç»§æ‰¿å®ç°ä»£ç ï¼ŒåŒ…æ‹¬å±æ€§å’Œæ–¹æ³•ã€‚</li><li>åœ¨å®ç°ç»§æ‰¿ä¸­ï¼Œå­ç±»ä¸ä»…ç»§æ‰¿äº†çˆ¶ç±»çš„æ–¹æ³•ç­¾åï¼Œè¿˜ç»§æ‰¿äº†å…·ä½“çš„æ–¹æ³•å®ç°ã€‚</li><li>å®ç°ç»§æ‰¿ç”¨äºåœ¨å­ç±»ä¸­é‡ç”¨å’Œæ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†å¯èƒ½å¯¼è‡´è¾ƒå¼ºçš„è€¦åˆæ€§å’Œç»§æ‰¿é“¾çš„è„†å¼±æ€§ã€‚</li></ul></li></ol><p>æ€»çš„æ¥è¯´ï¼ŒåŒºåˆ†æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿çš„å…³é”®åœ¨äºæ˜¯å¦ç»§æ‰¿äº†å…·ä½“çš„å®ç°ä»£ç ã€‚æ¥å£ç»§æ‰¿æ³¨é‡äºå®šä¹‰è§„èŒƒï¼Œè€Œå®ç°ç»§æ‰¿æ³¨é‡äºä»£ç çš„é‡ç”¨å’Œå…±äº«ã€‚åœ¨é¢å‘å¯¹è±¡è®¾è®¡ä¸­ï¼Œé€šå¸¸å€¡å¯¼ä½¿ç”¨æ¥å£ç»§æ‰¿æ¥å®ç°æ¾è€¦åˆçš„è®¾è®¡ï¼Œé¿å…è¿‡åº¦ä¾èµ–å…·ä½“çš„å®ç°ã€‚</p><p>åˆ›å»ºè¿™äº›å±‚æ¬¡ç»“æ„æ—¶ï¼Œè¯·è®°ä½ï¼Œå­ç±»å’Œè¶…ç±»ä¹‹é—´çš„å…³ç³»åº”ä¸º<strong>â€œis-aâ€</strong>å…³ç³»ã€‚AKA Cat åº”è¯¥åªå®ç° Animal Cat is an Animalã€‚æ‚¨ä¸åº”è¯¥ä½¿ç”¨â€œhas-aâ€å…³ç³»æ¥å®šä¹‰å®ƒä»¬ã€‚Cat æœ‰çˆªå­ï¼Œä½† Cat ç»å¯¹ä¸åº”è¯¥å®ç° Clawã€‚</p><p>æœ€åï¼Œå®ç°ç»§æ‰¿å¬èµ·æ¥ä¸é”™ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼š</p><ul><li>æˆ‘ä»¬æ˜¯å®¹æ˜“çŠ¯é”™çš„äººï¼Œæˆ‘ä»¬æ— æ³•è·Ÿè¸ªæ‰€æœ‰äº‹æƒ…ï¼Œæ‰€ä»¥ä½ æœ‰å¯èƒ½æ¨ç¿»äº†ä¸€ç§æ–¹æ³•ï¼Œä½†å¿˜è®°äº†ä½ åšäº†ã€‚</li><li>Iå¦‚æœä¸¤ä¸ªæ¥å£æä¾›å†²çªçš„é»˜è®¤æ–¹æ³•ï¼Œåˆ™å¯èƒ½å¾ˆéš¾è§£å†³å†²çªã€‚</li><li>å®ƒé¼“åŠ±è¿‡äºå¤æ‚çš„ä»£ç </li></ul>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç»ƒä¹ ç¬”è®°(ä¸‰)-Proj1</title>
      <link href="/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/"/>
      <url>/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/</url>
      
        <content type="html"><![CDATA[<h1 id="The-Deque-API"><a href="#The-Deque-API" class="headerlink" title="The Deque API"></a>The Deque API</h1><p>Dequeï¼ˆé€šå¸¸å‘éŸ³ä¸ºâ€œdeckâ€ï¼‰æ˜¯åŒç«¯é˜Ÿåˆ—çš„ä¸è§„åˆ™é¦–å­—æ¯ç¼©å†™ã€‚åŒç«¯é˜Ÿåˆ—æ˜¯å…·æœ‰åŠ¨æ€å¤§å°çš„åºåˆ—å®¹å™¨ï¼Œå¯ä»¥åœ¨ä¸¤ç«¯ï¼ˆå…¶å‰ç«¯æˆ–åç«¯ï¼‰æ‰©å±•æˆ–æ”¶ç¼©ã€‚</p><p>å…·ä½“è€Œè¨€ï¼Œä»»ä½• deque å®ç°éƒ½å¿…é¡»å…·æœ‰ä»¥ä¸‹æ“ä½œï¼š</p><ul><li><code>public void addFirst(T item)</code> ï¼šå°†æŸä¸ªç±»å‹çš„ <code>T</code> é¡¹ç›®æ·»åŠ åˆ° deque çš„å‰é¢ã€‚ä½ å¯ä»¥å‡è®¾è¿™ <code>item</code> ä»æ¥éƒ½ä¸æ˜¯ <code>null</code> .</li><li><code>public void addLast(T item)</code> ï¼šå°†ç±»å‹çš„ <code>T</code> é¡¹ç›®æ·»åŠ åˆ° deque çš„èƒŒé¢ã€‚ä½ å¯ä»¥å‡è®¾è¿™ <code>item</code> ä»æ¥éƒ½ä¸æ˜¯ <code>null</code> .</li><li><code>public boolean isEmpty()</code> ï¼šå¦‚æœ deque ä¸ºç©ºï¼Œåˆ™è¿”å›ï¼Œ <code>false</code> å¦åˆ™è¿”å› <code>true</code> ã€‚</li><li><code>public int size()</code> ï¼šè¿”å› deque ä¸­çš„é¡¹æ•°ã€‚</li><li><code>public void printDeque()</code> ï¼šä»å¤´åˆ°å°¾æ‰“å° deque ä¸­çš„é¡¹ç›®ï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚æ‰“å°å®Œæ‰€æœ‰é¡¹ç›®åï¼Œæ‰“å°å‡ºæ–°è¡Œã€‚</li><li><code>public T removeFirst()</code> ï¼šåˆ é™¤å¹¶è¿”å› deque å‰é¢çš„é¡¹ç›®ã€‚å¦‚æœä¸å­˜åœ¨æ­¤ç±»é¡¹ï¼Œåˆ™è¿”å› <code>null</code> ã€‚</li><li><code>public T removeLast()</code> ï¼šåˆ é™¤å¹¶è¿”å› deque èƒŒé¢çš„é¡¹ç›®ã€‚å¦‚æœä¸å­˜åœ¨æ­¤ç±»é¡¹ï¼Œåˆ™è¿”å› <code>null</code> ã€‚</li><li><code>public T get(int index)</code> ï¼šè·å–ç»™å®šç´¢å¼•å¤„çš„é¡¹ï¼Œå…¶ä¸­ 0 æ˜¯å‰é¢ï¼Œ1 æ˜¯ä¸‹ä¸€ä¸ªé¡¹ï¼Œä¾æ­¤ç±»æ¨ã€‚å¦‚æœä¸å­˜åœ¨æ­¤ç±»é¡¹ï¼Œåˆ™è¿”å› <code>null</code> ã€‚ä¸å¾—æ”¹åŠ¨dequeï¼</li></ul><p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›æˆ‘ä»¬çš„ä¸¤ä¸ª Deque å®ç°è¿™ä¸¤ä¸ªç‰¹æ®Šæ–¹æ³•ï¼š</p><ul><li><code>public Iterator&lt;T&gt; iterator()</code> ï¼šæˆ‘ä»¬å°†è¦åˆ›å»ºçš„ Deque å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼ˆå³ <code>Iterable&lt;T&gt;</code> ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æä¾›æ­¤æ–¹æ³•æ¥è¿”å›è¿­ä»£å™¨ã€‚</li><li><code>public boolean equals(Object o)</code> ï¼šè¿”å›å‚æ•° <code>o</code> æ˜¯å¦ç­‰äº Dequeã€‚ <code>o</code> å¦‚æœå®ƒæ˜¯ Dequeï¼Œå¹¶ä¸”å¦‚æœå®ƒä»¥ç›¸åŒçš„é¡ºåºåŒ…å«ç›¸åŒçš„å†…å®¹ï¼ˆç”±æ³›å‹ <code>T</code> <code>equals</code> æ–¹æ³•æ”¯é…ï¼‰åˆ™è¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ã€‚ï¼ˆæ·»åŠ  2&#x2F;12ï¼šæ‚¨éœ€è¦ä¸ºæ­¤ä½¿ç”¨ <code>instance of</code> å…³é”®å­—ã€‚é˜…è¯»<a href="https://www.javatpoint.com/downcasting-with-instanceof-operator">here</a>äº†è§£æ›´å¤šä¿¡æ¯ï¼‰</li></ul><blockquote><p>æ·»åŠ  2&#x2F;12ï¼šæ‚¨ä¸åº”è¯¥å®ç°æ¥å£ <code>Deque</code> ï¼Œè€Œåº”è¯¥åªå®ç° <code>Iterable</code> ä¸¤ä¸ªå®ç° <code>LinkedListDeque</code> å’Œ <code>ArrayDeque</code> .å¦‚æœæ‚¨æ‰§è¡Œå‰è€…ï¼Œæˆ‘ä»¬çš„è‡ªåŠ¨è¯„åˆ†å™¨å°†ä¸ºæ‚¨æä¾› API é”™è¯¯ã€‚</p><p>æ‚¨å°†åœ¨ç¬¬ 11 è®² ï¼ˆ2&#x2F;12ï¼‰ ä¸­äº†è§£ an <code>Iterator</code> æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥ç°åœ¨ä¸è¦æ‹…å¿ƒã€‚è¿™ä¸ªé¡¹ç›®æ—¨åœ¨éšç€æ‚¨ä»è®²åº§å’Œè®¨è®ºä¸­å­¦åˆ°æ›´å¤šä¸œè¥¿è€Œä¸€ç‚¹ä¸€ç‚¹åœ°å®Œæˆï¼Œè¿™æ˜¯ç»ƒä¹ æ‚¨åœ¨æœ¬è¯¾ç¨‹ä¸­å­¦åˆ°çš„æ‰€æœ‰ä¸œè¥¿çš„ç»ä½³æœºä¼šã€‚</p><p>æ‚¨çš„ç±»åº”è¯¥æ¥å—ä»»ä½•æ³›å‹ç±»å‹ï¼ˆè€Œä¸ä»…ä»…æ˜¯æ•´æ•°ï¼‰ã€‚æœ‰å…³åˆ›å»ºå’Œä½¿ç”¨æ³›å‹æ•°æ®ç»“æ„çš„ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://docs.google.com/presentation/d/19TTe3JgFscc4RLwokvQ_gOM72DSrfs9Y6ZST_fv3aQ4">lecture 5</a>ã€‚è¯·åŠ¡å¿…å¯†åˆ‡æ³¨æ„æœ€åä¸€å¼ å¹»ç¯ç‰‡ä¸­å…³äºæ³›å‹çš„ç»éªŒæ³•åˆ™ã€‚</p><p>åœ¨æ­¤é¡¹ç›®ä¸­ï¼Œæ‚¨å°†ä¸º Deque æ¥å£æä¾›ä¸¤ç§å®ç°ï¼šä¸€ç§ç”±é“¾è¡¨æä¾›æ”¯æŒï¼Œå¦ä¸€ç§ç”±è°ƒæ•´å¤§å°æ•°ç»„æä¾›æ”¯æŒ</p></blockquote><h1 id="é¡¹ç›®ä»»åŠ¡"><a href="#é¡¹ç›®ä»»åŠ¡" class="headerlink" title="é¡¹ç›®ä»»åŠ¡"></a>é¡¹ç›®ä»»åŠ¡</h1><h2 id="Linked-List-Deque"><a href="#Linked-List-Deque" class="headerlink" title="Linked List Deque"></a>Linked List Deque</h2><p>ä½œä¸ºç¬¬ä¸€ä¸ª deque å®ç°ï¼Œæ‚¨å°†æ„å»ºåŸºäº <code>LinkedListDeque</code> é“¾è¡¨çš„ç±»ã€‚</p><p>æ‚¨çš„æ“ä½œå—ä»¥ä¸‹è§„åˆ™çš„çº¦æŸï¼š</p><ul><li><code>add</code> å¹¶ä¸” <code>remove</code> æ“ä½œä¸å¾—æ¶‰åŠä»»ä½•å¾ªç¯æˆ–é€’å½’ã€‚å•ä¸ªæ­¤ç±»æ“ä½œå¿…é¡»èŠ±è´¹â€œæ’å®šæ—¶é—´â€ï¼Œå³æ‰§è¡Œæ—¶é—´ä¸åº”å–å†³äº deque çš„å¤§å°ã€‚è¿™æ„å‘³ç€æ‚¨ä¸èƒ½ä½¿ç”¨éå† deque çš„æ‰€æœ‰&#x2F;å¤§å¤šæ•°å…ƒç´ çš„å¾ªç¯ã€‚</li><li><code>get</code> å¿…é¡»ä½¿ç”¨è¿­ä»£ï¼Œè€Œä¸æ˜¯é€’å½’ã€‚</li><li><code>size</code> å¿…é¡»èŠ±è´¹æ’å®šçš„æ—¶é—´ã€‚</li><li><code>LinkedListDeque</code> å¾ªç¯ä½¿ç”¨ for-each å¾ªç¯æ‰€éœ€çš„æ—¶é—´åº”ä¸é¡¹ç›®æ•°æˆæ­£æ¯”ã€‚</li><li>ä¸è¦ä¿ç•™å¯¹ä¸å†åœ¨ deque ä¸­çš„é¡¹ç›®çš„å¼•ç”¨ã€‚ç¨‹åºåœ¨ä»»ä½•ç»™å®šæ—¶é—´ä½¿ç”¨çš„å†…å­˜é‡å¿…é¡»ä¸é¡¹æ•°æˆæ­£æ¯”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°† 10,000 ä¸ªé¡¹ç›®æ·»åŠ åˆ° dequeï¼Œç„¶ååˆ é™¤ 9,999 ä¸ªé¡¹ç›®ï¼Œåˆ™ç”Ÿæˆçš„å†…å­˜ä½¿ç”¨é‡åº”ç­‰äº 1 ä¸ªé¡¹ç›®çš„ dequeï¼Œè€Œä¸æ˜¯ 10,000ã€‚è¯·è®°ä½ï¼ŒJava åƒåœ¾æ”¶é›†å™¨å°†åœ¨ä¸”ä»…å½“æ²¡æœ‰æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆæ—¶ä¸ºæˆ‘ä»¬â€œåˆ é™¤â€å†…å®¹ã€‚</li></ul><p>å®ç°ä¸Šé¢â€œDeque APIâ€éƒ¨åˆ†ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–¹æ³•ã€‚</p><p>æ­¤å¤–ï¼Œæ‚¨è¿˜éœ€è¦å®ç°ï¼š</p><ul><li><code>public LinkedListDeque()</code> ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„é“¾è¡¨å–æ¶ˆã€‚</li><li><code>public T getRecursive(int index)</code> ï¼šä¸ get ç›¸åŒï¼Œä½†ä½¿ç”¨é€’å½’ã€‚</li></ul><p>è™½ç„¶è¿™å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†æœ‰è®¸å¤šè®¾è®¡é—®é¢˜éœ€è¦è€ƒè™‘ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°å®ç°æ¯”æ‚¨é¢„æœŸçš„æ›´å…·æŒ‘æˆ˜æ€§ã€‚è¯·åŠ¡å¿…æŸ¥é˜…æœ‰å…³åŒå‘é“¾è¡¨çš„è®²åº§ï¼Œç‰¹åˆ«æ˜¯å…³äºå“¨å…µèŠ‚ç‚¹çš„å¹»ç¯ç‰‡ï¼šä¸¤ä¸ªå“¨å…µæ‹“ <a href="https://docs.google.com/presentation/d/1suIeJ1SIGxoNDT8enLwsSrMxcw4JTvJBsMcdARpqQCk/pub?start=false&loop=false&delayms=3000&slide=id.g829fe3f43_0_291">two sentinel topology</a>æ‰‘å’Œåœ†å½¢å“¨å…µæ‹“æ‰‘<a href="https://docs.google.com/presentation/d/1suIeJ1SIGxoNDT8enLwsSrMxcw4JTvJBsMcdARpqQCk/pub?start=false&loop=false&delayms=3000&slide=id.g829fe3f43_0_376">circular sentinel topology</a>ã€‚æˆ‘æ›´å–œæ¬¢å¾ªç¯æ–¹æ³•ã€‚</p><p><img src="/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/5f80de28514b0bc51dc944e1a7129ac.png" alt="5f80de28514b0bc51dc944e1a7129ac"></p><p><img src="/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/e38a8427e6351cf3a2733e4708df329.png" alt="e38a8427e6351cf3a2733e4708df329"></p><h3 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ:"></a>ç­”æ¡ˆ:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> deque;</span><br><span class="line"><span class="keyword">import</span> java.util.Iterator;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListDeque</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> T item;</span><br><span class="line">        <span class="keyword">private</span> Node next;</span><br><span class="line">        <span class="keyword">public</span> Node prev;</span><br><span class="line">        Node(T i, Node p, Node n) &#123;</span><br><span class="line">            item = i;</span><br><span class="line">            prev = p;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node sentinel;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListDeque</span><span class="params">()</span> &#123;</span><br><span class="line">        sentinel = <span class="keyword">new</span> <span class="title class_">Node</span>(<span class="literal">null</span> ,<span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        sentinel.prev = sentinel;</span><br><span class="line">        sentinel.next = sentinel;</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedListDeque</span><span class="params">(T i)</span> &#123;</span><br><span class="line">        sentinel = <span class="keyword">new</span> <span class="title class_">Node</span>(i, <span class="literal">null</span>, <span class="literal">null</span>);</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> <span class="title class_">Node</span>(i, sentinel, sentinel);</span><br><span class="line">        sentinel.prev = sentinel.next;</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item of type T to the front of the deque.</span></span><br><span class="line"><span class="comment">     * You can assume that item is never null. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(T item)</span> &#123;</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> <span class="title class_">Node</span>(item, sentinel, sentinel.next);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item of type T to the back of the deque.</span></span><br><span class="line"><span class="comment">     * You can assume that item is never null. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(T item)</span> &#123;</span><br><span class="line">        sentinel.prev = <span class="keyword">new</span> <span class="title class_">Node</span>(item, sentinel.prev, sentinel);</span><br><span class="line">        sentinel.prev.prev.next = sentinel.prev;</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns true if deque is empty, false otherwise. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() &lt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of items in the deque. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Prints the items in the deque from first to last, separated by a space.</span></span><br><span class="line"><span class="comment">     * Once all the items have been printed, print out a new line. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printDeque</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> size();</span><br><span class="line">        <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="keyword">while</span> (i &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.print(p.next.item);</span><br><span class="line">            System.out.print(<span class="string">&quot; &quot;</span>);</span><br><span class="line">            p = p.next;</span><br><span class="line">            i--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes and returns the item at the front of the deque.</span></span><br><span class="line"><span class="comment">     * If no such item exists, returns null. */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="type">T</span> <span class="variable">item</span> <span class="operator">=</span> sentinel.next.item;</span><br><span class="line">        sentinel.next.next.prev = sentinel.next.prev;</span><br><span class="line">        sentinel.next = sentinel.next.next;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes and returns the item at the back of the deque.</span></span><br><span class="line"><span class="comment">     * If no such item exists, returns null. */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        size--;</span><br><span class="line">        <span class="type">T</span> <span class="variable">item</span> <span class="operator">=</span> sentinel.prev.item;</span><br><span class="line">        sentinel.prev.prev.next = sentinel;</span><br><span class="line">        sentinel.prev = sentinel.prev.prev;</span><br><span class="line">        <span class="keyword">if</span> (size == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Gets the item at the given index, where 0 is the front, 1 is the next item, and so forth.</span></span><br><span class="line"><span class="comment">     * If no such item exists, returns null. Must not alter the deque! */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt; size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Node</span> <span class="variable">p</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="keyword">while</span> (index &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            p = p.next;</span><br><span class="line">            index--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> p.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> T <span class="title function_">getRecursivehelper</span><span class="params">(<span class="type">int</span> index, Node s)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> s.item;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getRecursivehelper(index - <span class="number">1</span>, s.next);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Same as get, but uses recursion. */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">getRecursive</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getRecursivehelper(index, sentinel.next);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Array-Deque"><a href="#Array-Deque" class="headerlink" title="Array Deque"></a>Array Deque</h2><p>å¯¹äºæ­¤å®ç°ï¼Œæ‚¨çš„æ“ä½œå—ä»¥ä¸‹è§„åˆ™çš„çº¦æŸï¼š</p><ul><li><code>add</code> å¹¶ä¸” <code>remove</code> å¿…é¡»èŠ±è´¹æ’å®šçš„æ—¶é—´ï¼Œé™¤éåœ¨è°ƒæ•´å¤§å°æ“ä½œæœŸé—´ã€‚</li><li><code>get</code> å¹¶ä¸” <code>size</code> å¿…é¡»èŠ±è´¹æ’å®šçš„æ—¶é—´ã€‚</li><li>æ•°ç»„çš„èµ·å§‹å¤§å°åº”ä¸º 8ã€‚</li><li>ç¨‹åºåœ¨ä»»ä½•ç»™å®šæ—¶é—´ä½¿ç”¨çš„å†…å­˜é‡å¿…é¡»ä¸é¡¹æ•°æˆæ­£æ¯”ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°† 10,000 ä¸ªé¡¹ç›®æ·»åŠ åˆ° dequeï¼Œç„¶ååˆ é™¤ 9,999 ä¸ªé¡¹ç›®ï¼Œåˆ™ä¸åº”ä»ä½¿ç”¨é•¿åº¦ä¸º 10,000ish çš„æ•°ç»„ã€‚å¯¹äºé•¿åº¦ä¸º 16 æˆ–æ›´å¤§çš„æ•°ç»„ï¼Œä½¿ç”¨ç³»æ•°åº”å§‹ç»ˆè‡³å°‘ä¸º 25%ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨æ‰§è¡Œå°†æ•°ç»„ä¸­çš„å…ƒç´ æ•°æ§åˆ¶åœ¨æ•°ç»„é•¿åº¦çš„ 25% ä»¥ä¸‹çš„åˆ é™¤æ“ä½œä¹‹å‰ï¼Œåº”å‡å°æ•°ç»„çš„å¤§å°ã€‚å¯¹äºè¾ƒå°çš„é˜µåˆ—ï¼Œä½¿ç”¨ç³»æ•°å¯ä»¥ä»»æ„é™ä½ã€‚</li></ul><p>å®ç°ä¸Šé¢â€œDeque APIâ€éƒ¨åˆ†ä¸­åˆ—å‡ºçš„æ‰€æœ‰æ–¹æ³•ã€‚</p><p>æ­¤å¤–ï¼Œæ‚¨è¿˜éœ€è¦å®ç°ï¼š</p><ul><li><code>public ArrayDeque()</code> ï¼šåˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ dequeã€‚</li></ul><p>æ‚¨å°†éœ€è¦ä»¥æŸç§æ–¹å¼è·Ÿè¸ªå“ªäº›æ•°ç»„ç´¢å¼•åŒ…å« Deque çš„æ­£é¢å’ŒèƒŒé¢å…ƒç´ ã€‚æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨æœ¬ç»ƒä¹ ä¸­å°†æ•°ç»„è§†ä¸ºå¾ªç¯æ•°ç»„ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœä½ çš„å‰é¢é¡¹ä½äºé›¶ä½ç½®ï¼Œè€Œ u <code>addFirst</code> ï¼Œåˆ™æ–°çš„å‰é¢åº”è¯¥å¾ªç¯å›æ•°ç»„çš„æœ«å°¾ï¼ˆå› æ­¤ deque ä¸­çš„æ–°å‰é¢é¡¹å°†æ˜¯åŸºç¡€æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªé¡¹ï¼‰ã€‚ä¸éå¾ªç¯æ–¹æ³•ç›¸æ¯”ï¼Œè¿™å°†å¯¼è‡´æ›´å°‘çš„å¤´ç—›ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é¡¹ç›® 1 <a href="https://docs.google.com/presentation/d/1XBJOht0xWz1tEvLuvOL4lOIaY0NSfArXAvqgkrx0zpc/edit#slide=id.g1094ff4355_0_450">project 1 demo slides</a> æ¼”ç¤ºå¹»ç¯ç‰‡ã€‚</p><h3 id="ç­”æ¡ˆ-1"><a href="#ç­”æ¡ˆ-1" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> deque;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDeque</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> T[] item;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> nextFirst;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> nextLast;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayDeque</span><span class="params">()</span> &#123;</span><br><span class="line">        item = (T []) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        nextFirst = <span class="number">1</span>;</span><br><span class="line">        nextLast = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayDeque</span><span class="params">(ArrayDeque other)</span> &#123;</span><br><span class="line">        item = (T []) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br><span class="line">        System.arraycopy(other.item, <span class="number">0</span>, item, <span class="number">0</span>, size);</span><br><span class="line">        size = other.size;</span><br><span class="line">        nextFirst = other.nextFirst;</span><br><span class="line">        nextLast = other.nextLast;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">ForwardValue</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        n--;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            n = item.length - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">BackValue</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        n++;</span><br><span class="line">        <span class="keyword">if</span> (n &gt;= item.length) &#123;</span><br><span class="line">            n = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** before performing a remove operation that will bring the number of elements in the array under 25% the length of the array, </span></span><br><span class="line"><span class="comment">     * resize the size of the array down. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        T[] a = (T[]) <span class="keyword">new</span> <span class="title class_">Object</span>[x];</span><br><span class="line">        <span class="keyword">if</span> ((size &lt; item.length / <span class="number">4</span>) &amp;&amp; (size &gt; <span class="number">16</span>)) &#123;</span><br><span class="line">            System.arraycopy(item, nextFirst+<span class="number">1</span>, a, <span class="number">0</span>, size);</span><br><span class="line">            nextFirst = -<span class="number">1</span>;</span><br><span class="line">            nextLast = size;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.arraycopy(item, <span class="number">0</span>, a, <span class="number">0</span>, nextFirst+<span class="number">1</span>);</span><br><span class="line">            System.arraycopy(item, nextLast, a, a.length - item.length + nextFirst + <span class="number">1</span>, item.length - nextFirst -<span class="number">1</span>);</span><br><span class="line">            nextFirst = a.length - item.length + nextFirst;</span><br><span class="line">        &#125;</span><br><span class="line">        item = a;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item of type T to the front of the deque.</span></span><br><span class="line"><span class="comment">     * You can assume that item is never null. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(T i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == item.length) &#123;</span><br><span class="line">            resize(size * <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">while</span> (item[nextFirst] != <span class="literal">null</span>) &#123;</span><br><span class="line">                nextFirst = ForwardValue(nextFirst);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        item[nextFirst] = i;</span><br><span class="line">        size++;</span><br><span class="line">        nextFirst = ForwardValue(nextFirst);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item of type T to the back of the deque.</span></span><br><span class="line"><span class="comment">     * You can assume that item is never null. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(T i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size == item.length) &#123;</span><br><span class="line">            resize(size * <span class="number">2</span>);</span><br><span class="line">            <span class="keyword">while</span> (item[nextLast] != <span class="literal">null</span>) &#123;</span><br><span class="line">                nextLast = BackValue(nextLast);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        item[nextLast] = i;</span><br><span class="line">        size++;</span><br><span class="line">        nextLast = BackValue(nextLast);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns true if deque is empty, false otherwise. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size &lt;= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of items in the deque. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Prints the items in the deque from first to last, separated by a space.</span></span><br><span class="line"><span class="comment">     * Once all the items have been printed, print out a new line. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printDeque</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">            System.out.println(item[(nextFirst + i + <span class="number">1</span>) % item.length]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes and returns the item at the front of the deque.</span></span><br><span class="line"><span class="comment">     * If no such item exists, returns null. */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">removeFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((size &lt; item.length / <span class="number">4</span>) &amp;&amp; (size &gt; <span class="number">16</span>)) &#123;</span><br><span class="line">            resize(item.length / <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">T</span> <span class="variable">curValue</span> <span class="operator">=</span> item[BackValue(nextFirst)];</span><br><span class="line">        item[BackValue(nextFirst)] = <span class="literal">null</span>;</span><br><span class="line">        nextFirst = BackValue(nextFirst);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> curValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Removes and returns the item at the back of the deque.</span></span><br><span class="line"><span class="comment">     * If no such item exists, returns null. */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (size &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ((size &lt; item.length / <span class="number">4</span>) &amp;&amp; (size &gt; <span class="number">16</span>)) &#123;</span><br><span class="line">            resize(item.length / <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">T</span> <span class="variable">curValue</span> <span class="operator">=</span> item[ForwardValue(nextLast)];</span><br><span class="line">        item[ForwardValue(nextLast)] = <span class="literal">null</span>;</span><br><span class="line">        nextLast = ForwardValue(nextLast);</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> curValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Gets the ith item in the list (0 is the front). */</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= size()) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> item[(nextFirst + i + <span class="number">1</span>) % item.length];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Deque-Interface-æ¥å£"><a href="#Deque-Interface-æ¥å£" class="headerlink" title="Deque Interface(æ¥å£)"></a>Deque Interface(æ¥å£)</h1><p>å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹æ³•å®šä¹‰äº† <code>Deque</code> API æˆ–è¡Œä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public void addFirst(T item)</span><br><span class="line">public void addLast(T item)</span><br><span class="line">public boolean isEmpty()</span><br><span class="line">public int size()</span><br><span class="line">public void printDeque()</span><br><span class="line">public T removeFirst()</span><br><span class="line">public T removeLast()</span><br><span class="line">public T get(int index) </span><br></pre></td></tr></table></figure><p>ç”±äºç¨‹åºå°†ä¾èµ–äºæ­¤è¡Œä¸ºï¼Œå› æ­¤æä¾›ä»€ä¹ˆ <code>Deque</code> å®ç°å¯¹å®ƒæ¥è¯´å¹¶ä¸é‡è¦ï¼Œæˆ–è€… <code>LinkedListDeque</code> ï¼Œ <code>ArrayDeque</code> å¹¶ä¸”åº”è¯¥åŒæ—¶é€‚ç”¨äºä¸¤è€…ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥å£çš„å¼ºå¤§åŠŸèƒ½ã€‚</p><p>åœ¨åŒ…å«ä¸Šè¿°æ‰€æœ‰æ–¹æ³•çš„æ–° <code>Deque.java</code> æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä¸ªæ¥å£ã€‚åœ¨ IntelliJ ä¸­ï¼Œä½¿ç”¨â€œNew â†’ Java Classâ€ã€‚IntelliJ ä¼šå‡è®¾ä½ æƒ³è¦ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥ä¸€å®šè¦æŠŠ <code>class</code> å…³é”®è¯æ¢æˆ <code>interface</code> ã€‚ä¸è¦å¿˜è®°å£°æ˜ <code>Deque</code> æ¥å£æ˜¯åŒ…çš„ä¸€éƒ¨åˆ† <code>deque</code> ï¼</p><p>ä¿®æ”¹ä½ çš„ <code>LinkedListDeque</code> æˆ– <code>ArrayDeque</code> ï¼Œä»¥ä¾¿å®ƒä»¬é€šè¿‡æ·»åŠ åˆ° <code>implements Deque&lt;T&gt;</code> å£°æ˜ç±»å­˜åœ¨çš„è¡Œæ¥å®ç° <code>Deque</code> æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayDeque</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;T&gt;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedListDeque</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Deque</span>&lt;T&gt;</span><br></pre></td></tr></table></figure><p>å‘è¦†ç›–æ–¹æ³•çš„æ¯ä¸ª <code>Deque</code> æ–¹æ³•æ·»åŠ  <code>@Override</code> æ ‡è®°ã€‚</p><p>ç°åœ¨ï¼Œåœ¨æ¥å£ä¸­ <code>Deque</code> ï¼Œç»™å‡º <code>isEmpty()</code> ä¸€ä¸ª <code>default</code> å®ç°ï¼Œå¦‚æœ <code>size()</code> æ˜¯ <code>0</code> ï¼Œåˆ™è¿”å› <code>true</code> .ç”±äº your <code>LinkedListDeque</code> å’Œ å®ç°æ¥å£ <code>Deque</code> ï¼Œç»™å®šé»˜è®¤ <code>isEmpty()</code> å®ç°ï¼Œæ‚¨å¯ä»¥ä»ä¹‹å‰å®ç°çš„ <code>LinkedListDeque</code> å’Œ <code>ArrayDeque</code> <code>ArrayDeque</code> ä¸­åˆ é™¤è¯¥æ–¹æ³•ã€‚</p><p>ç°åœ¨ï¼Œåœ¨å®ç° <code>Deque</code> æ¥å£å¹¶ä» <code>LinkedListDeque</code> å’Œ <code>ArrayDeque</code> å®ç°ä¸­åˆ é™¤ <code>isEmpty()</code> æ–¹æ³•åï¼Œä»£ç å°†åœ¨å®Œæ•´çš„è‡ªåŠ¨åˆ†çº§å™¨ä¸Šç¼–è¯‘ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> deque;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Deque</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(T i)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(T i)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="type">boolean</span> <span class="title function_">isEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.size() &lt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">printDeque</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">removeFirst</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">removeLast</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Guitar-Hero"><a href="#Guitar-Hero" class="headerlink" title="Guitar Hero"></a>Guitar Hero</h1><p>åœ¨é¡¹ç›®çš„è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºå¦ä¸€ä¸ªåŒ…ï¼Œç”¨äºä½¿ç”¨æˆ‘ä»¬åˆšåˆšåˆ¶ä½œçš„ <code>deque</code> åŒ…ç”Ÿæˆåˆæˆä¹å™¨ã€‚æˆ‘ä»¬å°†æœ‰æœºä¼šä½¿ç”¨æˆ‘ä»¬çš„æ•°æ®ç»“æ„æ¥å®ç°ä¸€ç§ç®—æ³•ï¼Œè¯¥ç®—æ³•å…è®¸æˆ‘ä»¬æ¨¡æ‹Ÿå‰ä»–å¼¦çš„å¼¹æ‹¨ã€‚</p><h2 id="The-GH2-Package"><a href="#The-GH2-Package" class="headerlink" title="The GH2 Package"></a>The GH2 Package</h2><p>è¯¥ <code>gh2</code> åŒ…åªæœ‰ä¸€ä¸ªä¸»è¦ç»„ä»¶ï¼Œæ‚¨å°†å¯¹å…¶è¿›è¡Œç¼–è¾‘ï¼š</p><ul><li><code>GuitarString</code> ï¼Œè¯¥ç±»ä½¿ç”¨ <code>Deque&lt;Double&gt;</code> æ¥å®ç° <a href="http://en.wikipedia.org/wiki/Karplus%E2%80%93Strong_string_synthesis">Karplus-Strong ç®—æ³•</a> æ¥åˆæˆå‰ä»–å¼¦å£°éŸ³ã€‚</li></ul><p>æˆ‘ä»¬ä¸ºæ‚¨æä¾›äº†æ¡†æ¶ä»£ç  <code>GuitarString</code> ï¼Œæ‚¨å°†åœ¨å…¶ä¸­ä½¿ç”¨åœ¨æœ¬é¡¹ç›®ç¬¬ä¸€éƒ¨åˆ†ä¸­åˆ›å»ºçš„ <code>deque</code> åŒ…ã€‚</p><h2 id="GuitarString"><a href="#GuitarString" class="headerlink" title="GuitarString"></a>GuitarString</h2><p>æˆ‘ä»¬æƒ³è¦å®Œæˆ <code>GuitarString</code> æ–‡ä»¶ï¼Œå®ƒåº”è¯¥ä½¿ç”¨åŒ… <code>deque</code> æ¥å¤åˆ¶æ‹¨å¼¦çš„å£°éŸ³ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ Karplus-Strong ç®—æ³•ï¼Œè¯¥ç®—æ³•å¾ˆå®¹æ˜“é€šè¿‡ <code>Deque</code> .</p><p>The Karplus-Algorithm is simply the following three steps:<br>Karplusç®—æ³•åªæ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ol><li>ç”¨éšæœºå™ªå£°ï¼ˆ <code>double</code> å€¼ä»‹äº -0.5 å’Œ 0.5 ä¹‹é—´ï¼‰æ›¿æ¢ a <code>Deque</code> ä¸­çš„æ¯ä¸ªé¡¹ç›®ã€‚</li><li>å»æ‰<code>Deque</code> æœ€å‰é¢çš„doubleå€¼ï¼Œå¹¶å’Œ<code>Deque</code> ä¸‹ä¸€ä¸ªdouble ï¼ˆæç¤ºï¼šä½¿ç”¨ <code>removeFirst()</code> å’Œ <code>get()</code> )å–å¹³å‡å€¼ ç„¶å ä¹˜ä»¥èƒ½é‡è¡°å‡å› å­ 0.996ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•´ä¸ªé‡ <code>newDouble</code> ï¼‰ã€‚ç„¶åï¼Œæ·»åŠ åˆ° <code>newDouble</code> åˆ°<code>Deque</code>çš„æœ€å .</li><li>æ’­æ”¾æ‚¨åœ¨æ­¥éª¤2ä¸­é€€å‡ºé˜Ÿåˆ—çš„double (newDouble)ã€‚å›åˆ°æ­¥éª¤2(å¹¶ä¸æ–­é‡å¤)ã€‚</li></ol><p>æˆ–è€…ä»è§†è§‰ä¸Šçœ‹ï¼Œå¦‚æœå¦‚ <code>Deque</code> é¡¶éƒ¨æ‰€ç¤ºï¼Œæˆ‘ä»¬å°†åˆ é™¤ 0.2ï¼Œå°†å…¶ä¸ 0.4 åˆå¹¶å½¢æˆ 0.2988ï¼Œæ·»åŠ  0.2988ï¼Œç„¶åæ’­æ”¾ 0.2ã€‚</p><p><img src="/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/karplus-strong.png" alt="karplus-strong"></p><p>æ‚¨å¯ä»¥ä½¿ç”¨è¯¥ <code>StdAudio.play</code> æ–¹æ³•æ’­æ”¾å€¼ <code>double</code> ã€‚ä¾‹å¦‚ <code>StdAudio.play(0.333)</code> ï¼Œä¼šå‘Šè¯‰æ‰¬å£°å™¨çš„æŒ¯è†œå°†è‡ªå·±ä¼¸å±•åˆ°å…¶æ€»èŒƒå›´çš„ 1&#x2F;3ï¼Œ <code>StdAudio.play(-0.9)</code> ä¼šå‘Šè¯‰å®ƒå‡ ä¹å‘åä¼¸å±•å®ƒçš„å°å¿ƒè„ï¼Œå‡ ä¹å°½å¯èƒ½è¿œã€‚æ‰¬å£°å™¨æŒ¯è†œçš„è¿åŠ¨ä¼šå–ä»£ç©ºæ°”ï¼Œå¦‚æœä½ ä»¥å¾ˆå¥½çš„æ¨¡å¼å–ä»£ç©ºæ°”ï¼Œè¿™äº›å¹²æ‰°å°†è¢«ä½ çš„æ„è¯†è§£é‡Šä¸ºä»¤äººæ„‰æ‚¦ï¼Œè¿™è¦å½’åŠŸäºæ•°åäº¿å¹´çš„è¿›åŒ–ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æ­¤é¡µé¢ã€‚å¦‚æœä½ åªæ˜¯è¿™æ ·åš <code>StdAudio.play(0.9)</code> ï¼Œå†ä¹Ÿä¸ç©ä»»ä½•ä¸œè¥¿ï¼Œé‚£ä¹ˆå›¾åƒä¸­æ˜¾ç¤ºçš„éš”è†œå°†åªæ˜¯é™æ­¢ä¸åŠ¨åœ°å‰è¿›çš„ 9&#x2F;10ã€‚</p><p>å®Œæˆ <code>GuitarString.java</code> ï¼Œä»¥ä¾¿å®ç° Karplus-Strong ç®—æ³•çš„ç¬¬ 1 æ­¥å’Œç¬¬ 2 æ­¥ã€‚è¯·æ³¨æ„ï¼Œæ‚¨å¿…é¡»åœ¨ <code>GuitarString</code> æ„é€ å‡½æ•°ä¸­ç”¨é›¶å¡«å……ç¼“å†²åŒº <code>Deque</code> ã€‚ç¬¬ 3 æ­¥å°†ç”± <code>GuitarString</code> ç±»çš„å®¢æˆ·ç«¯å®Œæˆã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gh2;</span><br><span class="line"><span class="keyword">import</span> deque.*;</span><br><span class="line"><span class="comment">// import deque.Deque;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Note: This file will not compile until you complete the Deque implementations</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuitarString</span> &#123;</span><br><span class="line">    <span class="comment">/** Constants. Do not change. In case you&#x27;re curious, the keyword final</span></span><br><span class="line"><span class="comment">     * means the values cannot be changed at runtime. We&#x27;ll discuss this and</span></span><br><span class="line"><span class="comment">     * other topics in lecture on Friday. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">SR</span> <span class="operator">=</span> <span class="number">44100</span>;      <span class="comment">// Sampling Rate</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">DECAY</span> <span class="operator">=</span> <span class="number">.996</span>; <span class="comment">// energy decay factor</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Buffer for storing sound data. */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Deque&lt;Double&gt; buffer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Create a guitar string of the given frequency.  */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">GuitarString</span><span class="params">(<span class="type">double</span> frequency)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">capacity</span> <span class="operator">=</span> (<span class="type">int</span>) Math.round(SR / frequency);</span><br><span class="line">        buffer = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;Double&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; capacity; i++) &#123;</span><br><span class="line">            buffer.addFirst(<span class="number">0.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Pluck the guitar string by replacing the buffer with white noise. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pluck</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//       Make sure that your random numbers are different from each</span></span><br><span class="line">        <span class="comment">//       other. This does not mean that you need to check that the numbers</span></span><br><span class="line">        <span class="comment">//       are different from each other. It means you should repeatedly call</span></span><br><span class="line">        <span class="comment">//       Math.random() - 0.5 to generate new random numbers for each array index.</span></span><br><span class="line">        <span class="type">double</span> temp;</span><br><span class="line">        Deque&lt;Double&gt; NewBuffer = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;Double&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buffer.size(); i++) &#123;</span><br><span class="line">            <span class="type">double</span> <span class="variable">r</span> <span class="operator">=</span> Math.random() - <span class="number">0.5</span>;</span><br><span class="line">            temp = buffer.get(i);</span><br><span class="line">            NewBuffer.addLast(temp - r);</span><br><span class="line">        &#125;</span><br><span class="line">        buffer = NewBuffer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Advance the simulation one time step by performing one iteration of</span></span><br><span class="line"><span class="comment">     * the Karplus-Strong algorithm.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tic</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">double</span> NewDouble;</span><br><span class="line">        <span class="type">double</span> <span class="variable">temp</span> <span class="operator">=</span> buffer.get(<span class="number">0</span>);</span><br><span class="line">        buffer.removeFirst();</span><br><span class="line">        NewDouble = DECAY * <span class="number">0.5</span> * (temp + buffer.get(<span class="number">0</span>));</span><br><span class="line">        buffer.addLast(NewDouble);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Return the double at the front of the buffer. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">sample</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> buffer.get(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="GuitarHero"><a href="#GuitarHero" class="headerlink" title="GuitarHero"></a>GuitarHero</h2><p>éä½œä¸šï¼Œå•çº¯å¥½ç©</p><p>è€ƒè™‘åˆ›å»ºä¸€ä¸ªç±»ä¼¼äº <code>GuitarHeroLite</code> çš„ç¨‹åº <code>GuitarHero</code> ï¼Œä½†æ”¯æŒ 37Hz åˆ° 110Hz çš„åŠéŸ³é˜¶ä¸Šæ€»å…± 880 ä¸ªéŸ³ç¬¦ã€‚ä½¿ç”¨ä»¥ä¸‹ 37 ä¸ªé”®æ¥è¡¨ç¤ºé”®ç›˜ï¼Œä»æœ€ä½éŸ³ç¬¦åˆ°æœ€é«˜éŸ³ç¬¦ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String keyboard = &quot;q2we4r5ty7u8i9op-[=zxdcfvgbnjmk,.;/&#x27; &quot;;</span><br></pre></td></tr></table></figure><p>è¿™ç§é”®ç›˜æ’åˆ—æ¨¡ä»¿é’¢ç´é”®ç›˜ï¼šâ€œç™½é”®â€ä½äºé”®ç›˜çš„ qwerty å’Œ zxcv è¡Œä¸Šï¼Œâ€œé»‘é”®â€ä½äºé”®ç›˜çš„ 12345 å’Œ asdf è¡Œä¸Šã€‚</p><p>å­—ç¬¦ä¸²é”®ç›˜çš„ç¬¬ i ä¸ªå­—ç¬¦å¯¹åº”äº <img src="/2024/01/29/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-3-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj1/image-20240129042827790.png" alt="image-20240129042827790"> çš„é¢‘ç‡ï¼Œå› æ­¤å­—ç¬¦â€œqâ€ä¸º 110Hzï¼Œâ€œiâ€ä¸º 220Hzï¼Œâ€œvâ€ä¸º 440Hzï¼Œâ€œâ€ä¸º 880Hzã€‚ç”šè‡³ä¸è¦è€ƒè™‘åŒ…å« 37 ä¸ªå•ç‹¬çš„ GuitarString å˜é‡æˆ– 37 è·¯ if è¯­å¥ï¼ç›¸åï¼Œåˆ›å»ºä¸€ä¸ªåŒ…å« 37 <code>GuitarString</code> ä¸ªå¯¹è±¡çš„æ•°ç»„ï¼Œå¹¶ç”¨äº <code>keyboard.indexOf(key)</code> ç¡®å®šé”®å…¥äº†å“ªä¸ªé”®ã€‚ç¡®ä¿å¦‚æœæŒ‰ä¸‹çš„é”®ä¸æ‚¨çš„ 37 ä¸ªéŸ³ç¬¦ä¹‹ä¸€ä¸å¯¹åº”ï¼Œæ‚¨çš„ç¨‹åºä¸ä¼šå´©æºƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> gh2;</span><br><span class="line"><span class="keyword">import</span> deque.ArrayDeque;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdDraw;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.introcs.StdAudio;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GuitarHero</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">String</span> <span class="variable">keyboard</span> <span class="operator">=</span> <span class="string">&quot;q2we4r5ty7u8i9op-[=zxdcfvgbnjmk,.;/&#x27; &quot;</span>;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">FREQ</span> <span class="operator">=</span> <span class="number">440</span>;</span><br><span class="line">        ArrayDeque&lt;GuitarString&gt; guitar = <span class="keyword">new</span> <span class="title class_">ArrayDeque</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="comment">/* check if the user has typed a key; if so, process it */</span></span><br><span class="line">            <span class="keyword">if</span> (StdDraw.hasNextKeyTyped()) &#123;</span><br><span class="line">                <span class="type">char</span> <span class="variable">key</span> <span class="operator">=</span> StdDraw.nextKeyTyped();</span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> keyboard.indexOf(key);</span><br><span class="line">                <span class="type">double</span> <span class="variable">freq</span> <span class="operator">=</span> FREQ * Math.pow(<span class="number">2</span>, (<span class="type">double</span>) (i - <span class="number">24</span>) /<span class="number">12</span>);</span><br><span class="line">                guitar.addLast(<span class="keyword">new</span> <span class="title class_">GuitarString</span>(freq));</span><br><span class="line">                <span class="keyword">if</span> (guitar.size() &gt; index) &#123;</span><br><span class="line">                    index++;</span><br><span class="line">                &#125;</span><br><span class="line">                guitar.get(index).pluck();</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="type">double</span> <span class="variable">sample</span> <span class="operator">=</span> <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; guitar.size(); j++) &#123;</span><br><span class="line">                sample += guitar.get(j).sample();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">/* play the sample on standard audio */</span></span><br><span class="line">            StdAudio.play(sample);</span><br><span class="line"></span><br><span class="line">            <span class="comment">/* advance the simulation of each guitar string by one step */</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; guitar.size(); j++) &#123;</span><br><span class="line">                guitar.get(j).tic();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Even-More-Fun-æ›´æœ‰è¶£"><a href="#Even-More-Fun-æ›´æœ‰è¶£" class="headerlink" title="Even More Fun æ›´æœ‰è¶£"></a>Even More Fun æ›´æœ‰è¶£</h2><p>è¿™éƒ¨åˆ†ä½œä¸šæ²¡æœ‰è¯„åˆ†ï¼Œåªæ˜¯ä¸ºäº†å¥½ç©ã€‚</p><ul><li>Harp å­—ç¬¦ä¸²ï¼šåœ¨åŒ…ä¸­ <code>gh2</code> åˆ›å»ºä¸€ä¸ª Harp ç±»ã€‚åœ¨å°†æ–°å€¼æ’å…¥é˜Ÿåˆ—ä¹‹å‰ç¿»è½¬æ–°å€¼çš„ç¬¦å· <code>tic()</code> ä¼šå°†å£°éŸ³ä»å‰ä»–å¼å˜ä¸ºç«–ç´å¼ã€‚æ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨è¡°å‡å› å­æ¥æé«˜çœŸå®æ„Ÿï¼Œå¹¶å°†ç¼“å†²åŒºå¤§å°è°ƒæ•´ä¸¤å€ï¼Œå› ä¸º <code>tic()</code> è‡ªç„¶å…±æŒ¯é¢‘ç‡ä¼šå› å˜åŒ–è€Œå‡åŠã€‚</li><li>Drumsï¼šåœ¨åŒ…ä¸­ <code>gh2</code> åˆ›å»ºä¸€ä¸ª Drum ç±»ã€‚åœ¨å°†æ–°å€¼æ’å…¥é˜Ÿåˆ—ä¹‹å‰ï¼Œä»¥ 0.5 çš„æ¦‚ç‡ç¿»è½¬æ–°å€¼çš„ç¬¦å· <code>tic()</code> å°†äº§ç”Ÿé¼“å£°ã€‚è¡°å‡ç³»æ•°ä¸º 1.0ï¼ˆæ— è¡°å‡ï¼‰å°†äº§ç”Ÿæ›´å¥½çš„å£°éŸ³ï¼Œæ‚¨éœ€è¦è°ƒæ•´ä½¿ç”¨çš„é¢‘ç‡é›†ã€‚</li><li>å‰ä»–åœ¨ 6 æ ¹ç‰©ç†å¼¦ä¹‹ä¸€ä¸Šå¼¹å¥æ¯ä¸ªéŸ³ç¬¦ã€‚ä¸ºäº†æ¨¡æ‹Ÿè¿™ç§æƒ…å†µï¼Œæ‚¨å¯ä»¥å°† <code>GuitarString</code> å®ä¾‹åˆ†æˆ 6 ç»„ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²è¢«æ‘˜å–æ—¶ï¼Œå°†è¯¥ç»„ä¸­çš„æ‰€æœ‰å…¶ä»–å­—ç¬¦ä¸²æ¸…é›¶ã€‚</li><li>é’¢ç´å¸¦æœ‰ä¸€ä¸ªé˜»å°¼è¸æ¿ï¼Œå¯ç”¨äºä½¿ç´å¼¦é™æ­¢ã€‚æ‚¨å¯ä»¥é€šè¿‡åœ¨æŒ‰ä½æŸä¸ªé”®ï¼ˆä¾‹å¦‚ Shiftï¼‰çš„è¿­ä»£ä¸­æ›´æ”¹è¡°å‡å› å­æ¥å®ç°æ­¤ç›®çš„ã€‚</li><li>è™½ç„¶æˆ‘ä»¬ä½¿ç”¨äº†å¹³ç­‰çš„æ°”è´¨ï¼Œä½†å½“éŸ³ä¹éŸ³ç¨‹è·Ÿéšæ­£éŸ³è°ƒç³»ç»Ÿä¸­çš„å°éƒ¨åˆ†æ—¶ï¼Œè€³æœµä¼šå‘ç°å®ƒæ›´ä»¤äººæ„‰æ‚¦ã€‚ä¾‹å¦‚ï¼Œå½“éŸ³ä¹å®¶ä½¿ç”¨é“œç®¡ä¹å™¨æ¼”å¥å®Œç¾çš„äº”åº¦å’Œå£°æ—¶ï¼Œé¢‘ç‡ä¹‹æ¯”ä¸º 3&#x2F;2 &#x3D; 1.5ï¼Œè€Œä¸æ˜¯ 27&#x2F;12 âˆ¼ 1.498ã€‚ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œå…¶ä¸­æ¯å¯¹è¿ç»­çš„éŸ³ç¬¦éƒ½åªæœ‰è¯­è°ƒã€‚</li></ul><h2 id="Why-It-Works-ä¸ºä»€ä¹ˆæœ‰æ•ˆ"><a href="#Why-It-Works-ä¸ºä»€ä¹ˆæœ‰æ•ˆ" class="headerlink" title="Why It Works ä¸ºä»€ä¹ˆæœ‰æ•ˆ"></a>Why It Works ä¸ºä»€ä¹ˆæœ‰æ•ˆ</h2><p>ä½¿Karplus-Strongç®—æ³•èµ·ä½œç”¨çš„ä¸¤ä¸ªä¸»è¦ç»„ä»¶æ˜¯ç¯å½¢ç¼“å†²åŒºåé¦ˆæœºåˆ¶å’Œå¹³å‡æ“ä½œã€‚</p><ul><li><strong>The ring buffer feedback mechanism</strong>. The ring buffer models the medium (a string tied down at both ends) in which the energy travels back and forth. The length of the ring buffer determines the fundamental frequency of the resulting sound. Sonically, the feedback mechanism reinforces only the fundamental frequency and its harmonics (frequencies at integer multiples of the fundamental). The energy decay factor (.996 in this case) models the slight dissipation in energy as the wave makes a round trip through the string.<br><strong>ç¯å½¢ç¼“å†²åŒºåé¦ˆæœºåˆ¶ã€‚</strong>ç¯å½¢ç¼“å†²å™¨æ¨¡æ‹Ÿèƒ½é‡æ¥å›ä¼ æ’­çš„ä»‹è´¨ï¼ˆä¸¤ç«¯ç³»åœ¨ä¸€èµ·çš„ç»³å­ï¼‰ã€‚ç¯å½¢ç¼“å†²å™¨çš„é•¿åº¦å†³å®šäº†æ‰€äº§ç”Ÿå£°éŸ³çš„åŸºé¢‘ã€‚åœ¨å£°éŸ³ä¸Šï¼Œåé¦ˆæœºåˆ¶ä»…å¢å¼ºåŸºé¢‘åŠå…¶è°æ³¢ï¼ˆåŸºé¢‘æ•´æ•°å€çš„é¢‘ç‡ï¼‰ã€‚èƒ½é‡è¡°å‡å› å­ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º .996ï¼‰æ¨¡æ‹Ÿäº†æ³¢åœ¨å¼¦ä¸Šå¾€è¿”æ—¶èƒ½é‡çš„è½»å¾®è€—æ•£ã€‚</li><li><strong>The averaging operation</strong>. The averaging operation serves as a gentle low-pass filter (which removes higher frequencies while allowing lower frequencies to pass, hence the name). Because it is in the path of the feedback, this has the effect of gradually attenuating the higher harmonics while keeping the lower ones, which corresponds closely with how a plucked guitar string sounds.<br>å¹³å‡æ“ä½œã€‚å¹³å‡æ“ä½œç”¨ä½œæ¸©å’Œçš„ä½é€šæ»¤æ³¢å™¨ï¼ˆå®ƒå»é™¤è¾ƒé«˜é¢‘ç‡ï¼ŒåŒæ—¶å…è®¸è¾ƒä½é¢‘ç‡é€šè¿‡ï¼Œå› æ­¤å¾—åï¼‰ã€‚å› ä¸ºå®ƒåœ¨åé¦ˆçš„è·¯å¾„ä¸­ï¼Œæ‰€ä»¥å…·æœ‰é€æ¸è¡°å‡é«˜æ¬¡è°æ³¢åŒæ—¶ä¿æŒä½æ¬¡è°æ³¢çš„æ•ˆæœï¼Œè¿™ä¸å¼¹æ‹¨å‰ä»–å¼¦çš„å£°éŸ³éå¸¸å»åˆã€‚</li></ul><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“:"></a>æ€»ç»“:</h1><p>é€šè¿‡é¡¹ç›®ä¸€ï¼Œæˆ‘å­¦åˆ°äº†ä»¥ä¸‹ä¸œè¥¿:</p><ul><li>å¦‚ä½•æ„é€ å‡ºä¸€ä¸ªDeque API</li><li>packageçš„ç”¨æ³•</li><li>æ¥å£çš„åˆ›ç«‹</li><li>æ•°åˆ—çš„ä¸€ä¸ªä½¿ç”¨å®ä¾‹</li><li>æ›´é«˜æ•ˆçš„è°ƒè¯•æ–¹æ³•</li></ul><h2 id="å›°éš¾å¤ç›˜ç‚¹"><a href="#å›°éš¾å¤ç›˜ç‚¹" class="headerlink" title="å›°éš¾å¤ç›˜ç‚¹:"></a>å›°éš¾å¤ç›˜ç‚¹:</h2><h3 id="Linked-List-Deque-1"><a href="#Linked-List-Deque-1" class="headerlink" title="Linked List Deque"></a>Linked List Deque</h3><p>è¿™ä¸ªéƒ¨åˆ†æ¯”è¾ƒå›°éš¾çš„æ˜¯<code>add</code>å’Œ<code>remove</code>æ–¹æ³•ï¼Œåˆšå¼€å§‹ä¼šé”™æ„äº†ï¼Œä»¥ä¸ºç¯çŠ¶åˆ—è¡¨ä¸­ï¼Œæœ€åä¸€ä¸ªä¸æŒ‡å‘å“¨å…µèŠ‚ç‚¹å¯¼è‡´ä¸€å¼€å§‹å°è¯•é”™è¯¯ã€‚</p><p>åé¢æ¯”è¾ƒéº»çƒ¦çš„æ˜¯<code>prev</code>å’Œ<code>next</code>çš„æŒ‡å‘é—®é¢˜ï¼Œæˆ‘å€ŸåŠ©äº†å¯è§†åŒ–+è°ƒè¯•æ…¢æ…¢å¾—å®Œå–„å¥½ã€‚</p><h3 id="Array-Deque-1"><a href="#Array-Deque-1" class="headerlink" title="Array Deque"></a>Array Deque</h3><p>ç»å¸¸é‡åˆ°<code>NullPointerException</code>æˆ–è€…<code>OutIndex</code>è¿™äº›é—®é¢˜ï¼Œäºæ˜¯ä½¿ç”¨äº†<strong>å¼‚å¸¸æ–­ç‚¹</strong><code>this instanceof NullPointerException</code>+å¯è§†åŒ–å·¥å…·æ¥å’Œ<strong>æ¡ä»¶æ–­ç‚¹</strong>å’Œ<strong>æ¢å¤æŒ‰é’®</strong>åˆ¤æ–­å‡ºå‡ºé”™ç‚¹</p><p>æœ€å›°éš¾çš„åœ°æ–¹è«è¿‡äº<code>resizeæ–¹æ³•</code>åˆ†<strong>æ‰©å¤§åˆ—è¡¨</strong>å’Œç¼©å°åˆ—è¡¨è¿™ä¸¤ç§æƒ…å†µæ¥è®¨è®ºã€‚æˆ‘çš„è§£å†³æ–¹æ³•æ˜¯å…ˆå»ºç«‹ä¸€ä¸ªæ–°çš„åˆ—è¡¨ç„¶åå€ŸåŠ©<code>System.arraycopy(src, srcPos, dest, destPos, length)</code>æ¥å¿«é€Ÿå¾—å¤åˆ¶ï¼Œå…¶ä¸­å¤åˆ¶çš„å‚æ•°æˆ‘æ ¹æ®å¯è§†åŒ–çš„åˆ—è¡¨å›¾åƒå’Œ<code>nextFirst</code>å’Œ<code>item.length</code>æ…¢æ…¢å¾—æ‘¸ç´¢ï¼Œæœ€ç»ˆå®Œæˆã€‚</p><p>å…¶ä¸­æ‰©å¤§åˆ—è¡¨åº”è¯¥åˆ†æœ‰å¤šç§æ‰©å¢æ–¹æ³•ï¼Œæˆ‘æœ€å¼€å§‹æ˜¯ç›´æ¥åœ¨åé¢æ‰©å¢å¼€äº†ï¼Œå¯¼è‡´<code>remove</code>æ–¹æ³•æ— æ³•æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œæœ€åé€‰æ‹©åœ¨<code>nextFirst</code>å’Œ<code>nextLast</code>ä¸­é—´æ‰©å¢å¼€ï¼Œè¿™æ ·å­removeçš„æ—¶å€™ï¼Œ<code>nextFirst</code>çš„å€¼ä¼šæ…¢æ…¢çš„å¢åŠ ï¼Œç„¶åæˆåŠŸåˆ é™¤æ‰é¦–å°¾çš„å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸­å›½çŸ¿ä¸šå¤§å­¦å¯’æ‹›ä»‹ç»</title>
      <link href="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/"/>
      <url>/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="å­¦æ ¡åŸºæœ¬ä»‹ç»"><a href="#å­¦æ ¡åŸºæœ¬ä»‹ç»" class="headerlink" title="å­¦æ ¡åŸºæœ¬ä»‹ç»"></a>å­¦æ ¡åŸºæœ¬ä»‹ç»</h1><div class="row">    <embed src="æ”»åŸç‹®å…¥å­¦ç§˜ç±.pdf" width="100%" height="550" type="application/pdf"></div><h2 id="ç¾ç…§"><a href="#ç¾ç…§" class="headerlink" title="ç¾ç…§"></a>ç¾ç…§</h2><p><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201435433.png" alt="image-20240126201435433"><br><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201515111.png" alt="image-20240126201515111"></p><p><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201524308.png" alt="image-20240126201524308"><br><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201528737.png" alt="image-20240126201528737"><br><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201531917.png" alt="image-20240126201531917"></p><h1 id="å¹¿ä¸œçœåˆ†æ•°çº¿ä»‹ç»"><a href="#å¹¿ä¸œçœåˆ†æ•°çº¿ä»‹ç»" class="headerlink" title="å¹¿ä¸œçœåˆ†æ•°çº¿ä»‹ç»"></a>å¹¿ä¸œçœåˆ†æ•°çº¿ä»‹ç»</h1><p><img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/963e7976544c87211d085232790d877.jpg" alt="963e7976544c87211d085232790d877"></p><h2 id="ç²—ç•¥ç‰ˆ"><a href="#ç²—ç•¥ç‰ˆ" class="headerlink" title="ç²—ç•¥ç‰ˆ"></a>ç²—ç•¥ç‰ˆ</h2><table><thead><tr><th>æ‹›ç”Ÿä¸“ä¸šç±»</th><th>23-è®¡åˆ’æ•°</th><th>23-å¹³å‡åˆ†</th><th>23-å¹³å‡ä½æ¬¡</th><th>22-è®¡åˆ’æ•°</th><th>22-å¹³å‡åˆ†</th><th>22-å¹³å‡ä½æ¬¡</th><th>21-è®¡åˆ’æ•°</th><th>21-å¹³å‡åˆ†</th><th>21-å¹³å‡ä½æ¬¡</th></tr></thead><tbody><tr><td>äººå·¥æ™ºèƒ½</td><td>6</td><td>608</td><td>21079</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>å¤§æ•°æ®ç®¡ç†ä¸åº”ç”¨</td><td>2</td><td>607</td><td>21726</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æœºå™¨äººå·¥ç¨‹</td><td>3</td><td>607</td><td>21726</td><td>2</td><td>599</td><td>22073</td><td></td><td></td><td></td></tr><tr><td>é¥æ„Ÿç§‘å­¦ä¸æŠ€æœ¯</td><td>4</td><td>606</td><td>22388</td><td>4</td><td>595</td><td>26470</td><td></td><td></td><td></td></tr><tr><td>è®¡ç®—æœºç±»</td><td>15</td><td>613</td><td>18163</td><td>15</td><td>604</td><td>18725</td><td>15</td><td>605</td><td>19989</td></tr><tr><td>ç”µå­ä¿¡æ¯ç±»</td><td>12</td><td>609</td><td>20482</td><td>12</td><td>600</td><td>21339</td><td>12</td><td>598</td><td>24417</td></tr><tr><td>æœºæ¢°ç±»</td><td>12</td><td>605</td><td>23074</td><td>10</td><td>598</td><td>22774</td><td>12</td><td>595</td><td>26470</td></tr><tr><td>å®‰å…¨ç§‘å­¦ä¸å·¥ç¨‹ç±»</td><td>4</td><td>605</td><td>23074</td><td>5</td><td>596</td><td>25799</td><td></td><td></td><td></td></tr><tr><td>åœŸæœ¨ç±»</td><td>7</td><td>596</td><td>25799</td><td>4</td><td>596</td><td>25799</td><td>7</td><td>596</td><td>25799</td></tr><tr><td>å»ºç­‘ç±»</td><td>3</td><td>603</td><td>24424</td><td>2</td><td>599</td><td>23750</td><td>2</td><td>599</td><td>23750</td></tr><tr><td>æ•°å­¦ç±»</td><td>4</td><td>599</td><td>23750</td><td>6</td><td>600</td><td>21339</td><td>4</td><td>599</td><td>23750</td></tr><tr><td>ç”µæ°”ç±»</td><td>8</td><td>614</td><td>17633</td><td>8</td><td>601</td><td>22482</td><td>8</td><td>601</td><td>22482</td></tr><tr><td>ç‰©ç†å­¦ç±»</td><td>4</td><td>606</td><td>22388</td><td>2</td><td>601</td><td>22482</td><td></td><td></td><td></td></tr><tr><td>èƒ½æºåŠ¨åŠ›ç±»</td><td>6</td><td>605</td><td>23074</td><td>6</td><td>597</td><td>23542</td><td>6</td><td>594</td><td>27190</td></tr><tr><td>åº”æ€¥ç®¡ç†</td><td>2</td><td>602</td><td>25108</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>é‡‘èå­¦</td><td>3</td><td>604</td><td>23748</td><td>2</td><td>606</td><td>22073</td><td>5</td><td>593</td><td>27190</td></tr><tr><td>æ–°èƒ½æºææ–™ä¸å™¨ä»¶</td><td>2</td><td>609</td><td>20482</td><td>4</td><td>593</td><td>26493</td><td>5</td><td>594</td><td>27190</td></tr><tr><td>ä¼šè®¡å­¦</td><td>10</td><td>601</td><td>25783</td><td>16</td><td>594</td><td>27190</td><td>12</td><td>594</td><td>27190</td></tr><tr><td>åŒ–å·¥ä¸åˆ¶è¯ç±»</td><td>2</td><td>600</td><td>26467</td><td>4</td><td>591</td><td>28044</td><td>6</td><td>595</td><td>26470</td></tr><tr><td>äººåŠ›èµ„æºç®¡ç†</td><td>10</td><td>580</td><td>6643</td><td>16</td><td>594</td><td>27190</td><td>12</td><td>594</td><td>27190</td></tr><tr><td>è¡Œæ”¿ç®¡ç†</td><td>6</td><td>577</td><td>7285</td><td>4</td><td>580</td><td>7150</td><td></td><td></td><td></td></tr><tr><td>ç½‘ç»œä¸æ–°åª’ä½“</td><td>2</td><td>579</td><td>6826</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>æ±‰è¯­è¨€æ–‡å­¦</td><td>4</td><td>585</td><td>5663</td><td>4</td><td>581</td><td>6892</td><td>6</td><td>581</td><td>37607</td></tr><tr><td>è‹±è¯­</td><td>6</td><td>579</td><td>6826</td><td>6</td><td>581</td><td>37607</td><td>6</td><td>581</td><td>37607</td></tr><tr><td>åœŸæœ¨å·¥ç¨‹ï¼ˆä¸­å¤–åˆä½œï¼‰</td><td>3</td><td>584</td><td>39149</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>å»ºç­‘ç¯å¢ƒä¸èƒ½æºåº”ç”¨å·¥ç¨‹(ä¸­å¤–åˆä½œ)</td><td>3</td><td>584</td><td>39149</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>å·¥ç¨‹åŠ›å­¦</td><td>1</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>ç¯å¢ƒè®¾è®¡</td><td>5</td><td>541</td><td>-</td><td>5</td><td>538</td><td>-</td><td>5</td><td>540</td><td>-</td></tr><tr><td>è¿åŠ¨è®­ç»ƒ</td><td>2</td><td>78</td><td>-</td><td>2</td><td>78</td><td>-</td><td>2</td><td>78</td><td>-</td></tr></tbody></table><h1 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><h2 id="Q-çŸ¿å¤§ä¿ç ”ç‡æ€ä¹ˆæ ·"><a href="#Q-çŸ¿å¤§ä¿ç ”ç‡æ€ä¹ˆæ ·" class="headerlink" title="Q:çŸ¿å¤§ä¿ç ”ç‡æ€ä¹ˆæ ·"></a>Q:çŸ¿å¤§ä¿ç ”ç‡æ€ä¹ˆæ ·</h2><p>A:çŸ¿å¤§ä¿ç ”ç‡åŸºæœ¬ä¸Šæœ‰15%é‚£ä¸ªæ ·å­</p><h2 id="Q-å­¦æ ¡è‡ªä¸è‡ªç”±"><a href="#Q-å­¦æ ¡è‡ªä¸è‡ªç”±" class="headerlink" title="Q:å­¦æ ¡è‡ªä¸è‡ªç”±"></a>Q:å­¦æ ¡è‡ªä¸è‡ªç”±</h2><p>A:ä¸ŠåºŠä¸‹æ¡Œï¼Œä¸é™åŠŸç‡ä¸æ–­ç”µï¼Œæ— é—¨ç¦ï¼Œ24å°æ—¶å¯å‡ºå…¥å­¦æ ¡å®¿èˆã€‚</p><h2 id="Q-çŸ¿å¤§é¥®é£Ÿæ€ä¹ˆæ ·"><a href="#Q-çŸ¿å¤§é¥®é£Ÿæ€ä¹ˆæ ·" class="headerlink" title="Q:çŸ¿å¤§é¥®é£Ÿæ€ä¹ˆæ ·"></a>Q:çŸ¿å¤§é¥®é£Ÿæ€ä¹ˆæ ·</h2><p>A:çŸ¿å¤§é¥®é£ŸåŸºæœ¬ä¸ŠæŒºå®æƒ çš„ï¼Œæˆ‘æ›¾ç»0.01åƒè¿‡ä¸€é¡¿é¥­ï¼Œè€Œä¸”å­¦æ ¡é‡ŒKFCï¼Œéº¦å½“åŠ³ï¼Œç‘å¹¸ï¼Œåº“è¿ªï¼Œéœ¸ç‹èŒ¶å§¬ç­‰éƒ½æœ‰ã€‚</p><h2 id="Q-ä½å®¿æ¡ä»¶æ€ä¹ˆæ ·"><a href="#Q-ä½å®¿æ¡ä»¶æ€ä¹ˆæ ·" class="headerlink" title="Q:ä½å®¿æ¡ä»¶æ€ä¹ˆæ ·"></a>Q:ä½å®¿æ¡ä»¶æ€ä¹ˆæ ·</h2><p>A:<img src="/2024/01/26/%E7%9F%BF%E5%A4%A7%E4%BB%8B%E7%BB%8D/image-20240126201549159.png" alt="image-20240126201549159"></p><p>ä¸ŠåºŠä¸‹æ¡Œï¼Œä¸é™åŠŸç‡ï¼Œä¸åœç”µï¼Œç‹¬ç«‹æµ´å®¤ã€‚</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç»ƒä¹ ç¬”è®°(äºŒ)--Lab3</title>
      <link href="/2024/01/25/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3/"/>
      <url>/2024/01/25/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3/</url>
      
        <content type="html"><![CDATA[<p>ç»éªŒç‚¹:</p><ul><li><code>Stopwatch</code>çš„ä½¿ç”¨</li><li>åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒæµ‹è¯•ã€‚</li><li>éšæœºè°ƒç”¨ç±»å†…éƒ¨çš„æ–¹æ³•ã€‚</li><li>åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œéšæœºæ¯”è¾ƒæµ‹è¯•ã€‚</li><li>ä½¿ç”¨ IntelliJ ä¸­çš„<strong>æ¢å¤æŒ‰é’®</strong>ã€‚</li><li>å‘æ–­ç‚¹æ·»åŠ æ¡ä»¶ã€‚</li><li>åˆ›å»º<strong>å¼‚å¸¸æ–­ç‚¹</strong>ã€‚</li></ul><h1 id="Stopwatchåº“çš„ä½¿ç”¨"><a href="#Stopwatchåº“çš„ä½¿ç”¨" class="headerlink" title="Stopwatchåº“çš„ä½¿ç”¨"></a><code>Stopwatch</code>åº“çš„ä½¿ç”¨</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> timingtest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.Stopwatch;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by hug.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StopwatchDemo</span> &#123;</span><br><span class="line">    <span class="comment">/** Computes the nth Fibonacci number using a slow naive recursive strategy.*/</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fib</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (n == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Stopwatch</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Stopwatch</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">fib41</span> <span class="operator">=</span> fib(<span class="number">41</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">timeInSeconds</span> <span class="operator">=</span> sw.elapsedTime();</span><br><span class="line">        System.out.println(<span class="string">&quot;The 50th fibonacci number is &quot;</span> + fib41);</span><br><span class="line">        System.out.println(<span class="string">&quot;Time taken to compute 41st fibonacci number: &quot;</span> + timeInSeconds + <span class="string">&quot; seconds.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><code>import edu.princeton.cs.algs4.Stopwatch;</code>å¯¼å…¥åº“</li><li><code> Stopwatch sw = new Stopwatch();</code>å¼€å§‹è®¡æ—¶</li><li><code>double timeInSeconds = sw.elapsedTime();</code>ç»“æŸè®¡æ—¶ï¼Œè¿”å›æ—¶é—´</li></ul><h1 id="åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒæµ‹è¯•ã€‚"><a href="#åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒæµ‹è¯•ã€‚" class="headerlink" title="åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒæµ‹è¯•ã€‚"></a>åœ¨ç±»çš„ä¸¤ä¸ªå®ç°ä¹‹é—´æ‰§è¡Œæ¯”è¾ƒæµ‹è¯•ã€‚</h1><p>æµ‹è¯•ä»£ç çš„ä¸€ç§æŠ€æœ¯æ˜¯è¿›è¡Œâ€œæ¯”è¾ƒæµ‹è¯•â€ã€‚åœ¨è¿™æ ·çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªç›¸åŒç±»çš„å®ç°ã€‚ä¸€ä¸ªå®ç°æ˜¯å·²çŸ¥çš„ï¼ˆæˆ–åšä¿¡çš„ï¼‰æ˜¯æ­£ç¡®çš„ï¼Œå¦ä¸€ä¸ªæ­£åœ¨å¼€å‘ä¸­ï¼Œå°šæœªéªŒè¯ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æä¾›äº†ç±» <code>AListNoResizing</code> ã€‚æ­¤ç±»ä¸æ”¯æŒä»»ä½•è°ƒæ•´å¤§å°æ“ä½œï¼Œåªæ˜¯å…·æœ‰ 1000 çš„ç¡¬ç¼–ç æ•°ç»„å¤§å°ã€‚è¿™æ„å‘³ç€å®ƒå®é™…ä¸Šæ²¡æœ‰ç”¨ï¼Œå› ä¸ºå®ƒæ°¸è¿œä¸èƒ½å®¹çº³è¶…è¿‡ 1000 ä¸ªé¡¹ç›®ã€‚ä½†æ˜¯ï¼Œç”±äºå®ƒéå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯¹å®ƒçš„å·¥ä½œå……æ»¡ä¿¡å¿ƒã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›äº†è¯¾ç¨‹ <code>BuggyAList</code> ã€‚æ­¤ç±»å…·æœ‰ä¸€ä¸ªåŸºç¡€æ•°ç»„ï¼Œè¯¥æ•°ç»„ä¼šæ ¹æ®å­˜å‚¨çš„æ•°æ®é‡å‘ä¸Šå’Œå‘ä¸‹è°ƒæ•´å¤§å°ã€‚ç”±äºè°ƒæ•´å¤§å°æœ‰ç‚¹æ£˜æ‰‹ï¼Œå› æ­¤æˆ‘ä»¬æ›´åŠ æ€€ç–‘æ­¤ç±»çš„æ­£ç¡®æ€§ã€‚é¡¾åæ€ä¹‰ï¼Œå®ƒç¡®å®åœ¨æŸå¤„æœ‰ä¸€ä¸ªé”™è¯¯ã€‚æœ¬å®éªŒçš„å…¶ä½™éƒ¨åˆ†çš„ç›®æ ‡æ˜¯æ‰¾åˆ°æ­¤ bugã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> randomizedtest;</span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdRandom;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testThreeAddThreeRemove</span> &#123;</span><br><span class="line">    AListNoResizing&lt;Integer&gt; list_1 = <span class="keyword">new</span> <span class="title class_">AListNoResizing</span>&lt;&gt;();</span><br><span class="line">    BuggyAList&lt;Integer&gt; list_2 = <span class="keyword">new</span> <span class="title class_">BuggyAList</span>&lt;&gt;();</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_1</span><span class="params">()</span> &#123;</span><br><span class="line">        list_1.addLast(<span class="number">4</span>);</span><br><span class="line">        list_1.addLast(<span class="number">5</span>);</span><br><span class="line">        list_1.addLast(<span class="number">6</span>);</span><br><span class="line">        list_2.addLast(<span class="number">4</span>);</span><br><span class="line">        list_2.addLast(<span class="number">5</span>);</span><br><span class="line">        list_2.addLast(<span class="number">6</span>);</span><br><span class="line">        assertEquals(list_1.removeLast(), list_2.removeLast());</span><br><span class="line">        assertEquals(list_1.removeLast(), list_2.removeLast());</span><br><span class="line">        assertEquals(list_1.removeLast(), list_2.removeLast());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="éšæœºå‡½æ•°è°ƒç”¨"><a href="#éšæœºå‡½æ•°è°ƒç”¨" class="headerlink" title="éšæœºå‡½æ•°è°ƒç”¨"></a>éšæœºå‡½æ•°è°ƒç”¨</h1><p>åŸåˆ™ä¸Šï¼Œå¯ä»¥ä»”ç»†åˆ¶ä½œä¸€ç»„æ¯”è¾ƒæµ‹è¯•ï¼Œæœ€ç»ˆæ‰¾åˆ°é”™è¯¯ã€‚ä½†æ˜¯ï¼Œå¦ä¸€ç§è¡¥å……ç­–ç•¥æ˜¯ä½¿ç”¨éšæœºæ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯¹ä¸¤ä¸ªå®ç°è¿›è¡Œéšæœºè°ƒç”¨ï¼Œå¹¶ä½¿ç”¨ JUnit æ–¹æ³•æ¥éªŒè¯å®ƒä»¬æ˜¯å¦å§‹ç»ˆè¿”å›ç›¸åŒçš„å€¼ã€‚</p><p>ä½œä¸ºéšæœºè°ƒç”¨æ–¹æ³•çš„å‡½æ•°ç¤ºä¾‹ï¼Œä¸‹é¢çš„ä»£ç éšæœºè°ƒç”¨ <code>AList</code> <code>addLast</code> å¯¹è±¡ <code>AListNoResizing</code> ï¼Œ <code>size</code> æ€»å…±è°ƒç”¨å…¶ä¸­ä¸€ä¸ªå‡½æ•°çš„ N æ¬¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> randomizedtest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> edu.princeton.cs.algs4.StdRandom;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by hug.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuggyAList</span> &#123;</span><br><span class="line">  <span class="comment">// YOUR TESTS HERE</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">randomizedTest</span><span class="params">()</span> &#123;</span><br><span class="line">      AListNoResizing&lt;Integer&gt; correct = <span class="keyword">new</span> <span class="title class_">AListNoResizing</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="type">int</span> <span class="variable">operationNumber</span> <span class="operator">=</span> StdRandom.uniform(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">          <span class="keyword">if</span> (operationNumber == <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">// addLast</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">randVal</span> <span class="operator">=</span> StdRandom.uniform(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">              correct.addLast(randVal);</span><br><span class="line">              System.out.println(<span class="string">&quot;addLast(&quot;</span> + randVal + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (operationNumber == <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="comment">// size</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> correct.size();</span><br><span class="line">              System.out.println(<span class="string">&quot;size: &quot;</span> + size);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="è°ƒè¯•å™¨åŠŸèƒ½-æ¡ä»¶æ–­ç‚¹å’Œæ¢å¤"><a href="#è°ƒè¯•å™¨åŠŸèƒ½-æ¡ä»¶æ–­ç‚¹å’Œæ¢å¤" class="headerlink" title="è°ƒè¯•å™¨åŠŸèƒ½-æ¡ä»¶æ–­ç‚¹å’Œæ¢å¤"></a>è°ƒè¯•å™¨åŠŸèƒ½-æ¡ä»¶æ–­ç‚¹å’Œæ¢å¤</h1><ol><li>åœ¨æ˜¾ç¤º çš„ <code>int operationNumber = StdRandom.uniform(0, 2);</code> è¡Œä¸Šè®¾ç½®æ–­ç‚¹ã€‚</li><li>ç„¶åï¼Œä½¿ç”¨ debug é€‰é¡¹åœ¨ IntelliJ ä¸­çš„è¿™ä¸€è¡Œåœæ­¢ã€‚</li><li>å•å‡»å¯è§†åŒ–å·¥å…·ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªåŒ…å«å¤§é‡ç©ºå€¼çš„æ•°ç»„ï¼Œè¿™äº›ç©ºå€¼æœ€ç»ˆå°†å­˜å‚¨è¦æ·»åŠ åˆ°åˆ—è¡¨ä¸­çš„æ•°æ®ã€‚</li><li>å•å‡»â€œå•æ­¥æ‰§è¡Œâ€ï¼Œæ‚¨å°†çœ‹åˆ° operationNumber è®¾ç½®ä¸º 0 æˆ– 1ã€‚è¿™æ˜¯å› ä¸ºè¯¥ <code>StdRandom.uniform(0, 2)</code> å‡½æ•°è¿”å› [0ï¼Œ 2] èŒƒå›´å†…çš„éšæœºæ•´æ•°ï¼Œå³æ’é™¤æ­£ç¡®çš„å‚æ•°ã€‚å¦‚æœé€‰æ‹©çš„æ•°å­—ä¸º 0ï¼Œåˆ™å°†åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ ä¸€ä¸ªéšæœºæ•°ã€‚å¦‚æœé€‰æ‹©çš„æ•°å­—æ˜¯ 1ï¼Œåˆ™å°†æ‰“å°å°ºå¯¸ã€‚</li><li>å•å‡»è°ƒè¯•å™¨ä¸Šçš„ <code>resume</code> æŒ‰é’®ï¼ˆä¸‹é¢ä»¥é»„è‰²çªå‡ºæ˜¾ç¤ºï¼‰ï¼Œæˆ‘ä»¬çš„ä»£ç å°†å†æ¬¡é‡åˆ°å®ƒï¼Œå‘½ä¸­æ–­ç‚¹ã€‚<img src="https://sp21.datastructur.es/materials/lab/lab3/img/resume_button.png" alt="folder structure"></li><li>å°è¯•å•å‡»â€œæ¢å¤â€å‡ æ¬¡ï¼Œæ‚¨å°†çœ‹åˆ°å€¼å¼€å§‹å¡«å……æ•°ç»„ã€‚è¯·æ³¨æ„ï¼Œæ¯æ¬¡å•å‡»â€œæ¢å¤â€æ—¶ï¼Œä»£ç éƒ½ä¼šè¿è¡Œï¼ˆå°±åƒæ‚¨å¤šæ¬¡æŒ‰ä¸‹å•æ­¥æ‰§è¡Œä¸€æ ·ï¼‰ï¼Œç›´åˆ°å®ƒå†æ¬¡è¿”å›åˆ°æ–­ç‚¹ã€‚</li><li>æˆ‘ä»¬è¿˜å¯ä»¥ä»å¯è§†åŒ–å·¥å…·åˆ‡æ¢å›èƒ½å¤ŸæŸ¥çœ‹æ‰“å°è¯­å¥çš„è¾“å‡ºã€‚ä¸ºæ­¤ï¼Œ <code>Debugger</code> è¯·å†æ¬¡å•å‡»ï¼ˆæ—è¾¹ <code>Java Visualizer</code> ï¼‰å¹¶ç»§ç»­å•å‡»æ¢å¤ã€‚åœ¨æŸäº›è®¡ç®—æœºä¸Šï¼Œæ‚¨å¯èƒ½éœ€è¦å•å‡» <code>Debugger</code> è€Œä¸æ˜¯ <code>Console</code> ã€‚å•å‡»â€œæ¢å¤â€çš„æ¯ä¸ªç±»å‹ï¼Œéƒ½ä¼šçœ‹åˆ°å¦ä¸€ä¸ª print è¯­å¥ï¼Œå¯¹åº”äºå¯¹ addLast æˆ– size çš„è°ƒç”¨ã€‚</li><li>ç°åœ¨è®©æˆ‘ä»¬å°è¯•ä¸€ä¸ªæ¡ä»¶æ–­ç‚¹ã€‚å³é”®å•å‡»æ–­ç‚¹ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªå¼¹å‡ºæ¡†ï¼Œä¸Šé¢å†™ç€â€œæ¡ä»¶ï¼šâ€ã€‚åœ¨æ¡†ä¸­ï¼Œé”®å…¥ <code>L.size() == 12</code> ã€‚<img src="https://sp21.datastructur.es/materials/lab/lab3/img/conditional_breakpoint.png" alt="folder structure"></li><li>å•å‡»â€œæ¢å¤â€ï¼Œä»£ç å°†ä¸€ç›´è¿è¡Œï¼Œç›´åˆ°æ»¡è¶³æ–­ç‚¹çš„æ¡ä»¶ï¼Œå³å¤§å°ä¸º 12ã€‚å°è¯•ä¸€ä¸‹ï¼Œç„¶åå•å‡»å¯è§†åŒ–å·¥å…·ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å¤§å°ç°åœ¨ä¸º 12ï¼Œæ•°ç»„ä¸­æœ‰ 12 ä¸ªé¡¹ç›®ã€‚å¦‚æœæ‚¨ä¸å°å¿ƒç‚¹å‡»å¾—å¤ªè¿œï¼Œå¾ˆé—æ†¾ï¼Œæ‚¨å¿…é¡»é‡æ–°å¯åŠ¨æµ‹è¯•ã€‚</li></ol><p>è¿™ä¸¤ä¸ªæ–°åŠŸèƒ½ï¼ˆæ¢å¤å’Œæ¡ä»¶æ–­ç‚¹ï¼‰å¯¹å®éªŒ 3 çš„å…¶ä½™éƒ¨åˆ†æ²¡æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬å¯èƒ½ä¼šåœ¨å°†æ¥çš„é¡¹ç›®ä¸­æ´¾ä¸Šç”¨åœºï¼Œæ‚¨éœ€è¦åœ¨å®éªŒ 4 ä¸­ä½¿ç”¨å®ƒä»¬ã€‚æ­¤æ—¶åº”åˆ é™¤æ¡ä»¶æ–­ç‚¹ï¼Œä»¥ä¾¿å®ƒä¸ä¼šå½±å“å®éªŒå®¤çš„å…¶ä½™éƒ¨åˆ†ã€‚</p><h1 id="æ‰§è¡Œéšæœºæ¯”è¾ƒ"><a href="#æ‰§è¡Œéšæœºæ¯”è¾ƒ" class="headerlink" title="æ‰§è¡Œéšæœºæ¯”è¾ƒ"></a>æ‰§è¡Œéšæœºæ¯”è¾ƒ</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestBuggyAList</span> &#123;</span><br><span class="line">  <span class="comment">// YOUR TESTS HERE</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">randomizedTest</span><span class="params">()</span> &#123;</span><br><span class="line">      AListNoResizing&lt;Integer&gt; correct = <span class="keyword">new</span> <span class="title class_">AListNoResizing</span>&lt;&gt;();</span><br><span class="line">      BuggyAList&lt;Integer&gt; broken = <span class="keyword">new</span> <span class="title class_">BuggyAList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">      <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> <span class="number">5000</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="type">int</span> <span class="variable">operationNumber</span> <span class="operator">=</span> StdRandom.uniform(<span class="number">0</span>, <span class="number">3</span>);</span><br><span class="line">          <span class="keyword">if</span> (operationNumber == <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="comment">// addLast</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">randVal</span> <span class="operator">=</span> StdRandom.uniform(<span class="number">0</span>, <span class="number">100</span>);</span><br><span class="line">              correct.addLast(randVal);</span><br><span class="line">              broken.addLast(randVal);</span><br><span class="line">              System.out.println(<span class="string">&quot;addLast(&quot;</span> + randVal + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (operationNumber == <span class="number">1</span>) &#123;</span><br><span class="line">              <span class="comment">// size</span></span><br><span class="line">              <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> correct.size();</span><br><span class="line">              System.out.println(<span class="string">&quot;size: &quot;</span> + size);</span><br><span class="line">          &#125; <span class="keyword">else</span> <span class="keyword">if</span> (operationNumber == <span class="number">2</span> &amp;&amp; correct.size() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">              <span class="type">int</span> <span class="variable">last_num</span> <span class="operator">=</span> correct.getLast();</span><br><span class="line">              assertEquals(correct.removeLast(), broken.removeLast());</span><br><span class="line">              System.out.println(<span class="string">&quot;removeLast(&quot;</span> + last_num + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>è¿™å°±æå‡ºäº†ä¸€ä¸ªå…³äºéšæœºæµ‹è¯•çš„é‡è¦è§‚ç‚¹ï¼šå¦‚æœä½ åº”ç”¨éšæœºæ“ä½œï¼Œå¹¶ä¸”è¿™ä¸ªé”™è¯¯ç›¸å½“æ¨¡ç³Šï¼Œä½ çš„éšæœºæ“ä½œåºåˆ—å¯èƒ½æ— æ³•æ£€æµ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥æ”¹è¿›éšæœºæµ‹è¯•æ¥é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™è¶…å‡ºäº†æˆ‘ä»¬è¯¾ç¨‹çš„èŒƒå›´ã€‚</p><p>å¦ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼šéšæœºæµ‹è¯•ä¸åº”æ›¿ä»£ç²¾å¿ƒè®¾è®¡çš„å•å…ƒæµ‹è¯•ï¼æˆ‘ä¸ªäººé€šå¸¸å€¾å‘äºåœ¨å¯èƒ½çš„æƒ…å†µä¸‹è¿›è¡Œééšæœºæµ‹è¯•ï¼Œå¹¶å°†éšæœºæµ‹è¯•è§†ä¸ºä¸€ç§è¡¥å……æµ‹è¯•æ–¹æ³•ã€‚æœ‰å…³æ­¤é—®é¢˜çš„è¾©è®ºï¼Œè¯·å‚é˜…æ­¤<a href="https://news.ycombinator.com/item?id=24349522">é“¾æ¥</a>ã€‚</p><h1 id="å¼‚å¸¸æ–­ç‚¹çš„ä½¿ç”¨"><a href="#å¼‚å¸¸æ–­ç‚¹çš„ä½¿ç”¨" class="headerlink" title="å¼‚å¸¸æ–­ç‚¹çš„ä½¿ç”¨"></a>å¼‚å¸¸æ–­ç‚¹çš„ä½¿ç”¨</h1><p>è¯·å•å‡»â€œè¿è¡Œ -&gt; æŸ¥çœ‹æ–­ç‚¹â€ã€‚æ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„çª—å£å¼¹å‡ºçª—å£ï¼š</p><p><img src="/2024/01/25/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3/breakpoints.png" alt="folder structure"></p><p>å•å‡»å·¦ä¾§æ˜¾ç¤ºâ€œä»»ä½•ä¾‹å¤–â€çš„å¤é€‰æ¡†ï¼Œç„¶åå•å‡»æ˜¾ç¤ºâ€œæ¡ä»¶ï¼šâ€çš„å¤é€‰æ¡†ï¼Œç„¶ååœ¨çª—å£ä¸­è¾“å…¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this instanceof java.lang.ArrayIndexOutOfBoundsException</span><br></pre></td></tr></table></figure><p>å®Œæˆæ­¤æ“ä½œåï¼Œæ–­ç‚¹çª—å£åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2024/01/25/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3/breakpoints_filled_in.png" alt="folder structure"></p><p>å•å‡»â€œè°ƒè¯•â€æŒ‰é’®ï¼Œä»£ç åº”åœ¨å¼‚å¸¸å³å°†å‘ç”Ÿæ—¶åœæ­¢ã€‚å•å‡»å¯è§†åŒ–å·¥å…·ï¼Œå¹¶å°è¯•æ‰¾å‡ºä»£ç å´©æºƒçš„åŸå› ã€‚ç°åœ¨å¯ä»¥å¼€å§‹çœŸæ­£çš„é—®é¢˜è§£å†³äº†ï¼</p><p>æ³¨æ„ï¼šå¦‚æœåœ¨æœªæŒ‡å®šæ¡ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨è°ƒè¯•åŠŸèƒ½ï¼Œåˆ™ä»£ç å°†åœæ­¢åœ¨ä¸€äº›ä¸åŒçš„ç¥ç§˜ä½ç½®ã€‚ç¡®ä¿åœ¨æœªæŒ‡å®šæ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œç»ä¸ä¼šé€‰ä¸­â€œä»»ä½•å¼‚å¸¸â€ã€‚è¿™æ˜¯å› ä¸ºå¯åŠ¨ JUnit æµ‹è¯•çš„è¿‡ç¨‹ä¼šç”Ÿæˆä¸€å †æœ€ç»ˆè¢«å¿½ç•¥çš„å¼‚å¸¸ã€‚è¿™è¿œè¿œè¶…å‡ºäº†æˆ‘ä»¬è¯¾ç¨‹çš„èŒƒå›´ã€‚å¦‚æœä½¿ç”¨å®Œæ‰§è¡Œæ–­ç‚¹ï¼Œåˆ™åº”å–æ¶ˆé€‰ä¸­å·¦ä¸Šè§’çš„â€œJava Exceptions Breakpointsâ€æ¡†ã€‚</p><blockquote><p>ç­”æ¡ˆ:</p><p><img src="/2024/01/25/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-2-CS61B%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-Lab3/image-20240125222121979.png" alt="image-20240125222121979"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">    Item[] a = (Item[]) <span class="keyword">new</span> <span class="title class_">Object</span>[capacity];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i += <span class="number">1</span>) &#123;</span><br><span class="line">        a[i] = items[i];</span><br><span class="line">    &#125;</span><br><span class="line">    items = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> Item <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ((size &lt; items.length / <span class="number">4</span>) &amp;&amp; (size &gt; <span class="number">4</span>)) &#123;</span><br><span class="line">            resize(size / <span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Item</span> <span class="variable">x</span> <span class="operator">=</span> getLast();</span><br><span class="line">        items[size - <span class="number">1</span>] = <span class="literal">null</span>;</span><br><span class="line">        size = size - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿå¯çŸ¥ï¼Œæ˜¯<code>removeLast()</code>æ–¹æ³•åœ¨ä¼ å…¥<code>resize</code>æ–¹æ³•å€¼çš„æ—¶å€™è¿‡å°ï¼Œå¯¼è‡´æ–°æ”¶ç¼©çš„æ•°ç»„å¤ªå°ï¼Œæ²¡åŠæ³•å­˜å‚¨æ‰€æœ‰åŸæ•°ç»„çš„å€¼ï¼Œç­”æ¡ˆä¸º<code>resize(size / 4)</code>æ”¹ä¸º<code>resize(items.length / 4)</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(å…­)-æ•°ç»„åŸºç¡€çš„åˆ—è¡¨(2.4,2.5)</title>
      <link href="/2024/01/24/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E7%BB%84%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-4-2-5/"/>
      <url>/2024/01/24/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E7%BB%84%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-4-2-5/</url>
      
        <content type="html"><![CDATA[<p><a href="https://joshhug.gitbooks.io/hug61b/content/chap2/chap24.html">2.4 Arrays Â· Hug61B (gitbooks.io)</a></p><p><a href="https://joshhug.gitbooks.io/hug61b/content/chap2/chap25.html">2.5 The AList Â· Hug61B (gitbooks.io)</a></p><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><h2 id="æ•°ç»„åŸºç¡€"><a href="#æ•°ç»„åŸºç¡€" class="headerlink" title="æ•°ç»„åŸºç¡€"></a>æ•°ç»„åŸºç¡€</h2><p>æ•°ç»„æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å¯¹è±¡ï¼Œå®ƒç”±ä¸€ç³»åˆ—ç¼–å·çš„å†…å­˜ç›’ç»„æˆã€‚è¿™ä¸ç±»å®ä¾‹ä¸åŒï¼Œç±»å®ä¾‹å…·æœ‰å‘½åçš„å†…å­˜ç›’ã€‚ä¸ºäº†å¾—åˆ°æ•°ç»„çš„ç¬¬iä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åœ¨HW 0å’ŒProject 0ä¸­çœ‹åˆ°çš„æ‹¬å·è¡¨ç¤ºæ³•ï¼Œä¾‹å¦‚ <code>A[i]</code> å¾—åˆ°Açš„ç¬¬ <code>i</code> ä¸ªå…ƒç´ ã€‚</p><p>æ•°ç»„åŒ…æ‹¬ï¼š</p><ul><li>ä¸€ä¸ªå›ºå®šçš„æ•´æ•°é•¿åº¦N</li><li>ä¸€ä¸ªç”±Nä¸ªå­˜å‚¨å™¨ç›’ç»„æˆçš„åºåˆ—ï¼ˆN &#x3D;é•¿åº¦ï¼‰ï¼Œå…¶ä¸­æ‰€æœ‰ç›’éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼Œç¼–å·ä¸º0åˆ°N - 1ã€‚</li></ul><blockquote><p>å’Œç±»ä¸åŒï¼Œæ•°ç»„æ²¡æœ‰æ–¹æ³•</p></blockquote><h3 id="æ•°ç»„åˆ›å»º"><a href="#æ•°ç»„åˆ›å»º" class="headerlink" title="æ•°ç»„åˆ›å»º"></a>æ•°ç»„åˆ›å»º</h3><ul><li><code>x = new int[3];</code></li><li><code>y = new int[]&#123;1, 2, 3, 4, 5&#125;;</code></li><li><code>int[] z = &#123;9, 10, 11, 12, 13&#125;;</code></li></ul><p>æ‰€æœ‰è¿™ä¸‰ç§è¡¨è¾¾æ³•éƒ½åˆ›å»ºäº†ä¸€ä¸ªæ•°ç»„ã€‚</p><p>ç¬¬ä¸€ç§è¡¨ç¤ºæ³•ï¼Œç”¨äºåˆ›å»º <code>x</code> ï¼Œå°†åˆ›å»ºä¸€ä¸ªæŒ‡å®šé•¿åº¦çš„æ•°ç»„ï¼Œå¹¶ä½¿ç”¨é»˜è®¤å€¼å¡«å……æ¯ä¸ªå†…å­˜æ¡†ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º3çš„æ•°ç»„ï¼Œå¹¶ä½¿ç”¨é»˜è®¤å€¼ <code>int</code> <code>0</code> å¡«å……3ä¸ªæ¡†ä¸­çš„æ¯ä¸€ä¸ªã€‚</p><p>ç¬¬äºŒç§è¡¨ç¤ºæ³•ï¼Œç”¨äºåˆ›å»º <code>y</code> ï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶å¤§å°æ­£å¥½å¯ä»¥å®¹çº³æŒ‡å®šçš„èµ·å§‹å€¼ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªé•¿åº¦ä¸º5çš„æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«è¿™äº”ä¸ªç‰¹å®šçš„å…ƒç´ ã€‚</p><p>ç¬¬ä¸‰ç§è¡¨ç¤ºæ³•ç”¨äºå£°æ˜å’Œåˆ›å»º <code>z</code> ï¼Œå…¶è¡Œä¸ºä¸ç¬¬äºŒç§è¡¨ç¤ºæ³•ç›¸åŒã€‚å”¯ä¸€çš„åŒºåˆ«æ˜¯å®ƒçœç•¥äº† <code>new</code> çš„ç”¨æ³•ï¼Œå¹¶ä¸”åªèƒ½åœ¨ä¸å˜é‡å£°æ˜ç»„åˆæ—¶ä½¿ç”¨ã€‚</p><blockquote><p>è¿™äº›ç¬¦å·æ²¡æœ‰ä¸€ä¸ªæ¯”å…¶ä»–ç¬¦å·æ›´å¥½ã€‚</p></blockquote><h3 id="æ•°ç»„çš„è®¿é—®å’Œä¿®æ”¹"><a href="#æ•°ç»„çš„è®¿é—®å’Œä¿®æ”¹" class="headerlink" title="æ•°ç»„çš„è®¿é—®å’Œä¿®æ”¹"></a>æ•°ç»„çš„è®¿é—®å’Œä¿®æ”¹</h3><p>ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†æˆ‘ä»¬å°†ç”¨äºå¤„ç†æ•°ç»„çš„æ‰€æœ‰å…³é”®è¯­æ³•ã€‚è¯•ç€å•æ­¥æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå¹¶ç¡®ä¿æ‚¨ç†è§£æ¯è¡Œæ‰§è¡Œæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä¸ºæ­¤ï¼Œè¯·<a href="https://cscircles.cemc.uwaterloo.ca/java_visualize/#">å•å‡»æ­¤å¤„</a>æŸ¥çœ‹äº¤äº’å¼å¯è§†åŒ–ã€‚é™¤äº†æœ€åä¸€è¡Œä»£ç ä¹‹å¤–ï¼Œæˆ‘ä»¬ä»¥å‰è§è¿‡æ‰€æœ‰è¿™äº›è¯­æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] z = <span class="literal">null</span>;</span><br><span class="line"><span class="type">int</span>[] x, y;</span><br><span class="line"></span><br><span class="line">x = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">y = x;</span><br><span class="line">x = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;-<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">99</span>&#125;;</span><br><span class="line">y = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">z = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">0</span>];</span><br><span class="line"><span class="type">int</span> <span class="variable">xL</span> <span class="operator">=</span> x.length;</span><br><span class="line"></span><br><span class="line">String[] s = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">6</span>];</span><br><span class="line">s[<span class="number">4</span>] = <span class="string">&quot;ketchup&quot;</span>;</span><br><span class="line">s[x[<span class="number">3</span>] - x[<span class="number">1</span>]] = <span class="string">&quot;muffins&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] b = &#123;<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>&#125;;</span><br><span class="line">System.arraycopy(b, <span class="number">0</span>, x, <span class="number">3</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure><p>æœ€åä¸€è¡Œæ¼”ç¤ºäº†ä¸€ç§å°†ä¿¡æ¯ä»ä¸€ä¸ªæ•°ç»„å¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„çš„æ–¹æ³•ã€‚ <code>System.arraycopy</code> æœ‰äº”ä¸ªå‚æ•°ï¼š</p><ul><li>ç”¨ä½œæºçš„æ•°ç»„</li><li>åœ¨æºæ•°ç»„ä¸­ä»ä½•å¤„å¼€å§‹</li><li>ç”¨ä½œç›®æ ‡çš„é˜µåˆ—</li><li>åœ¨ç›®æ ‡é˜µåˆ—ä¸­ä»ä½•å¤„å¼€å§‹</li><li>è¦å¤åˆ¶å¤šå°‘é¡¹</li></ul><p>å¯¹äºPythonè€æ‰‹æ¥è¯´ï¼Œ <code>System.arraycopy(b, 0,x, 3, 2)</code> ç›¸å½“äºPythonä¸­çš„ <code>x[3:5] = b[0:2]</code> ã€‚</p><p>å¤åˆ¶æ•°ç»„çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¾ªç¯ã€‚ <code>arraycopy</code> é€šå¸¸æ¯”å¾ªç¯æ›´å¿«ï¼Œå¹¶å¯¼è‡´æ›´ç´§å‡‘çš„ä»£ç ã€‚å”¯ä¸€çš„ç¼ºç‚¹æ˜¯ <code>arraycopy</code> ï¼ˆå¯ä»¥è¯´ï¼‰æ›´éš¾é˜…è¯»ã€‚è¯·æ³¨æ„ï¼ŒJavaæ•°ç»„åªåœ¨è¿è¡Œæ—¶æ‰§è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥å¾ˆå¥½åœ°ç¼–è¯‘ï¼Œä½†æ˜¯ä¼šåœ¨è¿è¡Œæ—¶å´©æºƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] x = &#123;<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] y = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">2</span>];</span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; x.length) &#123;</span><br><span class="line">    y[i] = x[i];</span><br><span class="line">    i += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å®¹æ˜“æ•°ç»„è¶Šç•Œ</p></blockquote><h2 id="äºŒç»´æ•°ç»„"><a href="#äºŒç»´æ•°ç»„" class="headerlink" title="äºŒç»´æ•°ç»„"></a>äºŒç»´æ•°ç»„</h2><p>Javaä¸­æ‰€è°“çš„2Dæ•°ç»„å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªæ•°ç»„çš„æ•°ç»„ã€‚å®ƒä»¬éµå¾ªæˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡çš„å¯¹è±¡çš„ç›¸åŒè§„åˆ™ï¼Œä½†æ˜¯è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹å®ƒä»¬ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ç†è§£å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><p>æ•°ç»„çš„æ•°ç»„çš„æ•°ç»„å¯èƒ½æœ‰ç‚¹æ··ä¹±ã€‚ä»£ç  <code>int[][] bamboozle = new int[4][]</code> è¿™å°†åˆ›å»ºä¸€ä¸ªåä¸º <code>bamboozle</code> çš„æ•´æ•°æ•°ç»„æ•°ç»„ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™æ­£å¥½åˆ›å»ºäº†å››ä¸ªå†…å­˜ç›’ï¼Œæ¯ä¸ªå†…å­˜ç›’éƒ½å¯ä»¥æŒ‡å‘ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ˆé•¿åº¦æœªæŒ‡å®šï¼‰ã€‚</p><p>å°è¯•é€è¡Œè¿è¡Œä¸‹é¢çš„ä»£ç ï¼Œçœ‹çœ‹ç»“æœæ˜¯å¦ç¬¦åˆä½ çš„ç›´è§‰ã€‚å¦‚éœ€äº¤äº’å¼å¯è§†åŒ–ï¼Œè¯·<a href="https://cscircles.cemc.uwaterloo.ca/java_visualize/#">å•å‡»æ­¤å¤„</a>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[][] pascalsTriangle;</span><br><span class="line">pascalsTriangle = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][];</span><br><span class="line"><span class="type">int</span>[] rowZero = pascalsTriangle[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">pascalsTriangle[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>&#125;;</span><br><span class="line">pascalsTriangle[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">1</span>&#125;;</span><br><span class="line">pascalsTriangle[<span class="number">2</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;;</span><br><span class="line">pascalsTriangle[<span class="number">3</span>] = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="type">int</span>[] rowTwo = pascalsTriangle[<span class="number">2</span>];</span><br><span class="line">rowTwo[<span class="number">1</span>] = -<span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[][] matrix;</span><br><span class="line">matrix = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][];</span><br><span class="line">matrix = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>][<span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[][] pascalAgain = <span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;<span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">                                 &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">1</span>&#125;&#125;;</span><br></pre></td></tr></table></figure><blockquote><p>ç­”æ¡ˆ:<code>x[0][0]: -1, w[0][0]: 1</code></p></blockquote><h2 id="æ•°ç»„-vs-ç±»"><a href="#æ•°ç»„-vs-ç±»" class="headerlink" title="æ•°ç»„ vs ç±»"></a>æ•°ç»„ vs ç±»</h2><p>æ•°ç»„å’Œç±»éƒ½å¯ä»¥ç”¨æ¥ç»„ç»‡ä¸€å †å†…å­˜ç›’ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå†…å­˜ç›’çš„æ•°é‡æ˜¯å›ºå®šçš„ï¼Œå³æ•°ç»„çš„é•¿åº¦ä¸èƒ½æ”¹å˜ï¼Œå°±åƒç±»å­—æ®µä¸èƒ½æ·»åŠ æˆ–åˆ é™¤ä¸€æ ·ã€‚</p><p>æ•°ç»„å’Œç±»ä¸­å†…å­˜ç›’çš„ä¸»è¦åŒºåˆ«ï¼š</p><ul><li>æ•°ç»„æ¡†ä½¿ç”¨ <code>[]</code> è¡¨ç¤ºæ³•ç¼–å·å’Œè®¿é—®ï¼Œç±»æ¡†ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•å‘½åå’Œè®¿é—®ã€‚</li><li>æ•°ç»„æ¡†å¿…é¡»å…¨éƒ¨ä¸ºåŒä¸€ç±»å‹ã€‚ç±»æ¡†å¯ä»¥æ˜¯ä¸åŒçš„ç±»å‹ã€‚</li></ul><p>è¿™äº›å·®å¼‚çš„ä¸€ä¸ªç‰¹åˆ«æ˜¾è‘—çš„å½±å“æ˜¯ï¼Œ <code>[]</code> è¡¨ç¤ºæ³•å…è®¸æˆ‘ä»¬æŒ‡å®šæˆ‘ä»¬åœ¨è¿è¡Œæ—¶æƒ³è¦çš„ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">indexOfInterest</span> <span class="operator">=</span> askUserForInteger();</span><br><span class="line"><span class="type">int</span>[] x = &#123;<span class="number">100</span>, <span class="number">101</span>, <span class="number">102</span>, <span class="number">103</span>&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> x[indexOfInterest];</span><br><span class="line">System.out.println(k);</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¾—åˆ°è¿™æ ·çš„ç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ javac arrayDemo</span><br><span class="line">$ java arrayDemo</span><br><span class="line">What index do you want? 2</span><br><span class="line">102</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨ç±»ä¸­æŒ‡å®šå­—æ®µä¸æ˜¯æˆ‘ä»¬åœ¨è¿è¡Œæ—¶åšçš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢çš„ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">fieldOfInterest</span> <span class="operator">=</span> <span class="string">&quot;mass&quot;</span>;</span><br><span class="line"><span class="type">Planet</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Planet</span>(<span class="number">6e24</span>, <span class="string">&quot;earth&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">mass</span> <span class="operator">=</span> p[fieldOfInterest];</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬è¯•ç€ç¼–è¯‘å®ƒï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªè¯­æ³•é”™è¯¯ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ javac classDemo</span><br><span class="line">FieldDemo.java:5: error: array required, but Planet found</span><br><span class="line">        double mass = earth[fieldOfInterest];        </span><br><span class="line">                               ^</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å°è¯•ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•ï¼Œä¹Ÿä¼šå‡ºç°åŒæ ·çš„é—®é¢˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">fieldOfInterest</span> <span class="operator">=</span> <span class="string">&quot;mass&quot;</span>;</span><br><span class="line"><span class="type">Planet</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Planet</span>(<span class="number">6e24</span>, <span class="string">&quot;earth&quot;</span>);</span><br><span class="line"><span class="type">double</span> <span class="variable">mass</span> <span class="operator">=</span> p.fieldOfInterest;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ javac classDemo</span><br><span class="line">FieldDemo.java:5: error: cannot find symbol</span><br><span class="line">        double mass = earth.fieldOfInterest;        </span><br><span class="line">                           ^</span><br><span class="line">  symbol:   variable fieldOfInterest</span><br><span class="line">  location: variable earth of type Planet</span><br></pre></td></tr></table></figure><p>è¿™å¹¶ä¸æ˜¯ä½ ç»å¸¸ä¼šé‡åˆ°çš„é™åˆ¶ï¼Œä½†å€¼å¾—æŒ‡å‡ºï¼Œåªæ˜¯ä¸ºäº†è·å¾—å¥½çš„å¥–å­¦é‡‘ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æŒ‡å®šæ‰€éœ€çš„å­—æ®µï¼Œç§°ä¸ºåå°„ï¼Œä½†å®ƒè¢«è®¤ä¸ºæ˜¯å…¸å‹ç¨‹åºçš„éå¸¸ç³Ÿç³•çš„ç¼–ç é£æ ¼ã€‚ä½ å¯ä»¥åœ¨<a href="https://docs.oracle.com/javase/tutorial/reflect/member/fieldValues.html">here</a>é˜…è¯»æ›´å¤šå…³äºåå°„çš„å†…å®¹ã€‚<strong>ä½ æ°¸è¿œä¸åº”è¯¥åœ¨ä»»ä½•61Bç¨‹åºä¸­ä½¿ç”¨åå°„ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­è®¨è®ºå®ƒã€‚</strong></p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç¼–ç¨‹è¯­è¨€çš„éƒ¨åˆ†è®¾è®¡æ˜¯ä¸ºäº†é™åˆ¶ç¨‹åºå‘˜çš„é€‰æ‹©ï¼Œä½¿ä»£ç æ›´å®¹æ˜“æ¨ç†ã€‚é€šè¿‡å°†è¿™äº›ç‰¹æ€§é™åˆ¶åœ¨ç‰¹æ®Šçš„Reflections APIä¸­ï¼Œæˆ‘ä»¬ä½¿å…¸å‹çš„Javaç¨‹åºæ›´æ˜“äºé˜…è¯»å’Œè§£é‡Šã€‚</p><h2 id="é™„å½•ï¼šJavaæ•°ç»„ä¸å…¶ä»–è¯­è¨€"><a href="#é™„å½•ï¼šJavaæ•°ç»„ä¸å…¶ä»–è¯­è¨€" class="headerlink" title="é™„å½•ï¼šJavaæ•°ç»„ä¸å…¶ä»–è¯­è¨€"></a>é™„å½•ï¼šJavaæ•°ç»„ä¸å…¶ä»–è¯­è¨€</h2><p>ä¸å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ç›¸æ¯”ï¼ŒJavaæ•°ç»„ï¼š</p><ul><li>æ²¡æœ‰ç‰¹æ®Šçš„â€œåˆ‡ç‰‡â€è¯­æ³•ï¼ˆæ¯”å¦‚Pythonï¼‰ã€‚</li><li>ä¸èƒ½æ”¶ç¼©æˆ–å±•å¼€ï¼ˆä¾‹å¦‚åœ¨Rubyä¸­ï¼‰ã€‚</li><li>ä¸è¦æœ‰æˆå‘˜æ–¹æ³•ï¼ˆä¾‹å¦‚åœ¨JavaScriptä¸­ï¼‰ã€‚</li><li>å¿…é¡»åªåŒ…å«ç›¸åŒç±»å‹çš„å€¼ï¼ˆä¸Pythonä¸åŒï¼‰ã€‚</li></ul><h1 id="AList"><a href="#AList" class="headerlink" title="AList"></a>AList</h1><p>åœ¨æˆ‘ä»¬ä¹‹å‰å®ç°çš„<code>DLList</code>ä¸­ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨<code>get()</code>æ–¹æ³•ï¼Œä¸æ•°ç»„ä¸ºåŸºç¡€çš„åˆ—è¡¨ç›¸æ¯”ï¼Œå®ƒä¼šéå¸¸çš„æ…¢ã€‚è¿™æ˜¯å› ä¸ºï¼Œç”±äºæˆ‘ä»¬åªæœ‰å¯¹åˆ—è¡¨çš„ç¬¬ä¸€é¡¹å’Œæœ€åä¸€é¡¹çš„å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬å§‹ç»ˆéœ€è¦ä»å‰é¢æˆ–åé¢éå†åˆ—è¡¨æ‰èƒ½æ‰¾åˆ°æˆ‘ä»¬å°è¯•æ£€ç´¢çš„é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨é•¿åº¦ä¸º 10,000 çš„åˆ—è¡¨ä¸­è·å–é¡¹ç›® #417ï¼Œæˆ‘ä»¬å¿…é¡»éå† 417 ä¸ªè½¬å‘é“¾æ¥æ‰èƒ½æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„é¡¹ç›®ã€‚</p><p>åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¯¥é¡¹ç›®ä½äºæœ€ä¸­é—´ï¼Œæˆ‘ä»¬éœ€è¦æµè§ˆä¸åˆ—è¡¨é•¿åº¦æˆæ¯”ä¾‹çš„å¤šä¸ªé¡¹ç›®ï¼ˆå…·ä½“æ¥è¯´ï¼Œé¡¹ç›®æ•°é™¤ä»¥ 2ï¼‰ã€‚æ¢è¨€ä¹‹ï¼Œæœ€åæƒ…å†µä¸‹çš„ <code>get</code> æ‰§è¡Œæ—¶é—´ä¸æ•´ä¸ªåˆ—è¡¨çš„å¤§å°å‘ˆçº¿æ€§å…³ç³»ã€‚è¿™ä¸ çš„ <code>getBack</code> è¿è¡Œæ—¶å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œæ— è®ºåˆ—è¡¨çš„å¤§å°å¦‚ä½•ï¼Œå®ƒéƒ½æ˜¯æ’å®šçš„ã€‚åœ¨æœ¬è¯¾ç¨‹çš„åé¢ï¼Œæˆ‘ä»¬å°†æ ¹æ®å¤§ O å’Œå¤§ Theta è¡¨ç¤ºæ³•æ­£å¼å®šä¹‰è¿è¡Œæ—¶ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†åšæŒéæ­£å¼çš„ç†è§£ã€‚</p><h2 id="AListçš„å®ç°-åˆç‰ˆ"><a href="#AListçš„å®ç°-åˆç‰ˆ" class="headerlink" title="AListçš„å®ç°(åˆç‰ˆ)"></a>AListçš„å®ç°(åˆç‰ˆ)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Array based list.</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@author</span> Josh Hug</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AList</span> &#123;</span><br><span class="line">    <span class="comment">/** Creates an empty list. */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>[] item;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AList</span><span class="params">()</span> &#123;</span><br><span class="line">        item = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">100</span>];</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Inserts X into the back of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        item[size] = x;</span><br><span class="line">        size++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the item from the back of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getLast</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item[size - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/** Gets the ith item in the list (0 is the front). */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> item[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of items in the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Deletes item from back of the list and</span></span><br><span class="line"><span class="comment">     * returns deleted item. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">removeLast</span><span class="params">()</span> &#123;</span><br><span class="line">        cur_item = getLast();</span><br><span class="line">        size--;</span><br><span class="line">        <span class="keyword">return</span> cur_item;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºçš„åˆ—è¡¨å®é™…å¤§å°æ¯”100å¤§ï¼Œä¼šå¯¼è‡´è¶Šç•Œï¼Œè‹¥æˆ‘ä»¬å¢åŠ ä¸€å¼€å§‹çš„<code>item</code>æ•°ç»„çš„å¤§å°ï¼Œåˆä¼šé€ æˆç©ºé—´å†…å­˜çš„æµªè´¹ã€‚</p><h2 id="è°ƒèŠ‚æ•°ç»„å¤§å°"><a href="#è°ƒèŠ‚æ•°ç»„å¤§å°" class="headerlink" title="è°ƒèŠ‚æ•°ç»„å¤§å°"></a>è°ƒèŠ‚æ•°ç»„å¤§å°</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">resize</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">    <span class="type">int</span>[] a = <span class="keyword">new</span> <span class="title class_">int</span>[capacity];</span><br><span class="line">    System.arraycopy(items, <span class="number">0</span>, a, <span class="number">0</span>, size);</span><br><span class="line">    item = a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (size == item.length) &#123;</span><br><span class="line">        resize(size + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    items[size] = x;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ä»ä¸€ä¸ªå¤§å°ä¸º 100 çš„æ•°ç»„å¼€å§‹ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨ <code>addLast</code> 1,000 æ¬¡ï¼Œå¤§çº¦ä¼šåˆ›å»ºå’Œå¡«å……500,000ä¸ªå†…å­˜ç›’</p><p>åˆ›å»ºæ‰€æœ‰è¿™äº›å­˜å‚¨ç›’å¹¶é‡æ–°å¤åˆ¶å…¶å†…å®¹éœ€è¦æ—¶é—´ã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬åœ¨é¡¶éƒ¨ç»˜åˆ¶äº† SLList çš„æ€»æ—¶é—´ä¸æ“ä½œæ¬¡æ•°çš„å…³ç³»ï¼Œåœ¨åº•éƒ¨ç»˜åˆ¶äº†åŸºäºæœ´ç´ æ•°ç»„çš„åˆ—è¡¨çš„æ€»æ—¶é—´ä¸æ“ä½œæ¬¡æ•°çš„å…³ç³»ã€‚SLList æ˜¾ç¤ºä¸€æ¡ç›´çº¿ï¼Œè¿™æ„å‘³ç€å¯¹äºæ¯ä¸ª <code>add</code> æ“ä½œï¼Œåˆ—è¡¨éœ€è¦ç›¸åŒçš„é¢å¤–æ—¶é—´ã€‚è¿™æ„å‘³ç€æ¯ä¸ªæ“ä½œéƒ½éœ€è¦æ’å®šçš„æ—¶é—´ï¼ä½ ä¹Ÿå¯ä»¥è¿™æ ·æƒ³ï¼šå›¾å½¢æ˜¯çº¿æ€§çš„ï¼Œè¡¨æ˜æ¯ä¸ªæ“ä½œéƒ½éœ€è¦æ’å®šçš„æ—¶é—´ï¼Œå› ä¸ºå¸¸æ•°çš„ç§¯åˆ†æ˜¯ä¸€æ¡çº¿ã€‚</p><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæœ´ç´ æ•°ç»„åˆ—è¡¨æ˜¾ç¤ºæŠ›ç‰©çº¿ï¼Œè¡¨æ˜æ¯ä¸ªæ“ä½œéƒ½éœ€è¦çº¿æ€§æ—¶é—´ï¼Œå› ä¸ºç›´çº¿çš„ç§¯åˆ†æ˜¯æŠ›ç‰©çº¿ã€‚è¿™å¯¹ç°å®ä¸–ç•Œå…·æœ‰é‡å¤§å½±å“ã€‚å¯¹äºæ’å…¥ 100,000 ä¸ªé¡¹ç›®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¡ç®— N^2&#x2F;N çš„æ¯”ç‡æ¥ç²—ç•¥è®¡ç®—å¤šé•¿æ—¶é—´ã€‚ å°† 100,000 ä¸ªé¡¹ç›®æ’å…¥åˆ°æˆ‘ä»¬åŸºäºæ•°ç»„çš„åˆ—è¡¨ä¸­éœ€è¦ ï¼ˆ100,000^2ï¼‰&#x2F;100,000 æˆ– 100,000 å€çš„æ—¶é—´ã€‚è¿™æ˜¾ç„¶æ˜¯ä¸èƒ½æ¥å—çš„ã€‚</p><p><img src="/2024/01/24/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-6-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E6%95%B0%E7%BB%84%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-4-2-5/insert_experiment.png" alt="fig25/insert_experiment.png"></p><p>è¿™å°±éå¸¸çš„æ…¢äº†</p><h3 id="æ–¹æ³•äºŒâ€”â€”å‡ ä½•å¤§å°è°ƒæ•´"><a href="#æ–¹æ³•äºŒâ€”â€”å‡ ä½•å¤§å°è°ƒæ•´" class="headerlink" title="æ–¹æ³•äºŒâ€”â€”å‡ ä½•å¤§å°è°ƒæ•´"></a>æ–¹æ³•äºŒâ€”â€”å‡ ä½•å¤§å°è°ƒæ•´</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ æ•°ç»„çš„å¤§å°æ¥å¢åŠ æˆ‘ä»¬çš„æ€§èƒ½é—®é¢˜ï¼Œè€Œä¸æ˜¯å¢åŠ ä¸€ä¸ªåŠ æ³•é‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å…¶æ·»åŠ ç­‰äºæŸä¸ªè°ƒæ•´å¤§å°å› å­ <code>RFACTOR</code> çš„å†…å­˜ç›’æ•°é‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertBack</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (size == item.length) &#123;</span><br><span class="line">           resize(size + RFACTOR);</span><br><span class="line">    &#125;</span><br><span class="line">    items[size] = x;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸åï¼Œæˆ‘ä»¬é€šè¿‡å°†æ¡†æ•°ä¹˜ä»¥ <code>RFACTOR</code> æ¥è°ƒæ•´å¤§å°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertBack</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (size == item.length) &#123;</span><br><span class="line">           resize(size * RFACTOR);</span><br><span class="line">    &#125;</span><br><span class="line">    items[size] = x;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¤æˆ‘ä»¬ä¹‹å‰çš„è®¡ç®—å®éªŒï¼Œæˆ‘ä»¬çœ‹åˆ°æˆ‘ä»¬çš„æ–° <code>AList</code> æ’ä»¶åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å®Œæˆäº† 100,000 ä¸ªæ’å…¥ï¼Œä»¥è‡³äºæˆ‘ä»¬ç”šè‡³æ²¡æœ‰æ³¨æ„åˆ°ã€‚æˆ‘ä»¬å°†æ¨è¿Ÿåˆ°æœ¬ä¹¦çš„æœ€åä¸€ç« å¯¹ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µè¿›è¡Œå…¨é¢åˆ†æã€‚</p><h2 id="å†…å­˜æ€§èƒ½"><a href="#å†…å­˜æ€§èƒ½" class="headerlink" title="å†…å­˜æ€§èƒ½"></a>å†…å­˜æ€§èƒ½</h2><p>æˆ‘ä»¬ <code>AList</code> å‡ ä¹å®Œæˆäº†ï¼Œä½†æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»è¦é—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬æ’å…¥ 1,000,000,000 ä¸ªé¡¹ç›®ï¼Œç„¶ååˆ é™¤ 990,000,000 ä¸ªé¡¹ç›®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åªä½¿ç”¨ 10,000,000 ä¸ªå†…å­˜ç›’ï¼Œå‰©ä¸‹ 99% å®Œå…¨æœªä½¿ç”¨ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨æ•°ç»„å¼€å§‹çœ‹èµ·æ¥ä¸ºç©ºæ—¶ç¼©å°æ•°ç»„çš„å¤§å°ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªâ€œä½¿ç”¨æ¯”ç‡â€Rï¼Œå®ƒç­‰äºåˆ—è¡¨çš„å¤§å°é™¤ä»¥ <code>items</code> æ•°ç»„çš„é•¿åº¦ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹å›¾ä¸­ï¼Œä½¿ç”¨ç‡ä¸º0.04ã€‚</p><p>åœ¨å…¸å‹çš„å®ç°ä¸­ï¼Œå½“ R é™è‡³å°äº 0.25 æ—¶ï¼Œæˆ‘ä»¬å°†æ•°ç»„çš„å¤§å°å‡åŠã€‚</p><h2 id="æ³›å‹AList"><a href="#æ³›å‹AList" class="headerlink" title="æ³›å‹AList"></a>æ³›å‹AList</h2><p>å°±åƒæˆ‘ä»¬ä¹‹å‰æ‰€åšçš„é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„ <code>AList</code> ï¼Œä»¥ä¾¿å®ƒå¯ä»¥ä¿å­˜ä»»ä½•æ•°æ®ç±»å‹ï¼Œè€Œä¸ä»…ä»…æ˜¯æ•´æ•°ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å†æ¬¡åœ¨ç±»ä¸­ä½¿ç”¨ç‰¹æ®Šçš„è§’æ‹¬å·è¡¨ç¤ºæ³•ï¼Œå¹¶åœ¨é€‚å½“çš„æƒ…å†µä¸‹å°†ä»»æ„ç±»å‹å‚æ•°æ›¿æ¢ä¸ºæ•´æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢ï¼Œæˆ‘ä»¬ç”¨ä½œ <code>Glorp</code> ç±»å‹å‚æ•°ã€‚</p><p>æœ‰ä¸€ä¸ªæ˜¾è‘—çš„è¯­æ³•å·®å¼‚ï¼šJava ä¸å…è®¸æˆ‘ä»¬åˆ›å»ºæ³›å‹å¯¹è±¡æ•°ç»„ï¼Œå› ä¸ºæ³›å‹çš„å®ç°æ–¹å¼å­˜åœ¨ä¸€ä¸ªæ¨¡ç³Šçš„é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸èƒ½åšè¿™æ ·çš„äº‹æƒ…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glorp[] items = <span class="keyword">new</span> <span class="title class_">Glorp</span>[<span class="number">8</span>];</span><br></pre></td></tr></table></figure><p>ç›¸åï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¦‚ä¸‹æ‰€ç¤ºçš„ç¬¨æ‹™è¯­æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Glorp[] items = (Glorp []) <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br></pre></td></tr></table></figure><p>è¿™å°†äº§ç”Ÿä¸€ä¸ªç¼–è¯‘è­¦å‘Šï¼Œä½†è¿™åªæ˜¯æˆ‘ä»¬å¿…é¡»å¿å—çš„äº‹æƒ…ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­æ›´è¯¦ç»†åœ°è®¨è®ºè¿™ä¸€ç‚¹ã€‚</p><p>æˆ‘ä»¬æ‰€åšçš„å¦ä¸€ä¸ªæ›´æ”¹æ˜¯ï¼Œ<strong>æˆ‘ä»¬å°†â€œåˆ é™¤â€çš„ä»»ä½•é¡¹ç›®éƒ½æ¸…ç©ºã€‚</strong>ä»¥å‰ï¼Œæˆ‘ä»¬æ²¡æœ‰ç†ç”±å°†å·²åˆ é™¤çš„å…ƒç´ æ¸…é›¶ï¼Œè€Œä½¿ç”¨æ³›å‹å¯¹è±¡ï¼Œæˆ‘ä»¬ç¡®å®å¸Œæœ›æ¸…ç©ºå¯¹æ‰€å­˜å‚¨å¯¹è±¡çš„å¼•ç”¨ã€‚è¿™æ˜¯ä¸ºäº†é¿å…â€œæ¸¸è¡â€ã€‚å›æƒ³ä¸€ä¸‹ï¼ŒJava ä»…åœ¨æœ€åä¸€ä¸ªå¼•ç”¨ä¸¢å¤±æ—¶é”€æ¯å¯¹è±¡ã€‚å¦‚æœæˆ‘ä»¬æœªèƒ½æ¸…ç©ºå¼•ç”¨ï¼Œé‚£ä¹ˆ Java å°†ä¸ä¼šå¯¹å·²æ·»åŠ åˆ°åˆ—è¡¨ä¸­çš„å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><blockquote><p>å› ä¸ºæˆ‘ä»¬ä½¿ç”¨æ³›å‹å¯¹è±¡æ—¶ï¼Œç›¸æ¯”ä¹‹å‰çš„intå¯¹è±¡ï¼Œæˆ‘ä»¬çš„åˆ—è¡¨çš„å†…å­˜ç›’æ˜¯æŒ‡å‘æŸä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œè‹¥æˆ‘ä»¬æ²¡æœ‰æ¸…ç©ºçš„è¯ï¼Œè¯¥å¯¹è±¡çš„å†…å­˜è¿˜æ˜¯ä¼šå †å åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šè¢«Javaåƒåœ¾å›æ”¶ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(äº”)--é“¾è¡¨åŸºç¡€çš„åˆ—è¡¨(2.2,2.3)</title>
      <link href="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/"/>
      <url>/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/</url>
      
        <content type="html"><![CDATA[<p><a href="https://joshhug.gitbooks.io/hug61b/content/chap2/chap22.html">2.2 SLList Â·æ‹¥æŠ±61B â€” 2.2 The SLList Â· Hug61B (gitbooks.io)</a></p><p><a href="https://joshhug.gitbooks.io/hug61b/content/chap2/chap23.html">2.3 DLList Â·æ‹¥æŠ±61B â€” 2.3 The DLList Â· Hug61B (gitbooks.io)</a></p><h1 id="SLLists"><a href="#SLLists" class="headerlink" title="SLLists"></a>SLLists</h1><p>åœ¨ç¬¬ 2.1 ç« ä¸­ï¼Œæˆ‘ä»¬æ„å»ºäº†ç±» <code>IntList</code> ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ—è¡¨æ•°æ®ç»“æ„ï¼Œä»æŠ€æœ¯ä¸Šè®²ï¼Œå®ƒå¯ä»¥å®Œæˆåˆ—è¡¨å¯ä»¥æ‰§è¡Œçš„æ‰€æœ‰æ“ä½œã€‚ç„¶è€Œï¼Œåœ¨å®è·µä¸­ï¼Œå®ƒ <code>IntList</code> ä½¿ç”¨èµ·æ¥ç›¸å½“ç¬¨æ‹™ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚</p><p>ä»æ ¹æœ¬ä¸Šè¯´ï¼Œé—®é¢˜åœ¨äº <code>IntList</code> è¿™å°±æ˜¯æˆ‘æ‰€è¯´çš„è£¸é€’å½’æ•°æ®ç»“æ„ã€‚ä¸ºäº†æ­£ç¡®ä½¿ç”¨é€’å½’ï¼Œç¨‹åºå‘˜å¿…é¡»ç†è§£å’Œåˆ©ç”¨é€’å½’ï¼Œå³ä½¿æ˜¯ç®€å•çš„åˆ—è¡¨ç›¸å…³ä»»åŠ¡ã€‚è¿™é™åˆ¶äº†å®ƒå¯¹æ–°æ‰‹ç¨‹åºå‘˜çš„æœ‰ç”¨æ€§ï¼Œå¹¶å¯èƒ½å¼•å…¥ä¸€ç±»å…¨æ–°çš„æ£˜æ‰‹é”™è¯¯ï¼Œç¨‹åºå‘˜å¯èƒ½ä¼šé‡åˆ°è¿™äº›é”™è¯¯ï¼Œå…·ä½“å–å†³äºè¯¥ <code>IntList</code> ç±»æä¾›çš„å¸®åŠ©ç¨‹åºæ–¹æ³•ç±»å‹ã€‚</p><h2 id="åˆçº§ç‰ˆæœ¬"><a href="#åˆçº§ç‰ˆæœ¬" class="headerlink" title="åˆçº§ç‰ˆæœ¬:"></a>åˆçº§ç‰ˆæœ¬:</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">IntNode</span><span class="params">(<span class="type">int</span> i, IntNode n)</span> &#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> IntNode first; </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the front of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, first);</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Retrieves the front item from the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> first.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the end of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="comment">/* Your Code Here! */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of items in the list using recursion. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">/* Your Code Here! */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="IntListå’ŒSLListçš„æ¯”è¾ƒ"><a href="#IntListå’ŒSLListçš„æ¯”è¾ƒ" class="headerlink" title="IntListå’ŒSLListçš„æ¯”è¾ƒ"></a>IntListå’ŒSLListçš„æ¯”è¾ƒ</h1><h2 id="åˆ›å»ºï¼š"><a href="#åˆ›å»ºï¼š" class="headerlink" title="åˆ›å»ºï¼š"></a>åˆ›å»ºï¼š</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">IntList</span> <span class="variable">L1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IntList</span>(<span class="number">5</span>, <span class="literal">null</span>);</span><br><span class="line"><span class="type">SLList</span> <span class="variable">L2</span>  <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SLList</span>(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><blockquote><p>éšè— <code>SLList</code> ç”¨æˆ·å­˜åœ¨ç©ºé“¾æ¥çš„è¯¦ç»†ä¿¡æ¯ã€‚</p></blockquote><h2 id="æ·»åŠ èŠ‚ç‚¹"><a href="#æ·»åŠ èŠ‚ç‚¹" class="headerlink" title="æ·»åŠ èŠ‚ç‚¹"></a>æ·»åŠ èŠ‚ç‚¹</h2><h3 id="SLList"><a href="#SLList" class="headerlink" title="SLList:"></a>SLList:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">SLList</span> <span class="variable">L</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SLList</span>(<span class="number">15</span>);</span><br><span class="line">L.addFirst(<span class="number">10</span>);</span><br><span class="line">L.addFirst(<span class="number">5</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> L.getFirst();</span><br></pre></td></tr></table></figure><h3 id="IntList"><a href="#IntList" class="headerlink" title="IntList:"></a>IntList:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">IntList</span> <span class="variable">L</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IntList</span>(<span class="number">15</span>, <span class="literal">null</span>);</span><br><span class="line">L = <span class="keyword">new</span> <span class="title class_">IntList</span>(<span class="number">10</span>, L);</span><br><span class="line">L = <span class="keyword">new</span> <span class="title class_">IntList</span>(<span class="number">5</span>, L);</span><br><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> L.first;</span><br></pre></td></tr></table></figure><h3 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h3><p>ç›´è§‚åœ°æ¯”è¾ƒè¿™ä¸¤ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬æœ‰ï¼šï¼ˆ <code>IntList</code> ç‰ˆæœ¬åœ¨é¡¶éƒ¨ï¼Œ <code>SLList</code> ç‰ˆæœ¬åœ¨ä¸‹æ–¹ï¼‰</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/IntList_vs_SLList.png" alt="IntList_vs_SLList.png"></p><p>ä»æœ¬è´¨ä¸Šè®²ï¼Œè¯¥ <code>SLList</code> ç±»å……å½“åˆ—è¡¨ç”¨æˆ·å’Œè£¸é€’å½’æ•°æ®ç»“æ„ä¹‹é—´çš„ä¸­é—´äººã€‚å¦‚ä¸Š <code>IntList</code> æ‰€è¿°ï¼Œ <code>IntList</code> ç”¨æˆ·å…·æœ‰æŒ‡å‘ <code>IntList</code> .æ­£å¦‚å¥¥ç»´å¾·æ‰€è¯´ï¼šå‡¡äººä¸èƒ½åœ¨ä¸æ­»çš„æƒ…å†µä¸‹æ³¨è§†ç¥ï¼Œæ‰€ä»¥ä¹Ÿè®¸æœ€å¥½åœ¨é‚£é‡Œ <code>SLList</code> å……å½“æˆ‘ä»¬çš„ä¸­é—´äººã€‚</p><blockquote><p>SLListæé«˜äº†ä»£ç çš„æŠ½è±¡æ€§ï¼Œåªæä¾›æ¥å£å‡ºæ¥ï¼Œè€Œä¸æ˜¯æä¾›å…·æœ‰é£é™©çš„è£¸æ•°æ®<code>first</code>æ¥è·å–ã€‚</p></blockquote><h3 id="å…¬æœ‰ä¸ç§æœ‰"><a href="#å…¬æœ‰ä¸ç§æœ‰" class="headerlink" title="å…¬æœ‰ä¸ç§æœ‰"></a>å…¬æœ‰ä¸ç§æœ‰</h3><p>IntListçš„æ•°æ®çš†ä¸ºpublicï¼Œæ²¡æœ‰é¢„ç•™æ¥å£æ¥è°ƒç”¨ã€‚</p><p>å¦‚æœSLListæ•°æ®ä¹Ÿçš†ä¸ºpublicï¼Œé‚£ä¹ˆå¯ä»¥ç»•è¿‡æ¥å£ç›´æ¥è·å–ï¼Œå…·æœ‰ä¸€å®šé£é™©ã€‚</p><p>ç§æœ‰å˜é‡å’Œæ–¹æ³•åªèƒ½é€šè¿‡åŒä¸€ <code>.java</code> æ–‡ä»¶ä¸­çš„ä»£ç è®¿é—®ï¼Œä¾‹å¦‚åœ¨æœ¬ä¾‹ <code>SLList.java</code> ä¸­ã€‚è¿™æ„å‘³ç€åƒ <code>SLLTroubleMaker</code> ä¸‹é¢çš„ç±»å°†æ— æ³•ç¼–è¯‘ï¼Œä»è€Œäº§ç”Ÿ <code>first has private access in SLList</code> é”™è¯¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLLTroubleMaker</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SLList</span> <span class="variable">L</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SLList</span>(<span class="number">15</span>);</span><br><span class="line">        L.addFirst(<span class="number">10</span>);</span><br><span class="line">        L.first.next.next = L.first.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œ <code>SLList.java</code> æ–‡ä»¶å†…çš„ä»»ä½•ä»£ç éƒ½èƒ½å¤Ÿè®¿é—®è¯¥ <code>first</code> å˜é‡ã€‚</p><p>é™åˆ¶è®¿é—®ä¼¼ä¹æœ‰ç‚¹æ„šè ¢ã€‚æ¯•ç«Ÿï¼Œ <code>private</code> å…³é”®å­—å”¯ä¸€è¦åšçš„å°±æ˜¯ç ´ååŸæœ¬ç¼–è¯‘çš„ç¨‹åºã€‚ç„¶è€Œï¼Œåœ¨å¤§å‹è½¯ä»¶å·¥ç¨‹é¡¹ç›®ä¸­ï¼Œ <code>private</code> å…³é”®å­—æ˜¯ä¸€ä¸ªéå¸¸å®è´µçš„ä¿¡å·ï¼Œè¡¨æ˜æœ€ç»ˆç”¨æˆ·åº”è¯¥å¿½ç•¥æŸäº›ä»£ç ç‰‡æ®µï¼ˆå› æ­¤ä¸éœ€è¦ç†è§£ï¼‰ã€‚åŒæ ·ï¼Œå…³é”®å­— <code>public</code> åº”è¯¥è¢«çœ‹ä½œæ˜¯ä¸€ç§æ–¹æ³•å¯ç”¨çš„å£°æ˜ï¼Œå¹¶ä¸”å°†æ°¸è¿œåƒç°åœ¨ä¸€æ ·å·¥ä½œã€‚</p><p>æ‰“ä¸ªæ¯”æ–¹ï¼Œæ±½è½¦å…·æœ‰æŸäº› <code>public</code> åŠŸèƒ½ï¼Œä¾‹å¦‚æ²¹é—¨å’Œåˆ¶åŠ¨è¸æ¿ã€‚åœ¨å¼•æ“ç›–ä¸‹ï¼Œæœ‰ <code>private</code> å…³äºå®ƒä»¬å¦‚ä½•è¿ä½œçš„è¯¦ç»†ä¿¡æ¯ã€‚åœ¨æ±½æ²¹åŠ¨åŠ›æ±½è½¦ä¸­ï¼Œæ²¹é—¨è¸æ¿å¯ä»¥æ§åˆ¶æŸç§ç‡ƒæ²¹å–·å°„ç³»ç»Ÿï¼Œè€Œåœ¨ç”µæ± ä¾›ç”µçš„æ±½è½¦ä¸­ï¼Œå®ƒå¯ä»¥è°ƒæ•´è¾“é€åˆ°ç”µæœºçš„ç”µæ± ç”µé‡ã€‚è™½ç„¶ç§äººç»†èŠ‚å¯èƒ½å› æ±½è½¦è€Œå¼‚ï¼Œä½†æˆ‘ä»¬é¢„è®¡æ‰€æœ‰æ²¹é—¨è¸æ¿éƒ½æœ‰ç›¸åŒçš„è¡Œä¸ºã€‚æ›´æ”¹è¿™äº›ä¼šå¼•èµ·ç”¨æˆ·çš„æå¤§ææ…Œï¼Œå¹¶ä¸”å¾ˆå¯èƒ½ä¼šå‘ç”Ÿå¯æ€•çš„äº‹æ•…ã€‚</p><h1 id="SListçš„æ”¹è¿›"><a href="#SListçš„æ”¹è¿›" class="headerlink" title="SListçš„æ”¹è¿›"></a>SListçš„æ”¹è¿›</h1><h2 id="åµŒå¥—IntNodeç±»"><a href="#åµŒå¥—IntNodeç±»" class="headerlink" title="åµŒå¥—IntNodeç±»"></a>åµŒå¥—IntNodeç±»</h2><blockquote><p>ç”±IntListæ”¹åè€Œæ¥</p></blockquote><p>ç›®å‰ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ª <code>.java</code> æ–‡ä»¶ï¼š <code>IntNode</code> å’Œ <code>SLList</code> .ç„¶è€Œï¼Œè¿™çœŸçš„ <code>IntNode</code> åªæ˜¯æ•…äº‹ä¸­çš„ä¸€ä¸ªé…è§’ <code>SLList</code> ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒJava ä¸ºæˆ‘ä»¬æä¾›äº†å°†ä¸€ä¸ªç±»å£°æ˜åµŒå…¥åˆ°å¦ä¸€ä¸ªç±»å£°æ˜ä¸­çš„èƒ½åŠ›ã€‚è¯­æ³•ç®€å•ç›´è§‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLList</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">            <span class="keyword">public</span> IntNode next;</span><br><span class="line">            <span class="keyword">public</span> <span class="title function_">IntNode</span><span class="params">(<span class="type">int</span> i, IntNode n)</span> &#123;</span><br><span class="line">                item = i;</span><br><span class="line">                next = n;</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">private</span> IntNode first; </span><br><span class="line"></span><br><span class="line">       <span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">           first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">       &#125; </span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>åµŒå¥—ç±»å¯¹ä»£ç æ€§èƒ½æ²¡æœ‰æœ‰æ„ä¹‰çš„å½±å“ï¼Œåªæ˜¯ä¿æŒä»£ç äº•äº•æœ‰æ¡çš„å·¥å…·ã€‚æœ‰å…³åµŒå¥—ç±»çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Oracle çš„å®˜æ–¹æ–‡æ¡£ã€‚</p><p>å¦‚æœåµŒå¥—ç±»ä¸éœ€è¦ä½¿ç”¨ <code>SLList</code> çš„ä»»ä½•å®ä¾‹æ–¹æ³•æˆ–å˜é‡ï¼Œåˆ™å¯ä»¥å£°æ˜åµŒå¥—ç±» <code>static</code> ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚å°†åµŒå¥—ç±»å£°æ˜ä¸º æ„å‘³ç€ <code>static</code> é™æ€ç±»ä¸­çš„æ–¹æ³•ä¸èƒ½è®¿é—®å°é—­ç±»çš„ä»»ä½•æˆå‘˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™æ„å‘³ç€ ä¸­ <code>IntNode</code> çš„ä»»ä½•æ–¹æ³•éƒ½æ— æ³•è®¿é—® <code>first</code> ã€ <code>addFirst</code> æˆ– <code>getFirst</code> ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLList</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">            <span class="keyword">public</span> IntNode next;</span><br><span class="line">            <span class="keyword">public</span> <span class="title function_">IntNode</span><span class="params">(<span class="type">int</span> i, IntNode n)</span> &#123;</span><br><span class="line">                item = i;</span><br><span class="line">                next = n;</span><br><span class="line">            &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">private</span> IntNode first;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™æ ·å¯ä»¥èŠ‚çœä¸€äº›å†…å­˜ï¼Œå› ä¸ºæ¯ä¸ª <code>IntNode</code> éƒ½ä¸å†éœ€è¦è·Ÿè¸ªå¦‚ä½•è®¿é—®å…¶å°é—­ <code>SLList</code> å¼ .</p><p>æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ æ£€æŸ¥ä¸Šé¢çš„ä»£ç ï¼Œä½ ä¼šå‘ç°è¯¥ <code>IntNode</code> ç±»ä»ä¸ä½¿ç”¨ <code>SLList</code> çš„ <code>first</code> å˜é‡ ï¼Œä¹Ÿä¸ä½¿ç”¨ <code>SLList</code> çš„ä»»ä½•æ–¹æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ static å…³é”®å­—ï¼Œè¿™æ„å‘³ç€è¯¥ <code>IntNode</code> ç±»ä¸ä¼šå¼•ç”¨å…¶ bossï¼Œä»è€ŒèŠ‚çœäº†å°‘é‡å†…å­˜ã€‚</p><h3 id="ä¸€ä¸ªç®€å•çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨å¤–éƒ¨ç±»çš„ä»»ä½•å®ä¾‹æˆå‘˜ï¼Œè¯·ä½¿åµŒå¥—ç±»æˆä¸ºé™æ€ç±»ã€‚"><a href="#ä¸€ä¸ªç®€å•çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨å¤–éƒ¨ç±»çš„ä»»ä½•å®ä¾‹æˆå‘˜ï¼Œè¯·ä½¿åµŒå¥—ç±»æˆä¸ºé™æ€ç±»ã€‚" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨å¤–éƒ¨ç±»çš„ä»»ä½•å®ä¾‹æˆå‘˜ï¼Œè¯·ä½¿åµŒå¥—ç±»æˆä¸ºé™æ€ç±»ã€‚"></a><strong>ä¸€ä¸ªç®€å•çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œå¦‚æœä¸ä½¿ç”¨å¤–éƒ¨ç±»çš„ä»»ä½•å®ä¾‹æˆå‘˜ï¼Œè¯·ä½¿åµŒå¥—ç±»æˆä¸ºé™æ€ç±»ã€‚</strong></h3><h2 id="addLast-and-size"><a href="#addLast-and-size" class="headerlink" title="addLast() and size()"></a>addLast() and size()</h2><h3 id="addLast"><a href="#addLast" class="headerlink" title="addLast()"></a>addLast()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Adds an item to the end of the list. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> first;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Advance p to the end of the list. */</span></span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line">    p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹ äº <code>IntList</code> çš„ <code>size</code> é€’å½’è°ƒç”¨å¾ˆç®€å•ï¼š <code>return 1 + this.rest.size()</code> .å¯¹äºä¸€ä¸ª <code>SLList</code> ï¼Œè¿™ç§æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ <code>SLList</code> æ²¡æœ‰ <code>rest</code> å˜é‡ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ç§ä¸ä¸­é—´äººç±»ä¸€èµ·ä½¿ç”¨çš„é€šç”¨æ¨¡å¼ï¼Œä¾‹å¦‚ <code>SLList</code> â€“ æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç§æœ‰å¸®åŠ©ç¨‹åºæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸åº•å±‚çš„è£¸é€’å½’æ•°æ®ç»“æ„è¿›è¡Œäº¤äº’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Returns the size of the list starting at IntNode p. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">(IntNode p)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (p.next == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + size(p.next);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> size(first);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œéƒ½å‘½åä¸º <code>size</code> .è¿™åœ¨ Java ä¸­æ˜¯å…è®¸çš„ï¼Œå› ä¸ºå®ƒä»¬å…·æœ‰ä¸åŒçš„å‚æ•°ã€‚æˆ‘ä»¬è¯´ä¸¤ä¸ªåç§°ç›¸åŒä½†ç­¾åä¸åŒçš„æ–¹æ³•è¢«é‡è½½ã€‚æœ‰å…³é‡è½½æ–¹æ³•çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Java çš„å®˜æ–¹æ–‡æ¡£ã€‚</p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨ <code>IntNode</code> ç±»æœ¬èº«ä¸­åˆ›å»ºéé™æ€å¸®åŠ©ç¨‹åºæ–¹æ³•ã€‚è¿™ä¸¤ç§æ–¹æ³•éƒ½å¾ˆå¥½ï¼Œå°½ç®¡æˆ‘ä¸ªäººæ›´å–œæ¬¢ <code>IntNode</code> åœ¨ç±»ä¸­æ²¡æœ‰ä»»ä½•æ–¹æ³•ã€‚</p><h2 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h2><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå½“æˆ‘ä»¬éœ€è¦å¾—åˆ°sizeçš„å€¼çš„æ—¶å€™éƒ½ä¼šé‡æ–°è°ƒç”¨ä¸€é<code>size()</code>å‡½æ•°ï¼Œè¿™å¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ï¼Œ</p><p>å‡è®¾åœ¨å¤§å°ä¸º 1,000 çš„åˆ—è¡¨ <code>size</code> ä¸Šéœ€è¦ 2 ç§’ã€‚æˆ‘ä»¬é¢„è®¡ï¼Œåœ¨å¤§å°ä¸º 1,000,000 çš„åˆ—è¡¨ä¸­ï¼Œè¯¥ <code>size</code> æ–¹æ³•å°†éœ€è¦ 2,000 ç§’ï¼Œå› ä¸ºè®¡ç®—æœºå¿…é¡»å•æ­¥æ‰§è¡Œåˆ—è¡¨ä¸­ 1,000 å€çš„é¡¹ç›®æ‰èƒ½åˆ°è¾¾æœ«å°¾ã€‚å¯¹äºå¤§å‹åˆ—è¡¨æ¥è¯´ï¼Œä½¿ç”¨éå¸¸ <code>size</code> æ…¢çš„æ–¹æ³•æ˜¯ä¸å¯æ¥å—çš„ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†ä¸€ä¸ª <code>size</code> å˜é‡æ·»åŠ åˆ°è·Ÿè¸ªå½“å‰å¤§å°çš„ <code>SLList</code> ç±»ä¸­ï¼Œä»è€Œç”Ÿæˆä¸‹é¢çš„ä»£ç ã€‚è¿™ç§ä¿å­˜é‡è¦æ•°æ®ä»¥åŠ å¿«æ£€ç´¢é€Ÿåº¦çš„åšæ³•æœ‰æ—¶ç§°ä¸º**ç¼“å­˜(caching)**ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLList</span> &#123;</span><br><span class="line">    ... <span class="comment">/* IntNode declaration omitted. */</span></span><br><span class="line">    <span class="keyword">private</span> IntNode first;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, first);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§ä¿®æ”¹ä½¿æˆ‘ä»¬ <code>size</code> çš„æ–¹æ³•éå¸¸å¿«ï¼Œæ— è®ºåˆ—è¡¨æœ‰å¤šå¤§ã€‚å½“ç„¶ï¼Œå®ƒä¹Ÿä¼šå‡æ…¢æˆ‘ä»¬çš„ <code>addFirst</code> å’Œ <code>addLast</code> æ–¹æ³•çš„é€Ÿåº¦ï¼Œä¹Ÿä¼šå¢åŠ æˆ‘ä»¬ç±»çš„ä½¿ç”¨è®°å¿†ï¼Œä½†åªæ˜¯å¾®ä¸è¶³é“çš„é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæƒè¡¡æ˜¾ç„¶æœ‰åˆ©äºåˆ›å»ºå¤§å°ç¼“å­˜ã€‚</p><h2 id="ç©ºåˆ—è¡¨æ„é€ å¼•å‘çš„ç©ºæŒ‡é’ˆå¼‚å¸¸"><a href="#ç©ºåˆ—è¡¨æ„é€ å¼•å‘çš„ç©ºæŒ‡é’ˆå¼‚å¸¸" class="headerlink" title="ç©ºåˆ—è¡¨æ„é€ å¼•å‘çš„ç©ºæŒ‡é’ˆå¼‚å¸¸"></a>ç©ºåˆ—è¡¨æ„é€ å¼•å‘çš„ç©ºæŒ‡é’ˆå¼‚å¸¸</h2><p>æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾å®ç°ä¸€ä¸ªåˆ›å»ºç©ºåˆ—è¡¨çš„æ„é€ å‡½æ•°ã€‚æœ€è‡ªç„¶çš„æ–¹æ³•æ˜¯è®¾ç½®ä¸º <code>first</code> <code>null</code> å¦‚æœåˆ—è¡¨ä¸ºç©ºã€‚è¿™å°†äº§ç”Ÿä»¥ä¸‹æ„é€ å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">()</span> &#123;</span><br><span class="line">    first = <span class="literal">null</span>;</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸å¹¸çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ’å…¥åˆ°ä¸€ä¸ªç©ºåˆ—è¡¨ä¸­ï¼Œè¿™ä¼šå¯¼è‡´æˆ‘ä»¬ <code>addLast</code> çš„æ–¹æ³•å´©æºƒã€‚ç”±äº <code>first</code> æ˜¯ <code>null</code> ï¼Œå°è¯•è®¿é—® <code>p.next</code> <code>while (p.next != null)</code> ä¸‹é¢ä¼šå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">    <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> first;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç©ºåˆ—è¡¨è§£å†³æ–¹æ³•â€”å“¨å…µèŠ‚ç‚¹"><a href="#ç©ºåˆ—è¡¨è§£å†³æ–¹æ³•â€”å“¨å…µèŠ‚ç‚¹" class="headerlink" title="ç©ºåˆ—è¡¨è§£å†³æ–¹æ³•â€”å“¨å…µèŠ‚ç‚¹"></a>ç©ºåˆ—è¡¨è§£å†³æ–¹æ³•â€”å“¨å…µèŠ‚ç‚¹</h2><p>æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆ</p><h3 id="ä¸€-ä¸ºaddLast-æ·»åŠ ä¸€ç§ç‰¹æ®Šæƒ…å†µå¤„ç†"><a href="#ä¸€-ä¸ºaddLast-æ·»åŠ ä¸€ç§ç‰¹æ®Šæƒ…å†µå¤„ç†" class="headerlink" title="(ä¸€)ä¸ºaddLast()æ·»åŠ ä¸€ç§ç‰¹æ®Šæƒ…å†µå¤„ç†"></a>(ä¸€)ä¸º<code>addLast()</code>æ·»åŠ ä¸€ç§ç‰¹æ®Šæƒ…å†µå¤„ç†</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> first;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤è§£å†³æ–¹æ¡ˆæœ‰æ•ˆï¼Œä½†åœ¨å¿…è¦æ—¶åº”é¿å…ä½¿ç”¨ä¸Šé¢æ‰€ç¤ºçš„ç‰¹æ®Šæƒ…å†µä»£ç ã€‚äººç±»åªæœ‰è¿™ä¹ˆå¤šçš„å·¥ä½œè®°å¿†ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½åœ°æ§åˆ¶å¤æ‚æ€§ã€‚å¯¹äºåƒ è¿™æ ·çš„ç®€å•æ•°æ®ç»“æ„ <code>SLList</code> ï¼Œç‰¹æ®Šæƒ…å†µçš„æ•°é‡å¾ˆå°‘ã€‚æ›´å¤æ‚çš„æ•°æ®ç»“æ„ï¼ˆå¦‚æ ‘ï¼‰å¯èƒ½ä¼šå˜å¾—æ›´åŠ ä¸‘é™‹ã€‚</p><h3 id="äºŒ-å“¨å…µèŠ‚ç‚¹"><a href="#äºŒ-å“¨å…µèŠ‚ç‚¹" class="headerlink" title="(äºŒ)å“¨å…µèŠ‚ç‚¹"></a>(äºŒ)å“¨å…µèŠ‚ç‚¹</h3><p>ä¸€ä¸ªæ›´å¹²å‡€çš„ï¼Œè™½ç„¶ä¸é‚£ä¹ˆæ˜æ˜¾çš„è§£å†³æ–¹æ¡ˆæ˜¯è®©å®ƒå˜å¾— <code>SLLists</code> â€œç›¸åŒâ€ï¼Œå³ä½¿å®ƒä»¬æ˜¯ç©ºçš„ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªå§‹ç»ˆå­˜åœ¨çš„ç‰¹æ®ŠèŠ‚ç‚¹æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå“¨å…µèŠ‚ç‚¹ã€‚å“¨å…µèŠ‚ç‚¹å°†æŒæœ‰ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬ä¸ä¼šå…³å¿ƒå®ƒã€‚</p><p>ä¾‹å¦‚ï¼Œåˆ›å»ºçš„ <code>SLList L = new SLList()</code> ç©ºåˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/empty_sentinelized_SLList.png" alt="empty_sentinelized_SLList.png"></p><p>å…·æœ‰é¡¹ç›® 5ã€10 å’Œ 15 çš„ a <code>SLList</code> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/three_item_sentenlized_SLList.png" alt="three_item_sentenlized_SLList.png"></p><p>ç”±äº <code>SLList</code> æ²¡æœ‰å“¨å…µæ²¡æœ‰ç‰¹æ®Šæƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä»æˆ‘ä»¬ <code>addLast</code> çš„æ–¹æ³•ä¸­åˆ é™¤ç‰¹æ®Šæƒ…å†µï¼Œä»è€Œå¾—åˆ°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">    <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> sentinel;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¸å˜é‡"><a href="#ä¸å˜é‡" class="headerlink" title="ä¸å˜é‡"></a>ä¸å˜é‡</h2><p>ä¸å˜æ€§æ˜¯<strong>å…³äºæ•°æ®ç»“æ„çš„äº‹å®</strong>ï¼Œå®ƒä¿è¯ä¸ºçœŸï¼ˆå‡è®¾ä»£ç ä¸­æ²¡æœ‰é”™è¯¯ï¼‰ã€‚</p><p>å…·æœ‰å“¨å…µèŠ‚ç‚¹çš„ A <code>SLList</code> è‡³å°‘å…·æœ‰ä»¥ä¸‹ä¸å˜é‡ï¼š</p><ul><li>å¼•ç”¨ <code>sentinel</code> å§‹ç»ˆæŒ‡å‘å“¨å…µèŠ‚ç‚¹ã€‚</li><li>å‰é¢çš„é¡¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰å§‹ç»ˆä½äº <code>sentinel.next.item</code> ã€‚</li><li>è¯¥ <code>size</code> å˜é‡å§‹ç»ˆæ˜¯å·²æ·»åŠ çš„é¡¹çš„æ€»æ•°ã€‚</li></ul><p>ä¸å˜é‡ä½¿æ¨ç†ä»£ç å˜å¾—æ›´åŠ å®¹æ˜“ï¼Œå¹¶ä¸”è¿˜ä¸ºæ‚¨æä¾›äº†åœ¨ç¡®ä¿ä»£ç æ­£å¸¸å·¥ä½œæ–¹é¢è¦åŠªåŠ›å®ç°çš„å…·ä½“ç›®æ ‡ã€‚</p><h1 id="SListæœ€ç»ˆç‰ˆæœ¬"><a href="#SListæœ€ç»ˆç‰ˆæœ¬" class="headerlink" title="SListæœ€ç»ˆç‰ˆæœ¬"></a>SListæœ€ç»ˆç‰ˆæœ¬</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SLList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">IntNode</span><span class="params">(<span class="type">int</span> i, IntNode n)</span> &#123;</span><br><span class="line">            item = i;</span><br><span class="line">            next = n;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> IntNode sentinel;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">()</span> &#123;</span><br><span class="line">        sentinel = <span class="keyword">new</span> <span class="title class_">IntNode</span>(<span class="number">99</span>, <span class="literal">null</span>);</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SLList</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        sentinel = <span class="keyword">new</span> <span class="title class_">IntNode</span>(<span class="number">99</span>, <span class="literal">null</span>);</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, sentinel.next);</span><br><span class="line">        size = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the front of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addFirst</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        sentinel.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, sentinel.next);</span><br><span class="line">        size += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Retrieves the front item from the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getFirst</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sentinel.next.item;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Returns the number of items in the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Adds an item to the end of the list. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> sentinel;</span><br><span class="line">        <span class="comment">/* Advance p to the end of the list. */</span></span><br><span class="line">        <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">            p = p.next;</span><br><span class="line">        &#125;</span><br><span class="line">        p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Crashes when you call addLast on an empty SLList. Fix it. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SLList</span> <span class="variable">x</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SLList</span>();</span><br><span class="line">        x.addLast(<span class="number">5</span>);</span><br><span class="line">        x.addLast(<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="DLLists"><a href="#DLLists" class="headerlink" title="DLLists"></a>DLLists</h1><h2 id="addLast-1"><a href="#addLast-1" class="headerlink" title="addLast"></a>addLast</h2><p>è€ƒè™‘ä¸Šé¢ <code>addLast(int x)</code> ä¸­çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addLast</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    size += <span class="number">1</span>;</span><br><span class="line">    <span class="type">IntNode</span> <span class="variable">p</span> <span class="operator">=</span> sentinel;</span><br><span class="line">    <span class="keyword">while</span> (p.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        p = p.next;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    p.next = <span class="keyword">new</span> <span class="title class_">IntNode</span>(x, <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºå®ƒå¾ˆæ…¢ã€‚å¯¹äºä¸€ä¸ªå¾ˆé•¿çš„åˆ—è¡¨ï¼Œè¯¥ <code>addLast</code> æ–¹æ³•å¿…é¡»éå†æ•´ä¸ªåˆ—è¡¨ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç¬¬ 2.2 ç« ä¸­çœ‹åˆ°çš„æ–¹æ³• <code>size</code> ä¸€æ ·ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•é€šè¿‡æ·»åŠ å˜é‡ <code>last</code> æ¥åŠ å¿«ä»£ç é€Ÿåº¦ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><p>è€ƒè™‘è¡¨ç¤ºä¸Šè¿°å®ç°çš„ <code>SLList</code> æ¡†å’ŒæŒ‡é’ˆå›¾ï¼Œå…¶ä¸­åŒ…æ‹¬æœ€åä¸€ä¸ªæŒ‡é’ˆã€‚å‡è®¾æˆ‘ä»¬æƒ³è¦æ”¯æŒ <code>addLast</code> ã€ <code>getLast</code> å’Œ <code>removeLast</code> æ“ä½œã€‚æ‰€ç¤ºç»“æ„æ˜¯å¦æ”¯æŒå¿«é€Ÿ <code>addLast</code> ã€ <code>getLast</code> å’Œ <code>removeLast</code> æ“ä½œï¼Ÿå¦‚æœä¸æ˜¯ï¼Œå“ªäº›æ“ä½œå¾ˆæ…¢ï¼Ÿ</p><blockquote><p><code>addLast</code> ä¼šå¾ˆå¿«ï¼Œä½† <code>getLast</code> <code>removeLast</code> ä¼šå¾ˆæ…¢ã€‚è¿™æ˜¯å› ä¸ºåœ¨åˆ é™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹åï¼Œæˆ‘ä»¬æ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥è·å–å€’æ•°ç¬¬äºŒä¸ªèŠ‚ç‚¹æ¥æ›´æ–° <code>last</code> æŒ‡é’ˆã€‚</p></blockquote><h2 id="SecondToLast"><a href="#SecondToLast" class="headerlink" title="SecondToLast"></a>SecondToLast</h2><p>ç»“æ„çš„é—®é¢˜åœ¨äºï¼Œåˆ é™¤åˆ—è¡¨ä¸­æœ€åä¸€é¡¹çš„æ–¹æ³•æœ¬èº«ä¼šå¾ˆæ…¢ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦é¦–å…ˆæ‰¾åˆ°å€’æ•°ç¬¬äºŒé¡¹ï¼Œç„¶åå°†å…¶ä¸‹ä¸€ä¸ªæŒ‡é’ˆè®¾ç½®ä¸º nullã€‚æ·»åŠ  <code>secondToLast</code> æŒ‡é’ˆä¹Ÿæ— æµäºäº‹ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬å°±éœ€è¦æ‰¾åˆ°åˆ—è¡¨ä¸­å€’æ•°ç¬¬ä¸‰é¡¹ï¼Œä»¥ç¡®ä¿ <code>secondToLast</code> åœ¨åˆ é™¤æœ€åä¸€é¡¹å <code>last</code> éµå®ˆé€‚å½“çš„ä¸å˜é‡</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><h3 id="æ·»åŠ prevæŒ‡é’ˆ"><a href="#æ·»åŠ prevæŒ‡é’ˆ" class="headerlink" title="æ·»åŠ prevæŒ‡é’ˆ"></a>æ·»åŠ prevæŒ‡é’ˆ</h3><p>è§£å†³æ­¤é—®é¢˜çš„æœ€è‡ªç„¶æ–¹æ³•æ˜¯ä¸ºæ¯ä¸ª æ·»åŠ ä¸€ä¸ªå‰ä¸€ä¸ªæŒ‡é’ˆ <code>IntNode</code> ï¼Œå³</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> IntNode prev;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">    <span class="keyword">public</span> IntNode next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬çš„åˆ—è¡¨ç°åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªé“¾æ¥ã€‚æ­¤ç±»åˆ—è¡¨çš„ä¸€ä¸ªå¸¸è§æœ¯è¯­æ˜¯â€œåŒå‘é“¾è¡¨â€ï¼Œæˆ‘ä»¬ç®€ç§°ä¸º a <code>DLList</code> ã€‚è¿™ä¸ç¬¬ 2.2 ç« ä¸­çš„å•ä¸ªé“¾è¡¨å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œåˆå <code>SLList</code> .</p><p>æ·»åŠ è¿™äº›é¢å¤–çš„æŒ‡é’ˆå°†å¯¼è‡´é¢å¤–çš„ä»£ç å¤æ‚æ€§ã€‚æ‚¨å°†åœ¨é¡¹ç›® 1 ä¸­è‡ªè¡Œæ„å»ºä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œè€Œä¸æ˜¯å¼•å¯¼æ‚¨å®Œæˆå®ƒã€‚ä¸‹é¢çš„æ¡†å›¾å’ŒæŒ‡é’ˆå›¾åˆ†åˆ«æ›´ç²¾ç¡®åœ°æ˜¾ç¤ºäº†å¤§å°ä¸º 0 å’Œå¤§å°ä¸º 2 çš„åˆ—è¡¨çš„åŒå‘é“¾è¡¨çš„å¤–è§‚ã€‚</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_basic_size_0.png" alt="dllist_basic_size_0.png"></p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_basic_size_2.png" alt="dllist_basic_size_2.png"></p><h3 id="å“¨å…µ-Sentinel-æ”¹è¿›"><a href="#å“¨å…µ-Sentinel-æ”¹è¿›" class="headerlink" title="å“¨å…µ(Sentinel )æ”¹è¿›"></a>å“¨å…µ(Sentinel )æ”¹è¿›</h3><p>åé€€æŒ‡é’ˆå…è®¸åˆ—è¡¨æ”¯æŒåœ¨æ’å®šæ—¶é—´å†…æ·»åŠ ã€è·å–å’Œåˆ é™¤åˆ—è¡¨çš„æ­£é¢å’ŒèƒŒé¢ã€‚è¿™ç§è®¾è®¡å­˜åœ¨ä¸€ä¸ªå¾®å¦™çš„é—®é¢˜ï¼Œ <code>last</code> æŒ‡é’ˆæœ‰æ—¶æŒ‡å‘å“¨å…µèŠ‚ç‚¹ï¼Œæœ‰æ—¶æŒ‡å‘çœŸå®èŠ‚ç‚¹ã€‚å°±åƒ çš„éå“¨å…µç‰ˆæœ¬ä¸€æ · <code>SLList</code> ï¼Œè¿™ä¼šå¯¼è‡´å…·æœ‰ç‰¹æ®Šæƒ…å†µçš„ä»£ç æ¯”æˆ‘ä»¬åœ¨ç¬¬ 8 æ¬¡ä¹Ÿæ˜¯æœ€åä¸€æ¬¡æ”¹è¿›åå¾—åˆ°çš„ä»£ç è¦ä¸‘é™‹å¾—å¤šã€‚ï¼ˆä½ èƒ½æƒ³åˆ°ä»€ä¹ˆ <code>DLList</code> æ–¹æ³•ä¼šæœ‰è¿™äº›ç‰¹æ®Šæƒ…å†µå—ï¼Ÿ</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/image-20240122183046374.png" alt="image-20240122183046374"></p><blockquote><p>å¯¹äºæ¯ä¸ªæ–¹æ³•æˆ‘ä»¬éƒ½è¦ç”¨ifè¯­å¥æ£€æŸ¥ä¸€ä¸‹lastæŒ‡å‘çš„æ˜¯ä¸æ˜¯å“¨å…µèŠ‚ç‚¹ï¼Œè¿™å°±å¾ˆéº»çƒ¦ã€‚</p></blockquote><p>ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å°†ç¬¬äºŒä¸ªå“¨å…µèŠ‚ç‚¹æ·»åŠ åˆ°åˆ—è¡¨çš„åé¢ã€‚è¿™å¯¼è‡´æ‹“æ‰‘å¦‚ä¸‹æ‰€ç¤ºï¼Œæ˜¾ç¤ºä¸ºæ¡†å’ŒæŒ‡é’ˆå›¾ã€‚</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_double_sentinel_size_0.png" alt="dllist_double_sentinel_size_0.png"></p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_double_sentinel_size_2.png" alt="dllist_double_sentinel_size_2.png"></p><p>å¦ä¸€ç§æ–¹æ³•æ˜¯å®ç°åˆ—è¡¨ï¼Œä½¿å…¶å‘ˆåœ†å½¢ï¼Œå‰æŒ‡é’ˆå’ŒåæŒ‡é’ˆå…±äº«åŒä¸€å“¨å…µèŠ‚ç‚¹ã€‚</p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_circular_sentinel_size_0.png" alt="dllist_circular_sentinel_size_0.png"></p><p><img src="/2024/01/22/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-5-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E9%93%BE%E8%A1%A8%E5%9F%BA%E7%A1%80%E7%9A%84%E5%88%97%E8%A1%A8-2-2-2-3/dllist_circular_sentinel_size_2.png" alt="dllist_circular_sentinel_size_2.png"></p><p>åŒå“¨å…µå’Œåœ†å½¢å“¨å…µæ–¹æ³•éƒ½æœ‰æ•ˆï¼Œå¹¶äº§ç”Ÿæ²¡æœ‰ä¸‘é™‹ç‰¹æ®Šæƒ…å†µçš„ä»£ç ï¼Œå°½ç®¡æˆ‘ä¸ªäººè®¤ä¸ºåœ†å½¢å“¨å…µæ–¹æ³•æ›´å¹²å‡€ï¼Œæ›´ç¾è§‚ã€‚æˆ‘ä»¬ä¸ä¼šè®¨è®ºè¿™äº›å®æ³›å‹ DLListç°çš„ç»†èŠ‚ï¼Œå› ä¸ºä½ å°†æœ‰æœºä¼šåœ¨é¡¹ç›® 1 ä¸­æ¢ç´¢ä¸€ä¸ªæˆ–ä¸¤ä¸ªã€‚</p><h2 id="æ³›å‹-DLList"><a href="#æ³›å‹-DLList" class="headerlink" title="æ³›å‹ DLList"></a>æ³›å‹ DLList</h2><p>è¯­æ³•ä¸€å¼€å§‹æœ‰ç‚¹å¥‡æ€ªã€‚åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨ç±»å£°æ˜ä¸­çš„ç±»åç§°ä¹‹åï¼Œåœ¨å°–æ‹¬å·å†…ä½¿ç”¨ä»»æ„å ä½ç¬¦ï¼š <code>&lt;&gt;</code> .ç„¶åï¼Œåœ¨è¦ä½¿ç”¨ä»»æ„ç±»å‹çš„ä»»ä½•ä½ç½®ï¼Œéƒ½å¯ä»¥æ”¹ç”¨è¯¥å ä½ç¬¦ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬ <code>DLList</code> ä¹‹å‰çš„å£°æ˜æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DLList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> IntNode sentinel;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> IntNode prev;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å®¹çº³ä»»ä½•ç±»å‹çš„æ³›å‹ <code>DLList</code> å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DLList</span>&lt;BleepBlorp&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> IntNode sentinel;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntNode</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> IntNode prev;</span><br><span class="line">        <span class="keyword">public</span> BleepBlorp item;</span><br><span class="line">        <span class="keyword">public</span> IntNode next;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œï¼Œ<code>BleepBlorp</code>åªæ˜¯æˆ‘ç¼–é€ çš„ä¸€ä¸ªåå­—ï¼Œä½ å¯ä»¥ç”¨å¤§å¤šæ•°ä½ å¯èƒ½æƒ³ç”¨çš„ä»»ä½•å…¶ä»–åå­—æ¥ä»£æ›¿ï¼Œ <code>BleepBlorp</code> æ¯”å¦‚ <code>GloopGlop</code> ã€ã€ <code>Horse</code> <code>TelbudorphMulticulus</code> æˆ–å…¶ä»–ä»€ä¹ˆã€‚</p><p>ç°åœ¨æˆ‘ä»¬å·²ç»å®šä¹‰äº†è¯¥ç±»çš„æ³›å‹ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»ä½¿ç”¨ç‰¹æ®Šè¯­æ³•æ¥å®ä¾‹åŒ–è¯¥ <code>DLList</code> ç±»ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨å£°æ˜æœŸé—´å°†æ‰€éœ€çš„ç±»å‹æ”¾åœ¨å°–æ‹¬å·å†…ï¼Œå¹¶åœ¨å®ä¾‹åŒ–æœŸé—´ä½¿ç”¨ç©ºå°–æ‹¬å·ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DLList&lt;String&gt; d2 = <span class="keyword">new</span> <span class="title class_">DLList</span>&lt;&gt;(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">d2.addLast(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure><p>ç”±äºæ³›å‹ä»…é€‚ç”¨äºå¼•ç”¨ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½å°†åŸè¯­æ”¾åœ¨ <code>int</code> å°–æ‹¬å·å†…æˆ– <code>double</code> å°–æ‹¬å·å†…ï¼Œä¾‹å¦‚ <code>&lt;int&gt;</code> .å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸå§‹ç±»å‹çš„å‚è€ƒç‰ˆæœ¬ï¼Œåœ¨ case çš„æƒ…å†µä¸‹ <code>int</code> æ˜¯ <code>Integer</code> ï¼Œä¾‹å¦‚</p><p>å…³äºä½¿ç”¨æ³›å‹ç±»å‹è¿˜æœ‰å…¶ä»–ç»†å¾®å·®åˆ«ï¼Œä½†æˆ‘ä»¬ä¼šå°†å®ƒä»¬æ¨è¿Ÿåˆ°æœ¬ä¹¦çš„åé¢ä¸€ç« ï¼Œå±Šæ—¶æ‚¨æœ‰æ›´å¤šæœºä¼šè‡ªå·±å°è¯•å®ƒä»¬ã€‚ç°åœ¨ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹ç»éªŒæ³•åˆ™ï¼š</p><ul><li>åœ¨<strong>å®ç°</strong>æ•°æ®ç»“æ„çš„ .java æ–‡ä»¶ä¸­ï¼Œä»…åœ¨æ–‡ä»¶æœ€é¡¶éƒ¨çš„ç±»åä¹‹åæŒ‡å®šä¸€æ¬¡æ³›å‹ç±»å‹åã€‚</li><li>åœ¨å…¶ä»–ä½¿ç”¨æ•°æ®ç»“æ„çš„ .java æ–‡ä»¶ä¸­ï¼Œåœ¨å£°æ˜æœŸé—´æŒ‡å®šæ‰€éœ€çš„ç‰¹å®šç±»å‹ï¼Œå¹¶åœ¨å®ä¾‹åŒ–æœŸé—´ä½¿ç”¨ç©ºè±å½¢è¿ç®—ç¬¦ã€‚</li><li>å¦‚æœéœ€è¦åœ¨åŸºå…ƒç±»å‹ä¸Šå®ä¾‹åŒ–æ³›å‹ï¼Œè¯·ä½¿ç”¨ <code>Integer</code>  ã€ <code>Character</code> ã€<code>Long</code> ã€ <code>Short</code> ã€<code>Byte</code>ã€ <code>Double</code> ã€<code>Boolean</code> æˆ– <code>Float</code> ä»£æ›¿å…¶åŸºå…ƒç­‰æ•ˆé¡¹ã€‚</li></ul><p>æ¬¡è¦ç»†èŠ‚ï¼šæ‚¨ä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–æ—¶åœ¨å°–æ‹¬å·å†…å£°æ˜ç±»å‹ï¼Œå°½ç®¡è¿™ä¸æ˜¯å¿…éœ€çš„ï¼Œåªè¦æ‚¨è¿˜åœ¨åŒä¸€è¡Œä¸Šå£°æ˜ä¸€ä¸ªå˜é‡å³å¯ã€‚æ¢å¥è¯è¯´ï¼Œä¸‹é¢çš„ä»£ç è¡Œæ˜¯å®Œå…¨æœ‰æ•ˆçš„ï¼Œå³ä½¿å³ä¾§çš„ <code>Integer</code> ä»£ç æ˜¯å¤šä½™çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DLList&lt;Integer&gt; d1 = <span class="keyword">new</span> <span class="title class_">DLList</span>&lt;Integer&gt;(<span class="number">5</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(å››)--Reading2.1-åˆ—è¡¨-æµ·è±¡ä¹‹è°œ</title>
      <link href="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/"/>
      <url>/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/</url>
      
        <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯æµ·è±¡ä¹‹è°œ"><a href="#ä»€ä¹ˆæ˜¯æµ·è±¡ä¹‹è°œ" class="headerlink" title="ä»€ä¹ˆæ˜¯æµ·è±¡ä¹‹è°œ?"></a>ä»€ä¹ˆæ˜¯æµ·è±¡ä¹‹è°œ?</h1><p>å°è¯•é¢„æµ‹å½“æˆ‘ä»¬è¿è¡Œä¸‹é¢çš„ä»£ç æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æ›´æ”¹ä¸º b ä¼šå½±å“ a å—ï¼Œæ›´æ”¹ä¸º x ä¼šå½±å“ y å—ï¼Ÿæç¤ºï¼šå¦‚æœä½ æ¥è‡ª Pythonï¼ŒJava ä¹Ÿæœ‰ç›¸åŒçš„è¡Œä¸ºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PollQuestions</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Walrus</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Walrus</span>(<span class="number">1000</span>, <span class="number">8.3</span>);</span><br><span class="line">        Walrus b;</span><br><span class="line">        b = a;</span><br><span class="line">        b.weight = <span class="number">5</span>;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">        System.out.println(b);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="type">int</span> y;</span><br><span class="line">        y = x;</span><br><span class="line">        x = <span class="number">2</span>;</span><br><span class="line">        System.out.println(<span class="string">&quot;x is: &quot;</span> + x);</span><br><span class="line">        System.out.println(<span class="string">&quot;y is: &quot;</span> + y);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Walrus</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">int</span> weight;</span><br><span class="line">        <span class="keyword">public</span> <span class="type">double</span> tuskSize;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Walrus</span><span class="params">(<span class="type">int</span> w, <span class="type">double</span> ts)</span> &#123;</span><br><span class="line">            weight = w;</span><br><span class="line">            tuskSize = ts;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> String.format(<span class="string">&quot;weight: %d, tusk size: %.2f&quot;</span>, weight, tuskSize);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ:"></a><strong>ç­”æ¡ˆ:</strong></h2><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/image-20240120023307369.png" alt="image-20240120023307369"></p><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/image-20240120024122499.png" alt="image-20240120024122499"></p><h1 id="ä½"><a href="#ä½" class="headerlink" title="ä½"></a>ä½</h1><p>è®¡ç®—æœºä¸­çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä»¥ 1 å’Œ 0 çš„åºåˆ—å½¢å¼å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ä¸€äº›ä¾‹å­ï¼š</p><ul><li>72 é€šå¸¸å­˜å‚¨ä¸º 01001000</li><li>205.75 é€šå¸¸å­˜å‚¨ä¸º 01000011 01001101 11000000 00000000</li><li>å­—æ¯ H é€šå¸¸å­˜å‚¨ä¸º 01001000ï¼ˆä¸ 72 ç›¸åŒï¼‰</li><li>çœŸå®å€¼é€šå¸¸å­˜å‚¨ä¸º00000001</li></ul><p>ä¸€ä¸ªæœ‰è¶£çš„è§‚å¯Ÿç»“æœæ˜¯ï¼Œ72 å’Œ H éƒ½å­˜å‚¨ä¸º 01001000ã€‚è¿™å°±æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼šä¸€æ®µ Java ä»£ç å¦‚ä½•çŸ¥é“å¦‚ä½•è§£é‡Š 01001000ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯<strong>é€šè¿‡ç±»å‹</strong></p><h1 id="å£°æ˜å˜é‡ï¼ˆç®€ä½“ï¼‰"><a href="#å£°æ˜å˜é‡ï¼ˆç®€ä½“ï¼‰" class="headerlink" title="å£°æ˜å˜é‡ï¼ˆç®€ä½“ï¼‰"></a>å£°æ˜å˜é‡ï¼ˆç®€ä½“ï¼‰</h1><p>æ‚¨å¯ä»¥å°†è®¡ç®—æœºè§†ä¸ºåŒ…å«å¤§é‡ç”¨äºå­˜å‚¨ä¿¡æ¯çš„å†…å­˜ä½ï¼Œæ¯ä¸ªå†…å­˜ä½éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„åœ°å€ã€‚ç°ä»£è®¡ç®—æœºå¯ä»¥ä½¿ç”¨æ•°åäº¿ä¸ªè¿™æ ·çš„æ¯”ç‰¹ã€‚</p><p>å½“ä½ å£°æ˜æŸç§ç±»å‹çš„å˜é‡æ—¶ï¼ŒJava ä¼šæ‰¾åˆ°ä¸€ä¸ªè¿ç»­çš„å—ï¼Œè¯¥å—çš„ä½æ°å¥½è¶³å¤Ÿå®¹çº³è¯¥ç±»å‹çš„äº‹ç‰©ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå£°æ˜ä¸€ä¸ª intï¼Œåˆ™ä¼šå¾—åˆ°ä¸€ä¸ª 32 ä½çš„å—ã€‚å¦‚æœå£°æ˜ä¸€ä¸ªå­—èŠ‚ï¼Œåˆ™ä¼šå¾—åˆ°ä¸€ä¸ª 8 ä½çš„å—ã€‚Java ä¸­çš„æ¯ç§æ•°æ®ç±»å‹éƒ½åŒ…å«ä¸åŒæ•°é‡çš„ä½ã€‚åœ¨è¿™ä¸ªç±»ä¸­ï¼Œç¡®åˆ‡çš„æ•°å­—å¯¹æˆ‘ä»¬æ¥è¯´å¹¶ä¸æ˜¯å¾ˆé‡è¦ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿çš„æ¯”å–»ï¼Œæˆ‘ä»¬å°†å…¶ä¸­ä¸€ä¸ªå—ç§°ä¸ºæ¯”ç‰¹çš„â€œç›’å­â€ã€‚</p><p>é™¤äº†ç•™å‡ºå†…å­˜ä¹‹å¤–ï¼ŒJava è§£é‡Šå™¨è¿˜åœ¨å†…éƒ¨è¡¨ä¸­åˆ›å»ºä¸€ä¸ªæ¡ç›®ï¼Œè¯¥æ¡ç›®å°†æ¯ä¸ªå˜é‡åç§°æ˜ å°„åˆ°æ¡†ä¸­ç¬¬ä¸€ä¸ªä½çš„ä½ç½®ã€‚</p><p>ä¾‹å¦‚ï¼Œå¦‚æœå£°æ˜ <code>int x</code> äº† å’Œ <code>double y</code> ï¼Œåˆ™ Java å¯èƒ½ä¼šå†³å®šä½¿ç”¨è®¡ç®—æœºå†…å­˜çš„ 352 åˆ° 384 ä½æ¥å­˜å‚¨ xï¼Œå¹¶ä½¿ç”¨ 20800 åˆ° 20864 ä½æ¥å­˜å‚¨ yã€‚ç„¶åï¼Œè§£é‡Šå™¨å°†è®°å½• int x ä»ä½ 352 å¼€å§‹ï¼Œy ä»ä½ 20800 å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œä»£ç åï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">double</span> y;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æœ€ç»ˆä¼šå¾—åˆ°å°ºå¯¸ä¸º 32 å’Œ 64 çš„ç›’å­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/x_and_y_empty_bitwise.png" alt="x_and_y_empty_bitwise"></p><p>å£°æ˜å˜é‡æ—¶ï¼ŒJava ä¸ä¼šå°†ä»»ä½•å†…å®¹å†™å…¥ä¿ç•™æ¡†ä¸­ã€‚æ¢å¥è¯è¯´ï¼Œæ²¡æœ‰é»˜è®¤å€¼ã€‚å› æ­¤ï¼ŒJava ç¼–è¯‘å™¨ä¼šé˜»æ­¢æ‚¨ä½¿ç”¨å˜é‡ï¼Œç›´åˆ°ä½¿ç”¨ <code>=</code> è¿ç®—ç¬¦å°†ä½å¡«å……åˆ°æ¡†ä¸­ã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œæˆ‘é¿å…åœ¨ä¸Šå›¾çš„æ¡†ä¸­æ˜¾ç¤ºä»»ä½•ä½ã€‚</p><p>å½“æ‚¨ä¸ºå†…å­˜ç›’èµ‹å€¼æ—¶ï¼Œå®ƒå°†å¡«å……æ‚¨æŒ‡å®šçš„ä½ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹è¡Œï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x = -<span class="number">1431195969</span>;</span><br><span class="line">y = <span class="number">567213.112</span>;</span><br></pre></td></tr></table></figure><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/x_and_y_empty_filled.png" alt="x_and_y_empty_filled.png"></p><h2 id="ç®€åŒ–çš„æ¡†è¡¨ç¤ºæ³•"><a href="#ç®€åŒ–çš„æ¡†è¡¨ç¤ºæ³•" class="headerlink" title="ç®€åŒ–çš„æ¡†è¡¨ç¤ºæ³•"></a>ç®€åŒ–çš„æ¡†è¡¨ç¤ºæ³•</h2><p>è™½ç„¶æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­ä½¿ç”¨çš„æ¡†è¡¨ç¤ºæ³•å¯¹äºç†è§£å¼•æ“ç›–ä¸‹å‘ç”Ÿçš„äº‹æƒ…éå¸¸æœ‰ç”¨ï¼Œä½†å®ƒå¯¹å®é™…ç›®çš„æ²¡æœ‰ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“å¦‚ä½•è§£é‡ŠäºŒè¿›åˆ¶ä½ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å°†ç”¨äººç±»å¯è¯»çš„ç¬¦å·æ¥ç¼–å†™å®ƒä»¬ï¼Œè€Œä¸æ˜¯ç”¨äºŒè¿›åˆ¶æ–‡ä»¶ç¼–å†™å†…å­˜ç›’å†…å®¹ã€‚æˆ‘ä»¬å°†åœ¨è¯¾ç¨‹çš„å…¶ä½™éƒ¨åˆ†è¿™æ ·åšã€‚ä¾‹å¦‚ï¼Œåœ¨æ‰§è¡Œä»¥ä¸‹æ“ä½œåï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">double</span> y;</span><br><span class="line">x = -<span class="number">1431195969</span>;</span><br><span class="line">y = <span class="number">567213.112</span>;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ç§°ä¹‹ä¸ºç®€åŒ–æ¡†è¡¨ç¤ºæ³•æ¥è¡¨ç¤ºç¨‹åºç¯å¢ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/x_and_y_simplified_box_notation.png" alt="x_and_y_simplified_box_notation.png"></p><h1 id="é»„é‡‘å¹³ç­‰æ³•åˆ™-ï¼ˆGRoEï¼‰"><a href="#é»„é‡‘å¹³ç­‰æ³•åˆ™-ï¼ˆGRoEï¼‰" class="headerlink" title="é»„é‡‘å¹³ç­‰æ³•åˆ™ ï¼ˆGRoEï¼‰"></a>é»„é‡‘å¹³ç­‰æ³•åˆ™ ï¼ˆGRoEï¼‰</h1><p>ç°åœ¨æœ‰äº†ç®€åŒ–çš„ç›’å­ç¬¦å·ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥å¼€å§‹è§£å¼€æµ·è±¡ä¹‹è°œäº†ã€‚</p><p>äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬çš„ Mystery æœ‰ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼šå½“ä½ ç¼–å†™ <code>y = x</code> æ—¶ï¼Œä½ å‘Šè¯‰ Java è§£é‡Šå™¨å°† x ä¸­çš„<strong>ä½</strong>å¤åˆ¶åˆ° y ä¸­ã€‚åœ¨ç†è§£æˆ‘ä»¬çš„æµ·è±¡ä¹‹è°œæ—¶ï¼Œè¿™æ¡å¹³ç­‰çš„é»„é‡‘æ³•åˆ™ ï¼ˆGRoEï¼‰ æ˜¯æ‰€æœ‰çœŸç†çš„æ ¹æºã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> y;</span><br><span class="line">y = x;</span><br><span class="line">x = <span class="number">2</span>;</span><br><span class="line">System.out.println(<span class="string">&quot;x is: &quot;</span> + x);</span><br><span class="line">System.out.println(<span class="string">&quot;y is: &quot;</span> + y);</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼ŒJavaçš„å¤åˆ¶æ“ä½œæ˜¯å¤åˆ¶<strong>ä½</strong></p><h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p>ä¸Šé¢ï¼Œæˆ‘ä»¬è¯´äº† 8 ç§åŸå§‹ç±»å‹ï¼šbyteã€shortã€intã€longã€floatã€doubleã€booleanã€charã€‚å…¶ä»–æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬æ•°ç»„ï¼Œéƒ½ä¸æ˜¯åŸå§‹ç±»å‹ï¼Œè€Œæ˜¯ <code>reference type</code> .</p><p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>new</code> ï¼ˆä¾‹å¦‚ Dogã€Walrusã€Planetï¼‰å®ä¾‹åŒ–ä¸€ä¸ª Object æ—¶ï¼ŒJava é¦–å…ˆä¸ºç±»çš„æ¯ä¸ªå®ä¾‹å˜é‡åˆ†é…ä¸€ä¸ªæ¡†ï¼Œå¹¶ç”¨é»˜è®¤å€¼å¡«å……å®ƒä»¬ã€‚ç„¶åï¼Œæ„é€ å‡½æ•°é€šå¸¸ï¼ˆä½†å¹¶éæ€»æ˜¯ï¼‰ç”¨å…¶ä»–å€¼å¡«å……æ¯ä¸ªæ¡†ã€‚</p><blockquote><p>å¼•ç”¨ç±»å‹å¯èƒ½éƒ½éœ€è¦newï¼Œè¿™å¯èƒ½æ„å‘³ç€å¼•ç”¨å˜é‡å£°æ˜çš„å…¶å®æ˜¯ç±»ä¼¼äºcppä¸­çš„æŒ‡é’ˆ?</p></blockquote><h3 id="å¼•ç”¨å˜é‡å£°æ˜"><a href="#å¼•ç”¨å˜é‡å£°æ˜" class="headerlink" title="å¼•ç”¨å˜é‡å£°æ˜"></a>å¼•ç”¨å˜é‡å£°æ˜</h3><p>å½“æˆ‘ä»¬å£°æ˜ä»»ä½•å¼•ç”¨ç±»å‹ï¼ˆWalrusã€Dogã€Planetã€æ•°ç»„ç­‰ï¼‰çš„å˜é‡æ—¶ï¼Œæ— è®ºä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼ŒJava éƒ½ä¼šåˆ†é…ä¸€ä¸ª 64 ä½çš„ç›’å­ã€‚</p><p>ä¹ä¸€çœ‹ï¼Œè¿™ä¼¼ä¹å¯¼è‡´äº†æµ·è±¡æ‚–è®ºã€‚ä¸Šä¸€èŠ‚ä¸­çš„ Walrus éœ€è¦è¶…è¿‡ 64 ä½æ¥å­˜å‚¨ã€‚æ­¤å¤–ï¼Œæ— è®ºå¯¹è±¡çš„ç±»å‹å¦‚ä½•ï¼Œæˆ‘ä»¬åªèƒ½è·å¾— 64 ä½æ¥å­˜å‚¨å®ƒï¼Œè¿™ä¼¼ä¹å¾ˆå¥‡æ€ªã€‚</p><p>ä½†æ˜¯ï¼Œé€šè¿‡ä»¥ä¸‹ä¿¡æ¯å¯ä»¥è½»æ¾è§£å†³æ­¤é—®é¢˜ï¼š64 ä½æ¡†ä¸åŒ…å«æœ‰å…³æµ·è±¡çš„æ•°æ®ï¼Œè€Œæ˜¯å†…å­˜ä¸­æµ·è±¡çš„åœ°å€ã€‚</p><blockquote><p>ç±»ä¼¼cppä¸­çš„æŒ‡é’ˆï¼ŒæŒ‡é’ˆå˜é‡å­˜å‚¨çš„æ˜¯æŒ‡é’ˆæŒ‡å‘çš„åœ°å€ï¼Œé€šå¸¸åªæœ‰4ä¸ªå­—èŠ‚ï¼›è€ŒæŒ‡é’ˆæ‰€æŒ‡å‘çš„é‚£ä¸ªåœ°å€ä¸ä¸€å®šå­˜å‚¨äº†4ä¸ªå­—èŠ‚ã€‚</p></blockquote><h3 id="æ¡†å’ŒæŒ‡é’ˆè¡¨ç¤ºæ³•"><a href="#æ¡†å’ŒæŒ‡é’ˆè¡¨ç¤ºæ³•" class="headerlink" title="æ¡†å’ŒæŒ‡é’ˆè¡¨ç¤ºæ³•"></a>æ¡†å’ŒæŒ‡é’ˆè¡¨ç¤ºæ³•</h3><p>å’Œä»¥å‰ä¸€æ ·ï¼Œå¾ˆéš¾è§£é‡Šå¼•ç”¨å˜é‡ä¸­çš„ä¸€å †ä½ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¸ºå¼•ç”¨å˜é‡åˆ›å»ºä¸€ä¸ªç®€åŒ–çš„æ¡†è¡¨ç¤ºæ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><ul><li>å¦‚æœä¸€ä¸ªåœ°å€å…¨ä¸ºé›¶ï¼Œæˆ‘ä»¬å°†ç”¨ null è¡¨ç¤ºå®ƒã€‚</li><li>éé›¶åœ°å€å°†ç”±æŒ‡å‘å¯¹è±¡å®ä¾‹åŒ–çš„ç®­å¤´è¡¨ç¤ºã€‚</li></ul><p>è¿™æœ‰æ—¶ä¹Ÿç§°ä¸ºâ€œæ¡†å’ŒæŒ‡é’ˆâ€è¡¨ç¤ºæ³•ã€‚</p><p>å¯¹äºä¸Šä¸€èŠ‚ä¸­çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†æœ‰ï¼š</p><p><img src="/2024/01/20/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-4-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading2-1-%E6%95%B0%E7%BB%84/someWalrus_simplified_bit_notation.png" alt="someWalrus_simplified_bit_notation.png"></p><h2 id="å‚æ•°ä¼ é€’"><a href="#å‚æ•°ä¼ é€’" class="headerlink" title="å‚æ•°ä¼ é€’"></a>å‚æ•°ä¼ é€’</h2><p>å½“æ‚¨å°†å‚æ•°ä¼ é€’ç»™å‡½æ•°æ—¶ï¼Œæ‚¨ä¹Ÿåªæ˜¯åœ¨å¤åˆ¶ä½ã€‚æ¢è¨€ä¹‹ï¼ŒGRoE ä¹Ÿé€‚ç”¨äºå‚æ•°ä¼ é€’ã€‚å¤åˆ¶ä½é€šå¸¸ç§°ä¸ºâ€œæŒ‰å€¼ä¼ é€’â€ã€‚åœ¨ Java ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯æŒ‰å€¼ä¼ é€’ã€‚</p><p>ä¾‹å¦‚ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">average</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a + b) / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‡è®¾æˆ‘ä»¬è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5.5</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">10.5</span>;</span><br><span class="line">    <span class="type">double</span> <span class="variable">avg</span> <span class="operator">=</span> average(x, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®é™…ä¸Šæˆ‘ä»¬æ˜¯å°†xï¼Œyçš„å€¼æ‹·è´ç»™äº†a, bã€‚</p><h1 id="åˆ—è¡¨çš„å®ä¾‹åŒ–"><a href="#åˆ—è¡¨çš„å®ä¾‹åŒ–" class="headerlink" title="åˆ—è¡¨çš„å®ä¾‹åŒ–"></a>åˆ—è¡¨çš„å®ä¾‹åŒ–</h1><p>å¦‚ä¸Šæ‰€è¿°ï¼Œå­˜å‚¨æ•°ç»„çš„å˜é‡æ˜¯å¼•ç”¨å˜é‡ï¼Œå°±åƒä»»ä½•å…¶ä»–å˜é‡ä¸€æ ·ã€‚ä¾‹å¦‚ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹å£°æ˜ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] x;</span><br><span class="line">Planet[] planets;</span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ä¸ªå£°æ˜éƒ½åˆ›å»ºäº† 64 ä½çš„å†…å­˜ç›’ã€‚ <code>x</code> åªèƒ½ä¿å­˜æ•°ç»„çš„åœ°å€ï¼Œå¹¶ä¸” <code>planets</code> åªèƒ½ä¿å­˜ <code>Planet</code> <code>int</code> æ•°ç»„çš„åœ°å€ã€‚</p><p>å®ä¾‹åŒ–æ•°ç»„ä¸å®ä¾‹åŒ–å¯¹è±¡éå¸¸ç›¸ä¼¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 5 çš„æ•´æ•°æ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = new int[]&#123;0, 1, 2, 95, 4&#125;;</span><br></pre></td></tr></table></figure><p>ç„¶åï¼Œå…³é”®å­— <code>new</code> åˆ›å»º 5 ä¸ªæ¡†ï¼Œæ¯ä¸ªæ¡† 32 ä½ï¼Œå¹¶è¿”å›æ•´ä¸ªå¯¹è±¡çš„åœ°å€ä»¥åˆ†é…ç»™ xã€‚</p><h1 id="ç ´ç¢çš„è¢«è¤¥æ³•åˆ™"><a href="#ç ´ç¢çš„è¢«è¤¥æ³•åˆ™" class="headerlink" title="ç ´ç¢çš„è¢«è¤¥æ³•åˆ™"></a>ç ´ç¢çš„è¢«è¤¥æ³•åˆ™</h1><p><a href="https://readit.site/a/9amjk">https://readit.site/a/9amjk</a></p><p><a href="https://mathwithbaddrawings.com/2015/04/08/the-math-ceiling-wheres-your-cognitive-breaking-point/">æ•°å­¦å¤©èŠ±æ¿ï¼šä½ çš„è®¤çŸ¥çªç ´ç‚¹åœ¨å“ªé‡Œï¼Ÿâ€“ ç³Ÿç³•çš„å›¾çº¸æ•°å­¦ â€” The Math Ceiling: Whereâ€™s your cognitive breaking point? â€“ Math with Bad Drawings</a></p><p>æˆ‘æ„Ÿè§‰è¿™ä¸ªå¾ˆæœ‰æ„æ€:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">åœ¨å¤§å­¦é‡Œï¼Œæˆ‘å’Œæˆ‘çš„å®¤å‹ä»ä¸€äº›æœ‹å‹é‚£é‡Œä¹°äº†ä¸€ä¸ªäºŒæ‰‹è¢«è¤¥ã€‚ä»–ä»¬ä½åœ¨ä¸€æ¥¼;æˆ‘ä»¬ä½åœ¨å››æ¥¼ã€‚ä»–ä»¬å¾ˆå¥½å¿ƒï¼Œä»–ä»¬å¸®æˆ‘ä»¬æŠ¬ä¸Šæ¥¼æ¢¯ã€‚</span><br><span class="line">å½“ä»–ä»¬ç™»ä¸Šä¸‰æ¥¼çš„å¹³å°æ—¶ï¼Œä»–ä»¬å¬åˆ°äº†ä¸€å£°è£‚ç¼ã€‚ä¸€æ ¹å°å°çš„é‡‘å±æ£’ä»è¢«è¤¥ä¸ŠæŠ˜æ–­äº†ã€‚æˆ‘ä»¬éƒ½æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œä½†ç”šè‡³ä¸çŸ¥é“è¿™ä»¶ä½œå“æ˜¯ä»å“ªé‡Œæ¥çš„ã€‚ç”±äºè¢«è¤¥çœ‹èµ·æ¥å¾ˆå¥½ï¼Œæˆ‘ä»¬åªæ˜¯è€¸äº†è€¸è‚©ã€‚</span><br><span class="line">åœ¨æˆ‘ä»¬çš„æˆ¿é—´é‡Œå‘†äº†ä¸€ä¸ªæ˜ŸæœŸåï¼Œè¢«è¤¥å¼€å§‹ä¸‹å‚ã€‚â€œå®ƒæ€»æ˜¯è¿™æ ·å—ï¼Ÿâ€æˆ‘ä»¬äº’ç›¸é—®ã€‚</span><br><span class="line">ä¸€ä¸ªæœˆåï¼Œå®ƒå°´å°¬åœ°ä¸‹å‚äº†ã€‚ååœ¨æœ€åï¼Œæ²™å‘çš„æ›²ç‡ä¼šæŠŠä½ ï¼ˆå’Œå…¶ä»–äººï¼‰æ‰”è¿›ä¸€ä¸ªä¸­å¤®çš„çŒªå †é‡Œã€‚</span><br><span class="line">åˆ°å­¦æœŸç»“æŸæ—¶ï¼Œå®ƒå·²ç»å€’åœ¨å°˜åœŸé£æ‰¬çš„å®¿èˆåœ°æ¿ä¸Šï¼Œè¿™æ˜¯æ›¾ç»ç¹è£çš„è¢«è¤¥çš„ç ´ç¢éª¨æ¶ã€‚</span><br><span class="line">ç°åœ¨ï¼Œå®œå®¶å®¶å…·æ˜¯å®¢å…çš„æœè‡ï¼šå‡ºäº†åçš„çŸ­å‘½ã€‚æ¯«æ— ç–‘é—®ï¼Œæˆ‘ä»¬çš„è¢«è¤¥å¯¿å‘½æ˜¯æœ‰ä¸Šé™çš„ï¼Œä¹Ÿè®¸æ˜¯ä¸‰å››å¹´ã€‚ä½†è¿™ä¸€ä¸ªåªæ´»äº†å…«ä¸ªæœˆã€‚</span><br><span class="line">äº‹åçœ‹æ¥ï¼Œå¾ˆæ˜æ˜¾ï¼Œç ´ç¢çš„ç¢ç‰‡ç»å¯¹è‡³å…³é‡è¦ã€‚æ²¡æœ‰å®ƒè¢«è¤¥ä¼¼ä¹å¾ˆå¥½ã€‚ä½†æ—¥å¤ä¸€æ—¥ï¼Œéšç€æ¯ä¸€ä¸ªæ–°çš„å±è‚¡ï¼Œé‡é‡éƒ½å‹åœ¨ç»“æ„çš„æŸäº›éƒ¨åˆ†ä¸Šï¼Œä»æ¥éƒ½ä¸æ„å‘³ç€ç‹¬è‡ªæ‰¿å—è´Ÿè½½ã€‚æ¡†æ¶å˜å¾—æ‰­æ›²ã€‚å‹åŠ›ä¸å¯æŒç»­åœ°å¢åŠ ã€‚è¢«è¤¥çš„å†…éƒ¨æ—¶é’Ÿé»˜é»˜åœ°æ»´ç­”ä½œå“ï¼Œç›´åˆ°ç¼ºä¹æ”¯æŒè¢«è¯æ˜æ˜¯å‹å€’æ€§çš„ï¼Œæ•´ä¸ªäº‹æƒ…éƒ½å´©æºƒäº†ã€‚</span><br><span class="line">è€Œä¸”ï¼Œå¯æ‚²çš„æ˜¯ï¼Œæ•°å­¦è¯¾ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</span><br><span class="line">å‡è®¾ä½ æ­£åœ¨è¯»å…«å¹´çº§ã€‚æ‚¨å¯ä»¥ä»¥å®Œç¾çš„æµåŠ¨æ€§å’Œç²¾åº¦ç»˜åˆ¶çº¿æ€§æ–¹ç¨‹ã€‚æ‚¨å¯ä»¥è®¡ç®—å®ƒä»¬çš„æ–œç‡ã€è¯†åˆ«ç‚¹å¹¶ç”Ÿæˆå¹³è¡Œçº¿å’Œå‚ç›´çº¿ã€‚</span><br><span class="line">ä½†æ˜¯ï¼Œå¦‚æœä½ ç¼ºå°‘ä¸€ä¸ªç®€å•çš„ç†è§£â€”â€”è¿™äº›å›¾åªæ˜¯æ»¡è¶³æ–¹ç¨‹çš„ x-y å¯¹â€”â€”é‚£ä¹ˆä½ å°±æ˜¯ä¸€ä¸ªç ´ç¢çš„è¢«è¤¥ã€‚ä½ é”™è¿‡äº†æœªæ¥å­¦ä¹ è‡³å…³é‡è¦çš„ä¸€å—ã€‚äºŒæ¬¡å‡½æ•°ä¼šå›°æ‰°ä½ ;æ­£å¼¦æ›²çº¿æ°¸è¿œä¸ä¼šæœ‰æ„ä¹‰;ä½ å¯èƒ½ä¼šåœ¨å¾®ç§¯åˆ†ä¹‹åä¿é‡Šï¼Œå®‰æ…°è‡ªå·±ï¼Œâ€œå¥½å§ï¼Œè‡³å°‘æˆ‘çš„ä¸Šé™æ¯”ä¸€äº›äººé«˜ã€‚</span><br><span class="line">ä½ å¯èƒ½ä¼šé—®ï¼Œâ€œæ—¢ç„¶æˆ‘ç°åœ¨å¾ˆå¥½ï¼Œéš¾é“æˆ‘ä¸èƒ½åœ¨ä»¥åçœŸæ­£éœ€è¦çš„æ—¶å€™æ·»åŠ ç¼ºå¤±çš„éƒ¨åˆ†å—ï¼Ÿæœ‰æ—¶ï¼Œæ˜¯çš„ã€‚ä½†è¿™è¦å›°éš¾å¾—å¤šã€‚ä½ ç°åœ¨å·²ç»èŠ±äº†å¥½å‡ å¹´æ—¶é—´æ²¡æœ‰è¿™ä¸ªå…³é”®çš„éƒ¨åˆ†ã€‚ä½ å·²ç»å¼€å‘äº†æ·å¾„å’Œé›¶æ•²ç¢æ‰“çš„æ–¹æ³•æ¥åº¦è¿‡éš¾å…³ã€‚è¿™äº›å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œä½†å®ƒä»¬æ‰­æ›²äº†æ¡†æ¶ï¼Œç°åœ¨ä½ æ¥äº†ã€‚ä¸ºäº†ç»§ç»­å‰è¿›ï¼Œä½ å¿…é¡»å¿˜è®°ä½ çš„å˜é€šæ–¹æ³•--æœ‰æ•ˆåœ°å°†è¢«è¤¥å¼¯æ›²å›åŸæ¥çš„å½¢çŠ¶--ç„¶åæ‰èƒ½ç»§ç»­ã€‚ä½†æ˜¯ï¼Œæ”¾å¼ƒè®©ä½ èµ°åˆ°è¿™ä¸€æ­¥çš„ç­–ç•¥å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</span><br><span class="line">ç¨åæ·»åŠ ç¼ºå¤±çš„éƒ¨åˆ†æ„å‘³ç€è¦ç­‰åˆ°æŸåå·²ç»å¼€å§‹ï¼Œå¹¶ä¸”å¾ˆéš¾æŒ½å›ã€‚</span><br><span class="line">æˆ‘ç›¸ä¿¡ï¼Œè¿™æ˜¯è®¸å¤šå­¦ç”Ÿæ‰€ç»å†çš„å¤©èŠ±æ¿ã€‚è¿™ä¸æ˜¯ä»–ä»¬ç¥ç»ç—…å­¦çš„å›ºæœ‰å±€é™æ€§ã€‚è¿™æ˜¯æˆ‘ä»¬åˆ›é€ çš„ä¸œè¥¿ã€‚æˆ‘ä»¬é€šè¿‡è¨€è¯­æˆ–è¡ŒåŠ¨è¯´ï¼šâ€œä½ ä¸æ˜ç™½ä¹Ÿæ²¡å…³ç³»ã€‚åªéœ€æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼Œå¹¶åœ¨åé¢æ£€æŸ¥æ‚¨çš„ç­”æ¡ˆã€‚æˆ‘ä»¬é€šè¿‡è¯´â€œåªæœ‰èªæ˜çš„äººæ‰èƒ½å¾—åˆ°å®ƒ;è‡³äºå…¶ä½™çš„ï¼Œæˆ‘åªæƒ³ç¡®ä¿ä»–ä»¬èƒ½åšåˆ°ã€‚æˆ‘ä»¬é€šè¿‡è¯´ï¼Œâ€œå¥½å§ï¼Œä»–ä»¬ç°åœ¨ä¸æ˜ç™½ï¼Œä½†ä»–ä»¬æœ€ç»ˆä¼šè‡ªå·±å¼„æ¸…æ¥šã€‚</span><br><span class="line">è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æˆåŠŸåœ°æŠŠè¢«è¤¥å¼„ä¸Šæ¥¼æ¢¯ã€‚ä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šä¸¢å¤±ä¸€äº›ä¸œè¥¿ã€‚åœ¨æ²¡æœ‰å…³é”®ç†è§£çš„æƒ…å†µä¸‹å°†æˆ‘ä»¬çš„å­¦ç”Ÿé€ä¸Šå‰æ–¹ï¼Œå°±åƒåœ¨æ²¡æœ‰æ›¿æ¢å¼¹è¯çš„æƒ…å†µä¸‹å°†ä»–ä»¬é€ä¸Šæˆ˜åœºä¸€æ ·ã€‚å½“ç„¶ï¼Œä»–ä»¬ä¼šå‘å°„å‡ å‘å­å¼¹ï¼Œä½†å½“ä»–ä»¬æ„è¯†åˆ°ç¼ºå°‘ä¸€äº›ä¸œè¥¿æ—¶ï¼Œæ¢å¤ä¸ºæ—¶å·²æ™šã€‚</span><br></pre></td></tr></table></figure><p>ä¸€æ—¶åŠè§£è™½ç„¶è¿™åœ¨çŸ­æœŸå†…å¯èƒ½å¾ˆå¥½ï¼Œä½†ä»é•¿è¿œæ¥çœ‹ï¼Œåœ¨æ²¡æœ‰å®Œå…¨ç†è§£çš„æƒ…å†µä¸‹åšé—®é¢˜å¯èƒ½ä¼šæ³¨å®šä½ ä»¥åä¼šå¤±è´¥ã€‚æœ‰ä¸€ç¯‡å…³äºè¿™ä¸ªæ‰€è°“çš„ç ´ç¢è¢«è¤¥æ³•åˆ™çš„åšå®¢æ–‡ç« ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å¾ˆæœ‰è¶£ã€‚</p><h1 id="IntLists"><a href="#IntLists" class="headerlink" title="IntLists"></a>IntLists</h1><p>äº‹å®è¯æ˜ï¼Œä¸€ä¸ªéå¸¸åŸºæœ¬çš„åˆ—è¡¨å®ç°èµ·æ¥æ˜¯å¾®ä¸è¶³é“çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>å®ç°èµ·æ¥å…¶å®ç±»ä¼¼äºâ€é“¾è¡¨â€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IntList</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> first;</span><br><span class="line">    <span class="keyword">public</span> IntList rest;        </span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">IntList</span><span class="params">(<span class="type">int</span> f, IntList r)</span> &#123;</span><br><span class="line">        first = f;</span><br><span class="line">        rest = r;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Return the size of the list using... recursion! */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (rest == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + <span class="built_in">this</span>.rest.size();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Return the size of the list using no recursion! */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">iterativeSize</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">IntList</span> <span class="variable">p</span> <span class="operator">=</span> <span class="built_in">this</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">totalSize</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (p != <span class="literal">null</span>) &#123;</span><br><span class="line">            totalSize += <span class="number">1</span>;</span><br><span class="line">            p = p.rest;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> totalSize;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/** Returns the ith item of this IntList*/</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> first;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rest.get(i - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(ä¸‰)--Junitæµ‹è¯•</title>
      <link href="/2024/01/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Junit%E6%B5%8B%E8%AF%95/"/>
      <url>/2024/01/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Junit%E6%B5%8B%E8%AF%95/</url>
      
        <content type="html"><![CDATA[<h1 id="æµ‹è¯•ç†å¿µ"><a href="#æµ‹è¯•ç†å¿µ" class="headerlink" title="æµ‹è¯•ç†å¿µ"></a>æµ‹è¯•ç†å¿µ</h1><h2 id="æ­£ç¡®æ€§å·¥å…·-1ï¼šè‡ªåŠ¨åˆ†çº§å™¨"><a href="#æ­£ç¡®æ€§å·¥å…·-1ï¼šè‡ªåŠ¨åˆ†çº§å™¨" class="headerlink" title="æ­£ç¡®æ€§å·¥å…·#1ï¼šè‡ªåŠ¨åˆ†çº§å™¨"></a>æ­£ç¡®æ€§å·¥å…·#1ï¼šè‡ªåŠ¨åˆ†çº§å™¨</h2><p>è‡ªåŠ¨è¯„åˆ†å™¨å¯èƒ½æ˜¯æ‚¨æ¥è§¦åˆ°çš„ç¬¬ä¸€ä¸ªæ­£ç¡®æ€§å·¥å…·ã€‚äº‹å®ä¸Šï¼ŒCS61Bçš„è‡ªåŠ¨åˆ†çº§å™¨æ˜¯åŸºäº JUnit åŠ ä¸Šä¸€äº›é¢å¤–çš„è‡ªå®šä¹‰åº“ã€‚</p><p>å¯¹è‡ªåŠ¨åˆ†çº§è€…æœ‰ä¸€äº›å¾ˆå¤§çš„å¥½å¤„ã€‚ä¹Ÿè®¸æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒå¯ä»¥ä¸ºæ‚¨éªŒè¯æ­£ç¡®æ€§ï¼Œä½¿æ‚¨å…äºç¼–å†™æ‰€æœ‰æµ‹è¯•çš„ç¹çä¸”æ— æŒ‡å¯¼æ€§çš„ä»»åŠ¡ã€‚å®ƒè¿˜é€šè¿‡æä¾›å¤šæ±çš„åˆ†æ•°ä½œä¸ºå®ç°æ­£ç¡®æ€§çš„æ¿€åŠ±ï¼Œä½¿è¯„ä¼°è¿‡ç¨‹æ¸¸æˆåŒ–ã€‚å¦‚æœå­¦ç”ŸèŠ±è´¹è¿‡å¤šçš„æ—¶é—´è¿½é€å®é™…ä¸Šä¸ä¼šå½±å“ä»–ä»¬çš„æˆç»©æˆ–å­¦ä¹ çš„æœ€ç»ˆåˆ†æ•°ï¼Œè¿™ä¹Ÿå¯èƒ½é€‚å¾—å…¶åã€‚</p><p>ç„¶è€Œï¼Œè‡ªåŠ¨åˆ†çº§å™¨åœ¨ç°å®ä¸–ç•Œä¸­å¹¶ä¸å­˜åœ¨ï¼Œä¾èµ–è‡ªåŠ¨åˆ†çº§å™¨ä¼šå…»æˆåä¹ æƒ¯ã€‚å¶å°”ä¸Šä¼ ä»£ç å¹¶ç­‰å¾…è‡ªåŠ¨è¯„åˆ†å™¨è¿è¡Œä¼šé˜»ç¢ä¸€ä¸ªäººçš„å·¥ä½œæµç¨‹ã€‚Autograder Driven Development æ˜¯ä¸€ä¸ªæç«¯ç‰ˆæœ¬ï¼Œå­¦ç”Ÿç¼–å†™æ‰€æœ‰ä»£ç ï¼Œä¿®å¤ç¼–è¯‘å™¨é”™è¯¯ï¼Œç„¶åæäº¤ç»™è‡ªåŠ¨è¯„åˆ†å™¨ã€‚åœ¨å¾—åˆ°é”™è¯¯åï¼Œå­¦ç”Ÿå¯ä»¥å°è¯•è¿›è¡Œä¸€äº›æ›´æ”¹ï¼Œåœ¨æ‰“å°è¯­å¥ä¸­æ’’ä¸Šä¸€äº›ï¼Œç„¶åå†æ¬¡æäº¤ã€‚å¹¶é‡å¤ã€‚æœ€ç»ˆï¼Œå¦‚æœæ‚¨ä¾èµ–è‡ªåŠ¨è¯„åˆ†å™¨ï¼Œåˆ™æ— æ³•æ§åˆ¶å·¥ä½œæµæˆ–ä»£ç ã€‚</p><h2 id="æ­£ç¡®æ€§å·¥å…·-2ï¼šJUnit-æµ‹è¯•"><a href="#æ­£ç¡®æ€§å·¥å…·-2ï¼šJUnit-æµ‹è¯•" class="headerlink" title="æ­£ç¡®æ€§å·¥å…· #2ï¼šJUnit æµ‹è¯•"></a>æ­£ç¡®æ€§å·¥å…· #2ï¼šJUnit æµ‹è¯•</h2><p>æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼ŒJUnit æµ‹è¯•ä¸ºæ‚¨æ‰“å¼€äº†ä¸€ä¸ªæ–°ä¸–ç•Œã€‚æ‚¨æ— éœ€ä¾èµ–å…¶ä»–äººç¼–å†™çš„è‡ªåŠ¨è¯„åˆ†å™¨ï¼Œè€Œæ˜¯ä¸ºç¨‹åºçš„æ¯ä¸ªéƒ¨åˆ†ç¼–å†™æµ‹è¯•ã€‚æˆ‘ä»¬å°†è¿™äº›éƒ¨åˆ†ä¸­çš„æ¯ä¸€ä¸ªéƒ½ç§°ä¸ºä¸€ä¸ªå•å…ƒã€‚è¿™ä½¿æ‚¨å¯ä»¥å¯¹ä»£ç çš„æ¯ä¸ªå•å…ƒå……æ»¡ä¿¡å¿ƒ - æ‚¨å¯ä»¥ä¾èµ–å®ƒä»¬ã€‚è¿™ä¹Ÿæœ‰åŠ©äºå‡å°‘è°ƒè¯•æ—¶é—´ï¼Œå› ä¸ºæ‚¨å¯ä»¥ä¸€æ¬¡å°†æ³¨æ„åŠ›éš”ç¦»åˆ°ä¸€ä¸ªä»£ç å•å…ƒï¼ˆé€šå¸¸æ˜¯å•ä¸ªæ–¹æ³•ï¼‰ã€‚å•å…ƒæµ‹è¯•è¿˜è¿«ä½¿æ‚¨æ˜ç¡®æ¯ä¸ªä»£ç å•å…ƒåº”è¯¥å®Œæˆä»€ä¹ˆã€‚</p><p>ä½†æ˜¯ï¼Œå•å…ƒæµ‹è¯•ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚é¦–å…ˆï¼Œç¼–å†™å…¨é¢çš„æµ‹è¯•éœ€è¦æ—¶é—´ã€‚ç¼–å†™ä¸å®Œæ•´çš„å•å…ƒæµ‹è¯•å¾ˆå®¹æ˜“ï¼Œè¿™ä¼šç»™ä»£ç å¸¦æ¥é”™è¯¯çš„ä¿¡å¿ƒã€‚ä¸ºä¾èµ–äºå…¶ä»–å•å…ƒçš„å•å…ƒç¼–å†™æµ‹è¯•ä¹Ÿå¾ˆå›°éš¾ï¼ˆè€ƒè™‘ your <code>LinkedListDeque</code> ä¸­ <code>addFirst</code> çš„æ–¹æ³•ï¼‰ã€‚</p><h3 id="æµ‹è¯•é©±åŠ¨å¼€å‘-ï¼ˆTDDï¼‰"><a href="#æµ‹è¯•é©±åŠ¨å¼€å‘-ï¼ˆTDDï¼‰" class="headerlink" title="*æµ‹è¯•é©±åŠ¨å¼€å‘ ï¼ˆTDDï¼‰*"></a>*<strong>æµ‹è¯•é©±åŠ¨å¼€å‘ ï¼ˆTDDï¼‰*</strong></h3><p>TDD æ˜¯ä¸€ä¸ªå¼€å‘è¿‡ç¨‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æœ¬èº«ä¹‹å‰ä¸ºä»£ç ç¼–å†™æµ‹è¯•ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>ç¡®å®šæ–°åŠŸèƒ½ã€‚</li><li>ä¸ºè¯¥åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</li><li>è¿è¡Œæµ‹è¯•ã€‚å®ƒåº”è¯¥å¤±è´¥ã€‚</li><li>ç¼–å†™é€šè¿‡æµ‹è¯•çš„ä»£ç ã€‚</li><li>å¯é€‰ï¼šé‡æ„ä»£ç ä»¥ä½¿å…¶æ›´å¿«ã€æ›´ç®€æ´ç­‰ã€‚é™¤äº†ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªåº”è¯¥é€šè¿‡çš„æµ‹è¯•çš„å‚è€ƒã€‚</li></ol><p><img src="/2024/01/19/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-3-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Junit%E6%B5%8B%E8%AF%95/image-20240119190920106.png" alt="image-20240119190920106"></p><h2 id="æ­£ç¡®æ€§å·¥å…·-3ï¼šé›†æˆæµ‹è¯•"><a href="#æ­£ç¡®æ€§å·¥å…·-3ï¼šé›†æˆæµ‹è¯•" class="headerlink" title="æ­£ç¡®æ€§å·¥å…·#3ï¼šé›†æˆæµ‹è¯•"></a>æ­£ç¡®æ€§å·¥å…·#3ï¼šé›†æˆæµ‹è¯•</h2><p>å•å…ƒæµ‹è¯•å¾ˆæ£’ï¼Œä½†æˆ‘ä»¬ä¹Ÿåº”è¯¥ç¡®ä¿è¿™äº›å•å…ƒèƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼ˆä¸è¿™ä¸ªæ¨¡å› ä¸åŒï¼‰ã€‚é›†æˆæµ‹è¯•éªŒè¯ç»„ä»¶æ˜¯å¦æ­£ç¡®åœ°äº¤äº’åœ¨ä¸€èµ·ã€‚JUnit å®é™…ä¸Šå¯ä»¥ç”¨äºæ­¤ç›®çš„ã€‚ä½ å¯ä»¥æŠŠå•å…ƒæµ‹è¯•æƒ³è±¡æˆæœ€ç»†å¾®çš„ï¼Œè€Œé›†æˆæµ‹è¯•çš„æŠ½è±¡çº§åˆ«é«˜äºæ­¤ã€‚</p><p>é›†æˆæµ‹è¯•çš„æŒ‘æˆ˜åœ¨äºï¼Œæ‰‹åŠ¨æ“ä½œå¾ˆç¹çï¼Œä½†è‡ªåŠ¨åŒ–å´å…·æœ‰æŒ‘æˆ˜æ€§ã€‚åœ¨é«˜åº¦æŠ½è±¡çš„å±‚æ¬¡ä¸Šï¼Œå¾ˆå®¹æ˜“é”™è¿‡ç»†å¾®æˆ–ç½•è§çš„é”™è¯¯ã€‚</p><h1 id="JUnit-æµ‹è¯•"><a href="#JUnit-æµ‹è¯•" class="headerlink" title="JUnit æµ‹è¯•"></a>JUnit æµ‹è¯•</h1><p><a href="https://junit.org/junit4/javadoc/4.12/org/junit/Assert.html">Assert (JUnit API)</a></p><p>è™½ç„¶ JUnit ç¡®å®æ”¹è¿›äº†ä¸€äº›ä¸œè¥¿ï¼Œä½†æˆ‘ä»¬ä¹‹å‰çš„æµ‹è¯•ä»£ç åœ¨å‡ ä¸ªæ–¹é¢æœ‰ç‚¹ç¬¨æ‹™ã€‚åœ¨æœ¬èŠ‚çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†è®¨è®ºæ‚¨å¯ä»¥è¿›è¡Œçš„ä¸¤ä¸ªä¸»è¦å¢å¼ºåŠŸèƒ½ï¼Œä»¥ä¾¿æ‚¨çš„ä»£ç æ›´ç®€æ´ã€æ›´æ˜“äºä½¿ç”¨ã€‚ä»è¯­æ³•çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›å¢å¼ºåŠŸèƒ½çœ‹èµ·æ¥éå¸¸ç¥ç§˜ï¼Œæ‰€ä»¥åªéœ€å¤åˆ¶æˆ‘ä»¬ç°åœ¨æ­£åœ¨åšçš„äº‹æƒ…ï¼Œæˆ‘ä»¬å°†åœ¨åé¢çš„ç« èŠ‚ä¸­è§£é‡Šå…¶ä¸­çš„ä¸€äº›ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨ï¼‰ã€‚</p><p>ç¬¬ä¸€ä¸ªå¢å¼ºåŠŸèƒ½æ˜¯ä½¿ç”¨æ‰€è°“çš„<strong>â€œæµ‹è¯•æ³¨é‡Šâ€</strong>ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ï¼š</p><ul><li>åœ¨æ¯ä¸ªæ–¹æ³•å‰é¢åŠ ä¸Š <code>@org.junit.Test</code> ï¼ˆä¸å¸¦åˆ†å·ï¼‰ã€‚</li><li>å°†æ¯ç§æµ‹è¯•æ–¹æ³•æ›´æ”¹ä¸ºéé™æ€ã€‚</li><li>ä»ç±»ä¸­åˆ é™¤ <code>TestSort</code> æˆ‘ä»¬ <code>main</code> çš„æ–¹æ³•ã€‚</li></ul><p>ç¬¬äºŒä¸ªå¢å¼ºåŠŸèƒ½å°†å…è®¸æˆ‘ä»¬ä¸ºä¸€äº›éå¸¸é•¿çš„æ–¹æ³•åç§°ä»¥åŠæ³¨é‡Šåç§°ä½¿ç”¨è¾ƒçŸ­çš„åç§°ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ‰€è°“çš„<strong>â€œimport è¯­å¥â€</strong>ã€‚</p><blockquote><p>ä¸åŒä¸Python, importè¯­å¥åè¦åŠ åˆ†å·</p></blockquote><p>æˆ‘ä»¬é¦–å…ˆå°† import è¯­å¥ <code>import org.junit.Test;</code> æ·»åŠ åˆ°æ–‡ä»¶çš„é¡¶éƒ¨ã€‚å®Œæˆæ­¤æ“ä½œåï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°† çš„æ‰€æœ‰ <code>@org.junit.Test</code> å®ä¾‹æ›¿æ¢ä¸º <code>@Test</code> .</p><p>ç„¶åï¼Œæˆ‘ä»¬æ·»åŠ ç¬¬äºŒä¸ª import è¯­å¥ <code>import static org.junit.Assert.*</code> ã€‚è¿™æ ·åšä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥ä»»ä½•æˆ‘ä»¬æ‹¥æœ‰çš„ <code>org.junit.Assert.</code> .ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°æ›¿æ¢ä¸º <code>org.junit.Assert.assertEquals(expected2, actual2);</code> <code>assertEquals(expected2, actual2);</code></p><p>ä¾‹å­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSort</span> &#123;</span><br><span class="line">    <span class="comment">//å¯¼å…¥åŒ…å‰ä¸º@org.junit.Test</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindSmallest</span><span class="params">()</span> &#123;</span><br><span class="line">        String[] input = &#123;<span class="string">&quot;i&quot;</span>, <span class="string">&quot;have&quot;</span>, <span class="string">&quot;an&quot;</span>, <span class="string">&quot;egg&quot;</span>&#125;;</span><br><span class="line">        <span class="type">String</span> <span class="variable">expected</span> <span class="operator">=</span> <span class="string">&quot;an&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">actual</span> <span class="operator">=</span> Sort.findSmallest(input);</span><br><span class="line">        assertArrayEquals(expected, actual);</span><br><span class="line">        <span class="comment">//å¯¼å…¥å‰ä¸ºorg.junit.Assert.assertArrayEquals(expected, actual);       </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bé¡¹ç›®ç»ƒä¹ ç¬”è®°(ä¸€)--Proj0</title>
      <link href="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/"/>
      <url>/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/</url>
      
        <content type="html"><![CDATA[<p>æœ¬äººé¡¹ç›®é“¾æ¥<a href="https://github.com/xxbaizero0/CS61B-Tutorial/tree/main/proj0/game2048">CS61B-Tutorial&#x2F;proj0&#x2F;game2048 at main Â· xxbaizero0&#x2F;CS61B-Tutorial (github.com)</a></p><p>æˆ‘çš„ä»»åŠ¡ä»…é©»ç•™åœ¨ <code>Model.java</code> å¹¶ä¸”ä»…é™äºå››ä¸ªæ–¹æ³•:</p><ul><li><p><code>public static boolean emptySpaceExistsï¼ˆBoard bï¼‰</code></p></li><li><p><code>public static boolean maxTileExistsï¼ˆBoard bï¼‰</code></p></li><li><p><code>public static boolean atLeastOneMoveExists(Board b)</code></p></li><li><p><code>public boolean tilt(Side side)</code></p></li></ul><h1 id="å‰ç½®å·¥ä½œ"><a href="#å‰ç½®å·¥ä½œ" class="headerlink" title="å‰ç½®å·¥ä½œ"></a>å‰ç½®å·¥ä½œ</h1><h1 id="é…ç½®é¡¹ç›®cdkï¼Œå¯¼å…¥åº“"><a href="#é…ç½®é¡¹ç›®cdkï¼Œå¯¼å…¥åº“" class="headerlink" title="é…ç½®é¡¹ç›®cdkï¼Œå¯¼å…¥åº“"></a>é…ç½®é¡¹ç›®cdkï¼Œå¯¼å…¥åº“</h1><p>æˆ‘ä»¬æƒ³è¦ä½¿ç”¨ <code>javalib</code> æ–‡ä»¶å¤¹ä¸­çš„è¿™äº› <code>.jar</code> æ–‡ä»¶ã€‚ä»ç„¶åœ¨â€œé¡¹ç›®ç»“æ„â€ä¸­ï¼Œå•å‡»å·¦ä¾§åä¸ºâ€œåº“â€çš„é¡¹ç›®è®¾ç½®éƒ¨åˆ†ã€‚å¦‚æœæ‚¨çœ‹åˆ°å·²æ·»åŠ ï¼Œ <code>javalib</code> åˆ™æ— äº‹å¯åšã€‚å¦åˆ™ï¼Œæˆ‘ä»¬å°†å•å‡»â€œ+â€æŒ‰é’®ï¼Œç„¶åå•å‡»â€œJavaâ€ï¼Œè¿™å°†å¯åŠ¨æˆ‘ä»¬æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶æµè§ˆå™¨ï¼Œç„¶åå•å‡»è¯¥ <code>javalib</code> æ–‡ä»¶å¤¹ã€‚ç„¶åï¼Œåœ¨å±å¹•çš„å³ä¸‹è§’ï¼Œç‚¹å‡»â€œåº”ç”¨â€ï¼Œç„¶åç‚¹å‡»è“è‰²çš„â€œç¡®å®šâ€æŒ‰é’®ã€‚</p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/intellij-setup.gif" alt="IntelliJ Setup"></p><h2 id="ä¿®æ”¹é¡¹ç›®æ–‡ä»¶"><a href="#ä¿®æ”¹é¡¹ç›®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é¡¹ç›®æ–‡ä»¶"></a>ä¿®æ”¹é¡¹ç›®æ–‡ä»¶</h2><p>æ¸¸æˆè¿è¡Œçš„<strong>ä¸Šä¸‹å·¦å³ç§»åŠ¨é”®</strong>ä¸º<strong>è‹±è¯­è¯­è¨€ä¸‹çš„æŒ‰é”®</strong>ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹<code>GUISource.java</code></p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/bottom.png" alt="img"></p><h1 id="ä»£ç ç­”æ¡ˆ"><a href="#ä»£ç ç­”æ¡ˆ" class="headerlink" title="ä»£ç ç­”æ¡ˆ"></a>ä»£ç ç­”æ¡ˆ</h1><h2 id="public-static-boolean-emptySpaceExistsï¼ˆBoard-bï¼‰"><a href="#public-static-boolean-emptySpaceExistsï¼ˆBoard-bï¼‰" class="headerlink" title="public static boolean emptySpaceExistsï¼ˆBoard bï¼‰"></a><code>public static boolean emptySpaceExistsï¼ˆBoard bï¼‰</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Returns true if at least one space on the Board is empty.</span></span><br><span class="line"><span class="comment"> *  Empty spaces are stored as null.</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">emptySpaceExists</span><span class="params">(Board b)</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Fill in this function.</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> b.size();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (b.tile(i, j) == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="public-static-boolean-maxTileExistsï¼ˆBoard-bï¼‰"><a href="#public-static-boolean-maxTileExistsï¼ˆBoard-bï¼‰" class="headerlink" title="public static boolean maxTileExistsï¼ˆBoard bï¼‰"></a><code>public static boolean maxTileExistsï¼ˆBoard bï¼‰</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns true if any tile is equal to the maximum valid value.</span></span><br><span class="line"><span class="comment"> * Maximum valid value is given by MAX_PIECE. Note that</span></span><br><span class="line"><span class="comment"> * given a Tile object t, we get its value with t.value().</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">maxTileExists</span><span class="params">(Board b)</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Fill in this function.</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> b.size();</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(b.tile(i, j) != <span class="literal">null</span>&amp;&amp;b.tile(i, j).value() == MAX_PIECE)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="public-static-boolean-atLeastOneMoveExists-Board-b"><a href="#public-static-boolean-atLeastOneMoveExists-Board-b" class="headerlink" title="public static boolean atLeastOneMoveExists(Board b)"></a><code>public static boolean atLeastOneMoveExists(Board b)</code></h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">atLeastOneMoveExists</span><span class="params">(Board b)</span> &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Fill in this function.</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">length</span> <span class="operator">=</span> b.size();</span><br><span class="line">    <span class="keyword">if</span>(emptySpaceExists(b)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; length; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i - <span class="number">1</span> &gt;= <span class="number">0</span> &amp;&amp; i + <span class="number">1</span> &lt; length)</span><br><span class="line">                <span class="keyword">if</span>(</span><br><span class="line">                    (b.tile(i-<span class="number">1</span>, j).value() == b.tile(i, j).value())</span><br><span class="line">                    ||(b.tile(i+<span class="number">1</span>, j).value() == b.tile(i, j).value())) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (j - <span class="number">1</span> &gt;=<span class="number">0</span> &amp;&amp; j+<span class="number">1</span> &lt; length)</span><br><span class="line">                <span class="keyword">if</span>((b.tile(i,j-<span class="number">1</span>).value() == b.tile(i, j).value())</span><br><span class="line">                   ||(b.tile(i, j +<span class="number">1</span>).value() == b.tile(i, j).value())) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨äº†<code>emptySpaceExists()</code>å‡½æ•°ï¼Œå®é™…ä¸Šå¢åŠ äº†æ— æ‰€è°“çš„æ—¶é—´ï¼Œä½†æ˜¯å¦‚æœè¦å®Œå–„çš„è¯ifæ¡ä»¶å¥è¿˜éœ€è¦åŠ é•¿ï¼Œå¯è¯»æ€§ä¸é«˜ï¼Œå› æ­¤æ²¡æœ‰ä¿®æ”¹ã€‚</p><p>å¦‚æœæœ‰ä»»ä½•æœ‰æ•ˆçš„ç§»åŠ¨ï¼Œåˆ™åº”è¿”å› trueã€‚æ‰€è°“â€œæœ‰æ•ˆç§»åŠ¨â€ï¼Œæ˜¯æŒ‡å¦‚æœç”¨æˆ·åœ¨ç© 2048 æ—¶å¯ä»¥æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼ˆUPã€DOWNã€LEFT æˆ– RIGHTï¼‰ï¼Œå¯¼è‡´è‡³å°‘ä¸€ä¸ªå›¾å—ç§»åŠ¨ï¼Œé‚£ä¹ˆè¿™æ ·çš„æŒ‰é”®è¢«è§†ä¸ºæœ‰æ•ˆç§»åŠ¨ã€‚</p><p>æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è¿›è¡Œæœ‰æ•ˆç§»åŠ¨ï¼š</p><ul><li>æ£‹ç›˜ä¸Šè‡³å°‘æœ‰ä¸€ä¸ªç©ºç™½åŒºåŸŸã€‚</li><li>æœ‰ä¸¤ä¸ªç›¸é‚»çš„å›¾å—å…·æœ‰ç›¸åŒçš„å€¼ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œå¯¹äºä¸‹é¢çš„æ¿ï¼Œæˆ‘ä»¬åº”è¯¥è¿”å› trueï¼Œå› ä¸ºè‡³å°‘æœ‰ä¸€ä¸ªç©ºç™½åŒºåŸŸã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   2|    |   2|    |</span><br><span class="line">|   4|   4|   2|   2|</span><br><span class="line">|    |   4|    |    |</span><br><span class="line">|   2|   4|   4|   8|</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸‹é¢çš„æ¿å­ï¼Œæˆ‘ä»¬åº”è¯¥è¿”å› falseã€‚æ— è®ºä½ åœ¨ 2048 å¹´æŒ‰ä¸‹ä»€ä¹ˆæŒ‰é’®ï¼Œéƒ½ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹æƒ…ï¼Œå³æ²¡æœ‰ä¸¤ä¸ªç›¸é‚»çš„ç“·ç –å…·æœ‰ç›¸ç­‰çš„å€¼ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   2|   4|   2|   4|</span><br><span class="line">|  16|   2|   4|   2|</span><br><span class="line">|   2|   4|   2|   4|</span><br><span class="line">|   4|   2|   4|   2|</span><br></pre></td></tr></table></figure><p>å¯¹äºä¸‹é¢çš„æ£‹ç›˜ï¼Œæˆ‘ä»¬å°†è¿”å› trueï¼Œå› ä¸ºå‘å³æˆ–å‘å·¦ç§»åŠ¨å°†åˆå¹¶ä¸¤ä¸ª 64 ä¸ªå›¾å—ï¼Œå¹¶ä¸”å‘ä¸Šæˆ–å‘ä¸‹ç§»åŠ¨å°†åˆå¹¶ 32 ä¸ªå›¾å—ã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼Œè‡³å°‘å­˜åœ¨ä¸¤ä¸ªå€¼ç›¸ç­‰çš„ç›¸é‚»å›¾å—ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   2|   4|  64|  64|</span><br><span class="line">|  16|   2|   4|   8|</span><br><span class="line">|   2|   4|   2|  32|</span><br><span class="line">|   4|   2|   4|  32|</span><br></pre></td></tr></table></figure><h2 id="public-boolean-tilt-Side-side"><a href="#public-boolean-tilt-Side-side" class="headerlink" title="public boolean tilt(Side side)"></a><code>public boolean tilt(Side side)</code></h2><p>å€¾æ–œæ–¹æ³•çš„å·¥ä½œæ˜¯å®é™…ç§»åŠ¨æ‰€æœ‰ç“·ç –ã€‚å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   2|    |   2|    |</span><br><span class="line">|   4|   4|   2|   2|</span><br><span class="line">|    |   4|    |    |</span><br><span class="line">|   2|   4|   4|   8|</span><br></pre></td></tr></table></figure><p>ç„¶åæŒ‰ upï¼Œå°†ä¿®æ”¹ <code>board</code> å®ä¾‹å˜é‡ï¼Œ <code>tilt</code> ä½¿æ¸¸æˆçš„çŠ¶æ€ç°åœ¨ä¸ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">|   2|   8|   4|   2|</span><br><span class="line">|   4|   4|   4|   8|</span><br><span class="line">|   2|    |    |    |</span><br><span class="line">|    |    |    |    |</span><br></pre></td></tr></table></figure><p>é™¤äº†ä¿®æ”¹æ¿ä¹‹å¤–ï¼Œè¿˜å¿…é¡»å‘ç”Ÿå¦å¤–ä¸¤ä»¶äº‹ï¼š</p><ol><li>å¿…é¡»æ›´æ–°è¯„åˆ†å®ä¾‹å˜é‡ï¼Œä»¥åæ˜ æ‰€æœ‰å›¾å—åˆå¹¶çš„æ€»å€¼ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä¸¤ä¸ª 4 åˆå¹¶æˆä¸€ä¸ª 8ï¼Œå°†ä¸¤ä¸ª 2 åˆå¹¶æˆä¸€ä¸ª 4ï¼Œå› æ­¤åˆ†æ•°åº”è¯¥å¢åŠ  8 + 4 &#x3D; 12ã€‚</li><li>å¦‚æœæ¿å‘ç”Ÿä»»ä½•å˜åŒ–ï¼Œæˆ‘ä»¬å¿…é¡»å°† <code>changed</code> å±€éƒ¨å˜é‡è®¾ç½®ä¸º <code>true</code> ã€‚è¿™æ˜¯å› ä¸ºåœ¨ çš„ <code>tilt</code> æ¡†æ¶ä»£ç çš„æœ«å°¾ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è°ƒç”¨äº†ä¸€ä¸ª <code>setChanged()</code> æ–¹æ³•ï¼šè¿™é€šçŸ¥ GUI æœ‰ä¸€äº›ä¸œè¥¿è¦ç»˜åˆ¶ã€‚æ‚¨ä¸ä¼šå¯¹è‡ªå·± <code>setChanged</code> è¿›è¡Œä»»ä½•è°ƒç”¨ï¼šåªéœ€ä¿®æ”¹ <code>changed</code> å±€éƒ¨å˜é‡ã€‚</li></ol><p>ç¤ºä¾‹ï¼š</p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/image-20240118213830819.png" alt="image-20240118213830819"></p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/image-20240118213851546.png" alt="image-20240118213851546"></p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/image-20240118214110920.png" alt="image-20240118214110920"></p><p><img src="/2024/01/18/JAVA-CS61B-%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0-1-CS61B%E9%A1%B9%E7%9B%AE%E7%BB%83%E4%B9%A0%E7%AC%94%E8%AE%B0-Proj0/image-20240118214147334.png" alt="image-20240118214147334"></p><h2 id="tip"><a href="#tip" class="headerlink" title="tip"></a>tip</h2><ul><li>æˆ‘ä»¬å¯ä»¥åªä¸“æ³¨äºä¸€ä¸ªæ–¹å‘çš„å®ç°ï¼Œç„¶åé€šè¿‡æ•°ç»„çš„æ—‹è½¬æ¥å®ç°å¤šæ–¹å‘çš„å®ç°ã€‚</li><li>ç”±ä¸Šå›¾å¯çŸ¥ï¼Œæˆ‘ä»¬æœ€å¥½ä»æ¯åˆ—é¡¶éƒ¨å¼€å§‹éå†ï¼Œè¿™æ ·æ‰èƒ½ç¬¦åˆæ¸¸æˆé€»è¾‘</li></ul><h2 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tilt</span><span class="params">(Side side)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> changed;</span><br><span class="line">        changed = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Modify this.board (and perhaps this.score) to account</span></span><br><span class="line">        <span class="comment">// for the tilt to the Side SIDE. If the board changed, set the</span></span><br><span class="line">        <span class="comment">// changed local variable to true.</span></span><br><span class="line">        board.setViewingPerspective(side);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> <span class="number">0</span>; c &lt; board.size(); c++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> board.size()-<span class="number">1</span>; r &gt;= <span class="number">0</span>; r--)&#123;</span><br><span class="line">                <span class="type">Tile</span> <span class="variable">t</span> <span class="operator">=</span> board.tile(c, r);</span><br><span class="line">                <span class="type">int</span> <span class="variable">row</span> <span class="operator">=</span> r;</span><br><span class="line">                <span class="keyword">if</span>(board.tile(c, r) != <span class="literal">null</span>)&#123;</span><br><span class="line">                    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> board.size()-<span class="number">1</span>; i &gt; r; i--)&#123;</span><br><span class="line">                        <span class="keyword">if</span> (board.tile(c, i) == <span class="literal">null</span>) &#123;</span><br><span class="line">                            board.move(c, i, t);</span><br><span class="line">                            row = i;</span><br><span class="line">                            changed = <span class="literal">true</span>;</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> row -<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">                        <span class="keyword">if</span>(board.tile(c, i)!=<span class="literal">null</span> &amp;&amp; t.value() != board.tile(c, i).value()) <span class="keyword">break</span>;</span><br><span class="line">                        <span class="keyword">else</span> <span class="keyword">if</span>(board.tile(c, i)!=<span class="literal">null</span> &amp;&amp; t.value() == board.tile(c, i).value())&#123;</span><br><span class="line">                            board.move(c, row, board.tile(c, i));</span><br><span class="line">                            changed = <span class="literal">true</span>;</span><br><span class="line">                            score += board.tile(c, row).value();</span><br><span class="line">                            <span class="keyword">break</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        board.setViewingPerspective(Side.NORTH);</span><br><span class="line">        checkGameOver();</span><br><span class="line">        <span class="keyword">if</span> (changed) &#123;</span><br><span class="line">            setChanged();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> changed;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(äºŒ)--Reading.1.Introducing</title>
      <link href="/2024/01/18/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading-1-Introducion-to-Java/"/>
      <url>/2024/01/18/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Reading-1-Introducion-to-Java/</url>
      
        <content type="html"><![CDATA[<p><a href="https://joshhug.gitbooks.io/hug61b/content/chap1/chap11.html">1.1 è¦ç‚¹ Â·æ‹¥æŠ±61B â€” 1.1 Essentials Â· Hug61B (gitbooks.io)</a></p><h1 id="è¦ç‚¹"><a href="#è¦ç‚¹" class="headerlink" title="è¦ç‚¹"></a>è¦ç‚¹</h1><h2 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><code>System.out.println(&quot;Hello world!&quot;);</code>ç›¸å½“äºä¸c++ä¸­çš„<code>cout&lt;&lt;&quot;Hello world!&quot;&lt;&lt;endl;</code></p><p><code>System.out.print(&quot;Hello world!&quot;);</code>ç›¸å½“äºä¸c++ä¸­çš„<code>cout&lt;&lt;&quot;Hello world!&quot;;</code></p></blockquote><p>å¯¹äºé‚£äº›æ¥è‡ªåƒ Python è¿™æ ·çš„è¯­è¨€çš„äººæ¥è¯´ï¼Œè¿™ä¼¼ä¹æ¯«æ— å¿…è¦åœ°å†—é•¿ã€‚ç„¶è€Œï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯æœ‰å……åˆ†ç†ç”±çš„ï¼Œæˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨å†…ç†è§£è¿™ä¸€ç‚¹ã€‚éœ€è¦æ³¨æ„çš„ä¸€äº›å…³é”®è¯­æ³•ç‰¹å¾ï¼š</p><ul><li>è¯¥ç¨‹åºç”±ä¸€ä¸ªç±»å£°æ˜ç»„æˆï¼Œè¯¥å£°æ˜ä½¿ç”¨å…³é”®å­— <code>public class</code> å£°æ˜ã€‚åœ¨ Java ä¸­ï¼Œæ‰€æœ‰ä»£ç éƒ½ä½äºç±»ä¸­ã€‚</li><li>è¿è¡Œçš„ä»£ç ä½äºåä¸º <code>main</code> çš„æ–¹æ³•ä¸­ï¼Œè¯¥æ–¹æ³•å£°æ˜ä¸º <code>public static void main(String[] args)</code> ã€‚</li><li>æˆ‘ä»¬ä½¿ç”¨å¤§æ‹¬å· <code>&#123;</code> å’Œæ¥è¡¨ç¤ºä¸€æ®µä»£ç çš„å¼€å¤´å’Œ <code>&#125;</code> ç»“å°¾ã€‚</li><li>è¯­å¥å¿…é¡»ä»¥åˆ†å·ç»“å°¾ã€‚</li></ul><h2 id="è¿è¡Œ-Java-ç¨‹åº"><a href="#è¿è¡Œ-Java-ç¨‹åº" class="headerlink" title="è¿è¡Œ Java ç¨‹åº"></a>è¿è¡Œ Java ç¨‹åº</h2><p>æ‰§è¡Œ Java ç¨‹åºçš„æœ€å¸¸è§æ–¹æ³•æ˜¯é€šè¿‡ä¸¤ä¸ªç¨‹åºçš„åºåˆ—è¿è¡Œå®ƒã€‚ç¬¬ä¸€ç§æ˜¯ Java ç¼–è¯‘å™¨ï¼Œæˆ– <code>javac</code> .ç¬¬äºŒä¸ªæ˜¯ Java è§£é‡Šå™¨ï¼Œæˆ– <code>java</code> .</p><p>![image-20240118035144027](2-CS61Bå­¦ä¹ ç¬”è®°-Reading.1.Introducion to Java&#x2F;image-20240118035144027.png)</p><p>ä¾‹å¦‚ï¼Œè¦è¿è¡Œ <code>HelloWorld.java</code> ï¼Œæˆ‘ä»¬ä¼šåœ¨ç»ˆç«¯ä¸­é”®å…¥å‘½ä»¤ï¼Œç„¶åé”®å…¥å‘½ä»¤ <code>javac HelloWorld.java</code> <code>java HelloWorld</code> ã€‚ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ javac HelloWorld.java</span><br><span class="line">$ java HelloWorld</span><br><span class="line">Hello World! </span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ä¸Šå›¾ä¸­ï¼Œ$ è¡¨ç¤ºæˆ‘ä»¬ç»ˆç«¯çš„å‘½ä»¤æç¤ºç¬¦ã€‚</p></blockquote><p>æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œæˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶åŒ…å«â€œ.javaâ€ï¼Œä½†åœ¨è§£é‡Šæ—¶ä¸åŒ…æ‹¬â€œ.classâ€ã€‚è¿™å°±æ˜¯å®ƒçš„æ–¹å¼ï¼ˆTIJTWIIï¼‰ã€‚</p><h2 id="ä»£ç æ ·å¼ã€æ³¨é‡Šã€Javadoc"><a href="#ä»£ç æ ·å¼ã€æ³¨é‡Šã€Javadoc" class="headerlink" title="ä»£ç æ ·å¼ã€æ³¨é‡Šã€Javadoc"></a>ä»£ç æ ·å¼ã€æ³¨é‡Šã€Javadoc</h2><p>ä»£ç åœ¨å¾ˆå¤šæ–¹é¢éƒ½å¾ˆæ¼‚äº®ã€‚å®ƒå¯ä»¥å¾ˆç®€æ´ã€‚å®ƒå¯ä»¥å¾ˆèªæ˜ã€‚å®ƒå¯ä»¥æ˜¯æœ‰æ•ˆçš„ã€‚æ–°æ‰‹æœ€ä¸è¢«é‡è§†çš„ä»£ç æ–¹é¢ä¹‹ä¸€æ˜¯ä»£ç é£æ ¼ã€‚å½“ä½ ä½œä¸ºä¸€ä¸ªæ–°æ‰‹ç¼–ç¨‹æ—¶ï¼Œä½ å¾€å¾€ä¸€å¿ƒä¸€æ„åœ°è®©å®ƒå·¥ä½œï¼Œè€Œä¸è€ƒè™‘å†çœ‹ä¸€éæˆ–ä¸å¾—ä¸é•¿æ—¶é—´ç»´æŠ¤å®ƒã€‚</p><p>åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åŠªåŠ›ä¿æŒä»£ç çš„å¯è¯»æ€§ã€‚è‰¯å¥½çš„ç¼–ç é£æ ¼çš„ä¸€äº›æœ€é‡è¦çš„ç‰¹å¾æ˜¯ï¼š</p><ul><li>ä¸€è‡´çš„æ ·å¼ï¼ˆé—´è·ã€å˜é‡å‘½åã€å¤§æ‹¬å·æ ·å¼ç­‰ï¼‰</li><li>å¤§å°ï¼ˆè¡Œä¸è¦å¤ªå®½ï¼Œæºæ–‡ä»¶ä¸è¦å¤ªé•¿ï¼‰</li><li>æè¿°æ€§å‘½åï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ï¼‰ï¼Œä¾‹å¦‚åç§°ä¸º <code>year</code> or è€Œä¸æ˜¯ <code>x</code> or <code>f</code> <code>getUserName</code> çš„å˜é‡æˆ–å‡½æ•°ã€‚</li><li>é¿å…é‡å¤ä»£ç ï¼šé™¤äº†ä¸€äº›æ›´æ”¹å¤–ï¼Œå‡ ä¹ä¸åº”è¯¥æœ‰ä¸¤ä¸ªå‡ ä¹ç›¸åŒçš„é‡è¦ä»£ç å—ã€‚</li><li>é…Œæƒ…æ³¨é‡Šã€‚Java ä¸­çš„è¡Œæ³¨é‡Šä½¿ç”¨ <code>//</code> åˆ†éš”ç¬¦ã€‚é˜»æ­¢ï¼ˆåˆåå¤šè¡Œæ³¨é‡Šï¼‰æ³¨é‡Š use <code>/*</code> å’Œ <code>*/</code> .</li></ul><p>é»„é‡‘æ³•åˆ™æ˜¯ï¼šç¼–å†™ä»£ç ï¼Œä»¥ä¾¿é™Œç”Ÿäººæ˜“äºç†è§£ã€‚</p><p><a href="https://sp19.datastructur.es/materials/guides/style-guide.html">Style Guide | CS 61B Spring 2019 (datastructur.es)</a>è¿™æ˜¯è¯¥è¯¾ç¨‹çš„å®˜æ–¹é£æ ¼æŒ‡å—ã€‚å€¼å¾—ä¸€çœ‹ï¼</p><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><p>æ‰€æœ‰æ–¹æ³•å’Œå‡ ä¹æ‰€æœ‰ç±»éƒ½åº”è¯¥ä½¿ç”¨æ‰€è°“çš„ Javadoc æ ¼å¼åœ¨æ³¨é‡Šä¸­è¿›è¡Œæè¿°ã€‚åœ¨ Javadoc æ³¨é‡Šä¸­<a href="https://en.wikipedia.org/wiki/Javadoc">Javadoc - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ â€” Javadoc - Wikipedia</a>ï¼Œå—æ³¨é‡Šä»¥é¢å¤–çš„æ˜Ÿå·å¼€å¤´ï¼Œä¾‹å¦‚ <code>/**</code> ï¼Œå¹¶ä¸”æ³¨é‡Šé€šå¸¸ï¼ˆä½†å¹¶éæ€»æ˜¯ï¼‰åŒ…å«æè¿°æ€§æ ‡è®°ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ•™ç§‘ä¹¦ä¸­è®¨è®ºè¿™äº›æ ‡ç­¾ï¼Œä½†è¯·å‚é˜…ä¸Šé¢çš„é“¾æ¥ä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†ã€‚</p><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œæ‰€æœ‰æ–¹æ³•å’Œå‡ ä¹æ‰€æœ‰ç±»éƒ½åº”è¯¥ä½¿ç”¨æ‰€è°“çš„ Javadoc æ ¼å¼åœ¨æ³¨é‡Šä¸­è¿›è¡Œæè¿°ã€‚åœ¨ Javadoc æ³¨é‡Šä¸­ï¼Œå—æ³¨é‡Šä»¥é¢å¤–çš„æ˜Ÿå·å¼€å¤´ï¼Œä¾‹å¦‚ <code>/**</code> ï¼Œå¹¶ä¸”æ³¨é‡Šé€šå¸¸ï¼ˆä½†å¹¶éæ€»æ˜¯ï¼‰åŒ…å«æè¿°æ€§æ ‡è®°ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ•™ç§‘ä¹¦ä¸­è®¨è®ºè¿™äº›æ ‡ç­¾ï¼Œä½†è¯·å‚é˜…ä¸Šé¢çš„é“¾æ¥ä»¥äº†è§£å®ƒä»¬çš„å·¥ä½œåŸç†ã€‚</p><p>ä¸¾ä¸ªæ²¡æœ‰æ ‡ç­¾çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LargerDemo</span> &#123;</span><br><span class="line">    <span class="comment">/** Returns the larger of x and y. */</span>           </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">larger</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">            <span class="keyword">return</span> x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> y;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(larger(<span class="number">8</span>, <span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¹¿æ³›ä½¿ç”¨çš„ javadoc å·¥å…·<a href="https://docs.oracle.com/javase/8/docs/technotes/tools/windows/javadoc.html">javadoc (oracle.com)</a>å¯ç”¨äºç”Ÿæˆä»£ç çš„ HTML æè¿°ã€‚</p><h1 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h1><h2 id="å®šä¹‰å’Œä½¿ç”¨ç±»"><a href="#å®šä¹‰å’Œä½¿ç”¨ç±»" class="headerlink" title="å®šä¹‰å’Œä½¿ç”¨ç±»"></a>å®šä¹‰å’Œä½¿ç”¨ç±»</h2><p>Java ä¸­çš„æ‰€æœ‰ä»£ç éƒ½å¿…é¡»æ˜¯ç±»çš„ä¸€éƒ¨åˆ†ï¼ˆæˆ–ç±»ä¼¼äºç±»çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å°†åœ¨åé¢å­¦ä¹ ï¼‰ã€‚å¤§å¤šæ•°ä»£ç éƒ½æ˜¯åœ¨æ–¹æ³•å†…éƒ¨ç¼–å†™çš„ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeNoise</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Bark!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œè¯¥ <code>Dog</code> ç±»ï¼Œæˆ‘ä»¬åªä¼šæ”¶åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ java Dog</span><br><span class="line">Error: Main method not found in <span class="keyword">class</span> <span class="title class_">Dog</span>, please define the main method as:</span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å®šä¹‰çš„ <code>Dog</code> ç±»ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚æˆ‘ä»¬åªæ˜¯å®šä¹‰äº†ä¸€äº› <code>Dog</code> å¯ä»¥åšçš„äº‹æƒ…ï¼Œå³åˆ¶é€ å™ªéŸ³ã€‚è¦å®é™…è¿è¡Œè¯¥ç±»ï¼Œæˆ‘ä»¬éœ€è¦å‘ <code>Dog</code> è¯¥ç±»æ·»åŠ ä¸€ä¸ª main æ–¹æ³•ï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨ç¬¬ 1.1 ç« ä¸­çœ‹åˆ°çš„é‚£æ ·ã€‚æˆ–è€…æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„ <code>DogLauncher</code> ç±»æ¥è¿è¡Œè¯¥ <code>Dog</code> ç±»çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ç¨‹åºï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DogLauncher</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Dog.makeNoise();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ java DogLauncher</span><br><span class="line">Bark!</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å¦ä¸€ä¸ªç±»çš„ç±»æœ‰æ—¶ç§°ä¸ºè¯¥ç±»çš„â€œå®¢æˆ·ç«¯â€ï¼Œå³ <code>DogLauncher</code> æ˜¯ <code>Dog</code> çš„å®¢æˆ·ç«¯ã€‚è¿™ä¸¤ç§æŠ€æœ¯éƒ½ä¸æ˜¯æ›´å¥½çš„ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ·»åŠ  main æ–¹æ³•å¯èƒ½æ›´å¥½ï¼Œè€Œåœ¨å…¶ä»–æƒ…å†µä¸‹åˆ›å»ºç±»ä¼¼ client ç±» <code>Dog</code> <code>DogLauncher</code> å¯èƒ½æ›´å¥½ã€‚éšç€æˆ‘ä»¬åœ¨æ•´ä¸ªè¯¾ç¨‹ä¸­è·å¾—é¢å¤–çš„ç»ƒä¹ ï¼Œæ¯ç§æ–¹æ³•çš„ç›¸å¯¹ä¼˜åŠ¿å°†å˜å¾—æ¸…æ™°ã€‚</p><p>å› æ­¤æ€»ç»“ä¸‹:</p><ul><li>ç±»çš„ä½¿ç”¨æœ‰ä¸¤ç§æ–¹æ³•:<ul><li>ä¸€ç§æ˜¯å¸¦æœ‰mainæ–¹æ³•çš„ç±»</li><li>ä¸€ç§æ˜¯åªæœ‰æ–¹æ³•ï¼Œç”±å¦ä¸€ä¸ªç±»æ¥è°ƒç”¨ã€‚</li></ul></li></ul><h2 id="é™æ€æ–¹æ³•-vs-éé™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•-vs-éé™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³• vs éé™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³• vs éé™æ€æ–¹æ³•</h2><p>åŒ<code>cpp</code>çš„çŸ¥è¯†ç‚¹ï¼Œé™æ€æ–¹æ³•å±äºç±»ï¼Œéé™æ€æ–¹æ³•å±äºå¯¹è±¡(å®ä¾‹)ã€‚è°ƒç”¨é™æ€æ–¹æ³•æ—¶ï¼Œé€šå¸¸ç”¨<code>ç±»å.æ–¹æ³•</code>,è°ƒç”¨éé™æ€æ–¹æ³•æ—¶é€šå¸¸ç”¨<code>å¯¹è±¡å.æ–¹æ³•</code>ã€‚</p><p>å¯¹æ¯”ä¸Šä¸‹ä¸¤ä¸ª<code>Dog</code>ç±»çš„<code>makeNoise</code>æ–¹æ³•å¯ä»¥å‘ç°ï¼Œåœ¨åŠ ä¸Šæ¡ä»¶åˆ¤æ–­è¯­å¥å‰ä¸ºé™æ€æ–¹æ³•ï¼ŒåŠ ä¸Šåå˜ä¸ºéé™æ€æ–¹æ³•ï¼Œè¯´æ˜æ˜¯ä¸åŒä½“é‡å¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>è¯¦ç»†ä¸‹é¢æœ‰è¯´</p><h2 id="å®ä¾‹å˜é‡å’Œå¯¹è±¡å®ä¾‹åŒ–"><a href="#å®ä¾‹å˜é‡å’Œå¯¹è±¡å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹å˜é‡å’Œå¯¹è±¡å®ä¾‹åŒ–"></a>å®ä¾‹å˜é‡å’Œå¯¹è±¡å®ä¾‹åŒ–</h2><p>å¹¶éæ‰€æœ‰çš„ç‹—éƒ½æ˜¯ä¸€æ ·çš„ã€‚æœ‰äº›ç‹—å–œæ¬¢ä¸åœåœ°å å«ï¼Œè€Œå¦ä¸€äº›ç‹—åˆ™å‘å‡ºé“¿é”µæœ‰åŠ›çš„å’†å“®ï¼Œç»™æ‰€æœ‰å¬åˆ°å®ƒä»¬å…‰è£å‘¼å”¤çš„äººå¸¦æ¥æ¬¢ä¹ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ç¼–å†™ç¨‹åºæ¥æ¨¡ä»¿æˆ‘ä»¬å±…ä½çš„å®‡å®™çš„ç‰¹å¾ï¼Œè€Œ Java çš„è¯­æ³•å¾ˆå®¹æ˜“å…è®¸è¿™ç§æ¨¡ä»¿ã€‚</p><p>å…è®¸æˆ‘ä»¬è¡¨ç¤º Dogdom å…‰è°±çš„ä¸€ç§æ–¹æ³•æ˜¯ä¸ºæ¯ç§ç±»å‹çš„ Dog åˆ›å»ºå•ç‹¬çš„ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TinyDog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeNoise</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;yip yip yip yip&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MalamuteDog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">makeNoise</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;arooooooooooooooo!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­£å¦‚æ‚¨è¿‡å»åº”è¯¥çœ‹åˆ°çš„ï¼Œç±»å¯ä»¥å®ä¾‹åŒ–ï¼Œå®ä¾‹å¯ä»¥ä¿å­˜æ•°æ®ã€‚è¿™å¯¼è‡´äº†ä¸€ç§æ›´è‡ªç„¶çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åˆ›å»º <code>Dog</code> ç±»çš„å®ä¾‹ï¼Œå¹¶ä½¿ <code>Dog</code> æ–¹æ³•çš„è¡Œä¸ºå–å†³äºç‰¹å®š <code>Dog</code> .ä¸ºäº†æ›´å…·ä½“åœ°è¯´æ˜è¿™ä¸€ç‚¹ï¼Œè¯·è€ƒè™‘ä»¥ä¸‹ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> weightInPounds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeNoise</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (weightInPounds &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;yipyipyip!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weightInPounds &lt; <span class="number">30</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;bark. bark.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;woof!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½œä¸ºä½¿ç”¨è¿™ç§ç‹—çš„ä¾‹å­ï¼Œè¯·è€ƒè™‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DogLauncher</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        Dog d;</span><br><span class="line">        d = <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        d.weightInPounds = <span class="number">20</span>;</span><br><span class="line">        d.makeNoise();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸€äº›å…³é”®è§‚å¯Ÿç»“æœå’Œæœ¯è¯­ï¼š</p><ul><li>Java ä¸­çš„ <code>Object</code> æ˜¯ä»»ä½•ç±»çš„å®ä¾‹ã€‚</li><li>è¯¥ <code>Dog</code> ç±»æœ‰è‡ªå·±çš„å˜é‡ï¼Œä¹Ÿç§°ä¸ºå®ä¾‹å˜é‡æˆ–éé™æ€å˜é‡ã€‚è¿™äº›å¿…é¡»åœ¨ç±»ä¸­å£°æ˜ï¼Œè¿™ä¸ Python æˆ– Matlab ç­‰è¯­è¨€ä¸åŒï¼Œåè€…å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æ–°å˜é‡ã€‚</li><li>æˆ‘ä»¬åœ¨ <code>Dog</code> ç±»ä¸­åˆ›å»ºçš„æ–¹æ³•æ²¡æœ‰å…³é”®å­— <code>static</code> ã€‚æˆ‘ä»¬å°†æ­¤ç±»æ–¹æ³•ç§°ä¸ºå®ä¾‹æ–¹æ³•æˆ–éé™æ€æ–¹æ³•ã€‚</li><li>è¦è°ƒç”¨è¯¥ <code>makeNoise</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆä½¿ç”¨ <code>new</code> å…³é”®å­—å®ä¾‹åŒ– a <code>Dog</code> ï¼Œç„¶ååˆ¶ä½œç‰¹å®šçš„ <code>Dog</code> barkã€‚æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬è°ƒç”¨ <code>d.makeNoise()</code> äº† <code>Dog.makeNoise()</code> .</li><li>ä¸€æ—¦ä¸€ä¸ªå¯¹è±¡è¢«å®ä¾‹åŒ–ï¼Œå°±å¯ä»¥å°†å…¶åˆ†é…ç»™é€‚å½“ç±»å‹çš„å£°æ˜å˜é‡ï¼Œä¾‹å¦‚ <code>d = new Dog();</code></li><li>ç±»çš„å˜é‡å’Œæ–¹æ³•ä¹Ÿç§°ä¸ºç±»çš„æˆå‘˜ã€‚</li><li>ä½¿ç”¨ç‚¹è¡¨ç¤ºæ³•è®¿é—®ç±»çš„æˆå‘˜ã€‚</li></ul><h2 id="ç±»æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•"><a href="#ç±»æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•" class="headerlink" title="ç±»æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•"></a>ç±»æ–¹æ³•ä¸å®ä¾‹æ–¹æ³•</h2><p>Java å…è®¸æˆ‘ä»¬å®šä¹‰ä¸¤ç§ç±»å‹çš„æ–¹æ³•ï¼š</p><ul><li>ç±»æ–¹æ³•ï¼Œåˆåé™æ€æ–¹æ³•ã€‚</li><li>å®ä¾‹æ–¹æ³•ï¼Œåˆåéé™æ€æ–¹æ³•ã€‚</li></ul><p>å®ä¾‹æ–¹æ³•æ˜¯åªèƒ½ç”±ç±»çš„ç‰¹å®šå®ä¾‹æ‰§è¡Œçš„æ“ä½œã€‚é™æ€æ–¹æ³•æ˜¯ç”±ç±»æœ¬èº«æ‰§è¡Œçš„æ“ä½œã€‚ä¸¤è€…åœ¨ä¸åŒæƒ…å†µä¸‹éƒ½å¾ˆæœ‰ç”¨ã€‚ä½œä¸ºé™æ€æ–¹æ³•çš„ç¤ºä¾‹ï¼Œè¯¥ <code>Math</code> ç±»æä¾›äº†ä¸€ä¸ª <code>sqrt</code> æ–¹æ³•ã€‚å› ä¸ºå®ƒæ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç§°å‘¼å®ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = Math.sqrt(<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>å¦‚æœ <code>sqrt</code> æ˜¯ä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸‹é¢ç¬¨æ‹™çš„è¯­æ³•ã€‚å¹¸è¿çš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§ <code>sqrt</code> é™æ€æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…åœ¨å®é™…ç¨‹åºä¸­æ‰§è¡Œæ­¤æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Math</span> <span class="variable">m</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Math</span>();</span><br><span class="line">x = m.sqrt(<span class="number">100</span>);</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶ï¼Œæ‹¥æœ‰ä¸€ä¸ªåŒæ—¶å…·æœ‰å®ä¾‹å’Œé™æ€æ–¹æ³•çš„ç±»æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œå‡è®¾æƒ³è¦æ¯”è¾ƒä¸¤åªç‹—çš„èƒ½åŠ›ã€‚ä¸€ç§æ–¹æ³•æ˜¯æ·»åŠ ä¸€ä¸ªç”¨äºæ¯”è¾ƒ Dogs çš„é™æ€æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">15</span>);</span><br><span class="line"><span class="type">Dog</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">100</span>);</span><br><span class="line">Dog.maxDog(d, d2);</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²ä½¿ç”¨ç±»åè°ƒç”¨ï¼Œå› ä¸ºæ­¤æ–¹æ³•æ˜¯é™æ€æ–¹æ³•ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ <code>maxDog</code> å®ç°ä¸ºéé™æ€æ–¹æ³•ï¼Œä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Dog <span class="title function_">maxDog</span><span class="params">(Dog d2)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.weightInPounds &gt; d2.weightInPounds) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> d2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨å…³é”®å­— <code>this</code> æ¥æŒ‡ä»£å½“å‰å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•è°ƒç”¨æ­¤æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">15</span>);</span><br><span class="line"><span class="type">Dog</span> <span class="variable">d2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">100</span>);</span><br><span class="line">d.maxDog(d2);</span><br></pre></td></tr></table></figure><h2 id="é™æ€å˜é‡"><a href="#é™æ€å˜é‡" class="headerlink" title="é™æ€å˜é‡"></a>é™æ€å˜é‡</h2><p>ç±»å…·æœ‰é™æ€å˜é‡æœ‰æ—¶å¾ˆæœ‰ç”¨ã€‚è¿™äº›æ˜¯ç±»æœ¬èº«å›ºæœ‰çš„å±æ€§ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„å±æ€§ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è®°å½•ç‹—çš„å­¦åï¼ˆæˆ–åŒå­ï¼‰æ˜¯<code>Canis familiaris</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> weightInPounds;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">binomen</span> <span class="operator">=</span> <span class="string">&quot;Canis familiaris&quot;</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™æ€å˜é‡åº”è¯¥ä½¿ç”¨ç±»çš„åç§°è€Œä¸æ˜¯ç‰¹å®šçš„å®ä¾‹æ¥è®¿é—®ï¼Œä¾‹å¦‚ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨ <code>Dog.binomen</code> ï¼Œè€Œä¸æ˜¯ <code>d.binomen</code> .</p><p>è™½ç„¶ Java åœ¨æŠ€æœ¯ä¸Šå…è®¸ä½ ä½¿ç”¨å®ä¾‹åç§°è®¿é—®é™æ€å˜é‡ï¼Œä½†å®ƒçš„é£æ ¼å¾ˆç³Ÿç³•ï¼Œä»¤äººå›°æƒ‘ï¼Œè€Œä¸”åœ¨æˆ‘çœ‹æ¥æ˜¯ Java è®¾è®¡è€…çš„é”™è¯¯ã€‚(ä¸æ˜¯æˆ‘çš„è¯„ä»·)</p><h2 id="Javaçš„æ„é€ å‡½æ•°"><a href="#Javaçš„æ„é€ å‡½æ•°" class="headerlink" title="Javaçš„æ„é€ å‡½æ•°"></a>Javaçš„æ„é€ å‡½æ•°</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> weightInPounds;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dog</span><span class="params">(<span class="type">int</span> w)</span> &#123;</span><br><span class="line">        weightInPounds = w;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">makeNoise</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (weightInPounds &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;yipyipyip!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weightInPounds &lt; <span class="number">30</span>) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;bark. bark.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;woof!&quot;</span>);</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯å½“æˆ‘ä»¬å°è¯• <code>Dog</code> åˆ›å»º using <code>new</code> å…³é”®å­—å’Œå•ä¸ªæ•´æ•°å‚æ•°æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨å¸¦æœ‰ç­¾å <code>public Dog(int w)</code> çš„æ„é€ å‡½æ•°ã€‚å¯¹äºé‚£äº›æ¥è‡ª Python çš„äººæ¥è¯´ï¼Œæ„é€ å‡½æ•°ä¸ <code>__init__</code> æ–¹æ³•éå¸¸ç›¸ä¼¼ã€‚</p><h2 id="æ•°ç»„å®ä¾‹åŒ–ï¼Œå¯¹è±¡æ•°ç»„"><a href="#æ•°ç»„å®ä¾‹åŒ–ï¼Œå¯¹è±¡æ•°ç»„" class="headerlink" title="æ•°ç»„å®ä¾‹åŒ–ï¼Œå¯¹è±¡æ•°ç»„"></a>æ•°ç»„å®ä¾‹åŒ–ï¼Œå¯¹è±¡æ•°ç»„</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DogArrayDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">/* Create an array of two dogs. */</span></span><br><span class="line">        Dog[] dogs = <span class="keyword">new</span> <span class="title class_">Dog</span>[<span class="number">2</span>];</span><br><span class="line">        dogs[<span class="number">0</span>] = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">8</span>);</span><br><span class="line">        dogs[<span class="number">1</span>] = <span class="keyword">new</span> <span class="title class_">Dog</span>(<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* Yipping will result, since dogs[0] has weight 8. */</span></span><br><span class="line">        dogs[<span class="number">0</span>].makeNoise();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œnew ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼ä½¿ç”¨ï¼šä¸€æ¬¡ç”¨äºåˆ›å»ºä¸€ä¸ªå¯ä»¥å®¹çº³ä¸¤ä¸ª <code>Dog</code> å¯¹è±¡çš„æ•°ç»„ï¼Œä¸¤æ¬¡ç”¨äºåˆ›å»ºæ¯ä¸ªå®é™… <code>Dog</code> çš„ .</p><h3 id="public-static-void-main-String-args-çš„è¯´æ˜"><a href="#public-static-void-main-String-args-çš„è¯´æ˜" class="headerlink" title="public static void main(String[] args)çš„è¯´æ˜"></a>public static void main(String[] args)çš„è¯´æ˜</h3><p>æ ¹æ®æˆ‘ä»¬ç›®å‰æ‰€å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ˜¯æ—¶å€™æ­å¼€æˆ‘ä»¬ä¸€ç›´ç”¨äº main æ–¹æ³•çš„å£°æ˜çš„ç¥ç§˜é¢çº±äº†ã€‚æŠŠå®ƒåˆ†æˆå‡ å—ï¼Œæˆ‘ä»¬æœ‰ï¼š</p><ul><li><code>public</code> ï¼šåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æ–¹æ³•éƒ½ä»¥è¿™ä¸ªå…³é”®å­—å¼€å¤´ã€‚</li><li>static&#96; ï¼šå®ƒæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¸ä¸ä»»ä½•ç‰¹å®šå®ä¾‹å…³è”ã€‚</li><li><code>void</code> ï¼šå®ƒæ²¡æœ‰è¿”å›ç±»å‹ã€‚</li><li><code>main</code> ï¼šè¿™æ˜¯æ–¹æ³•çš„åç§°ã€‚</li><li><code>String[] args</code> ï¼šè¿™æ˜¯ä¼ é€’ç»™ main æ–¹æ³•çš„å‚æ•°ã€‚</li></ul><h3 id="å‘½ä»¤è¡Œå‚æ•°"><a href="#å‘½ä»¤è¡Œå‚æ•°" class="headerlink" title="å‘½ä»¤è¡Œå‚æ•°"></a>å‘½ä»¤è¡Œå‚æ•°</h3><p>ç”±äº main æ˜¯ç”± Java è§£é‡Šå™¨æœ¬èº«è°ƒç”¨çš„ï¼Œè€Œä¸æ˜¯ç”±å¦ä¸€ä¸ª Java ç±»è°ƒç”¨çš„ï¼Œå› æ­¤è§£é‡Šå™¨çš„å·¥ä½œæ˜¯æä¾›è¿™äº›å‚æ•°ã€‚å®ƒä»¬é€šå¸¸å¼•ç”¨å‘½ä»¤è¡Œå‚æ•°ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ç¨‹åº <code>ArgsDemo</code> ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArgsDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(args[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥ç¨‹åºæ‰“å°å‡ºç¬¬ 0 ä¸ªå‘½ä»¤è¡Œå‚æ•°ï¼Œä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ java ArgsDemo these are command line arguments</span><br><span class="line">these</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œ <code>args</code> å…¶ä¸­æ¡ç›®ä¸º {â€œtheseâ€ï¼Œ â€œareâ€ï¼Œ â€œcommandâ€ï¼Œ â€œlineâ€ï¼Œ â€œargumentsâ€}ã€‚</p><blockquote><p>è¿™æ ·å­å¯ä»¥è¯†åˆ«å‘½å -m -v ç­‰</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS61Bå­¦ä¹ ç¬”è®°(ä¸€)--JAVAå¿«é€Ÿå…¥é—¨</title>
      <link href="/2024/01/16/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-JAVA%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/"/>
      <url>/2024/01/16/JAVA-CS61B-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1-CS61B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-JAVA%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p><a href="https://cscircles.cemc.uwaterloo.ca/java_visualize/#">Java Visualizer (uwaterloo.ca)</a>ç±»python tutorï¼Œå¯è§†åŒ–ä»£ç ç½‘ç«™ã€‚</p><h1 id="åŸºæœ¬ç¨‹åº"><a href="#åŸºæœ¬ç¨‹åº" class="headerlink" title="åŸºæœ¬ç¨‹åº"></a>åŸºæœ¬ç¨‹åº</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassNameHere</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">      x = x + <span class="number">1</span>;</span><br><span class="line">      System.out.println(x);</span><br><span class="line">      <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> x;</span><br><span class="line">      x = x + <span class="number">1</span>;</span><br><span class="line">      System.out.println(<span class="string">&quot;x is: &quot;</span> + x);</span><br><span class="line">      System.out.println(<span class="string">&quot;y is: &quot;</span> + y);      </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JAVAæ˜¯ä»¥ç±»ä¸ºå•ä½çš„é™æ€è¯­è¨€ï¼Œä¸å¯æˆ–ç¼º<strong>æ–‡ä»¶åå‘½åçš„ç±»</strong>ä»¥åŠ<strong>mainå‡½æ•°</strong>,è¯­æ³•ç±»ä¼¼cpp,ç»“å°¾éœ€è¦åˆ†å·<code>;</code>ã€‚</p><blockquote><p>åœ¨Javaä¸­ï¼Œå¦‚æœä¸€ä¸ªç±»æ˜¯publicå¹¶ä¸”åŒ…å«äº†mainæ–¹æ³•ï¼Œåˆ™æ–‡ä»¶åå¿…é¡»ä¸publicç±»çš„åç§°ç›¸åŒ¹é…ã€‚è¿™æ˜¯å› ä¸ºJavaè¦æ±‚publicç±»çš„åç§°ä¸åŒ…å«å®ƒçš„æ–‡ä»¶çš„åç§°ç›¸åŒã€‚å¦‚æœä¸€ä¸ªJavaæ–‡ä»¶åŒ…å«å¤šä¸ªç±»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç±»æ˜¯publicï¼Œå¹¶ä¸”æ–‡ä»¶åå¿…é¡»ä¸publicç±»çš„åç§°ç›¸åŒ¹é…ã€‚</p></blockquote><h1 id="æ§åˆ¶è¯­å¥"><a href="#æ§åˆ¶è¯­å¥" class="headerlink" title="æ§åˆ¶è¯­å¥"></a>æ§åˆ¶è¯­å¥</h1><h2 id="ifè¯­å¥"><a href="#ifè¯­å¥" class="headerlink" title="ifè¯­å¥"></a>ifè¯­å¥</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassNameHere</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">            x = x + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">10</span>)</span><br><span class="line">            x = x + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">dogSize</span> <span class="operator">=</span> <span class="number">20</span>;</span><br><span class="line"><span class="keyword">if</span> (dogSize &gt;= <span class="number">50</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;woof!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (dogSize &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;bark!&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;yip!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒcpp</p><h2 id="whileå¾ªç¯"><a href="#whileå¾ªç¯" class="headerlink" title="whileå¾ªç¯"></a>whileå¾ªç¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">bottles</span> <span class="operator">=</span> <span class="number">99</span>;</span><br><span class="line"><span class="keyword">while</span> (bottles &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(bottles + <span class="string">&quot; bottles of beer on the wall.&quot;</span>);</span><br><span class="line">    bottles = bottles - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒcpp</p><h2 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassNameHere</span> &#123;</span><br><span class="line">    <span class="comment">/** Uses a basic for loop to sum a. */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span>[] a)</span> &#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i = i + <span class="number">1</span>) &#123;</span><br><span class="line">        sum = sum + a[i];</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒcpp</p><h2 id="å¢å¼ºçš„Forå¾ªç¯"><a href="#å¢å¼ºçš„Forå¾ªç¯" class="headerlink" title="å¢å¼ºçš„Forå¾ªç¯"></a>å¢å¼ºçš„Forå¾ªç¯</h2><p>Java è¿˜æ”¯æŒä½¿ç”¨â€œå¢å¼ºçš„ for å¾ªç¯â€é€šè¿‡æ•°ç»„è¿›è¡Œè¿­ä»£ã€‚åŸºæœ¬æ€æƒ³æ˜¯ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å®é™…ä¸Šæ ¹æœ¬ä¸å…³å¿ƒæŒ‡æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¿å…ä½¿ç”¨æ¶‰åŠå†’å·çš„ç‰¹æ®Šè¯­æ³•åˆ›å»ºç´¢å¼•å˜é‡ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸ <code>BreakDemo</code> ä¸Šè¿°å®Œå…¨ç›¸åŒçš„æ“ä½œã€‚ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼š åˆ›å»ºç´¢å¼• <code>i</code> .å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œä» <code>a[0]</code> ï¼Œ <code>String</code> <code>s</code> ä¸€ç›´ <code>String</code> <code>a</code> åˆ° <code>a[a.length - 1]</code> ã€‚æ‚¨å¯ä»¥åœ¨æ­¤é“¾æ¥ä¸­è¯•ç”¨æ­¤ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnhancedForBreakDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        String[] a = &#123;<span class="string">&quot;cat&quot;</span>, <span class="string">&quot;dog&quot;</span>, <span class="string">&quot;laser horse&quot;</span>, <span class="string">&quot;ketchup&quot;</span>, <span class="string">&quot;horse&quot;</span>, <span class="string">&quot;horbse&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String s : a) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; <span class="number">3</span>; j += <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(s);</span><br><span class="line">                <span class="keyword">if</span> (s.contains(<span class="string">&quot;horse&quot;</span>)) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å®šä¹‰å‡½æ•°"><a href="#å®šä¹‰å‡½æ•°" class="headerlink" title="å®šä¹‰å‡½æ•°"></a>å®šä¹‰å‡½æ•°</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y) &#123;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(max(<span class="number">10</span>, <span class="number">15</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Java ä¸­çš„å‡½æ•°ä¸å˜é‡ä¸€æ ·ï¼Œå…·æœ‰ç‰¹å®šçš„è¿”å›ç±»å‹ã€‚è¯¥ <code>max</code> å‡½æ•°çš„è¿”å›ç±»å‹ <code>int</code> ä¸º ï¼ˆç”±å‡½æ•°åç§°å‰çš„å•è¯â€œintâ€è¡¨ç¤ºï¼‰ã€‚Java ä¸­çš„å‡½æ•°ä¹Ÿè¢«ç§°ä¸ºæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘å°†ä»è¿™ä¸€åˆ»å¼€å§‹æ°¸è¿œè¿™æ ·ç§°å‘¼å®ƒä»¬ã€‚</p><p>æˆ‘ä»¬å°†æ•´ä¸ªå­—ç¬¦ä¸² <code>public static int max(int x, int y)</code> ç§°ä¸ºæ–¹æ³•çš„ç­¾åï¼Œå› ä¸ºå®ƒåˆ—å‡ºäº†å‚æ•°ã€è¿”å›ç±»å‹ã€åç§°å’Œä»»ä½•ä¿®é¥°ç¬¦ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä¿®é¥°ç¬¦æ˜¯ <code>public</code> å’Œ <code>static</code> ï¼Œå°½ç®¡æˆ‘ä»¬å‡ å¤©å†…ä¸ä¼šäº†è§£è¿™äº›ä¿®é¥°ç¬¦çš„å«ä¹‰ã€‚</p><p>CPP</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> iostream</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">max</span><span class="params">(<span class="type">int</span> x, iny)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">return</span> y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    std::cout&lt;&lt;(<span class="built_in">max</span>(<span class="number">10</span>, <span class="number">15</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">max</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">if</span> (x &gt; y):</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">return</span> y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">max</span>(<span class="number">5</span>, <span class="number">15</span>))</span><br></pre></td></tr></table></figure><p>MATLAB</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">m</span> = <span class="title">max</span><span class="params">(x, y)</span></span></span><br><span class="line">    <span class="keyword">if</span> (x &gt; y)</span><br><span class="line">        m = x</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        m = y</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="built_in">max</span>(<span class="number">5</span>, <span class="number">15</span>))</span><br></pre></td></tr></table></figure><h1 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] numbers = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">3</span>];</span><br><span class="line">numbers[<span class="number">0</span>] = <span class="number">4</span>;</span><br><span class="line">numbers[<span class="number">1</span>] = <span class="number">7</span>;</span><br><span class="line">numbers[<span class="number">2</span>] = <span class="number">10</span>;</span><br><span class="line">System.out.println(numbers[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><p>Or</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>[] numbers = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>, <span class="number">7</span>, <span class="number">10</span>&#125;;</span><br><span class="line">System.out.println(numbers[<span class="number">1</span>]);</span><br></pre></td></tr></table></figure><blockquote><p>æ‚¨å¯ä»¥ä½¿ç”¨ <code>.length</code> ä»¥ä¸‹ä»£ç è·å–æ•°ç»„çš„é•¿åº¦ <code>3</code> </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> JAVA </category>
          
          <category> CS61B </category>
          
          <category> CS61B </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JAVA </tag>
            
            <tag> CS61B </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CPPâ€”é¢å¯¹å¯¹è±¡</title>
      <link href="/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/"/>
      <url>/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CPPâ€”åŸºç¡€è¯­æ³•</title>
      <link href="/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/"/>
      <url>/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ•°ç»„ä¹‹å‰çš„çŸ¥è¯†æ˜¯åŸºç¡€ä¸­çš„åŸºç¡€å°±ä¸å†æ•´ç†äº†,åªæŒ‘å‡ ä¸ªç¨å¾®è¦çœ‹ä¸€ä¸‹çš„ã€‚</p><h1 id="switchè¯­å¥"><a href="#switchè¯­å¥" class="headerlink" title="switchè¯­å¥"></a>switchè¯­å¥</h1><p>åŸºæœ¬è¯­æ³•ä¾‹å­ç¤ºèŒƒ</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> day = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Monday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Tuesday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Wednesday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Thursday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Friday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Weekend&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºç»“æœä¸º Wednesdayï¼›</p></blockquote><p>å¦‚æœcaseè¯­å¥ä¸­æ²¡æœ‰break;é‚£ä¹ˆå°†æ‰§è¡Œè¯¥caseä¸‹çš„æ‰€æœ‰è¯­å¥:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> day = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">switch</span> (day) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Monday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰breakï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Tuesday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰breakï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Wednesday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰breakï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Thursday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰breakï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Friday&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">            <span class="comment">// æ²¡æœ‰breakï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªcase</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            std::cout &lt;&lt; <span class="string">&quot;Weekend&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¾“å‡ºç»“æœ:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Wednesday</span><br><span class="line">Thursday</span><br><span class="line">Friday</span><br><span class="line">Weekend</span><br></pre></td></tr></table></figure></blockquote><p>å…¶ä»–éœ€è¦æ³¨æ„çš„ç‚¹:</p><ul><li><p>switchååœ†æ‹¬å·ä¸­çš„è¡¨è¾¾å¼çš„ç±»å‹åªèƒ½æ˜¯æ•´å‹æˆ–èƒ½å¤Ÿéšå¼è½¬æ¢ä¸ºæ•´å‹çš„ç±»å‹(å¦‚å­—ç¬¦å‹,æˆ–æšä¸¾å‹)</p></li><li><p>æ¯ä¸ªcaseè¯­å¥åå¿…é¡»æ˜¯ä¸è¡¨è¾¾å¼ç±»å‹å…¼å®¹çš„ä¸€ä¸ªå¸¸é‡(ä½†ä¸èƒ½æ˜¯<strong>å­—ç¬¦ä¸²å¸¸é‡</strong>)</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span> grade = <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">    <span class="keyword">switch</span> (grade) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;A&#x27;</span>:  <span class="comment">// å­—ç¬¦å¸¸é‡ï¼Œä¸è¡¨è¾¾å¼ç±»å‹å…¼å®¹</span></span><br><span class="line">            <span class="comment">// ä»£ç å—</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:    <span class="comment">// æ•´æ•°å¸¸é‡ï¼Œä¸è¡¨è¾¾å¼ç±»å‹å…¼å®¹</span></span><br><span class="line">            <span class="comment">// ä»£ç å—</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2.5</span>:  <span class="comment">// é”™è¯¯ï¼Œæµ®ç‚¹æ•°å¸¸é‡ä¸å­—ç¬¦ç±»å‹ä¸å…¼å®¹</span></span><br><span class="line">            <span class="comment">// ä»£ç å—</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&quot;B&quot;</span>:  <span class="comment">// é”™è¯¯ï¼Œå­—ç¬¦ä¸²å¸¸é‡ä¸å…¼å®¹</span></span><br><span class="line">            <span class="comment">// ä»£ç å—</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="do-whileè¯­å¥"><a href="#do-whileè¯­å¥" class="headerlink" title="do-whileè¯­å¥"></a>do-whileè¯­å¥</h1><p>åŸºæœ¬è¯­æ³•ä¾‹å­</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;Count: &quot;</span> &lt;&lt; count &lt;&lt; std::endl;</span><br><span class="line">        count++;</span><br><span class="line">    &#125; <span class="keyword">while</span> (count &lt; <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ³¨æ„whileåé¢æœ‰<strong>åˆ†å·;</strong></li></ul><h1 id="å­—ç¬¦ä¸²æ•°ç»„å¸¸ç”¨å‡½æ•°"><a href="#å­—ç¬¦ä¸²æ•°ç»„å¸¸ç”¨å‡½æ•°" class="headerlink" title="å­—ç¬¦ä¸²æ•°ç»„å¸¸ç”¨å‡½æ•°"></a>å­—ç¬¦ä¸²æ•°ç»„å¸¸ç”¨å‡½æ•°</h1><h2 id="strcat-å­—ç¬¦ä¸²è¿æ¥å‡½æ•°"><a href="#strcat-å­—ç¬¦ä¸²è¿æ¥å‡½æ•°" class="headerlink" title="strcat-å­—ç¬¦ä¸²è¿æ¥å‡½æ•°"></a>strcat-å­—ç¬¦ä¸²è¿æ¥å‡½æ•°</h2><h3 id="å‡½æ•°åŸå½¢"><a href="#å‡½æ•°åŸå½¢" class="headerlink" title="å‡½æ•°åŸå½¢:"></a>å‡½æ•°åŸå½¢:</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strcat</span><span class="params">(<span class="type">char</span> str1[],<span class="type">const</span> <span class="type">char</span> str2[])</span></span>;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>æŠŠstr2ä¸­çš„å­—ç¬¦ä¸²è¿æ¥åˆ°str1å­—ç¬¦çš„åé¢, str1ä¸­å­—ç¬¦çš„ç»“æŸæ ‡å¿—<code>\0</code>è¢«st2é‡Œçš„å­—ç¬¦ä¸²åŠå…¶ç»“æŸæ ‡å¿—æ‰€è¦†ç›–ã€‚æœ¬å‡½æ•°è¿”å›å€¼æ˜¯str1çš„é¦–åœ°å€ã€‚</p><p><img src="/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20231220200644095.png" alt="image-20231220200644095"></p><h2 id="strcpy-å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•°"><a href="#strcpy-å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•°" class="headerlink" title="strcpy-å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•°"></a>strcpy-å­—ç¬¦ä¸²å¤åˆ¶å‡½æ•°</h2><h3 id="å‡½æ•°åŸå‹"><a href="#å‡½æ•°åŸå‹" class="headerlink" title="å‡½æ•°åŸå‹"></a>å‡½æ•°åŸå‹</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span>* <span class="title">strcat</span><span class="params">(<span class="type">char</span> str1[],<span class="type">const</span> <span class="type">char</span> str2[])</span></span>;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>æŠŠstr2ä¸­çš„å­—ç¬¦ä¸²å¤åˆ¶åˆ°str1ä¸­ï¼Œstr2ä¸­çš„ä¸²ç»“æŸæ ‡å¿—â€\0â€ä¹Ÿä¸€åŒå¤åˆ¶ã€‚å‚æ•°str2è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œè¿™æ—¶ç›¸å½“äºæŠŠä¸€ä¸ªå­—ç¬¦ä¸²èµ‹äºˆä¸€ä¸ªå­—ç¬¦æ•°ç»„ã€‚</p><p><img src="/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20231220200904869.png" alt="image-20231220200904869"></p><h2 id="strcmp-å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°"><a href="#strcmp-å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°" class="headerlink" title="strcmp-å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°"></a>strcmp-å­—ç¬¦ä¸²æ¯”è¾ƒå‡½æ•°</h2><h3 id="å‡½æ•°åŸå‹-1"><a href="#å‡½æ•°åŸå‹-1" class="headerlink" title="å‡½æ•°åŸå‹"></a>å‡½æ•°åŸå‹</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">strcmp</span><span class="params">(<span class="type">const</span> <span class="type">char</span> str1[],<span class="type">const</span> <span class="type">char</span> str2[])</span></span>;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨-2"><a href="#ä½œç”¨-2" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>ä¾ç…§ASCIIç è¡¨ä¸­çš„å€¼çš„å¤§å°ï¼Œä¾æ¬¡æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­å¯¹åº”ä½ç½®ä¸Šçš„å­—ç¬¦ï¼Œå¹¶ç”±å‡½æ•°è¿”å›å€¼è¿”å›æ¯”è¾ƒç»“æœã€‚</p><p><img src="/2023/12/20/CPP-CPP%E7%9F%A5%E8%AF%86%E6%B1%87%E6%80%BB-CPP%E2%80%94%E2%80%94%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/image-20231220201312707.png" alt="image-20231220201312707"></p><h2 id="strlen-è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°"><a href="#strlen-è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°" class="headerlink" title="strlen-è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°"></a>strlen-è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦å‡½æ•°</h2><h3 id="å‡½æ•°åŸå‹-2"><a href="#å‡½æ•°åŸå‹-2" class="headerlink" title="å‡½æ•°åŸå‹"></a>å‡½æ•°åŸå‹</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">strlen</span><span class="params">(<span class="type">const</span> <span class="type">char</span> str[])</span></span>;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨-3"><a href="#ä½œç”¨-3" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>è®¡ç®—å­—ç¬¦ä¸²ä¸­çš„é•¿åº¦,è¿”å›é¦–æ¬¡å‡ºç°çš„ç»“æŸæ ‡å¿—<code>\0</code>ä¹‹å‰çš„å­—ç¬¦æ•°,å¹¶ä½œä¸ºè¿”å›å€¼ã€‚</p><blockquote><p>è®¡ç®—æ—¶ä¸åŒ…æ‹¬\0</p></blockquote><h1 id="æŒ‡é’ˆ"><a href="#æŒ‡é’ˆ" class="headerlink" title="æŒ‡é’ˆ"></a>æŒ‡é’ˆ</h1><h2 id="æŒ‡é’ˆçš„å®šä¹‰ä¸å£°æ˜"><a href="#æŒ‡é’ˆçš„å®šä¹‰ä¸å£°æ˜" class="headerlink" title="æŒ‡é’ˆçš„å®šä¹‰ä¸å£°æ˜"></a>æŒ‡é’ˆçš„å®šä¹‰ä¸å£°æ˜</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *ptr;  <span class="comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘æ•´æ•°çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">double</span> *dblPtr;  <span class="comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘åŒç²¾åº¦æµ®ç‚¹æ•°çš„æŒ‡é’ˆ</span></span><br><span class="line"><span class="type">char</span> *charPtr;  <span class="comment">// å®šä¹‰ä¸€ä¸ªæŒ‡å‘å­—ç¬¦çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure><h2 id="å–åœ°å€æ“ä½œç¬¦"><a href="#å–åœ°å€æ“ä½œç¬¦" class="headerlink" title="å–åœ°å€æ“ä½œç¬¦&amp;"></a>å–åœ°å€æ“ä½œç¬¦<code>&amp;</code></h2><p>å–åœ°å€æ“ä½œç¬¦ <code>&amp;</code> ç”¨äºè·å–å˜é‡çš„å†…å­˜åœ°å€ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line"><span class="type">int</span> *ptr = &amp;number;  <span class="comment">// å°†å˜é‡numberçš„åœ°å€èµ‹ç»™æŒ‡é’ˆptr</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‡é’ˆå’Œå‡½æ•°"><a href="#æŒ‡é’ˆå’Œå‡½æ•°" class="headerlink" title="æŒ‡é’ˆå’Œå‡½æ•°:"></a>æŒ‡é’ˆå’Œå‡½æ•°:</h2><p>æŒ‡é’ˆå¯ä»¥ç”¨äºä¼ é€’åœ°å€ï¼Œä»è€Œåœ¨å‡½æ•°ä¸­ä¿®æ”¹å®é™…å‚æ•°çš„å€¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">modifyValue</span><span class="params">(<span class="type">int</span> *ptr)</span> </span>&#123;</span><br><span class="line">    *ptr = <span class="number">100</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> number = <span class="number">42</span>;</span><br><span class="line">    <span class="type">int</span> *ptr = &amp;number;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">modifyValue</span>(ptr);  <span class="comment">// ä¼ é€’æŒ‡å‘numberçš„æŒ‡é’ˆç»™å‡½æ•°</span></span><br><span class="line">    <span class="comment">// ç°åœ¨ï¼Œnumberçš„å€¼è¢«ä¿®æ”¹ä¸º100</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æŒ‡é’ˆè§£å¼•ç”¨æ“ä½œç¬¦"><a href="#æŒ‡é’ˆè§£å¼•ç”¨æ“ä½œç¬¦" class="headerlink" title="æŒ‡é’ˆè§£å¼•ç”¨æ“ä½œç¬¦ *"></a>æŒ‡é’ˆè§£å¼•ç”¨æ“ä½œç¬¦ <code>*</code></h2><p>æŒ‡é’ˆè§£å¼•ç”¨æ“ä½œç¬¦ <code>*</code> ç”¨äºè®¿é—®æŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€çš„å€¼ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> value = *ptr;  <span class="comment">// è·å–ptræŒ‡é’ˆæ‰€æŒ‡å‘åœ°å€çš„å€¼ï¼Œå°†å…¶èµ‹ç»™å˜é‡value</span></span><br></pre></td></tr></table></figure><h2 id="åŠ¨æ€å†…å­˜åˆ†é…ä¸é‡Šæ”¾"><a href="#åŠ¨æ€å†…å­˜åˆ†é…ä¸é‡Šæ”¾" class="headerlink" title="åŠ¨æ€å†…å­˜åˆ†é…ä¸é‡Šæ”¾:"></a>åŠ¨æ€å†…å­˜åˆ†é…ä¸é‡Šæ”¾:</h2><p>ä½¿ç”¨ <code>new</code> æ“ä½œç¬¦å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åˆ†é…å†…å­˜ï¼Œè€Œ <code>delete</code> æ“ä½œç¬¦ç”¨äºé‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *dynamicPtr = <span class="keyword">new</span> <span class="type">int</span>;  <span class="comment">// åŠ¨æ€åˆ†é…ä¸€ä¸ªæ•´æ•°å¤§å°çš„å†…å­˜ç©ºé—´</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ dynamicPtr æ“ä½œå†…å­˜</span></span><br><span class="line"><span class="keyword">delete</span> dynamicPtr;  <span class="comment">// é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜</span></span><br></pre></td></tr></table></figure><h2 id="æŒ‡é’ˆå’Œæ•°ç»„"><a href="#æŒ‡é’ˆå’Œæ•°ç»„" class="headerlink" title="æŒ‡é’ˆå’Œæ•°ç»„"></a>æŒ‡é’ˆå’Œæ•°ç»„</h2><p>æŒ‡é’ˆå’Œæ•°ç»„ä¹‹é—´æœ‰ç€å¯†åˆ‡çš„å…³ç³»ï¼ŒæŒ‡é’ˆå¯ä»¥ç”¨äºè®¿é—®æ•°ç»„å…ƒç´ ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> numbers[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> *arrPtr = numbers;  <span class="comment">// å°†æ•°ç»„åèµ‹ç»™æŒ‡é’ˆï¼ŒæŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure><h2 id="ç©ºæŒ‡é’ˆ"><a href="#ç©ºæŒ‡é’ˆ" class="headerlink" title="ç©ºæŒ‡é’ˆ"></a>ç©ºæŒ‡é’ˆ</h2><p>ç©ºæŒ‡é’ˆè¡¨ç¤ºä¸æŒ‡å‘ä»»ä½•æœ‰æ•ˆçš„å†…å­˜åœ°å€ã€‚åœ¨C++ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>nullptr</code> æ¥è¡¨ç¤ºç©ºæŒ‡é’ˆï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *nullPtr = <span class="literal">nullptr</span>;  <span class="comment">// å®šä¹‰ä¸€ä¸ªç©ºæŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure><h2 id="å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡"><a href="#å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡" class="headerlink" title="å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡"></a>å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡</h2><ul><li><p>å¸¸é‡æŒ‡é’ˆï¼šæŒ‡é’ˆæœ¬èº«ä¸å¯å˜ï¼Œä½†æŒ‡å‘çš„å€¼å¯å˜ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> value = <span class="number">42</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *ptr = &amp;value;  <span class="comment">// æŒ‡å‘å¸¸é‡çš„æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure></li><li><p>æŒ‡é’ˆå¸¸é‡ï¼šæŒ‡å‘çš„å€¼ä¸å¯å˜ï¼Œä½†æŒ‡é’ˆæœ¬èº«å¯å˜ã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> value = <span class="number">42</span>;</span><br><span class="line"><span class="type">int</span> *<span class="type">const</span> ptr = &amp;value;  <span class="comment">// å¸¸é‡æŒ‡é’ˆ</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h1><h2 id="é“¾è¡¨çš„åˆ›å»º"><a href="#é“¾è¡¨çš„åˆ›å»º" class="headerlink" title="é“¾è¡¨çš„åˆ›å»º"></a>é“¾è¡¨çš„åˆ›å»º</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">Set a, b;</span><br><span class="line"><span class="built_in">init</span>(&amp;a);</span><br><span class="line"><span class="built_in">init</span>(&amp;b);</span><br><span class="line"><span class="built_in">createSet</span>(&amp;a);</span><br><span class="line"><span class="built_in">createSet</span>(&amp;b);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> n, k, m;</span><br><span class="line">cin &gt;&gt; n &gt;&gt; k &gt;&gt; m;</span><br><span class="line">List lst;</span><br><span class="line"><span class="built_in">createList</span>(lst, n);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‘å‰æ’å…¥ç”Ÿæˆ"><a href="#å‘å‰æ’å…¥ç”Ÿæˆ" class="headerlink" title="å‘å‰æ’å…¥ç”Ÿæˆ"></a>å‘å‰æ’å…¥ç”Ÿæˆ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line">Node* next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Set</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> num;</span><br><span class="line">Node* head;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(Set* x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">x-&gt;head = <span class="literal">NULL</span>;</span><br><span class="line">x-&gt;num = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createSet</span><span class="params">(Set* x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//ç”Ÿæˆé“¾è¡¨æ—¶ä¸€å®šé‡‡ç”¨å¾€å‰æ’å…¥çš„æ–¹æ³•ï¼Œå³æ¯ä¸ªæ–°äº§ç”Ÿçš„ç»“ç‚¹æ’å…¥åˆ°é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„å‰é¢ã€‚</span></span><br><span class="line"><span class="type">int</span> n, i;</span><br><span class="line">cin &gt;&gt; n;</span><br><span class="line">Node* node = <span class="keyword">new</span> Node;</span><br><span class="line">cin &gt;&gt; node-&gt;data;</span><br><span class="line">node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">x-&gt;head = node;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n<span class="number">-1</span>; i++) &#123;</span><br><span class="line">Node* node = <span class="keyword">new</span> Node;</span><br><span class="line">cin &gt;&gt; node -&gt; data;</span><br><span class="line">node -&gt; next = x-&gt;head;</span><br><span class="line">x-&gt;head = node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="å‘åæ’å…¥"><a href="#å‘åæ’å…¥" class="headerlink" title="å‘åæ’å…¥"></a>å‘åæ’å…¥</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line"><span class="type">int</span> data;</span><br><span class="line">Node* next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">List</span> &#123;</span><br><span class="line"></span><br><span class="line">Node* head;</span><br><span class="line"><span class="type">int</span> length;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">createList</span><span class="params">(List&amp; lst, <span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="comment">//ç”Ÿæˆé“¾è¡¨æ—¶é‡‡ç”¨å¾€åæ’å…¥çš„æ–¹æ³•ï¼Œå³æ¯ä¸ªæ–°ç»“ç‚¹æ’å…¥åˆ°é“¾è¡¨å°¾éƒ¨ã€‚</span></span><br><span class="line">lst.length = n;</span><br><span class="line">Node* _head = <span class="keyword">new</span> Node;</span><br><span class="line">_head-&gt;data = <span class="number">1</span>;</span><br><span class="line">lst.head = _head;</span><br><span class="line">Node* tail = _head;</span><br><span class="line"><span class="type">int</span> i = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">for</span> (i; i &lt;= n; i++) &#123;</span><br><span class="line">Node* node = <span class="keyword">new</span> Node;</span><br><span class="line">node-&gt;data = i;</span><br><span class="line">tail-&gt;next = node;</span><br><span class="line">tail = tail-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="å®éªŒé¢˜ç›®"><a href="#å®éªŒé¢˜ç›®" class="headerlink" title="å®éªŒé¢˜ç›®"></a>å®éªŒé¢˜ç›®</h1><h2 id="æ¼‚äº®çš„é€’å½’"><a href="#æ¼‚äº®çš„é€’å½’" class="headerlink" title="æ¼‚äº®çš„é€’å½’"></a>æ¼‚äº®çš„é€’å½’</h2><p>ã€é—®é¢˜æè¿°ã€‘é”®ç›˜è¾“å…¥æ­£æ•´æ•° nï¼Œæ±‚å‡ºnä¸å…¶ååºæ•°xä¹‹å’Œå¹¶è¾“å‡ºã€‚ä¾‹å¦‚ï¼Œè¾“å…¥2038ï¼Œn+x &#x3D; 2038 +8302 &#x3D;10340ï¼Œè¾“å‡ºåº”ä¸º10340ã€‚è¦æ±‚ï¼šç¼–å†™å‡½æ•°å®ç°æ•°æ®è½¬æ¢æˆååºæ•°å€¼ã€‚ã€è¾“å…¥å½¢å¼ã€‘è¾“å…¥ä¸€ä¸ªæ•´æ•°ï¼› ã€è¾“å‡ºå½¢å¼ã€‘è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼› ã€æ ·ä¾‹è¾“å…¥ã€‘2038 ã€æ ·ä¾‹è¾“å‡ºã€‘10340 ã€æ ·ä¾‹è¯´æ˜ã€‘ä¸è¦ä»»ä½•è¾“å…¥è¾“å‡ºçš„æ–‡å­—æç¤ºã€‚</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">reverse</span><span class="params">(<span class="type">int</span> n, <span class="type">int</span> store = <span class="number">0</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (n &lt; <span class="number">10</span>) <span class="keyword">return</span> store + n;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">store += n % <span class="number">10</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">reverse</span>(n / <span class="number">10</span>, store * <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="type">int</span> n, reverse_num;</span><br><span class="line">std::cin &gt;&gt; n;</span><br><span class="line">reverse_num = <span class="built_in">reverse</span>(n);</span><br><span class="line">std::cout &lt;&lt; n + reverse_num;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å†™é€’å½’æœ€å…³é”®çš„åœ°æ–¹åœ¨äº<strong>åŸºæœ¬æ¡ä»¶</strong>ï¼ŒåŸºæœ¬æ¡ä»¶å‡ºæ¥äº†ï¼Œé€’å½’çš„è½¬æŠ˜ç‚¹ä¹Ÿå°±å‡ºæ¥äº†ã€‚</p></blockquote><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„çš„æ—‹è½¬"><a href="#æ•°ç»„çš„æ—‹è½¬" class="headerlink" title="æ•°ç»„çš„æ—‹è½¬"></a>æ•°ç»„çš„æ—‹è½¬</h3><p><strong>ã€é—®é¢˜æè¿°ã€‘</strong> æ—‹è½¬æ˜¯å›¾åƒå¤„ç†çš„åŸºæœ¬æ“ä½œï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œä½ éœ€è¦å°†ä¸€ä¸ªå›¾åƒé€†æ—¶é’ˆæ—‹è½¬90åº¦ã€‚ è®¡ç®—æœºä¸­çš„å›¾åƒè¡¨ç¤ºå¯ä»¥ç”¨ä¸€ä¸ªçŸ©é˜µæ¥è¡¨ç¤ºï¼Œä¸ºäº†æ—‹è½¬ä¸€ä¸ªå›¾åƒï¼Œåªéœ€è¦å°†å¯¹åº”çš„çŸ©é˜µæ—‹è½¬å³å¯ã€‚ <strong>ã€è¾“å…¥æ ¼å¼ã€‘</strong> è¾“å…¥çš„ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°n, mï¼ˆ1â‰¤n, mâ‰¤10ï¼‰ï¼Œåˆ†åˆ«è¡¨ç¤ºå›¾åƒçŸ©é˜µçš„è¡Œæ•°å’Œåˆ—æ•°ã€‚ æ¥ä¸‹æ¥nè¡Œæ¯è¡ŒåŒ…å«mä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¾“å…¥çš„å›¾åƒã€‚ </p><p><strong>ã€è¾“å‡ºæ ¼å¼ã€‘</strong> è¾“å‡ºmè¡Œï¼Œæ¯è¡ŒåŒ…å«nä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºåŸå§‹çŸ©é˜µé€†æ—¶é’ˆæ—‹è½¬90åº¦åçš„çŸ©é˜µã€‚æ¯è¡Œåç©ºæ ¼ç»“æŸã€‚ </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ã€æ ·ä¾‹è¾“å…¥ã€‘</span><br><span class="line">        2 3</span><br><span class="line">        1 5 3</span><br><span class="line">        3 2 4</span><br><span class="line">ã€æ ·ä¾‹è¾“å‡ºã€‘</span><br><span class="line">        3 4 </span><br><span class="line">        5 2 </span><br><span class="line">        1 3 </span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m;</span><br><span class="line">    <span class="type">int</span> ls[<span class="number">10</span>][<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="type">int</span> ls2[<span class="number">10</span>][<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–lsæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line">            cin &gt;&gt; ls[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ•°ç»„æ—‹è½¬</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            ls2[i][j] = ls[j][m - i - <span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¾“å‡ºæ—‹è½¬åçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            cout &lt;&lt; ls2[i][j]&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ä¹Ÿå¯ä»¥åŠ¨æ€å¼€è¾Ÿ:</p><p>&#x2F;&#x2F; ä½¿ç”¨newè¿ç®—ç¬¦åˆ†é…å†…å­˜<br>int** ls &#x3D; new int* [n];<br>for (int i &#x3D; 0; i &lt; n; ++i) {<br>    ls[i] &#x3D; new int[m];<br>}<br>for (int i &#x3D; 0; i &lt; n; i++) {<br>    for (int j &#x3D; 0; j &lt; m; j++) {<br>        cin &gt;&gt; ls[i][j];<br>    }<br>}</p></blockquote><h3 id="æ±‚äºŒç»´æ•°ç»„çš„éç‚¹"><a href="#æ±‚äºŒç»´æ•°ç»„çš„éç‚¹" class="headerlink" title="æ±‚äºŒç»´æ•°ç»„çš„éç‚¹"></a>æ±‚äºŒç»´æ•°ç»„çš„éç‚¹</h3><p>ã€é—®é¢˜æè¿°ã€‘æ‰¾å‡ºä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ˆä»¥ä¸‰è¡Œå››åˆ—çš„æ•°ç»„ä¸ºä¾‹ï¼‰ä¸­çš„éç‚¹ï¼Œå³è¯¥ä½ç½®ä¸Šçš„å…ƒç´ åœ¨è¯¥è¡Œä¸Šå€¼æœ€å¤§ï¼Œåœ¨è¯¥åˆ—ä¸Šå€¼æœ€å°ï¼ˆä¹Ÿå¯èƒ½æ²¡æœ‰éç‚¹ï¼‰ã€‚</p><p>ã€è¾“å…¥å½¢å¼ã€‘äºŒç»´æ•°ç»„ï¼ˆä»¥ä¸‰è¡Œå››åˆ—çš„æ•°ç»„ä¸ºä¾‹ï¼‰</p><p>ã€è¾“å‡ºå½¢å¼ã€‘å¦‚æœæœ‰éç‚¹ï¼Œè¾“å‡ºéç‚¹çš„å€¼åŠæ‰€åœ¨è¡Œåˆ—ï¼ˆä¾‹å¦‚[1][2]&#x3D;96 is Saddle Pointï¼‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè¾“å‡ºæ²¡æœ‰éç‚¹ï¼ˆä¾‹å¦‚ No Saddle Pointï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ã€æ ·ä¾‹è¾“å…¥ã€‘ </span><br><span class="line">  9 80 205 40</span><br><span class="line">  90 60 96 1</span><br><span class="line">  210 3 101 89</span><br><span class="line">ã€æ ·ä¾‹è¾“å‡ºã€‘</span><br><span class="line">  [1][2]=96 is Saddle Point</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> ls[<span class="number">3</span>][<span class="number">4</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="type">int</span> min = <span class="number">999</span>, max = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">cin &gt;&gt; ls[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> row = <span class="number">0</span>, col = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)&#123;</span><br><span class="line"><span class="keyword">if</span> (ls[i][j] &gt; max) &#123;</span><br><span class="line">max = ls[i][j];</span><br><span class="line">col = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">3</span>; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (ls[j][col] &lt; min) &#123;</span><br><span class="line">min = ls[j][col];</span><br><span class="line">row = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (ls[row][col] == max) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">max = <span class="number">0</span>;</span><br><span class="line">min = <span class="number">999</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (min == max) cout &lt;&lt; <span class="string">&quot;[&quot;</span> &lt;&lt; row &lt;&lt; <span class="string">&#x27;]&#x27;</span> &lt;&lt; <span class="string">&#x27;[&#x27;</span> &lt;&lt; col &lt;&lt; <span class="string">&quot;] = &quot;</span> &lt;&lt; min &lt;&lt; <span class="string">&quot; is Saddle Point&quot;</span>;</span><br><span class="line"><span class="keyword">else</span> cout &lt;&lt; <span class="string">&#x27;NO&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦ä¸²æ•°ç»„"><a href="#å­—ç¬¦ä¸²æ•°ç»„" class="headerlink" title="å­—ç¬¦ä¸²æ•°ç»„"></a>å­—ç¬¦ä¸²æ•°ç»„</h3><p>ã€é¢˜ç›®æè¿°ã€‘<br>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆé•¿åº¦ä¸è¶…è¿‡255ï¼‰ï¼Œè¯·æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰çš„æ­£æ•´æ•°ï¼ˆå¦‚-12ï¼Œå½“ä½œ12ï¼‰ï¼Œç„¶åè¾“å‡ºå…¶ä¸­çš„ç´ æ•°ã€‚å¦‚æœå‡ºç°12.5ï¼Œåˆ™çœ‹ä½œ12å’Œ5ä¸¤ä¸ªæ•´æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ã€æ ·ä¾‹è¾“å…¥ã€‘</span><br><span class="line"> How3.5many12prime-17number79inthestring.</span><br><span class="line">ã€æ ·ä¾‹è¾“å‡ºã€‘</span><br><span class="line"> 3 5 17 79</span><br></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">is_prime</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (n % i == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">string str;</span><br><span class="line">cin &gt;&gt; str;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; str.<span class="built_in">length</span>()) &#123;</span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (str[i] &gt; <span class="string">&#x27;0&#x27;</span> &amp;&amp; str[i] &lt;= <span class="string">&#x27;9&#x27;</span>) &#123;</span><br><span class="line">num = num * <span class="number">10</span> + str[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">is_prime</span>(num) &amp;&amp; num &gt; <span class="number">1</span>) cout &lt;&lt; num &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥äº†è§£è®¡ç®—æœºåŸç†--ç¬¬ä¸€ç« </title>
      <link href="/2023/12/14/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86-index/"/>
      <url>/2023/12/14/%E8%AF%BB%E4%B8%80%E6%9C%AC%E5%A5%BD%E4%B9%A6-%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%90%86-index/</url>
      
        <content type="html"><![CDATA[<h1 id="äºŒã€ä¿¡æ¯çš„è¡¨ç¤ºå’Œè¡¨è¾¾"><a href="#äºŒã€ä¿¡æ¯çš„è¡¨ç¤ºå’Œè¡¨è¾¾" class="headerlink" title="äºŒã€ä¿¡æ¯çš„è¡¨ç¤ºå’Œè¡¨è¾¾"></a>äºŒã€ä¿¡æ¯çš„è¡¨ç¤ºå’Œè¡¨è¾¾</h1><h2 id="2-1-ä¿¡æ¯å­˜å‚¨"><a href="#2-1-ä¿¡æ¯å­˜å‚¨" class="headerlink" title="2.1 ä¿¡æ¯å­˜å‚¨"></a>2.1 ä¿¡æ¯å­˜å‚¨</h2><h3 id="2-1-1-åå…­è¿›åˆ¶è¡¨ç¤ºæ³•"><a href="#2-1-1-åå…­è¿›åˆ¶è¡¨ç¤ºæ³•" class="headerlink" title="2.1.1 åå…­è¿›åˆ¶è¡¨ç¤ºæ³•"></a>2.1.1 åå…­è¿›åˆ¶è¡¨ç¤ºæ³•</h3><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998390485614.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998390485614.png?x-oss-process=style/stylename</a>)</p><blockquote><p>è½¬åŒ–ä¸ºäºŒè¿›åˆ¶éœ€è¦ä»å³åˆ°å·¦æ¯4åˆ†ä¸ºä¸€ç»„è½¬æ¢(ä¸è¶³è¡¥0)</p></blockquote><h4 id="åè¿›åˆ¶å’Œåå…­è¿›åˆ¶äº’é€‰è½¬æ¢"><a href="#åè¿›åˆ¶å’Œåå…­è¿›åˆ¶äº’é€‰è½¬æ¢" class="headerlink" title="åè¿›åˆ¶å’Œåå…­è¿›åˆ¶äº’é€‰è½¬æ¢"></a>åè¿›åˆ¶å’Œåå…­è¿›åˆ¶äº’é€‰è½¬æ¢</h4><p>åè¿›åˆ¶é™¤16å€’å–ä½™<br>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998394198795.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998394198795.png?x-oss-process=style/stylename</a>)</p><h3 id="2-1-2-å­—æ•°æ®å¤§å°"><a href="#2-1-2-å­—æ•°æ®å¤§å°" class="headerlink" title="2.1.2 å­—æ•°æ®å¤§å°"></a>2.1.2 å­—æ•°æ®å¤§å°</h3><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998395609489.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998395609489.png?x-oss-process=style/stylename</a>)</p><blockquote><p>unsigned longã€unsigned long int<br>éƒ½æ˜¯åŒä¸ªæ„æ€</p></blockquote><h3 id="2-1-3-å¯»å€å’Œå­—èŠ‚é¡ºåº"><a href="#2-1-3-å¯»å€å’Œå­—èŠ‚é¡ºåº" class="headerlink" title="2.1.3 å¯»å€å’Œå­—èŠ‚é¡ºåº"></a>2.1.3 å¯»å€å’Œå­—èŠ‚é¡ºåº</h3><p>å¯¹äºè·¨è¶Šå¤šå­—èŠ‚çš„ç¨‹åºå¯¹è±¡ï¼Œä¸¤ä¸ªè§„åˆ™</p><ul><li>è¿™ä¸ªå¯¹è±¡çš„åœ°å€æ˜¯ä»€ä¹ˆ</li><li>å­—å†…å­˜ä¸­å¦‚ä½•æ’åºè¿™äº›å­—èŠ‚</li></ul><h4 id="åœ°å€ä¸ºæ‰€ä½¿ç”¨å­—èŠ‚æœ€å°çš„åœ°å€"><a href="#åœ°å€ä¸ºæ‰€ä½¿ç”¨å­—èŠ‚æœ€å°çš„åœ°å€" class="headerlink" title="åœ°å€ä¸ºæ‰€ä½¿ç”¨å­—èŠ‚æœ€å°çš„åœ°å€"></a>åœ°å€ä¸ºæ‰€ä½¿ç”¨å­—èŠ‚æœ€å°çš„åœ°å€</h4><h4 id="æ’åºæ–¹æ³•æœ‰ä¸¤ä¸ªé€šç”¨è§„åˆ™"><a href="#æ’åºæ–¹æ³•æœ‰ä¸¤ä¸ªé€šç”¨è§„åˆ™" class="headerlink" title="æ’åºæ–¹æ³•æœ‰ä¸¤ä¸ªé€šç”¨è§„åˆ™"></a>æ’åºæ–¹æ³•æœ‰ä¸¤ä¸ªé€šç”¨è§„åˆ™</h4><ul><li>å¤§ç«¯æ³•:æœ€é«˜æœ‰æ•ˆå­—èŠ‚ä¸­æœ€å‰é¢çš„æ–¹æ³•</li><li>å°ç«¯æ³•:æœ€ä½æœ‰æ•ˆå­—èŠ‚ä¸­æœ€å‰é¢çš„æ–¹æ³•<blockquote></blockquote>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998409476624.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998409476624.png?x-oss-process=style/stylename</a>)</li></ul><h3 id="2-1-4-è¡¨ç¤ºå­—ç¬¦ä¸²"><a href="#2-1-4-è¡¨ç¤ºå­—ç¬¦ä¸²" class="headerlink" title="2.1.4 è¡¨ç¤ºå­—ç¬¦ä¸²"></a>2.1.4 è¡¨ç¤ºå­—ç¬¦ä¸²</h3><p>å­—ç¬¦ä¸²è¢«ç¼–ç ä¸ºä¸€ä¸ªä»¥nullï¼ˆå€¼ä¸º0ï¼‰å­—ç¬¦ç»“å°¾çš„å­—ç¬¦æ•°ç»„ï¼Œæ¯ä¸ªå­—ç¬¦éƒ½ç”±æŸä¸ªæ ‡å‡†ç¼–ç æ¥è¡¨è¾¾ï¼Œå› æ­¤ï¼Œæ–‡æœ¬æ•°æ®æ¯”äºŒè¿›åˆ¶æ•°æ®å…·æœ‰æ›´å¼ºçš„å¹³å°ç‹¬ç«‹æ€§</p><h3 id="2-1-5-è¡¨è¾¾ä»£ç "><a href="#2-1-5-è¡¨è¾¾ä»£ç " class="headerlink" title="2.1.5 è¡¨è¾¾ä»£ç "></a>2.1.5 è¡¨è¾¾ä»£ç </h3><p>ä¸åŒæœºå™¨ç±»å‹ä½¿ç”¨ä¸åŒçš„ä¸”ä¸å…¼å®¹çš„æŒ‡ä»¤å’Œç¼–ç æ–¹å¼ï¼Œå³ä½¿æ˜¯å®Œå…¨ä¸€æ ·çš„è¿›ç¨‹ï¼Œè¿è¡Œä¸­ä¸åŒæ“ä½œç³»ç»Ÿä¸Šä¹Ÿæœ‰ä¸åŒçš„ç¼–ç è§„åˆ™ï¼Œå› æ­¤äºŒè¿›åˆ¶ä»£ç æ˜¯ä¸å…¼å®¹çš„ã€‚</p><h3 id="2-1-6-å¸ƒå°”ä»£æ•°"><a href="#2-1-6-å¸ƒå°”ä»£æ•°" class="headerlink" title="2.1.6 å¸ƒå°”ä»£æ•°"></a>2.1.6 å¸ƒå°”ä»£æ•°</h3><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998567614189.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998567614189.png?x-oss-process=style/stylename</a>)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998568366125.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998568366125.png?x-oss-process=style/stylename</a>)</p><blockquote><p>å¸ƒå°”ä»£æ•°ç¬¦åˆåˆ†é…ç‡<br>a&amp;(b|c) &#x3D; (a&amp;b)|(a&amp;c)<br>a|(b&amp;c) &#x3D; (a|b)&amp;(a|c)</p></blockquote><blockquote><p>å¸ƒå°”ç¯<br>åŠ åˆ†é€†å…ƒ(x+(-x) &#x3D; 0)<br>a^a &#x3D; 0<br>(a^b)^a &#x3D; b</p></blockquote><h3 id="2-1-7-ä½çº§è¿ç®—"><a href="#2-1-7-ä½çº§è¿ç®—" class="headerlink" title="2.1.7 ä½çº§è¿ç®—"></a>2.1.7 ä½çº§è¿ç®—</h3><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998569179935.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998569179935.png?x-oss-process=style/stylename</a>)</p><h4 id="æ©ç è¿ç®—"><a href="#æ©ç è¿ç®—" class="headerlink" title="æ©ç è¿ç®—"></a>æ©ç è¿ç®—</h4><p>æ©ç æ˜¯ä¸€ä¸ªä½æ¨¡å¼ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—ä¸­é€‰å‡ºçš„ä½çš„é›†åˆ</p><blockquote><p>ä¾‹å­</p></blockquote><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998575552748.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998575552748.png?x-oss-process=style/stylename</a>)</p><h3 id="2-1-8-é€»è¾‘è¿ç®—"><a href="#2-1-8-é€»è¾‘è¿ç®—" class="headerlink" title="2.1.8 é€»è¾‘è¿ç®—"></a>2.1.8 é€»è¾‘è¿ç®—</h3><p>||ã€&amp;&amp;å’Œï¼åˆ†åˆ«ä»£è¡¨åª’ä½“é€»è¾‘ä¸­çš„ORã€ANDå’ŒNOTè¿ç®—</p><h3 id="2-1-9ç§»ä½è¿ç®—"><a href="#2-1-9ç§»ä½è¿ç®—" class="headerlink" title="2.1.9ç§»ä½è¿ç®—"></a>2.1.9ç§»ä½è¿ç®—</h3><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998578307265.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998578307265.png?x-oss-process=style/stylename</a>)</p><ul><li>å”¯ä¸€ä¾‹å¤–æ˜¯ç®—æœ¯å³ç§»[10010101]çš„æƒ…å†µã€‚<strong>å› ä¸ºæ“ä½œæ•°çš„æœ€é«˜ä½æ•°1ï¼Œå¡«å……çš„å€¼å°±æ˜¯1.</strong><blockquote><p>ä¸€èˆ¬ä¸ºç®—æœ¯å³ç§»<br>å¯¹äºæ— ç¬¦å·æ•°ï¼Œå³ç§»å¿…é¡»æ˜¯é€»è¾‘çš„<br>x&gt;&gt;j&gt;&gt;kç­‰ä»·äº(x&lt;&lt;j)&lt;&lt;k<br>æ“ä½œç¬¦çš„ä¼˜å…ˆçº§ä¸­ï¼ŒåŠ å·çš„ä¼˜å…ˆçº§æ¯”æ“ä½œç¬¦çš„é«˜</p></blockquote></li></ul><h2 id="2-2-æ•´æ•°è¡¨ç¤º"><a href="#2-2-æ•´æ•°è¡¨ç¤º" class="headerlink" title="2.2 æ•´æ•°è¡¨ç¤º"></a>2.2 æ•´æ•°è¡¨ç¤º</h2><p>ç¼–ç æ•´æ•°çš„ä¸¤ç§ä¸åŒçš„æ–¹æ³•ï¼š</p><ul><li>åªèƒ½è¡¨ç¤ºéè´Ÿæ•°</li><li>èƒ½å¤Ÿè¡¨ç¤ºè´Ÿæ•°ï¼Œ0ï¼Œæ­£æ•°</li></ul><blockquote><p>ä¸‹æ–‡ç”¨åˆ°çš„æ•°å­¦æœ¯è¯­</p></blockquote><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998582975352.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998582975352.png?x-oss-process=style/stylename</a>)</p><h3 id="2-2-1-æ•´å‹æ•°æ®ç±»å‹"><a href="#2-2-1-æ•´å‹æ•°æ®ç±»å‹" class="headerlink" title="2.2.1 æ•´å‹æ•°æ®ç±»å‹"></a>2.2.1 æ•´å‹æ•°æ®ç±»å‹</h3><h4 id="æ•°æ®ç±»å‹çš„å…¸å‹å–å€¼èŒƒå›´"><a href="#æ•°æ®ç±»å‹çš„å…¸å‹å–å€¼èŒƒå›´" class="headerlink" title="æ•°æ®ç±»å‹çš„å…¸å‹å–å€¼èŒƒå›´"></a>æ•°æ®ç±»å‹çš„å…¸å‹å–å€¼èŒƒå›´</h4><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998586485045.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998586485045.png?x-oss-process=style/stylename</a>)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998586665394.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998586665394.png?x-oss-process=style/stylename</a>)</p><blockquote><p>å–å€¼èŒƒå›´æ˜¯ä¸å¯¹ç§°çš„â€”â€”è´Ÿæ•°çš„èŒƒå›´æ¯”æ•´æ•°çš„èŒƒå›´å¤§1</p></blockquote><blockquote><p>ä¸‹è¡¨æ˜¯Cè¯­è¨€æ ‡å‡†å®šä¹‰çš„æ¯ç§æ•°æ®ç±»å‹å¿…é¡»èƒ½å¤Ÿè¡¨ç¤ºçš„æœ€å°çš„å–å€¼èŒƒå›´ã€‚</p></blockquote><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998588029453.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998588029453.png?x-oss-process=style/stylename</a>)</p><h3 id="æ— ç¬¦å·çš„ç¼–ç "><a href="#æ— ç¬¦å·çš„ç¼–ç " class="headerlink" title="æ— ç¬¦å·çš„ç¼–ç "></a>æ— ç¬¦å·çš„ç¼–ç </h3><p>å°†ä½å‘é‡çœ‹ä½œäºŒè¿›åˆ¶è¡¨ç¤ºçš„æ•°ï¼Œå°†è·å¾—äº†ä½å‘é‡çš„æ— ç¬¦å·è¡¨è¾¾</p><h4 id="æ— ç¬¦å·æ•°ç¼–ç çš„å®šä¹‰"><a href="#æ— ç¬¦å·æ•°ç¼–ç çš„å®šä¹‰" class="headerlink" title="æ— ç¬¦å·æ•°ç¼–ç çš„å®šä¹‰"></a>æ— ç¬¦å·æ•°ç¼–ç çš„å®šä¹‰</h4><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998590944911.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998590944911.png?x-oss-process=style/stylename</a>)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998591542514.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998591542514.png?x-oss-process=style/stylename</a>)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998592255921.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998592255921.png?x-oss-process=style/stylename</a>)</p><blockquote><p>B2Uwæ˜¯ä¸€ä¸ªåŒå°„ï¼Œå‡½æ•°ï¼¢2Uwå°†æ¯ä¸ªé•¿åº¦ä¸ºwçš„ä½å‘é‡éƒ½æ˜ å°„ä½0ï½2^w - 1ä¹‹é—´çš„ä¸€ä¸ªå”¯ä¸€å€¼ï¼›åè¿‡æ¥,U2Bwåœ¨0ï½2^w - 1ä¹‹é—´çš„æ¯ä¸€ä¸ªæ•´æ•°éƒ½å¯ä»¥æ˜ å°„ä¸ºä¸€ä¸ªå”¯ä¸€çš„é•¿åº¦ä¸ºwçš„ä½æ¨¡å¼ã€‚</p></blockquote><h3 id="2-2-3-è¡¥ç ç¼–ç "><a href="#2-2-3-è¡¥ç ç¼–ç " class="headerlink" title="2.2.3 è¡¥ç ç¼–ç "></a>2.2.3 è¡¥ç ç¼–ç </h3><h4 id="è¡¥ç ç¼–ç çš„å®šä¹‰"><a href="#è¡¥ç ç¼–ç çš„å®šä¹‰" class="headerlink" title="è¡¥ç ç¼–ç çš„å®šä¹‰"></a>è¡¥ç ç¼–ç çš„å®šä¹‰</h4><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998595311062.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998595311062.png?x-oss-process=style/stylename</a>)<br>å­—çš„æœ€é«˜æœ‰æ•ˆä½è§£é‡Šä¸ºè´Ÿæƒï¼Œä¹Ÿå«åšç¬¦å·ä½ã€‚</p><blockquote><p>ç¬¦å·ä½ä¸º1æ—¶å€¼ä¸ºè´Ÿ<br>ç¬¦å·ä½ä¸º0æ—¶å€¼ä¸ºéè´Ÿ</p></blockquote><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998597654820.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998597654820.png?x-oss-process=style/stylename</a>)</p><blockquote><p>B2Twä¹Ÿæ˜¯åŒå°„</p></blockquote><h4 id="å¯è¡¨ç¤ºçš„æ•´æ•°çš„èŒƒå›´"><a href="#å¯è¡¨ç¤ºçš„æ•´æ•°çš„èŒƒå›´" class="headerlink" title="å¯è¡¨ç¤ºçš„æ•´æ•°çš„èŒƒå›´"></a>å¯è¡¨ç¤ºçš„æ•´æ•°çš„èŒƒå›´</h4><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998599315139.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998599315139.png?x-oss-process=style/stylename</a>)</p><ul><li>è¡¥ç èŒƒå›´ä¸å¯¹ç§°ï¼šï½œTMinï½œ &#x3D; |TMax| + 1<br>ä¹‹æ‰€ä»¥ä¸å¯¹ç§°æ˜¯å› ä¸ºä¸€åŠçš„ä½æ¨¡å¼è¡¨ç¤ºè´Ÿæ•°ï¼Œè€Œå¦ä¸€åŠè¡¨ç¤ºä¸ºéè´Ÿæ•°ï¼Œå› ä¸º0æ˜¯éè´Ÿæ•°æ‰€ä»¥æ¯”è´Ÿæ•°å¤š1</li><li>æœ€å¤§çš„æ— ç¬¦å·å€¼åˆšå¥½æ¯”è¡¥ç çš„æœ€å¤§å€¼çš„ä¸¤å€å¤§ä¸€ç‚¹ï¼šUMaxw &#x3D; 2Tmxw + 1.<blockquote><p>cè¯­è¨€æ ‡å‡†å¹¶æ²¡æœ‰è¦æ±‚ç”¨è¡¥ç å½¢å¼æ¥è¡¨ç¤ºç”¨ç¬¦å·æ•´æ•°ï¼Œä½†æ˜¯å‡ ä¹æ‰€æœ‰çš„æœºå™¨éƒ½æ˜¯è¿™ä¹ˆåšçš„ã€‚</p></blockquote></li></ul><blockquote><p>ä¸ºæ¥ä½¿ä»£ç å…·æœ‰æœ€å¤§å¯ç§»æ¤æ€§ï¼Œèƒ½å¤Ÿåšæ‰€æœ‰å¯èƒ½çš„æœºå™¨ä¸Šè¿è¡Œï¼Œæˆ‘ä»¬ä¸åº”è¯¥å‡è®¾ä»»ä½•å¯è¡¨ç¤ºçš„æ•°å€¼ç±»å‹ï¼Œä¹Ÿä¸åº”è¯¥å‡è®¾ä¹Ÿç¬¦å·æ•°ä¼šä½¿ç”¨ä½•ç§ç‰¹æ®Šçš„è¡¨è¾¾æ–¹å¼ã€‚<br>è®¸å¤šç¨‹åºçš„ä¹¦å†™éƒ½æ˜¯ç”¨è¡¥ç æ¥è¡¨ç¤ºç”¨ç¬¦å·æ•°ï¼Œå¹¶ä¸”å…·æœ‰å›¾2-9å’Œå›¾2-10æ‰€ç¤ºçš„å…¸å‹çš„å–å€¼èŒƒå›´ï¼Œè¿™äº›ç¨‹åºèƒ½å¤Ÿå€¼å¤§é‡æœºå™¨ä¸Šç§»æ¤</p></blockquote><p>staint.hä¸­å®šä¹‰äº†ä¸€ç»„æ•°æ®ç±»å‹ï¼šintN_tå’ŒuintN_tï¼ˆå¯¹ä¸åŒNå€¼æŒ‡å®šNä½ç”¨ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°ï¼‰</p><blockquote><p>Nï¼š8ã€16ã€32å’Œ64</p></blockquote><p>è¿™äº›æ•°æ®ç±»å‹å¯¹åº”ç€ä¸€ç»„å®ï¼Œå®šä¹‰äº†æ¯ä¸ªNå¯¹å€¼å¯¹åº”å¯¹æœ€å°å’Œæœ€å¤§å€¼ï¼šINTN_MINã€INTN_MAXå’ŒUINTN_MAX</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998607174352.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998607174352.png?x-oss-process=style/stylename</a>)</p><h4 id="æœ‰ç¬¦å·çš„å…¶ä»–è¡¨ç¤ºæ–¹æ³•-åç å’ŒåŸç "><a href="#æœ‰ç¬¦å·çš„å…¶ä»–è¡¨ç¤ºæ–¹æ³•-åç å’ŒåŸç " class="headerlink" title="æœ‰ç¬¦å·çš„å…¶ä»–è¡¨ç¤ºæ–¹æ³•(åç å’ŒåŸç )"></a>æœ‰ç¬¦å·çš„å…¶ä»–è¡¨ç¤ºæ–¹æ³•(åç å’ŒåŸç )</h4><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998607836002.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998607836002.png?x-oss-process=style/stylename</a>)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998608162844.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998608162844.png?x-oss-process=style/stylename</a>)</p><p>![å›¾2-15](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998608493945.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998608493945.png?x-oss-process=style/stylename</a>)</p><h3 id="2-2-4-æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢"><a href="#2-2-4-æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢" class="headerlink" title="2.2.4 æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢"></a>2.2.4 æœ‰ç¬¦å·æ•°å’Œæ— ç¬¦å·æ•°ä¹‹é—´çš„è½¬æ¢</h3><p>ä»ä½çº§è§’åº¦æ€è€ƒ<br>è½¬æ¢<strong>æ•°å€¼å˜ä½†æ˜¯ä½æ¨¡å¼ä¸å˜</strong></p><h4 id="è¡¥ç è½¬æ¢ä¸ºæ— ç¬¦å·æ•°"><a href="#è¡¥ç è½¬æ¢ä¸ºæ— ç¬¦å·æ•°" class="headerlink" title="è¡¥ç è½¬æ¢ä¸ºæ— ç¬¦å·æ•°"></a>è¡¥ç è½¬æ¢ä¸ºæ— ç¬¦å·æ•°</h4><ul><li>åŸç†<br>![å…¬å¼2.5](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998611816561.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998611816561.png?x-oss-process=style/stylename</a>)</li><li>æ¨å¯¼<br>![å…¬å¼2.6](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998612864476.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998612864476.png?x-oss-process=style/stylename</a>)</li></ul><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998613857100.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998613857100.png?x-oss-process=style/stylename</a>)</p><h4 id="æ— ç¬¦å·æ•°è½¬æ¢ä¸ºè¡¥ç "><a href="#æ— ç¬¦å·æ•°è½¬æ¢ä¸ºè¡¥ç " class="headerlink" title="æ— ç¬¦å·æ•°è½¬æ¢ä¸ºè¡¥ç "></a>æ— ç¬¦å·æ•°è½¬æ¢ä¸ºè¡¥ç </h4><ul><li>åŸç†</li></ul><p>![å…¬å¼2.7](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998613713711.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16998613713711.png?x-oss-process=style/stylename</a>)</p><ul><li>æ¨å¯¼</li></ul><p>![å…¬å¼2.8](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999191653704.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999191653704.png?x-oss-process=style/stylename</a>)</p><p>![å›¾2-17](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999191775362.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999191775362.png?x-oss-process=style/stylename</a>)</p><h3 id="2-2-5-Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°ä¸æ— ç¬¦å·æ•°"><a href="#2-2-5-Cè¯­è¨€ä¸­æœ‰ç¬¦å·æ•°ä¸æ— ç¬¦å·æ•°" class="headerlink" title="2.2.5 ï¼£è¯­è¨€ä¸­æœ‰ç¬¦å·æ•°ä¸æ— ç¬¦å·æ•°"></a>2.2.5 ï¼£è¯­è¨€ä¸­æœ‰ç¬¦å·æ•°ä¸æ— ç¬¦å·æ•°</h3><p><strong>é»˜è®¤è¡¥ç ï¼Œè¦åˆ›å»ºæ— ç¬¦å·å¸¸æ•°ï¼Œåç¼€åŠ u&#x2F;U</strong><br>ï¼£è¯­è¨€è¿ç®—ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¿ç®—æ•°æ˜¯æœ‰ç¬¦å·è€Œå¦ä¸€ä¸ªæ˜¯æ— ç¬¦å·ï¼Œï¼£è¯­è¨€å°±ä¼šéšå¼å°†<strong>æœ‰ç¬¦å·</strong>å¼ºåˆ¶è½¬æ¢ä¸º<strong>æ— ç¬¦å·æ•°</strong>ï¼Œå¹¶å‡è®¾ä¸¤ä¸ªæ•°éƒ½æ˜¯éè´Ÿçš„</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/">http://mwebpng.oss-cn-beijing.aliyuncs.com</a><u></u>&#x2F;2023&#x2F;12&#x2F;15&#x2F;16999196070225.png?x-oss-process&#x3D;style&#x2F;stylename)</p><p>![](<a href="http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999196160028.png?x-oss-process=style%14/stylename">http://mwebpng.oss-cn-beijing.aliyuncs.com/2023/12/15/16999196160028.png?x-oss-process=style/stylename</a>)</p><h3 id="2-2-6-æ‰©å±•ä¸€ä¸ªæ•°çš„ä½è¡¨ç¤º"><a href="#2-2-6-æ‰©å±•ä¸€ä¸ªæ•°çš„ä½è¡¨ç¤º" class="headerlink" title="2.2.6 æ‰©å±•ä¸€ä¸ªæ•°çš„ä½è¡¨ç¤º"></a>2.2.6 æ‰©å±•ä¸€ä¸ªæ•°çš„ä½è¡¨ç¤º</h3><h4 id="ä»è¾ƒå°ç±»å‹è½¬æ¢åˆ°ä¸€ä¸ªè¾ƒå¤§çš„ç±»å‹-é›¶æ‰©å±•"><a href="#ä»è¾ƒå°ç±»å‹è½¬æ¢åˆ°ä¸€ä¸ªè¾ƒå¤§çš„ç±»å‹-é›¶æ‰©å±•" class="headerlink" title="ä»è¾ƒå°ç±»å‹è½¬æ¢åˆ°ä¸€ä¸ªè¾ƒå¤§çš„ç±»å‹(é›¶æ‰©å±•)"></a>ä»è¾ƒå°ç±»å‹è½¬æ¢åˆ°ä¸€ä¸ªè¾ƒå¤§çš„ç±»å‹(é›¶æ‰©å±•)</h4><p>å°†æ— ç¬¦å·è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ›´å¤§çš„æ•°æ®ç±»å‹</p><ul><li>é›¶æ‰©å±•ï¼šåœ¨è¡¨ç¤ºçš„å¼€å¤´æ·»åŠ 0</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¸€æœ¬å¥½ä¹¦ </category>
          
          <category> æ·±å…¥äº†è§£è®¡ç®—æœºåŸç† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¸€æœ¬å¥½ä¹¦ </tag>
            
            <tag> æ·±å…¥äº†è§£è®¡ç®—æœºåŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>treeé€’å½’</title>
      <link href="/2023/12/14/Python-tree%E9%80%92%E5%BD%92-tree%E9%80%92%E5%BD%92/"/>
      <url>/2023/12/14/Python-tree%E9%80%92%E5%BD%92-tree%E9%80%92%E5%BD%92/</url>
      
        <content type="html"><![CDATA[<p>@<a href="%E9%97%AE%E9%A2%98">TOC</a><br>#Tree ADT<br><img src="/2023/12/14/Python-tree%E9%80%92%E5%BD%92-tree%E9%80%92%E5%BD%92/tree.jpg" alt="tree" title="tree"></p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">tree</span>(<span class="params">label, branches=[]</span>):</span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> branches:</span><br><span class="line">        <span class="keyword">assert</span> is_tree(branch),<span class="string">&#x27;branches must be a tree&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> [label] + <span class="built_in">list</span>(branches)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">label</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="keyword">return</span> tree[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">branches</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="keyword">return</span> tree[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_tree</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">type</span>(tree) != <span class="built_in">list</span> <span class="keyword">or</span> <span class="built_in">len</span>(tree) &lt;<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> branches(tree):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> is_tree(branch):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_leaf</span>(<span class="params">tree</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">not</span> branches(tree)</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>treeå‡½æ•°ç”¨äºæ„é€ ï¼Œlabelå‡½æ•°å’Œbrancheså‡½æ•°ç”¨äºé€‰æ‹©ï¼Œis_leafå’Œis_treeå‡½æ•°ç”¨äºè¾…åŠ©</p></blockquote><h1 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h1><h2 id="fib-tree"><a href="#fib-tree" class="headerlink" title="fib_tree"></a>fib_tree</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fib_tree</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">or</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> tree(n)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        left, right = fbi_tree(n-<span class="number">1</span>), fbi_tree(n-<span class="number">2</span>)</span><br><span class="line">        fib_n = label(left)+label(right)</span><br><span class="line">        <span class="keyword">return</span> tree(fib_n,left+right)</span><br></pre></td></tr></table></figure><blockquote><p>å¯è§ï¼ŒåŸºæœ¬æƒ…å†µæ˜¯n &#x3D;&#x3D; 0 or n &#x3D;&#x3D;1<br>æ ‘é€’å½’çš„æ€æƒ³æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä¸€æ—¦åˆ°è¾¾åŸºæœ¬æƒ…å†µå˜è¿”å›é€’å½’ç»“æœ<br>è¿™æ®µå‡½æ•°ä»æ ‘é¡¶ç«¯é€’å½’åˆ°0 or 1çš„æƒ…å†µï¼Œç„¶åæ ¹æ®0å’Œ1çš„ç»“æœï¼Œé€å±‚å‘ä¸Šè®¡ç®—æ ‘èŠ‚ç‚¹çš„å€¼</p></blockquote><h2 id="count-leaf"><a href="#count-leaf" class="headerlink" title="count_leaf"></a>count_leaf</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_leaves</span>(<span class="params">tree</span>):</span><br><span class="line">      <span class="keyword">if</span> is_leaf(tree):</span><br><span class="line">          <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          branch_counts = [count_leaves(b) <span class="keyword">for</span> b <span class="keyword">in</span> branches(tree)]</span><br><span class="line">          <span class="keyword">return</span> <span class="built_in">sum</span>(branch_counts)</span><br></pre></td></tr></table></figure><blockquote><p>ä¸æ–­é€’å½’æ£€æŸ¥æ ‘ææ˜¯å¦ä¸ºå¶å­ï¼Œä¸€æ—¦æ˜¯ï¼Œä¾¿è¿”å›1å¹¶å­˜å‚¨åœ¨æ•°åˆ—ä¸­ã€‚æœ€åç”¨sumæ±‚æ ‘å¶æ•°</p></blockquote><h2 id="leaves"><a href="#leaves" class="headerlink" title="leaves"></a>leaves</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">leaves</span>(<span class="params">tree</span>):</span><br><span class="line"><span class="keyword">if</span> is_leaf(tree):</span><br><span class="line"><span class="keyword">return</span> [label(tree)]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">sum</span>([leaves(b) <span class="keyword">for</span> b <span class="keyword">in</span> branches(tree)],[])</span><br></pre></td></tr></table></figure><blockquote><p>åˆ†ç¦»æ ‘å¶ï¼Œä¸æ–­é€’å½’æ£€æŸ¥æ ‘ææ˜¯å¦ä¸ºæ ‘å¶ï¼Œè‹¥æ˜¯ï¼Œä»¥æ•°åˆ—å½¢å¼å­˜å‚¨åœ¨[ ]ä¸­ï¼Œæœ€åç”¨sumæ¶ˆå»ä¸€å±‚[ ]<br>#ä¸ºä»€ä¹ˆè¦ç”¨sum(<list>, [])ï¼Ÿ<br>å› ä¸ºå½“è¯¥åˆ†æ”¯åªå­˜åœ¨æ ‘å¶æ—¶ï¼Œleavers(b) for b in branches(tree)æ˜¯ä»¥æ•°åˆ—å½¢å¼å‡ºç°çš„ï¼Œè€Œè‹¥è¯¥åˆ†æ”¯åŒæ—¶å­˜åœ¨æ ‘å¶å’Œæ ‘ææ—¶ï¼Œåˆ™è¿”å›å•å•æ•°å­—(int).</list></p></blockquote><h2 id="increment-leaf"><a href="#increment-leaf" class="headerlink" title="increment_leaf:"></a>increment_leaf:</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">increment_leaf</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">if</span> is_leaf(t):</span><br><span class="line">        <span class="keyword">return</span> tree(label(t)+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> tree(label(t),[increment_leaves(b) <span class="keyword">for</span> b <span class="keyword">in</span> branches(t)])</span><br><span class="line"></span><br><span class="line"><span class="comment">#OR</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">increment</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="keyword">return</span> tree(label(t)+<span class="number">1</span>,[increment(b) <span class="keyword">for</span> b <span class="keyword">in</span> branches(t)])</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>ä¸Šé¢çš„incrementåªå¢åŠ leaf<br>ä¸‹é¢çš„incrementå¢åŠ æ‰€æœ‰èŠ‚ç‚¹</p></blockquote><h2 id="print-tree"><a href="#print-tree" class="headerlink" title="print_tree"></a>print_tree</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_tree</span>(<span class="params">t,indent = <span class="number">0</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>*indent + <span class="built_in">str</span>(label(t)))</span><br><span class="line">    <span class="keyword">for</span> b <span class="keyword">in</span> branches(t):</span><br><span class="line">        print_tree(b, indent+<span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="print-path"><a href="#print-path" class="headerlink" title="print_path"></a>print_path</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">print_sums</span>(<span class="params">t, so_far</span>):</span><br><span class="line">    so_far = so_far + label(t)</span><br><span class="line">    <span class="keyword">if</span> is_leaf(t):</span><br><span class="line">        <span class="built_in">print</span>(so_far)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> b <span class="keyword">in</span> branches(t):</span><br><span class="line">            print_sums(b, so_far)</span><br></pre></td></tr></table></figure><h2 id="count-paths"><a href="#count-paths" class="headerlink" title="count_paths"></a>count_paths</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_paths</span>(<span class="params">t, total</span>):</span><br><span class="line">    <span class="keyword">if</span> label(t) == total:</span><br><span class="line">        found = <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        found = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> found + <span class="built_in">sum</span>([count_paths(b,total-label(t)) <span class="keyword">for</span> b <span class="keyword">in</span> branches(t)])</span><br></pre></td></tr></table></figure><blockquote><p>é‡ç‚¹åœ¨äºè¿”å›çš„count_paths(b,total-label(t)ä¸­çš„<code>total-label(t)</code><br>åœ¨é€’å½’è¿‡ç¨‹ä¸­ï¼Œtotal-label(t)ä¸æ–­æ›´æ–°åˆ°è¾¾ä¸‹ä¸€åˆ†æ”¯æ—¶ï¼Œæ»¡è¶³æ¡ä»¶çš„å€¼ã€‚</p></blockquote><p><img src="/2023/12/14/Python-tree%E9%80%92%E5%BD%92-tree%E9%80%92%E5%BD%92/cp.png" alt="è¾“å‡ºç»“æœ"></p><p><img src="/2023/12/14/Python-tree%E9%80%92%E5%BD%92-tree%E9%80%92%E5%BD%92/count_paths.png" alt="å›¾ç¤º"></p><h1 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h1><h2 id="berry-finder"><a href="#berry-finder" class="headerlink" title="berry_finder"></a>berry_finder</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">berry_finder</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns True if t contains a node with the value &#x27;berry&#x27; and </span></span><br><span class="line"><span class="string">    False otherwise.</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = tree(1, [tree(&#x27;berry&#x27;,[tree(&#x27;not berry&#x27;)])])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; berry_finder(t)</span></span><br><span class="line"><span class="string">    True</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">if</span> label(t) == <span class="string">&#x27;berry&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t):</span><br><span class="line">        <span class="keyword">if</span> berry_finder(branch):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="replace-loki-at-leaf"><a href="#replace-loki-at-leaf" class="headerlink" title="replace_loki_at_leaf"></a>replace_loki_at_leaf</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">replace_loki_at_leaf</span>(<span class="params">t, lokis_replacement</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Returns a new tree where every leaf value equal to &quot;loki&quot; has</span></span><br><span class="line"><span class="string">    been replaced with lokis_replacement.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> label(t) == <span class="string">&#x27;loki&#x27;</span><span class="keyword">and</span> is_leaf(t):</span><br><span class="line">        <span class="keyword">return</span> tree(lokis_replacement, [replace_loki_at_leaf(branch,lokis_replacement) <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t)])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> tree(label(t),[replace_loki_at_leaf(branch,lokis_replacement) <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t)])</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Height"><a href="#Height" class="headerlink" title="Height"></a>Height</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Q5: Height</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">height</span>(<span class="params">t</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return the height of a tree.</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = tree(3, [tree(5, [tree(1)]), tree(2)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; height(t)</span></span><br><span class="line"><span class="string">    2</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="string">&quot;*** YOUR CODE HERE ***&quot;</span></span><br><span class="line">    <span class="keyword">if</span> is_leaf(t):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>+<span class="built_in">max</span>([height(branch) <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t)])</span><br></pre></td></tr></table></figure><h2 id="find-path"><a href="#find-path" class="headerlink" title="find_path"></a>find_path</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">find_path</span>(<span class="params">t, x</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t = tree(2, [tree(7, [tree(3), tree(6, [tree(5), tree(11)])] ), tree(15)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; find_path(t, 5)</span></span><br><span class="line"><span class="string">    [2, 7, 6, 5]</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; find_path(t, 10)  # returns None</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> label(t) == x:</span><br><span class="line">        <span class="keyword">return</span> [label(t)]</span><br><span class="line">    <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t):</span><br><span class="line">        path = find_path(branch, x)</span><br><span class="line">        <span class="keyword">if</span> path:</span><br><span class="line">            <span class="keyword">return</span> [label(t)] + path</span><br></pre></td></tr></table></figure><h2 id="sprout-leaves"><a href="#sprout-leaves" class="headerlink" title="sprout_leaves"></a>sprout_leaves</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">sprout_leaves</span>(<span class="params">t, leaves</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Sprout new leaves containing the data in leaves at each leaf in</span></span><br><span class="line"><span class="string">    the original tree t and return the resulting tree.</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; t1 = tree(1, [tree(2), tree(3)])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(t1)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; new1 = sprout_leaves(t1, [4, 5])</span></span><br><span class="line"><span class="string">    &gt;&gt;&gt; print_tree(new1)</span></span><br><span class="line"><span class="string">    1</span></span><br><span class="line"><span class="string">      2</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">      3</span></span><br><span class="line"><span class="string">        4</span></span><br><span class="line"><span class="string">        5</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> is_leaf(t):</span><br><span class="line">        <span class="keyword">return</span> tree(label(t),[tree(leaf) <span class="keyword">for</span> leaf <span class="keyword">in</span> leaves])</span><br><span class="line">    <span class="keyword">return</span> tree(label(t),[sprout_leaves(branch,leaves) <span class="keyword">for</span> branch <span class="keyword">in</span> branches(t)])</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå®Œæˆè¿™äº›ä¾‹å­å’Œç»ƒä¹ çš„æ ¸å¿ƒæ€æƒ³æœ‰ï¼š</p><ol><li>é‡æ„treeï¼Œä¸”å°†brancheséƒ¨åˆ†ç”¨é€’å½’æ–¹æ³•ä¸æ–­æ›´æ–°ä¸ºæˆ‘ä»¬éœ€è¦çš„æ ‘æã€‚</li><li>åˆ©ç”¨ forè¯­å¥å’Œbranchesé€‰æ‹©å‡½æ•°å¯¹å‡½æ•°è¿›è¡Œé€’å½’ã€‚</li><li>è€Œé€’å½’çš„å…³é”®å°±åœ¨äºæˆ‘ä»¬å¯¹åŸºæœ¬æƒ…å†µçš„å®šä¹‰å’Œå¯¹tree ADTçš„ç†è§£åº”ç”¨ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61A </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> CS61A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++</title>
      <link href="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/"/>
      <url>/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<p>ç¬”è®°æ¥æºç½‘è¯¾æ•™ç¨‹ï¼š<a href="https://www.bilibili.com/video/BV1oD4y1h7S3">C++æ•™ç¨‹</a><br>10æœˆÂ·8å·å‘å¸ƒ</p><h1 id="C-æ˜¯æ€ä¹ˆå·¥ä½œçš„"><a href="#C-æ˜¯æ€ä¹ˆå·¥ä½œçš„" class="headerlink" title="C++æ˜¯æ€ä¹ˆå·¥ä½œçš„"></a>C++æ˜¯æ€ä¹ˆå·¥ä½œçš„</h1><p>é¡¹ç›®ä¸­çš„æºæ–‡ä»¶ä¼ è¾“ç»™ç¼–è¯‘å™¨ï¼Œç¼–è¯‘å™¨å°†å…¶è½¬åŒ–æˆäºŒè¿›åˆ¶çš„ä¸œè¥¿ï¼Œå¯èƒ½è½¬åŒ–æˆæŸç§åº“ï¼Œä¹Ÿå¯èƒ½æ˜¯å¯æ‰§è¡Œçš„ç¨‹åº<br>oppç¼–è¯‘æˆobjæ–‡ä»¶ï¼Œç„¶åé€šè¿‡linkerå°†objæ•´åˆèµ·æ¥</p><h2 id="é¢„å¤„ç†"><a href="#é¢„å¤„ç†" class="headerlink" title="é¢„å¤„ç†"></a>é¢„å¤„ç†</h2><p>ç¼–è¯‘å‰å¤„ç†includeåé¢çš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é€šå¸¸å«åšâ€œå¤´æ–‡ä»¶â€ï¼Œæˆ‘ä»¬ä¹‹æ‰€ä»¥è¦åŒ…æ‹¬iostreamè¿™ä¸ªå¤´æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¢«è°ƒç”¨çš„å‡½æ•°çš„å£°æ˜ï¼Œä¾‹å¦‚<code>std::cout</code></p><h2 id="mainå‡½æ•°"><a href="#mainå‡½æ•°" class="headerlink" title="mainå‡½æ•°"></a>mainå‡½æ•°</h2><p>ç¨‹åºçš„å…¥å£ï¼Œå®ƒä¸ä¸€å®šéœ€è¦è¿”å›å€¼ï¼Œé»˜è®¤è¿”å›0</p><h2 id><a href="#" class="headerlink" title="&lt;&lt;é‡è½½è¯­å¥"></a>&lt;&lt;é‡è½½è¯­å¥</h2><p>ç›¸å½“äºä¸€ä¸ªå‡½æ•°è€Œå·²ï¼Œç›¸å½“äºprint()<br><code>std::cout &lt;&lt; &quot;Hello World&quot;&lt;&lt; std::endl;</code><br>ç›¸å½“äº<br><code>std::cout .print( &quot;Hello World&quot;).pint(std::endl); </code></p><h2 id="é“¾æ¥é¡¹ç›®ä¸­çš„å‡½æ•°ä»£ç "><a href="#é“¾æ¥é¡¹ç›®ä¸­çš„å‡½æ•°ä»£ç " class="headerlink" title="é“¾æ¥é¡¹ç›®ä¸­çš„å‡½æ•°ä»£ç "></a>é“¾æ¥é¡¹ç›®ä¸­çš„å‡½æ•°ä»£ç </h2><p><strong>Log.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>; </span><br><span class="line"><span class="comment">// å£°æ˜è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é€šè¿‡linkerå°†main.cppä¸­å£°æ˜å¹¶ä½¿ç”¨çš„å‡½æ•°é“¾æ¥åˆ°æŸä¸ªé¡¹ç›®æ–‡ä»¶ä¸­å”¯ä¸€çš„logå‡½æ•°ä¸­</p></blockquote><blockquote><p>å£°æ˜åªåŒ…å«äº†å‡½æ•°ï¼Œå®šä¹‰åŒ…å«äº†å‡½æ•°å’Œå‡½æ•°ä½“</p></blockquote><h1 id="C-ç¼–è¯‘å™¨çš„å·¥ä½œ"><a href="#C-ç¼–è¯‘å™¨çš„å·¥ä½œ" class="headerlink" title="C++ç¼–è¯‘å™¨çš„å·¥ä½œ"></a>C++ç¼–è¯‘å™¨çš„å·¥ä½œ</h1><p>é¦–å…ˆé¢„å¤„ç†,å°†æ‰€æœ‰ä»£ç è½¬åŒ–æˆå¸¸é‡æ•°æ®æˆ–æŒ‡ä»¤ã€‚<br>å°†æˆ‘ä»¬é¡¹ç›®æ‰€æœ‰çš„cppç”Ÿæˆopjæ–‡ä»¶<br>cppå«åš<strong>ç¿»è¯‘å•å…ƒ</strong></p><h2 id="includeå·¥ä½œåŸç†"><a href="#includeå·¥ä½œåŸç†" class="headerlink" title="#includeå·¥ä½œåŸç†"></a>#includeå·¥ä½œåŸç†</h2><p>åœ¨ç¼–è¯‘å‰å°†æŒ‡å®šçš„æ–‡ä»¶ç²˜è´´å¹¶å¤åˆ¶åˆ°å½“å‰cppå½“ä¸­</p><p><strong>EndBrace.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>; </span><br><span class="line"><span class="comment">// å£°æ˜è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&#x27;EndBrace.h&#x27;</span></span></span><br></pre></td></tr></table></figure><blockquote><p>ç¼–è¯‘å™¨çš„å·¥ä½œå°±æ˜¯ï¼Œå°†EndBraceä¸­çš„æ‰€æœ‰ä»£ç copyè¿›å»å½“å‰cpp</p></blockquote><h2 id="æŸ¥çœ‹é¢„å¤„ç†å™¨å®é™…ä¸Šç”Ÿæˆçš„æ–‡ä»¶"><a href="#æŸ¥çœ‹é¢„å¤„ç†å™¨å®é™…ä¸Šç”Ÿæˆçš„æ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹é¢„å¤„ç†å™¨å®é™…ä¸Šç”Ÿæˆçš„æ–‡ä»¶"></a>æŸ¥çœ‹é¢„å¤„ç†å™¨å®é™…ä¸Šç”Ÿæˆçš„æ–‡ä»¶</h2><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E9%A2%84%E5%A4%84%E7%90%86.png" alt="é¢„å¤„ç†å™¨æ–‡ä»¶"><br>ç¼–è¯‘åä¼šç”Ÿæˆä¸€ä¸ª.iæ–‡ä»¶<br>é‡Œé¢å«æœ‰é¢„å¤„ç†åçš„ç»“æœ</p><h2 id="æŸ¥çœ‹objæ–‡ä»¶"><a href="#æŸ¥çœ‹objæ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹objæ–‡ä»¶"></a>æŸ¥çœ‹objæ–‡ä»¶</h2><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E7%A8%8B%E5%BA%8F%E9%9B%86.png" alt="ç¨‹åºé›†"></p><p>å°†objä¸­çš„äºŒè¿›åˆ¶æ–‡ä»¶è½¬åŒ–ä¸ºæ±‡ç¼–ä»£ç (ASMæ–‡ä»¶) </p><blockquote><p>è‹¥åœ¨ä¼˜åŒ–å°†é€Ÿåº¦è°ƒæœ€å¤§ä¼šå¿½ç•¥æ‰ä¸€äº›æ— ç”¨çš„æ“ä½œ</p></blockquote><h1 id="C-é“¾æ¥"><a href="#C-é“¾æ¥" class="headerlink" title="C++é“¾æ¥"></a>C++é“¾æ¥</h1><p>ç¼–è¯‘åçš„æ“ä½œï¼Œé“¾æ¥çš„ç„¦ç‚¹æ˜¯æ‰¾åˆ°æ¯ä¸ªç¬¦å·å’Œå‡½æ•°åœ¨å“ªé‡Œç„¶åè¿æ¥åœ¨ä¸€èµ·ã€‚<br><strong>ç¼–è¯‘å¯èƒ½ä¸éœ€è¦mainå‡½æ•°ï¼Œä½†æ˜¯é“¾æ¥è¿‡ç¨‹ä¸€å®šéœ€è¦mainå‡½æ•°</strong></p><blockquote><p>ç¼–è¯‘é”™è¯¯ é”™è¯¯ç±»å‹æ˜¯Cå¼€å¤´ï¼Œé“¾æ¥é”™è¯¯æ˜¯LINå¼€å¤´</p></blockquote><blockquote><p>ä¸èƒ½å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„å‡½æ•°å¸¦ç€ç›¸åŒçš„å‚æ•°ï¼Œè¿™æ ·é“¾æ¥å™¨ä¸çŸ¥é“é“¾æ¥å“ªä¸€ä¸ªï¼Œä»è€Œäº§ç”Ÿé”™è¯¯ã€‚</p></blockquote><h2 id="æ˜“é”™å¤„"><a href="#æ˜“é”™å¤„" class="headerlink" title="æ˜“é”™å¤„"></a>æ˜“é”™å¤„</h2><p><strong>Log.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">logr</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"><span class="comment">// æ³¨æ„logå‡½æ•°åå­—å·²ç»è¢«ä¿®æ”¹äº†</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>; </span><br><span class="line"><span class="comment">//å£°æ˜è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Multiply</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//log(&quot;multiply&quot;);</span></span><br><span class="line"><span class="keyword">return</span> a*b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">Multiply</span>(<span class="number">5</span>, <span class="number">8</span>) &lt;&lt; std::endl;</span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é“¾æ¥æ²¡æœ‰é”™è¯¯</p></blockquote><p><strong>Main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>; </span><br><span class="line"><span class="comment">//å£°æ˜è¯­å¥</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Multiply</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;multiply&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> a*b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//std::cout &lt;&lt; Multiply(5, 8) &lt;&lt; std::endl;</span></span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é“¾æ¥é”™è¯¯</p></blockquote><p><strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong><br>è™½ç„¶åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å¯èƒ½ç”¨ä¸ä¸ŠMultiplyå‡½æ•°ï¼Œä½†åœ¨å…¶ä»–æ–‡ä»¶å¯èƒ½ç”¨å¾—ä¸Šï¼Œæ‰€ä»¥é“¾æ¥å™¨ç¡®å®éœ€è¦é“¾æ¥å®ƒ</p><h3 id="é™åˆ¶é“¾æ¥ï¼Œå‡½æ•°åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒä½¿ç”¨çš„æ–¹æ³•"><a href="#é™åˆ¶é“¾æ¥ï¼Œå‡½æ•°åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒä½¿ç”¨çš„æ–¹æ³•" class="headerlink" title="é™åˆ¶é“¾æ¥ï¼Œå‡½æ•°åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒä½¿ç”¨çš„æ–¹æ³•"></a>é™åˆ¶é“¾æ¥ï¼Œå‡½æ•°åªåœ¨å½“å‰ç¿»è¯‘å•å…ƒä½¿ç”¨çš„æ–¹æ³•</h3><p>ç”¨<code>static</code>åŠ åœ¨å‡½æ•°å‰</p><h2 id="äº§ç”Ÿé“¾æ¥é”™è¯¯çš„ä¾‹å­åŠä¿®æ­£"><a href="#äº§ç”Ÿé“¾æ¥é”™è¯¯çš„ä¾‹å­åŠä¿®æ­£" class="headerlink" title="äº§ç”Ÿé“¾æ¥é”™è¯¯çš„ä¾‹å­åŠä¿®æ­£"></a>äº§ç”Ÿé“¾æ¥é”™è¯¯çš„ä¾‹å­åŠä¿®æ­£</h2><h3 id="é”™è¯¯ä¾‹å­"><a href="#é”™è¯¯ä¾‹å­" class="headerlink" title="é”™è¯¯ä¾‹å­"></a>é”™è¯¯ä¾‹å­</h3><p><strong>log.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>log.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;log.h&quot;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Initlog</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;Initialized log&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;log.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Multiply</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;multiply&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> a*b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//std::cout &lt;&lt; Multiply(5, 8) &lt;&lt; std::endl;</span></span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>é“¾æ¥å¤±è´¥ï¼Œlogé‡å¤äº†</p></blockquote><p><strong>åŸå› åˆ†æï¼š</strong><br>ä¸¤ä¸ªå¤´æ–‡ä»¶åŒæ—¶å¼•å…¥äº†ä¸¤ä¸ªlogå‡½æ•°æ‰€ä»¥äº§ç”Ÿé”™è¯¯.</p><h3 id="ä¿®æ”¹æ–¹æ³•"><a href="#ä¿®æ”¹æ–¹æ³•" class="headerlink" title="ä¿®æ”¹æ–¹æ³•"></a>ä¿®æ”¹æ–¹æ³•</h3><ol><li><strong>log.h</strong><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">static</span> <span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"><span class="comment">//å°†logå‡½æ•°ä¿®æ”¹ä¸ºé™æ€å‡½æ•°</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>log.h</strong><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>inlindçš„ä½œç”¨æ˜¯è·å¾—æˆ‘ä»¬å®é™…çš„å‡½æ•°ä½“å¹¶å°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“ã€‚</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">log</span>(<span class="string">&quot;Initialized log&quot;</span>);</span><br><span class="line"><span class="comment">//ç›¸å½“äº</span></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Initialized log&quot;</span> &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure><ol start="3"><li>å°†å®šä¹‰ç§»åˆ°ä¸€ä¸ªç¿»è¯‘å•å…ƒ</li></ol><p><strong>log.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>log.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;log.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Initlog</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;Initialized log&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">std::cout &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="C-å˜é‡"><a href="#C-å˜é‡" class="headerlink" title="C++å˜é‡"></a>C++å˜é‡</h1><p>å˜é‡å…è®¸æˆ‘ä»¬å‘½åå­˜å‚¨åœ¨å†…å­˜ä¸­çš„æ•°æ®å¹¶ç»§ç»­ä½¿ç”¨<br>å½“æˆ‘ä»¬åˆ›é€ å˜é‡æ—¶ï¼Œä»–è¢«å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p><h2 id="ä¸åŒå˜é‡ç±»å‹çš„åŒºåˆ«æ˜¯å†…å­˜å¤§å°"><a href="#ä¸åŒå˜é‡ç±»å‹çš„åŒºåˆ«æ˜¯å†…å­˜å¤§å°" class="headerlink" title="ä¸åŒå˜é‡ç±»å‹çš„åŒºåˆ«æ˜¯å†…å­˜å¤§å°"></a>ä¸åŒå˜é‡ç±»å‹çš„åŒºåˆ«æ˜¯å†…å­˜å¤§å°</h2><h3 id="å˜é‡ç±»å‹"><a href="#å˜é‡ç±»å‹" class="headerlink" title="å˜é‡ç±»å‹"></a>å˜é‡ç±»å‹</h3><ul><li>char : 1 byte (ç»å¸¸å­˜å‚¨å­—ç¬¦)</li><li>short : 2 byte</li><li>int : 4 byte</li><li>long : 4 byte</li><li>long long : 8 byte</li><li>float : 4 byte</li><li>double : 8 byte</li><li>bool : 1 byte<blockquote><p>floatå’Œdoubleçš„åŒºåˆ«å¯ä»¥æ˜¯åœ¨æ•°å­—åé¢åŠ f(float)<br>1 æ˜¯ Ture,0 æ˜¯ False.</p></blockquote></li></ul><h3 id="æŸ¥çœ‹æ•°å­—å¤§å°"><a href="#æŸ¥çœ‹æ•°å­—å¤§å°" class="headerlink" title="æŸ¥çœ‹æ•°å­—å¤§å°"></a>æŸ¥çœ‹æ•°å­—å¤§å°</h3><p>sizeof(bool)</p><h1 id="C-å‡½æ•°"><a href="#C-å‡½æ•°" class="headerlink" title="C++å‡½æ•°"></a>C++å‡½æ•°</h1><p>æœ€ä¸»è¦çš„æ˜¯æé«˜ç»´æŠ¤æ•ˆç‡<br>é¿å…å¤åˆ¶é‡å¤<br>æˆ‘ä»¬é€šå¸¸åœ¨å¤´æ–‡ä»¶ä¸­å†™å£°æ˜ï¼Œåœ¨ç¿»è¯‘å•å…ƒæˆ–cppæ–‡ä»¶ä¸­ç¼–å†™å®šä¹‰ï¼ŒåŸå› å°±æ˜¯<strong>é“¾æ¥é”™è¯¯ä¸­çš„ä¿®æ”¹æ–¹æ³•3</strong></p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><p><strong>Main.cpp</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">multiply</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a*b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">io_mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> result = <span class="built_in">multiply</span>(a, b);</span><br><span class="line">std::cout &lt;&lt; result &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">io_mul</span>(<span class="number">3</span>,<span class="number">4</span>);</span><br><span class="line"><span class="built_in">io_mul</span>(<span class="number">3</span>,<span class="number">8</span>);</span><br><span class="line"><span class="built_in">io_mul</span>(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>io_mulçš„ä½œç”¨å°±æ˜¯é¿å…é‡å¤</p></blockquote><h1 id="C-å¤´æ–‡ä»¶"><a href="#C-å¤´æ–‡ä»¶" class="headerlink" title="C++å¤´æ–‡ä»¶"></a>C++å¤´æ–‡ä»¶</h1><p> å½“æˆ‘ä»¬è·¨æ–‡ä»¶è°ƒç”¨å‡½æ•°çš„æ—¶å€™å…ä¸äº†å£°æ˜ï¼Œå¦‚æœæŸä¸ªå‡½æ•°å¾ˆå¸¸ç”¨é‚£å°±è¦ä¸€ç›´å¤åˆ¶ç²˜è´´ï¼Œå¾ˆç¹çã€‚<br> è€Œå¤´æ–‡ä»¶å°±æ˜¯å¡å…¥ä¸€å †å£°æ˜ï¼Œç„¶ååœ¨å…¶ä»–cppä¸­includeåï¼Œè®©é¢„å¤„ç†å™¨å¸®å¿™å¤åˆ¶ç²˜è´´ã€‚</p><h2 id="pragma-once"><a href="#pragma-once" class="headerlink" title="pragma once"></a>pragma once</h2><p>å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œvsä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¡«å†™<code>#pragma once</code><br>è¿™ä¸ªçš„ä½œç”¨æ˜¯é˜²æ­¢includeå¤šä¸ªå¤´æ–‡ä»¶æ—¶ï¼Œé‡Œé¢æœ‰é‡å¤çš„å£°æ˜ï¼Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ä»–åªä¼šå¤åˆ¶ä¸€æ¬¡å£°æ˜</p><h2 id="ifndef"><a href="#ifndef" class="headerlink" title="ifndef"></a>ifndef</h2><p><strong>log.h</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifndef</span> _LOG_H</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> _LOG_H</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">nitLog</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">log</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* message)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Player</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><blockquote><p>æ£€æŸ¥æ˜¯å¦æœ‰ä¸ª_LOG_Hè¢«å®šä¹‰äº†ï¼Œå¦‚æœæ²¡æœ‰å°±ç¼–è¯‘ä¸­åŒ…æ‹¬ä»¥ä¸‹ä»£ç ,å¦‚æœè¢«å®šä¹‰äº†ï¼Œé‚£ä¹ˆè¿™äº›éƒ½ä¸ä¼šè¢«åŒ…æ‹¬è¿›æ¥ </p></blockquote><blockquote><p>å¦‚æœé€šè¿‡äº†è¿™åˆæ¬¡æ£€æŸ¥ï¼Œæˆ‘ä»¬å®šä¹‰_LOG_H,å¦‚æœä¸‹æ¬¡ç”¨åˆ°çš„æ—¶å€™ï¼Œå°±ä¸ä¼šé‡å¤å£°æ˜äº†</p></blockquote><h2 id="includeä¸¤ä¸ªä¸åŒå½¢å¼"><a href="#includeä¸¤ä¸ªä¸åŒå½¢å¼" class="headerlink" title="includeä¸¤ä¸ªä¸åŒå½¢å¼"></a>includeä¸¤ä¸ªä¸åŒå½¢å¼</h2><h3 id="å½¢å¼"><a href="#å½¢å¼" class="headerlink" title="&lt; &gt;å½¢å¼"></a>&lt; &gt;å½¢å¼</h3><p>å‘Šè¯‰ç¼–è¯‘å™¨å»æœç´¢åŒ…å«è·¯å¾„çš„æ–‡ä»¶å¤¹ </p><h3 id="â€œ-â€œå½¢å¼"><a href="#â€œ-â€œå½¢å¼" class="headerlink" title="â€œ â€œå½¢å¼"></a>â€œ â€œå½¢å¼</h3><p>å‘Šè¯‰ç¼–è¯‘å™¨å°±åœ¨å½“å‰æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨â€..&#x2F;log.hâ€å»è¿”å›åˆ°å½“å‰æ–‡ä»¶çš„ä¸Šçº§ç›®å½•</p><h2 id="åŒºåˆ«c-æ ‡å‡†åº“å’Œcæ ‡å‡†åº“"><a href="#åŒºåˆ«c-æ ‡å‡†åº“å’Œcæ ‡å‡†åº“" class="headerlink" title="åŒºåˆ«c++æ ‡å‡†åº“å’Œcæ ‡å‡†åº“"></a>åŒºåˆ«c++æ ‡å‡†åº“å’Œcæ ‡å‡†åº“</h2><p>å…³é”®åœ¨äºæœ‰æ— .hæ‰©å±•ï¼Œc++æ–‡ä»¶é€šå¸¸æ²¡æœ‰ã€‚</p><h1 id="å¦‚ä½•åœ¨vsä¸­è°ƒè¯•ä»£ç "><a href="#å¦‚ä½•åœ¨vsä¸­è°ƒè¯•ä»£ç " class="headerlink" title="å¦‚ä½•åœ¨vsä¸­è°ƒè¯•ä»£ç "></a>å¦‚ä½•åœ¨vsä¸­è°ƒè¯•ä»£ç </h1><h2 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h2><h3 id="æ–­ç‚¹"><a href="#æ–­ç‚¹" class="headerlink" title="æ–­ç‚¹"></a>æ–­ç‚¹</h3><p>åœ¨æ–­ç‚¹å¤„æš‚åœç¨‹åº</p><h3 id="è¯»å–å†…å­˜"><a href="#è¯»å–å†…å­˜" class="headerlink" title="è¯»å–å†…å­˜"></a>è¯»å–å†…å­˜</h3><p>ç¨‹åºä¸­æ–­å,å†…å­˜æ•°æ®å®é™…ä¸Šè¿˜åœ¨,æŸ¥çœ‹å†…å­˜å¯¹è¯Šæ–­é—®é¢˜.</p><h2 id="å¦‚ä½•è°ƒè¯•"><a href="#å¦‚ä½•è°ƒè¯•" class="headerlink" title="å¦‚ä½•è°ƒè¯•"></a>å¦‚ä½•è°ƒè¯•</h2><ol start="0"><li>ç¡®ä¿æ¨¡å¼æ˜¯<strong>debugæ¨¡å¼</strong></li><li><strong>è®¾ç½®æ–­ç‚¹</strong></li><li><strong>è¯»å†…å­˜</strong></li></ol><h3 id="æŒ‰é”®ä»‹ç»"><a href="#æŒ‰é”®ä»‹ç»" class="headerlink" title="æŒ‰é”®ä»‹ç»"></a>æŒ‰é”®ä»‹ç»</h3><ul><li>é€è¯­å¥(F11)(step into):è¿›å…¥åˆ°å½“å‰è¿™è¡Œä»£ç ä¸Šçš„å‡½æ•°é‡Œé¢</li><li>é€è¿‡ç¨‹(F10)(step over):ä»å½“å‰å‡½æ•°è·³åˆ°ä¸‹ä¸€è¡Œä»£ç </li><li>è·³å‡º(shift+F11)(step out):è·³å‡ºå½“å‰å‡½æ•°ï¼Œå›åˆ°è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„ä½ç½®</li></ul><h3 id="çª—å£ä»‹ç»"><a href="#çª—å£ä»‹ç»" class="headerlink" title="çª—å£ä»‹ç»"></a>çª—å£ä»‹ç»</h3><ul><li>è‡ªåŠ¨ã€å±€éƒ¨çª—å£ : å‘ä½ å±•ç¤ºå¯èƒ½é‡è¦çš„å…¨å±€æˆ–å±€éƒ¨</li><li>ç›‘è§†1ï¼šè§‚å¯Ÿå˜é‡(è¾“å…¥è¦è§‚å¯Ÿçš„å˜é‡ç„¶åå›è½¦)</li></ul><blockquote><p>å³é”®å¯ä»¥ä¿®æ”¹æˆæŸ¥çœ‹16è¿›åˆ¶</p></blockquote><h3 id="å†…å­˜è§†å›¾"><a href="#å†…å­˜è§†å›¾" class="headerlink" title="å†…å­˜è§†å›¾"></a>å†…å­˜è§†å›¾</h3><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E5%86%85%E5%AD%98%E8%A7%86%E5%9B%BE.png" alt="å†…å­˜è§†å›¾"><br><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E5%86%85%E5%AD%98%E8%A7%86%E5%9B%BE_1.png" alt="å†…å­˜è§†å›¾æµè§ˆ"></p><ul><li>æœ€å·¦ä¾§ä¸ºå†…å­˜åœ°å€</li><li>ä¸­é—´æ˜¯ä»¥16è¿›åˆ¶å­˜å‚¨çš„å®é™…å€¼</li><li>æœ€å³è¾¹æ˜¯ä»¥ACCIIå¯¹å€¼çš„è§£é‡Š</li></ul><h4 id="å†…å­˜è§†å›¾çš„ä½¿ç”¨"><a href="#å†…å­˜è§†å›¾çš„ä½¿ç”¨" class="headerlink" title="å†…å­˜è§†å›¾çš„ä½¿ç”¨"></a>å†…å­˜è§†å›¾çš„ä½¿ç”¨</h4><p>åœ¨åœ°å€ä¸€æ è¾“å…¥&amp;ï¼‹å˜é‡åå³å¯</p><h1 id="VSçš„æœ€ä½³è®¾ç½®"><a href="#VSçš„æœ€ä½³è®¾ç½®" class="headerlink" title="VSçš„æœ€ä½³è®¾ç½®"></a>VSçš„æœ€ä½³è®¾ç½®</h1><h2 id="é¡¹ç›®çš„è®¾ç½®"><a href="#é¡¹ç›®çš„è®¾ç½®" class="headerlink" title="é¡¹ç›®çš„è®¾ç½®"></a>é¡¹ç›®çš„è®¾ç½®</h2><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E8%99%9A%E6%8B%9F%E7%BB%84%E7%BB%87.ong" alt="è™šæ‹Ÿç»„ç»‡"></p><blockquote><p>è¿™åªæ˜¯è™šæ‹Ÿç»„ç»‡çš„æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­å¹¶ä¸å­˜åœ¨ã€‚</p></blockquote><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%96%87%E4%BB%B6%E5%A4%B9.png" alt="æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶"><br>æˆ‘ä»¬å¯ä»¥ç‚¹å‡»<strong>æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶</strong>è¿™ä¸ªæŒ‰é’®ï¼Œè¿™æ ·å­æ–°æ·»åŠ æ–‡ä»¶å¤¹çš„æ—¶å€™å°±å®é™…çš„æ·»åŠ äº†æ–‡ä»¶å¤¹ï¼Œè€Œéè™šæ‹Ÿæ–‡ä»¶å¤¹ã€‚</p><h2 id="æ–‡ä»¶å¤¹çš„è®¾ç½®"><a href="#æ–‡ä»¶å¤¹çš„è®¾ç½®" class="headerlink" title="æ–‡ä»¶å¤¹çš„è®¾ç½®"></a>æ–‡ä»¶å¤¹çš„è®¾ç½®</h2><p><img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E8%AE%BE%E7%BD%AE.png" alt="è®¾ç½®"><br><code>$(SolutionDir)bin\$(Platform)\$(Configuration)\</code></p><h1 id="C-æ¡ä»¶ä¸åˆ†å€¼-ifè¯­å¥"><a href="#C-æ¡ä»¶ä¸åˆ†å€¼-ifè¯­å¥" class="headerlink" title="C++æ¡ä»¶ä¸åˆ†å€¼(ifè¯­å¥)"></a>C++æ¡ä»¶ä¸åˆ†å€¼(ifè¯­å¥)</h1><p> æ£€æŸ¥æ¡ä»¶ï¼Œç„¶åè·³è½¬åˆ°å†…å­˜çš„ä¸åŒçš„åœ°æ–¹,å¹¶ä»è¿™é‡Œå¼€å§‹æ‰§è¡ŒæŒ‡ä»¤ã€‚</p><h2 id="å†…åœ¨æŒ‡ä»¤"><a href="#å†…åœ¨æŒ‡ä»¤" class="headerlink" title="å†…åœ¨æŒ‡ä»¤"></a>å†…åœ¨æŒ‡ä»¤</h2><p> <img src="/2023/12/14/CPP-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4-C-%E5%AD%A6%E4%B9%A0-%E5%9B%BD%E5%BA%86%E6%9C%9F%E9%97%B4/%E5%8F%8D%E6%B1%87%E7%BC%96.png" alt="åæ±‡ç¼–"></p><blockquote><p>è®¾ç½®æ–­ç‚¹è°ƒè¯•æ—¶ï¼Œå³é”®è¿›å…¥åæ±‡ç¼–æ¨¡å¼</p></blockquote><ul><li>mov : move</li><li>jne ï¼šjump not equal</li><li>je ï¼šjump equel</li></ul><blockquote><ol><li><p><code>mov dword ptr [a], 5</code>ï¼šè¿™æ¡æŒ‡ä»¤å°†ç«‹å³æ•°5ç§»åŠ¨åˆ°åä¸º<code>a</code>çš„æ•´æ•°å˜é‡ã€‚å®ƒå°†5å­˜å‚¨åˆ°<code>a</code>çš„å†…å­˜ä½ç½®ã€‚</p></li><li><p><code>cmp dword ptr [a], 5</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæŒ‡ä»¤ï¼Œç”¨äºæ¯”è¾ƒ<code>a</code>çš„å€¼ä¸5çš„å€¼ã€‚å®ƒå°†<code>a</code>çš„å€¼ä¸5è¿›è¡Œæ¯”è¾ƒï¼Œä½†ä¸ä¼šæ›´æ”¹ä»»ä½•å¯„å­˜å™¨çš„å€¼ã€‚</p></li><li><p><code>jne main+34h (07FF6F0B823B4h)</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ¡ä»¶è·³è½¬æŒ‡ä»¤ã€‚å®ƒæ£€æŸ¥å‰é¢çš„æ¯”è¾ƒç»“æœæ˜¯å¦ä¸ç­‰äºï¼ˆjneè¡¨ç¤ºâ€jump if not<br>equalâ€ï¼‰é›¶ï¼Œå¦‚æœä¸ç­‰äºé›¶ï¼Œåˆ™è·³è½¬åˆ°æŒ‡å®šçš„åœ°å€ï¼Œè¿™é‡Œæ˜¯<code>main+34h</code>ã€‚</p></li><li><p><code>mov dword ptr [rbp+0F4h], 1</code>ï¼šå¦‚æœæ¯”è¾ƒç»“æœæ˜¯ç›¸ç­‰çš„ï¼ˆå³<code>a</code>ç­‰äº5ï¼‰ï¼Œåˆ™å°†ç«‹å³æ•°1ç§»åŠ¨åˆ°å†…å­˜ä¸­çš„æŸä¸ªä½ç½®ï¼Œè¯¥ä½ç½®å¯èƒ½æ˜¯ä¸€ä¸ªæ ‡å¿—å˜é‡ï¼Œç”¨äºè¡¨ç¤ºæ¡ä»¶æ»¡è¶³ã€‚</p></li><li><p><code>jmp main+3Eh (07FF6F0B823BEh)</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œå®ƒå°†ç¨‹åºè·³è½¬åˆ°æŒ‡å®šçš„åœ°å€ï¼Œè¿™é‡Œæ˜¯<code>main+3Eh</code>ã€‚</p></li><li><p><code>mov dword ptr [rbp+0F4h], 0</code>ï¼šè¿™ä¸ªæŒ‡ä»¤æ˜¯å‰é¢æ¡ä»¶è·³è½¬çš„ç›®æ ‡ï¼ˆå¦‚æœæ¯”è¾ƒç»“æœä¸ç­‰äºé›¶ï¼‰ï¼Œå®ƒå°†ç«‹å³æ•°0ç§»åŠ¨åˆ°å†…å­˜ä¸­çš„æŸä¸ªä½ç½®ï¼Œè¡¨ç¤ºæ¡ä»¶ä¸æ»¡è¶³ã€‚</p></li><li><p><code>movzx eax, byte ptr [rbp+0F4h]</code>ï¼šè¿™æ¡æŒ‡ä»¤å°†å†…å­˜ä¸­çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰åŠ è½½åˆ°32ä½å¯„å­˜å™¨<code>eax</code>ä¸­ï¼Œå¹¶å°†å…¶é›¶æ‰©å±•ï¼ˆå³é«˜ä½å¡«å……0ï¼‰ã€‚è¿™å¯èƒ½æ˜¯ä¸ºäº†å°†æ¡ä»¶æ»¡è¶³ä¸å¦çš„æ ‡å¿—ä½åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ã€‚</p></li><li><p><code>mov byte ptr [comparisonResult], al</code>ï¼šè¿™ä¸ªæŒ‡ä»¤å°†å¯„å­˜å™¨<code>al</code>ä¸­çš„å­—èŠ‚å€¼å†™å…¥åä¸º<code>comparisonResult</code>çš„å¸ƒå°”å˜é‡ã€‚è¿™æ˜¯å°†æ¡ä»¶åˆ¤æ–­çš„ç»“æœä¿å­˜åˆ°å¸ƒå°”å˜é‡ä¸­çš„æ“ä½œã€‚</p></li><li><p><code>movzx eax, byte ptr [comparisonResult]</code>ï¼šè¿™æ˜¯å°†å¸ƒå°”å˜é‡<code>comparisonResult</code>çš„å€¼åŠ è½½åˆ°å¯„å­˜å™¨<code>eax</code>ä¸­ï¼Œä»¥ä¾¿è¿›è¡Œè¿›ä¸€æ­¥çš„æ¡ä»¶åˆ¤æ–­ã€‚</p></li><li><p><code>test eax, eax</code>ï¼šè¿™ä¸ªæŒ‡ä»¤å°†å¯„å­˜å™¨<code>eax</code>ä¸è‡ªèº«è¿›è¡ŒæŒ‰ä½ä¸æ“ä½œã€‚å®ƒçš„ç›®çš„æ˜¯æ£€æŸ¥<code>eax</code>ä¸­çš„å€¼æ˜¯å¦ä¸ºé›¶ã€‚</p></li><li><p><code>je main+5Ch (07FF6F0B823DCh)</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œå¦‚æœå‰é¢çš„æŒ‰ä½ä¸æ“ä½œç»“æœç­‰äºé›¶ï¼ˆå³<code>eax</code>ä¸­çš„å€¼ä¸ºé›¶ï¼‰ï¼Œåˆ™è·³è½¬åˆ°æŒ‡å®šçš„åœ°å€ï¼Œè¿™é‡Œæ˜¯<code>main+5Ch</code>ã€‚</p></li><li><p><code>lea rcx, [string &quot;hello&quot; (07FF6F0B8BCA4h)]</code>ï¼šè¿™ä¸ªæŒ‡ä»¤å°†å­—ç¬¦ä¸²â€helloâ€çš„åœ°å€åŠ è½½åˆ°å¯„å­˜å™¨<code>rcx</code>ä¸­ï¼Œå‡†å¤‡è°ƒç”¨ä¸€ä¸ªåä¸º<code>Log</code>çš„å‡½æ•°ã€‚</p></li><li><p><code>call Log (07FF6F0B8135Ch)</code>ï¼šè¿™æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨æŒ‡ä»¤ï¼Œå®ƒè°ƒç”¨åä¸º<code>Log</code>çš„å‡½æ•°ï¼Œå¹¶å°†<code>rcx</code>ä¸­çš„åœ°å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™è¯¥å‡½æ•°ï¼Œç”¨äºè®°å½•â€helloâ€ã€‚</p></li></ol></blockquote><h1 id="C-å¾ªç¯"><a href="#C-å¾ªç¯" class="headerlink" title="C++å¾ªç¯"></a>C++å¾ªç¯</h1><p>for and while å¾ªç¯</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; a &lt; <span class="number">5</span> ; i++)</span><br><span class="line">&#123;</span><br><span class="line">pass</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å˜é‡çš„å£°æ˜,å¾ªç¯çš„æ¡ä»¶(è¯„ä¼°åçš„boolå€¼),ä¸€æ¬¡å¾ªç¯åçš„æ“ä½œ</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (i &lt; <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">.....</span><br><span class="line">i ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt; <span class="number">5</span>)</span><br></pre></td></tr></table></figure><h1 id="C-æ§åˆ¶æµè¯­å¥"><a href="#C-æ§åˆ¶æµè¯­å¥" class="headerlink" title="C++æ§åˆ¶æµè¯­å¥"></a>C++æ§åˆ¶æµè¯­å¥</h1><p>æ§åˆ¶æµä¸€èˆ¬å’Œå¾ªç¯ä¸€èµ·ä½¿ç”¨</p><ul><li>continue :åªèƒ½åœ¨å¾ªç¯ä½¿ç”¨</li><li>break : èƒ½åœ¨å¾ªç¯å’Œswitchè¯­å¥ä½¿ç”¨</li><li>return</li></ul><h2 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h2><p>è·³åˆ°å¾ªç¯çš„ä¸‹ä¸€ä¸ªè¿­ä»£</p><h2 id="break"><a href="#break" class="headerlink" title="break"></a>break</h2><p>è·³å‡ºå¾ªç¯</p><h2 id="return"><a href="#return" class="headerlink" title="return"></a>return</h2><p>è¿”å›å€¼ï¼Œç»ˆæ­¢è¯­å¥</p><h1 id="C-æŒ‡é’ˆ"><a href="#C-æŒ‡é’ˆ" class="headerlink" title="C++æŒ‡é’ˆ"></a>C++æŒ‡é’ˆ</h1><p>æŒ‡é’ˆæ˜¯æ•´æ•°ï¼Œä¸€ç§å­˜å‚¨å†…å­˜åœ°å€çš„æ•°å­—ã€‚å¯¹ç®¡ç†å’Œæ“çºµå†…å­˜æœ‰å¾ˆå¤§ç”¨å¤„.</p><h2 id="æŒ‡é’ˆçš„å¼•ç”¨å’Œé€†å¼•ç”¨"><a href="#æŒ‡é’ˆçš„å¼•ç”¨å’Œé€†å¼•ç”¨" class="headerlink" title="æŒ‡é’ˆçš„å¼•ç”¨å’Œé€†å¼•ç”¨"></a>æŒ‡é’ˆçš„å¼•ç”¨å’Œé€†å¼•ç”¨</h2><p>ç±»å‹çš„æ„ä¹‰åœ¨äºé€†å¼•ç”¨æŒ‡é’ˆæ—¶å¯ä»¥è®¿é—®å’Œä¿®æ”¹å˜é‡</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> var = <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;var;</span><br><span class="line">*ptr = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç”³è¯·å†…å­˜å’ŒäºŒæ¬¡æŒ‡é’ˆ"><a href="#ç”³è¯·å†…å­˜å’ŒäºŒæ¬¡æŒ‡é’ˆ" class="headerlink" title="ç”³è¯·å†…å­˜å’ŒäºŒæ¬¡æŒ‡é’ˆ"></a>ç”³è¯·å†…å­˜å’ŒäºŒæ¬¡æŒ‡é’ˆ</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">char</span>* buffer = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">8</span>];</span><br><span class="line"><span class="built_in">memset</span>(buffer, <span class="number">0</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>** ptr = &amp;buffer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span>[] buffer;</span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>pteåœ°å€çš„å†…å­˜å®é™…ä¸Šæ˜¯bufferçš„å†…å­˜åœ°å€ï¼Œåªä¸è¿‡åäº†è¿‡æ¥<br>æ¯”å¦‚å¦‚æœpteçš„å†…å­˜æ˜¯b8 f1 02 00<br>é‚£ä¹ˆbufferçš„å†…å­˜åœ°å€å°±æ˜¯00 02 f1 b8</p></blockquote><h1 id="C-å¼•ç”¨"><a href="#C-å¼•ç”¨" class="headerlink" title="C++å¼•ç”¨"></a>C++å¼•ç”¨</h1><p>(æŒ‡é’ˆçš„æ‰©å±•)<br>å¼•ç”¨ä¸ç”¨å ç”¨å†…å­˜ï¼Œä½†æ˜¯æŒ‡é’ˆæ˜¯å˜é‡ï¼Œä¼šå ç”¨å†…å­˜ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span>&amp; ref = a;</span><br><span class="line"><span class="comment">//ref å®é™…ä¸Šä¸å­˜åœ¨ï¼Œç¼–è¯‘ååªä¼šæœ‰å˜é‡a</span></span><br><span class="line"><span class="comment">//ç›¸å½“äºaçš„åˆ«å</span></span><br><span class="line"> </span><br><span class="line"> std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨çš„ä½œç”¨"><a href="#å¼•ç”¨çš„ä½œç”¨" class="headerlink" title="å¼•ç”¨çš„ä½œç”¨"></a>å¼•ç”¨çš„ä½œç”¨</h2><blockquote><p>è¿ç”¨æŒ‡é’ˆçš„ä¾‹å­</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Increment</span><span class="params">(<span class="type">int</span>* value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">(*value)++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">Increment</span>(&amp;a)ï¼›</span><br><span class="line"><span class="built_in">Log</span>(a);</span><br><span class="line"><span class="comment">//ç»“æœä¸º : 6</span></span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿ç”¨å¼•ç”¨çš„ä¾‹å­</p></blockquote><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Increment</span><span class="params">(<span class="type">int</span>&amp; value)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">value++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">Increment</span>(a);</span><br><span class="line"><span class="built_in">Log</span>(a);</span><br><span class="line"><span class="comment">//ç»“æœä¸º : 6</span></span><br><span class="line">std::cin.<span class="built_in">get</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨C++ä¸­ï¼Œå‡½æ•°å‚æ•°çš„é»˜è®¤ä¼ é€’æ–¹å¼æ˜¯æŒ‰å€¼ä¼ é€’(pass by value)ã€‚è¿™æ„å‘³ç€å½“ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼ é€’ç»™å‡½æ•°çš„æ˜¯åŸå§‹æ•°æ®çš„å‰¯æœ¬ï¼Œè€Œä¸æ˜¯åŸå§‹æ•°æ®æœ¬èº«ã€‚è¿™æ˜¯å› ä¸ºæŒ‰å€¼ä¼ é€’ä¼šåˆ›å»ºåŸå§‹æ•°æ®çš„å‰¯æœ¬ï¼Œä»¥ä¾¿å‡½æ•°å¯ä»¥åœ¨å‰¯æœ¬ä¸Šæ‰§è¡Œæ“ä½œï¼Œè€Œä¸ä¼šå½±å“åŸå§‹æ•°æ®ã€‚<br> å½“ä½ è°ƒç”¨Increment(a)æ—¶ï¼Œaçš„å€¼è¢«å¤åˆ¶åˆ°Incrementå‡½æ•°çš„å±€éƒ¨å˜é‡valueä¸­ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨å¯¹valueè¿›è¡Œé€’å¢æ“ä½œã€‚è¿™ä¸ªé€’å¢æ“ä½œåªä¼šå½±å“valueçš„å‰¯æœ¬ï¼Œè€Œä¸ä¼šå½±å“açš„åŸå§‹å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨mainå‡½æ•°ä¸­a çš„å€¼ä»ç„¶æ˜¯5ã€‚</p></blockquote><p>é‚£å¦‚æœæˆ‘ç”¨return aå‘¢ï¼Ÿ</p><blockquote><p>å¦‚æœä½ åœ¨ Increment å‡½æ•°ä¸­è¿”å› valueï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨ main å‡½æ•°ä¸­æ•è·è¿™ä¸ªè¿”å›å€¼å¹¶å°†å…¶åˆ†é…ç»™ aï¼Œæ‰èƒ½ä½¿ a çš„å€¼å¢åŠ ã€‚è¿™æ˜¯å› ä¸ºåœ¨ C++ ä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¸ä¼šè‡ªåŠ¨ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„å‚æ•°ã€‚<br>a &#x3D; increment(a)</p></blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œå¼•ç”¨å¯ä»¥èŠ‚çº¦å†…å­˜å¼€é”€,é¿å…é‡å¤å¤åˆ¶ã€‚</p><h2 id="å¼•ç”¨çš„æ³¨æ„"><a href="#å¼•ç”¨çš„æ³¨æ„" class="headerlink" title="å¼•ç”¨çš„æ³¨æ„"></a>å¼•ç”¨çš„æ³¨æ„</h2><p>ä½ ä¸èƒ½æ”¹å˜å®ƒå¼•ç”¨çš„ä¸œè¥¿<br>ä¾‹å¦‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span>&amp; ref = a;</span><br><span class="line">ref = b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åº”è¯¥æ”¹ä¸º</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">int</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="type">int</span> b = <span class="number">8</span>;</span><br><span class="line"><span class="type">int</span>* ref = &amp;a;</span><br><span class="line">*ref = <span class="number">2</span>;</span><br><span class="line">ref = &amp;b;</span><br><span class="line">*ref = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Log</span>(a);</span><br><span class="line"><span class="built_in">Log</span>(b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼Œé”™è¯¯ä¾‹å­ä¸­ä¼šè¿è¡ŒæˆåŠŸï¼Œä½†æ˜¯ä»–å¹¶ä¸æ˜¯æ›´æ”¹å¼•ç”¨,refè¿™ä¸ªå¼•ç”¨è¿˜æ˜¯å¼•ç”¨çš„a</p></blockquote><h1 id="C-ç±»"><a href="#C-ç±»" class="headerlink" title="C++ç±»"></a>C++ç±»</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Player</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> x,y;</span><br><span class="line"><span class="type">int</span> speed;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Move</span><span class="params">(<span class="type">int</span> xa, <span class="type">int</span> ya)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">x += xa * speed;</span><br><span class="line">y += ya * speed;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//void Move(Player&amp; player, int xa, int ya)</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//player.x += xa * player.speed;</span></span><br><span class="line"><span class="comment">//player.y += xa * player.speed;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Player player;</span><br><span class="line">player.x = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>èŠ±æ‹¬å·åé¢éœ€è¦æœ‰åˆ†å·<br>ç”±ç±»ç±»å‹æ„æˆçš„å˜é‡ç§°ä¸º<strong>å¯¹è±¡</strong><br>æ–°çš„å¯¹è±¡å˜é‡ç§°ä¸º<strong>å®ä¾‹</strong><br>ç±»ä¸­çš„å‡½æ•°ç§°ä¸º<strong>æ–¹æ³•</strong></p></blockquote><blockquote><p>ç±»ä¸­çš„å±æ€§æ˜¯ç§æœ‰çš„ï¼Œå¦‚æœéœ€è¦è®¿é—®ä¿®æ”¹éœ€è¦publicç±»ä¸­çš„å±æ€§ã€‚</p></blockquote><h1 id="C-ç±»ä¸ç»“æ„ä½“å¯¹æ¯”"><a href="#C-ç±»ä¸ç»“æ„ä½“å¯¹æ¯”" class="headerlink" title="C++ç±»ä¸ç»“æ„ä½“å¯¹æ¯”"></a>C++ç±»ä¸ç»“æ„ä½“å¯¹æ¯”</h1><p>ç±»é»˜è®¤æ˜¯ç§æœ‰çš„ï¼Œç±»å¤–éƒ¨è°ƒç”¨æ—¶æ— æ³•è°ƒç”¨ã€‚<br>æŠ€æœ¯ä¸Šè¯´ï¼Œæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯ä½¿ç”¨æƒ…å¢ƒä¸åŒã€‚<br>struct and class</p><blockquote><p>å¼¹å¹•ï¼šç”¨ç»“æ„ä½“å½“æ•°æ®å®¹å™¨ï¼Œç”¨ç±»æ¥å†™å…·å¤‡é€»è¾‘çš„åŠŸèƒ½å¯¹è±¡.</p></blockquote><h2 id="åŒºåˆ«ï¼š"><a href="#åŒºåˆ«ï¼š" class="headerlink" title="åŒºåˆ«ï¼š"></a>åŒºåˆ«ï¼š</h2><ol><li>é»˜è®¤çš„ç»§æ‰¿è®¿é—®æƒ : classé»˜è®¤çš„æ˜¯private,strcuté»˜è®¤çš„æ˜¯publicã€‚</li><li>é»˜è®¤è®¿é—®æƒé™ : structä½œä¸ºæ•°æ®ç»“æ„çš„å®ç°ä½“ï¼Œå®ƒé»˜è®¤çš„æ•°æ®è®¿é—®æ§åˆ¶æ˜¯publicçš„ï¼Œè€Œclassä½œä¸ºå¯¹è±¡çš„å®ç°ä½“ï¼Œå®ƒé»˜è®¤çš„æˆå‘˜å˜é‡è®¿é—®æ§åˆ¶æ˜¯privateçš„ã€‚</li><li>â€œclassâ€è¿™ä¸ªå…³é”®å­—è¿˜ç”¨äºå®šä¹‰æ¨¡æ¿å‚æ•°ï¼Œå°±åƒâ€œtypenameâ€ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonâ€”å­—ç¬¦ä¸²,å¤šæ€å‡½æ•°ï¼ˆæ¥å£ï¼‰ï¼Œç‰¹æ®Šæ–¹æ³•åç§°[61A Fall 2023 Lecture 20â€”â€”Inheritance]</title>
      <link href="/2023/12/14/Python-Python%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%A4%9A%E6%80%81%E5%87%BD%E6%95%B0%EF%BC%88%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%8C%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0-61A-Fall-2023-Lecture-20%E2%80%94%E2%80%94Inheritance-Python%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%A4%9A%E6%80%81%E5%87%BD%E6%95%B0%EF%BC%88%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%8C%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0-61A-Fall-2023-Lecture-20%E2%80%94%E2%80%94Inheritance/"/>
      <url>/2023/12/14/Python-Python%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%A4%9A%E6%80%81%E5%87%BD%E6%95%B0%EF%BC%88%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%8C%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0-61A-Fall-2023-Lecture-20%E2%80%94%E2%80%94Inheritance-Python%E2%80%94%E5%AD%97%E7%AC%A6%E4%B8%B2-%E5%A4%9A%E6%80%81%E5%87%BD%E6%95%B0%EF%BC%88%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%8C%E7%89%B9%E6%AE%8A%E6%96%B9%E6%B3%95%E5%90%8D%E7%A7%B0-61A-Fall-2023-Lecture-20%E2%80%94%E2%80%94Inheritance/</url>
      
        <content type="html"><![CDATA[<p>@[TOC]</p><h1 id="å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼"><a href="#å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼" class="headerlink" title="å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼"></a>å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼</h1><h2 id="str"><a href="#str" class="headerlink" title="str()"></a>str()</h2><p>æ–¹ä¾¿é˜…è¯»</p><h2 id="repr"><a href="#repr" class="headerlink" title="repr()"></a>repr()</h2><p>æ–¹ä¾¿è°ƒè¯•</p><ul><li>repr è¿”å›å¯¹è±¡çš„å®˜æ–¹è¡¨ç¤ºå½¢å¼</li><li>print ç”¨äºæ‰“å°å¯è¯»æ€§å¥½çš„å­—ç¬¦ä¸²</li><li>str è¿”å›å¯¹è±¡çš„éæ­£å¼è¡¨ç¤º</li><li>eval ç”¨äºæ‰§è¡Œå­—ç¬¦ä¸²è¡¨ç¤ºçš„ä»£ç ã€‚</li><li>åœ¨å­—ç¬¦ä¸²ç¤ºä¾‹ä¸­ï¼Œç”±äºå­—ç¬¦ä¸²ä¸­åŒ…å«å¼•å·å’Œå…¨è§’é€—å·ï¼Œå› æ­¤åœ¨ repr å’Œ str çš„è¾“å‡ºä¸­ä¼šåæ˜ è¿™äº›å·®å¼‚ï¼Œä½† eval ç”¨äºæ‰§è¡Œè¿™äº›å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä»¬è¢«æ­£ç¡®å¤„ç†ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> fractions <span class="keyword">import</span> Fraction</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>half= Fraction(<span class="number">1</span>ï¼Œ<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>halfFraction(<span class="number">1</span>ï¼Œ<span class="number">2</span>)</span><br><span class="line">&gt;&gt;&gt;&gt; <span class="built_in">repr</span>(half)</span><br><span class="line"><span class="string">&#x27;Fraction(1ï¼Œ2)&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(half)</span><br><span class="line"><span class="number">1</span>/<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>(half)</span><br><span class="line"><span class="string">&#x27;1/2&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">eval</span>(<span class="built_in">repr</span>(half))</span><br><span class="line">Fraction(<span class="number">1</span>ï¼Œ<span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">eval</span>(<span class="built_in">str</span>(half))</span><br><span class="line">05</span><br></pre></td></tr></table></figure><blockquote><p>repr(half) è¿”å›å¯¹è±¡çš„â€officialâ€å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œå®ƒæ˜¯ Fraction(1ï¼Œ2)ï¼Œå®ƒæ˜¯æœ‰æ•ˆçš„Pythonè¡¨è¾¾å¼ï¼Œå¯ä»¥ç”¨äºé‡å»ºç›¸åŒçš„å¯¹è±¡ã€‚<br>print(half) æ‰“å°å¯¹è±¡æ—¶ï¼Œprint ä½¿ç”¨å¯¹è±¡çš„ str æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒè¾“å‡º â€˜1&#x2F;2â€™ï¼Œè¿™æ˜¯ç”¨æˆ·å‹å¥½çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚<br>str(half) è¿”å›å¯¹è±¡çš„â€informalâ€å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼Œè¿™é‡Œè¿”å› â€˜1&#x2F;2â€™ã€‚<br>eval(repr(half)) ä½¿ç”¨ eval å‡½æ•°æ¥æ‰§è¡Œ repr(half) è¿”å›çš„å­—ç¬¦ä¸²ï¼Œè¿™å°†è¿”å›ä¸€ä¸ªæ–°çš„ Fraction å¯¹è±¡ï¼Œå³ Fraction(1ï¼Œ2)ã€‚<br>eval(str(half)) ä½¿ç”¨ eval å‡½æ•°æ¥æ‰§è¡Œ str(half) è¿”å›çš„å­—ç¬¦ä¸²ï¼Œè¿™å°†è¿”å›æµ®ç‚¹æ•° 0.5ï¼Œå› ä¸º eval è§£é‡Šå®ƒä¸ºæ•°å­¦è¡¨è¾¾å¼ã€‚</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&quot;Hello, World&quot;</span></span><br><span class="line">&gt;&gt;&gt;s</span><br><span class="line"><span class="string">&#x27;Helloï¼ŒWorld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">repr</span>(s))</span><br><span class="line"><span class="string">&#x27;Helloï¼ŒWorld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(s)</span><br><span class="line">Helloï¼ŒWorld</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="built_in">str</span>(s))</span><br><span class="line">Helloï¼ŒWorld</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">str</span>(s)</span><br><span class="line"><span class="string">&#x27;Helloï¼ŒWorld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">repr</span>(s)</span><br><span class="line"><span class="string">&quot;&#x27;Hello,World&#x27;&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">eval</span>(<span class="built_in">repr</span>(s))</span><br><span class="line"><span class="string">&#x27;Helloï¼ŒWorld&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">repr</span>(<span class="built_in">repr</span>(<span class="built_in">repr</span>(s)))</span><br><span class="line"><span class="string">&#x27;\&#x27;&quot;\\\&#x27;Hello,world\\\&#x27;&quot;\&#x27;&#x27;</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">eval</span>(<span class="built_in">eval</span>(<span class="built_in">eval</span>(<span class="built_in">repr</span>(<span class="built_in">repr</span>(<span class="built_in">repr</span>(s)))))))</span><br><span class="line"><span class="string">&#x27;Hello, World&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="å­—ç¬¦ä¸²æ’å€¼"><a href="#å­—ç¬¦ä¸²æ’å€¼" class="headerlink" title="å­—ç¬¦ä¸²æ’å€¼"></a>å­—ç¬¦ä¸²æ’å€¼</h1><h2 id="fâ€™-â€™"><a href="#fâ€™-â€™" class="headerlink" title="fâ€™{}â€™"></a>fâ€™{}â€™</h2><p>èŠ±æ‹¬å·é‡Œçš„ä¸ºPythonè¡¨è¾¾å¼ ä¼šè‡ªåŠ¨è®¡ç®—<br>ä½ ä¹Ÿå¯ä»¥ç”¨str()æˆ–repr()</p><h1 id="å¤šæ€å‡½æ•°"><a href="#å¤šæ€å‡½æ•°" class="headerlink" title="å¤šæ€å‡½æ•°"></a>å¤šæ€å‡½æ•°</h1><p>ä½¿ç”¨äºè®¸å¤šä¸åŒç±»å‹æ•°æ®çš„å‡½æ•°<br>strå’Œreprå‡½æ•°å°±æ˜¯ä¾‹å­</p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h2><h3 id="repr-1"><a href="#repr-1" class="headerlink" title="repr"></a>repr</h3><p>è°ƒç”¨ä¸€ä¸ªé›¶å‚æ•°æ–¹æ³•ï¼Œç›¸åº”åœ°ç§°ä¸º__repr__</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>half.__repr__()</span><br><span class="line"><span class="string">&#x27;Fraction(1, 2)&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="str-1"><a href="#str-1" class="headerlink" title="str"></a>str</h3><p>è°ƒç”¨ä¸€ä¸ªé›¶å‚æ•°æ–¹æ³•ï¼Œç›¸åº”åœ°ç§°ä¸º_str_</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>half.__str__()</span><br><span class="line"><span class="string">&#x27;1/2&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä½¿ç”¨print()æ—¶å®é™…ä¸Šå°±æ˜¯è°ƒç”¨äº†__str__()</p></blockquote><h2 id="reprå’Œstrçš„å®ç°"><a href="#reprå’Œstrçš„å®ç°" class="headerlink" title="reprå’Œstrçš„å®ç°"></a>reprå’Œstrçš„å®ç°</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">repr</span>(<span class="params">x</span>):</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">type</span>(x).__repr__(x)</span><br></pre></td></tr></table></figure><p>é€šè¿‡æŸ¥æ‰¾ä¸ºä½ æä¾›çš„å‚æ•°ç±»å‹æ¥è®¾æ³•è·³è¿‡å®ä¾‹å±æ€§æˆ–å¿½ç•¥ä»–ä»¬</p><blockquote><p>æ˜¯ä¸€ä¸ªç±»å±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ä¸æ˜¯ç»‘å®šæ–¹æ³•ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨typeç±»ä¸­æŸ¥æ‰¾çš„</p></blockquote><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><ul><li>å¯¹è±¡å±æ€§æ˜¯æ¶ˆæ¯ä¼ é€’çš„ä¸€ç§å½¢å¼ï¼Œå®ƒå…è®¸ä¸åŒçš„æ•°æ®ç±»å‹ä»¥ä¸åŒçš„æ–¹å¼å“åº”åŒä¸€æ¶ˆæ¯ã€‚</li></ul><blockquote><p>å¯¹è±¡é€šè¿‡å‘é€æ¶ˆæ¯(é€šå¸¸æ˜¯æ–¹æ³•è°ƒç”¨)æ¥ä¸å…¶ä»–å¯¹è±¡è¿›è¡Œäº¤äº’ã€‚å¯¹è±¡çš„å±æ€§å¯ä»¥æ˜¯å¯¹è±¡çš„çŠ¶æ€æˆ–æ•°æ®ã€‚</p></blockquote><ul><li>ä»ä¸åŒç±»å¼•å‡ºç±»ä¼¼è¡Œä¸ºçš„ä¸€ç»„å…±äº«æ¶ˆæ¯æ˜¯ä¸€ç§å¼ºå¤§çš„æŠ½è±¡æ–¹æ³•ã€‚</li></ul><blockquote><p>ä¸åŒçš„ç±»å¯ä»¥å®ç°ç›¸åŒçš„æ¥å£æˆ–å…±äº«ç›¸åŒçš„æ¶ˆæ¯ã€‚</p></blockquote><ul><li>æ¥å£æ˜¯ä¸€ç»„å…±äº«å±æ€§åç§°ï¼Œä»¥åŠå®ƒä»¬çš„è¡Œä¸ºè§„èŒƒã€‚åœ¨å¤æ•°çš„æƒ…å†µä¸‹ï¼Œå®ç°ç®—æœ¯æ‰€éœ€çš„æ¥å£ç”±å››ä¸ªå±æ€§ç»„æˆï¼š real ã€ imag ã€ magnitude å’Œ angle ã€‚<blockquote><p>è¿™æ˜¯ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ï¼Œè¯´æ˜äº†æ¥å£çš„ç”¨é€”ã€‚å¦‚æœå¤šä¸ªç±»éœ€è¦å®ç°æŸç§ç®—æœ¯æ“ä½œï¼ˆä¾‹å¦‚å¤æ•°çš„åŠ æ³•æˆ–ä¹˜æ³•ï¼‰ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œå…¶ä¸­åŒ…å«æ‰€éœ€çš„å±æ€§åç§°å’Œæ–¹æ³•ï¼Œä»¥ç¡®ä¿è¿™äº›ç±»éƒ½å…·æœ‰ç›¸åŒçš„æ¥å£ï¼Œä»è€Œå¯ä»¥æ‰§è¡Œç›¸ä¼¼çš„æ“ä½œã€‚</p></blockquote></li></ul><p>æ¶ˆæ¯ä¼ é€’ï¼šå¯¹è±¡é€šè¿‡æŸ¥æ‰¾å½¼æ­¤çš„å±æ€§ï¼ˆä¼ é€’æ¶ˆæ¯ï¼‰è¿›è¡Œäº¤äº’<br>å±æ€§æŸ¥æ‰¾è§„åˆ™å…è®¸ä¸åŒçš„æ•°æ®ç±»å‹å“åº”ç›¸åŒçš„æ¶ˆæ¯<br>ä»ä¸åŒå¯¹è±¡ç±»ä¸­å¼•å‡ºç±»ä¼¼è¡Œä¸ºçš„å…±äº«æ¶ˆæ¯ï¼ˆå±æ€§åï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„<strong>æŠ½è±¡æ–¹æ³•</strong></p><p><strong>å®ç°è¿”å›pythonå¯è§£é‡Šå’Œäººç±»å¯è¯»å­—ç¬¦ä¸²çš„æ–¹æ³•</strong>çš„<strong>ç±»</strong>å®ç°äº†ç”¨äº<strong>ç”Ÿæˆå­—ç¬¦ä¸²è¡¨ç¤ºçš„æ¥å£</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ratio</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n , d</span>):</span><br><span class="line">        self.numer = n</span><br><span class="line">        self.denom = d</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Ratio(&#123;0&#125;, &#123;1&#125;)&#x27;</span>.<span class="built_in">format</span>(self.numer, self.denom)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(self.numer, self.denom)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>half = Ratio(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(half)</span><br><span class="line"><span class="number">1</span>/<span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>half</span><br><span class="line">Ratio(<span class="number">1</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ªäººå¯¹æ¥å£çš„ç†è§£ï¼šæœ‰ä¸€äº›å…·æœ‰ç›¸åŒè¡Œä¸ºçš„ç±»ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ä¼ å…¥è¿™äº›ç±»ä¸­çš„æ•°æ®ç±»å‹ä¾¿çŸ¥é“è¿™äº›ç±»éƒ½æœ‰ä¸€ç§å¯ä»¥è®¡ç®—æŸä¸ªç»“æœçš„æ–¹æ³•ã€‚è¿™æ ·å­ä¸ç®¡ä»€ä¹ˆæ•°æ®ç±»å‹éƒ½å¯ä»¥è®¡ç®—å‡ºæˆ‘ä»¬éœ€è¦çš„é¢„æœŸç»“æœã€‚[è¿™æ˜¯æŠ½è±¡æ¥å£]</p></blockquote><blockquote><p>Pythonå­˜åœ¨ä¸¤ç§æ¥å£ ä¸€ä¸ªæ˜¯é¢å¯¹å¯¹è±¡ç”¨äºç»§æ‰¿çš„æŠ½è±¡æ¥å£ï¼Œä¸€ä¸ªæ˜¯ç”¨äºå°è£…ç±»æ˜¾éœ²å‡ºæ¥çš„åŠ¨æ€æ¥å£[ä¸‹é¢Ratioç±»çš„addæ–¹æ³•æ˜¯ä¸€ç§æ¥å£ï¼Œæ˜¯åŠ¨æ€æ¥å£]</p></blockquote><h1 id="ç‰¹æ®Šæ–¹æ³•åç§°"><a href="#ç‰¹æ®Šæ–¹æ³•åç§°" class="headerlink" title="ç‰¹æ®Šæ–¹æ³•åç§°"></a>ç‰¹æ®Šæ–¹æ³•åç§°</h1><p>æ€»æ˜¯æœ‰__åœ¨å‰é¢å’Œåé¢</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;zero, one, two = <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one + two</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">bool</span>(zero), <span class="built_in">bool</span>(one)</span><br><span class="line">(<span class="literal">False</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&gt;&gt;&gt;zero, one, two = <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>one.__add__(two)</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>zero.__bool__(), one.__bool__()</span><br><span class="line">(<span class="literal">False</span>, <span class="literal">True</span>)</span><br></pre></td></tr></table></figure><blockquote><p>å†…ç½®è¯­æ³•å’Œå†…ç½®å‡½æ•° ä¸ å®é™…æ‰§è¡Œå·¥ä½œçš„ç‰¹æ®Šæ–¹æ³•åç§°ä¸­é—´å­˜åœ¨å¯¹åº”å…³ç³»</p></blockquote><p>è¿™æ˜¯ä½¿ç”¨æ¥å£æ¥å…è®¸ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ä¸Pythonä¸­å†…ç½®ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„å¦ä¸€ä¸ªç¤ºä¾‹ã€‚<br>æˆ‘ä»¬ä¸¾ä¾‹ç±»çš„æ—¶å€™å¯ä»¥è¦†ç›–ç‰¹æ®Šæ–¹æ³•æ¥å»ºç«‹æˆ‘ä»¬æƒ³è¦çš„äº’åŠ¨ç»“æœ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Ratio</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, n , d</span>):</span><br><span class="line">        self.numer = n</span><br><span class="line">        self.denom = d</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Ratio(&#123;0&#125;, &#123;1&#125;)&#x27;</span>.<span class="built_in">format</span>(self.numer, self.denom)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(self.numer, self.denom)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__add__</span>(<span class="params">self, other</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, <span class="built_in">int</span>):</span><br><span class="line">            n = self.numer + self.denom * other</span><br><span class="line">            d = self.denom</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">isinstance</span>(other, Ratio):</span><br><span class="line">            n = self.numer * other.denom + self.denom * other.numer</span><br><span class="line">            d = self.denom * other.denom</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">isinstance</span>(other, <span class="built_in">float</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">float</span>(self) + other</span><br><span class="line">        g = gcd(n, d)</span><br><span class="line">        <span class="keyword">return</span> Ratio(n//g, d//g)</span><br><span class="line">    __radd__ = __add__</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__float__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.numer/self.denom</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">gcd</span>(<span class="params">n, d</span>):</span><br><span class="line">    <span class="keyword">while</span> n != d:</span><br><span class="line">        n, d = <span class="built_in">min</span>(n, d), <span class="built_in">abs</span>(n - d)</span><br><span class="line">    <span class="keyword">return</span> n</span><br></pre></td></tr></table></figure><ul><li>ç±»å‹åˆ†ç±»ï¼šç”¨äº†æ¡ä»¶è¯­å¥å¯¹ä¼ å…¥çš„otheræ•°æ®ç±»å‹è¿›è¡Œåˆ¤æ–­ä»è€Œæä¾›ä¸åŒçš„æ‰§è¡Œæ–¹æ³•</li><li>ç±»å‹å¼ºåˆ¶ï¼šå°†ä¸€ç§ç±»å‹çš„å¯¹è±¡è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†å…¶ä¸å…¶ä»–å€¼ç»„åˆã€‚</li></ul><blockquote><p>è¿™æ˜¯è®©ä¸¤ä¸ªç±»è¿›è¡Œäº¤äº’æ—¶è€Œä½¿ç”¨çš„ä¸¤ç§ç­–ç•¥</p></blockquote><blockquote><p>__add__å‡½æ•°ç›¸å½“äºæ˜¯ä¸€ä¸ªéšå½¢æ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“ä¼ å…¥çš„æ•°æ®æ˜¯ä¸æ˜¯æµ®ç‚¹æ•°ã€æ•´æ•°è¿˜æ˜¯ä»€ä¹ˆï¼Œéƒ½å¯ä»¥å°†ä»–ä»¬åŠ èµ·æ¥ </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
          <category> CSè‡ªå­¦ç¬”è®° </category>
          
          <category> CS61A </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> CS61A </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </title>
      <link href="/2023/12/14/%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E6%88%90%E5%8A%9F/"/>
      <url>/2023/12/14/%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E6%88%90%E5%8A%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "><a href="#è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« " class="headerlink" title="è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« "></a>è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ç¯‡æ–‡ç« </h2><p><a href="https://www.bilibili.com/video/BV1G84y1B7NH/?spm_id_from=333.1007.top_right_bar_window_default_collection.content.click&vd_source=700c4afe7cf00e2775dbed3e27760082">(åšå®¢æ•™ç¨‹è§†é¢‘)</a></p><p><a href="https://www.fomal.cc/posts/e593433d.html">(åšå®¢æ•™ç¨‹ç½‘ç«™)</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>about</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<p><a href="https://www.bilibili.com/video/BV1G84y1B7NH/?spm_id_from=333.1007.top_right_bar_window_default_collection.content.click&vd_source=700c4afe7cf00e2775dbed3e27760082">(åšå®¢æ•™ç¨‹è§†é¢‘)</a></p><p><a href="https://www.fomal.cc/posts/e593433d.html">(åšå®¢æ•™ç¨‹ç½‘ç«™)</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>game</title>
      <link href="/game/index.html"/>
      <url>/game/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* é¡µè„šä¸å¤´å›¾é€æ˜ */#footer {  background: transparent !important;}#page-header {  background: transparent !important;}/* ç™½å¤©æ¨¡å¼é®ç½©é€æ˜ */#footer::before {  background: transparent !important;}#page-header::before {  background: transparent !important;}/* å¤œé—´æ¨¡å¼é®ç½©é€æ˜ */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* å°å†°åˆ†ç±»åˆ†ç±»ç£é“é»‘å¤œæ¨¡å¼é€‚é… *//* ä¸€èˆ¬çŠ¶æ€ */[data-theme="dark"] .magnet_link_context {  background: #1e1e1e;  color: antiquewhite;}/* é¼ æ ‡æ‚¬æµ®çŠ¶æ€ */[data-theme="dark"] .magnet_link_context:hover {  background: #3ecdf1;  color: #f2f2f2;}/* ç¿»é¡µæŒ‰é’®å±…ä¸­ */#pagination {  width: 100%;  margin: auto;}/*å“”å“©å“”å“©è§†é¢‘é€‚é…*/.aspect-ratio {  position: relative;  width: 90%;  height: auto;  padding-bottom: 75%;  margin: 3% auto;  text-align: center;}.aspect-ratio iframe {  position: absolute;  width: 100%;  height: 86%;  left: 0;  top: 0;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸ªäººå°æ—¥è®°</title>
      <link href="/diary/index.html"/>
      <url>/diary/index.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="4d1857f52c5969e98a96a8921330e0c4117efb53962c8316a4e3b98f722b2612">7a04f49168c16fa5e6499f3676d544844c6ee71d97efcd86407c182421f8c9748441467c5356d4070dfc0ec89c73cad95fbdbaa1469f3bb0c020d40d393c058e20b17f4293d3831de9ff74ea82c612d5e35d6103e70a5831c9b317c6e3a55a309ab3bc19e68dd232cf553b57a7260b23a88d53d82b1ed65716f80b6d1b6a255ad9531d838eae3db02a68e499acaeaaeec58d4adee4cb4e4a445d95a9337d75a06d8a414424e18732794b3ba843b29fdc9322bd2fe9259ce157adb88932a1ac6e7e4da9c91153a7b24822e4335479e9eda389e904766c8d746e5699d662482a465241272d23afe4785e3ccbfdffb70de24459545fef6bc9b1b2d3ffc1c69ca2f16b97e1695881fba5a3049e2dc9bc9612966cf35c7898b36311d0d7b0b3a8bdf792ba3293c5538de2fdf7c2a78cb0d24b2000a70a862a2b726d49676dee3cde9c6f53b3786172c6117a15d32690b5fad5a06bcb5f5a274f4b219d206122c42364877c4e18a93c20ca747132fbdc89fc14e0164d279f30e7d6c945e0bf40a2806923fbf700c5f07935936af5347cfed170494e9745eef4fa3687c6454adf5b873489aa8fa0a7865f40ce15b75dbaf9938d42fb591f649aa6caf10d31e5d93adc59477e05a58972e0e7dbd1d3e2571c760931c30ef691d608840c315ebc06339c56f10796c905c64e40c449d9a7ff420f7c6542193201ec66c57c07efd823f94a19ad45400ffdb1108ed09861943096078e733b1bbe858cd0f62f76c0a0043fd9ae0425c1d1e368d778b0bb96616da862282e4309cc5a5f5da962ff4a31d174e67670ec8f89d4773660f8697b4f22f7ecc5330174a907813de6a2bc0ee31421a3a3b67a97c6d88507efe9c35baec3fec73dc9abf9bc514580b69ddd7d2cb5aabd9b2f25454a59b9296a4baafd71998cacc6b9e9a96f1a332ee5e888a7101496b373f64f032fe62950a0f36e7400de3da57fb9c929ee0fdc24263a379d27a8ba67811adc97d0a507987d940847fe71f3a810f915dc67b5442fc96f6070fdfb99a47faa9702b549cb10d2ca349139197b20dd7116ed97541ddaf7a40af6e0a6e0bff78136ae24683a01cffbaf0668bcce69a225d08e8128d8043fdc1efb38953bacc858c1a40eb572556c3eed4f0c703cdd991b83b2224f3251d109feed4ad50462ea60d36dcec3ebfc05d91f2b7d1e30c0677fdac3b8d5dfc7a555b283bad498a24a53e6678b9dd79658960f2d98aec4a174ab71db5862aa1f9d64a52d293e8a91ed27b952b7538385e1e3f97f81adcd804cd4504f6e262673d13e0f965026bb32081a27aa044f83427b685b8b3484dfe4a6156b75c501bc9fbd7755259c5dd233e8b0355aaab062efa3691482798679514061e191e07d05935ce45b888c38b868d9912f21a6a4e96fb7d47a2dcd0fbf7c81a15caebc61132f0e122333edca6a7fcc7fc785420e4ffb3c4ec22f6364509cb36c58e7cc032b075c9b61360b5bddef8597449c6b412bff09adf12ed2010052cfad2674d163401b43587e525725f324c5e8a0879289bc6e8e275fadf055a8d42b46710066c641743e482164426863e105a28de30eafd03bd669860230ea3a5d95767951dc1b637726291a215aec43ec84da91a2d692e5c546809024be1ee5c4b44eb06069ab390f6276c08d43265544a394b429d30d2e719babf12cd6f1dc05069b98ddf76b30bd83b391ba98e21222c47dbcd6b221aaf7435aebd86182ec1fb48d403c0cfc620d91a945e5f768cf91a63c914326da19af8d5ffeb60d80609e53fdac73d6e99a1f9fc001c6e416efd39ee1cd570be8397dc5b4c2e199fab2c7c69e07ba3255c9063875a184c3964c46ccc9987337bc534bd80bd0c806cd9d2a010f2e1e91a5f00af5b9f1238a8673fdbadeb852dfd89b27fc60c4e6aec44f543ec006f772c80bd3881dbc8d31ea1ae52b0b2828278aac79d189bd3d506149f0c7b03da250211b9af8ecfbbd632706ff43c1055f8a4941627d3c1cb9a20c120e1f1ff9beb7f8350e0df3a5bc488a5dbeb3d003bcd65c97ad264a9e64f4f994231de8a0327cc7bf89052f0107a52d477595a0710b9bcd3c153d4717a9ca0d4ad99230bef277bdf1cda56ec90785927a11817ea6fe793b3a96ab08dead5c9a8288ad76df3c4793a82e6320c5b16b0ae5f2581927328e3e04eb4f60a6303665f58e513dc6a284cd17da735d91d397f091b4f0d25be0fd4649bdc13efa07be6bc788c7de945912e9d31d6ea20df78148ea48ecfb19295089bd0f89db43ad4479b4fab656129f43353898ca634d051155b462484b50f5df94779c26edd98df23fe2bac293022ee3c7de77264fd261b6c20bd7852e94251f70f3e9557cb4d56155c4181d97ade73b426bd715a52eb3978666dcc4f8a026f0fde26203175478f5e511a2fe363418ac8a047ed9217dc7f5636ef17a8771d074a44830f46dc9433219d9bcd0ed2ee550e03aacb1c1237f0e83ffa2de31f6ac29a5e0ee3732e486a567088d96e5e23a763dc9e12e52de84e2414aaedb388c72ca19cdcafaeb0aebd36309d8bf11b2167d00af2201b66cd3ada93ef33ba7ef6db64a1d28b96fcad0b2ceee215640c097538510afe68a0f7856c3b0bff545561c6c86fe2ecc5cfd59bc9ac6173e9010742b0ebfa61e2424f008e2fa93bc0304d1de72dfc4f384ff9ac72e4559914c9029ceaccfa9f49e4533069c529aadd927558066cd035aa395584cca219f5cdcd402ec2f80998bcc21239706306e174481df56d161e73059728a534445749dd1f25f79239299d54a61ad4e60019f0adaec99f67c3656a76e03801edf4f8f3b1cecea72bf230f334a6faa3d651f344317b489a0913415606b46df71c53646909b18fa94282fbfa31d7d650830a358e88665b3d9c4b405c1edaaa0878c5ac7585273ea22718404b2111377808a3ca12f02d9806782c058d712efecd01966829915fe2724f61459342ea1b91b7f724fa850066d6221c7e2cdeac056439c30d31df2224bb7039daaeb608d04e5b1a58fc9e45043f1378599e3fd07549aa97046b740293df142283f9d0154592666973c332b80cbf5f39aea37a32915288851b4ace1db17d947b6081da22c41d8cc91a09575400ef8f8fa25e7097c4fe90a60c9adef1195581e0477a81b322debc5e443cb09c778780a4a3cfaf03b04e019debd36e2e9377801787908c45bbd9bf7ee4d41f3114c4617d1504087901c271bc695ceb8d4d27520f65bdea93f6ad2dcd2484737467d1bd9506b51f426425b16dbad64a6098789d7eb26fa670dad41f80b0018357f633bada49a71707d4d7ea09ee3d12f6c5c792e1f745767c569051b082820381da084d41fe862ce87cc700131df68dbe74829ca652875f44cdb6af2c89c340e74cc2cd329fb3d963ab520daf1864945905e4411f58b447f692d0a3af272c16ac2aa7757e25967c6c9cb49ad98f0264fffff6d7e7ba5d0a32f38a69d5cd53d5e6d1aaa7caf4969d7e641774f9dea4a5ea25f5ecfd92127bd4685179d92588606a2f5510f7d047e61af3697f5dba58feaa6d41a737453df0043dd794a22e01f418a7c9b087895603e20bd6e7101705777d50ddf54bda6397357fd53a4e433b8cb57c9ec5a52887f41c769bc83d7c9f9b055fb4c2f2bf33fc6dd4f0351b4254288ea40c3ca0838bcd16b3f72088bbe64de517a917c16b1c45ad26478491d4621d924ed597bf47cc752f916a2bfde968d7f79feb0a7dd2346bd36c2d1d481393bf03285350d81eeb37e2da088f376745435ae07bd4297cd304f03487d655c8a432a945f18362c781900df8447514aa8183d781719c59da8be9bcac3a583cbf07198e6578f7bd855c8b824cab41a5995c90479367c4da689e53cebc4eae87cd8e5b1acc8fa918b5ace82441d00a1e7b32cd450fe5013f4c54b2662f88628ed2e0363d961ad7f6e4a32e55705e3c9e88a0ecfbc549a09eb6f7e9865d9339e0842c81af223826e92937c1317aa1d79c3f00d73447a3fd2fe0b3eee490146048ba099d4a4d0978b5c762aece1e99f45d8d64066c94161dacef104bcf72cfeba721c1c3045ec80b18c03040291a72729d12091626ada78179d4519bffdb6204fe0d8329454496093cad3a97cf55adc47d17074981e74acbc629edfe141cdc3186b744ec1ad07f5ea2cd68bc0752fe0cadf3aa181c1a91cbd04569e2866497bd53f7a57dfc8c6651a8d72a2324acd3058ffcac894bc8d8258614ba7b79f7cf0816cb5c5d1d593f2f994978c318804a255afad7f8943c3c079f9b656dacd06b96b0f0334f7d9ee69c43d1a54c673e633d6095b25d7fd9f951ab624585e63aad18e5f0aebf038e8fafc183c95f6db34aa3a769d9317211a0e86d307e872e44a3726be9b21b26940c180aae1e4438b1a41dec6058e02562860b9f842c74dcecf0c27b051f407d3045d47e39d0410abe4d9b050a1adcba3f9ae7aba6b9034240b6a33e1dfd1bcf8c10cdebe3fb3f057b4463e70e6e3429c1edbf34e7946a756c1f4896b8349f60e5cef04cbd1c6c3034485737663cbd9f1bc43f4bec39f9d4f485e35c44cec296f49d65b660c6ec96ee8f109a643f86fcd8523937a327c17d7e57c0b13f3a5cfd5ed76bfb3d477df2ef7e181b599a68bbdee8b506034f4eb5aa1cee6f165a2fafba0dc2a81c8b0bd80007266331378731f32eac65d9672ef94e19ec7b6065aad6c9067db97334e65e5a50caadff996f613abac05b8215d3c006b955ff3e2e4d334daff859f2aa36cbc48df59e59739dab6f0345daaca4bd44144fcfbebeab6f392650386731ab096bc85f289e6196915b47cc112645241e5fd806b180652462a90ef440f0d60ac9a48d7c3cc7b296ea236c5aeee502b42ca133898dea291dc7c2d7484f6a232e89da5a674b15460494ded39843c081e8051d0de5a35ac6c25ba1f0eeba158f239ffbc38c33654bbd65edbd44fa0f12386d4e9bee024cad92c5c6e465d1e0a273f7adbc7e942d9b50f8ec59990b8cec550885c50901439adb31960f384b6725391ee6daa95cda81fb05a783917ba6cce46dea3a687d949fed518f78b785ad37619330c6a6ecdebc3e798894ce7539bb6feb4029ff623cbd203c6130770bbdc78d082d3cf863ad7d5420b917c6724f414121aadda29bebd132232e07a5a5d866afcf7e2d15a27d049f1116260a0bb8f1c932307b70378d713e4934eaab25d40b50abcae9b30dbaad65f202447c6f3db6632540831af2a53411610255d92e4f3bfd3bbf7b3f41ba901c1dd6e7340da24cf2be34322b39540390077ee12f1c12accff90b666ad32c8fa6e1e9be88c5e3997b430909c22f8e1f7034c1cb4ccc184c14e8a947373762128140d1cc49c0a6c916dc93abbc3b6feb820f57fdeb774be2f26c7efe1f4b86ceb08e4141612ef535aa8301a21ca4bb0e4772fb26e0b21ccf7f72eb7918bc247d689107d67e45e4d1cff6b2ef08874323badf1ef2d1add956a387bd5ac406712869cc066b9ba785fe2510e43cc0efade960a23ea251deb7b655fc2886ae5213868c6f601a79317d0c4076cc857821aa9dcf7017a805f636541fd2a9e61b9a5945a779bec41ebf6ec038eb3c9d9785d33496331245fb9354e3c2ec6d97aa49efccee10458be6f9c7b5a9d51af0c22438c32bdc190f6f4a6c1e8463db05d5f7be649685d501c6c7a5573e9914e2eeb076317610662aa91dffa64df7fc8cf6d186e8c6e89097859bce1655658ba62bea8bdc23fc03d353fbc9c82282dce7a4f4fc73f1bcfb4afcb1d7a2a861524b7bd232fa3b178cd9dd48dd20426497c447143c8f6881b1f2010c0ee2e26700ffb45f2c71b11d12dc9fe39807a313c44d0a3c921794fd18f570e1083ba95f7cb481e795d4965c17fd54b3c1f4b8486f0c63ab1d44027ade663bd4ef66df5ef6556235f48d2d1c2783829061132f37e420dea2b1cf69fd61410f3283b7eda20797cb11d9e95d67a75598f7028f7838e41a1ed419d8171</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-shrink">      <input class="hbe hbe-input-field hbe-input-field-shrink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-shrink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-shrink">åˆ«çŒœäº†åˆ«çŒœäº†</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>link</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>éŸ³ä¹</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>movies</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰è¶£ã®æ–‡ç« </title>
      <link href="/%E6%9C%89%E8%B6%A3%E3%81%AE%E6%96%87%E7%AB%A0/index.html"/>
      <url>/%E6%9C%89%E8%B6%A3%E3%81%AE%E6%96%87%E7%AB%A0/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>23Â·12Â·23</title>
      <link href="/diary/23%C2%B712%C2%B723/index.html"/>
      <url>/diary/23%C2%B712%C2%B723/index.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, è¿™ä¸ªå¯†ç çœ‹ç€ä¸å¤ªå¯¹, è¯·å†è¯•è¯•." data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="fac6055b69e98f52462d9cdbb2fdd1ff07debe2c5f3f2f531b8cb4f1d2ae9b13">7a04f49168c16fa5e6499f3676d544847369460cb37b8a9320df2540de47878192e3229550a92ebeb8cdebaea7cb2f0f</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-shrink">      <input class="hbe hbe-input-field hbe-input-field-shrink" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-shrink" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-shrink">åˆ«çŒœäº†åˆ«çŒœäº†</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
    </entry>
    
    
  
</search>
